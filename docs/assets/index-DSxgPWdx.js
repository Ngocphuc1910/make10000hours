var Xke=Object.defineProperty;var Zke=(n,e,t)=>e in n?Xke(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var hn=(n,e,t)=>Zke(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var AM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Br(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Qke(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var mF={exports:{}},EA={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GX;function Jke(){if(GX)return EA;GX=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return EA.Fragment=e,EA.jsx=t,EA.jsxs=t,EA}var WX;function eIe(){return WX||(WX=1,mF.exports=Jke()),mF.exports}var E=eIe(),vF={exports:{}},ir={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YX;function tIe(){if(YX)return ir;YX=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(z){return z===null||typeof z!="object"?null:(z=d&&z[d]||z["@@iterator"],typeof z=="function"?z:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(z,oe,le){this.props=z,this.context=oe,this.refs=v,this.updater=le||f}y.prototype.isReactComponent={},y.prototype.setState=function(z,oe){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,oe,"setState")},y.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function w(){}w.prototype=y.prototype;function _(z,oe,le){this.props=z,this.context=oe,this.refs=v,this.updater=le||f}var S=_.prototype=new w;S.constructor=_,m(S,y.prototype),S.isPureReactComponent=!0;var A=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function M(z,oe,le,ee,be,he){return le=he.ref,{$$typeof:n,type:z,key:oe,ref:le!==void 0?le:null,props:he}}function P(z,oe){return M(z.type,oe,void 0,void 0,void 0,z.props)}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function j(z){var oe={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(le){return oe[le]})}var L=/\/+/g;function B(z,oe){return typeof z=="object"&&z!==null&&z.key!=null?j(""+z.key):oe.toString(36)}function $(){}function Y(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then($,$):(z.status="pending",z.then(function(oe){z.status==="pending"&&(z.status="fulfilled",z.value=oe)},function(oe){z.status==="pending"&&(z.status="rejected",z.reason=oe)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function q(z,oe,le,ee,be){var he=typeof z;(he==="undefined"||he==="boolean")&&(z=null);var pe=!1;if(z===null)pe=!0;else switch(he){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(z.$$typeof){case n:case e:pe=!0;break;case u:return pe=z._init,q(pe(z._payload),oe,le,ee,be)}}if(pe)return be=be(z),pe=ee===""?"."+B(z,0):ee,A(be)?(le="",pe!=null&&(le=pe.replace(L,"$&/")+"/"),q(be,oe,le,"",function(Se){return Se})):be!=null&&(O(be)&&(be=P(be,le+(be.key==null||z&&z.key===be.key?"":(""+be.key).replace(L,"$&/")+"/")+pe)),oe.push(be)),1;pe=0;var ct=ee===""?".":ee+":";if(A(z))for(var Be=0;Be<z.length;Be++)ee=z[Be],he=ct+B(ee,Be),pe+=q(ee,oe,le,he,be);else if(Be=h(z),typeof Be=="function")for(z=Be.call(z),Be=0;!(ee=z.next()).done;)ee=ee.value,he=ct+B(ee,Be++),pe+=q(ee,oe,le,he,be);else if(he==="object"){if(typeof z.then=="function")return q(Y(z),oe,le,ee,be);throw oe=String(z),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return pe}function W(z,oe,le){if(z==null)return z;var ee=[],be=0;return q(z,ee,"","",function(he){return oe.call(le,he,be++)}),ee}function X(z){if(z._status===-1){var oe=z._result;oe=oe(),oe.then(function(le){(z._status===0||z._status===-1)&&(z._status=1,z._result=le)},function(le){(z._status===0||z._status===-1)&&(z._status=2,z._result=le)}),z._status===-1&&(z._status=0,z._result=oe)}if(z._status===1)return z._result.default;throw z._result}var te=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function re(){}return ir.Children={map:W,forEach:function(z,oe,le){W(z,function(){oe.apply(this,arguments)},le)},count:function(z){var oe=0;return W(z,function(){oe++}),oe},toArray:function(z){return W(z,function(oe){return oe})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},ir.Component=y,ir.Fragment=t,ir.Profiler=i,ir.PureComponent=_,ir.StrictMode=r,ir.Suspense=l,ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,ir.__COMPILER_RUNTIME={__proto__:null,c:function(z){return C.H.useMemoCache(z)}},ir.cache=function(z){return function(){return z.apply(null,arguments)}},ir.cloneElement=function(z,oe,le){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ee=m({},z.props),be=z.key,he=void 0;if(oe!=null)for(pe in oe.ref!==void 0&&(he=void 0),oe.key!==void 0&&(be=""+oe.key),oe)!D.call(oe,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&oe.ref===void 0||(ee[pe]=oe[pe]);var pe=arguments.length-2;if(pe===1)ee.children=le;else if(1<pe){for(var ct=Array(pe),Be=0;Be<pe;Be++)ct[Be]=arguments[Be+2];ee.children=ct}return M(z.type,be,void 0,void 0,he,ee)},ir.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},ir.createElement=function(z,oe,le){var ee,be={},he=null;if(oe!=null)for(ee in oe.key!==void 0&&(he=""+oe.key),oe)D.call(oe,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(be[ee]=oe[ee]);var pe=arguments.length-2;if(pe===1)be.children=le;else if(1<pe){for(var ct=Array(pe),Be=0;Be<pe;Be++)ct[Be]=arguments[Be+2];be.children=ct}if(z&&z.defaultProps)for(ee in pe=z.defaultProps,pe)be[ee]===void 0&&(be[ee]=pe[ee]);return M(z,he,void 0,void 0,null,be)},ir.createRef=function(){return{current:null}},ir.forwardRef=function(z){return{$$typeof:s,render:z}},ir.isValidElement=O,ir.lazy=function(z){return{$$typeof:u,_payload:{_status:-1,_result:z},_init:X}},ir.memo=function(z,oe){return{$$typeof:c,type:z,compare:oe===void 0?null:oe}},ir.startTransition=function(z){var oe=C.T,le={};C.T=le;try{var ee=z(),be=C.S;be!==null&&be(le,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(re,te)}catch(he){te(he)}finally{C.T=oe}},ir.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},ir.use=function(z){return C.H.use(z)},ir.useActionState=function(z,oe,le){return C.H.useActionState(z,oe,le)},ir.useCallback=function(z,oe){return C.H.useCallback(z,oe)},ir.useContext=function(z){return C.H.useContext(z)},ir.useDebugValue=function(){},ir.useDeferredValue=function(z,oe){return C.H.useDeferredValue(z,oe)},ir.useEffect=function(z,oe,le){var ee=C.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(z,oe)},ir.useId=function(){return C.H.useId()},ir.useImperativeHandle=function(z,oe,le){return C.H.useImperativeHandle(z,oe,le)},ir.useInsertionEffect=function(z,oe){return C.H.useInsertionEffect(z,oe)},ir.useLayoutEffect=function(z,oe){return C.H.useLayoutEffect(z,oe)},ir.useMemo=function(z,oe){return C.H.useMemo(z,oe)},ir.useOptimistic=function(z,oe){return C.H.useOptimistic(z,oe)},ir.useReducer=function(z,oe,le){return C.H.useReducer(z,oe,le)},ir.useRef=function(z){return C.H.useRef(z)},ir.useState=function(z){return C.H.useState(z)},ir.useSyncExternalStore=function(z,oe,le){return C.H.useSyncExternalStore(z,oe,le)},ir.useTransition=function(){return C.H.useTransition()},ir.version="19.1.0",ir}var KX;function qq(){return KX||(KX=1,vF.exports=tIe()),vF.exports}var K=qq();const ye=Br(K);var yF={exports:{}},AA={},bF={exports:{}},wF={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XX;function nIe(){return XX||(XX=1,function(n){function e(W,X){var te=W.length;W.push(X);e:for(;0<te;){var re=te-1>>>1,z=W[re];if(0<i(z,X))W[re]=X,W[te]=z,te=re;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var X=W[0],te=W.pop();if(te!==X){W[0]=te;e:for(var re=0,z=W.length,oe=z>>>1;re<oe;){var le=2*(re+1)-1,ee=W[le],be=le+1,he=W[be];if(0>i(ee,te))be<z&&0>i(he,ee)?(W[re]=he,W[be]=te,re=be):(W[re]=ee,W[le]=te,re=le);else if(be<z&&0>i(he,te))W[re]=he,W[be]=te,re=be;else break e}}return X}function i(W,X){var te=W.sortIndex-X.sortIndex;return te!==0?te:W.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function A(W){for(var X=t(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=W)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function C(W){if(v=!1,A(W),!m)if(t(l)!==null)m=!0,D||(D=!0,B());else{var X=t(c);X!==null&&q(C,X.startTime-W)}}var D=!1,M=-1,P=5,O=-1;function j(){return y?!0:!(n.unstable_now()-O<P)}function L(){if(y=!1,D){var W=n.unstable_now();O=W;var X=!0;try{e:{m=!1,v&&(v=!1,_(M),M=-1),f=!0;var te=h;try{t:{for(A(W),d=t(l);d!==null&&!(d.expirationTime>W&&j());){var re=d.callback;if(typeof re=="function"){d.callback=null,h=d.priorityLevel;var z=re(d.expirationTime<=W);if(W=n.unstable_now(),typeof z=="function"){d.callback=z,A(W),X=!0;break t}d===t(l)&&r(l),A(W)}else r(l);d=t(l)}if(d!==null)X=!0;else{var oe=t(c);oe!==null&&q(C,oe.startTime-W),X=!1}}break e}finally{d=null,h=te,f=!1}X=void 0}}finally{X?B():D=!1}}}var B;if(typeof S=="function")B=function(){S(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Y=$.port2;$.port1.onmessage=L,B=function(){Y.postMessage(null)}}else B=function(){w(L,0)};function q(W,X){M=w(function(){W(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_next=function(W){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var te=h;h=X;try{return W()}finally{h=te}},n.unstable_requestPaint=function(){y=!0},n.unstable_runWithPriority=function(W,X){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var te=h;h=W;try{return X()}finally{h=te}},n.unstable_scheduleCallback=function(W,X,te){var re=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?re+te:re):te=re,W){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=te+z,W={id:u++,callback:X,priorityLevel:W,startTime:te,expirationTime:z,sortIndex:-1},te>re?(W.sortIndex=te,e(c,W),t(l)===null&&W===t(c)&&(v?(_(M),M=-1):v=!0,q(C,te-re))):(W.sortIndex=z,e(l,W),m||f||(m=!0,D||(D=!0,B()))),W},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(W){var X=h;return function(){var te=h;h=X;try{return W.apply(this,arguments)}finally{h=te}}}}(wF)),wF}var ZX;function rIe(){return ZX||(ZX=1,bF.exports=nIe()),bF.exports}var _F={exports:{}},Is={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QX;function iIe(){if(QX)return Is;QX=1;var n=qq();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(l,c,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:u}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Is.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Is.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,u)},Is.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},Is.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Is.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Is.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,d=s(u,c.crossOrigin),h=typeof c.integrity=="string"?c.integrity:void 0,f=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:h,fetchPriority:f}):u==="script"&&r.d.X(l,{crossOrigin:d,integrity:h,fetchPriority:f,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Is.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=s(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Is.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,d=s(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Is.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=s(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Is.requestFormReset=function(l){r.d.r(l)},Is.unstable_batchedUpdates=function(l,c){return l(c)},Is.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},Is.useFormStatus=function(){return o.H.useHostTransitionStatus()},Is.version="19.1.0",Is}var JX;function gge(){if(JX)return _F.exports;JX=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_F.exports=iIe(),_F.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eZ;function aIe(){if(eZ)return AA;eZ=1;var n=rIe(),e=qq(),t=gge();function r(g){var b="https://react.dev/errors/"+g;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)b+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function a(g){var b=g,T=g;if(g.alternate)for(;b.return;)b=b.return;else{g=b;do b=g,(b.flags&4098)!==0&&(T=b.return),g=b.return;while(g)}return b.tag===3?T:null}function o(g){if(g.tag===13){var b=g.memoizedState;if(b===null&&(g=g.alternate,g!==null&&(b=g.memoizedState)),b!==null)return b.dehydrated}return null}function s(g){if(a(g)!==g)throw Error(r(188))}function l(g){var b=g.alternate;if(!b){if(b=a(g),b===null)throw Error(r(188));return b!==g?null:g}for(var T=g,I=b;;){var F=T.return;if(F===null)break;var U=F.alternate;if(U===null){if(I=F.return,I!==null){T=I;continue}break}if(F.child===U.child){for(U=F.child;U;){if(U===T)return s(F),g;if(U===I)return s(F),b;U=U.sibling}throw Error(r(188))}if(T.return!==I.return)T=F,I=U;else{for(var J=!1,ie=F.child;ie;){if(ie===T){J=!0,T=F,I=U;break}if(ie===I){J=!0,I=F,T=U;break}ie=ie.sibling}if(!J){for(ie=U.child;ie;){if(ie===T){J=!0,T=U,I=F;break}if(ie===I){J=!0,I=U,T=F;break}ie=ie.sibling}if(!J)throw Error(r(189))}}if(T.alternate!==I)throw Error(r(190))}if(T.tag!==3)throw Error(r(188));return T.stateNode.current===T?g:b}function c(g){var b=g.tag;if(b===5||b===26||b===27||b===6)return g;for(g=g.child;g!==null;){if(b=c(g),b!==null)return b;g=g.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(g){return g===null||typeof g!="object"?null:(g=L&&g[L]||g["@@iterator"],typeof g=="function"?g:null)}var $=Symbol.for("react.client.reference");function Y(g){if(g==null)return null;if(typeof g=="function")return g.$$typeof===$?null:g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case m:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case C:return"Suspense";case D:return"SuspenseList";case O:return"Activity"}if(typeof g=="object")switch(g.$$typeof){case f:return"Portal";case S:return(g.displayName||"Context")+".Provider";case _:return(g._context.displayName||"Context")+".Consumer";case A:var b=g.render;return g=g.displayName,g||(g=b.displayName||b.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case M:return b=g.displayName||null,b!==null?b:Y(g.type)||"Memo";case P:b=g._payload,g=g._init;try{return Y(g(b))}catch{}}return null}var q=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},re=[],z=-1;function oe(g){return{current:g}}function le(g){0>z||(g.current=re[z],re[z]=null,z--)}function ee(g,b){z++,re[z]=g.current,g.current=b}var be=oe(null),he=oe(null),pe=oe(null),ct=oe(null);function Be(g,b){switch(ee(pe,b),ee(he,g),ee(be,null),b.nodeType){case 9:case 11:g=(g=b.documentElement)&&(g=g.namespaceURI)?Jm(g):0;break;default:if(g=b.tagName,b=b.namespaceURI)b=Jm(b),g=yM(b,g);else switch(g){case"svg":g=1;break;case"math":g=2;break;default:g=0}}le(be),ee(be,g)}function Se(){le(be),le(he),le(pe)}function _e(g){g.memoizedState!==null&&ee(ct,g);var b=be.current,T=yM(b,g.type);b!==T&&(ee(he,g),ee(be,T))}function me(g){he.current===g&&(le(be),le(he)),ct.current===g&&(le(ct),G0._currentValue=te)}var fe=Object.prototype.hasOwnProperty,Ge=n.unstable_scheduleCallback,Ve=n.unstable_cancelCallback,nt=n.unstable_shouldYield,we=n.unstable_requestPaint,rt=n.unstable_now,on=n.unstable_getCurrentPriorityLevel,Mt=n.unstable_ImmediatePriority,kn=n.unstable_UserBlockingPriority,nr=n.unstable_NormalPriority,Le=n.unstable_LowPriority,Yt=n.unstable_IdlePriority,xn=n.log,Ut=n.unstable_setDisableYieldValue,Ae=null,je=null;function tt(g){if(typeof xn=="function"&&Ut(g),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Ae,g)}catch{}}var Et=Math.clz32?Math.clz32:vn,pt=Math.log,Rr=Math.LN2;function vn(g){return g>>>=0,g===0?32:31-(pt(g)/Rr|0)|0}var Ur=256,Li=4194304;function un(g){var b=g&42;if(b!==0)return b;switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return g&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return g}}function dr(g,b,T){var I=g.pendingLanes;if(I===0)return 0;var F=0,U=g.suspendedLanes,J=g.pingedLanes;g=g.warmLanes;var ie=I&134217727;return ie!==0?(I=ie&~U,I!==0?F=un(I):(J&=ie,J!==0?F=un(J):T||(T=ie&~g,T!==0&&(F=un(T))))):(ie=I&~U,ie!==0?F=un(ie):J!==0?F=un(J):T||(T=I&~g,T!==0&&(F=un(T)))),F===0?0:b!==0&&b!==F&&(b&U)===0&&(U=F&-F,T=b&-b,U>=T||U===32&&(T&4194048)!==0)?b:F}function wi(g,b){return(g.pendingLanes&~(g.suspendedLanes&~g.pingedLanes)&b)===0}function ze(g,b){switch(g){case 1:case 2:case 4:case 8:case 64:return b+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rr(){var g=Ur;return Ur<<=1,(Ur&4194048)===0&&(Ur=256),g}function ji(){var g=Li;return Li<<=1,(Li&62914560)===0&&(Li=4194304),g}function Ln(g){for(var b=[],T=0;31>T;T++)b.push(g);return b}function Fi(g,b){g.pendingLanes|=b,b!==268435456&&(g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0)}function Co(g,b,T,I,F,U){var J=g.pendingLanes;g.pendingLanes=T,g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0,g.expiredLanes&=T,g.entangledLanes&=T,g.errorRecoveryDisabledLanes&=T,g.shellSuspendCounter=0;var ie=g.entanglements,de=g.expirationTimes,ke=g.hiddenUpdates;for(T=J&~T;0<T;){var qe=31-Et(T),Xe=1<<qe;ie[qe]=0,de[qe]=-1;var Ie=ke[qe];if(Ie!==null)for(ke[qe]=null,qe=0;qe<Ie.length;qe++){var Oe=Ie[qe];Oe!==null&&(Oe.lane&=-536870913)}T&=~Xe}I!==0&&ae(g,I,0),U!==0&&F===0&&g.tag!==0&&(g.suspendedLanes|=U&~(J&~b))}function ae(g,b,T){g.pendingLanes|=b,g.suspendedLanes&=~b;var I=31-Et(b);g.entangledLanes|=b,g.entanglements[I]=g.entanglements[I]|1073741824|T&4194090}function ce(g,b){var T=g.entangledLanes|=b;for(g=g.entanglements;T;){var I=31-Et(T),F=1<<I;F&b|g[I]&b&&(g[I]|=b),T&=~F}}function ge(g){switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=128;break;case 268435456:g=134217728;break;default:g=0}return g}function Me(g){return g&=-g,2<g?8<g?(g&134217727)!==0?32:268435456:8:2}function it(){var g=X.p;return g!==0?g:(g=window.event,g===void 0?32:K0(g.type))}function xt(g,b){var T=X.p;try{return X.p=g,b()}finally{X.p=T}}var Pt=Math.random().toString(36).slice(2),gt="__reactFiber$"+Pt,Nt="__reactProps$"+Pt,Tt="__reactContainer$"+Pt,qt="__reactEvents$"+Pt,Hn="__reactListeners$"+Pt,di="__reactHandles$"+Pt,Ce="__reactResources$"+Pt,Fe="__reactMarker$"+Pt;function Qe(g){delete g[gt],delete g[Nt],delete g[qt],delete g[Hn],delete g[di]}function vt(g){var b=g[gt];if(b)return b;for(var T=g.parentNode;T;){if(b=T[Tt]||T[gt]){if(T=b.alternate,b.child!==null||T!==null&&T.child!==null)for(g=wM(g);g!==null;){if(T=g[gt])return T;g=wM(g)}return b}g=T,T=g.parentNode}return null}function ot(g){if(g=g[gt]||g[Tt]){var b=g.tag;if(b===5||b===6||b===13||b===26||b===27||b===3)return g}return null}function wt(g){var b=g.tag;if(b===5||b===26||b===27||b===6)return g.stateNode;throw Error(r(33))}function mt(g){var b=g[Ce];return b||(b=g[Ce]={hoistableStyles:new Map,hoistableScripts:new Map}),b}function Kt(g){g[Fe]=!0}var Sn=new Set,sn={};function Xt(g,b){jn(g,b),jn(g+"Capture",b)}function jn(g,b){for(sn[g]=b,g=0;g<b.length;g++)Sn.add(b[g])}var ni=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lt={},ri={};function Bn(g){return fe.call(ri,g)?!0:fe.call(Lt,g)?!1:ni.test(g)?ri[g]=!0:(Lt[g]=!0,!1)}function _a(g,b,T){if(Bn(b))if(T===null)g.removeAttribute(b);else{switch(typeof T){case"undefined":case"function":case"symbol":g.removeAttribute(b);return;case"boolean":var I=b.toLowerCase().slice(0,5);if(I!=="data-"&&I!=="aria-"){g.removeAttribute(b);return}}g.setAttribute(b,""+T)}}function $i(g,b,T){if(T===null)g.removeAttribute(b);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(b);return}g.setAttribute(b,""+T)}}function Qt(g,b,T,I){if(I===null)g.removeAttribute(T);else{switch(typeof I){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(T);return}g.setAttributeNS(b,T,""+I)}}var Pa,ph;function sa(g){if(Pa===void 0)try{throw Error()}catch(T){var b=T.stack.trim().match(/\n( *(at )?)/);Pa=b&&b[1]||"",ph=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pa+g+ph}var ra=!1;function Qg(g,b){if(!g||ra)return"";ra=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var I={DetermineComponentFrameRoot:function(){try{if(b){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Oe){var Ie=Oe}Reflect.construct(g,[],Xe)}else{try{Xe.call()}catch(Oe){Ie=Oe}g.call(Xe.prototype)}}else{try{throw Error()}catch(Oe){Ie=Oe}(Xe=g())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Oe){if(Oe&&Ie&&typeof Oe.stack=="string")return[Oe.stack,Ie.stack]}return[null,null]}};I.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(I.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(I.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=I.DetermineComponentFrameRoot(),J=U[0],ie=U[1];if(J&&ie){var de=J.split(`
`),ke=ie.split(`
`);for(F=I=0;I<de.length&&!de[I].includes("DetermineComponentFrameRoot");)I++;for(;F<ke.length&&!ke[F].includes("DetermineComponentFrameRoot");)F++;if(I===de.length||F===ke.length)for(I=de.length-1,F=ke.length-1;1<=I&&0<=F&&de[I]!==ke[F];)F--;for(;1<=I&&0<=F;I--,F--)if(de[I]!==ke[F]){if(I!==1||F!==1)do if(I--,F--,0>F||de[I]!==ke[F]){var qe=`
`+de[I].replace(" at new "," at ");return g.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",g.displayName)),qe}while(1<=I&&0<=F);break}}}finally{ra=!1,Error.prepareStackTrace=T}return(T=g?g.displayName||g.name:"")?sa(T):""}function kl(g){switch(g.tag){case 26:case 27:case 5:return sa(g.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 15:return Qg(g.type,!1);case 11:return Qg(g.type.render,!1);case 1:return Qg(g.type,!0);case 31:return sa("Activity");default:return""}}function Wf(g){try{var b="";do b+=kl(g),g=g.return;while(g);return b}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function qa(g){switch(typeof g){case"bigint":case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function Yf(g){var b=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function Ry(g){var b=Yf(g)?"checked":"value",T=Object.getOwnPropertyDescriptor(g.constructor.prototype,b),I=""+g[b];if(!g.hasOwnProperty(b)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var F=T.get,U=T.set;return Object.defineProperty(g,b,{configurable:!0,get:function(){return F.call(this)},set:function(J){I=""+J,U.call(this,J)}}),Object.defineProperty(g,b,{enumerable:T.enumerable}),{getValue:function(){return I},setValue:function(J){I=""+J},stopTracking:function(){g._valueTracker=null,delete g[b]}}}}function gh(g){g._valueTracker||(g._valueTracker=Ry(g))}function Ny(g){if(!g)return!1;var b=g._valueTracker;if(!b)return!0;var T=b.getValue(),I="";return g&&(I=Yf(g)?g.checked?"true":"false":g.value),g=I,g!==T?(b.setValue(g),!0):!1}function Xs(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}var Kf=/[\n"\\]/g;function la(g){return g.replace(Kf,function(b){return"\\"+b.charCodeAt(0).toString(16)+" "})}function Ga(g,b,T,I,F,U,J,ie){g.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?g.type=J:g.removeAttribute("type"),b!=null?J==="number"?(b===0&&g.value===""||g.value!=b)&&(g.value=""+qa(b)):g.value!==""+qa(b)&&(g.value=""+qa(b)):J!=="submit"&&J!=="reset"||g.removeAttribute("value"),b!=null?rd(g,J,qa(b)):T!=null?rd(g,J,qa(T)):I!=null&&g.removeAttribute("value"),F==null&&U!=null&&(g.defaultChecked=!!U),F!=null&&(g.checked=F&&typeof F!="function"&&typeof F!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?g.name=""+qa(ie):g.removeAttribute("name")}function mh(g,b,T,I,F,U,J,ie){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(g.type=U),b!=null||T!=null){if(!(U!=="submit"&&U!=="reset"||b!=null))return;T=T!=null?""+qa(T):"",b=b!=null?""+qa(b):T,ie||b===g.value||(g.value=b),g.defaultValue=b}I=I??F,I=typeof I!="function"&&typeof I!="symbol"&&!!I,g.checked=ie?g.checked:!!I,g.defaultChecked=!!I,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(g.name=J)}function rd(g,b,T){b==="number"&&Xs(g.ownerDocument)===g||g.defaultValue===""+T||(g.defaultValue=""+T)}function Ko(g,b,T,I){if(g=g.options,b){b={};for(var F=0;F<T.length;F++)b["$"+T[F]]=!0;for(T=0;T<g.length;T++)F=b.hasOwnProperty("$"+g[T].value),g[T].selected!==F&&(g[T].selected=F),F&&I&&(g[T].defaultSelected=!0)}else{for(T=""+qa(T),b=null,F=0;F<g.length;F++){if(g[F].value===T){g[F].selected=!0,I&&(g[F].defaultSelected=!0);return}b!==null||g[F].disabled||(b=g[F])}b!==null&&(b.selected=!0)}}function Kr(g,b,T){if(b!=null&&(b=""+qa(b),b!==g.value&&(g.value=b),T==null)){g.defaultValue!==b&&(g.defaultValue=b);return}g.defaultValue=T!=null?""+qa(T):""}function Xf(g,b,T,I){if(b==null){if(I!=null){if(T!=null)throw Error(r(92));if(q(I)){if(1<I.length)throw Error(r(93));I=I[0]}T=I}T==null&&(T=""),b=T}T=qa(b),g.defaultValue=T,I=g.textContent,I===T&&I!==""&&I!==null&&(g.value=I)}function Zs(g,b){if(b){var T=g.firstChild;if(T&&T===g.lastChild&&T.nodeType===3){T.nodeValue=b;return}}g.textContent=b}var Oa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sc(g,b,T){var I=b.indexOf("--")===0;T==null||typeof T=="boolean"||T===""?I?g.setProperty(b,""):b==="float"?g.cssFloat="":g[b]="":I?g.setProperty(b,T):typeof T!="number"||T===0||Oa.has(b)?b==="float"?g.cssFloat=T:g[b]=(""+T).trim():g[b]=T+"px"}function Jg(g,b,T){if(b!=null&&typeof b!="object")throw Error(r(62));if(g=g.style,T!=null){for(var I in T)!T.hasOwnProperty(I)||b!=null&&b.hasOwnProperty(I)||(I.indexOf("--")===0?g.setProperty(I,""):I==="float"?g.cssFloat="":g[I]="");for(var F in b)I=b[F],b.hasOwnProperty(F)&&T[F]!==I&&sc(g,F,I)}else for(var U in b)b.hasOwnProperty(U)&&sc(g,U,b[U])}function vh(g){if(g.indexOf("-")===-1)return!1;switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yh(g){return u_.test(""+g)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":g}var ys=null;function Qs(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var Do=null,Il=null;function em(g){var b=ot(g);if(b&&(g=b.stateNode)){var T=g[Nt]||null;e:switch(g=b.stateNode,b.type){case"input":if(Ga(g,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name),b=T.name,T.type==="radio"&&b!=null){for(T=g;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll('input[name="'+la(""+b)+'"][type="radio"]'),b=0;b<T.length;b++){var I=T[b];if(I!==g&&I.form===g.form){var F=I[Nt]||null;if(!F)throw Error(r(90));Ga(I,F.value,F.defaultValue,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name)}}for(b=0;b<T.length;b++)I=T[b],I.form===g.form&&Ny(I)}break e;case"textarea":Kr(g,T.value,T.defaultValue);break e;case"select":b=T.value,b!=null&&Ko(g,!!T.multiple,b,!1)}}}var bs=!1;function d_(g,b,T){if(bs)return g(b,T);bs=!0;try{var I=g(b);return I}finally{if(bs=!1,(Do!==null||Il!==null)&&(A0(),Do&&(b=Do,g=Il,Il=Do=null,em(b),g)))for(b=0;b<g.length;b++)em(g[b])}}function Zf(g,b){var T=g.stateNode;if(T===null)return null;var I=T[Nt]||null;if(I===null)return null;T=I[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(g=g.type,I=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!I;break e;default:g=!1}if(g)return null;if(T&&typeof T!="function")throw Error(r(231,b,typeof T));return T}var lc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),so=!1;if(lc)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){so=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{so=!1}var Ml=null,cc=null,uc=null;function Qf(){if(uc)return uc;var g,b=cc,T=b.length,I,F="value"in Ml?Ml.value:Ml.textContent,U=F.length;for(g=0;g<T&&b[g]===F[g];g++);var J=T-g;for(I=1;I<=J&&b[T-I]===F[U-I];I++);return uc=F.slice(g,1<I?1-I:void 0)}function dc(g){var b=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&b===13&&(g=13)):g=b,g===10&&(g=13),32<=g||g===13?g:0}function Xc(){return!0}function tm(){return!1}function ca(g){function b(T,I,F,U,J){this._reactName=T,this._targetInst=F,this.type=I,this.nativeEvent=U,this.target=J,this.currentTarget=null;for(var ie in g)g.hasOwnProperty(ie)&&(T=g[ie],this[ie]=T?T(U):U[ie]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?Xc:tm,this.isPropagationStopped=tm,this}return u(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=Xc)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=Xc)},persist:function(){},isPersistent:Xc}),b}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zc=ca(pr),id=u({},pr,{view:0,detail:0}),Ly=ca(id),nm,bh,Js,wh=u({},id,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jf,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==Js&&(Js&&g.type==="mousemove"?(nm=g.screenX-Js.screenX,bh=g.screenY-Js.screenY):bh=nm=0,Js=g),nm)},movementY:function(g){return"movementY"in g?g.movementY:bh}}),Pl=ca(wh),jy=u({},wh,{dataTransfer:0}),Qc=ca(jy),hc=u({},id,{relatedTarget:0}),rm=ca(hc),Fy=u({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),im=ca(Fy),h_=u({},pr,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),ad=ca(h_),gn=u({},pr,{data:0}),_h=ca(gn),Jc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ct={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $y(g){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(g):(g=Ct[g])?!!b[g]:!1}function Jf(){return $y}var Ii=u({},id,{key:function(g){if(g.key){var b=Jc[g.key]||g.key;if(b!=="Unidentified")return b}return g.type==="keypress"?(g=dc(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?gr[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jf,charCode:function(g){return g.type==="keypress"?dc(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?dc(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),ep=ca(Ii),Wa=u({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fc=ca(Wa),eu=u({},id,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jf}),f_=ca(eu),p_=u({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),g_=ca(p_),am=u({},wh,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),om=ca(am),lo=u({},pr,{newState:0,oldState:0}),m_=ca(lo),v_=[9,13,27,32],tu=lc&&"CompositionEvent"in window,R=null;lc&&"documentMode"in document&&(R=document.documentMode);var G=lc&&"TextEvent"in window&&!R,Q=lc&&(!tu||R&&8<R&&11>=R),se=" ",Ee=!1;function Ne(g,b){switch(g){case"keyup":return v_.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ht(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var lr=!1;function Ra(g,b){switch(g){case"compositionend":return ht(b);case"keypress":return b.which!==32?null:(Ee=!0,se);case"textInput":return g=b.data,g===se&&Ee?null:g;default:return null}}function Kn(g,b){if(lr)return g==="compositionend"||!tu&&Ne(g,b)?(g=Qf(),uc=cc=Ml=null,lr=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return Q&&b.locale!=="ko"?null:b.data;default:return null}}var Ya={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ki(g){var b=g&&g.nodeName&&g.nodeName.toLowerCase();return b==="input"?!!Ya[g.type]:b==="textarea"}function el(g,b,T,I){Do?Il?Il.push(I):Il=[I]:Do=I,b=L0(b,"onChange"),0<b.length&&(T=new Zc("onChange","change",null,T,I),g.push({event:T,listeners:b}))}var co=null,pc=null;function By(g){fM(g,0)}function y_(g){var b=wt(g);if(Ny(b))return g}function nu(g,b){if(g==="change")return b}var ko=!1;if(lc){var KT;if(lc){var tp="oninput"in document;if(!tp){var N2=document.createElement("div");N2.setAttribute("oninput","return;"),tp=typeof N2.oninput=="function"}KT=tp}else KT=!1;ko=KT&&(!document.documentMode||9<document.documentMode)}function L2(){co&&(co.detachEvent("onpropertychange",Uy),pc=co=null)}function Uy(g){if(g.propertyName==="value"&&y_(pc)){var b=[];el(b,pc,g,Qs(g)),d_(By,b)}}function b_(g,b,T){g==="focusin"?(L2(),co=b,pc=T,co.attachEvent("onpropertychange",Uy)):g==="focusout"&&L2()}function XT(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return y_(pc)}function ZT(g,b){if(g==="click")return y_(b)}function QT(g,b){if(g==="input"||g==="change")return y_(b)}function JT(g,b){return g===b&&(g!==0||1/g===1/b)||g!==g&&b!==b}var Xi=typeof Object.is=="function"?Object.is:JT;function sm(g,b){if(Xi(g,b))return!0;if(typeof g!="object"||g===null||typeof b!="object"||b===null)return!1;var T=Object.keys(g),I=Object.keys(b);if(T.length!==I.length)return!1;for(I=0;I<T.length;I++){var F=T[I];if(!fe.call(b,F)||!Xi(g[F],b[F]))return!1}return!0}function j2(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function lm(g,b){var T=j2(g);g=0;for(var I;T;){if(T.nodeType===3){if(I=g+T.textContent.length,g<=b&&I>=b)return{node:T,offset:b-g};g=I}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=j2(T)}}function xh(g,b){return g&&b?g===b?!0:g&&g.nodeType===3?!1:b&&b.nodeType===3?xh(g,b.parentNode):"contains"in g?g.contains(b):g.compareDocumentPosition?!!(g.compareDocumentPosition(b)&16):!1:!1}function od(g){g=g!=null&&g.ownerDocument!=null&&g.ownerDocument.defaultView!=null?g.ownerDocument.defaultView:window;for(var b=Xs(g.document);b instanceof g.HTMLIFrameElement;){try{var T=typeof b.contentWindow.location.href=="string"}catch{T=!1}if(T)g=b.contentWindow;else break;b=Xs(g.document)}return b}function w_(g){var b=g&&g.nodeName&&g.nodeName.toLowerCase();return b&&(b==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||b==="textarea"||g.contentEditable==="true")}var F2=lc&&"documentMode"in document&&11>=document.documentMode,np=null,eE=null,Sh=null,Vy=!1;function __(g,b,T){var I=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;Vy||np==null||np!==Xs(I)||(I=np,"selectionStart"in I&&w_(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Sh&&sm(Sh,I)||(Sh=I,I=L0(eE,"onSelect"),0<I.length&&(b=new Zc("onSelect","select",null,b,T),g.push({event:b,listeners:I}),b.target=np)))}function _i(g,b){var T={};return T[g.toLowerCase()]=b.toLowerCase(),T["Webkit"+g]="webkit"+b,T["Moz"+g]="moz"+b,T}var tl={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionrun:_i("Transition","TransitionRun"),transitionstart:_i("Transition","TransitionStart"),transitioncancel:_i("Transition","TransitionCancel"),transitionend:_i("Transition","TransitionEnd")},cm={},_s={};lc&&(_s=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Th(g){if(cm[g])return cm[g];if(!tl[g])return g;var b=tl[g],T;for(T in b)if(b.hasOwnProperty(T)&&T in _s)return cm[g]=b[T];return g}var tE=Th("animationend"),$2=Th("animationiteration"),x_=Th("animationstart"),S_=Th("transitionrun"),B2=Th("transitionstart"),nE=Th("transitioncancel"),rE=Th("transitionend"),iE=new Map,T_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");T_.push("scrollEnd");function gc(g,b){iE.set(g,b),Xt(b,[g])}var E_=new WeakMap;function nl(g,b){if(typeof g=="object"&&g!==null){var T=E_.get(g);return T!==void 0?T:(b={value:g,source:b,stack:Wf(b)},E_.set(g,b),b)}return{value:g,source:b,stack:Wf(b)}}var xs=[],um=0,zy=0;function rp(){for(var g=um,b=zy=um=0;b<g;){var T=xs[b];xs[b++]=null;var I=xs[b];xs[b++]=null;var F=xs[b];xs[b++]=null;var U=xs[b];if(xs[b++]=null,I!==null&&F!==null){var J=I.pending;J===null?F.next=F:(F.next=J.next,J.next=F),I.pending=F}U!==0&&aE(T,F,U)}}function A_(g,b,T,I){xs[um++]=g,xs[um++]=b,xs[um++]=T,xs[um++]=I,zy|=I,g.lanes|=I,g=g.alternate,g!==null&&(g.lanes|=I)}function Hy(g,b,T,I){return A_(g,b,T,I),Zi(g)}function ip(g,b){return A_(g,null,null,b),Zi(g)}function aE(g,b,T){g.lanes|=T;var I=g.alternate;I!==null&&(I.lanes|=T);for(var F=!1,U=g.return;U!==null;)U.childLanes|=T,I=U.alternate,I!==null&&(I.childLanes|=T),U.tag===22&&(g=U.stateNode,g===null||g._visibility&1||(F=!0)),g=U,U=U.return;return g.tag===3?(U=g.stateNode,F&&b!==null&&(F=31-Et(T),g=U.hiddenUpdates,I=g[F],I===null?g[F]=[b]:I.push(b),b.lane=T|536870912),U):null}function Zi(g){if(50<zm)throw zm=0,dx=null,Error(r(185));for(var b=g.return;b!==null;)g=b,b=g.return;return g.tag===3?g.stateNode:null}var Ol={};function qy(g,b,T,I){this.tag=g,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ua(g,b,T,I){return new qy(g,b,T,I)}function C_(g){return g=g.prototype,!(!g||!g.isReactComponent)}function ru(g,b){var T=g.alternate;return T===null?(T=ua(g.tag,b,g.key,g.mode),T.elementType=g.elementType,T.type=g.type,T.stateNode=g.stateNode,T.alternate=g,g.alternate=T):(T.pendingProps=b,T.type=g.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=g.flags&65011712,T.childLanes=g.childLanes,T.lanes=g.lanes,T.child=g.child,T.memoizedProps=g.memoizedProps,T.memoizedState=g.memoizedState,T.updateQueue=g.updateQueue,b=g.dependencies,T.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},T.sibling=g.sibling,T.index=g.index,T.ref=g.ref,T.refCleanup=g.refCleanup,T}function D_(g,b){g.flags&=65011714;var T=g.alternate;return T===null?(g.childLanes=0,g.lanes=b,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=T.childLanes,g.lanes=T.lanes,g.child=T.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=T.memoizedProps,g.memoizedState=T.memoizedState,g.updateQueue=T.updateQueue,g.type=T.type,b=T.dependencies,g.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),g}function Mi(g,b,T,I,F,U){var J=0;if(I=g,typeof g=="function")C_(g)&&(J=1);else if(typeof g=="string")J=Ax(g,T,be.current)?26:g==="html"||g==="head"||g==="body"?27:5;else e:switch(g){case O:return g=ua(31,T,b,F),g.elementType=O,g.lanes=U,g;case m:return Rl(T.children,F,U,b);case v:J=8,F|=24;break;case y:return g=ua(12,T,b,F|2),g.elementType=y,g.lanes=U,g;case C:return g=ua(13,T,b,F),g.elementType=C,g.lanes=U,g;case D:return g=ua(19,T,b,F),g.elementType=D,g.lanes=U,g;default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case w:case S:J=10;break e;case _:J=9;break e;case A:J=11;break e;case M:J=14;break e;case P:J=16,I=null;break e}J=29,T=Error(r(130,g===null?"null":typeof g,"")),I=null}return b=ua(J,T,b,F),b.elementType=g,b.type=I,b.lanes=U,b}function Rl(g,b,T,I){return g=ua(7,g,I,b),g.lanes=T,g}function k_(g,b,T){return g=ua(6,g,null,b),g.lanes=T,g}function Gy(g,b,T){return b=ua(4,g.children!==null?g.children:[],g.key,b),b.lanes=T,b.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},b}var ap=[],Nl=0,I_=null,Wy=0,rl=[],il=0,Eh=null,sd=1,iu="";function Ll(g,b){ap[Nl++]=Wy,ap[Nl++]=I_,I_=g,Wy=b}function oE(g,b,T){rl[il++]=sd,rl[il++]=iu,rl[il++]=Eh,Eh=g;var I=sd;g=iu;var F=32-Et(I)-1;I&=~(1<<F),T+=1;var U=32-Et(b)+F;if(30<U){var J=F-F%5;U=(I&(1<<J)-1).toString(32),I>>=J,F-=J,sd=1<<32-Et(b)+F|T<<F|I,iu=U+g}else sd=1<<U|T<<F|I,iu=g}function M_(g){g.return!==null&&(Ll(g,1),oE(g,1,0))}function Ah(g){for(;g===I_;)I_=ap[--Nl],ap[Nl]=null,Wy=ap[--Nl],ap[Nl]=null;for(;g===Eh;)Eh=rl[--il],rl[il]=null,iu=rl[--il],rl[il]=null,sd=rl[--il],rl[il]=null}var Ka=null,Vr=null,Nr=!1,op=null,au=!1,ou=Error(r(519));function mc(g){var b=Error(r(418,""));throw ld(nl(b,g)),ou}function Yy(g){var b=g.stateNode,T=g.type,I=g.memoizedProps;switch(b[gt]=g,b[Nt]=I,T){case"dialog":Yn("cancel",b),Yn("close",b);break;case"iframe":case"object":case"embed":Yn("load",b);break;case"video":case"audio":for(T=0;T<Ym.length;T++)Yn(Ym[T],b);break;case"source":Yn("error",b);break;case"img":case"image":case"link":Yn("error",b),Yn("load",b);break;case"details":Yn("toggle",b);break;case"input":Yn("invalid",b),mh(b,I.value,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name,!0),gh(b);break;case"select":Yn("invalid",b);break;case"textarea":Yn("invalid",b),Xf(b,I.value,I.defaultValue,I.children),gh(b)}T=I.children,typeof T!="string"&&typeof T!="number"&&typeof T!="bigint"||b.textContent===""+T||I.suppressHydrationWarning===!0||vM(b.textContent,T)?(I.popover!=null&&(Yn("beforetoggle",b),Yn("toggle",b)),I.onScroll!=null&&Yn("scroll",b),I.onScrollEnd!=null&&Yn("scrollend",b),I.onClick!=null&&(b.onclick=Lp),b=!0):b=!1,b||mc(g)}function sE(g){for(Ka=g.return;Ka;)switch(Ka.tag){case 5:case 13:au=!1;return;case 27:case 3:au=!0;return;default:Ka=Ka.return}}function dm(g){if(g!==Ka)return!1;if(!Nr)return sE(g),Nr=!0,!1;var b=g.tag,T;if((T=b!==3&&b!==27)&&((T=b===5)&&(T=g.type,T=!(T!=="form"&&T!=="button")||Fp(g.type,g.memoizedProps)),T=!T),T&&Vr&&mc(g),sE(g),b===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));e:{for(g=g.nextSibling,b=0;g;){if(g.nodeType===8)if(T=g.data,T==="/$"){if(b===0){Vr=Oo(g.nextSibling);break e}b--}else T!=="$"&&T!=="$!"&&T!=="$?"||b++;g=g.nextSibling}Vr=null}}else b===27?(b=Vr,bu(g.type)?(g=mA,mA=null,Vr=g):Vr=b):Vr=Ka?Oo(g.stateNode.nextSibling):null;return!0}function hm(){Vr=Ka=null,Nr=!1}function Ky(){var g=op;return g!==null&&(ts===null?ts=g:ts.push.apply(ts,g),op=null),g}function ld(g){op===null?op=[g]:op.push(g)}var P_=oe(null),su=null,cd=null;function Ch(g,b,T){ee(P_,b._currentValue),b._currentValue=T}function ud(g){g._currentValue=P_.current,le(P_)}function fm(g,b,T){for(;g!==null;){var I=g.alternate;if((g.childLanes&b)!==b?(g.childLanes|=b,I!==null&&(I.childLanes|=b)):I!==null&&(I.childLanes&b)!==b&&(I.childLanes|=b),g===T)break;g=g.return}}function lE(g,b,T,I){var F=g.child;for(F!==null&&(F.return=g);F!==null;){var U=F.dependencies;if(U!==null){var J=F.child;U=U.firstContext;e:for(;U!==null;){var ie=U;U=F;for(var de=0;de<b.length;de++)if(ie.context===b[de]){U.lanes|=T,ie=U.alternate,ie!==null&&(ie.lanes|=T),fm(U.return,T,g),I||(J=null);break e}U=ie.next}}else if(F.tag===18){if(J=F.return,J===null)throw Error(r(341));J.lanes|=T,U=J.alternate,U!==null&&(U.lanes|=T),fm(J,T,g),J=null}else J=F.child;if(J!==null)J.return=F;else for(J=F;J!==null;){if(J===g){J=null;break}if(F=J.sibling,F!==null){F.return=J.return,J=F;break}J=J.return}F=J}}function Xy(g,b,T,I){g=null;for(var F=b,U=!1;F!==null;){if(!U){if((F.flags&524288)!==0)U=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var J=F.alternate;if(J===null)throw Error(r(387));if(J=J.memoizedProps,J!==null){var ie=F.type;Xi(F.pendingProps.value,J.value)||(g!==null?g.push(ie):g=[ie])}}else if(F===ct.current){if(J=F.alternate,J===null)throw Error(r(387));J.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(g!==null?g.push(G0):g=[G0])}F=F.return}g!==null&&lE(b,g,T,I),b.flags|=262144}function pm(g){for(g=g.firstContext;g!==null;){if(!Xi(g.context._currentValue,g.memoizedValue))return!0;g=g.next}return!1}function vc(g){su=g,cd=null,g=g.dependencies,g!==null&&(g.firstContext=null)}function Xa(g){return U2(su,g)}function Zy(g,b){return su===null&&vc(g),U2(g,b)}function U2(g,b){var T=b._currentValue;if(b={context:b,memoizedValue:T,next:null},cd===null){if(g===null)throw Error(r(308));cd=b,g.dependencies={lanes:0,firstContext:b},g.flags|=524288}else cd=cd.next=b;return T}var cE=typeof AbortController<"u"?AbortController:function(){var g=[],b=this.signal={aborted:!1,addEventListener:function(T,I){g.push(I)}};this.abort=function(){b.aborted=!0,g.forEach(function(T){return T()})}},uE=n.unstable_scheduleCallback,dE=n.unstable_NormalPriority,da={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gm(){return{controller:new cE,data:new Map,refCount:0}}function mm(g){g.refCount--,g.refCount===0&&uE(dE,function(){g.controller.abort()})}var vm=null,O_=0,sp=0,Dh=null;function Qy(g,b){if(vm===null){var T=vm=[];O_=0,sp=R0(),Dh={status:"pending",value:void 0,then:function(I){T.push(I)}}}return O_++,b.then(hE,hE),b}function hE(){if(--O_===0&&vm!==null){Dh!==null&&(Dh.status="fulfilled");var g=vm;vm=null,sp=0,Dh=null;for(var b=0;b<g.length;b++)(0,g[b])()}}function V2(g,b){var T=[],I={status:"pending",value:null,reason:null,then:function(F){T.push(F)}};return g.then(function(){I.status="fulfilled",I.value=b;for(var F=0;F<T.length;F++)(0,T[F])(b)},function(F){for(I.status="rejected",I.reason=F,F=0;F<T.length;F++)(0,T[F])(void 0)}),I}var Jy=W.S;W.S=function(g,b){typeof b=="object"&&b!==null&&typeof b.then=="function"&&Qy(g,b),Jy!==null&&Jy(g,b)};var dd=oe(null);function lp(){var g=dd.current;return g!==null?g:hi.pooledCache}function lu(g,b){b===null?ee(dd,dd.current):ee(dd,b.pool)}function z2(){var g=lp();return g===null?null:{parent:da._currentValue,pool:g}}var ym=Error(r(460)),H2=Error(r(474)),e0=Error(r(542)),fE={then:function(){}};function q2(g){return g=g.status,g==="fulfilled"||g==="rejected"}function Io(){}function R_(g,b,T){switch(T=g[T],T===void 0?g.push(b):T!==b&&(b.then(Io,Io),b=T),b.status){case"fulfilled":return b.value;case"rejected":throw g=b.reason,G2(g),g;default:if(typeof b.status=="string")b.then(Io,Io);else{if(g=hi,g!==null&&100<g.shellSuspendCounter)throw Error(r(482));g=b,g.status="pending",g.then(function(I){if(b.status==="pending"){var F=b;F.status="fulfilled",F.value=I}},function(I){if(b.status==="pending"){var F=b;F.status="rejected",F.reason=I}})}switch(b.status){case"fulfilled":return b.value;case"rejected":throw g=b.reason,G2(g),g}throw cp=b,ym}}var cp=null;function t0(){if(cp===null)throw Error(r(459));var g=cp;return cp=null,g}function G2(g){if(g===ym||g===e0)throw Error(r(483))}var Xo=!1;function N_(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function n0(g,b){g=g.updateQueue,b.updateQueue===g&&(b.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,callbacks:null})}function yc(g){return{lane:g,tag:0,payload:null,callback:null,next:null}}function hd(g,b,T){var I=g.updateQueue;if(I===null)return null;if(I=I.shared,(xr&2)!==0){var F=I.pending;return F===null?b.next=b:(b.next=F.next,F.next=b),I.pending=b,b=Zi(g),aE(g,null,T),b}return A_(g,I,b,T),Zi(g)}function cu(g,b,T){if(b=b.updateQueue,b!==null&&(b=b.shared,(T&4194048)!==0)){var I=b.lanes;I&=g.pendingLanes,T|=I,b.lanes=T,ce(g,T)}}function r0(g,b){var T=g.updateQueue,I=g.alternate;if(I!==null&&(I=I.updateQueue,T===I)){var F=null,U=null;if(T=T.firstBaseUpdate,T!==null){do{var J={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};U===null?F=U=J:U=U.next=J,T=T.next}while(T!==null);U===null?F=U=b:U=U.next=b}else F=U=b;T={baseState:I.baseState,firstBaseUpdate:F,lastBaseUpdate:U,shared:I.shared,callbacks:I.callbacks},g.updateQueue=T;return}g=T.lastBaseUpdate,g===null?T.firstBaseUpdate=b:g.next=b,T.lastBaseUpdate=b}var L_=!1;function bm(){if(L_){var g=Dh;if(g!==null)throw g}}function wm(g,b,T,I){L_=!1;var F=g.updateQueue;Xo=!1;var U=F.firstBaseUpdate,J=F.lastBaseUpdate,ie=F.shared.pending;if(ie!==null){F.shared.pending=null;var de=ie,ke=de.next;de.next=null,J===null?U=ke:J.next=ke,J=de;var qe=g.alternate;qe!==null&&(qe=qe.updateQueue,ie=qe.lastBaseUpdate,ie!==J&&(ie===null?qe.firstBaseUpdate=ke:ie.next=ke,qe.lastBaseUpdate=de))}if(U!==null){var Xe=F.baseState;J=0,qe=ke=de=null,ie=U;do{var Ie=ie.lane&-536870913,Oe=Ie!==ie.lane;if(Oe?(br&Ie)===Ie:(I&Ie)===Ie){Ie!==0&&Ie===sp&&(L_=!0),qe!==null&&(qe=qe.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var In=g,yn=ie;Ie=b;var Ai=T;switch(yn.tag){case 1:if(In=yn.payload,typeof In=="function"){Xe=In.call(Ai,Xe,Ie);break e}Xe=In;break e;case 3:In.flags=In.flags&-65537|128;case 0:if(In=yn.payload,Ie=typeof In=="function"?In.call(Ai,Xe,Ie):In,Ie==null)break e;Xe=u({},Xe,Ie);break e;case 2:Xo=!0}}Ie=ie.callback,Ie!==null&&(g.flags|=64,Oe&&(g.flags|=8192),Oe=F.callbacks,Oe===null?F.callbacks=[Ie]:Oe.push(Ie))}else Oe={lane:Ie,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},qe===null?(ke=qe=Oe,de=Xe):qe=qe.next=Oe,J|=Ie;if(ie=ie.next,ie===null){if(ie=F.shared.pending,ie===null)break;Oe=ie,ie=Oe.next,Oe.next=null,F.lastBaseUpdate=Oe,F.shared.pending=null}}while(!0);qe===null&&(de=Xe),F.baseState=de,F.firstBaseUpdate=ke,F.lastBaseUpdate=qe,U===null&&(F.shared.lanes=0),xd|=J,g.lanes=J,g.memoizedState=Xe}}function pE(g,b){if(typeof g!="function")throw Error(r(191,g));g.call(b)}function W2(g,b){var T=g.callbacks;if(T!==null)for(g.callbacks=null,g=0;g<T.length;g++)pE(T[g],b)}var fd=oe(null),pd=oe(0);function gE(g,b){g=mu,ee(pd,g),ee(fd,b),mu=g|b.baseLanes}function j_(){ee(pd,mu),ee(fd,fd.current)}function kh(){mu=pd.current,le(fd),le(pd)}var bc=0,Xn=null,Xr=null,ha=null,gd=!1,up=!1,uu=!1,dp=0,Ih=0,md=null,F_=0;function Bi(){throw Error(r(321))}function _m(g,b){if(b===null)return!1;for(var T=0;T<b.length&&T<g.length;T++)if(!Xi(g[T],b[T]))return!1;return!0}function $_(g,b,T,I,F,U){return bc=U,Xn=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,W.H=g===null||g.memoizedState===null?J2:eM,uu=!1,U=T(I,F),uu=!1,up&&(U=vE(b,T,I,F)),mE(g),U}function mE(g){W.H=X_;var b=Xr!==null&&Xr.next!==null;if(bc=0,ha=Xr=Xn=null,gd=!1,Ih=0,md=null,b)throw Error(r(300));g===null||aa||(g=g.dependencies,g!==null&&pm(g)&&(aa=!0))}function vE(g,b,T,I){Xn=g;var F=0;do{if(up&&(md=null),Ih=0,up=!1,25<=F)throw Error(r(301));if(F+=1,ha=Xr=null,g.updateQueue!=null){var U=g.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}W.H=aF,U=b(T,I)}while(up);return U}function Y2(){var g=W.H,b=g.useState()[0];return b=typeof b.then=="function"?Mh(b):b,g=g.useState()[0],(Xr!==null?Xr.memoizedState:null)!==g&&(Xn.flags|=1024),b}function yE(){var g=dp!==0;return dp=0,g}function i0(g,b,T){b.updateQueue=g.updateQueue,b.flags&=-2053,g.lanes&=~T}function B_(g){if(gd){for(g=g.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}gd=!1}bc=0,ha=Xr=Xn=null,up=!1,Ih=dp=0,md=null}function Ss(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ha===null?Xn.memoizedState=ha=g:ha=ha.next=g,ha}function fa(){if(Xr===null){var g=Xn.alternate;g=g!==null?g.memoizedState:null}else g=Xr.next;var b=ha===null?Xn.memoizedState:ha.next;if(b!==null)ha=b,Xr=g;else{if(g===null)throw Xn.alternate===null?Error(r(467)):Error(r(310));Xr=g,g={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},ha===null?Xn.memoizedState=ha=g:ha=ha.next=g}return ha}function hp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mh(g){var b=Ih;return Ih+=1,md===null&&(md=[]),g=R_(md,g,b),b=Xn,(ha===null?b.memoizedState:ha.next)===null&&(b=b.alternate,W.H=b===null||b.memoizedState===null?J2:eM),g}function fp(g){if(g!==null&&typeof g=="object"){if(typeof g.then=="function")return Mh(g);if(g.$$typeof===S)return Xa(g)}throw Error(r(438,String(g)))}function xm(g){var b=null,T=Xn.updateQueue;if(T!==null&&(b=T.memoCache),b==null){var I=Xn.alternate;I!==null&&(I=I.updateQueue,I!==null&&(I=I.memoCache,I!=null&&(b={data:I.data.map(function(F){return F.slice()}),index:0})))}if(b==null&&(b={data:[],index:0}),T===null&&(T=hp(),Xn.updateQueue=T),T.memoCache=b,T=b.data[b.index],T===void 0)for(T=b.data[b.index]=Array(g),I=0;I<g;I++)T[I]=j;return b.index++,T}function wc(g,b){return typeof b=="function"?b(g):b}function Sm(g){var b=fa();return Ph(b,Xr,g)}function Ph(g,b,T){var I=g.queue;if(I===null)throw Error(r(311));I.lastRenderedReducer=T;var F=g.baseQueue,U=I.pending;if(U!==null){if(F!==null){var J=F.next;F.next=U.next,U.next=J}b.baseQueue=F=U,I.pending=null}if(U=g.baseState,F===null)g.memoizedState=U;else{b=F.next;var ie=J=null,de=null,ke=b,qe=!1;do{var Xe=ke.lane&-536870913;if(Xe!==ke.lane?(br&Xe)===Xe:(bc&Xe)===Xe){var Ie=ke.revertLane;if(Ie===0)de!==null&&(de=de.next={lane:0,revertLane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),Xe===sp&&(qe=!0);else if((bc&Ie)===Ie){ke=ke.next,Ie===sp&&(qe=!0);continue}else Xe={lane:0,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},de===null?(ie=de=Xe,J=U):de=de.next=Xe,Xn.lanes|=Ie,xd|=Ie;Xe=ke.action,uu&&T(U,Xe),U=ke.hasEagerState?ke.eagerState:T(U,Xe)}else Ie={lane:Xe,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},de===null?(ie=de=Ie,J=U):de=de.next=Ie,Xn.lanes|=Xe,xd|=Xe;ke=ke.next}while(ke!==null&&ke!==b);if(de===null?J=U:de.next=ie,!Xi(U,g.memoizedState)&&(aa=!0,qe&&(T=Dh,T!==null)))throw T;g.memoizedState=U,g.baseState=J,g.baseQueue=de,I.lastRenderedState=U}return F===null&&(I.lanes=0),[g.memoizedState,I.dispatch]}function U_(g){var b=fa(),T=b.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=g;var I=T.dispatch,F=T.pending,U=b.memoizedState;if(F!==null){T.pending=null;var J=F=F.next;do U=g(U,J.action),J=J.next;while(J!==F);Xi(U,b.memoizedState)||(aa=!0),b.memoizedState=U,b.baseQueue===null&&(b.baseState=U),T.lastRenderedState=U}return[U,I]}function bE(g,b,T){var I=Xn,F=fa(),U=Nr;if(U){if(T===void 0)throw Error(r(407));T=T()}else T=b();var J=!Xi((Xr||F).memoizedState,T);J&&(F.memoizedState=T,aa=!0),F=F.queue;var ie=Oh.bind(null,I,F,g);if(Cm(2048,8,ie,[g]),F.getSnapshot!==b||J||ha!==null&&ha.memoizedState.tag&1){if(I.flags|=2048,xi(9,Em(),z_.bind(null,I,F,T,b),null),hi===null)throw Error(r(349));U||(bc&124)!==0||V_(I,b,T)}return T}function V_(g,b,T){g.flags|=16384,g={getSnapshot:b,value:T},b=Xn.updateQueue,b===null?(b=hp(),Xn.updateQueue=b,b.stores=[g]):(T=b.stores,T===null?b.stores=[g]:T.push(g))}function z_(g,b,T,I){b.value=T,b.getSnapshot=I,Tm(b)&&pp(g)}function Oh(g,b,T){return T(function(){Tm(b)&&pp(g)})}function Tm(g){var b=g.getSnapshot;g=g.value;try{var T=b();return!Xi(g,T)}catch{return!0}}function pp(g){var b=ip(g,2);b!==null&&ks(b,g,2)}function gp(g){var b=Ss();if(typeof g=="function"){var T=g;if(g=T(),uu){tt(!0);try{T()}finally{tt(!1)}}}return b.memoizedState=b.baseState=g,b.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wc,lastRenderedState:g},b}function mp(g,b,T,I){return g.baseState=T,Ph(g,Xr,typeof I=="function"?I:wc)}function Ts(g,b,T,I,F){if(l0(g))throw Error(r(485));if(g=b.action,g!==null){var U={payload:F,action:g,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){U.listeners.push(J)}};W.T!==null?T(!0):U.isTransition=!1,I(U),T=b.pending,T===null?(U.next=b.pending=U,vp(b,U)):(U.next=T.next,b.pending=T.next=U)}}function vp(g,b){var T=b.action,I=b.payload,F=g.state;if(b.isTransition){var U=W.T,J={};W.T=J;try{var ie=T(F,I),de=W.S;de!==null&&de(J,ie),wE(g,b,ie)}catch(ke){jl(g,b,ke)}finally{W.T=U}}else try{U=T(F,I),wE(g,b,U)}catch(ke){jl(g,b,ke)}}function wE(g,b,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(I){_c(g,b,I)},function(I){return jl(g,b,I)}):_c(g,b,T)}function _c(g,b,T){b.status="fulfilled",b.value=T,_E(b),g.state=T,b=g.pending,b!==null&&(T=b.next,T===b?g.pending=null:(T=T.next,b.next=T,vp(g,T)))}function jl(g,b,T){var I=g.pending;if(g.pending=null,I!==null){I=I.next;do b.status="rejected",b.reason=T,_E(b),b=b.next;while(b!==I)}g.action=null}function _E(g){g=g.listeners;for(var b=0;b<g.length;b++)(0,g[b])()}function H_(g,b){return b}function K2(g,b){if(Nr){var T=hi.formState;if(T!==null){e:{var I=Xn;if(Nr){if(Vr){t:{for(var F=Vr,U=au;F.nodeType!==8;){if(!U){F=null;break t}if(F=Oo(F.nextSibling),F===null){F=null;break t}}U=F.data,F=U==="F!"||U==="F"?F:null}if(F){Vr=Oo(F.nextSibling),I=F.data==="F!";break e}}mc(I)}I=!1}I&&(b=T[0])}}return T=Ss(),T.memoizedState=T.baseState=b,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:H_,lastRenderedState:b},T.queue=I,T=km.bind(null,Xn,I),I.dispatch=T,I=gp(!1),U=K_.bind(null,Xn,!1,I.queue),I=Ss(),F={state:b,dispatch:null,action:g,pending:null},I.queue=F,T=Ts.bind(null,Xn,F,U,T),F.dispatch=T,I.memoizedState=g,[b,T,!1]}function X2(g){var b=fa();return Z2(b,Xr,g)}function Z2(g,b,T){if(b=Ph(g,b,H_)[0],g=Sm(wc)[0],typeof b=="object"&&b!==null&&typeof b.then=="function")try{var I=Mh(b)}catch(J){throw J===ym?e0:J}else I=b;b=fa();var F=b.queue,U=F.dispatch;return T!==b.memoizedState&&(Xn.flags|=2048,xi(9,Em(),iF.bind(null,F,T),null)),[I,U,g]}function iF(g,b){g.action=b}function q_(g){var b=fa(),T=Xr;if(T!==null)return Z2(b,T,g);fa(),b=b.memoizedState,T=fa();var I=T.queue.dispatch;return T.memoizedState=g,[b,I,!1]}function xi(g,b,T,I){return g={tag:g,create:T,deps:I,inst:b,next:null},b=Xn.updateQueue,b===null&&(b=hp(),Xn.updateQueue=b),T=b.lastEffect,T===null?b.lastEffect=g.next=g:(I=T.next,T.next=g,g.next=I,b.lastEffect=g),g}function Em(){return{destroy:void 0,resource:void 0}}function G_(){return fa().memoizedState}function Am(g,b,T,I){var F=Ss();I=I===void 0?null:I,Xn.flags|=g,F.memoizedState=xi(1|b,Em(),T,I)}function Cm(g,b,T,I){var F=fa();I=I===void 0?null:I;var U=F.memoizedState.inst;Xr!==null&&I!==null&&_m(I,Xr.memoizedState.deps)?F.memoizedState=xi(b,U,T,I):(Xn.flags|=g,F.memoizedState=xi(1|b,U,T,I))}function xE(g,b){Am(8390656,8,g,b)}function SE(g,b){Cm(2048,8,g,b)}function TE(g,b){return Cm(4,2,g,b)}function a0(g,b){return Cm(4,4,g,b)}function Rh(g,b){if(typeof b=="function"){g=g();var T=b(g);return function(){typeof T=="function"?T():b(null)}}if(b!=null)return g=g(),b.current=g,function(){b.current=null}}function EE(g,b,T){T=T!=null?T.concat([g]):null,Cm(4,4,Rh.bind(null,b,g),T)}function W_(){}function AE(g,b){var T=fa();b=b===void 0?null:b;var I=T.memoizedState;return b!==null&&_m(b,I[1])?I[0]:(T.memoizedState=[g,b],g)}function Mo(g,b){var T=fa();b=b===void 0?null:b;var I=T.memoizedState;if(b!==null&&_m(b,I[1]))return I[0];if(I=g(),uu){tt(!0);try{g()}finally{tt(!1)}}return T.memoizedState=[I,b],I}function yp(g,b,T){return T===void 0||(bc&1073741824)!==0?g.memoizedState=b:(g.memoizedState=T,g=QE(),Xn.lanes|=g,xd|=g,T)}function CE(g,b,T,I){return Xi(T,b)?T:fd.current!==null?(g=yp(g,T,I),Xi(g,b)||(aa=!0),g):(bc&42)===0?(aa=!0,g.memoizedState=T):(g=QE(),Xn.lanes|=g,xd|=g,b)}function DE(g,b,T,I,F){var U=X.p;X.p=U!==0&&8>U?U:8;var J=W.T,ie={};W.T=ie,K_(g,!1,b,T);try{var de=F(),ke=W.S;if(ke!==null&&ke(ie,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var qe=V2(de,I);Im(g,b,qe,Ds(g))}else Im(g,b,I,Ds(g))}catch(Xe){Im(g,b,{then:function(){},status:"rejected",reason:Xe},Ds())}finally{X.p=U,W.T=J}}function kE(){}function Y_(g,b,T,I){if(g.tag!==5)throw Error(r(476));var F=IE(g).queue;DE(g,F,b,te,T===null?kE:function(){return bp(g),T(I)})}function IE(g){var b=g.memoizedState;if(b!==null)return b;b={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wc,lastRenderedState:te},next:null};var T={};return b.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wc,lastRenderedState:T},next:null},g.memoizedState=b,g=g.alternate,g!==null&&(g.memoizedState=b),b}function bp(g){var b=IE(g).next.queue;Im(g,b,{},Ds())}function ME(){return Xa(G0)}function o0(){return fa().memoizedState}function s0(){return fa().memoizedState}function al(g){for(var b=g.return;b!==null;){switch(b.tag){case 24:case 3:var T=Ds();g=yc(T);var I=hd(b,g,T);I!==null&&(ks(I,b,T),cu(I,b,T)),b={cache:gm()},g.payload=b;return}b=b.return}}function Dm(g,b,T){var I=Ds();T={lane:I,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},l0(g)?Nh(b,T):(T=Hy(g,b,T,I),T!==null&&(ks(T,g,I),Q2(T,b,I)))}function km(g,b,T){var I=Ds();Im(g,b,T,I)}function Im(g,b,T,I){var F={lane:I,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(l0(g))Nh(b,F);else{var U=g.alternate;if(g.lanes===0&&(U===null||U.lanes===0)&&(U=b.lastRenderedReducer,U!==null))try{var J=b.lastRenderedState,ie=U(J,T);if(F.hasEagerState=!0,F.eagerState=ie,Xi(ie,J))return A_(g,b,F,0),hi===null&&rp(),!1}catch{}finally{}if(T=Hy(g,b,F,I),T!==null)return ks(T,g,I),Q2(T,b,I),!0}return!1}function K_(g,b,T,I){if(I={lane:2,revertLane:R0(),action:I,hasEagerState:!1,eagerState:null,next:null},l0(g)){if(b)throw Error(r(479))}else b=Hy(g,T,I,2),b!==null&&ks(b,g,2)}function l0(g){var b=g.alternate;return g===Xn||b!==null&&b===Xn}function Nh(g,b){up=gd=!0;var T=g.pending;T===null?b.next=b:(b.next=T.next,T.next=b),g.pending=b}function Q2(g,b,T){if((T&4194048)!==0){var I=b.lanes;I&=g.pendingLanes,T|=I,b.lanes=T,ce(g,T)}}var X_={readContext:Xa,use:fp,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useLayoutEffect:Bi,useInsertionEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useSyncExternalStore:Bi,useId:Bi,useHostTransitionStatus:Bi,useFormState:Bi,useActionState:Bi,useOptimistic:Bi,useMemoCache:Bi,useCacheRefresh:Bi},J2={readContext:Xa,use:fp,useCallback:function(g,b){return Ss().memoizedState=[g,b===void 0?null:b],g},useContext:Xa,useEffect:xE,useImperativeHandle:function(g,b,T){T=T!=null?T.concat([g]):null,Am(4194308,4,Rh.bind(null,b,g),T)},useLayoutEffect:function(g,b){return Am(4194308,4,g,b)},useInsertionEffect:function(g,b){Am(4,2,g,b)},useMemo:function(g,b){var T=Ss();b=b===void 0?null:b;var I=g();if(uu){tt(!0);try{g()}finally{tt(!1)}}return T.memoizedState=[I,b],I},useReducer:function(g,b,T){var I=Ss();if(T!==void 0){var F=T(b);if(uu){tt(!0);try{T(b)}finally{tt(!1)}}}else F=b;return I.memoizedState=I.baseState=F,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:F},I.queue=g,g=g.dispatch=Dm.bind(null,Xn,g),[I.memoizedState,g]},useRef:function(g){var b=Ss();return g={current:g},b.memoizedState=g},useState:function(g){g=gp(g);var b=g.queue,T=km.bind(null,Xn,b);return b.dispatch=T,[g.memoizedState,T]},useDebugValue:W_,useDeferredValue:function(g,b){var T=Ss();return yp(T,g,b)},useTransition:function(){var g=gp(!1);return g=DE.bind(null,Xn,g.queue,!0,!1),Ss().memoizedState=g,[!1,g]},useSyncExternalStore:function(g,b,T){var I=Xn,F=Ss();if(Nr){if(T===void 0)throw Error(r(407));T=T()}else{if(T=b(),hi===null)throw Error(r(349));(br&124)!==0||V_(I,b,T)}F.memoizedState=T;var U={value:T,getSnapshot:b};return F.queue=U,xE(Oh.bind(null,I,U,g),[g]),I.flags|=2048,xi(9,Em(),z_.bind(null,I,U,T,b),null),T},useId:function(){var g=Ss(),b=hi.identifierPrefix;if(Nr){var T=iu,I=sd;T=(I&~(1<<32-Et(I)-1)).toString(32)+T,b="«"+b+"R"+T,T=dp++,0<T&&(b+="H"+T.toString(32)),b+="»"}else T=F_++,b="«"+b+"r"+T.toString(32)+"»";return g.memoizedState=b},useHostTransitionStatus:ME,useFormState:K2,useActionState:K2,useOptimistic:function(g){var b=Ss();b.memoizedState=b.baseState=g;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return b.queue=T,b=K_.bind(null,Xn,!0,T),T.dispatch=b,[g,b]},useMemoCache:xm,useCacheRefresh:function(){return Ss().memoizedState=al.bind(null,Xn)}},eM={readContext:Xa,use:fp,useCallback:AE,useContext:Xa,useEffect:SE,useImperativeHandle:EE,useInsertionEffect:TE,useLayoutEffect:a0,useMemo:Mo,useReducer:Sm,useRef:G_,useState:function(){return Sm(wc)},useDebugValue:W_,useDeferredValue:function(g,b){var T=fa();return CE(T,Xr.memoizedState,g,b)},useTransition:function(){var g=Sm(wc)[0],b=fa().memoizedState;return[typeof g=="boolean"?g:Mh(g),b]},useSyncExternalStore:bE,useId:o0,useHostTransitionStatus:ME,useFormState:X2,useActionState:X2,useOptimistic:function(g,b){var T=fa();return mp(T,Xr,g,b)},useMemoCache:xm,useCacheRefresh:s0},aF={readContext:Xa,use:fp,useCallback:AE,useContext:Xa,useEffect:SE,useImperativeHandle:EE,useInsertionEffect:TE,useLayoutEffect:a0,useMemo:Mo,useReducer:U_,useRef:G_,useState:function(){return U_(wc)},useDebugValue:W_,useDeferredValue:function(g,b){var T=fa();return Xr===null?yp(T,g,b):CE(T,Xr.memoizedState,g,b)},useTransition:function(){var g=U_(wc)[0],b=fa().memoizedState;return[typeof g=="boolean"?g:Mh(g),b]},useSyncExternalStore:bE,useId:o0,useHostTransitionStatus:ME,useFormState:q_,useActionState:q_,useOptimistic:function(g,b){var T=fa();return Xr!==null?mp(T,Xr,g,b):(T.baseState=g,[g,T.queue.dispatch])},useMemoCache:xm,useCacheRefresh:s0},wp=null,Mm=0;function Z_(g){var b=Mm;return Mm+=1,wp===null&&(wp=[]),R_(wp,g,b)}function c0(g,b){b=b.props.ref,g.ref=b!==void 0?b:null}function Pm(g,b){throw b.$$typeof===d?Error(r(525)):(g=Object.prototype.toString.call(b),Error(r(31,g==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":g)))}function PE(g){var b=g._init;return b(g._payload)}function ia(g){function b(xe,ve){if(g){var De=xe.deletions;De===null?(xe.deletions=[ve],xe.flags|=16):De.push(ve)}}function T(xe,ve){if(!g)return null;for(;ve!==null;)b(xe,ve),ve=ve.sibling;return null}function I(xe){for(var ve=new Map;xe!==null;)xe.key!==null?ve.set(xe.key,xe):ve.set(xe.index,xe),xe=xe.sibling;return ve}function F(xe,ve){return xe=ru(xe,ve),xe.index=0,xe.sibling=null,xe}function U(xe,ve,De){return xe.index=De,g?(De=xe.alternate,De!==null?(De=De.index,De<ve?(xe.flags|=67108866,ve):De):(xe.flags|=67108866,ve)):(xe.flags|=1048576,ve)}function J(xe){return g&&xe.alternate===null&&(xe.flags|=67108866),xe}function ie(xe,ve,De,We){return ve===null||ve.tag!==6?(ve=k_(De,xe.mode,We),ve.return=xe,ve):(ve=F(ve,De),ve.return=xe,ve)}function de(xe,ve,De,We){var Vt=De.type;return Vt===m?qe(xe,ve,De.props.children,We,De.key):ve!==null&&(ve.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===P&&PE(Vt)===ve.type)?(ve=F(ve,De.props),c0(ve,De),ve.return=xe,ve):(ve=Mi(De.type,De.key,De.props,null,xe.mode,We),c0(ve,De),ve.return=xe,ve)}function ke(xe,ve,De,We){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==De.containerInfo||ve.stateNode.implementation!==De.implementation?(ve=Gy(De,xe.mode,We),ve.return=xe,ve):(ve=F(ve,De.children||[]),ve.return=xe,ve)}function qe(xe,ve,De,We,Vt){return ve===null||ve.tag!==7?(ve=Rl(De,xe.mode,We,Vt),ve.return=xe,ve):(ve=F(ve,De),ve.return=xe,ve)}function Xe(xe,ve,De){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=k_(""+ve,xe.mode,De),ve.return=xe,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case h:return De=Mi(ve.type,ve.key,ve.props,null,xe.mode,De),c0(De,ve),De.return=xe,De;case f:return ve=Gy(ve,xe.mode,De),ve.return=xe,ve;case P:var We=ve._init;return ve=We(ve._payload),Xe(xe,ve,De)}if(q(ve)||B(ve))return ve=Rl(ve,xe.mode,De,null),ve.return=xe,ve;if(typeof ve.then=="function")return Xe(xe,Z_(ve),De);if(ve.$$typeof===S)return Xe(xe,Zy(xe,ve),De);Pm(xe,ve)}return null}function Ie(xe,ve,De,We){var Vt=ve!==null?ve.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return Vt!==null?null:ie(xe,ve,""+De,We);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case h:return De.key===Vt?de(xe,ve,De,We):null;case f:return De.key===Vt?ke(xe,ve,De,We):null;case P:return Vt=De._init,De=Vt(De._payload),Ie(xe,ve,De,We)}if(q(De)||B(De))return Vt!==null?null:qe(xe,ve,De,We,null);if(typeof De.then=="function")return Ie(xe,ve,Z_(De),We);if(De.$$typeof===S)return Ie(xe,ve,Zy(xe,De),We);Pm(xe,De)}return null}function Oe(xe,ve,De,We,Vt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return xe=xe.get(De)||null,ie(ve,xe,""+We,Vt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case h:return xe=xe.get(We.key===null?De:We.key)||null,de(ve,xe,We,Vt);case f:return xe=xe.get(We.key===null?De:We.key)||null,ke(ve,xe,We,Vt);case P:var mr=We._init;return We=mr(We._payload),Oe(xe,ve,De,We,Vt)}if(q(We)||B(We))return xe=xe.get(De)||null,qe(ve,xe,We,Vt,null);if(typeof We.then=="function")return Oe(xe,ve,De,Z_(We),Vt);if(We.$$typeof===S)return Oe(xe,ve,De,Zy(ve,We),Vt);Pm(ve,We)}return null}function In(xe,ve,De,We){for(var Vt=null,mr=null,Jt=ve,Tn=ve=0,Ro=null;Jt!==null&&Tn<De.length;Tn++){Jt.index>Tn?(Ro=Jt,Jt=null):Ro=Jt.sibling;var Hr=Ie(xe,Jt,De[Tn],We);if(Hr===null){Jt===null&&(Jt=Ro);break}g&&Jt&&Hr.alternate===null&&b(xe,Jt),ve=U(Hr,ve,Tn),mr===null?Vt=Hr:mr.sibling=Hr,mr=Hr,Jt=Ro}if(Tn===De.length)return T(xe,Jt),Nr&&Ll(xe,Tn),Vt;if(Jt===null){for(;Tn<De.length;Tn++)Jt=Xe(xe,De[Tn],We),Jt!==null&&(ve=U(Jt,ve,Tn),mr===null?Vt=Jt:mr.sibling=Jt,mr=Jt);return Nr&&Ll(xe,Tn),Vt}for(Jt=I(Jt);Tn<De.length;Tn++)Ro=Oe(Jt,xe,Tn,De[Tn],We),Ro!==null&&(g&&Ro.alternate!==null&&Jt.delete(Ro.key===null?Tn:Ro.key),ve=U(Ro,ve,Tn),mr===null?Vt=Ro:mr.sibling=Ro,mr=Ro);return g&&Jt.forEach(function(lv){return b(xe,lv)}),Nr&&Ll(xe,Tn),Vt}function yn(xe,ve,De,We){if(De==null)throw Error(r(151));for(var Vt=null,mr=null,Jt=ve,Tn=ve=0,Ro=null,Hr=De.next();Jt!==null&&!Hr.done;Tn++,Hr=De.next()){Jt.index>Tn?(Ro=Jt,Jt=null):Ro=Jt.sibling;var lv=Ie(xe,Jt,Hr.value,We);if(lv===null){Jt===null&&(Jt=Ro);break}g&&Jt&&lv.alternate===null&&b(xe,Jt),ve=U(lv,ve,Tn),mr===null?Vt=lv:mr.sibling=lv,mr=lv,Jt=Ro}if(Hr.done)return T(xe,Jt),Nr&&Ll(xe,Tn),Vt;if(Jt===null){for(;!Hr.done;Tn++,Hr=De.next())Hr=Xe(xe,Hr.value,We),Hr!==null&&(ve=U(Hr,ve,Tn),mr===null?Vt=Hr:mr.sibling=Hr,mr=Hr);return Nr&&Ll(xe,Tn),Vt}for(Jt=I(Jt);!Hr.done;Tn++,Hr=De.next())Hr=Oe(Jt,xe,Tn,Hr.value,We),Hr!==null&&(g&&Hr.alternate!==null&&Jt.delete(Hr.key===null?Tn:Hr.key),ve=U(Hr,ve,Tn),mr===null?Vt=Hr:mr.sibling=Hr,mr=Hr);return g&&Jt.forEach(function(Kke){return b(xe,Kke)}),Nr&&Ll(xe,Tn),Vt}function Ai(xe,ve,De,We){if(typeof De=="object"&&De!==null&&De.type===m&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case h:e:{for(var Vt=De.key;ve!==null;){if(ve.key===Vt){if(Vt=De.type,Vt===m){if(ve.tag===7){T(xe,ve.sibling),We=F(ve,De.props.children),We.return=xe,xe=We;break e}}else if(ve.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===P&&PE(Vt)===ve.type){T(xe,ve.sibling),We=F(ve,De.props),c0(We,De),We.return=xe,xe=We;break e}T(xe,ve);break}else b(xe,ve);ve=ve.sibling}De.type===m?(We=Rl(De.props.children,xe.mode,We,De.key),We.return=xe,xe=We):(We=Mi(De.type,De.key,De.props,null,xe.mode,We),c0(We,De),We.return=xe,xe=We)}return J(xe);case f:e:{for(Vt=De.key;ve!==null;){if(ve.key===Vt)if(ve.tag===4&&ve.stateNode.containerInfo===De.containerInfo&&ve.stateNode.implementation===De.implementation){T(xe,ve.sibling),We=F(ve,De.children||[]),We.return=xe,xe=We;break e}else{T(xe,ve);break}else b(xe,ve);ve=ve.sibling}We=Gy(De,xe.mode,We),We.return=xe,xe=We}return J(xe);case P:return Vt=De._init,De=Vt(De._payload),Ai(xe,ve,De,We)}if(q(De))return In(xe,ve,De,We);if(B(De)){if(Vt=B(De),typeof Vt!="function")throw Error(r(150));return De=Vt.call(De),yn(xe,ve,De,We)}if(typeof De.then=="function")return Ai(xe,ve,Z_(De),We);if(De.$$typeof===S)return Ai(xe,ve,Zy(xe,De),We);Pm(xe,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,ve!==null&&ve.tag===6?(T(xe,ve.sibling),We=F(ve,De),We.return=xe,xe=We):(T(xe,ve),We=k_(De,xe.mode,We),We.return=xe,xe=We),J(xe)):T(xe,ve)}return function(xe,ve,De,We){try{Mm=0;var Vt=Ai(xe,ve,De,We);return wp=null,Vt}catch(Jt){if(Jt===ym||Jt===e0)throw Jt;var mr=ua(29,Jt,null,xe.mode);return mr.lanes=We,mr.return=xe,mr}finally{}}}var Si=ia(!0),OE=ia(!1),uo=oe(null),du=null;function Lh(g){var b=g.alternate;ee(xa,xa.current&1),ee(uo,g),du===null&&(b===null||fd.current!==null||b.memoizedState!==null)&&(du=g)}function Q_(g){if(g.tag===22){if(ee(xa,xa.current),ee(uo,g),du===null){var b=g.alternate;b!==null&&b.memoizedState!==null&&(du=g)}}else vd()}function vd(){ee(xa,xa.current),ee(uo,uo.current)}function xc(g){le(uo),du===g&&(du=null),le(xa)}var xa=oe(0);function u0(g){for(var b=g;b!==null;){if(b.tag===13){var T=b.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||Sx(T)))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if((b.flags&128)!==0)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===g)break;for(;b.sibling===null;){if(b.return===null||b.return===g)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function _p(g,b,T,I){b=g.memoizedState,T=T(I,b),T=T==null?b:u({},b,T),g.memoizedState=T,g.lanes===0&&(g.updateQueue.baseState=T)}var d0={enqueueSetState:function(g,b,T){g=g._reactInternals;var I=Ds(),F=yc(I);F.payload=b,T!=null&&(F.callback=T),b=hd(g,F,I),b!==null&&(ks(b,g,I),cu(b,g,I))},enqueueReplaceState:function(g,b,T){g=g._reactInternals;var I=Ds(),F=yc(I);F.tag=1,F.payload=b,T!=null&&(F.callback=T),b=hd(g,F,I),b!==null&&(ks(b,g,I),cu(b,g,I))},enqueueForceUpdate:function(g,b){g=g._reactInternals;var T=Ds(),I=yc(T);I.tag=2,b!=null&&(I.callback=b),b=hd(g,I,T),b!==null&&(ks(b,g,T),cu(b,g,T))}};function h0(g,b,T,I,F,U,J){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(I,U,J):b.prototype&&b.prototype.isPureReactComponent?!sm(T,I)||!sm(F,U):!0}function J_(g,b,T,I){g=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(T,I),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(T,I),b.state!==g&&d0.enqueueReplaceState(b,b.state,null)}function hu(g,b){var T=b;if("ref"in b){T={};for(var I in b)I!=="ref"&&(T[I]=b[I])}if(g=g.defaultProps){T===b&&(T=u({},T));for(var F in g)T[F]===void 0&&(T[F]=g[F])}return T}var Om=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var b=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(b))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)};function ex(g){Om(g)}function tM(g){console.error(g)}function nM(g){Om(g)}function jh(g,b){try{var T=g.onUncaughtError;T(b.value,{componentStack:b.stack})}catch(I){setTimeout(function(){throw I})}}function xp(g,b,T){try{var I=g.onCaughtError;I(T.value,{componentStack:T.stack,errorBoundary:b.tag===1?b.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function f0(g,b,T){return T=yc(T),T.tag=3,T.payload={element:null},T.callback=function(){jh(g,b)},T}function RE(g){return g=yc(g),g.tag=3,g}function Mr(g,b,T,I){var F=T.type.getDerivedStateFromError;if(typeof F=="function"){var U=I.value;g.payload=function(){return F(U)},g.callback=function(){xp(b,T,I)}}var J=T.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(g.callback=function(){xp(b,T,I),typeof F!="function"&&(Sd===null?Sd=new Set([this]):Sd.add(this));var ie=I.stack;this.componentDidCatch(I.value,{componentStack:ie!==null?ie:""})})}function Ft(g,b,T,I,F){if(T.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){if(b=T.alternate,b!==null&&Xy(b,T,F,!0),T=uo.current,T!==null){switch(T.tag){case 13:return du===null?hx():T.alternate===null&&Qi===0&&(Qi=3),T.flags&=-257,T.flags|=65536,T.lanes=F,I===fE?T.flags|=16384:(b=T.updateQueue,b===null?T.updateQueue=new Set([I]):b.add(I),px(g,I,F)),!1;case 22:return T.flags|=65536,I===fE?T.flags|=16384:(b=T.updateQueue,b===null?(b={transitions:null,markerInstances:null,retryQueue:new Set([I])},T.updateQueue=b):(T=b.retryQueue,T===null?b.retryQueue=new Set([I]):T.add(I)),px(g,I,F)),!1}throw Error(r(435,T.tag))}return px(g,I,F),hx(),!1}if(Nr)return b=uo.current,b!==null?((b.flags&65536)===0&&(b.flags|=256),b.flags|=65536,b.lanes=F,I!==ou&&(g=Error(r(422),{cause:I}),ld(nl(g,T)))):(I!==ou&&(b=Error(r(423),{cause:I}),ld(nl(b,T))),g=g.current.alternate,g.flags|=65536,F&=-F,g.lanes|=F,I=nl(I,T),F=f0(g.stateNode,I,F),r0(g,F),Qi!==4&&(Qi=2)),!1;var U=Error(r(520),{cause:I});if(U=nl(U,T),Vm===null?Vm=[U]:Vm.push(U),Qi!==4&&(Qi=2),b===null)return!0;I=nl(I,T),T=b;do{switch(T.tag){case 3:return T.flags|=65536,g=F&-F,T.lanes|=g,g=f0(T.stateNode,I,g),r0(T,g),!1;case 1:if(b=T.type,U=T.stateNode,(T.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Sd===null||!Sd.has(U))))return T.flags|=65536,F&=-F,T.lanes|=F,F=RE(F),Mr(F,g,T,I),r0(T,F),!1}T=T.return}while(T!==null);return!1}var NE=Error(r(461)),aa=!1;function Ti(g,b,T,I){b.child=g===null?OE(b,null,T,I):Si(b,g.child,T,I)}function Sc(g,b,T,I,F){T=T.render;var U=b.ref;if("ref"in I){var J={};for(var ie in I)ie!=="ref"&&(J[ie]=I[ie])}else J=I;return vc(b),I=$_(g,b,T,J,U,F),ie=yE(),g!==null&&!aa?(i0(g,b,F),ol(g,b,F)):(Nr&&ie&&M_(b),b.flags|=1,Ti(g,b,I,F),b.child)}function Na(g,b,T,I,F){if(g===null){var U=T.type;return typeof U=="function"&&!C_(U)&&U.defaultProps===void 0&&T.compare===null?(b.tag=15,b.type=U,LE(g,b,U,I,F)):(g=Mi(T.type,null,I,b,b.mode,F),g.ref=b.ref,g.return=b,b.child=g)}if(U=g.child,!m0(g,F)){var J=U.memoizedProps;if(T=T.compare,T=T!==null?T:sm,T(J,I)&&g.ref===b.ref)return ol(g,b,F)}return b.flags|=1,g=ru(U,I),g.ref=b.ref,g.return=b,b.child=g}function LE(g,b,T,I,F){if(g!==null){var U=g.memoizedProps;if(sm(U,I)&&g.ref===b.ref)if(aa=!1,b.pendingProps=I=U,m0(g,F))(g.flags&131072)!==0&&(aa=!0);else return b.lanes=g.lanes,ol(g,b,F)}return p0(g,b,T,I,F)}function rM(g,b,T){var I=b.pendingProps,F=I.children,U=g!==null?g.memoizedState:null;if(I.mode==="hidden"){if((b.flags&128)!==0){if(I=U!==null?U.baseLanes|T:T,g!==null){for(F=b.child=g.child,U=0;F!==null;)U=U|F.lanes|F.childLanes,F=F.sibling;b.childLanes=U&~I}else b.childLanes=0,b.child=null;return jE(g,b,I,T)}if((T&536870912)!==0)b.memoizedState={baseLanes:0,cachePool:null},g!==null&&lu(b,U!==null?U.cachePool:null),U!==null?gE(b,U):j_(),Q_(b);else return b.lanes=b.childLanes=536870912,jE(g,b,U!==null?U.baseLanes|T:T,T)}else U!==null?(lu(b,U.cachePool),gE(b,U),vd(),b.memoizedState=null):(g!==null&&lu(b,null),j_(),vd());return Ti(g,b,F,T),b.child}function jE(g,b,T,I){var F=lp();return F=F===null?null:{parent:da._currentValue,pool:F},b.memoizedState={baseLanes:T,cachePool:F},g!==null&&lu(b,null),j_(),Q_(b),g!==null&&Xy(g,b,I,!0),null}function Fh(g,b){var T=b.ref;if(T===null)g!==null&&g.ref!==null&&(b.flags|=4194816);else{if(typeof T!="function"&&typeof T!="object")throw Error(r(284));(g===null||g.ref!==T)&&(b.flags|=4194816)}}function p0(g,b,T,I,F){return vc(b),T=$_(g,b,T,I,void 0,F),I=yE(),g!==null&&!aa?(i0(g,b,F),ol(g,b,F)):(Nr&&I&&M_(b),b.flags|=1,Ti(g,b,T,F),b.child)}function iM(g,b,T,I,F,U){return vc(b),b.updateQueue=null,T=vE(b,I,T,F),mE(g),I=yE(),g!==null&&!aa?(i0(g,b,U),ol(g,b,U)):(Nr&&I&&M_(b),b.flags|=1,Ti(g,b,T,U),b.child)}function Sp(g,b,T,I,F){if(vc(b),b.stateNode===null){var U=Ol,J=T.contextType;typeof J=="object"&&J!==null&&(U=Xa(J)),U=new T(I,U),b.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=d0,b.stateNode=U,U._reactInternals=b,U=b.stateNode,U.props=I,U.state=b.memoizedState,U.refs={},N_(b),J=T.contextType,U.context=typeof J=="object"&&J!==null?Xa(J):Ol,U.state=b.memoizedState,J=T.getDerivedStateFromProps,typeof J=="function"&&(_p(b,T,J,I),U.state=b.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(J=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),J!==U.state&&d0.enqueueReplaceState(U,U.state,null),wm(b,I,U,F),bm(),U.state=b.memoizedState),typeof U.componentDidMount=="function"&&(b.flags|=4194308),I=!0}else if(g===null){U=b.stateNode;var ie=b.memoizedProps,de=hu(T,ie);U.props=de;var ke=U.context,qe=T.contextType;J=Ol,typeof qe=="object"&&qe!==null&&(J=Xa(qe));var Xe=T.getDerivedStateFromProps;qe=typeof Xe=="function"||typeof U.getSnapshotBeforeUpdate=="function",ie=b.pendingProps!==ie,qe||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ie||ke!==J)&&J_(b,U,I,J),Xo=!1;var Ie=b.memoizedState;U.state=Ie,wm(b,I,U,F),bm(),ke=b.memoizedState,ie||Ie!==ke||Xo?(typeof Xe=="function"&&(_p(b,T,Xe,I),ke=b.memoizedState),(de=Xo||h0(b,T,de,I,Ie,ke,J))?(qe||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(b.flags|=4194308)):(typeof U.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=I,b.memoizedState=ke),U.props=I,U.state=ke,U.context=J,I=de):(typeof U.componentDidMount=="function"&&(b.flags|=4194308),I=!1)}else{U=b.stateNode,n0(g,b),J=b.memoizedProps,qe=hu(T,J),U.props=qe,Xe=b.pendingProps,Ie=U.context,ke=T.contextType,de=Ol,typeof ke=="object"&&ke!==null&&(de=Xa(ke)),ie=T.getDerivedStateFromProps,(ke=typeof ie=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(J!==Xe||Ie!==de)&&J_(b,U,I,de),Xo=!1,Ie=b.memoizedState,U.state=Ie,wm(b,I,U,F),bm();var Oe=b.memoizedState;J!==Xe||Ie!==Oe||Xo||g!==null&&g.dependencies!==null&&pm(g.dependencies)?(typeof ie=="function"&&(_p(b,T,ie,I),Oe=b.memoizedState),(qe=Xo||h0(b,T,qe,I,Ie,Oe,de)||g!==null&&g.dependencies!==null&&pm(g.dependencies))?(ke||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(I,Oe,de),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(I,Oe,de)),typeof U.componentDidUpdate=="function"&&(b.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof U.componentDidUpdate!="function"||J===g.memoizedProps&&Ie===g.memoizedState||(b.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||J===g.memoizedProps&&Ie===g.memoizedState||(b.flags|=1024),b.memoizedProps=I,b.memoizedState=Oe),U.props=I,U.state=Oe,U.context=de,I=qe):(typeof U.componentDidUpdate!="function"||J===g.memoizedProps&&Ie===g.memoizedState||(b.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||J===g.memoizedProps&&Ie===g.memoizedState||(b.flags|=1024),I=!1)}return U=I,Fh(g,b),I=(b.flags&128)!==0,U||I?(U=b.stateNode,T=I&&typeof T.getDerivedStateFromError!="function"?null:U.render(),b.flags|=1,g!==null&&I?(b.child=Si(b,g.child,null,F),b.child=Si(b,null,T,F)):Ti(g,b,T,F),b.memoizedState=U.state,g=b.child):g=ol(g,b,F),g}function FE(g,b,T,I){return hm(),b.flags|=256,Ti(g,b,T,I),b.child}var tx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nx(g){return{baseLanes:g,cachePool:z2()}}function $h(g,b,T){return g=g!==null?g.childLanes&~T:0,b&&(g|=sl),g}function g0(g,b,T){var I=b.pendingProps,F=!1,U=(b.flags&128)!==0,J;if((J=U)||(J=g!==null&&g.memoizedState===null?!1:(xa.current&2)!==0),J&&(F=!0,b.flags&=-129),J=(b.flags&32)!==0,b.flags&=-33,g===null){if(Nr){if(F?Lh(b):vd(),Nr){var ie=Vr,de;if(de=ie){e:{for(de=ie,ie=au;de.nodeType!==8;){if(!ie){ie=null;break e}if(de=Oo(de.nextSibling),de===null){ie=null;break e}}ie=de}ie!==null?(b.memoizedState={dehydrated:ie,treeContext:Eh!==null?{id:sd,overflow:iu}:null,retryLane:536870912,hydrationErrors:null},de=ua(18,null,null,0),de.stateNode=ie,de.return=b,b.child=de,Ka=b,Vr=null,de=!0):de=!1}de||mc(b)}if(ie=b.memoizedState,ie!==null&&(ie=ie.dehydrated,ie!==null))return Sx(ie)?b.lanes=32:b.lanes=536870912,null;xc(b)}return ie=I.children,I=I.fallback,F?(vd(),F=b.mode,ie=rx({mode:"hidden",children:ie},F),I=Rl(I,F,T,null),ie.return=b,I.return=b,ie.sibling=I,b.child=ie,F=b.child,F.memoizedState=nx(T),F.childLanes=$h(g,J,T),b.memoizedState=tx,I):(Lh(b),Rm(b,ie))}if(de=g.memoizedState,de!==null&&(ie=de.dehydrated,ie!==null)){if(U)b.flags&256?(Lh(b),b.flags&=-257,b=Bh(g,b,T)):b.memoizedState!==null?(vd(),b.child=g.child,b.flags|=128,b=null):(vd(),F=I.fallback,ie=b.mode,I=rx({mode:"visible",children:I.children},ie),F=Rl(F,ie,T,null),F.flags|=2,I.return=b,F.return=b,I.sibling=F,b.child=I,Si(b,g.child,null,T),I=b.child,I.memoizedState=nx(T),I.childLanes=$h(g,J,T),b.memoizedState=tx,b=F);else if(Lh(b),Sx(ie)){if(J=ie.nextSibling&&ie.nextSibling.dataset,J)var ke=J.dgst;J=ke,I=Error(r(419)),I.stack="",I.digest=J,ld({value:I,source:null,stack:null}),b=Bh(g,b,T)}else if(aa||Xy(g,b,T,!1),J=(T&g.childLanes)!==0,aa||J){if(J=hi,J!==null&&(I=T&-T,I=(I&42)!==0?1:ge(I),I=(I&(J.suspendedLanes|T))!==0?0:I,I!==0&&I!==de.retryLane))throw de.retryLane=I,ip(g,I),ks(J,g,I),NE;ie.data==="$?"||hx(),b=Bh(g,b,T)}else ie.data==="$?"?(b.flags|=192,b.child=g.child,b=null):(g=de.treeContext,Vr=Oo(ie.nextSibling),Ka=b,Nr=!0,op=null,au=!1,g!==null&&(rl[il++]=sd,rl[il++]=iu,rl[il++]=Eh,sd=g.id,iu=g.overflow,Eh=b),b=Rm(b,I.children),b.flags|=4096);return b}return F?(vd(),F=I.fallback,ie=b.mode,de=g.child,ke=de.sibling,I=ru(de,{mode:"hidden",children:I.children}),I.subtreeFlags=de.subtreeFlags&65011712,ke!==null?F=ru(ke,F):(F=Rl(F,ie,T,null),F.flags|=2),F.return=b,I.return=b,I.sibling=F,b.child=I,I=F,F=b.child,ie=g.child.memoizedState,ie===null?ie=nx(T):(de=ie.cachePool,de!==null?(ke=da._currentValue,de=de.parent!==ke?{parent:ke,pool:ke}:de):de=z2(),ie={baseLanes:ie.baseLanes|T,cachePool:de}),F.memoizedState=ie,F.childLanes=$h(g,J,T),b.memoizedState=tx,I):(Lh(b),T=g.child,g=T.sibling,T=ru(T,{mode:"visible",children:I.children}),T.return=b,T.sibling=null,g!==null&&(J=b.deletions,J===null?(b.deletions=[g],b.flags|=16):J.push(g)),b.child=T,b.memoizedState=null,T)}function Rm(g,b){return b=rx({mode:"visible",children:b},g.mode),b.return=g,g.child=b}function rx(g,b){return g=ua(22,g,null,b),g.lanes=0,g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},g}function Bh(g,b,T){return Si(b,g.child,null,T),g=Rm(b,b.pendingProps.children),g.flags|=2,b.memoizedState=null,g}function $E(g,b,T){g.lanes|=b;var I=g.alternate;I!==null&&(I.lanes|=b),fm(g.return,b,T)}function Uh(g,b,T,I,F){var U=g.memoizedState;U===null?g.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:I,tail:T,tailMode:F}:(U.isBackwards=b,U.rendering=null,U.renderingStartTime=0,U.last=I,U.tail=T,U.tailMode=F)}function BE(g,b,T){var I=b.pendingProps,F=I.revealOrder,U=I.tail;if(Ti(g,b,I.children,T),I=xa.current,(I&2)!==0)I=I&1|2,b.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=b.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&$E(g,T,b);else if(g.tag===19)$E(g,T,b);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===b)break e;for(;g.sibling===null;){if(g.return===null||g.return===b)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}I&=1}switch(ee(xa,I),F){case"forwards":for(T=b.child,F=null;T!==null;)g=T.alternate,g!==null&&u0(g)===null&&(F=T),T=T.sibling;T=F,T===null?(F=b.child,b.child=null):(F=T.sibling,T.sibling=null),Uh(b,!1,F,T,U);break;case"backwards":for(T=null,F=b.child,b.child=null;F!==null;){if(g=F.alternate,g!==null&&u0(g)===null){b.child=F;break}g=F.sibling,F.sibling=T,T=F,F=g}Uh(b,!0,T,null,U);break;case"together":Uh(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function ol(g,b,T){if(g!==null&&(b.dependencies=g.dependencies),xd|=b.lanes,(T&b.childLanes)===0)if(g!==null){if(Xy(g,b,T,!1),(T&b.childLanes)===0)return null}else return null;if(g!==null&&b.child!==g.child)throw Error(r(153));if(b.child!==null){for(g=b.child,T=ru(g,g.pendingProps),b.child=T,T.return=b;g.sibling!==null;)g=g.sibling,T=T.sibling=ru(g,g.pendingProps),T.return=b;T.sibling=null}return b.child}function m0(g,b){return(g.lanes&b)!==0?!0:(g=g.dependencies,!!(g!==null&&pm(g)))}function aM(g,b,T){switch(b.tag){case 3:Be(b,b.stateNode.containerInfo),Ch(b,da,g.memoizedState.cache),hm();break;case 27:case 5:_e(b);break;case 4:Be(b,b.stateNode.containerInfo);break;case 10:Ch(b,b.type,b.memoizedProps.value);break;case 13:var I=b.memoizedState;if(I!==null)return I.dehydrated!==null?(Lh(b),b.flags|=128,null):(T&b.child.childLanes)!==0?g0(g,b,T):(Lh(b),g=ol(g,b,T),g!==null?g.sibling:null);Lh(b);break;case 19:var F=(g.flags&128)!==0;if(I=(T&b.childLanes)!==0,I||(Xy(g,b,T,!1),I=(T&b.childLanes)!==0),F){if(I)return BE(g,b,T);b.flags|=128}if(F=b.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),ee(xa,xa.current),I)break;return null;case 22:case 23:return b.lanes=0,rM(g,b,T);case 24:Ch(b,da,g.memoizedState.cache)}return ol(g,b,T)}function Nm(g,b,T){if(g!==null)if(g.memoizedProps!==b.pendingProps)aa=!0;else{if(!m0(g,T)&&(b.flags&128)===0)return aa=!1,aM(g,b,T);aa=(g.flags&131072)!==0}else aa=!1,Nr&&(b.flags&1048576)!==0&&oE(b,Wy,b.index);switch(b.lanes=0,b.tag){case 16:e:{g=b.pendingProps;var I=b.elementType,F=I._init;if(I=F(I._payload),b.type=I,typeof I=="function")C_(I)?(g=hu(I,g),b.tag=1,b=Sp(null,b,I,g,T)):(b.tag=0,b=p0(null,b,I,g,T));else{if(I!=null){if(F=I.$$typeof,F===A){b.tag=11,b=Sc(null,b,I,g,T);break e}else if(F===M){b.tag=14,b=Na(null,b,I,g,T);break e}}throw b=Y(I)||I,Error(r(306,b,""))}}return b;case 0:return p0(g,b,b.type,b.pendingProps,T);case 1:return I=b.type,F=hu(I,b.pendingProps),Sp(g,b,I,F,T);case 3:e:{if(Be(b,b.stateNode.containerInfo),g===null)throw Error(r(387));I=b.pendingProps;var U=b.memoizedState;F=U.element,n0(g,b),wm(b,I,null,T);var J=b.memoizedState;if(I=J.cache,Ch(b,da,I),I!==U.cache&&lE(b,[da],T,!0),bm(),I=J.element,U.isDehydrated)if(U={element:I,isDehydrated:!1,cache:J.cache},b.updateQueue.baseState=U,b.memoizedState=U,b.flags&256){b=FE(g,b,I,T);break e}else if(I!==F){F=nl(Error(r(424)),b),ld(F),b=FE(g,b,I,T);break e}else{switch(g=b.stateNode.containerInfo,g.nodeType){case 9:g=g.body;break;default:g=g.nodeName==="HTML"?g.ownerDocument.body:g}for(Vr=Oo(g.firstChild),Ka=b,Nr=!0,op=null,au=!0,T=OE(b,null,I,T),b.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling}else{if(hm(),I===F){b=ol(g,b,T);break e}Ti(g,b,I,T)}b=b.child}return b;case 26:return Fh(g,b),g===null?(T=iv(b.type,null,b.pendingProps,null))?b.memoizedState=T:Nr||(T=b.type,g=b.pendingProps,I=xx(pe.current).createElement(T),I[gt]=b,I[Nt]=g,Sa(I,T,g),Kt(I),b.stateNode=I):b.memoizedState=iv(b.type,g.memoizedProps,b.pendingProps,g.memoizedState),null;case 27:return _e(b),g===null&&Nr&&(I=b.stateNode=j0(b.type,b.pendingProps,pe.current),Ka=b,au=!0,F=Vr,bu(b.type)?(mA=F,Vr=Oo(I.firstChild)):Vr=F),Ti(g,b,b.pendingProps.children,T),Fh(g,b),g===null&&(b.flags|=4194304),b.child;case 5:return g===null&&Nr&&((F=I=Vr)&&(I=dF(I,b.type,b.pendingProps,au),I!==null?(b.stateNode=I,Ka=b,Vr=Oo(I.firstChild),au=!1,F=!0):F=!1),F||mc(b)),_e(b),F=b.type,U=b.pendingProps,J=g!==null?g.memoizedProps:null,I=U.children,Fp(F,U)?I=null:J!==null&&Fp(F,J)&&(b.flags|=32),b.memoizedState!==null&&(F=$_(g,b,Y2,null,null,T),G0._currentValue=F),Fh(g,b),Ti(g,b,I,T),b.child;case 6:return g===null&&Nr&&((g=T=Vr)&&(T=gA(T,b.pendingProps,au),T!==null?(b.stateNode=T,Ka=b,Vr=null,g=!0):g=!1),g||mc(b)),null;case 13:return g0(g,b,T);case 4:return Be(b,b.stateNode.containerInfo),I=b.pendingProps,g===null?b.child=Si(b,null,I,T):Ti(g,b,I,T),b.child;case 11:return Sc(g,b,b.type,b.pendingProps,T);case 7:return Ti(g,b,b.pendingProps,T),b.child;case 8:return Ti(g,b,b.pendingProps.children,T),b.child;case 12:return Ti(g,b,b.pendingProps.children,T),b.child;case 10:return I=b.pendingProps,Ch(b,b.type,I.value),Ti(g,b,I.children,T),b.child;case 9:return F=b.type._context,I=b.pendingProps.children,vc(b),F=Xa(F),I=I(F),b.flags|=1,Ti(g,b,I,T),b.child;case 14:return Na(g,b,b.type,b.pendingProps,T);case 15:return LE(g,b,b.type,b.pendingProps,T);case 19:return BE(g,b,T);case 31:return I=b.pendingProps,T=b.mode,I={mode:I.mode,children:I.children},g===null?(T=rx(I,T),T.ref=b.ref,b.child=T,T.return=b,b=T):(T=ru(g.child,I),T.ref=b.ref,b.child=T,T.return=b,b=T),b;case 22:return rM(g,b,T);case 24:return vc(b),I=Xa(da),g===null?(F=lp(),F===null&&(F=hi,U=gm(),F.pooledCache=U,U.refCount++,U!==null&&(F.pooledCacheLanes|=T),F=U),b.memoizedState={parent:I,cache:F},N_(b),Ch(b,da,F)):((g.lanes&T)!==0&&(n0(g,b),wm(b,null,null,T),bm()),F=g.memoizedState,U=b.memoizedState,F.parent!==I?(F={parent:I,cache:I},b.memoizedState=F,b.lanes===0&&(b.memoizedState=b.updateQueue.baseState=F),Ch(b,da,I)):(I=U.cache,Ch(b,da,I),I!==F.cache&&lE(b,[da],T,!0))),Ti(g,b,b.pendingProps.children,T),b.child;case 29:throw b.pendingProps}throw Error(r(156,b.tag))}function fu(g){g.flags|=4}function UE(g,b){if(b.type!=="stylesheet"||(b.state.loading&4)!==0)g.flags&=-16777217;else if(g.flags|=16777216,!wu(b)){if(b=uo.current,b!==null&&((br&4194048)===br?du!==null:(br&62914560)!==br&&(br&536870912)===0||b!==du))throw cp=fE,H2;g.flags|=8192}}function v0(g,b){b!==null&&(g.flags|=4),g.flags&16384&&(b=g.tag!==22?ji():536870912,g.lanes|=b,kp|=b)}function Lm(g,b){if(!Nr)switch(g.tailMode){case"hidden":b=g.tail;for(var T=null;b!==null;)b.alternate!==null&&(T=b),b=b.sibling;T===null?g.tail=null:T.sibling=null;break;case"collapsed":T=g.tail;for(var I=null;T!==null;)T.alternate!==null&&(I=T),T=T.sibling;I===null?b||g.tail===null?g.tail=null:g.tail.sibling=null:I.sibling=null}}function Ui(g){var b=g.alternate!==null&&g.alternate.child===g.child,T=0,I=0;if(b)for(var F=g.child;F!==null;)T|=F.lanes|F.childLanes,I|=F.subtreeFlags&65011712,I|=F.flags&65011712,F.return=g,F=F.sibling;else for(F=g.child;F!==null;)T|=F.lanes|F.childLanes,I|=F.subtreeFlags,I|=F.flags,F.return=g,F=F.sibling;return g.subtreeFlags|=I,g.childLanes=T,b}function oM(g,b,T){var I=b.pendingProps;switch(Ah(b),b.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(b),null;case 1:return Ui(b),null;case 3:return T=b.stateNode,I=null,g!==null&&(I=g.memoizedState.cache),b.memoizedState.cache!==I&&(b.flags|=2048),ud(da),Se(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(g===null||g.child===null)&&(dm(b)?fu(b):g===null||g.memoizedState.isDehydrated&&(b.flags&256)===0||(b.flags|=1024,Ky())),Ui(b),null;case 26:return T=b.memoizedState,g===null?(fu(b),T!==null?(Ui(b),UE(b,T)):(Ui(b),b.flags&=-16777217)):T?T!==g.memoizedState?(fu(b),Ui(b),UE(b,T)):(Ui(b),b.flags&=-16777217):(g.memoizedProps!==I&&fu(b),Ui(b),b.flags&=-16777217),null;case 27:me(b),T=pe.current;var F=b.type;if(g!==null&&b.stateNode!=null)g.memoizedProps!==I&&fu(b);else{if(!I){if(b.stateNode===null)throw Error(r(166));return Ui(b),null}g=be.current,dm(b)?Yy(b):(g=j0(F,I,T),b.stateNode=g,fu(b))}return Ui(b),null;case 5:if(me(b),T=b.type,g!==null&&b.stateNode!=null)g.memoizedProps!==I&&fu(b);else{if(!I){if(b.stateNode===null)throw Error(r(166));return Ui(b),null}if(g=be.current,dm(b))Yy(b);else{switch(F=xx(pe.current),g){case 1:g=F.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:g=F.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":g=F.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":g=F.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":g=F.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof I.is=="string"?F.createElement("select",{is:I.is}):F.createElement("select"),I.multiple?g.multiple=!0:I.size&&(g.size=I.size);break;default:g=typeof I.is=="string"?F.createElement(T,{is:I.is}):F.createElement(T)}}g[gt]=b,g[Nt]=I;e:for(F=b.child;F!==null;){if(F.tag===5||F.tag===6)g.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===b)break e;for(;F.sibling===null;){if(F.return===null||F.return===b)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}b.stateNode=g;e:switch(Sa(g,T,I),T){case"button":case"input":case"select":case"textarea":g=!!I.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&fu(b)}}return Ui(b),b.flags&=-16777217,null;case 6:if(g&&b.stateNode!=null)g.memoizedProps!==I&&fu(b);else{if(typeof I!="string"&&b.stateNode===null)throw Error(r(166));if(g=pe.current,dm(b)){if(g=b.stateNode,T=b.memoizedProps,I=null,F=Ka,F!==null)switch(F.tag){case 27:case 5:I=F.memoizedProps}g[gt]=b,g=!!(g.nodeValue===T||I!==null&&I.suppressHydrationWarning===!0||vM(g.nodeValue,T)),g||mc(b)}else g=xx(g).createTextNode(I),g[gt]=b,b.stateNode=g}return Ui(b),null;case 13:if(I=b.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(F=dm(b),I!==null&&I.dehydrated!==null){if(g===null){if(!F)throw Error(r(318));if(F=b.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));F[gt]=b}else hm(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;Ui(b),F=!1}else F=Ky(),g!==null&&g.memoizedState!==null&&(g.memoizedState.hydrationErrors=F),F=!0;if(!F)return b.flags&256?(xc(b),b):(xc(b),null)}if(xc(b),(b.flags&128)!==0)return b.lanes=T,b;if(T=I!==null,g=g!==null&&g.memoizedState!==null,T){I=b.child,F=null,I.alternate!==null&&I.alternate.memoizedState!==null&&I.alternate.memoizedState.cachePool!==null&&(F=I.alternate.memoizedState.cachePool.pool);var U=null;I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(U=I.memoizedState.cachePool.pool),U!==F&&(I.flags|=2048)}return T!==g&&T&&(b.child.flags|=8192),v0(b,b.updateQueue),Ui(b),null;case 4:return Se(),g===null&&Km(b.stateNode.containerInfo),Ui(b),null;case 10:return ud(b.type),Ui(b),null;case 19:if(le(xa),F=b.memoizedState,F===null)return Ui(b),null;if(I=(b.flags&128)!==0,U=F.rendering,U===null)if(I)Lm(F,!1);else{if(Qi!==0||g!==null&&(g.flags&128)!==0)for(g=b.child;g!==null;){if(U=u0(g),U!==null){for(b.flags|=128,Lm(F,!1),g=U.updateQueue,b.updateQueue=g,v0(b,g),b.subtreeFlags=0,g=T,T=b.child;T!==null;)D_(T,g),T=T.sibling;return ee(xa,xa.current&1|2),b.child}g=g.sibling}F.tail!==null&&rt()>T0&&(b.flags|=128,I=!0,Lm(F,!1),b.lanes=4194304)}else{if(!I)if(g=u0(U),g!==null){if(b.flags|=128,I=!0,g=g.updateQueue,b.updateQueue=g,v0(b,g),Lm(F,!0),F.tail===null&&F.tailMode==="hidden"&&!U.alternate&&!Nr)return Ui(b),null}else 2*rt()-F.renderingStartTime>T0&&T!==536870912&&(b.flags|=128,I=!0,Lm(F,!1),b.lanes=4194304);F.isBackwards?(U.sibling=b.child,b.child=U):(g=F.last,g!==null?g.sibling=U:b.child=U,F.last=U)}return F.tail!==null?(b=F.tail,F.rendering=b,F.tail=b.sibling,F.renderingStartTime=rt(),b.sibling=null,g=xa.current,ee(xa,I?g&1|2:g&1),b):(Ui(b),null);case 22:case 23:return xc(b),kh(),I=b.memoizedState!==null,g!==null?g.memoizedState!==null!==I&&(b.flags|=8192):I&&(b.flags|=8192),I?(T&536870912)!==0&&(b.flags&128)===0&&(Ui(b),b.subtreeFlags&6&&(b.flags|=8192)):Ui(b),T=b.updateQueue,T!==null&&v0(b,T.retryQueue),T=null,g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),I=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(I=b.memoizedState.cachePool.pool),I!==T&&(b.flags|=2048),g!==null&&le(dd),null;case 24:return T=null,g!==null&&(T=g.memoizedState.cache),b.memoizedState.cache!==T&&(b.flags|=2048),ud(da),Ui(b),null;case 25:return null;case 30:return null}throw Error(r(156,b.tag))}function jm(g,b){switch(Ah(b),b.tag){case 1:return g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 3:return ud(da),Se(),g=b.flags,(g&65536)!==0&&(g&128)===0?(b.flags=g&-65537|128,b):null;case 26:case 27:case 5:return me(b),null;case 13:if(xc(b),g=b.memoizedState,g!==null&&g.dehydrated!==null){if(b.alternate===null)throw Error(r(340));hm()}return g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 19:return le(xa),null;case 4:return Se(),null;case 10:return ud(b.type),null;case 22:case 23:return xc(b),kh(),g!==null&&le(dd),g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 24:return ud(da),null;case 25:return null;default:return null}}function y0(g,b){switch(Ah(b),b.tag){case 3:ud(da),Se();break;case 26:case 27:case 5:me(b);break;case 4:Se();break;case 13:xc(b);break;case 19:le(xa);break;case 10:ud(b.type);break;case 22:case 23:xc(b),kh(),g!==null&&le(dd);break;case 24:ud(da)}}function Fm(g,b){try{var T=b.updateQueue,I=T!==null?T.lastEffect:null;if(I!==null){var F=I.next;T=F;do{if((T.tag&g)===g){I=void 0;var U=T.create,J=T.inst;I=U(),J.destroy=I}T=T.next}while(T!==F)}}catch(ie){ii(b,b.return,ie)}}function Vh(g,b,T){try{var I=b.updateQueue,F=I!==null?I.lastEffect:null;if(F!==null){var U=F.next;I=U;do{if((I.tag&g)===g){var J=I.inst,ie=J.destroy;if(ie!==void 0){J.destroy=void 0,F=b;var de=T,ke=ie;try{ke()}catch(qe){ii(F,de,qe)}}}I=I.next}while(I!==U)}}catch(qe){ii(b,b.return,qe)}}function VE(g){var b=g.updateQueue;if(b!==null){var T=g.stateNode;try{W2(b,T)}catch(I){ii(g,g.return,I)}}}function zE(g,b,T){T.props=hu(g.type,g.memoizedProps),T.state=g.memoizedState;try{T.componentWillUnmount()}catch(I){ii(g,b,I)}}function zh(g,b){try{var T=g.ref;if(T!==null){switch(g.tag){case 26:case 27:case 5:var I=g.stateNode;break;case 30:I=g.stateNode;break;default:I=g.stateNode}typeof T=="function"?g.refCleanup=T(I):T.current=I}}catch(F){ii(g,b,F)}}function Fl(g,b){var T=g.ref,I=g.refCleanup;if(T!==null)if(typeof I=="function")try{I()}catch(F){ii(g,b,F)}finally{g.refCleanup=null,g=g.alternate,g!=null&&(g.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(F){ii(g,b,F)}else T.current=null}function Hh(g){var b=g.type,T=g.memoizedProps,I=g.stateNode;try{e:switch(b){case"button":case"input":case"select":case"textarea":T.autoFocus&&I.focus();break e;case"img":T.src?I.src=T.src:T.srcSet&&(I.srcset=T.srcSet)}}catch(F){ii(g,g.return,F)}}function hr(g,b,T){try{var I=g.stateNode;dA(I,g.type,T,b),I[Nt]=b}catch(F){ii(g,g.return,F)}}function $m(g){return g.tag===5||g.tag===3||g.tag===26||g.tag===27&&bu(g.type)||g.tag===4}function b0(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||$m(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.tag===27&&bu(g.type)||g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Vi(g,b,T){var I=g.tag;if(I===5||I===6)g=g.stateNode,b?(T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T).insertBefore(g,b):(b=T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T,b.appendChild(g),T=T._reactRootContainer,T!=null||b.onclick!==null||(b.onclick=Lp));else if(I!==4&&(I===27&&bu(g.type)&&(T=g.stateNode,b=null),g=g.child,g!==null))for(Vi(g,b,T),g=g.sibling;g!==null;)Vi(g,b,T),g=g.sibling}function yd(g,b,T){var I=g.tag;if(I===5||I===6)g=g.stateNode,b?T.insertBefore(g,b):T.appendChild(g);else if(I!==4&&(I===27&&bu(g.type)&&(T=g.stateNode),g=g.child,g!==null))for(yd(g,b,T),g=g.sibling;g!==null;)yd(g,b,T),g=g.sibling}function Bm(g){var b=g.stateNode,T=g.memoizedProps;try{for(var I=g.type,F=b.attributes;F.length;)b.removeAttributeNode(F[0]);Sa(b,I,T),b[gt]=g,b[Nt]=T}catch(U){ii(g,g.return,U)}}var bd=!1,pa=!1,Pi=!1,Es=typeof WeakSet=="function"?WeakSet:Set,yr=null;function Um(g,b){if(g=g.containerInfo,_x=Ac,g=od(g),w_(g)){if("selectionStart"in g)var T={start:g.selectionStart,end:g.selectionEnd};else e:{T=(T=g.ownerDocument)&&T.defaultView||window;var I=T.getSelection&&T.getSelection();if(I&&I.rangeCount!==0){T=I.anchorNode;var F=I.anchorOffset,U=I.focusNode;I=I.focusOffset;try{T.nodeType,U.nodeType}catch{T=null;break e}var J=0,ie=-1,de=-1,ke=0,qe=0,Xe=g,Ie=null;t:for(;;){for(var Oe;Xe!==T||F!==0&&Xe.nodeType!==3||(ie=J+F),Xe!==U||I!==0&&Xe.nodeType!==3||(de=J+I),Xe.nodeType===3&&(J+=Xe.nodeValue.length),(Oe=Xe.firstChild)!==null;)Ie=Xe,Xe=Oe;for(;;){if(Xe===g)break t;if(Ie===T&&++ke===F&&(ie=J),Ie===U&&++qe===I&&(de=J),(Oe=Xe.nextSibling)!==null)break;Xe=Ie,Ie=Xe.parentNode}Xe=Oe}T=ie===-1||de===-1?null:{start:ie,end:de}}else T=null}T=T||{start:0,end:0}}else T=null;for(hA={focusedElem:g,selectionRange:T},Ac=!1,yr=b;yr!==null;)if(b=yr,g=b.child,(b.subtreeFlags&1024)!==0&&g!==null)g.return=b,yr=g;else for(;yr!==null;){switch(b=yr,U=b.alternate,g=b.flags,b.tag){case 0:break;case 11:case 15:break;case 1:if((g&1024)!==0&&U!==null){g=void 0,T=b,F=U.memoizedProps,U=U.memoizedState,I=T.stateNode;try{var In=hu(T.type,F,T.elementType===T.type);g=I.getSnapshotBeforeUpdate(In,U),I.__reactInternalSnapshotBeforeUpdate=g}catch(yn){ii(T,T.return,yn)}}break;case 3:if((g&1024)!==0){if(g=b.stateNode.containerInfo,T=g.nodeType,T===9)pA(g);else if(T===1)switch(g.nodeName){case"HEAD":case"HTML":case"BODY":pA(g);break;default:g.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(r(163))}if(g=b.sibling,g!==null){g.return=b.return,yr=g;break}yr=b.return}}function Tp(g,b,T){var I=T.flags;switch(T.tag){case 0:case 11:case 15:wd(g,T),I&4&&Fm(5,T);break;case 1:if(wd(g,T),I&4)if(g=T.stateNode,b===null)try{g.componentDidMount()}catch(J){ii(T,T.return,J)}else{var F=hu(T.type,b.memoizedProps);b=b.memoizedState;try{g.componentDidUpdate(F,b,g.__reactInternalSnapshotBeforeUpdate)}catch(J){ii(T,T.return,J)}}I&64&&VE(T),I&512&&zh(T,T.return);break;case 3:if(wd(g,T),I&64&&(g=T.updateQueue,g!==null)){if(b=null,T.child!==null)switch(T.child.tag){case 27:case 5:b=T.child.stateNode;break;case 1:b=T.child.stateNode}try{W2(g,b)}catch(J){ii(T,T.return,J)}}break;case 27:b===null&&I&4&&Bm(T);case 26:case 5:wd(g,T),b===null&&I&4&&Hh(T),I&512&&zh(T,T.return);break;case 12:wd(g,T);break;case 13:wd(g,T),I&4&&qE(g,T),I&64&&(g=T.memoizedState,g!==null&&(g=g.dehydrated,g!==null&&(T=dM.bind(null,T),bM(g,T))));break;case 22:if(I=T.memoizedState!==null||bd,!I){b=b!==null&&b.memoizedState!==null||pa,F=bd;var U=pa;bd=I,(pa=b)&&!U?es(g,T,(T.subtreeFlags&8772)!==0):wd(g,T),bd=F,pa=U}break;case 30:break;default:wd(g,T)}}function Zo(g){var b=g.alternate;b!==null&&(g.alternate=null,Zo(b)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(b=g.stateNode,b!==null&&Qe(b)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}var Ei=null,Qo=!1;function La(g,b,T){for(T=T.child;T!==null;)HE(g,b,T),T=T.sibling}function HE(g,b,T){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Ae,T)}catch{}switch(T.tag){case 26:pa||Fl(T,b),La(g,b,T),T.memoizedState?T.memoizedState.count--:T.stateNode&&(T=T.stateNode,T.parentNode.removeChild(T));break;case 27:pa||Fl(T,b);var I=Ei,F=Qo;bu(T.type)&&(Ei=T.stateNode,Qo=!1),La(g,b,T),F0(T.stateNode),Ei=I,Qo=F;break;case 5:pa||Fl(T,b);case 6:if(I=Ei,F=Qo,Ei=null,La(g,b,T),Ei=I,Qo=F,Ei!==null)if(Qo)try{(Ei.nodeType===9?Ei.body:Ei.nodeName==="HTML"?Ei.ownerDocument.body:Ei).removeChild(T.stateNode)}catch(U){ii(T,b,U)}else try{Ei.removeChild(T.stateNode)}catch(U){ii(T,b,U)}break;case 18:Ei!==null&&(Qo?(g=Ei,nv(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,T.stateNode),ne(g)):nv(Ei,T.stateNode));break;case 4:I=Ei,F=Qo,Ei=T.stateNode.containerInfo,Qo=!0,La(g,b,T),Ei=I,Qo=F;break;case 0:case 11:case 14:case 15:pa||Vh(2,T,b),pa||Vh(4,T,b),La(g,b,T);break;case 1:pa||(Fl(T,b),I=T.stateNode,typeof I.componentWillUnmount=="function"&&zE(T,b,I)),La(g,b,T);break;case 21:La(g,b,T);break;case 22:pa=(I=pa)||T.memoizedState!==null,La(g,b,T),pa=I;break;default:La(g,b,T)}}function qE(g,b){if(b.memoizedState===null&&(g=b.alternate,g!==null&&(g=g.memoizedState,g!==null&&(g=g.dehydrated,g!==null))))try{ne(g)}catch(T){ii(b,b.return,T)}}function sM(g){switch(g.tag){case 13:case 19:var b=g.stateNode;return b===null&&(b=g.stateNode=new Es),b;case 22:return g=g.stateNode,b=g._retryCache,b===null&&(b=g._retryCache=new Es),b;default:throw Error(r(435,g.tag))}}function Jo(g,b){var T=sM(g);b.forEach(function(I){var F=M0.bind(null,g,I);T.has(I)||(T.add(I),I.then(F,F))})}function Zr(g,b){var T=b.deletions;if(T!==null)for(var I=0;I<T.length;I++){var F=T[I],U=g,J=b,ie=J;e:for(;ie!==null;){switch(ie.tag){case 27:if(bu(ie.type)){Ei=ie.stateNode,Qo=!1;break e}break;case 5:Ei=ie.stateNode,Qo=!1;break e;case 3:case 4:Ei=ie.stateNode.containerInfo,Qo=!0;break e}ie=ie.return}if(Ei===null)throw Error(r(160));HE(U,J,F),Ei=null,Qo=!1,U=F.alternate,U!==null&&(U.return=null),F.return=null}if(b.subtreeFlags&13878)for(b=b.child;b!==null;)GE(b,g),b=b.sibling}var Po=null;function GE(g,b){var T=g.alternate,I=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:Zr(b,g),As(g),I&4&&(Vh(3,g,g.return),Fm(3,g),Vh(5,g,g.return));break;case 1:Zr(b,g),As(g),I&512&&(pa||T===null||Fl(T,T.return)),I&64&&bd&&(g=g.updateQueue,g!==null&&(I=g.callbacks,I!==null&&(T=g.shared.hiddenCallbacks,g.shared.hiddenCallbacks=T===null?I:T.concat(I))));break;case 26:var F=Po;if(Zr(b,g),As(g),I&512&&(pa||T===null||Fl(T,T.return)),I&4){var U=T!==null?T.memoizedState:null;if(I=g.memoizedState,T===null)if(I===null)if(g.stateNode===null){e:{I=g.type,T=g.memoizedProps,F=F.ownerDocument||F;t:switch(I){case"title":U=F.getElementsByTagName("title")[0],(!U||U[Fe]||U[gt]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=F.createElement(I),F.head.insertBefore(U,F.querySelector("head > title"))),Sa(U,I,T),U[gt]=g,Kt(U),I=U;break e;case"link":var J=bA("link","href",F).get(I+(T.href||""));if(J){for(var ie=0;ie<J.length;ie++)if(U=J[ie],U.getAttribute("href")===(T.href==null||T.href===""?null:T.href)&&U.getAttribute("rel")===(T.rel==null?null:T.rel)&&U.getAttribute("title")===(T.title==null?null:T.title)&&U.getAttribute("crossorigin")===(T.crossOrigin==null?null:T.crossOrigin)){J.splice(ie,1);break t}}U=F.createElement(I),Sa(U,I,T),F.head.appendChild(U);break;case"meta":if(J=bA("meta","content",F).get(I+(T.content||""))){for(ie=0;ie<J.length;ie++)if(U=J[ie],U.getAttribute("content")===(T.content==null?null:""+T.content)&&U.getAttribute("name")===(T.name==null?null:T.name)&&U.getAttribute("property")===(T.property==null?null:T.property)&&U.getAttribute("http-equiv")===(T.httpEquiv==null?null:T.httpEquiv)&&U.getAttribute("charset")===(T.charSet==null?null:T.charSet)){J.splice(ie,1);break t}}U=F.createElement(I),Sa(U,I,T),F.head.appendChild(U);break;default:throw Error(r(468,I))}U[gt]=g,Kt(U),I=U}g.stateNode=I}else wA(F,g.type,g.stateNode);else g.stateNode=Vp(F,I,g.memoizedProps);else U!==I?(U===null?T.stateNode!==null&&(T=T.stateNode,T.parentNode.removeChild(T)):U.count--,I===null?wA(F,g.type,g.stateNode):Vp(F,I,g.memoizedProps)):I===null&&g.stateNode!==null&&hr(g,g.memoizedProps,T.memoizedProps)}break;case 27:Zr(b,g),As(g),I&512&&(pa||T===null||Fl(T,T.return)),T!==null&&I&4&&hr(g,g.memoizedProps,T.memoizedProps);break;case 5:if(Zr(b,g),As(g),I&512&&(pa||T===null||Fl(T,T.return)),g.flags&32){F=g.stateNode;try{Zs(F,"")}catch(Oe){ii(g,g.return,Oe)}}I&4&&g.stateNode!=null&&(F=g.memoizedProps,hr(g,F,T!==null?T.memoizedProps:F)),I&1024&&(Pi=!0);break;case 6:if(Zr(b,g),As(g),I&4){if(g.stateNode===null)throw Error(r(162));I=g.memoizedProps,T=g.stateNode;try{T.nodeValue=I}catch(Oe){ii(g,g.return,Oe)}}break;case 3:if(H0=null,F=Po,Po=$0(b.containerInfo),Zr(b,g),Po=F,As(g),I&4&&T!==null&&T.memoizedState.isDehydrated)try{ne(b.containerInfo)}catch(Oe){ii(g,g.return,Oe)}Pi&&(Pi=!1,WE(g));break;case 4:I=Po,Po=$0(g.stateNode.containerInfo),Zr(b,g),As(g),Po=I;break;case 12:Zr(b,g),As(g);break;case 13:Zr(b,g),As(g),g.child.flags&8192&&g.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(lx=rt()),I&4&&(I=g.updateQueue,I!==null&&(g.updateQueue=null,Jo(g,I)));break;case 22:F=g.memoizedState!==null;var de=T!==null&&T.memoizedState!==null,ke=bd,qe=pa;if(bd=ke||F,pa=qe||de,Zr(b,g),pa=qe,bd=ke,As(g),I&8192)e:for(b=g.stateNode,b._visibility=F?b._visibility&-2:b._visibility|1,F&&(T===null||de||bd||pa||pu(g)),T=null,b=g;;){if(b.tag===5||b.tag===26){if(T===null){de=T=b;try{if(U=de.stateNode,F)J=U.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{ie=de.stateNode;var Xe=de.memoizedProps.style,Ie=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;ie.style.display=Ie==null||typeof Ie=="boolean"?"":(""+Ie).trim()}}catch(Oe){ii(de,de.return,Oe)}}}else if(b.tag===6){if(T===null){de=b;try{de.stateNode.nodeValue=F?"":de.memoizedProps}catch(Oe){ii(de,de.return,Oe)}}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===g)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===g)break e;for(;b.sibling===null;){if(b.return===null||b.return===g)break e;T===b&&(T=null),b=b.return}T===b&&(T=null),b.sibling.return=b.return,b=b.sibling}I&4&&(I=g.updateQueue,I!==null&&(T=I.retryQueue,T!==null&&(I.retryQueue=null,Jo(g,T))));break;case 19:Zr(b,g),As(g),I&4&&(I=g.updateQueue,I!==null&&(g.updateQueue=null,Jo(g,I)));break;case 30:break;case 21:break;default:Zr(b,g),As(g)}}function As(g){var b=g.flags;if(b&2){try{for(var T,I=g.return;I!==null;){if($m(I)){T=I;break}I=I.return}if(T==null)throw Error(r(160));switch(T.tag){case 27:var F=T.stateNode,U=b0(g);yd(g,U,F);break;case 5:var J=T.stateNode;T.flags&32&&(Zs(J,""),T.flags&=-33);var ie=b0(g);yd(g,ie,J);break;case 3:case 4:var de=T.stateNode.containerInfo,ke=b0(g);Vi(g,ke,de);break;default:throw Error(r(161))}}catch(qe){ii(g,g.return,qe)}g.flags&=-3}b&4096&&(g.flags&=-4097)}function WE(g){if(g.subtreeFlags&1024)for(g=g.child;g!==null;){var b=g;WE(b),b.tag===5&&b.flags&1024&&b.stateNode.reset(),g=g.sibling}}function wd(g,b){if(b.subtreeFlags&8772)for(b=b.child;b!==null;)Tp(g,b.alternate,b),b=b.sibling}function pu(g){for(g=g.child;g!==null;){var b=g;switch(b.tag){case 0:case 11:case 14:case 15:Vh(4,b,b.return),pu(b);break;case 1:Fl(b,b.return);var T=b.stateNode;typeof T.componentWillUnmount=="function"&&zE(b,b.return,T),pu(b);break;case 27:F0(b.stateNode);case 26:case 5:Fl(b,b.return),pu(b);break;case 22:b.memoizedState===null&&pu(b);break;case 30:pu(b);break;default:pu(b)}g=g.sibling}}function es(g,b,T){for(T=T&&(b.subtreeFlags&8772)!==0,b=b.child;b!==null;){var I=b.alternate,F=g,U=b,J=U.flags;switch(U.tag){case 0:case 11:case 15:es(F,U,T),Fm(4,U);break;case 1:if(es(F,U,T),I=U,F=I.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(ke){ii(I,I.return,ke)}if(I=U,F=I.updateQueue,F!==null){var ie=I.stateNode;try{var de=F.shared.hiddenCallbacks;if(de!==null)for(F.shared.hiddenCallbacks=null,F=0;F<de.length;F++)pE(de[F],ie)}catch(ke){ii(I,I.return,ke)}}T&&J&64&&VE(U),zh(U,U.return);break;case 27:Bm(U);case 26:case 5:es(F,U,T),T&&I===null&&J&4&&Hh(U),zh(U,U.return);break;case 12:es(F,U,T);break;case 13:es(F,U,T),T&&J&4&&qE(F,U);break;case 22:U.memoizedState===null&&es(F,U,T),zh(U,U.return);break;case 30:break;default:es(F,U,T)}b=b.sibling}}function w0(g,b){var T=null;g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),g=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(g=b.memoizedState.cachePool.pool),g!==T&&(g!=null&&g.refCount++,T!=null&&mm(T))}function _0(g,b){g=null,b.alternate!==null&&(g=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==g&&(b.refCount++,g!=null&&mm(g))}function gu(g,b,T,I){if(b.subtreeFlags&10256)for(b=b.child;b!==null;)YE(g,b,T,I),b=b.sibling}function YE(g,b,T,I){var F=b.flags;switch(b.tag){case 0:case 11:case 15:gu(g,b,T,I),F&2048&&Fm(9,b);break;case 1:gu(g,b,T,I);break;case 3:gu(g,b,T,I),F&2048&&(g=null,b.alternate!==null&&(g=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==g&&(b.refCount++,g!=null&&mm(g)));break;case 12:if(F&2048){gu(g,b,T,I),g=b.stateNode;try{var U=b.memoizedProps,J=U.id,ie=U.onPostCommit;typeof ie=="function"&&ie(J,b.alternate===null?"mount":"update",g.passiveEffectDuration,-0)}catch(de){ii(b,b.return,de)}}else gu(g,b,T,I);break;case 13:gu(g,b,T,I);break;case 23:break;case 22:U=b.stateNode,J=b.alternate,b.memoizedState!==null?U._visibility&2?gu(g,b,T,I):qh(g,b):U._visibility&2?gu(g,b,T,I):(U._visibility|=2,Ep(g,b,T,I,(b.subtreeFlags&10256)!==0)),F&2048&&w0(J,b);break;case 24:gu(g,b,T,I),F&2048&&_0(b.alternate,b);break;default:gu(g,b,T,I)}}function Ep(g,b,T,I,F){for(F=F&&(b.subtreeFlags&10256)!==0,b=b.child;b!==null;){var U=g,J=b,ie=T,de=I,ke=J.flags;switch(J.tag){case 0:case 11:case 15:Ep(U,J,ie,de,F),Fm(8,J);break;case 23:break;case 22:var qe=J.stateNode;J.memoizedState!==null?qe._visibility&2?Ep(U,J,ie,de,F):qh(U,J):(qe._visibility|=2,Ep(U,J,ie,de,F)),F&&ke&2048&&w0(J.alternate,J);break;case 24:Ep(U,J,ie,de,F),F&&ke&2048&&_0(J.alternate,J);break;default:Ep(U,J,ie,de,F)}b=b.sibling}}function qh(g,b){if(b.subtreeFlags&10256)for(b=b.child;b!==null;){var T=g,I=b,F=I.flags;switch(I.tag){case 22:qh(T,I),F&2048&&w0(I.alternate,I);break;case 24:qh(T,I),F&2048&&_0(I.alternate,I);break;default:qh(T,I)}b=b.sibling}}var Ap=8192;function Cp(g){if(g.subtreeFlags&Ap)for(g=g.child;g!==null;)KE(g),g=g.sibling}function KE(g){switch(g.tag){case 26:Cp(g),g.flags&Ap&&g.memoizedState!==null&&pF(Po,g.memoizedState,g.memoizedProps);break;case 5:Cp(g);break;case 3:case 4:var b=Po;Po=$0(g.stateNode.containerInfo),Cp(g),Po=b;break;case 22:g.memoizedState===null&&(b=g.alternate,b!==null&&b.memoizedState!==null?(b=Ap,Ap=16777216,Cp(g),Ap=b):Cp(g));break;default:Cp(g)}}function XE(g){var b=g.alternate;if(b!==null&&(g=b.child,g!==null)){b.child=null;do b=g.sibling,g.sibling=null,g=b;while(g!==null)}}function x0(g){var b=g.deletions;if((g.flags&16)!==0){if(b!==null)for(var T=0;T<b.length;T++){var I=b[T];yr=I,lM(I,g)}XE(g)}if(g.subtreeFlags&10256)for(g=g.child;g!==null;)ix(g),g=g.sibling}function ix(g){switch(g.tag){case 0:case 11:case 15:x0(g),g.flags&2048&&Vh(9,g,g.return);break;case 3:x0(g);break;case 12:x0(g);break;case 22:var b=g.stateNode;g.memoizedState!==null&&b._visibility&2&&(g.return===null||g.return.tag!==13)?(b._visibility&=-3,Ye(g)):x0(g);break;default:x0(g)}}function Ye(g){var b=g.deletions;if((g.flags&16)!==0){if(b!==null)for(var T=0;T<b.length;T++){var I=b[T];yr=I,lM(I,g)}XE(g)}for(g=g.child;g!==null;){switch(b=g,b.tag){case 0:case 11:case 15:Vh(8,b,b.return),Ye(b);break;case 22:T=b.stateNode,T._visibility&2&&(T._visibility&=-3,Ye(b));break;default:Ye(b)}g=g.sibling}}function lM(g,b){for(;yr!==null;){var T=yr;switch(T.tag){case 0:case 11:case 15:Vh(8,T,b);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var I=T.memoizedState.cachePool.pool;I!=null&&I.refCount++}break;case 24:mm(T.memoizedState.cache)}if(I=T.child,I!==null)I.return=T,yr=I;else e:for(T=g;yr!==null;){I=yr;var F=I.sibling,U=I.return;if(Zo(I),I===T){yr=null;break e}if(F!==null){F.return=U,yr=F;break e}yr=U}}}var zi={getCacheForType:function(g){var b=Xa(da),T=b.data.get(g);return T===void 0&&(T=g(),b.data.set(g,T)),T}},S0=typeof WeakMap=="function"?WeakMap:Map,xr=0,hi=null,cr=null,br=0,zr=0,Cs=null,_d=!1,Dp=!1,ax=!1,mu=0,Qi=0,xd=0,Gh=0,ox=0,sl=0,kp=0,Vm=null,ts=null,sx=!1,lx=0,T0=1/0,E0=null,Sd=null,Za=0,Td=null,Ip=null,Mp=0,cx=0,ux=null,ZE=null,zm=0,dx=null;function Ds(){if((xr&2)!==0&&br!==0)return br&-br;if(W.T!==null){var g=sp;return g!==0?g:R0()}return it()}function QE(){sl===0&&(sl=(br&536870912)===0||Nr?rr():536870912);var g=uo.current;return g!==null&&(g.flags|=32),sl}function ks(g,b,T){(g===hi&&(zr===2||zr===9)||g.cancelPendingCommit!==null)&&(Oi(g,0),Ed(g,br,sl,!1)),Fi(g,T),((xr&2)===0||g!==hi)&&(g===hi&&((xr&2)===0&&(Gh|=T),Qi===4&&Ed(g,br,sl,!1)),vu(g))}function JE(g,b,T){if((xr&6)!==0)throw Error(r(327));var I=!T&&(b&124)===0&&(b&g.expiredLanes)===0||wi(g,b),F=I?oF(g,b):fx(g,b,!0),U=I;do{if(F===0){Dp&&!I&&Ed(g,b,0,!1);break}else{if(T=g.current.alternate,U&&!cM(T)){F=fx(g,b,!1),U=!1;continue}if(F===2){if(U=b,g.errorRecoveryDisabledLanes&U)var J=0;else J=g.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){b=J;e:{var ie=g;F=Vm;var de=ie.current.memoizedState.isDehydrated;if(de&&(Oi(ie,J).flags|=256),J=fx(ie,J,!1),J!==2){if(ax&&!de){ie.errorRecoveryDisabledLanes|=U,Gh|=U,F=4;break e}U=ts,ts=F,U!==null&&(ts===null?ts=U:ts.push.apply(ts,U))}F=J}if(U=!1,F!==2)continue}}if(F===1){Oi(g,0),Ed(g,b,0,!0);break}e:{switch(I=g,U=F,U){case 0:case 1:throw Error(r(345));case 4:if((b&4194048)!==b)break;case 6:Ed(I,b,sl,!_d);break e;case 2:ts=null;break;case 3:case 5:break;default:throw Error(r(329))}if((b&62914560)===b&&(F=lx+300-rt(),10<F)){if(Ed(I,b,sl,!_d),dr(I,0,!0)!==0)break e;I.timeoutHandle=Bp(eA.bind(null,I,T,ts,E0,sx,b,sl,Gh,kp,_d,U,2,-0,0),F);break e}eA(I,T,ts,E0,sx,b,sl,Gh,kp,_d,U,0,-0,0)}}break}while(!0);vu(g)}function eA(g,b,T,I,F,U,J,ie,de,ke,qe,Xe,Ie,Oe){if(g.timeoutHandle=-1,Xe=b.subtreeFlags,(Xe&8192||(Xe&16785408)===16785408)&&(sv={stylesheets:null,count:0,unsuspend:qn},KE(b),Xe=xM(),Xe!==null)){g.cancelPendingCommit=Xe(Lr.bind(null,g,b,U,T,I,F,J,ie,de,qe,1,Ie,Oe)),Ed(g,U,J,!ke);return}Lr(g,b,U,T,I,F,J,ie,de)}function cM(g){for(var b=g;;){var T=b.tag;if((T===0||T===11||T===15)&&b.flags&16384&&(T=b.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var I=0;I<T.length;I++){var F=T[I],U=F.getSnapshot;F=F.value;try{if(!Xi(U(),F))return!1}catch{return!1}}if(T=b.child,b.subtreeFlags&16384&&T!==null)T.return=b,b=T;else{if(b===g)break;for(;b.sibling===null;){if(b.return===null||b.return===g)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function Ed(g,b,T,I){b&=~ox,b&=~Gh,g.suspendedLanes|=b,g.pingedLanes&=~b,I&&(g.warmLanes|=b),I=g.expirationTimes;for(var F=b;0<F;){var U=31-Et(F),J=1<<U;I[U]=-1,F&=~J}T!==0&&ae(g,T,b)}function A0(){return(xr&6)===0?(O0(0),!1):!0}function ga(){if(cr!==null){if(zr===0)var g=cr.return;else g=cr,cd=su=null,B_(g),wp=null,Mm=0,g=cr;for(;g!==null;)y0(g.alternate,g),g=g.return;cr=null}}function Oi(g,b){var T=g.timeoutHandle;T!==-1&&(g.timeoutHandle=-1,cF(T)),T=g.cancelPendingCommit,T!==null&&(g.cancelPendingCommit=null,T()),ga(),hi=g,cr=T=ru(g.current,null),br=b,zr=0,Cs=null,_d=!1,Dp=wi(g,b),ax=!1,kp=sl=ox=Gh=xd=Qi=0,ts=Vm=null,sx=!1,(b&8)!==0&&(b|=b&32);var I=g.entangledLanes;if(I!==0)for(g=g.entanglements,I&=b;0<I;){var F=31-Et(I),U=1<<F;b|=g[F],I&=~U}return mu=b,rp(),T}function ja(g,b){Xn=null,W.H=X_,b===ym||b===e0?(b=t0(),zr=3):b===H2?(b=t0(),zr=4):zr=b===NE?8:b!==null&&typeof b=="object"&&typeof b.then=="function"?6:1,Cs=b,cr===null&&(Qi=1,jh(g,nl(b,g.current)))}function C0(){var g=W.H;return W.H=X_,g===null?X_:g}function D0(){var g=W.A;return W.A=zi,g}function hx(){Qi=4,_d||(br&4194048)!==br&&uo.current!==null||(Dp=!0),(xd&134217727)===0&&(Gh&134217727)===0||hi===null||Ed(hi,br,sl,!1)}function fx(g,b,T){var I=xr;xr|=2;var F=C0(),U=D0();(hi!==g||br!==b)&&(E0=null,Oi(g,b)),b=!1;var J=Qi;e:do try{if(zr!==0&&cr!==null){var ie=cr,de=Cs;switch(zr){case 8:ga(),J=6;break e;case 3:case 2:case 9:case 6:uo.current===null&&(b=!0);var ke=zr;if(zr=0,Cs=null,Tc(g,ie,de,ke),T&&Dp){J=0;break e}break;default:ke=zr,zr=0,Cs=null,Tc(g,ie,de,ke)}}Hm(),J=Qi;break}catch(qe){ja(g,qe)}while(!0);return b&&g.shellSuspendCounter++,cd=su=null,xr=I,W.H=F,W.A=U,cr===null&&(hi=null,br=0,rp()),J}function Hm(){for(;cr!==null;)Cd(cr)}function oF(g,b){var T=xr;xr|=2;var I=C0(),F=D0();hi!==g||br!==b?(E0=null,T0=rt()+500,Oi(g,b)):Dp=wi(g,b);e:do try{if(zr!==0&&cr!==null){b=cr;var U=Cs;t:switch(zr){case 1:zr=0,Cs=null,Tc(g,b,U,1);break;case 2:case 9:if(q2(U)){zr=0,Cs=null,Pp(b);break}b=function(){zr!==2&&zr!==9||hi!==g||(zr=7),vu(g)},U.then(b,b);break e;case 3:zr=7;break e;case 4:zr=5;break e;case 7:q2(U)?(zr=0,Cs=null,Pp(b)):(zr=0,Cs=null,Tc(g,b,U,7));break;case 5:var J=null;switch(cr.tag){case 26:J=cr.memoizedState;case 5:case 27:var ie=cr;if(!J||wu(J)){zr=0,Cs=null;var de=ie.sibling;if(de!==null)cr=de;else{var ke=ie.return;ke!==null?(cr=ke,Dd(ke)):cr=null}break t}}zr=0,Cs=null,Tc(g,b,U,5);break;case 6:zr=0,Cs=null,Tc(g,b,U,6);break;case 8:ga(),Qi=6;break e;default:throw Error(r(462))}}Ad();break}catch(qe){ja(g,qe)}while(!0);return cd=su=null,W.H=I,W.A=F,xr=T,cr!==null?0:(hi=null,br=0,rp(),Qi)}function Ad(){for(;cr!==null&&!nt();)Cd(cr)}function Cd(g){var b=Nm(g.alternate,g,mu);g.memoizedProps=g.pendingProps,b===null?Dd(g):cr=b}function Pp(g){var b=g,T=b.alternate;switch(b.tag){case 15:case 0:b=iM(T,b,b.pendingProps,b.type,void 0,br);break;case 11:b=iM(T,b,b.pendingProps,b.type.render,b.ref,br);break;case 5:B_(b);default:y0(T,b),b=cr=D_(b,mu),b=Nm(T,b,mu)}g.memoizedProps=g.pendingProps,b===null?Dd(g):cr=b}function Tc(g,b,T,I){cd=su=null,B_(b),wp=null,Mm=0;var F=b.return;try{if(Ft(g,F,b,T,br)){Qi=1,jh(g,nl(T,g.current)),cr=null;return}}catch(U){if(F!==null)throw cr=F,U;Qi=1,jh(g,nl(T,g.current)),cr=null;return}b.flags&32768?(Nr||I===1?g=!0:Dp||(br&536870912)!==0?g=!1:(_d=g=!0,(I===2||I===9||I===3||I===6)&&(I=uo.current,I!==null&&I.tag===13&&(I.flags|=16384))),qm(b,g)):Dd(b)}function Dd(g){var b=g;do{if((b.flags&32768)!==0){qm(b,_d);return}g=b.return;var T=oM(b.alternate,b,mu);if(T!==null){cr=T;return}if(b=b.sibling,b!==null){cr=b;return}cr=b=g}while(b!==null);Qi===0&&(Qi=5)}function qm(g,b){do{var T=jm(g.alternate,g);if(T!==null){T.flags&=32767,cr=T;return}if(T=g.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!b&&(g=g.sibling,g!==null)){cr=g;return}cr=g=T}while(g!==null);Qi=6,cr=null}function Lr(g,b,T,I,F,U,J,ie,de){g.cancelPendingCommit=null;do I0();while(Za!==0);if((xr&6)!==0)throw Error(r(327));if(b!==null){if(b===g.current)throw Error(r(177));if(U=b.lanes|b.childLanes,U|=zy,Co(g,T,U,J,ie,de),g===hi&&(cr=hi=null,br=0),Ip=b,Td=g,Mp=T,cx=U,ux=F,ZE=I,(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?(g.callbackNode=null,g.callbackPriority=0,kd(nr,function(){return iA(),null})):(g.callbackNode=null,g.callbackPriority=0),I=(b.flags&13878)!==0,(b.subtreeFlags&13878)!==0||I){I=W.T,W.T=null,F=X.p,X.p=2,J=xr,xr|=4;try{Um(g,b,T)}finally{xr=J,X.p=F,W.T=I}}Za=1,k0(),tA(),nA()}}function k0(){if(Za===1){Za=0;var g=Td,b=Ip,T=(b.flags&13878)!==0;if((b.subtreeFlags&13878)!==0||T){T=W.T,W.T=null;var I=X.p;X.p=2;var F=xr;xr|=4;try{GE(b,g);var U=hA,J=od(g.containerInfo),ie=U.focusedElem,de=U.selectionRange;if(J!==ie&&ie&&ie.ownerDocument&&xh(ie.ownerDocument.documentElement,ie)){if(de!==null&&w_(ie)){var ke=de.start,qe=de.end;if(qe===void 0&&(qe=ke),"selectionStart"in ie)ie.selectionStart=ke,ie.selectionEnd=Math.min(qe,ie.value.length);else{var Xe=ie.ownerDocument||document,Ie=Xe&&Xe.defaultView||window;if(Ie.getSelection){var Oe=Ie.getSelection(),In=ie.textContent.length,yn=Math.min(de.start,In),Ai=de.end===void 0?yn:Math.min(de.end,In);!Oe.extend&&yn>Ai&&(J=Ai,Ai=yn,yn=J);var xe=lm(ie,yn),ve=lm(ie,Ai);if(xe&&ve&&(Oe.rangeCount!==1||Oe.anchorNode!==xe.node||Oe.anchorOffset!==xe.offset||Oe.focusNode!==ve.node||Oe.focusOffset!==ve.offset)){var De=Xe.createRange();De.setStart(xe.node,xe.offset),Oe.removeAllRanges(),yn>Ai?(Oe.addRange(De),Oe.extend(ve.node,ve.offset)):(De.setEnd(ve.node,ve.offset),Oe.addRange(De))}}}}for(Xe=[],Oe=ie;Oe=Oe.parentNode;)Oe.nodeType===1&&Xe.push({element:Oe,left:Oe.scrollLeft,top:Oe.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<Xe.length;ie++){var We=Xe[ie];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}Ac=!!_x,hA=_x=null}finally{xr=F,X.p=I,W.T=T}}g.current=b,Za=2}}function tA(){if(Za===2){Za=0;var g=Td,b=Ip,T=(b.flags&8772)!==0;if((b.subtreeFlags&8772)!==0||T){T=W.T,W.T=null;var I=X.p;X.p=2;var F=xr;xr|=4;try{Tp(g,b.alternate,b)}finally{xr=F,X.p=I,W.T=T}}Za=3}}function nA(){if(Za===4||Za===3){Za=0,we();var g=Td,b=Ip,T=Mp,I=ZE;(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?Za=5:(Za=0,Ip=Td=null,rA(g,g.pendingLanes));var F=g.pendingLanes;if(F===0&&(Sd=null),Me(T),b=b.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Ae,b,void 0,(b.current.flags&128)===128)}catch{}if(I!==null){b=W.T,F=X.p,X.p=2,W.T=null;try{for(var U=g.onRecoverableError,J=0;J<I.length;J++){var ie=I[J];U(ie.value,{componentStack:ie.stack})}}finally{W.T=b,X.p=F}}(Mp&3)!==0&&I0(),vu(g),F=g.pendingLanes,(T&4194090)!==0&&(F&42)!==0?g===dx?zm++:(zm=0,dx=g):zm=0,O0(0)}}function rA(g,b){(g.pooledCacheLanes&=b)===0&&(b=g.pooledCache,b!=null&&(g.pooledCache=null,mm(b)))}function I0(g){return k0(),tA(),nA(),iA()}function iA(){if(Za!==5)return!1;var g=Td,b=cx;cx=0;var T=Me(Mp),I=W.T,F=X.p;try{X.p=32>T?32:T,W.T=null,T=ux,ux=null;var U=Td,J=Mp;if(Za=0,Ip=Td=null,Mp=0,(xr&6)!==0)throw Error(r(331));var ie=xr;if(xr|=4,ix(U.current),YE(U,U.current,J,T),xr=ie,O0(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Ae,U)}catch{}return!0}finally{X.p=F,W.T=I,rA(g,b)}}function aA(g,b,T){b=nl(T,b),b=f0(g.stateNode,b,2),g=hd(g,b,2),g!==null&&(Fi(g,2),vu(g))}function ii(g,b,T){if(g.tag===3)aA(g,g,T);else for(;b!==null;){if(b.tag===3){aA(b,g,T);break}else if(b.tag===1){var I=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Sd===null||!Sd.has(I))){g=nl(T,g),T=RE(2),I=hd(b,T,2),I!==null&&(Mr(T,I,b,g),Fi(I,2),vu(I));break}}b=b.return}}function px(g,b,T){var I=g.pingCache;if(I===null){I=g.pingCache=new S0;var F=new Set;I.set(b,F)}else F=I.get(b),F===void 0&&(F=new Set,I.set(b,F));F.has(T)||(ax=!0,F.add(T),g=uM.bind(null,g,b,T),b.then(g,g))}function uM(g,b,T){var I=g.pingCache;I!==null&&I.delete(b),g.pingedLanes|=g.suspendedLanes&T,g.warmLanes&=~T,hi===g&&(br&T)===T&&(Qi===4||Qi===3&&(br&62914560)===br&&300>rt()-lx?(xr&2)===0&&Oi(g,0):ox|=T,kp===br&&(kp=0)),vu(g)}function oA(g,b){b===0&&(b=ji()),g=ip(g,b),g!==null&&(Fi(g,b),vu(g))}function dM(g){var b=g.memoizedState,T=0;b!==null&&(T=b.retryLane),oA(g,T)}function M0(g,b){var T=0;switch(g.tag){case 13:var I=g.stateNode,F=g.memoizedState;F!==null&&(T=F.retryLane);break;case 19:I=g.stateNode;break;case 22:I=g.stateNode._retryCache;break;default:throw Error(r(314))}I!==null&&I.delete(b),oA(g,T)}function kd(g,b){return Ge(g,b)}var P0=null,Id=null,jr=!1,gx=!1,Op=!1,Rp=0;function vu(g){g!==Id&&g.next===null&&(Id===null?P0=Id=g:Id=Id.next=g),gx=!0,jr||(jr=!0,uA())}function O0(g,b){if(!Op&&gx){Op=!0;do for(var T=!1,I=P0;I!==null;){if(g!==0){var F=I.pendingLanes;if(F===0)var U=0;else{var J=I.suspendedLanes,ie=I.pingedLanes;U=(1<<31-Et(42|g)+1)-1,U&=F&~(J&~ie),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(T=!0,cA(I,U))}else U=br,U=dr(I,I===hi?U:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),(U&3)===0||wi(I,U)||(T=!0,cA(I,U));I=I.next}while(T);Op=!1}}function mx(){sA()}function sA(){gx=jr=!1;var g=0;Rp!==0&&(ev()&&(g=Rp),Rp=0);for(var b=rt(),T=null,I=P0;I!==null;){var F=I.next,U=ai(I,b);U===0?(I.next=null,T===null?P0=F:T.next=F,F===null&&(Id=T)):(T=I,(g!==0||(U&3)!==0)&&(gx=!0)),I=F}O0(g)}function ai(g,b){for(var T=g.suspendedLanes,I=g.pingedLanes,F=g.expirationTimes,U=g.pendingLanes&-62914561;0<U;){var J=31-Et(U),ie=1<<J,de=F[J];de===-1?((ie&T)===0||(ie&I)!==0)&&(F[J]=ze(ie,b)):de<=b&&(g.expiredLanes|=ie),U&=~ie}if(b=hi,T=br,T=dr(g,g===b?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),I=g.callbackNode,T===0||g===b&&(zr===2||zr===9)||g.cancelPendingCommit!==null)return I!==null&&I!==null&&Ve(I),g.callbackNode=null,g.callbackPriority=0;if((T&3)===0||wi(g,T)){if(b=T&-T,b===g.callbackPriority)return b;switch(I!==null&&Ve(I),Me(T)){case 2:case 8:T=kn;break;case 32:T=nr;break;case 268435456:T=Yt;break;default:T=nr}return I=lA.bind(null,g),T=Ge(T,I),g.callbackPriority=b,g.callbackNode=T,b}return I!==null&&I!==null&&Ve(I),g.callbackPriority=2,g.callbackNode=null,2}function lA(g,b){if(Za!==0&&Za!==5)return g.callbackNode=null,g.callbackPriority=0,null;var T=g.callbackNode;if(I0()&&g.callbackNode!==T)return null;var I=br;return I=dr(g,g===hi?I:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),I===0?null:(JE(g,I,b),ai(g,rt()),g.callbackNode!=null&&g.callbackNode===T?lA.bind(null,g):null)}function cA(g,b){if(I0())return null;JE(g,b,!0)}function uA(){uF(function(){(xr&6)!==0?Ge(Mt,mx):sA()})}function R0(){return Rp===0&&(Rp=rr()),Rp}function Gm(g){return g==null||typeof g=="symbol"||typeof g=="boolean"?null:typeof g=="function"?g:yh(""+g)}function vx(g,b){var T=b.ownerDocument.createElement("input");return T.name=b.name,T.value=b.value,g.id&&T.setAttribute("form",g.id),b.parentNode.insertBefore(T,b),g=new FormData(g),T.parentNode.removeChild(T),g}function N0(g,b,T,I,F){if(b==="submit"&&T&&T.stateNode===F){var U=Gm((F[Nt]||null).action),J=I.submitter;J&&(b=(b=J[Nt]||null)?Gm(b.formAction):J.getAttribute("formAction"),b!==null&&(U=b,J=null));var ie=new Zc("action","action",null,I,F);g.push({event:ie,listeners:[{instance:null,listener:function(){if(I.defaultPrevented){if(Rp!==0){var de=J?vx(F,J):new FormData(F);Y_(T,{pending:!0,data:de,method:F.method,action:U},null,de)}}else typeof U=="function"&&(ie.preventDefault(),de=J?vx(F,J):new FormData(F),Y_(T,{pending:!0,data:de,method:F.method,action:U},U,de))},currentTarget:F}]})}}for(var Wm=0;Wm<T_.length;Wm++){var yx=T_[Wm],hM=yx.toLowerCase(),bx=yx[0].toUpperCase()+yx.slice(1);gc(hM,"on"+bx)}gc(tE,"onAnimationEnd"),gc($2,"onAnimationIteration"),gc(x_,"onAnimationStart"),gc("dblclick","onDoubleClick"),gc("focusin","onFocus"),gc("focusout","onBlur"),gc(S_,"onTransitionRun"),gc(B2,"onTransitionStart"),gc(nE,"onTransitionCancel"),gc(rE,"onTransitionEnd"),jn("onMouseEnter",["mouseout","mouseover"]),jn("onMouseLeave",["mouseout","mouseover"]),jn("onPointerEnter",["pointerout","pointerover"]),jn("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ym="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ym));function fM(g,b){b=(b&4)!==0;for(var T=0;T<g.length;T++){var I=g[T],F=I.event;I=I.listeners;e:{var U=void 0;if(b)for(var J=I.length-1;0<=J;J--){var ie=I[J],de=ie.instance,ke=ie.currentTarget;if(ie=ie.listener,de!==U&&F.isPropagationStopped())break e;U=ie,F.currentTarget=ke;try{U(F)}catch(qe){Om(qe)}F.currentTarget=null,U=de}else for(J=0;J<I.length;J++){if(ie=I[J],de=ie.instance,ke=ie.currentTarget,ie=ie.listener,de!==U&&F.isPropagationStopped())break e;U=ie,F.currentTarget=ke;try{U(F)}catch(qe){Om(qe)}F.currentTarget=null,U=de}}}}function Yn(g,b){var T=b[qt];T===void 0&&(T=b[qt]=new Set);var I=g+"__bubble";T.has(I)||(pM(b,g,2,!1),T.add(I))}function Np(g,b,T){var I=0;b&&(I|=4),pM(T,g,I,b)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function Km(g){if(!g[Wh]){g[Wh]=!0,Sn.forEach(function(T){T!=="selectionchange"&&(sF.has(T)||Np(T,!1,g),Np(T,!0,g))});var b=g.nodeType===9?g:g.ownerDocument;b===null||b[Wh]||(b[Wh]=!0,Np("selectionchange",!1,b))}}function pM(g,b,T,I){switch(K0(b)){case 2:var F=W0;break;case 8:F=Dx;break;default:F=SA}T=F.bind(null,b,T,g),F=void 0,!so||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(F=!0),I?F!==void 0?g.addEventListener(b,T,{capture:!0,passive:F}):g.addEventListener(b,T,!0):F!==void 0?g.addEventListener(b,T,{passive:F}):g.addEventListener(b,T,!1)}function Xm(g,b,T,I,F){var U=I;if((b&1)===0&&(b&2)===0&&I!==null)e:for(;;){if(I===null)return;var J=I.tag;if(J===3||J===4){var ie=I.stateNode.containerInfo;if(ie===F)break;if(J===4)for(J=I.return;J!==null;){var de=J.tag;if((de===3||de===4)&&J.stateNode.containerInfo===F)return;J=J.return}for(;ie!==null;){if(J=vt(ie),J===null)return;if(de=J.tag,de===5||de===6||de===26||de===27){I=U=J;continue e}ie=ie.parentNode}}I=I.return}d_(function(){var ke=U,qe=Qs(T),Xe=[];e:{var Ie=iE.get(g);if(Ie!==void 0){var Oe=Zc,In=g;switch(g){case"keypress":if(dc(T)===0)break e;case"keydown":case"keyup":Oe=ep;break;case"focusin":In="focus",Oe=rm;break;case"focusout":In="blur",Oe=rm;break;case"beforeblur":case"afterblur":Oe=rm;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=f_;break;case tE:case $2:case x_:Oe=im;break;case rE:Oe=g_;break;case"scroll":case"scrollend":Oe=Ly;break;case"wheel":Oe=om;break;case"copy":case"cut":case"paste":Oe=ad;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=fc;break;case"toggle":case"beforetoggle":Oe=m_}var yn=(b&4)!==0,Ai=!yn&&(g==="scroll"||g==="scrollend"),xe=yn?Ie!==null?Ie+"Capture":null:Ie;yn=[];for(var ve=ke,De;ve!==null;){var We=ve;if(De=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||De===null||xe===null||(We=Zf(ve,xe),We!=null&&yn.push(Zm(ve,We,De))),Ai)break;ve=ve.return}0<yn.length&&(Ie=new Oe(Ie,In,null,T,qe),Xe.push({event:Ie,listeners:yn}))}}if((b&7)===0){e:{if(Ie=g==="mouseover"||g==="pointerover",Oe=g==="mouseout"||g==="pointerout",Ie&&T!==ys&&(In=T.relatedTarget||T.fromElement)&&(vt(In)||In[Tt]))break e;if((Oe||Ie)&&(Ie=qe.window===qe?qe:(Ie=qe.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Oe?(In=T.relatedTarget||T.toElement,Oe=ke,In=In?vt(In):null,In!==null&&(Ai=a(In),yn=In.tag,In!==Ai||yn!==5&&yn!==27&&yn!==6)&&(In=null)):(Oe=null,In=ke),Oe!==In)){if(yn=Pl,We="onMouseLeave",xe="onMouseEnter",ve="mouse",(g==="pointerout"||g==="pointerover")&&(yn=fc,We="onPointerLeave",xe="onPointerEnter",ve="pointer"),Ai=Oe==null?Ie:wt(Oe),De=In==null?Ie:wt(In),Ie=new yn(We,ve+"leave",Oe,T,qe),Ie.target=Ai,Ie.relatedTarget=De,We=null,vt(qe)===ke&&(yn=new yn(xe,ve+"enter",In,T,qe),yn.target=De,yn.relatedTarget=Ai,We=yn),Ai=We,Oe&&In)t:{for(yn=Oe,xe=In,ve=0,De=yn;De;De=yu(De))ve++;for(De=0,We=xe;We;We=yu(We))De++;for(;0<ve-De;)yn=yu(yn),ve--;for(;0<De-ve;)xe=yu(xe),De--;for(;ve--;){if(yn===xe||xe!==null&&yn===xe.alternate)break t;yn=yu(yn),xe=yu(xe)}yn=null}else yn=null;Oe!==null&&Qm(Xe,Ie,Oe,yn,!1),In!==null&&Ai!==null&&Qm(Xe,Ai,In,yn,!0)}}e:{if(Ie=ke?wt(ke):window,Oe=Ie.nodeName&&Ie.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&Ie.type==="file")var Vt=nu;else if(Ki(Ie))if(ko)Vt=QT;else{Vt=XT;var mr=b_}else Oe=Ie.nodeName,!Oe||Oe.toLowerCase()!=="input"||Ie.type!=="checkbox"&&Ie.type!=="radio"?ke&&vh(ke.elementType)&&(Vt=nu):Vt=ZT;if(Vt&&(Vt=Vt(g,ke))){el(Xe,Vt,T,qe);break e}mr&&mr(g,Ie,ke),g==="focusout"&&ke&&Ie.type==="number"&&ke.memoizedProps.value!=null&&rd(Ie,"number",Ie.value)}switch(mr=ke?wt(ke):window,g){case"focusin":(Ki(mr)||mr.contentEditable==="true")&&(np=mr,eE=ke,Sh=null);break;case"focusout":Sh=eE=np=null;break;case"mousedown":Vy=!0;break;case"contextmenu":case"mouseup":case"dragend":Vy=!1,__(Xe,T,qe);break;case"selectionchange":if(F2)break;case"keydown":case"keyup":__(Xe,T,qe)}var Jt;if(tu)e:{switch(g){case"compositionstart":var Tn="onCompositionStart";break e;case"compositionend":Tn="onCompositionEnd";break e;case"compositionupdate":Tn="onCompositionUpdate";break e}Tn=void 0}else lr?Ne(g,T)&&(Tn="onCompositionEnd"):g==="keydown"&&T.keyCode===229&&(Tn="onCompositionStart");Tn&&(Q&&T.locale!=="ko"&&(lr||Tn!=="onCompositionStart"?Tn==="onCompositionEnd"&&lr&&(Jt=Qf()):(Ml=qe,cc="value"in Ml?Ml.value:Ml.textContent,lr=!0)),mr=L0(ke,Tn),0<mr.length&&(Tn=new _h(Tn,g,null,T,qe),Xe.push({event:Tn,listeners:mr}),Jt?Tn.data=Jt:(Jt=ht(T),Jt!==null&&(Tn.data=Jt)))),(Jt=G?Ra(g,T):Kn(g,T))&&(Tn=L0(ke,"onBeforeInput"),0<Tn.length&&(mr=new _h("onBeforeInput","beforeinput",null,T,qe),Xe.push({event:mr,listeners:Tn}),mr.data=Jt)),N0(Xe,g,ke,T,qe)}fM(Xe,b)})}function Zm(g,b,T){return{instance:g,listener:b,currentTarget:T}}function L0(g,b){for(var T=b+"Capture",I=[];g!==null;){var F=g,U=F.stateNode;if(F=F.tag,F!==5&&F!==26&&F!==27||U===null||(F=Zf(g,T),F!=null&&I.unshift(Zm(g,F,U)),F=Zf(g,b),F!=null&&I.push(Zm(g,F,U))),g.tag===3)return I;g=g.return}return[]}function yu(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5&&g.tag!==27);return g||null}function Qm(g,b,T,I,F){for(var U=b._reactName,J=[];T!==null&&T!==I;){var ie=T,de=ie.alternate,ke=ie.stateNode;if(ie=ie.tag,de!==null&&de===I)break;ie!==5&&ie!==26&&ie!==27||ke===null||(de=ke,F?(ke=Zf(T,U),ke!=null&&J.unshift(Zm(T,ke,de))):F||(ke=Zf(T,U),ke!=null&&J.push(Zm(T,ke,de)))),T=T.return}J.length!==0&&g.push({event:b,listeners:J})}var lF=/\r\n?/g,gM=/\u0000|\uFFFD/g;function mM(g){return(typeof g=="string"?g:""+g).replace(lF,`
`).replace(gM,"")}function vM(g,b){return b=mM(b),mM(g)===b}function Lp(){}function Pr(g,b,T,I,F,U){switch(T){case"children":typeof I=="string"?b==="body"||b==="textarea"&&I===""||Zs(g,I):(typeof I=="number"||typeof I=="bigint")&&b!=="body"&&Zs(g,""+I);break;case"className":$i(g,"class",I);break;case"tabIndex":$i(g,"tabindex",I);break;case"dir":case"role":case"viewBox":case"width":case"height":$i(g,T,I);break;case"style":Jg(g,I,U);break;case"data":if(b!=="object"){$i(g,"data",I);break}case"src":case"href":if(I===""&&(b!=="a"||T!=="href")){g.removeAttribute(T);break}if(I==null||typeof I=="function"||typeof I=="symbol"||typeof I=="boolean"){g.removeAttribute(T);break}I=yh(""+I),g.setAttribute(T,I);break;case"action":case"formAction":if(typeof I=="function"){g.setAttribute(T,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(T==="formAction"?(b!=="input"&&Pr(g,b,"name",F.name,F,null),Pr(g,b,"formEncType",F.formEncType,F,null),Pr(g,b,"formMethod",F.formMethod,F,null),Pr(g,b,"formTarget",F.formTarget,F,null)):(Pr(g,b,"encType",F.encType,F,null),Pr(g,b,"method",F.method,F,null),Pr(g,b,"target",F.target,F,null)));if(I==null||typeof I=="symbol"||typeof I=="boolean"){g.removeAttribute(T);break}I=yh(""+I),g.setAttribute(T,I);break;case"onClick":I!=null&&(g.onclick=Lp);break;case"onScroll":I!=null&&Yn("scroll",g);break;case"onScrollEnd":I!=null&&Yn("scrollend",g);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(r(61));if(T=I.__html,T!=null){if(F.children!=null)throw Error(r(60));g.innerHTML=T}}break;case"multiple":g.multiple=I&&typeof I!="function"&&typeof I!="symbol";break;case"muted":g.muted=I&&typeof I!="function"&&typeof I!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(I==null||typeof I=="function"||typeof I=="boolean"||typeof I=="symbol"){g.removeAttribute("xlink:href");break}T=yh(""+I),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":I!=null&&typeof I!="function"&&typeof I!="symbol"?g.setAttribute(T,""+I):g.removeAttribute(T);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":I&&typeof I!="function"&&typeof I!="symbol"?g.setAttribute(T,""):g.removeAttribute(T);break;case"capture":case"download":I===!0?g.setAttribute(T,""):I!==!1&&I!=null&&typeof I!="function"&&typeof I!="symbol"?g.setAttribute(T,I):g.removeAttribute(T);break;case"cols":case"rows":case"size":case"span":I!=null&&typeof I!="function"&&typeof I!="symbol"&&!isNaN(I)&&1<=I?g.setAttribute(T,I):g.removeAttribute(T);break;case"rowSpan":case"start":I==null||typeof I=="function"||typeof I=="symbol"||isNaN(I)?g.removeAttribute(T):g.setAttribute(T,I);break;case"popover":Yn("beforetoggle",g),Yn("toggle",g),_a(g,"popover",I);break;case"xlinkActuate":Qt(g,"http://www.w3.org/1999/xlink","xlink:actuate",I);break;case"xlinkArcrole":Qt(g,"http://www.w3.org/1999/xlink","xlink:arcrole",I);break;case"xlinkRole":Qt(g,"http://www.w3.org/1999/xlink","xlink:role",I);break;case"xlinkShow":Qt(g,"http://www.w3.org/1999/xlink","xlink:show",I);break;case"xlinkTitle":Qt(g,"http://www.w3.org/1999/xlink","xlink:title",I);break;case"xlinkType":Qt(g,"http://www.w3.org/1999/xlink","xlink:type",I);break;case"xmlBase":Qt(g,"http://www.w3.org/XML/1998/namespace","xml:base",I);break;case"xmlLang":Qt(g,"http://www.w3.org/XML/1998/namespace","xml:lang",I);break;case"xmlSpace":Qt(g,"http://www.w3.org/XML/1998/namespace","xml:space",I);break;case"is":_a(g,"is",I);break;case"innerText":case"textContent":break;default:(!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(T=c_.get(T)||T,_a(g,T,I))}}function jp(g,b,T,I,F,U){switch(T){case"style":Jg(g,I,U);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(r(61));if(T=I.__html,T!=null){if(F.children!=null)throw Error(r(60));g.innerHTML=T}}break;case"children":typeof I=="string"?Zs(g,I):(typeof I=="number"||typeof I=="bigint")&&Zs(g,""+I);break;case"onScroll":I!=null&&Yn("scroll",g);break;case"onScrollEnd":I!=null&&Yn("scrollend",g);break;case"onClick":I!=null&&(g.onclick=Lp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sn.hasOwnProperty(T))e:{if(T[0]==="o"&&T[1]==="n"&&(F=T.endsWith("Capture"),b=T.slice(2,F?T.length-7:void 0),U=g[Nt]||null,U=U!=null?U[T]:null,typeof U=="function"&&g.removeEventListener(b,U,F),typeof I=="function")){typeof U!="function"&&U!==null&&(T in g?g[T]=null:g.hasAttribute(T)&&g.removeAttribute(T)),g.addEventListener(b,I,F);break e}T in g?g[T]=I:I===!0?g.setAttribute(T,""):_a(g,T,I)}}}function Sa(g,b,T){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yn("error",g),Yn("load",g);var I=!1,F=!1,U;for(U in T)if(T.hasOwnProperty(U)){var J=T[U];if(J!=null)switch(U){case"src":I=!0;break;case"srcSet":F=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,b));default:Pr(g,b,U,J,T,null)}}F&&Pr(g,b,"srcSet",T.srcSet,T,null),I&&Pr(g,b,"src",T.src,T,null);return;case"input":Yn("invalid",g);var ie=U=J=F=null,de=null,ke=null;for(I in T)if(T.hasOwnProperty(I)){var qe=T[I];if(qe!=null)switch(I){case"name":F=qe;break;case"type":J=qe;break;case"checked":de=qe;break;case"defaultChecked":ke=qe;break;case"value":U=qe;break;case"defaultValue":ie=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(r(137,b));break;default:Pr(g,b,I,qe,T,null)}}mh(g,U,ie,de,ke,J,F,!1),gh(g);return;case"select":Yn("invalid",g),I=J=U=null;for(F in T)if(T.hasOwnProperty(F)&&(ie=T[F],ie!=null))switch(F){case"value":U=ie;break;case"defaultValue":J=ie;break;case"multiple":I=ie;default:Pr(g,b,F,ie,T,null)}b=U,T=J,g.multiple=!!I,b!=null?Ko(g,!!I,b,!1):T!=null&&Ko(g,!!I,T,!0);return;case"textarea":Yn("invalid",g),U=F=I=null;for(J in T)if(T.hasOwnProperty(J)&&(ie=T[J],ie!=null))switch(J){case"value":I=ie;break;case"defaultValue":F=ie;break;case"children":U=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(91));break;default:Pr(g,b,J,ie,T,null)}Xf(g,I,F,U),gh(g);return;case"option":for(de in T)if(T.hasOwnProperty(de)&&(I=T[de],I!=null))switch(de){case"selected":g.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Pr(g,b,de,I,T,null)}return;case"dialog":Yn("beforetoggle",g),Yn("toggle",g),Yn("cancel",g),Yn("close",g);break;case"iframe":case"object":Yn("load",g);break;case"video":case"audio":for(I=0;I<Ym.length;I++)Yn(Ym[I],g);break;case"image":Yn("error",g),Yn("load",g);break;case"details":Yn("toggle",g);break;case"embed":case"source":case"link":Yn("error",g),Yn("load",g);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in T)if(T.hasOwnProperty(ke)&&(I=T[ke],I!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,b));default:Pr(g,b,ke,I,T,null)}return;default:if(vh(b)){for(qe in T)T.hasOwnProperty(qe)&&(I=T[qe],I!==void 0&&jp(g,b,qe,I,T,void 0));return}}for(ie in T)T.hasOwnProperty(ie)&&(I=T[ie],I!=null&&Pr(g,b,ie,I,T,null))}function dA(g,b,T,I){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var F=null,U=null,J=null,ie=null,de=null,ke=null,qe=null;for(Oe in T){var Xe=T[Oe];if(T.hasOwnProperty(Oe)&&Xe!=null)switch(Oe){case"checked":break;case"value":break;case"defaultValue":de=Xe;default:I.hasOwnProperty(Oe)||Pr(g,b,Oe,null,I,Xe)}}for(var Ie in I){var Oe=I[Ie];if(Xe=T[Ie],I.hasOwnProperty(Ie)&&(Oe!=null||Xe!=null))switch(Ie){case"type":U=Oe;break;case"name":F=Oe;break;case"checked":ke=Oe;break;case"defaultChecked":qe=Oe;break;case"value":J=Oe;break;case"defaultValue":ie=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(r(137,b));break;default:Oe!==Xe&&Pr(g,b,Ie,Oe,I,Xe)}}Ga(g,J,ie,de,ke,qe,U,F);return;case"select":Oe=J=ie=Ie=null;for(U in T)if(de=T[U],T.hasOwnProperty(U)&&de!=null)switch(U){case"value":break;case"multiple":Oe=de;default:I.hasOwnProperty(U)||Pr(g,b,U,null,I,de)}for(F in I)if(U=I[F],de=T[F],I.hasOwnProperty(F)&&(U!=null||de!=null))switch(F){case"value":Ie=U;break;case"defaultValue":ie=U;break;case"multiple":J=U;default:U!==de&&Pr(g,b,F,U,I,de)}b=ie,T=J,I=Oe,Ie!=null?Ko(g,!!T,Ie,!1):!!I!=!!T&&(b!=null?Ko(g,!!T,b,!0):Ko(g,!!T,T?[]:"",!1));return;case"textarea":Oe=Ie=null;for(ie in T)if(F=T[ie],T.hasOwnProperty(ie)&&F!=null&&!I.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:Pr(g,b,ie,null,I,F)}for(J in I)if(F=I[J],U=T[J],I.hasOwnProperty(J)&&(F!=null||U!=null))switch(J){case"value":Ie=F;break;case"defaultValue":Oe=F;break;case"children":break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:F!==U&&Pr(g,b,J,F,I,U)}Kr(g,Ie,Oe);return;case"option":for(var In in T)if(Ie=T[In],T.hasOwnProperty(In)&&Ie!=null&&!I.hasOwnProperty(In))switch(In){case"selected":g.selected=!1;break;default:Pr(g,b,In,null,I,Ie)}for(de in I)if(Ie=I[de],Oe=T[de],I.hasOwnProperty(de)&&Ie!==Oe&&(Ie!=null||Oe!=null))switch(de){case"selected":g.selected=Ie&&typeof Ie!="function"&&typeof Ie!="symbol";break;default:Pr(g,b,de,Ie,I,Oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yn in T)Ie=T[yn],T.hasOwnProperty(yn)&&Ie!=null&&!I.hasOwnProperty(yn)&&Pr(g,b,yn,null,I,Ie);for(ke in I)if(Ie=I[ke],Oe=T[ke],I.hasOwnProperty(ke)&&Ie!==Oe&&(Ie!=null||Oe!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(r(137,b));break;default:Pr(g,b,ke,Ie,I,Oe)}return;default:if(vh(b)){for(var Ai in T)Ie=T[Ai],T.hasOwnProperty(Ai)&&Ie!==void 0&&!I.hasOwnProperty(Ai)&&jp(g,b,Ai,void 0,I,Ie);for(qe in I)Ie=I[qe],Oe=T[qe],!I.hasOwnProperty(qe)||Ie===Oe||Ie===void 0&&Oe===void 0||jp(g,b,qe,Ie,I,Oe);return}}for(var xe in T)Ie=T[xe],T.hasOwnProperty(xe)&&Ie!=null&&!I.hasOwnProperty(xe)&&Pr(g,b,xe,null,I,Ie);for(Xe in I)Ie=I[Xe],Oe=T[Xe],!I.hasOwnProperty(Xe)||Ie===Oe||Ie==null&&Oe==null||Pr(g,b,Xe,Ie,I,Oe)}var _x=null,hA=null;function xx(g){return g.nodeType===9?g:g.ownerDocument}function Jm(g){switch(g){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yM(g,b){if(g===0)switch(b){case"svg":return 1;case"math":return 2;default:return 0}return g===1&&b==="foreignObject"?0:g}function Fp(g,b){return g==="textarea"||g==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.children=="bigint"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var $p=null;function ev(){var g=window.event;return g&&g.type==="popstate"?g===$p?!1:($p=g,!0):($p=null,!1)}var Bp=typeof setTimeout=="function"?setTimeout:void 0,cF=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,uF=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(g){return tv.resolve(null).then(g).catch(fA)}:Bp;function fA(g){setTimeout(function(){throw g})}function bu(g){return g==="head"}function nv(g,b){var T=b,I=0,F=0;do{var U=T.nextSibling;if(g.removeChild(T),U&&U.nodeType===8)if(T=U.data,T==="/$"){if(0<I&&8>I){T=I;var J=g.ownerDocument;if(T&1&&F0(J.documentElement),T&2&&F0(J.body),T&4)for(T=J.head,F0(T),J=T.firstChild;J;){var ie=J.nextSibling,de=J.nodeName;J[Fe]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&J.rel.toLowerCase()==="stylesheet"||T.removeChild(J),J=ie}}if(F===0){g.removeChild(U),ne(b);return}F--}else T==="$"||T==="$?"||T==="$!"?F++:I=T.charCodeAt(0)-48;else I=0;T=U}while(T);ne(b)}function pA(g){var b=g.firstChild;for(b&&b.nodeType===10&&(b=b.nextSibling);b;){var T=b;switch(b=b.nextSibling,T.nodeName){case"HTML":case"HEAD":case"BODY":pA(T),Qe(T);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(T.rel.toLowerCase()==="stylesheet")continue}g.removeChild(T)}}function dF(g,b,T,I){for(;g.nodeType===1;){var F=T;if(g.nodeName.toLowerCase()!==b.toLowerCase()){if(!I&&(g.nodeName!=="INPUT"||g.type!=="hidden"))break}else if(I){if(!g[Fe])switch(b){case"meta":if(!g.hasAttribute("itemprop"))break;return g;case"link":if(U=g.getAttribute("rel"),U==="stylesheet"&&g.hasAttribute("data-precedence"))break;if(U!==F.rel||g.getAttribute("href")!==(F.href==null||F.href===""?null:F.href)||g.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin)||g.getAttribute("title")!==(F.title==null?null:F.title))break;return g;case"style":if(g.hasAttribute("data-precedence"))break;return g;case"script":if(U=g.getAttribute("src"),(U!==(F.src==null?null:F.src)||g.getAttribute("type")!==(F.type==null?null:F.type)||g.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin))&&U&&g.hasAttribute("async")&&!g.hasAttribute("itemprop"))break;return g;default:return g}}else if(b==="input"&&g.type==="hidden"){var U=F.name==null?null:""+F.name;if(F.type==="hidden"&&g.getAttribute("name")===U)return g}else return g;if(g=Oo(g.nextSibling),g===null)break}return null}function gA(g,b,T){if(b==="")return null;for(;g.nodeType!==3;)if((g.nodeType!==1||g.nodeName!=="INPUT"||g.type!=="hidden")&&!T||(g=Oo(g.nextSibling),g===null))return null;return g}function Sx(g){return g.data==="$!"||g.data==="$?"&&g.ownerDocument.readyState==="complete"}function bM(g,b){var T=g.ownerDocument;if(g.data!=="$?"||T.readyState==="complete")b();else{var I=function(){b(),T.removeEventListener("DOMContentLoaded",I)};T.addEventListener("DOMContentLoaded",I),g._reactRetry=I}}function Oo(g){for(;g!=null;g=g.nextSibling){var b=g.nodeType;if(b===1||b===3)break;if(b===8){if(b=g.data,b==="$"||b==="$!"||b==="$?"||b==="F!"||b==="F")break;if(b==="/$")return null}}return g}var mA=null;function wM(g){g=g.previousSibling;for(var b=0;g;){if(g.nodeType===8){var T=g.data;if(T==="$"||T==="$!"||T==="$?"){if(b===0)return g;b--}else T==="/$"&&b++}g=g.previousSibling}return null}function j0(g,b,T){switch(b=xx(T),g){case"html":if(g=b.documentElement,!g)throw Error(r(452));return g;case"head":if(g=b.head,!g)throw Error(r(453));return g;case"body":if(g=b.body,!g)throw Error(r(454));return g;default:throw Error(r(451))}}function F0(g){for(var b=g.attributes;b.length;)g.removeAttributeNode(b[0]);Qe(g)}var $l=new Map,Yh=new Set;function $0(g){return typeof g.getRootNode=="function"?g.getRootNode():g.nodeType===9?g:g.ownerDocument}var Ec=X.d;X.d={f:hF,r:vA,D:fF,C:Ex,L:B0,m:_M,X:V0,S:U0,M:z0};function hF(){var g=Ec.f(),b=A0();return g||b}function vA(g){var b=ot(g);b!==null&&b.tag===5&&b.type==="form"?bp(b):Ec.r(g)}var rv=typeof document>"u"?null:document;function Tx(g,b,T){var I=rv;if(I&&typeof b=="string"&&b){var F=la(b);F='link[rel="'+g+'"][href="'+F+'"]',typeof T=="string"&&(F+='[crossorigin="'+T+'"]'),Yh.has(F)||(Yh.add(F),g={rel:g,crossOrigin:T,href:b},I.querySelector(F)===null&&(b=I.createElement("link"),Sa(b,"link",g),Kt(b),I.head.appendChild(b)))}}function fF(g){Ec.D(g),Tx("dns-prefetch",g,null)}function Ex(g,b){Ec.C(g,b),Tx("preconnect",g,b)}function B0(g,b,T){Ec.L(g,b,T);var I=rv;if(I&&g&&b){var F='link[rel="preload"][as="'+la(b)+'"]';b==="image"&&T&&T.imageSrcSet?(F+='[imagesrcset="'+la(T.imageSrcSet)+'"]',typeof T.imageSizes=="string"&&(F+='[imagesizes="'+la(T.imageSizes)+'"]')):F+='[href="'+la(g)+'"]';var U=F;switch(b){case"style":U=ns(g);break;case"script":U=Up(g)}$l.has(U)||(g=u({rel:"preload",href:b==="image"&&T&&T.imageSrcSet?void 0:g,as:b},T),$l.set(U,g),I.querySelector(F)!==null||b==="style"&&I.querySelector(av(U))||b==="script"&&I.querySelector(Fn(U))||(b=I.createElement("link"),Sa(b,"link",g),Kt(b),I.head.appendChild(b)))}}function _M(g,b){Ec.m(g,b);var T=rv;if(T&&g){var I=b&&typeof b.as=="string"?b.as:"script",F='link[rel="modulepreload"][as="'+la(I)+'"][href="'+la(g)+'"]',U=F;switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=Up(g)}if(!$l.has(U)&&(g=u({rel:"modulepreload",href:g},b),$l.set(U,g),T.querySelector(F)===null)){switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(T.querySelector(Fn(U)))return}I=T.createElement("link"),Sa(I,"link",g),Kt(I),T.head.appendChild(I)}}}function U0(g,b,T){Ec.S(g,b,T);var I=rv;if(I&&g){var F=mt(I).hoistableStyles,U=ns(g);b=b||"default";var J=F.get(U);if(!J){var ie={loading:0,preload:null};if(J=I.querySelector(av(U)))ie.loading=5;else{g=u({rel:"stylesheet",href:g,"data-precedence":b},T),(T=$l.get(U))&&ll(g,T);var de=J=I.createElement("link");Kt(de),Sa(de,"link",g),de._p=new Promise(function(ke,qe){de.onload=ke,de.onerror=qe}),de.addEventListener("load",function(){ie.loading|=1}),de.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,Zn(J,b,I)}J={type:"stylesheet",instance:J,count:1,state:ie},F.set(U,J)}}}function V0(g,b){Ec.X(g,b);var T=rv;if(T&&g){var I=mt(T).hoistableScripts,F=Up(g),U=I.get(F);U||(U=T.querySelector(Fn(F)),U||(g=u({src:g,async:!0},b),(b=$l.get(F))&&dn(g,b),U=T.createElement("script"),Kt(U),Sa(U,"link",g),T.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},I.set(F,U))}}function z0(g,b){Ec.M(g,b);var T=rv;if(T&&g){var I=mt(T).hoistableScripts,F=Up(g),U=I.get(F);U||(U=T.querySelector(Fn(F)),U||(g=u({src:g,async:!0,type:"module"},b),(b=$l.get(F))&&dn(g,b),U=T.createElement("script"),Kt(U),Sa(U,"link",g),T.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},I.set(F,U))}}function iv(g,b,T,I){var F=(F=pe.current)?$0(F):null;if(!F)throw Error(r(446));switch(g){case"meta":case"title":return null;case"style":return typeof T.precedence=="string"&&typeof T.href=="string"?(b=ns(T.href),T=mt(F).hoistableStyles,I=T.get(b),I||(I={type:"style",instance:null,count:0,state:null},T.set(b,I)),I):{type:"void",instance:null,count:0,state:null};case"link":if(T.rel==="stylesheet"&&typeof T.href=="string"&&typeof T.precedence=="string"){g=ns(T.href);var U=mt(F).hoistableStyles,J=U.get(g);if(J||(F=F.ownerDocument||F,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(g,J),(U=F.querySelector(av(g)))&&!U._p&&(J.instance=U,J.state.loading=5),$l.has(g)||(T={rel:"preload",as:"style",href:T.href,crossOrigin:T.crossOrigin,integrity:T.integrity,media:T.media,hrefLang:T.hrefLang,referrerPolicy:T.referrerPolicy},$l.set(g,T),U||yA(F,g,T,J.state))),b&&I===null)throw Error(r(528,""));return J}if(b&&I!==null)throw Error(r(529,""));return null;case"script":return b=T.async,T=T.src,typeof T=="string"&&b&&typeof b!="function"&&typeof b!="symbol"?(b=Up(T),T=mt(F).hoistableScripts,I=T.get(b),I||(I={type:"script",instance:null,count:0,state:null},T.set(b,I)),I):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,g))}}function ns(g){return'href="'+la(g)+'"'}function av(g){return'link[rel="stylesheet"]['+g+"]"}function ov(g){return u({},g,{"data-precedence":g.precedence,precedence:null})}function yA(g,b,T,I){g.querySelector('link[rel="preload"][as="style"]['+b+"]")?I.loading=1:(b=g.createElement("link"),I.preload=b,b.addEventListener("load",function(){return I.loading|=1}),b.addEventListener("error",function(){return I.loading|=2}),Sa(b,"link",T),Kt(b),g.head.appendChild(b))}function Up(g){return'[src="'+la(g)+'"]'}function Fn(g){return"script[async]"+g}function Vp(g,b,T){if(b.count++,b.instance===null)switch(b.type){case"style":var I=g.querySelector('style[data-href~="'+la(T.href)+'"]');if(I)return b.instance=I,Kt(I),I;var F=u({},T,{"data-href":T.href,"data-precedence":T.precedence,href:null,precedence:null});return I=(g.ownerDocument||g).createElement("style"),Kt(I),Sa(I,"style",F),Zn(I,T.precedence,g),b.instance=I;case"stylesheet":F=ns(T.href);var U=g.querySelector(av(F));if(U)return b.state.loading|=4,b.instance=U,Kt(U),U;I=ov(T),(F=$l.get(F))&&ll(I,F),U=(g.ownerDocument||g).createElement("link"),Kt(U);var J=U;return J._p=new Promise(function(ie,de){J.onload=ie,J.onerror=de}),Sa(U,"link",I),b.state.loading|=4,Zn(U,T.precedence,g),b.instance=U;case"script":return U=Up(T.src),(F=g.querySelector(Fn(U)))?(b.instance=F,Kt(F),F):(I=T,(F=$l.get(U))&&(I=u({},T),dn(I,F)),g=g.ownerDocument||g,F=g.createElement("script"),Kt(F),Sa(F,"link",I),g.head.appendChild(F),b.instance=F);case"void":return null;default:throw Error(r(443,b.type))}else b.type==="stylesheet"&&(b.state.loading&4)===0&&(I=b.instance,b.state.loading|=4,Zn(I,T.precedence,g));return b.instance}function Zn(g,b,T){for(var I=T.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),F=I.length?I[I.length-1]:null,U=F,J=0;J<I.length;J++){var ie=I[J];if(ie.dataset.precedence===b)U=ie;else if(U!==F)break}U?U.parentNode.insertBefore(g,U.nextSibling):(b=T.nodeType===9?T.head:T,b.insertBefore(g,b.firstChild))}function ll(g,b){g.crossOrigin==null&&(g.crossOrigin=b.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=b.referrerPolicy),g.title==null&&(g.title=b.title)}function dn(g,b){g.crossOrigin==null&&(g.crossOrigin=b.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=b.referrerPolicy),g.integrity==null&&(g.integrity=b.integrity)}var H0=null;function bA(g,b,T){if(H0===null){var I=new Map,F=H0=new Map;F.set(T,I)}else F=H0,I=F.get(T),I||(I=new Map,F.set(T,I));if(I.has(g))return I;for(I.set(g,null),T=T.getElementsByTagName(g),F=0;F<T.length;F++){var U=T[F];if(!(U[Fe]||U[gt]||g==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var J=U.getAttribute(b)||"";J=g+J;var ie=I.get(J);ie?ie.push(U):I.set(J,[U])}}return I}function wA(g,b,T){g=g.ownerDocument||g,g.head.insertBefore(T,b==="title"?g.querySelector("head > title"):null)}function Ax(g,b,T){if(T===1||b.itemProp!=null)return!1;switch(g){case"meta":case"title":return!0;case"style":if(typeof b.precedence!="string"||typeof b.href!="string"||b.href==="")break;return!0;case"link":if(typeof b.rel!="string"||typeof b.href!="string"||b.href===""||b.onLoad||b.onError)break;switch(b.rel){case"stylesheet":return g=b.disabled,typeof b.precedence=="string"&&g==null;default:return!0}case"script":if(b.async&&typeof b.async!="function"&&typeof b.async!="symbol"&&!b.onLoad&&!b.onError&&b.src&&typeof b.src=="string")return!0}return!1}function wu(g){return!(g.type==="stylesheet"&&(g.state.loading&3)===0)}var sv=null;function qn(){}function pF(g,b,T){if(sv===null)throw Error(r(475));var I=sv;if(b.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var F=ns(T.href),U=g.querySelector(av(F));if(U){g=U._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(I.count++,I=q0.bind(I),g.then(I,I)),b.state.loading|=4,b.instance=U,Kt(U);return}U=g.ownerDocument||g,T=ov(T),(F=$l.get(F))&&ll(T,F),U=U.createElement("link"),Kt(U);var J=U;J._p=new Promise(function(ie,de){J.onload=ie,J.onerror=de}),Sa(U,"link",T),b.instance=U}I.stylesheets===null&&(I.stylesheets=new Map),I.stylesheets.set(b,g),(g=b.state.preload)&&(b.state.loading&3)===0&&(I.count++,b=q0.bind(I),g.addEventListener("load",b),g.addEventListener("error",b))}}function xM(){if(sv===null)throw Error(r(475));var g=sv;return g.stylesheets&&g.count===0&&Ze(g,g.stylesheets),0<g.count?function(b){var T=setTimeout(function(){if(g.stylesheets&&Ze(g,g.stylesheets),g.unsuspend){var I=g.unsuspend;g.unsuspend=null,I()}},6e4);return g.unsuspend=b,function(){g.unsuspend=null,clearTimeout(T)}}:null}function q0(){if(this.count--,this.count===0){if(this.stylesheets)Ze(this,this.stylesheets);else if(this.unsuspend){var g=this.unsuspend;this.unsuspend=null,g()}}}var Cx=null;function Ze(g,b){g.stylesheets=null,g.unsuspend!==null&&(g.count++,Cx=new Map,b.forEach(wr,g),Cx=null,q0.call(g))}function wr(g,b){if(!(b.state.loading&4)){var T=Cx.get(g);if(T)var I=T.get(null);else{T=new Map,Cx.set(g,T);for(var F=g.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<F.length;U++){var J=F[U];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(T.set(J.dataset.precedence,J),I=J)}I&&T.set(null,I)}F=b.instance,J=F.getAttribute("data-precedence"),U=T.get(J)||I,U===I&&T.set(null,F),T.set(J,F),this.count++,I=q0.bind(this),F.addEventListener("load",I),F.addEventListener("error",I),U?U.parentNode.insertBefore(F,U.nextSibling):(g=g.nodeType===9?g.head:g,g.insertBefore(F,g.firstChild)),b.state.loading|=4}}var G0={$$typeof:S,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function gF(g,b,T,I,F,U,J,ie){this.tag=1,this.containerInfo=g,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ln(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ln(0),this.hiddenUpdates=Ln(null),this.identifierPrefix=I,this.onUncaughtError=F,this.onCaughtError=U,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function SM(g,b,T,I,F,U,J,ie,de,ke,qe,Xe){return g=new gF(g,b,T,J,ie,de,ke,Xe),b=1,U===!0&&(b|=24),U=ua(3,null,null,b),g.current=U,U.stateNode=g,b=gm(),b.refCount++,g.pooledCache=b,b.refCount++,U.memoizedState={element:I,isDehydrated:T,cache:b},N_(U),g}function TM(g){return g?(g=Ol,g):Ol}function _A(g,b,T,I,F,U){F=TM(F),I.context===null?I.context=F:I.pendingContext=F,I=yc(b),I.payload={element:T},U=U===void 0?null:U,U!==null&&(I.callback=U),T=hd(g,I,b),T!==null&&(ks(T,g,b),cu(T,g,b))}function EM(g,b){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var T=g.retryLane;g.retryLane=T!==0&&T<b?T:b}}function xA(g,b){EM(g,b),(g=g.alternate)&&EM(g,b)}function Md(g){if(g.tag===13){var b=ip(g,67108864);b!==null&&ks(b,g,67108864),xA(g,67108864)}}var Ac=!0;function W0(g,b,T,I){var F=W.T;W.T=null;var U=X.p;try{X.p=2,SA(g,b,T,I)}finally{X.p=U,W.T=F}}function Dx(g,b,T,I){var F=W.T;W.T=null;var U=X.p;try{X.p=8,SA(g,b,T,I)}finally{X.p=U,W.T=F}}function SA(g,b,T,I){if(Ac){var F=Y0(I);if(F===null)Xm(g,b,I,kx,T),Px(g,I);else if(Cc(F,g,b,T,I))I.stopPropagation();else if(Px(g,I),b&4&&-1<Mx.indexOf(g)){for(;F!==null;){var U=ot(F);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var J=un(U.pendingLanes);if(J!==0){var ie=U;for(ie.pendingLanes|=2,ie.entangledLanes|=2;J;){var de=1<<31-Et(J);ie.entanglements[1]|=de,J&=~de}vu(U),(xr&6)===0&&(T0=rt()+500,O0(0))}}break;case 13:ie=ip(U,2),ie!==null&&ks(ie,U,2),A0(),xA(U,2)}if(U=Y0(I),U===null&&Xm(g,b,I,kx,T),U===F)break;F=U}F!==null&&I.stopPropagation()}else Xm(g,b,I,null,T)}}function Y0(g){return g=Qs(g),TA(g)}var kx=null;function TA(g){if(kx=null,g=vt(g),g!==null){var b=a(g);if(b===null)g=null;else{var T=b.tag;if(T===13){if(g=o(b),g!==null)return g;g=null}else if(T===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;g=null}else b!==g&&(g=null)}}return kx=g,null}function K0(g){switch(g){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case Mt:return 2;case kn:return 8;case nr:case Le:return 32;case Yt:return 268435456;default:return 32}default:return 32}}var Ix=!1,Pd=null,_u=null,Od=null,X0=new Map,Z0=new Map,Kh=[],Mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Px(g,b){switch(g){case"focusin":case"focusout":Pd=null;break;case"dragenter":case"dragleave":_u=null;break;case"mouseover":case"mouseout":Od=null;break;case"pointerover":case"pointerout":X0.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":Z0.delete(b.pointerId)}}function Xh(g,b,T,I,F,U){return g===null||g.nativeEvent!==U?(g={blockedOn:b,domEventName:T,eventSystemFlags:I,nativeEvent:U,targetContainers:[F]},b!==null&&(b=ot(b),b!==null&&Md(b)),g):(g.eventSystemFlags|=I,b=g.targetContainers,F!==null&&b.indexOf(F)===-1&&b.push(F),g)}function Cc(g,b,T,I,F){switch(b){case"focusin":return Pd=Xh(Pd,g,b,T,I,F),!0;case"dragenter":return _u=Xh(_u,g,b,T,I,F),!0;case"mouseover":return Od=Xh(Od,g,b,T,I,F),!0;case"pointerover":var U=F.pointerId;return X0.set(U,Xh(X0.get(U)||null,g,b,T,I,F)),!0;case"gotpointercapture":return U=F.pointerId,Z0.set(U,Xh(Z0.get(U)||null,g,b,T,I,F)),!0}return!1}function Rd(g){var b=vt(g.target);if(b!==null){var T=a(b);if(T!==null){if(b=T.tag,b===13){if(b=o(T),b!==null){g.blockedOn=b,xt(g.priority,function(){if(T.tag===13){var I=Ds();I=ge(I);var F=ip(T,I);F!==null&&ks(F,T,I),xA(T,I)}});return}}else if(b===3&&T.stateNode.current.memoizedState.isDehydrated){g.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}g.blockedOn=null}function p(g){if(g.blockedOn!==null)return!1;for(var b=g.targetContainers;0<b.length;){var T=Y0(g.nativeEvent);if(T===null){T=g.nativeEvent;var I=new T.constructor(T.type,T);ys=I,T.target.dispatchEvent(I),ys=null}else return b=ot(T),b!==null&&Md(b),g.blockedOn=T,!1;b.shift()}return!0}function x(g,b,T){p(g)&&T.delete(b)}function k(){Ix=!1,Pd!==null&&p(Pd)&&(Pd=null),_u!==null&&p(_u)&&(_u=null),Od!==null&&p(Od)&&(Od=null),X0.forEach(x),Z0.forEach(x)}function N(g,b){g.blockedOn===b&&(g.blockedOn=null,Ix||(Ix=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,k)))}var V=null;function H(g){V!==g&&(V=g,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){V===g&&(V=null);for(var b=0;b<g.length;b+=3){var T=g[b],I=g[b+1],F=g[b+2];if(typeof I!="function"){if(TA(I||T)===null)continue;break}var U=ot(T);U!==null&&(g.splice(b,3),b-=3,Y_(U,{pending:!0,data:F,method:T.method,action:I},I,F))}}))}function ne(g){function b(de){return N(de,g)}Pd!==null&&N(Pd,g),_u!==null&&N(_u,g),Od!==null&&N(Od,g),X0.forEach(b),Z0.forEach(b);for(var T=0;T<Kh.length;T++){var I=Kh[T];I.blockedOn===g&&(I.blockedOn=null)}for(;0<Kh.length&&(T=Kh[0],T.blockedOn===null);)Rd(T),T.blockedOn===null&&Kh.shift();if(T=(g.ownerDocument||g).$$reactFormReplay,T!=null)for(I=0;I<T.length;I+=3){var F=T[I],U=T[I+1],J=F[Nt]||null;if(typeof U=="function")J||H(T);else if(J){var ie=null;if(U&&U.hasAttribute("formAction")){if(F=U,J=U[Nt]||null)ie=J.formAction;else if(TA(F)!==null)continue}else ie=J.action;typeof ie=="function"?T[I+1]=ie:(T.splice(I,3),I-=3),H(T)}}}function ue(g){this._internalRoot=g}Re.prototype.render=ue.prototype.render=function(g){var b=this._internalRoot;if(b===null)throw Error(r(409));var T=b.current,I=Ds();_A(T,I,g,b,null,null)},Re.prototype.unmount=ue.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var b=g.containerInfo;_A(g.current,2,null,g,null,null),A0(),b[Tt]=null}};function Re(g){this._internalRoot=g}Re.prototype.unstable_scheduleHydration=function(g){if(g){var b=it();g={blockedOn:null,target:g,priority:b};for(var T=0;T<Kh.length&&b!==0&&b<Kh[T].priority;T++);Kh.splice(T,0,g),T===0&&Rd(g)}};var at=e.version;if(at!=="19.1.0")throw Error(r(527,at,"19.1.0"));X.findDOMNode=function(g){var b=g._reactInternals;if(b===void 0)throw typeof g.render=="function"?Error(r(188)):(g=Object.keys(g).join(","),Error(r(268,g)));return g=l(b),g=g!==null?c(g):null,g=g===null?null:g.stateNode,g};var Ht={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dr.isDisabled&&Dr.supportsFiber)try{Ae=Dr.inject(Ht),je=Dr}catch{}}return AA.createRoot=function(g,b){if(!i(g))throw Error(r(299));var T=!1,I="",F=ex,U=tM,J=nM,ie=null;return b!=null&&(b.unstable_strictMode===!0&&(T=!0),b.identifierPrefix!==void 0&&(I=b.identifierPrefix),b.onUncaughtError!==void 0&&(F=b.onUncaughtError),b.onCaughtError!==void 0&&(U=b.onCaughtError),b.onRecoverableError!==void 0&&(J=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(ie=b.unstable_transitionCallbacks)),b=SM(g,1,!1,null,null,T,I,F,U,J,ie,null),g[Tt]=b.current,Km(g),new ue(b)},AA.hydrateRoot=function(g,b,T){if(!i(g))throw Error(r(299));var I=!1,F="",U=ex,J=tM,ie=nM,de=null,ke=null;return T!=null&&(T.unstable_strictMode===!0&&(I=!0),T.identifierPrefix!==void 0&&(F=T.identifierPrefix),T.onUncaughtError!==void 0&&(U=T.onUncaughtError),T.onCaughtError!==void 0&&(J=T.onCaughtError),T.onRecoverableError!==void 0&&(ie=T.onRecoverableError),T.unstable_transitionCallbacks!==void 0&&(de=T.unstable_transitionCallbacks),T.formState!==void 0&&(ke=T.formState)),b=SM(g,1,!0,b,T??null,I,F,U,J,ie,de,ke),b.context=TM(null),T=b.current,I=Ds(),I=ge(I),F=yc(I),F.callback=null,hd(T,F,I),T=I,b.current.lanes=T,Fi(b,T),vu(b),g[Tt]=b.current,Km(g),new Re(b)},AA.version="19.1.0",AA}var tZ;function oIe(){if(tZ)return yF.exports;tZ=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yF.exports=aIe(),yF.exports}var sIe=oIe();const lIe=Br(sIe),cIe=K.createContext(void 0);function uIe({children:n}){const[e,t]=K.useState({color:"Tomato",textColor:"white"}),i={theme:e,changeTheme:a=>{let o;["BlueViolet","CornflowerBlue","SaddleBrown"].includes(a)?o="white":o="black",t({color:a,textColor:o})}};return E.jsx(cIe.Provider,{value:i,children:n})}const dIe="modulepreload",hIe=function(n){return"/"+n},nZ={},Fr=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(c=>{if(c=hIe(c),c in nZ)return;nZ[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":dIe,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};var CA={},rZ;function fIe(){if(rZ)return CA;rZ=1,Object.defineProperty(CA,"__esModule",{value:!0}),CA.parse=o,CA.serialize=c;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,f){const m=new a,v=h.length;if(v<2)return m;const y=(f==null?void 0:f.decode)||u;let w=0;do{const _=h.indexOf("=",w);if(_===-1)break;const S=h.indexOf(";",w),A=S===-1?v:S;if(_>A){w=h.lastIndexOf(";",_-1)+1;continue}const C=s(h,w,_),D=l(h,_,C),M=h.slice(C,D);if(m[M]===void 0){let P=s(h,_+1,A),O=l(h,A,P);const j=y(h.slice(P,O));m[M]=j}w=A+1}while(w<v);return m}function s(h,f,m){do{const v=h.charCodeAt(f);if(v!==32&&v!==9)return f}while(++f<m);return m}function l(h,f,m){for(;f>m;){const v=h.charCodeAt(--f);if(v!==32&&v!==9)return f+1}return m}function c(h,f,m){const v=(m==null?void 0:m.encode)||encodeURIComponent;if(!n.test(h))throw new TypeError(`argument name is invalid: ${h}`);const y=v(f);if(!e.test(y))throw new TypeError(`argument val is invalid: ${f}`);let w=h+"="+y;if(!m)return w;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);w+="; Max-Age="+m.maxAge}if(m.domain){if(!t.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);w+="; Domain="+m.domain}if(m.path){if(!r.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);w+="; Path="+m.path}if(m.expires){if(!d(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);w+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(w+="; HttpOnly"),m.secure&&(w+="; Secure"),m.partitioned&&(w+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return w}function u(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function d(h){return i.call(h)==="[object Date]"}return CA}fIe();var iZ="popstate";function pIe(n={}){function e(i,a){let{pathname:o="/",search:s="",hash:l=""}=Hw(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),dz("",{pathname:o,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let o=i.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");s=c===-1?l:l.slice(0,c)}return s+"#"+(typeof a=="string"?a:UD(a))}function r(i,a){oh(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return mIe(e,t,r,n)}function ya(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oh(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gIe(){return Math.random().toString(36).substring(2,10)}function aZ(n,e){return{usr:n.state,key:n.key,idx:e}}function dz(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Hw(e):e,state:t,key:e&&e.key||r||gIe()}}function UD({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Hw(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function mIe(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){s="POP";let y=u(),w=y==null?null:y-c;c=y,l&&l({action:s,location:v.location,delta:w})}function h(y,w){s="PUSH";let _=dz(v.location,y,w);t&&t(_,y),c=u()+1;let S=aZ(_,c),A=v.createHref(_);try{o.pushState(S,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(A)}a&&l&&l({action:s,location:v.location,delta:1})}function f(y,w){s="REPLACE";let _=dz(v.location,y,w);t&&t(_,y),c=u();let S=aZ(_,c),A=v.createHref(_);o.replaceState(S,"",A),a&&l&&l({action:s,location:v.location,delta:0})}function m(y){return vIe(y)}let v={get action(){return s},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(iZ,d),l=y,()=>{i.removeEventListener(iZ,d),l=null}},createHref(y){return e(i,y)},createURL:m,encodeLocation(y){let w=m(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:f,go(y){return o.go(y)}};return v}function vIe(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ya(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:UD(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function mge(n,e,t="/"){return yIe(n,e,t,!1)}function yIe(n,e,t,r){let i=typeof e=="string"?Hw(e):e,a=xg(i.pathname||"/",t);if(a==null)return null;let o=vge(n);bIe(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=IIe(a);s=DIe(o[l],c,r)}return s}function vge(n,e=[],t=[],r=""){let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(ya(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=cg([r,l.relativePath]),u=t.concat(l);a.children&&a.children.length>0&&(ya(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),vge(a.children,e,u,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:AIe(c,a.index),routesMeta:u})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of yge(a.path))i(a,o,l)}),e}function yge(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=yge(r.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>n.startsWith("/")&&l===""?"/":l)}function bIe(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:CIe(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var wIe=/^:[\w-]+$/,_Ie=3,xIe=2,SIe=1,TIe=10,EIe=-2,oZ=n=>n==="*";function AIe(n,e){let t=n.split("/"),r=t.length;return t.some(oZ)&&(r+=EIe),e&&(r+=xIe),t.filter(i=>!oZ(i)).reduce((i,a)=>i+(wIe.test(a)?_Ie:a===""?SIe:TIe),r)}function CIe(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function DIe(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",d=lR({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&t&&!r[r.length-1].route.index&&(d=lR({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:cg([a,d.pathname]),pathnameBase:RIe(cg([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=cg([a,d.pathnameBase]))}return o}function lR(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kIe(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let m=s[h]||"";o=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const f=s[h];return d&&!f?c[u]=void 0:c[u]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:n}}function kIe(n,e=!1,t=!0){oh(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function IIe(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oh(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function xg(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function MIe(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Hw(n):n;return{pathname:t?t.startsWith("/")?t:PIe(t,e):e,search:NIe(r),hash:LIe(i)}}function PIe(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function xF(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OIe(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function bge(n){let e=OIe(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function wge(n,e,t,r=!1){let i;typeof n=="string"?i=Hw(n):(i={...n},ya(!i.pathname||!i.pathname.includes("?"),xF("?","pathname","search",i)),ya(!i.pathname||!i.pathname.includes("#"),xF("#","pathname","hash",i)),ya(!i.search||!i.search.includes("#"),xF("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}s=d>=0?e[d]:"/"}let l=MIe(i,s),c=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var cg=n=>n.join("/").replace(/\/\/+/g,"/"),RIe=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),NIe=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LIe=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jIe(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var _ge=["POST","PUT","PATCH","DELETE"];new Set(_ge);var FIe=["GET",..._ge];new Set(FIe);var cT=K.createContext(null);cT.displayName="DataRouter";var NL=K.createContext(null);NL.displayName="DataRouterState";var xge=K.createContext({isTransitioning:!1});xge.displayName="ViewTransition";var $Ie=K.createContext(new Map);$Ie.displayName="Fetchers";var BIe=K.createContext(null);BIe.displayName="Await";var Bf=K.createContext(null);Bf.displayName="Navigation";var xI=K.createContext(null);xI.displayName="Location";var Uf=K.createContext({outlet:null,matches:[],isDataRoute:!1});Uf.displayName="Route";var Gq=K.createContext(null);Gq.displayName="RouteError";function UIe(n,{relative:e}={}){ya(SI(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(Bf),{hash:i,pathname:a,search:o}=TI(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:cg([t,a])),r.createHref({pathname:s,search:o,hash:i})}function SI(){return K.useContext(xI)!=null}function vs(){return ya(SI(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(xI).location}var Sge="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Tge(n){K.useContext(Bf).static||K.useLayoutEffect(n)}function $g(){let{isDataRoute:n}=K.useContext(Uf);return n?n2e():VIe()}function VIe(){ya(SI(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(cT),{basename:e,navigator:t}=K.useContext(Bf),{matches:r}=K.useContext(Uf),{pathname:i}=vs(),a=JSON.stringify(bge(r)),o=K.useRef(!1);return Tge(()=>{o.current=!0}),K.useCallback((l,c={})=>{if(oh(o.current,Sge),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=wge(l,JSON.parse(a),i,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:cg([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,a,i,n])}var zIe=K.createContext(null);function HIe(n){let e=K.useContext(Uf).outlet;return e&&K.createElement(zIe.Provider,{value:n},e)}function TI(n,{relative:e}={}){let{matches:t}=K.useContext(Uf),{pathname:r}=vs(),i=JSON.stringify(bge(t));return K.useMemo(()=>wge(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function qIe(n,e){return Ege(n,e)}function Ege(n,e,t,r){var w;ya(SI(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=K.useContext(Bf),{matches:a}=K.useContext(Uf),o=a[a.length-1],s=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let _=u&&u.path||"";Age(l,!u||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let d=vs(),h;if(e){let _=typeof e=="string"?Hw(e):e;ya(c==="/"||((w=_.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),h=_}else h=d;let f=h.pathname||"/",m=f;if(c!=="/"){let _=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=mge(n,{pathname:m});oh(u||v!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),oh(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=XIe(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},s,_.params),pathname:cg([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:cg([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,t,r);return e&&y?K.createElement(xI.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},y):y}function GIe(){let n=t2e(),e=jIe(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:a},"ErrorBoundary")," or"," ",K.createElement("code",{style:a},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:i},t):null,o)}var WIe=K.createElement(GIe,null),YIe=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?K.createElement(Uf.Provider,{value:this.props.routeContext},K.createElement(Gq.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KIe({routeContext:n,match:e,children:t}){let r=K.useContext(cT);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(Uf.Provider,{value:n},t)}function XIe(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let l=i.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);ya(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,s=-1;if(t)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(s=l),c.route.id){let{loaderData:u,errors:d}=t,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||h){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let d,h=!1,f=null,m=null;t&&(d=a&&c.route.id?a[c.route.id]:void 0,f=c.route.errorElement||WIe,o&&(s<0&&u===0?(Age("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):s===u&&(h=!0,m=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,u+1)),y=()=>{let w;return d?w=f:h?w=m:c.route.Component?w=K.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=l,K.createElement(KIe,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:w})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?K.createElement(YIe,{location:t.location,revalidation:t.revalidation,component:f,error:d,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}function Wq(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZIe(n){let e=K.useContext(cT);return ya(e,Wq(n)),e}function QIe(n){let e=K.useContext(NL);return ya(e,Wq(n)),e}function JIe(n){let e=K.useContext(Uf);return ya(e,Wq(n)),e}function Yq(n){let e=JIe(n),t=e.matches[e.matches.length-1];return ya(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function e2e(){return Yq("useRouteId")}function t2e(){var r;let n=K.useContext(Gq),e=QIe("useRouteError"),t=Yq("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function n2e(){let{router:n}=ZIe("useNavigate"),e=Yq("useNavigate"),t=K.useRef(!1);return Tge(()=>{t.current=!0}),K.useCallback(async(i,a={})=>{oh(t.current,Sge),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var sZ={};function Age(n,e,t){!e&&!sZ[n]&&(sZ[n]=!0,oh(!1,t))}K.memo(r2e);function r2e({routes:n,future:e,state:t}){return Ege(n,void 0,t,e)}function Cge(n){return HIe(n.context)}function Fd(n){ya(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function i2e({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){ya(!SI(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=K.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Hw(t));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=t,f=K.useMemo(()=>{let m=xg(l,o);return m==null?null:{location:{pathname:m,search:c,hash:u,state:d,key:h},navigationType:r}},[o,l,c,u,d,h,r]);return oh(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:K.createElement(Bf.Provider,{value:s},K.createElement(xI.Provider,{children:e,value:f}))}function a2e({children:n,location:e}){return qIe(hz(n),e)}function hz(n,e=[]){let t=[];return K.Children.forEach(n,(r,i)=>{if(!K.isValidElement(r))return;let a=[...e,i];if(r.type===K.Fragment){t.push.apply(t,hz(r.props.children,a));return}ya(r.type===Fd,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ya(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hz(r.props.children,a)),t.push(o)}),t}var bO="get",wO="application/x-www-form-urlencoded";function LL(n){return n!=null&&typeof n.tagName=="string"}function o2e(n){return LL(n)&&n.tagName.toLowerCase()==="button"}function s2e(n){return LL(n)&&n.tagName.toLowerCase()==="form"}function l2e(n){return LL(n)&&n.tagName.toLowerCase()==="input"}function c2e(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function u2e(n,e){return n.button===0&&(!e||e==="_self")&&!c2e(n)}var CM=null;function d2e(){if(CM===null)try{new FormData(document.createElement("form"),0),CM=!1}catch{CM=!0}return CM}var h2e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function SF(n){return n!=null&&!h2e.has(n)?(oh(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wO}"`),null):n}function f2e(n,e){let t,r,i,a,o;if(s2e(n)){let s=n.getAttribute("action");r=s?xg(s,e):null,t=n.getAttribute("method")||bO,i=SF(n.getAttribute("enctype"))||wO,a=new FormData(n)}else if(o2e(n)||l2e(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||s.getAttribute("action");if(r=l?xg(l,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||bO,i=SF(n.getAttribute("formenctype"))||SF(s.getAttribute("enctype"))||wO,a=new FormData(s,n),!d2e()){let{name:c,type:u,value:d}=n;if(u==="image"){let h=c?`${c}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else c&&a.append(c,d)}}else{if(LL(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bO,r=null,i=wO,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function Kq(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function p2e(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function g2e(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function m2e(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await p2e(a,t);return o.links?o.links():[]}return[]}));return w2e(r.flat(1).filter(g2e).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function lZ(n,e,t,r,i,a){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,s=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,c)=>o(l,c)||s(l,c)):a==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||s(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function v2e(n,e,{includeHydrateFallback:t}={}){return y2e(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function y2e(n){return[...new Set(n)]}function b2e(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function w2e(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(b2e(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _2e=new Set([100,101,204,205]);function x2e(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&xg(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Dge(){let n=K.useContext(cT);return Kq(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function S2e(){let n=K.useContext(NL);return Kq(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Xq=K.createContext(void 0);Xq.displayName="FrameworkContext";function kge(){let n=K.useContext(Xq);return Kq(n,"You must render this element inside a <HydratedRouter> element"),n}function T2e(n,e){let t=K.useContext(Xq),[r,i]=K.useState(!1),[a,o]=K.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,h=K.useRef(null);K.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=w=>{w.forEach(_=>{o(_.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[n]),K.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let f=()=>{i(!0)},m=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,h,{}]:[a,h,{onFocus:DA(s,f),onBlur:DA(l,m),onMouseEnter:DA(c,f),onMouseLeave:DA(u,m),onTouchStart:DA(d,f)}]:[!1,h,{}]}function DA(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function E2e({page:n,...e}){let{router:t}=Dge(),r=K.useMemo(()=>mge(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?K.createElement(C2e,{page:n,matches:r,...e}):null}function A2e(n){let{manifest:e,routeModules:t}=kge(),[r,i]=K.useState([]);return K.useEffect(()=>{let a=!1;return m2e(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function C2e({page:n,matches:e,...t}){let r=vs(),{manifest:i,routeModules:a}=kge(),{basename:o}=Dge(),{loaderData:s,matches:l}=S2e(),c=K.useMemo(()=>lZ(n,e,l,i,r,"data"),[n,e,l,i,r]),u=K.useMemo(()=>lZ(n,e,l,i,r,"assets"),[n,e,l,i,r]),d=K.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let m=new Set,v=!1;if(e.forEach(w=>{var S;let _=i.routes[w.route.id];!_||!_.hasLoader||(!c.some(A=>A.route.id===w.route.id)&&w.route.id in s&&((S=a[w.route.id])!=null&&S.shouldRevalidate)||_.hasClientLoader?v=!0:m.add(w.route.id))}),m.size===0)return[];let y=x2e(n,o);return v&&m.size>0&&y.searchParams.set("_routes",e.filter(w=>m.has(w.route.id)).map(w=>w.route.id).join(",")),[y.pathname+y.search]},[o,s,r,i,c,e,n,a]),h=K.useMemo(()=>v2e(u,i),[u,i]),f=A2e(u);return K.createElement(K.Fragment,null,d.map(m=>K.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...t})),h.map(m=>K.createElement("link",{key:m,rel:"modulepreload",href:m,...t})),f.map(({key:m,link:v})=>K.createElement("link",{key:m,...v})))}function D2e(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ige=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ige&&(window.__reactRouterVersion="7.6.2")}catch{}function k2e({basename:n,children:e,window:t}){let r=K.useRef();r.current==null&&(r.current=pIe({window:t,v5Compat:!0}));let i=r.current,[a,o]=K.useState({action:i.action,location:i.location}),s=K.useCallback(l=>{K.startTransition(()=>o(l))},[o]);return K.useLayoutEffect(()=>i.listen(s),[i,s]),K.createElement(i2e,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var Mge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cR=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},f){let{basename:m}=K.useContext(Bf),v=typeof c=="string"&&Mge.test(c),y,w=!1;if(typeof c=="string"&&v&&(y=c,Ige))try{let O=new URL(window.location.href),j=c.startsWith("//")?new URL(O.protocol+c):new URL(c),L=xg(j.pathname,m);j.origin===O.origin&&L!=null?c=L+j.search+j.hash:w=!0}catch{oh(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=UIe(c,{relative:i}),[S,A,C]=T2e(r,h),D=O2e(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:i,viewTransition:d});function M(O){e&&e(O),O.defaultPrevented||D(O)}let P=K.createElement("a",{...h,...C,href:y||_,onClick:w||a?e:M,ref:D2e(f,A),target:l,"data-discover":!v&&t==="render"?"true":void 0});return S&&!v?K.createElement(K.Fragment,null,P,K.createElement(E2e,{page:_})):P});cR.displayName="Link";var I2e=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:l,...c},u){let d=TI(o,{relative:c.relative}),h=vs(),f=K.useContext(NL),{navigator:m,basename:v}=K.useContext(Bf),y=f!=null&&F2e(d)&&s===!0,w=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,_=h.pathname,S=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(_=_.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&v&&(S=xg(S,v)||S);const A=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let C=_===w||!i&&_.startsWith(w)&&_.charAt(A)==="/",D=S!=null&&(S===w||!i&&S.startsWith(w)&&S.charAt(w.length)==="/"),M={isActive:C,isPending:D,isTransitioning:y},P=C?e:void 0,O;typeof r=="function"?O=r(M):O=[r,C?"active":null,D?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(M):a;return K.createElement(cR,{...c,"aria-current":P,className:O,ref:u,style:j,to:o,viewTransition:s},typeof l=="function"?l(M):l)});I2e.displayName="NavLink";var M2e=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=bO,action:s,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},f)=>{let m=L2e(),v=j2e(s,{relative:c}),y=o.toLowerCase()==="get"?"get":"post",w=typeof s=="string"&&Mge.test(s),_=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let A=S.nativeEvent.submitter,C=(A==null?void 0:A.getAttribute("formmethod"))||o;m(A||S.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:i,state:a,relative:c,preventScrollReset:u,viewTransition:d})};return K.createElement("form",{ref:f,method:y,action:v,onSubmit:r?l:_,...h,"data-discover":!w&&n==="render"?"true":void 0})});M2e.displayName="Form";function P2e(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pge(n){let e=K.useContext(cT);return ya(e,P2e(n)),e}function O2e(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=$g(),l=vs(),c=TI(n,{relative:a});return K.useCallback(u=>{if(u2e(u,e)){u.preventDefault();let d=t!==void 0?t:UD(l)===UD(c);s(n,{replace:d,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[l,s,c,t,r,e,n,i,a,o])}var R2e=0,N2e=()=>`__${String(++R2e)}__`;function L2e(){let{router:n}=Pge("useSubmit"),{basename:e}=K.useContext(Bf),t=e2e();return K.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:l,body:c}=f2e(r,e);if(i.navigate===!1){let u=i.fetcherKey||N2e();await n.fetch(u,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function j2e(n,{relative:e}={}){let{basename:t}=K.useContext(Bf),r=K.useContext(Uf);ya(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...TI(n||".",{relative:e})},o=vs();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),l=s.getAll("index");if(l.some(u=>u==="")){s.delete("index"),l.filter(d=>d).forEach(d=>s.append("index",d));let u=s.toString();a.search=u?`?${u}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:cg([t,a.pathname])),UD(a)}function F2e(n,e={}){let t=K.useContext(xge);ya(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Pge("useViewTransitionState"),i=TI(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=xg(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=xg(t.nextLocation.pathname,r)||t.nextLocation.pathname;return lR(i.pathname,o)!=null||lR(i.pathname,a)!=null}[..._2e];var $2e=gge();const cZ=n=>{let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(f=>f(e,h))}},i=()=>e,s={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(r,i,s);return s},B2e=n=>n?cZ(n):cZ,U2e=n=>n;function V2e(n,e=U2e){const t=ye.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return ye.useDebugValue(t),t}const uZ=n=>{const e=B2e(n),t=r=>V2e(e,r);return Object.assign(t,e),t},yy=n=>n?uZ(n):uZ,tD={timer:{pomodoro:25,shortBreak:5,longBreak:15,autoStartBreaks:!1,autoStartPomodoros:!1,longBreakInterval:4},darkMode:!1,compactTaskView:!1};var dZ={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oge=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},z2e=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],s=n[t++],l=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Rge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,s=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=a>>2,d=(a&3)<<4|s>>4;let h=(s&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(t[u],t[d],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Oge(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):z2e(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],s=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||s==null||c==null||d==null)throw new H2e;const h=a<<2|s>>4;if(r.push(h),c!==64){const f=s<<4&240|c>>2;if(r.push(f),d!==64){const m=c<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class H2e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q2e=function(n){const e=Oge(n);return Rge.encodeByteArray(e,!0)},uR=function(n){return q2e(n).replace(/\./g,"")},Nge=function(n){try{return Rge.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dR(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!G2e(t)||(n[t]=dR(n[t],e[t]));return n}function G2e(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2e=()=>Lge().__FIREBASE_DEFAULTS__,Y2e=()=>{if(typeof process>"u"||typeof dZ>"u")return;const n=dZ.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},K2e=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Nge(n[1]);return e&&JSON.parse(e)},jL=()=>{try{return W2e()||Y2e()||K2e()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jge=n=>{var e,t;return(t=(e=jL())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},X2e=n=>{const e=jge(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Fge=()=>{var n;return(n=jL())===null||n===void 0?void 0:n.config},$ge=n=>{var e;return(e=jL())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z2e=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2e(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[uR(JSON.stringify(t)),uR(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J2e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ao())}function Zq(){var n;const e=(n=jL())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eMe(){return typeof window<"u"||Bge()}function Bge(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function tMe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qq(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Jq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uge(){const n=ao();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nMe(){return!Zq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VD(){try{return typeof indexedDB=="object"}catch{return!1}}function Vge(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function rMe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iMe="FirebaseError";class us extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=iMe,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bg.prototype.create)}}class Bg{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?aMe(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new us(i,s,r)}}function aMe(n,e){return n.replace(oMe,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const oMe=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hZ(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function sMe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zD(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(fZ(a)&&fZ(o)){if(!zD(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function fZ(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function LS(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function AC(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function zge(n,e){const t=new lMe(n,e);return t.subscribe.bind(t)}class lMe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");cMe(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=TF),i.error===void 0&&(i.error=TF),i.complete===void 0&&(i.complete=TF);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cMe(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function TF(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uMe=1e3,dMe=2,hMe=4*60*60*1e3,fMe=.5;function pZ(n,e=uMe,t=dMe){const r=e*Math.pow(t,n),i=Math.round(fMe*r*(Math.random()-.5)*2);return Math.min(hMe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(n){return n&&n._delegate?n._delegate:n}class Kc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pMe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Z2e;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mMe(e))try{this.getOrInitializeService({instanceIdentifier:Eb})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Eb){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eb){return this.instances.has(e)}getOptions(e=Eb){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gMe(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eb){return this.component?this.component.multipleInstances?e:Eb:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gMe(n){return n===Eb?void 0:n}function mMe(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hge{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pMe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=[];var Tr;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Tr||(Tr={}));const qge={debug:Tr.DEBUG,verbose:Tr.VERBOSE,info:Tr.INFO,warn:Tr.WARN,error:Tr.ERROR,silent:Tr.SILENT},vMe=Tr.INFO,yMe={[Tr.DEBUG]:"log",[Tr.VERBOSE]:"log",[Tr.INFO]:"info",[Tr.WARN]:"warn",[Tr.ERROR]:"error"},bMe=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=yMe[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class EI{constructor(e){this.name=e,this._logLevel=vMe,this._logHandler=bMe,this._userLogHandler=null,e7.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qge[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tr.DEBUG,...e),this._logHandler(this,Tr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tr.VERBOSE,...e),this._logHandler(this,Tr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tr.INFO,...e),this._logHandler(this,Tr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tr.WARN,...e),this._logHandler(this,Tr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tr.ERROR,...e),this._logHandler(this,Tr.ERROR,...e)}}function wMe(n){e7.forEach(e=>{e.setLogLevel(n)})}function _Me(n,e){for(const t of e7){let r=null;e&&e.level&&(r=qge[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,a,...o)=>{const s=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");a>=(r??i.logLevel)&&n({level:Tr[a].toLowerCase(),message:s,args:o,type:i.name})}}}const xMe=(n,e)=>e.some(t=>n instanceof t);let gZ,mZ;function SMe(){return gZ||(gZ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TMe(){return mZ||(mZ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gge=new WeakMap,fz=new WeakMap,Wge=new WeakMap,EF=new WeakMap,t7=new WeakMap;function EMe(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Gv(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Gge.set(t,n)}).catch(()=>{}),t7.set(e,n),e}function AMe(n){if(fz.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});fz.set(n,e)}let pz={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fz.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Wge.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gv(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CMe(n){pz=n(pz)}function DMe(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(AF(this),e,...t);return Wge.set(r,e.sort?e.sort():[e]),Gv(r)}:TMe().includes(n)?function(...e){return n.apply(AF(this),e),Gv(Gge.get(this))}:function(...e){return Gv(n.apply(AF(this),e))}}function kMe(n){return typeof n=="function"?DMe(n):(n instanceof IDBTransaction&&AMe(n),xMe(n,SMe())?new Proxy(n,pz):n)}function Gv(n){if(n instanceof IDBRequest)return EMe(n);if(EF.has(n))return EF.get(n);const e=kMe(n);return e!==n&&(EF.set(n,e),t7.set(e,n)),e}const AF=n=>t7.get(n);function Yge(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),s=Gv(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Gv(o.result),l.oldVersion,l.newVersion,Gv(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),s.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const IMe=["get","getKey","getAll","getAllKeys","count"],MMe=["put","add","delete","clear"],CF=new Map;function vZ(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(CF.get(e))return CF.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=MMe.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IMe.includes(t)))return;const a=async function(o,...s){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[t](...s),i&&l.done]))[0]};return CF.set(e,a),a}CMe(n=>({...n,get:(e,t,r)=>vZ(e,t)||n.get(e,t,r),has:(e,t)=>!!vZ(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PMe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OMe(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function OMe(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hR="@firebase/app",gz="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=new EI("@firebase/app"),RMe="@firebase/app-compat",NMe="@firebase/analytics-compat",LMe="@firebase/analytics",jMe="@firebase/app-check-compat",FMe="@firebase/app-check",$Me="@firebase/auth",BMe="@firebase/auth-compat",UMe="@firebase/database",VMe="@firebase/data-connect",zMe="@firebase/database-compat",HMe="@firebase/functions",qMe="@firebase/functions-compat",GMe="@firebase/installations",WMe="@firebase/installations-compat",YMe="@firebase/messaging",KMe="@firebase/messaging-compat",XMe="@firebase/performance",ZMe="@firebase/performance-compat",QMe="@firebase/remote-config",JMe="@firebase/remote-config-compat",ePe="@firebase/storage",tPe="@firebase/storage-compat",nPe="@firebase/firestore",rPe="@firebase/vertexai-preview",iPe="@firebase/firestore-compat",aPe="firebase",oPe="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="[DEFAULT]",sPe={[hR]:"fire-core",[RMe]:"fire-core-compat",[LMe]:"fire-analytics",[NMe]:"fire-analytics-compat",[FMe]:"fire-app-check",[jMe]:"fire-app-check-compat",[$Me]:"fire-auth",[BMe]:"fire-auth-compat",[UMe]:"fire-rtdb",[VMe]:"fire-data-connect",[zMe]:"fire-rtdb-compat",[HMe]:"fire-fn",[qMe]:"fire-fn-compat",[GMe]:"fire-iid",[WMe]:"fire-iid-compat",[YMe]:"fire-fcm",[KMe]:"fire-fcm-compat",[XMe]:"fire-perf",[ZMe]:"fire-perf-compat",[QMe]:"fire-rc",[JMe]:"fire-rc-compat",[ePe]:"fire-gcs",[tPe]:"fire-gcs-compat",[nPe]:"fire-fst",[iPe]:"fire-fst-compat",[rPe]:"fire-vertex","fire-js":"fire-js",[aPe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=new Map,v1=new Map,y1=new Map;function HD(n,e){try{n.container.addComponent(e)}catch(t){Sg.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kge(n,e){n.container.addOrOverwriteComponent(e)}function Ku(n){const e=n.name;if(y1.has(e))return Sg.debug(`There were multiple attempts to register component ${e}.`),!1;y1.set(e,n);for(const t of iy.values())HD(t,n);for(const t of v1.values())HD(t,n);return!0}function Ug(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function lPe(n,e,t=ry){Ug(n,e).clearInstance(t)}function Xge(n){return n.options!==void 0}function Aa(n){return n.settings!==void 0}function cPe(){y1.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uPe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gu=new Bg("app","Firebase",uPe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zge=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gu.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dPe extends Zge{constructor(e,t,r,i){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,o,i);else{const s=e;super(s.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Hs(hR,gz,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){n7(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Gu.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=oPe;function FL(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ry,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gu.create("bad-app-name",{appName:String(i)});if(t||(t=Fge()),!t)throw Gu.create("no-options");const a=iy.get(i);if(a){if(zD(t,a.options)&&zD(r,a.config))return a;throw Gu.create("duplicate-app",{appName:i})}const o=new Hge(i);for(const l of y1.values())o.addComponent(l);const s=new Zge(t,r,o);return iy.set(i,s),s}function hPe(n,e){if(eMe()&&!Bge())throw Gu.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;Xge(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((u,d)=>Math.imul(31,u)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Gu.create("finalization-registry-not-supported",{});const a=""+i(JSON.stringify(r)),o=v1.get(a);if(o)return o.incRefCount(e.releaseOnDeref),o;const s=new Hge(a);for(const c of y1.values())s.addComponent(c);const l=new dPe(t,e,a,s);return v1.set(a,l),l}function $L(n=ry){const e=iy.get(n);if(!e&&n===ry&&Fge())return FL();if(!e)throw Gu.create("no-app",{appName:n});return e}function fPe(){return Array.from(iy.values())}async function n7(n){let e=!1;const t=n.name;iy.has(t)?(e=!0,iy.delete(t)):v1.has(t)&&n.decRefCount()<=0&&(v1.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Hs(n,e,t){var r;let i=(r=sPe[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sg.warn(s.join(" "));return}Ku(new Kc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Qge(n,e){if(n!==null&&typeof n!="function")throw Gu.create("invalid-log-argument");_Me(n,e)}function Jge(n){wMe(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pPe="firebase-heartbeat-database",gPe=1,qD="firebase-heartbeat-store";let DF=null;function eme(){return DF||(DF=Yge(pPe,gPe,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qD)}catch(t){console.warn(t)}}}}).catch(n=>{throw Gu.create("idb-open",{originalErrorMessage:n.message})})),DF}async function mPe(n){try{const t=(await eme()).transaction(qD),r=await t.objectStore(qD).get(tme(n));return await t.done,r}catch(e){if(e instanceof us)Sg.warn(e.message);else{const t=Gu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sg.warn(t.message)}}}async function yZ(n,e){try{const r=(await eme()).transaction(qD,"readwrite");await r.objectStore(qD).put(e,tme(n)),await r.done}catch(t){if(t instanceof us)Sg.warn(t.message);else{const r=Gu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Sg.warn(r.message)}}}function tme(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vPe=1024,yPe=30*24*60*60*1e3;class bPe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _Pe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=bZ();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=yPe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Sg.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=bZ(),{heartbeatsToSend:r,unsentEntries:i}=wPe(this._heartbeatsCache.heartbeats),a=uR(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Sg.warn(t),""}}}function bZ(){return new Date().toISOString().substring(0,10)}function wPe(n,e=vPe){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),wZ(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),wZ(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _Pe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VD()?Vge().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mPe(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return yZ(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return yZ(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wZ(n){return uR(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xPe(n){Ku(new Kc("platform-logger",e=>new PMe(e),"PRIVATE")),Ku(new Kc("heartbeat",e=>new bPe(e),"PRIVATE")),Hs(hR,gz,n),Hs(hR,gz,"esm2017"),Hs("fire-js","")}xPe("");const SPe=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:us,SDK_VERSION:by,_DEFAULT_ENTRY_NAME:ry,_addComponent:HD,_addOrOverwriteComponent:Kge,_apps:iy,_clearComponents:cPe,_components:y1,_getProvider:Ug,_isFirebaseApp:Xge,_isFirebaseServerApp:Aa,_registerComponent:Ku,_removeServiceInstance:lPe,_serverApps:v1,deleteApp:n7,getApp:$L,getApps:fPe,initializeApp:FL,initializeServerApp:hPe,onLog:Qge,registerVersion:Hs,setLogLevel:Jge},Symbol.toStringTag,{value:"Module"}));var _Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ow,nme;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,P){function O(){}O.prototype=P.prototype,M.D=P.prototype,M.prototype=new O,M.prototype.constructor=M,M.C=function(j,L,B){for(var $=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)$[Y-2]=arguments[Y];return P.prototype[L].apply(j,$)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,P,O){O||(O=0);var j=Array(16);if(typeof P=="string")for(var L=0;16>L;++L)j[L]=P.charCodeAt(O++)|P.charCodeAt(O++)<<8|P.charCodeAt(O++)<<16|P.charCodeAt(O++)<<24;else for(L=0;16>L;++L)j[L]=P[O++]|P[O++]<<8|P[O++]<<16|P[O++]<<24;P=M.g[0],O=M.g[1],L=M.g[2];var B=M.g[3],$=P+(B^O&(L^B))+j[0]+3614090360&4294967295;P=O+($<<7&4294967295|$>>>25),$=B+(L^P&(O^L))+j[1]+3905402710&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(O^B&(P^O))+j[2]+606105819&4294967295,L=B+($<<17&4294967295|$>>>15),$=O+(P^L&(B^P))+j[3]+3250441966&4294967295,O=L+($<<22&4294967295|$>>>10),$=P+(B^O&(L^B))+j[4]+4118548399&4294967295,P=O+($<<7&4294967295|$>>>25),$=B+(L^P&(O^L))+j[5]+1200080426&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(O^B&(P^O))+j[6]+2821735955&4294967295,L=B+($<<17&4294967295|$>>>15),$=O+(P^L&(B^P))+j[7]+4249261313&4294967295,O=L+($<<22&4294967295|$>>>10),$=P+(B^O&(L^B))+j[8]+1770035416&4294967295,P=O+($<<7&4294967295|$>>>25),$=B+(L^P&(O^L))+j[9]+2336552879&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(O^B&(P^O))+j[10]+4294925233&4294967295,L=B+($<<17&4294967295|$>>>15),$=O+(P^L&(B^P))+j[11]+2304563134&4294967295,O=L+($<<22&4294967295|$>>>10),$=P+(B^O&(L^B))+j[12]+1804603682&4294967295,P=O+($<<7&4294967295|$>>>25),$=B+(L^P&(O^L))+j[13]+4254626195&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(O^B&(P^O))+j[14]+2792965006&4294967295,L=B+($<<17&4294967295|$>>>15),$=O+(P^L&(B^P))+j[15]+1236535329&4294967295,O=L+($<<22&4294967295|$>>>10),$=P+(L^B&(O^L))+j[1]+4129170786&4294967295,P=O+($<<5&4294967295|$>>>27),$=B+(O^L&(P^O))+j[6]+3225465664&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^O&(B^P))+j[11]+643717713&4294967295,L=B+($<<14&4294967295|$>>>18),$=O+(B^P&(L^B))+j[0]+3921069994&4294967295,O=L+($<<20&4294967295|$>>>12),$=P+(L^B&(O^L))+j[5]+3593408605&4294967295,P=O+($<<5&4294967295|$>>>27),$=B+(O^L&(P^O))+j[10]+38016083&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^O&(B^P))+j[15]+3634488961&4294967295,L=B+($<<14&4294967295|$>>>18),$=O+(B^P&(L^B))+j[4]+3889429448&4294967295,O=L+($<<20&4294967295|$>>>12),$=P+(L^B&(O^L))+j[9]+568446438&4294967295,P=O+($<<5&4294967295|$>>>27),$=B+(O^L&(P^O))+j[14]+3275163606&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^O&(B^P))+j[3]+4107603335&4294967295,L=B+($<<14&4294967295|$>>>18),$=O+(B^P&(L^B))+j[8]+1163531501&4294967295,O=L+($<<20&4294967295|$>>>12),$=P+(L^B&(O^L))+j[13]+2850285829&4294967295,P=O+($<<5&4294967295|$>>>27),$=B+(O^L&(P^O))+j[2]+4243563512&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^O&(B^P))+j[7]+1735328473&4294967295,L=B+($<<14&4294967295|$>>>18),$=O+(B^P&(L^B))+j[12]+2368359562&4294967295,O=L+($<<20&4294967295|$>>>12),$=P+(O^L^B)+j[5]+4294588738&4294967295,P=O+($<<4&4294967295|$>>>28),$=B+(P^O^L)+j[8]+2272392833&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^O)+j[11]+1839030562&4294967295,L=B+($<<16&4294967295|$>>>16),$=O+(L^B^P)+j[14]+4259657740&4294967295,O=L+($<<23&4294967295|$>>>9),$=P+(O^L^B)+j[1]+2763975236&4294967295,P=O+($<<4&4294967295|$>>>28),$=B+(P^O^L)+j[4]+1272893353&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^O)+j[7]+4139469664&4294967295,L=B+($<<16&4294967295|$>>>16),$=O+(L^B^P)+j[10]+3200236656&4294967295,O=L+($<<23&4294967295|$>>>9),$=P+(O^L^B)+j[13]+681279174&4294967295,P=O+($<<4&4294967295|$>>>28),$=B+(P^O^L)+j[0]+3936430074&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^O)+j[3]+3572445317&4294967295,L=B+($<<16&4294967295|$>>>16),$=O+(L^B^P)+j[6]+76029189&4294967295,O=L+($<<23&4294967295|$>>>9),$=P+(O^L^B)+j[9]+3654602809&4294967295,P=O+($<<4&4294967295|$>>>28),$=B+(P^O^L)+j[12]+3873151461&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^O)+j[15]+530742520&4294967295,L=B+($<<16&4294967295|$>>>16),$=O+(L^B^P)+j[2]+3299628645&4294967295,O=L+($<<23&4294967295|$>>>9),$=P+(L^(O|~B))+j[0]+4096336452&4294967295,P=O+($<<6&4294967295|$>>>26),$=B+(O^(P|~L))+j[7]+1126891415&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~O))+j[14]+2878612391&4294967295,L=B+($<<15&4294967295|$>>>17),$=O+(B^(L|~P))+j[5]+4237533241&4294967295,O=L+($<<21&4294967295|$>>>11),$=P+(L^(O|~B))+j[12]+1700485571&4294967295,P=O+($<<6&4294967295|$>>>26),$=B+(O^(P|~L))+j[3]+2399980690&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~O))+j[10]+4293915773&4294967295,L=B+($<<15&4294967295|$>>>17),$=O+(B^(L|~P))+j[1]+2240044497&4294967295,O=L+($<<21&4294967295|$>>>11),$=P+(L^(O|~B))+j[8]+1873313359&4294967295,P=O+($<<6&4294967295|$>>>26),$=B+(O^(P|~L))+j[15]+4264355552&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~O))+j[6]+2734768916&4294967295,L=B+($<<15&4294967295|$>>>17),$=O+(B^(L|~P))+j[13]+1309151649&4294967295,O=L+($<<21&4294967295|$>>>11),$=P+(L^(O|~B))+j[4]+4149444226&4294967295,P=O+($<<6&4294967295|$>>>26),$=B+(O^(P|~L))+j[11]+3174756917&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~O))+j[2]+718787259&4294967295,L=B+($<<15&4294967295|$>>>17),$=O+(B^(L|~P))+j[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(L+($<<21&4294967295|$>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+B&4294967295}r.prototype.u=function(M,P){P===void 0&&(P=M.length);for(var O=P-this.blockSize,j=this.B,L=this.h,B=0;B<P;){if(L==0)for(;B<=O;)i(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<P;)if(j[L++]=M.charCodeAt(B++),L==this.blockSize){i(this,j),L=0;break}}else for(;B<P;)if(j[L++]=M[B++],L==this.blockSize){i(this,j),L=0;break}}this.h=L,this.o+=P},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;var O=8*this.o;for(P=M.length-8;P<M.length;++P)M[P]=O&255,O/=256;for(this.u(M),M=Array(16),P=O=0;4>P;++P)for(var j=0;32>j;j+=8)M[O++]=this.g[P]>>>j&255;return M};function a(M,P){var O=s;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=P(M)}function o(M,P){this.h=P;for(var O=[],j=!0,L=M.length-1;0<=L;L--){var B=M[L]|0;j&&B==P||(O[L]=B,j=!1)}this.g=O}var s={};function l(M){return-128<=M&&128>M?a(M,function(P){return new o([P|0],0>P?-1:0)}):new o([M|0],0>M?-1:0)}function c(M){if(isNaN(M)||!isFinite(M))return d;if(0>M)return y(c(-M));for(var P=[],O=1,j=0;M>=O;j++)P[j]=M/O|0,O*=4294967296;return new o(P,0)}function u(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return y(u(M.substring(1),P));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=c(Math.pow(P,8)),j=d,L=0;L<M.length;L+=8){var B=Math.min(8,M.length-L),$=parseInt(M.substring(L,L+B),P);8>B?(B=c(Math.pow(P,B)),j=j.j(B).add(c($))):(j=j.j(O),j=j.add(c($)))}return j}var d=l(0),h=l(1),f=l(16777216);n=o.prototype,n.m=function(){if(v(this))return-y(this).m();for(var M=0,P=1,O=0;O<this.g.length;O++){var j=this.i(O);M+=(0<=j?j:4294967296+j)*P,P*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(m(this))return"0";if(v(this))return"-"+y(this).toString(M);for(var P=c(Math.pow(M,6)),O=this,j="";;){var L=A(O,P).g;O=w(O,L.j(P));var B=((0<O.g.length?O.g[0]:O.h)>>>0).toString(M);if(O=L,m(O))return B+j;for(;6>B.length;)B="0"+B;j=B+j}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function m(M){if(M.h!=0)return!1;for(var P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function v(M){return M.h==-1}n.l=function(M){return M=w(this,M),v(M)?-1:m(M)?0:1};function y(M){for(var P=M.g.length,O=[],j=0;j<P;j++)O[j]=~M.g[j];return new o(O,~M.h).add(h)}n.abs=function(){return v(this)?y(this):this},n.add=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],j=0,L=0;L<=P;L++){var B=j+(this.i(L)&65535)+(M.i(L)&65535),$=(B>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);j=$>>>16,B&=65535,$&=65535,O[L]=$<<16|B}return new o(O,O[O.length-1]&-2147483648?-1:0)};function w(M,P){return M.add(y(P))}n.j=function(M){if(m(this)||m(M))return d;if(v(this))return v(M)?y(this).j(y(M)):y(y(this).j(M));if(v(M))return y(this.j(y(M)));if(0>this.l(f)&&0>M.l(f))return c(this.m()*M.m());for(var P=this.g.length+M.g.length,O=[],j=0;j<2*P;j++)O[j]=0;for(j=0;j<this.g.length;j++)for(var L=0;L<M.g.length;L++){var B=this.i(j)>>>16,$=this.i(j)&65535,Y=M.i(L)>>>16,q=M.i(L)&65535;O[2*j+2*L]+=$*q,_(O,2*j+2*L),O[2*j+2*L+1]+=B*q,_(O,2*j+2*L+1),O[2*j+2*L+1]+=$*Y,_(O,2*j+2*L+1),O[2*j+2*L+2]+=B*Y,_(O,2*j+2*L+2)}for(j=0;j<P;j++)O[j]=O[2*j+1]<<16|O[2*j];for(j=P;j<2*P;j++)O[j]=0;return new o(O,0)};function _(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function S(M,P){this.g=M,this.h=P}function A(M,P){if(m(P))throw Error("division by zero");if(m(M))return new S(d,d);if(v(M))return P=A(y(M),P),new S(y(P.g),y(P.h));if(v(P))return P=A(M,y(P)),new S(y(P.g),P.h);if(30<M.g.length){if(v(M)||v(P))throw Error("slowDivide_ only works with positive integers.");for(var O=h,j=P;0>=j.l(M);)O=C(O),j=C(j);var L=D(O,1),B=D(j,1);for(j=D(j,2),O=D(O,2);!m(j);){var $=B.add(j);0>=$.l(M)&&(L=L.add(O),B=$),j=D(j,1),O=D(O,1)}return P=w(M,L.j(P)),new S(L,P)}for(L=d;0<=M.l(P);){for(O=Math.max(1,Math.floor(M.m()/P.m())),j=Math.ceil(Math.log(O)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),B=c(O),$=B.j(P);v($)||0<$.l(M);)O-=j,B=c(O),$=B.j(P);m(B)&&(B=h),L=L.add(B),M=w(M,$)}return new S(L,M)}n.A=function(M){return A(this,M).h},n.and=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],j=0;j<P;j++)O[j]=this.i(j)&M.i(j);return new o(O,this.h&M.h)},n.or=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],j=0;j<P;j++)O[j]=this.i(j)|M.i(j);return new o(O,this.h|M.h)},n.xor=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],j=0;j<P;j++)O[j]=this.i(j)^M.i(j);return new o(O,this.h^M.h)};function C(M){for(var P=M.g.length+1,O=[],j=0;j<P;j++)O[j]=M.i(j)<<1|M.i(j-1)>>>31;return new o(O,M.h)}function D(M,P){var O=P>>5;P%=32;for(var j=M.g.length-O,L=[],B=0;B<j;B++)L[B]=0<P?M.i(B+O)>>>P|M.i(B+O+1)<<32-P:M.i(B+O);return new o(L,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nme=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,ow=o}).apply(typeof _Z<"u"?_Z:typeof self<"u"?self:typeof window<"u"?window:{});var DM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rme,CC,ime,_O,mz,ame,ome,sme;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(R,G,Q){return R==Array.prototype||R==Object.prototype||(R[G]=Q.value),R};function t(R){R=[typeof globalThis=="object"&&globalThis,R,typeof window=="object"&&window,typeof self=="object"&&self,typeof DM=="object"&&DM];for(var G=0;G<R.length;++G){var Q=R[G];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var r=t(this);function i(R,G){if(G)e:{var Q=r;R=R.split(".");for(var se=0;se<R.length-1;se++){var Ee=R[se];if(!(Ee in Q))break e;Q=Q[Ee]}R=R[R.length-1],se=Q[R],G=G(se),G!=se&&G!=null&&e(Q,R,{configurable:!0,writable:!0,value:G})}}function a(R,G){R instanceof String&&(R+="");var Q=0,se=!1,Ee={next:function(){if(!se&&Q<R.length){var Ne=Q++;return{value:G(Ne,R[Ne]),done:!1}}return se=!0,{done:!0,value:void 0}}};return Ee[Symbol.iterator]=function(){return Ee},Ee}i("Array.prototype.values",function(R){return R||function(){return a(this,function(G,Q){return Q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function l(R){var G=typeof R;return G=G!="object"?G:R?Array.isArray(R)?"array":G:"null",G=="array"||G=="object"&&typeof R.length=="number"}function c(R){var G=typeof R;return G=="object"&&R!=null||G=="function"}function u(R,G,Q){return R.call.apply(R.bind,arguments)}function d(R,G,Q){if(!R)throw Error();if(2<arguments.length){var se=Array.prototype.slice.call(arguments,2);return function(){var Ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ee,se),R.apply(G,Ee)}}return function(){return R.apply(G,arguments)}}function h(R,G,Q){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function f(R,G){var Q=Array.prototype.slice.call(arguments,1);return function(){var se=Q.slice();return se.push.apply(se,arguments),R.apply(this,se)}}function m(R,G){function Q(){}Q.prototype=G.prototype,R.aa=G.prototype,R.prototype=new Q,R.prototype.constructor=R,R.Qb=function(se,Ee,Ne){for(var ht=Array(arguments.length-2),lr=2;lr<arguments.length;lr++)ht[lr-2]=arguments[lr];return G.prototype[Ee].apply(se,ht)}}function v(R){const G=R.length;if(0<G){const Q=Array(G);for(let se=0;se<G;se++)Q[se]=R[se];return Q}return[]}function y(R,G){for(let Q=1;Q<arguments.length;Q++){const se=arguments[Q];if(l(se)){const Ee=R.length||0,Ne=se.length||0;R.length=Ee+Ne;for(let ht=0;ht<Ne;ht++)R[Ee+ht]=se[ht]}else R.push(se)}}class w{constructor(G,Q){this.i=G,this.j=Q,this.h=0,this.g=null}get(){let G;return 0<this.h?(this.h--,G=this.g,this.g=G.next,G.next=null):G=this.i(),G}}function _(R){return/^[\s\xa0]*$/.test(R)}function S(){var R=s.navigator;return R&&(R=R.userAgent)?R:""}function A(R){return A[" "](R),R}A[" "]=function(){};var C=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function D(R,G,Q){for(const se in R)G.call(Q,R[se],se,R)}function M(R,G){for(const Q in R)G.call(void 0,R[Q],Q,R)}function P(R){const G={};for(const Q in R)G[Q]=R[Q];return G}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(R,G){let Q,se;for(let Ee=1;Ee<arguments.length;Ee++){se=arguments[Ee];for(Q in se)R[Q]=se[Q];for(let Ne=0;Ne<O.length;Ne++)Q=O[Ne],Object.prototype.hasOwnProperty.call(se,Q)&&(R[Q]=se[Q])}}function L(R){var G=1;R=R.split(":");const Q=[];for(;0<G&&R.length;)Q.push(R.shift()),G--;return R.length&&Q.push(R.join(":")),Q}function B(R){s.setTimeout(()=>{throw R},0)}function $(){var R=re;let G=null;return R.g&&(G=R.g,R.g=R.g.next,R.g||(R.h=null),G.next=null),G}class Y{constructor(){this.h=this.g=null}add(G,Q){const se=q.get();se.set(G,Q),this.h?this.h.next=se:this.g=se,this.h=se}}var q=new w(()=>new W,R=>R.reset());class W{constructor(){this.next=this.g=this.h=null}set(G,Q){this.h=G,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let X,te=!1,re=new Y,z=()=>{const R=s.Promise.resolve(void 0);X=()=>{R.then(oe)}};var oe=()=>{for(var R;R=$();){try{R.h.call(R.g)}catch(Q){B(Q)}var G=q;G.j(R),100>G.h&&(G.h++,R.next=G.g,G.g=R)}te=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(R,G){this.type=R,this.g=this.target=G,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var R=!1,G=Object.defineProperty({},"passive",{get:function(){R=!0}});try{const Q=()=>{};s.addEventListener("test",Q,G),s.removeEventListener("test",Q,G)}catch{}return R}();function he(R,G){if(ee.call(this,R?R.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,R){var Q=this.type=R.type,se=R.changedTouches&&R.changedTouches.length?R.changedTouches[0]:null;if(this.target=R.target||R.srcElement,this.g=G,G=R.relatedTarget){if(C){e:{try{A(G.nodeName);var Ee=!0;break e}catch{}Ee=!1}Ee||(G=null)}}else Q=="mouseover"?G=R.fromElement:Q=="mouseout"&&(G=R.toElement);this.relatedTarget=G,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0),this.button=R.button,this.key=R.key||"",this.ctrlKey=R.ctrlKey,this.altKey=R.altKey,this.shiftKey=R.shiftKey,this.metaKey=R.metaKey,this.pointerId=R.pointerId||0,this.pointerType=typeof R.pointerType=="string"?R.pointerType:pe[R.pointerType]||"",this.state=R.state,this.i=R,R.defaultPrevented&&he.aa.h.call(this)}}m(he,ee);var pe={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var R=this.i;R.preventDefault?R.preventDefault():R.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Se(R,G,Q,se,Ee){this.listener=R,this.proxy=null,this.src=G,this.type=Q,this.capture=!!se,this.ha=Ee,this.key=++Be,this.da=this.fa=!1}function _e(R){R.da=!0,R.listener=null,R.proxy=null,R.src=null,R.ha=null}function me(R){this.src=R,this.g={},this.h=0}me.prototype.add=function(R,G,Q,se,Ee){var Ne=R.toString();R=this.g[Ne],R||(R=this.g[Ne]=[],this.h++);var ht=Ge(R,G,se,Ee);return-1<ht?(G=R[ht],Q||(G.fa=!1)):(G=new Se(G,this.src,Ne,!!se,Ee),G.fa=Q,R.push(G)),G};function fe(R,G){var Q=G.type;if(Q in R.g){var se=R.g[Q],Ee=Array.prototype.indexOf.call(se,G,void 0),Ne;(Ne=0<=Ee)&&Array.prototype.splice.call(se,Ee,1),Ne&&(_e(G),R.g[Q].length==0&&(delete R.g[Q],R.h--))}}function Ge(R,G,Q,se){for(var Ee=0;Ee<R.length;++Ee){var Ne=R[Ee];if(!Ne.da&&Ne.listener==G&&Ne.capture==!!Q&&Ne.ha==se)return Ee}return-1}var Ve="closure_lm_"+(1e6*Math.random()|0),nt={};function we(R,G,Q,se,Ee){if(Array.isArray(G)){for(var Ne=0;Ne<G.length;Ne++)we(R,G[Ne],Q,se,Ee);return null}return Q=Ut(Q),R&&R[ct]?R.K(G,Q,c(se)?!!se.capture:!1,Ee):rt(R,G,Q,!1,se,Ee)}function rt(R,G,Q,se,Ee,Ne){if(!G)throw Error("Invalid event type");var ht=c(Ee)?!!Ee.capture:!!Ee,lr=Yt(R);if(lr||(R[Ve]=lr=new me(R)),Q=lr.add(G,Q,se,ht,Ne),Q.proxy)return Q;if(se=on(),Q.proxy=se,se.src=R,se.listener=Q,R.addEventListener)be||(Ee=ht),Ee===void 0&&(Ee=!1),R.addEventListener(G.toString(),se,Ee);else if(R.attachEvent)R.attachEvent(nr(G.toString()),se);else if(R.addListener&&R.removeListener)R.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return Q}function on(){function R(Q){return G.call(R.src,R.listener,Q)}const G=Le;return R}function Mt(R,G,Q,se,Ee){if(Array.isArray(G))for(var Ne=0;Ne<G.length;Ne++)Mt(R,G[Ne],Q,se,Ee);else se=c(se)?!!se.capture:!!se,Q=Ut(Q),R&&R[ct]?(R=R.i,G=String(G).toString(),G in R.g&&(Ne=R.g[G],Q=Ge(Ne,Q,se,Ee),-1<Q&&(_e(Ne[Q]),Array.prototype.splice.call(Ne,Q,1),Ne.length==0&&(delete R.g[G],R.h--)))):R&&(R=Yt(R))&&(G=R.g[G.toString()],R=-1,G&&(R=Ge(G,Q,se,Ee)),(Q=-1<R?G[R]:null)&&kn(Q))}function kn(R){if(typeof R!="number"&&R&&!R.da){var G=R.src;if(G&&G[ct])fe(G.i,R);else{var Q=R.type,se=R.proxy;G.removeEventListener?G.removeEventListener(Q,se,R.capture):G.detachEvent?G.detachEvent(nr(Q),se):G.addListener&&G.removeListener&&G.removeListener(se),(Q=Yt(G))?(fe(Q,R),Q.h==0&&(Q.src=null,G[Ve]=null)):_e(R)}}}function nr(R){return R in nt?nt[R]:nt[R]="on"+R}function Le(R,G){if(R.da)R=!0;else{G=new he(G,this);var Q=R.listener,se=R.ha||R.src;R.fa&&kn(R),R=Q.call(se,G)}return R}function Yt(R){return R=R[Ve],R instanceof me?R:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ut(R){return typeof R=="function"?R:(R[xn]||(R[xn]=function(G){return R.handleEvent(G)}),R[xn])}function Ae(){le.call(this),this.i=new me(this),this.M=this,this.F=null}m(Ae,le),Ae.prototype[ct]=!0,Ae.prototype.removeEventListener=function(R,G,Q,se){Mt(this,R,G,Q,se)};function je(R,G){var Q,se=R.F;if(se)for(Q=[];se;se=se.F)Q.push(se);if(R=R.M,se=G.type||G,typeof G=="string")G=new ee(G,R);else if(G instanceof ee)G.target=G.target||R;else{var Ee=G;G=new ee(se,R),j(G,Ee)}if(Ee=!0,Q)for(var Ne=Q.length-1;0<=Ne;Ne--){var ht=G.g=Q[Ne];Ee=tt(ht,se,!0,G)&&Ee}if(ht=G.g=R,Ee=tt(ht,se,!0,G)&&Ee,Ee=tt(ht,se,!1,G)&&Ee,Q)for(Ne=0;Ne<Q.length;Ne++)ht=G.g=Q[Ne],Ee=tt(ht,se,!1,G)&&Ee}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var R=this.i,G;for(G in R.g){for(var Q=R.g[G],se=0;se<Q.length;se++)_e(Q[se]);delete R.g[G],R.h--}}this.F=null},Ae.prototype.K=function(R,G,Q,se){return this.i.add(String(R),G,!1,Q,se)},Ae.prototype.L=function(R,G,Q,se){return this.i.add(String(R),G,!0,Q,se)};function tt(R,G,Q,se){if(G=R.i.g[String(G)],!G)return!0;G=G.concat();for(var Ee=!0,Ne=0;Ne<G.length;++Ne){var ht=G[Ne];if(ht&&!ht.da&&ht.capture==Q){var lr=ht.listener,Ra=ht.ha||ht.src;ht.fa&&fe(R.i,ht),Ee=lr.call(Ra,se)!==!1&&Ee}}return Ee&&!se.defaultPrevented}function Et(R,G,Q){if(typeof R=="function")Q&&(R=h(R,Q));else if(R&&typeof R.handleEvent=="function")R=h(R.handleEvent,R);else throw Error("Invalid listener argument");return 2147483647<Number(G)?-1:s.setTimeout(R,G||0)}function pt(R){R.g=Et(()=>{R.g=null,R.i&&(R.i=!1,pt(R))},R.l);const G=R.h;R.h=null,R.m.apply(null,G)}class Rr extends le{constructor(G,Q){super(),this.m=G,this.l=Q,this.h=null,this.i=!1,this.g=null}j(G){this.h=arguments,this.g?this.i=!0:pt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(R){le.call(this),this.h=R,this.g={}}m(vn,le);var Ur=[];function Li(R){D(R.g,function(G,Q){this.g.hasOwnProperty(Q)&&kn(G)},R),R.g={}}vn.prototype.N=function(){vn.aa.N.call(this),Li(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var un=s.JSON.stringify,dr=s.JSON.parse,wi=class{stringify(R){return s.JSON.stringify(R,void 0)}parse(R){return s.JSON.parse(R,void 0)}};function ze(){}ze.prototype.h=null;function rr(R){return R.h||(R.h=R.i())}function ji(){}var Ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fi(){ee.call(this,"d")}m(Fi,ee);function Co(){ee.call(this,"c")}m(Co,ee);var ae={},ce=null;function ge(){return ce=ce||new Ae}ae.La="serverreachability";function Me(R){ee.call(this,ae.La,R)}m(Me,ee);function it(R){const G=ge();je(G,new Me(G))}ae.STAT_EVENT="statevent";function xt(R,G){ee.call(this,ae.STAT_EVENT,R),this.stat=G}m(xt,ee);function Pt(R){const G=ge();je(G,new xt(G,R))}ae.Ma="timingevent";function gt(R,G){ee.call(this,ae.Ma,R),this.size=G}m(gt,ee);function Nt(R,G){if(typeof R!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){R()},G)}function Tt(){this.g=!0}Tt.prototype.xa=function(){this.g=!1};function qt(R,G,Q,se,Ee,Ne){R.info(function(){if(R.g)if(Ne)for(var ht="",lr=Ne.split("&"),Ra=0;Ra<lr.length;Ra++){var Kn=lr[Ra].split("=");if(1<Kn.length){var Ya=Kn[0];Kn=Kn[1];var Ki=Ya.split("_");ht=2<=Ki.length&&Ki[1]=="type"?ht+(Ya+"="+Kn+"&"):ht+(Ya+"=redacted&")}}else ht=null;else ht=Ne;return"XMLHTTP REQ ("+se+") [attempt "+Ee+"]: "+G+`
`+Q+`
`+ht})}function Hn(R,G,Q,se,Ee,Ne,ht){R.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+Ee+"]: "+G+`
`+Q+`
`+Ne+" "+ht})}function di(R,G,Q,se){R.info(function(){return"XMLHTTP TEXT ("+G+"): "+Fe(R,Q)+(se?" "+se:"")})}function Ce(R,G){R.info(function(){return"TIMEOUT: "+G})}Tt.prototype.info=function(){};function Fe(R,G){if(!R.g)return G;if(!G)return null;try{var Q=JSON.parse(G);if(Q){for(R=0;R<Q.length;R++)if(Array.isArray(Q[R])){var se=Q[R];if(!(2>se.length)){var Ee=se[1];if(Array.isArray(Ee)&&!(1>Ee.length)){var Ne=Ee[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var ht=1;ht<Ee.length;ht++)Ee[ht]=""}}}}return un(Q)}catch{return G}}var Qe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ot;function wt(){}m(wt,ze),wt.prototype.g=function(){return new XMLHttpRequest},wt.prototype.i=function(){return{}},ot=new wt;function mt(R,G,Q,se){this.j=R,this.i=G,this.l=Q,this.R=se||1,this.U=new vn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kt}function Kt(){this.i=null,this.g="",this.h=!1}var Sn={},sn={};function Xt(R,G,Q){R.L=1,R.v=Xf(Ga(G)),R.m=Q,R.P=!0,jn(R,null)}function jn(R,G){R.F=Date.now(),ri(R),R.A=Ga(R.v);var Q=R.A,se=R.R;Array.isArray(se)||(se=[String(se)]),em(Q.i,"t",se),R.C=0,Q=R.j.J,R.h=new Kt,R.g=g_(R.j,Q?G:null,!R.m),0<R.O&&(R.M=new Rr(h(R.Y,R,R.g),R.O)),G=R.U,Q=R.g,se=R.ca;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(Ur[0]=Ee.toString()),Ee=Ur);for(var Ne=0;Ne<Ee.length;Ne++){var ht=we(Q,Ee[Ne],se||G.handleEvent,!1,G.h||G);if(!ht)break;G.g[ht.key]=ht}G=R.H?P(R.H):{},R.m?(R.u||(R.u="POST"),G["Content-Type"]="application/x-www-form-urlencoded",R.g.ea(R.A,R.u,R.m,G)):(R.u="GET",R.g.ea(R.A,R.u,null,G)),it(),qt(R.i,R.u,R.A,R.l,R.R,R.m)}mt.prototype.ca=function(R){R=R.target;const G=this.M;G&&Pl(R)==3?G.j():this.Y(R)},mt.prototype.Y=function(R){try{if(R==this.g)e:{const Ki=Pl(this.g);var G=this.g.Ba();const el=this.g.Z();if(!(3>Ki)&&(Ki!=3||this.g&&(this.h.h||this.g.oa()||jy(this.g)))){this.J||Ki!=4||G==7||(G==8||0>=el?it(3):it(2)),_a(this);var Q=this.g.Z();this.X=Q;t:if(ni(this)){var se=jy(this.g);R="";var Ee=se.length,Ne=Pl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qt(this),$i(this);var ht="";break t}this.h.i=new s.TextDecoder}for(G=0;G<Ee;G++)this.h.h=!0,R+=this.h.i.decode(se[G],{stream:!(Ne&&G==Ee-1)});se.length=0,this.h.g+=R,this.C=0,ht=this.h.g}else ht=this.g.oa();if(this.o=Q==200,Hn(this.i,this.u,this.A,this.l,this.R,Ki,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var lr,Ra=this.g;if((lr=Ra.g?Ra.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(lr)){var Kn=lr;break t}}Kn=null}if(Q=Kn)di(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pa(this,Q);else{this.o=!1,this.s=3,Pt(12),Qt(this),$i(this);break e}}if(this.P){Q=!0;let co;for(;!this.J&&this.C<ht.length;)if(co=Lt(this,ht),co==sn){Ki==4&&(this.s=4,Pt(14),Q=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(co==Sn){this.s=4,Pt(15),di(this.i,this.l,ht,"[Invalid Chunk]"),Q=!1;break}else di(this.i,this.l,co,null),Pa(this,co);if(ni(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ki!=4||ht.length!=0||this.h.h||(this.s=1,Pt(16),Q=!1),this.o=this.o&&Q,!Q)di(this.i,this.l,ht,"[Invalid Chunked Response]"),Qt(this),$i(this);else if(0<ht.length&&!this.W){this.W=!0;var Ya=this.j;Ya.g==this&&Ya.ba&&!Ya.M&&(Ya.j.info("Great, no buffering proxy detected. Bytes received: "+ht.length),Jf(Ya),Ya.M=!0,Pt(11))}}else di(this.i,this.l,ht,null),Pa(this,ht);Ki==4&&Qt(this),this.o&&!this.J&&(Ki==4?Wa(this.j,this):(this.o=!1,ri(this)))}else Qc(this.g),Q==400&&0<ht.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),Qt(this),$i(this)}}}catch{}finally{}};function ni(R){return R.g?R.u=="GET"&&R.L!=2&&R.j.Ca:!1}function Lt(R,G){var Q=R.C,se=G.indexOf(`
`,Q);return se==-1?sn:(Q=Number(G.substring(Q,se)),isNaN(Q)?Sn:(se+=1,se+Q>G.length?sn:(G=G.slice(se,se+Q),R.C=se+Q,G)))}mt.prototype.cancel=function(){this.J=!0,Qt(this)};function ri(R){R.S=Date.now()+R.I,Bn(R,R.I)}function Bn(R,G){if(R.B!=null)throw Error("WatchDog timer not null");R.B=Nt(h(R.ba,R),G)}function _a(R){R.B&&(s.clearTimeout(R.B),R.B=null)}mt.prototype.ba=function(){this.B=null;const R=Date.now();0<=R-this.S?(Ce(this.i,this.A),this.L!=2&&(it(),Pt(17)),Qt(this),this.s=2,$i(this)):Bn(this,this.S-R)};function $i(R){R.j.G==0||R.J||Wa(R.j,R)}function Qt(R){_a(R);var G=R.M;G&&typeof G.ma=="function"&&G.ma(),R.M=null,Li(R.U),R.g&&(G=R.g,R.g=null,G.abort(),G.ma())}function Pa(R,G){try{var Q=R.j;if(Q.G!=0&&(Q.g==R||kl(Q.h,R))){if(!R.K&&kl(Q.h,R)&&Q.G==3){try{var se=Q.Da.g.parse(G)}catch{se=null}if(Array.isArray(se)&&se.length==3){var Ee=se;if(Ee[0]==0){e:if(!Q.u){if(Q.g)if(Q.g.F+3e3<R.F)ep(Q),im(Q);else break e;$y(Q),Pt(18)}}else Q.za=Ee[1],0<Q.za-Q.T&&37500>Ee[2]&&Q.F&&Q.v==0&&!Q.C&&(Q.C=Nt(h(Q.Za,Q),6e3));if(1>=Qg(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else eu(Q,11)}else if((R.K||Q.g==R)&&ep(Q),!_(G))for(Ee=Q.Da.g.parse(G),G=0;G<Ee.length;G++){let Kn=Ee[G];if(Q.T=Kn[0],Kn=Kn[1],Q.G==2)if(Kn[0]=="c"){Q.K=Kn[1],Q.ia=Kn[2];const Ya=Kn[3];Ya!=null&&(Q.la=Ya,Q.j.info("VER="+Q.la));const Ki=Kn[4];Ki!=null&&(Q.Aa=Ki,Q.j.info("SVER="+Q.Aa));const el=Kn[5];el!=null&&typeof el=="number"&&0<el&&(se=1.5*el,Q.L=se,Q.j.info("backChannelRequestTimeoutMs_="+se)),se=Q;const co=R.g;if(co){const pc=co.g?co.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pc){var Ne=se.h;Ne.g||pc.indexOf("spdy")==-1&&pc.indexOf("quic")==-1&&pc.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(Wf(Ne,Ne.h),Ne.h=null))}if(se.D){const By=co.g?co.g.getResponseHeader("X-HTTP-Session-Id"):null;By&&(se.ya=By,Kr(se.I,se.D,By))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-R.F,Q.j.info("Handshake RTT: "+Q.R+"ms")),se=Q;var ht=R;if(se.qa=p_(se,se.J?se.ia:null,se.W),ht.K){qa(se.h,ht);var lr=ht,Ra=se.L;Ra&&(lr.I=Ra),lr.B&&(_a(lr),ri(lr)),se.g=ht}else Ct(se);0<Q.i.length&&ad(Q)}else Kn[0]!="stop"&&Kn[0]!="close"||eu(Q,7);else Q.G==3&&(Kn[0]=="stop"||Kn[0]=="close"?Kn[0]=="stop"?eu(Q,7):Fy(Q):Kn[0]!="noop"&&Q.l&&Q.l.ta(Kn),Q.v=0)}}it(4)}catch{}}var ph=class{constructor(R,G){this.g=R,this.map=G}};function sa(R){this.l=R||10,s.PerformanceNavigationTiming?(R=s.performance.getEntriesByType("navigation"),R=0<R.length&&(R[0].nextHopProtocol=="hq"||R[0].nextHopProtocol=="h2")):R=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=R?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ra(R){return R.h?!0:R.g?R.g.size>=R.j:!1}function Qg(R){return R.h?1:R.g?R.g.size:0}function kl(R,G){return R.h?R.h==G:R.g?R.g.has(G):!1}function Wf(R,G){R.g?R.g.add(G):R.h=G}function qa(R,G){R.h&&R.h==G?R.h=null:R.g&&R.g.has(G)&&R.g.delete(G)}sa.prototype.cancel=function(){if(this.i=Yf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const R of this.g.values())R.cancel();this.g.clear()}};function Yf(R){if(R.h!=null)return R.i.concat(R.h.D);if(R.g!=null&&R.g.size!==0){let G=R.i;for(const Q of R.g.values())G=G.concat(Q.D);return G}return v(R.i)}function Ry(R){if(R.V&&typeof R.V=="function")return R.V();if(typeof Map<"u"&&R instanceof Map||typeof Set<"u"&&R instanceof Set)return Array.from(R.values());if(typeof R=="string")return R.split("");if(l(R)){for(var G=[],Q=R.length,se=0;se<Q;se++)G.push(R[se]);return G}G=[],Q=0;for(se in R)G[Q++]=R[se];return G}function gh(R){if(R.na&&typeof R.na=="function")return R.na();if(!R.V||typeof R.V!="function"){if(typeof Map<"u"&&R instanceof Map)return Array.from(R.keys());if(!(typeof Set<"u"&&R instanceof Set)){if(l(R)||typeof R=="string"){var G=[];R=R.length;for(var Q=0;Q<R;Q++)G.push(Q);return G}G=[],Q=0;for(const se in R)G[Q++]=se;return G}}}function Ny(R,G){if(R.forEach&&typeof R.forEach=="function")R.forEach(G,void 0);else if(l(R)||typeof R=="string")Array.prototype.forEach.call(R,G,void 0);else for(var Q=gh(R),se=Ry(R),Ee=se.length,Ne=0;Ne<Ee;Ne++)G.call(void 0,se[Ne],Q&&Q[Ne],R)}var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kf(R,G){if(R){R=R.split("&");for(var Q=0;Q<R.length;Q++){var se=R[Q].indexOf("="),Ee=null;if(0<=se){var Ne=R[Q].substring(0,se);Ee=R[Q].substring(se+1)}else Ne=R[Q];G(Ne,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function la(R){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,R instanceof la){this.h=R.h,mh(this,R.j),this.o=R.o,this.g=R.g,rd(this,R.s),this.l=R.l;var G=R.i,Q=new ys;Q.i=G.i,G.g&&(Q.g=new Map(G.g),Q.h=G.h),Ko(this,Q),this.m=R.m}else R&&(G=String(R).match(Xs))?(this.h=!1,mh(this,G[1]||"",!0),this.o=Zs(G[2]||""),this.g=Zs(G[3]||"",!0),rd(this,G[4]),this.l=Zs(G[5]||"",!0),Ko(this,G[6]||"",!0),this.m=Zs(G[7]||"")):(this.h=!1,this.i=new ys(null,this.h))}la.prototype.toString=function(){var R=[],G=this.j;G&&R.push(Oa(G,Jg,!0),":");var Q=this.g;return(Q||G=="file")&&(R.push("//"),(G=this.o)&&R.push(Oa(G,Jg,!0),"@"),R.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Q=this.s,Q!=null&&R.push(":",String(Q))),(Q=this.l)&&(this.g&&Q.charAt(0)!="/"&&R.push("/"),R.push(Oa(Q,Q.charAt(0)=="/"?c_:vh,!0))),(Q=this.i.toString())&&R.push("?",Q),(Q=this.m)&&R.push("#",Oa(Q,yh)),R.join("")};function Ga(R){return new la(R)}function mh(R,G,Q){R.j=Q?Zs(G,!0):G,R.j&&(R.j=R.j.replace(/:$/,""))}function rd(R,G){if(G){if(G=Number(G),isNaN(G)||0>G)throw Error("Bad port number "+G);R.s=G}else R.s=null}function Ko(R,G,Q){G instanceof ys?(R.i=G,d_(R.i,R.h)):(Q||(G=Oa(G,u_)),R.i=new ys(G,R.h))}function Kr(R,G,Q){R.i.set(G,Q)}function Xf(R){return Kr(R,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),R}function Zs(R,G){return R?G?decodeURI(R.replace(/%25/g,"%2525")):decodeURIComponent(R):""}function Oa(R,G,Q){return typeof R=="string"?(R=encodeURI(R).replace(G,sc),Q&&(R=R.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R):null}function sc(R){return R=R.charCodeAt(0),"%"+(R>>4&15).toString(16)+(R&15).toString(16)}var Jg=/[#\/\?@]/g,vh=/[#\?:]/g,c_=/[#\?]/g,u_=/[#\?@]/g,yh=/#/g;function ys(R,G){this.h=this.g=null,this.i=R||null,this.j=!!G}function Qs(R){R.g||(R.g=new Map,R.h=0,R.i&&Kf(R.i,function(G,Q){R.add(decodeURIComponent(G.replace(/\+/g," ")),Q)}))}n=ys.prototype,n.add=function(R,G){Qs(this),this.i=null,R=bs(this,R);var Q=this.g.get(R);return Q||this.g.set(R,Q=[]),Q.push(G),this.h+=1,this};function Do(R,G){Qs(R),G=bs(R,G),R.g.has(G)&&(R.i=null,R.h-=R.g.get(G).length,R.g.delete(G))}function Il(R,G){return Qs(R),G=bs(R,G),R.g.has(G)}n.forEach=function(R,G){Qs(this),this.g.forEach(function(Q,se){Q.forEach(function(Ee){R.call(G,Ee,se,this)},this)},this)},n.na=function(){Qs(this);const R=Array.from(this.g.values()),G=Array.from(this.g.keys()),Q=[];for(let se=0;se<G.length;se++){const Ee=R[se];for(let Ne=0;Ne<Ee.length;Ne++)Q.push(G[se])}return Q},n.V=function(R){Qs(this);let G=[];if(typeof R=="string")Il(this,R)&&(G=G.concat(this.g.get(bs(this,R))));else{R=Array.from(this.g.values());for(let Q=0;Q<R.length;Q++)G=G.concat(R[Q])}return G},n.set=function(R,G){return Qs(this),this.i=null,R=bs(this,R),Il(this,R)&&(this.h-=this.g.get(R).length),this.g.set(R,[G]),this.h+=1,this},n.get=function(R,G){return R?(R=this.V(R),0<R.length?String(R[0]):G):G};function em(R,G,Q){Do(R,G),0<Q.length&&(R.i=null,R.g.set(bs(R,G),v(Q)),R.h+=Q.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const R=[],G=Array.from(this.g.keys());for(var Q=0;Q<G.length;Q++){var se=G[Q];const Ne=encodeURIComponent(String(se)),ht=this.V(se);for(se=0;se<ht.length;se++){var Ee=Ne;ht[se]!==""&&(Ee+="="+encodeURIComponent(String(ht[se]))),R.push(Ee)}}return this.i=R.join("&")};function bs(R,G){return G=String(G),R.j&&(G=G.toLowerCase()),G}function d_(R,G){G&&!R.j&&(Qs(R),R.i=null,R.g.forEach(function(Q,se){var Ee=se.toLowerCase();se!=Ee&&(Do(this,se),em(this,Ee,Q))},R)),R.j=G}function Zf(R,G){const Q=new Tt;if(s.Image){const se=new Image;se.onload=f(so,Q,"TestLoadImage: loaded",!0,G,se),se.onerror=f(so,Q,"TestLoadImage: error",!1,G,se),se.onabort=f(so,Q,"TestLoadImage: abort",!1,G,se),se.ontimeout=f(so,Q,"TestLoadImage: timeout",!1,G,se),s.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=R}else G(!1)}function lc(R,G){const Q=new Tt,se=new AbortController,Ee=setTimeout(()=>{se.abort(),so(Q,"TestPingServer: timeout",!1,G)},1e4);fetch(R,{signal:se.signal}).then(Ne=>{clearTimeout(Ee),Ne.ok?so(Q,"TestPingServer: ok",!0,G):so(Q,"TestPingServer: server error",!1,G)}).catch(()=>{clearTimeout(Ee),so(Q,"TestPingServer: error",!1,G)})}function so(R,G,Q,se,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),se(Q)}catch{}}function ws(){this.g=new wi}function Ml(R,G,Q){const se=Q||"";try{Ny(R,function(Ee,Ne){let ht=Ee;c(Ee)&&(ht=un(Ee)),G.push(se+Ne+"="+encodeURIComponent(ht))})}catch(Ee){throw G.push(se+"type="+encodeURIComponent("_badmap")),Ee}}function cc(R){this.l=R.Ub||null,this.j=R.eb||!1}m(cc,ze),cc.prototype.g=function(){return new uc(this.l,this.j)},cc.prototype.i=function(R){return function(){return R}}({});function uc(R,G){Ae.call(this),this.D=R,this.o=G,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(uc,Ae),n=uc.prototype,n.open=function(R,G){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=R,this.A=G,this.readyState=1,Xc(this)},n.send=function(R){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const G={headers:this.u,method:this.B,credentials:this.m,cache:void 0};R&&(G.body=R),(this.D||s).fetch(new Request(this.A,G)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dc(this)),this.readyState=0},n.Sa=function(R){if(this.g&&(this.l=R,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=R.headers,this.readyState=2,Xc(this)),this.g&&(this.readyState=3,Xc(this),this.g)))if(this.responseType==="arraybuffer")R.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in R){if(this.j=R.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qf(this)}else R.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qf(R){R.j.read().then(R.Pa.bind(R)).catch(R.ga.bind(R))}n.Pa=function(R){if(this.g){if(this.o&&R.value)this.response.push(R.value);else if(!this.o){var G=R.value?R.value:new Uint8Array(0);(G=this.v.decode(G,{stream:!R.done}))&&(this.response=this.responseText+=G)}R.done?dc(this):Xc(this),this.readyState==3&&Qf(this)}},n.Ra=function(R){this.g&&(this.response=this.responseText=R,dc(this))},n.Qa=function(R){this.g&&(this.response=R,dc(this))},n.ga=function(){this.g&&dc(this)};function dc(R){R.readyState=4,R.l=null,R.j=null,R.v=null,Xc(R)}n.setRequestHeader=function(R,G){this.u.append(R,G)},n.getResponseHeader=function(R){return this.h&&this.h.get(R.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const R=[],G=this.h.entries();for(var Q=G.next();!Q.done;)Q=Q.value,R.push(Q[0]+": "+Q[1]),Q=G.next();return R.join(`\r
`)};function Xc(R){R.onreadystatechange&&R.onreadystatechange.call(R)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(R){this.m=R?"include":"same-origin"}});function tm(R){let G="";return D(R,function(Q,se){G+=se,G+=":",G+=Q,G+=`\r
`}),G}function ca(R,G,Q){e:{for(se in Q){var se=!1;break e}se=!0}se||(Q=tm(Q),typeof R=="string"?Q!=null&&encodeURIComponent(String(Q)):Kr(R,G,Q))}function pr(R){Ae.call(this),this.headers=new Map,this.o=R||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(pr,Ae);var Zc=/^https?$/i,id=["POST","PUT"];n=pr.prototype,n.Ha=function(R){this.J=R},n.ea=function(R,G,Q,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+R);G=G?G.toUpperCase():"GET",this.D=R,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ot.g(),this.v=this.o?rr(this.o):rr(ot),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(G,String(R),!0),this.B=!1}catch(Ne){Ly(this,Ne);return}if(R=Q||"",Q=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var Ee in se)Q.set(Ee,se[Ee]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const Ne of se.keys())Q.set(Ne,se.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(Q.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),Ee=s.FormData&&R instanceof s.FormData,!(0<=Array.prototype.indexOf.call(id,G,void 0))||se||Ee||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,ht]of Q)this.g.setRequestHeader(Ne,ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wh(this),this.u=!0,this.g.send(R),this.u=!1}catch(Ne){Ly(this,Ne)}};function Ly(R,G){R.h=!1,R.g&&(R.j=!0,R.g.abort(),R.j=!1),R.l=G,R.m=5,nm(R),Js(R)}function nm(R){R.A||(R.A=!0,je(R,"complete"),je(R,"error"))}n.abort=function(R){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=R||7,je(this,"complete"),je(this,"abort"),Js(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Js(this,!0)),pr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bh(this):this.bb())},n.bb=function(){bh(this)};function bh(R){if(R.h&&typeof o<"u"&&(!R.v[1]||Pl(R)!=4||R.Z()!=2)){if(R.u&&Pl(R)==4)Et(R.Ea,0,R);else if(je(R,"readystatechange"),Pl(R)==4){R.h=!1;try{const ht=R.Z();e:switch(ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var G=!0;break e;default:G=!1}var Q;if(!(Q=G)){var se;if(se=ht===0){var Ee=String(R.D).match(Xs)[1]||null;!Ee&&s.self&&s.self.location&&(Ee=s.self.location.protocol.slice(0,-1)),se=!Zc.test(Ee?Ee.toLowerCase():"")}Q=se}if(Q)je(R,"complete"),je(R,"success");else{R.m=6;try{var Ne=2<Pl(R)?R.g.statusText:""}catch{Ne=""}R.l=Ne+" ["+R.Z()+"]",nm(R)}}finally{Js(R)}}}}function Js(R,G){if(R.g){wh(R);const Q=R.g,se=R.v[0]?()=>{}:null;R.g=null,R.v=null,G||je(R,"ready");try{Q.onreadystatechange=se}catch{}}}function wh(R){R.I&&(s.clearTimeout(R.I),R.I=null)}n.isActive=function(){return!!this.g};function Pl(R){return R.g?R.g.readyState:0}n.Z=function(){try{return 2<Pl(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(R){if(this.g){var G=this.g.responseText;return R&&G.indexOf(R)==0&&(G=G.substring(R.length)),dr(G)}};function jy(R){try{if(!R.g)return null;if("response"in R.g)return R.g.response;switch(R.H){case"":case"text":return R.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in R.g)return R.g.mozResponseArrayBuffer}return null}catch{return null}}function Qc(R){const G={};R=(R.g&&2<=Pl(R)&&R.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<R.length;se++){if(_(R[se]))continue;var Q=L(R[se]);const Ee=Q[0];if(Q=Q[1],typeof Q!="string")continue;Q=Q.trim();const Ne=G[Ee]||[];G[Ee]=Ne,Ne.push(Q)}M(G,function(se){return se.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hc(R,G,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[R]||G}function rm(R){this.Aa=0,this.i=[],this.j=new Tt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hc("failFast",!1,R),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hc("baseRetryDelayMs",5e3,R),this.cb=hc("retryDelaySeedMs",1e4,R),this.Wa=hc("forwardChannelMaxRetries",2,R),this.wa=hc("forwardChannelRequestTimeoutMs",2e4,R),this.pa=R&&R.xmlHttpFactory||void 0,this.Xa=R&&R.Tb||void 0,this.Ca=R&&R.useFetchStreams||!1,this.L=void 0,this.J=R&&R.supportsCrossDomainXhr||!1,this.K="",this.h=new sa(R&&R.concurrentRequestLimit),this.Da=new ws,this.P=R&&R.fastHandshake||!1,this.O=R&&R.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=R&&R.Rb||!1,R&&R.xa&&this.j.xa(),R&&R.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&R&&R.detectBufferingProxy||!1,this.ja=void 0,R&&R.longPollingTimeout&&0<R.longPollingTimeout&&(this.ja=R.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rm.prototype,n.la=8,n.G=1,n.connect=function(R,G,Q,se){Pt(0),this.W=R,this.H=G||{},Q&&se!==void 0&&(this.H.OSID=Q,this.H.OAID=se),this.F=this.X,this.I=p_(this,null,this.W),ad(this)};function Fy(R){if(h_(R),R.G==3){var G=R.U++,Q=Ga(R.I);if(Kr(Q,"SID",R.K),Kr(Q,"RID",G),Kr(Q,"TYPE","terminate"),Jc(R,Q),G=new mt(R,R.j,G),G.L=2,G.v=Xf(Ga(Q)),Q=!1,s.navigator&&s.navigator.sendBeacon)try{Q=s.navigator.sendBeacon(G.v.toString(),"")}catch{}!Q&&s.Image&&(new Image().src=G.v,Q=!0),Q||(G.g=g_(G.j,null),G.g.ea(G.v)),G.F=Date.now(),ri(G)}f_(R)}function im(R){R.g&&(Jf(R),R.g.cancel(),R.g=null)}function h_(R){im(R),R.u&&(s.clearTimeout(R.u),R.u=null),ep(R),R.h.cancel(),R.s&&(typeof R.s=="number"&&s.clearTimeout(R.s),R.s=null)}function ad(R){if(!ra(R.h)&&!R.s){R.s=!0;var G=R.Ga;X||z(),te||(X(),te=!0),re.add(G,R),R.B=0}}function gn(R,G){return Qg(R.h)>=R.h.j-(R.s?1:0)?!1:R.s?(R.i=G.D.concat(R.i),!0):R.G==1||R.G==2||R.B>=(R.Va?0:R.Wa)?!1:(R.s=Nt(h(R.Ga,R,G),fc(R,R.B)),R.B++,!0)}n.Ga=function(R){if(this.s)if(this.s=null,this.G==1){if(!R){this.U=Math.floor(1e5*Math.random()),R=this.U++;const Ee=new mt(this,this.j,R);let Ne=this.o;if(this.S&&(Ne?(Ne=P(Ne),j(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(Ee.H=Ne,Ne=null),this.P)e:{for(var G=0,Q=0;Q<this.i.length;Q++){t:{var se=this.i[Q];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(G+=se,4096<G){G=Q;break e}if(G===4096||Q===this.i.length-1){G=Q+1;break e}}G=1e3}else G=1e3;G=gr(this,Ee,G),Q=Ga(this.I),Kr(Q,"RID",R),Kr(Q,"CVER",22),this.D&&Kr(Q,"X-HTTP-Session-Id",this.D),Jc(this,Q),Ne&&(this.O?G="headers="+encodeURIComponent(String(tm(Ne)))+"&"+G:this.m&&ca(Q,this.m,Ne)),Wf(this.h,Ee),this.Ua&&Kr(Q,"TYPE","init"),this.P?(Kr(Q,"$req",G),Kr(Q,"SID","null"),Ee.T=!0,Xt(Ee,Q,null)):Xt(Ee,Q,G),this.G=2}}else this.G==3&&(R?_h(this,R):this.i.length==0||ra(this.h)||_h(this))};function _h(R,G){var Q;G?Q=G.l:Q=R.U++;const se=Ga(R.I);Kr(se,"SID",R.K),Kr(se,"RID",Q),Kr(se,"AID",R.T),Jc(R,se),R.m&&R.o&&ca(se,R.m,R.o),Q=new mt(R,R.j,Q,R.B+1),R.m===null&&(Q.H=R.o),G&&(R.i=G.D.concat(R.i)),G=gr(R,Q,1e3),Q.I=Math.round(.5*R.wa)+Math.round(.5*R.wa*Math.random()),Wf(R.h,Q),Xt(Q,se,G)}function Jc(R,G){R.H&&D(R.H,function(Q,se){Kr(G,se,Q)}),R.l&&Ny({},function(Q,se){Kr(G,se,Q)})}function gr(R,G,Q){Q=Math.min(R.i.length,Q);var se=R.l?h(R.l.Na,R.l,R):null;e:{var Ee=R.i;let Ne=-1;for(;;){const ht=["count="+Q];Ne==-1?0<Q?(Ne=Ee[0].g,ht.push("ofs="+Ne)):Ne=0:ht.push("ofs="+Ne);let lr=!0;for(let Ra=0;Ra<Q;Ra++){let Kn=Ee[Ra].g;const Ya=Ee[Ra].map;if(Kn-=Ne,0>Kn)Ne=Math.max(0,Ee[Ra].g-100),lr=!1;else try{Ml(Ya,ht,"req"+Kn+"_")}catch{se&&se(Ya)}}if(lr){se=ht.join("&");break e}}}return R=R.i.splice(0,Q),G.D=R,se}function Ct(R){if(!R.g&&!R.u){R.Y=1;var G=R.Fa;X||z(),te||(X(),te=!0),re.add(G,R),R.v=0}}function $y(R){return R.g||R.u||3<=R.v?!1:(R.Y++,R.u=Nt(h(R.Fa,R),fc(R,R.v)),R.v++,!0)}n.Fa=function(){if(this.u=null,Ii(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var R=2*this.R;this.j.info("BP detection timer enabled: "+R),this.A=Nt(h(this.ab,this),R)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),im(this),Ii(this))};function Jf(R){R.A!=null&&(s.clearTimeout(R.A),R.A=null)}function Ii(R){R.g=new mt(R,R.j,"rpc",R.Y),R.m===null&&(R.g.H=R.o),R.g.O=0;var G=Ga(R.qa);Kr(G,"RID","rpc"),Kr(G,"SID",R.K),Kr(G,"AID",R.T),Kr(G,"CI",R.F?"0":"1"),!R.F&&R.ja&&Kr(G,"TO",R.ja),Kr(G,"TYPE","xmlhttp"),Jc(R,G),R.m&&R.o&&ca(G,R.m,R.o),R.L&&(R.g.I=R.L);var Q=R.g;R=R.ia,Q.L=1,Q.v=Xf(Ga(G)),Q.m=null,Q.P=!0,jn(Q,R)}n.Za=function(){this.C!=null&&(this.C=null,im(this),$y(this),Pt(19))};function ep(R){R.C!=null&&(s.clearTimeout(R.C),R.C=null)}function Wa(R,G){var Q=null;if(R.g==G){ep(R),Jf(R),R.g=null;var se=2}else if(kl(R.h,G))Q=G.D,qa(R.h,G),se=1;else return;if(R.G!=0){if(G.o)if(se==1){Q=G.m?G.m.length:0,G=Date.now()-G.F;var Ee=R.B;se=ge(),je(se,new gt(se,Q)),ad(R)}else Ct(R);else if(Ee=G.s,Ee==3||Ee==0&&0<G.X||!(se==1&&gn(R,G)||se==2&&$y(R)))switch(Q&&0<Q.length&&(G=R.h,G.i=G.i.concat(Q)),Ee){case 1:eu(R,5);break;case 4:eu(R,10);break;case 3:eu(R,6);break;default:eu(R,2)}}}function fc(R,G){let Q=R.Ta+Math.floor(Math.random()*R.cb);return R.isActive()||(Q*=2),Q*G}function eu(R,G){if(R.j.info("Error code "+G),G==2){var Q=h(R.fb,R),se=R.Xa;const Ee=!se;se=new la(se||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||mh(se,"https"),Xf(se),Ee?Zf(se.toString(),Q):lc(se.toString(),Q)}else Pt(2);R.G=0,R.l&&R.l.sa(G),f_(R),h_(R)}n.fb=function(R){R?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function f_(R){if(R.G=0,R.ka=[],R.l){const G=Yf(R.h);(G.length!=0||R.i.length!=0)&&(y(R.ka,G),y(R.ka,R.i),R.h.i.length=0,v(R.i),R.i.length=0),R.l.ra()}}function p_(R,G,Q){var se=Q instanceof la?Ga(Q):new la(Q);if(se.g!="")G&&(se.g=G+"."+se.g),rd(se,se.s);else{var Ee=s.location;se=Ee.protocol,G=G?G+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;var Ne=new la(null);se&&mh(Ne,se),G&&(Ne.g=G),Ee&&rd(Ne,Ee),Q&&(Ne.l=Q),se=Ne}return Q=R.D,G=R.ya,Q&&G&&Kr(se,Q,G),Kr(se,"VER",R.la),Jc(R,se),se}function g_(R,G,Q){if(G&&!R.J)throw Error("Can't create secondary domain capable XhrIo object.");return G=R.Ca&&!R.pa?new pr(new cc({eb:Q})):new pr(R.pa),G.Ha(R.J),G}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function am(){}n=am.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function om(){}om.prototype.g=function(R,G){return new lo(R,G)};function lo(R,G){Ae.call(this),this.g=new rm(G),this.l=R,this.h=G&&G.messageUrlParams||null,R=G&&G.messageHeaders||null,G&&G.clientProtocolHeaderRequired&&(R?R["X-Client-Protocol"]="webchannel":R={"X-Client-Protocol":"webchannel"}),this.g.o=R,R=G&&G.initMessageHeaders||null,G&&G.messageContentType&&(R?R["X-WebChannel-Content-Type"]=G.messageContentType:R={"X-WebChannel-Content-Type":G.messageContentType}),G&&G.va&&(R?R["X-WebChannel-Client-Profile"]=G.va:R={"X-WebChannel-Client-Profile":G.va}),this.g.S=R,(R=G&&G.Sb)&&!_(R)&&(this.g.m=R),this.v=G&&G.supportsCrossDomainXhr||!1,this.u=G&&G.sendRawJson||!1,(G=G&&G.httpSessionIdParam)&&!_(G)&&(this.g.D=G,R=this.h,R!==null&&G in R&&(R=this.h,G in R&&delete R[G])),this.j=new tu(this)}m(lo,Ae),lo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lo.prototype.close=function(){Fy(this.g)},lo.prototype.o=function(R){var G=this.g;if(typeof R=="string"){var Q={};Q.__data__=R,R=Q}else this.u&&(Q={},Q.__data__=un(R),R=Q);G.i.push(new ph(G.Ya++,R)),G.G==3&&ad(G)},lo.prototype.N=function(){this.g.l=null,delete this.j,Fy(this.g),delete this.g,lo.aa.N.call(this)};function m_(R){Fi.call(this),R.__headers__&&(this.headers=R.__headers__,this.statusCode=R.__status__,delete R.__headers__,delete R.__status__);var G=R.__sm__;if(G){e:{for(const Q in G){R=Q;break e}R=void 0}(this.i=R)&&(R=this.i,G=G!==null&&R in G?G[R]:void 0),this.data=G}else this.data=R}m(m_,Fi);function v_(){Co.call(this),this.status=1}m(v_,Co);function tu(R){this.g=R}m(tu,am),tu.prototype.ua=function(){je(this.g,"a")},tu.prototype.ta=function(R){je(this.g,new m_(R))},tu.prototype.sa=function(R){je(this.g,new v_)},tu.prototype.ra=function(){je(this.g,"b")},om.prototype.createWebChannel=om.prototype.g,lo.prototype.send=lo.prototype.o,lo.prototype.open=lo.prototype.m,lo.prototype.close=lo.prototype.close,sme=function(){return new om},ome=function(){return ge()},ame=ae,mz={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qe.NO_ERROR=0,Qe.TIMEOUT=8,Qe.HTTP_ERROR=6,_O=Qe,vt.COMPLETE="complete",ime=vt,ji.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,CC=ji,pr.prototype.listenOnce=pr.prototype.L,pr.prototype.getLastError=pr.prototype.Ka,pr.prototype.getLastErrorCode=pr.prototype.Ba,pr.prototype.getStatus=pr.prototype.Z,pr.prototype.getResponseJson=pr.prototype.Oa,pr.prototype.getResponseText=pr.prototype.oa,pr.prototype.send=pr.prototype.ea,pr.prototype.setWithCredentials=pr.prototype.Ha,rme=pr}).apply(typeof DM<"u"?DM:typeof self<"u"?self:typeof window<"u"?window:{});const xZ="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fs=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Fs.UNAUTHENTICATED=new Fs(null),Fs.GOOGLE_CREDENTIALS=new Fs("google-credentials-uid"),Fs.FIRST_PARTY=new Fs("first-party-uid"),Fs.MOCK_USER=new Fs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dT="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new EI("@firebase/firestore");function kA(){return Sw.logLevel}function Gt(n,...e){if(Sw.logLevel<=Tr.DEBUG){const t=e.map(r7);Sw.debug(`Firestore (${dT}): ${n}`,...t)}}function Tg(n,...e){if(Sw.logLevel<=Tr.ERROR){const t=e.map(r7);Sw.error(`Firestore (${dT}): ${n}`,...t)}}function b1(n,...e){if(Sw.logLevel<=Tr.WARN){const t=e.map(r7);Sw.warn(`Firestore (${dT}): ${n}`,...t)}}function r7(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(n="Unexpected state"){const e=`FIRESTORE (${dT}) INTERNAL ASSERTION FAILED: `+n;throw Tg(e),new Error(e)}function yi(n,e){n||$n()}function Wn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends us{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lme{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TPe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fs.UNAUTHENTICATED))}shutdown(){}}class EPe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class APe{constructor(e){this.t=e,this.currentUser=Fs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yi(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let a=new ug;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ug,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},s=l=>{Gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>s(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?s(l):(Gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ug)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yi(typeof r.accessToken=="string"),new lme(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yi(e===null||typeof e=="string"),new Fs(e)}}class CPe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Fs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class DPe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new CPe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Fs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kPe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IPe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){yi(this.o===void 0);const r=a=>{a.error!=null&&Gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Gt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yi(typeof t.token=="string"),this.R=t.token,new kPe(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MPe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cme{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=MPe(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function qr(n,e){return n<e?-1:n>e?1:0}function w1(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new It(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new It(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new It(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ci.fromMillis(Date.now())}static fromDate(e){return ci.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ci(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qr(this.nanoseconds,e.nanoseconds):qr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gn(e)}static min(){return new Gn(new ci(0,0))}static max(){return new Gn(new ci(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t,r){t===void 0?t=0:t>e.length&&$n(),r===void 0?r=e.length-t:r>e.length-t&&$n(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return GD.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof GD?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),o=t.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ta extends GD{construct(e,t,r){return new ta(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new It(Ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ta(t)}static emptyPath(){return new ta([])}}const PPe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ls extends GD{construct(e,t,r){return new ls(e,t,r)}static isValidIdentifier(e){return PPe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ls.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ls(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new It(Ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new It(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new It(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new It(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ls(t)}static emptyPath(){return new ls([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.path=e}static fromPath(e){return new cn(ta.fromString(e))}static fromName(e){return new cn(ta.fromString(e).popFirst(5))}static empty(){return new cn(ta.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ta.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ta.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cn(new ta(e.slice()))}}function OPe(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Gn.fromTimestamp(r===1e9?new ci(t+1,0):new ci(t,r));return new ay(i,cn.empty(),e)}function RPe(n){return new ay(n.readTime,n.key,-1)}class ay{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ay(Gn.min(),cn.empty(),-1)}static max(){return new ay(Gn.max(),cn.empty(),-1)}}function NPe(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=cn.comparator(n.documentKey,e.documentKey),t!==0?t:qr(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LPe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jPe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AI(n){if(n.code!==Ke.FAILED_PRECONDITION||n.message!==LPe)throw n;Gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$n(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):et.reject(t)}static resolve(e){return new et((t,r)=>{t(e)})}static reject(e){return new et((t,r)=>{r(e)})}static waitFor(e){return new et((t,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&t()},l=>r(l))}),o=!0,a===i&&t()})}static or(e){let t=et.resolve(!1);for(const r of e)t=t.next(i=>i?et.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new et((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let l=0;l<a;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++s,s===a&&r(o)},u=>i(u))}})}static doWhile(e,t){return new et((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function FPe(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function CI(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}i7.oe=-1;function BL(n){return n==null}function fR(n){return n===0&&1/n==-1/0}function $Pe(n){return typeof n=="number"&&Number.isInteger(n)&&!fR(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SZ(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qw(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ume(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.comparator=e,this.root=t||os.EMPTY}insert(e,t){return new ba(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,os.BLACK,null,null))}remove(e){return new ba(this.comparator,this.root.remove(e,this.comparator).copy(null,null,os.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kM(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kM(this.root,e,this.comparator,!1)}getReverseIterator(){return new kM(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kM(this.root,e,this.comparator,!0)}}class kM{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class os{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??os.RED,this.left=i??os.EMPTY,this.right=a??os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new os(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return os.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $n();const e=this.left.check();if(e!==this.right.check())throw $n();return e+(this.isRed()?0:1)}}os.EMPTY=null,os.RED=!0,os.BLACK=!1;os.EMPTY=new class{constructor(){this.size=0}get key(){throw $n()}get value(){throw $n()}get color(){throw $n()}get left(){throw $n()}get right(){throw $n()}copy(e,t,r,i,a){return this}insert(e,t,r){return new os(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.comparator=e,this.data=new ba(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TZ(this.data.getIterator())}getIteratorFrom(e){return new TZ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ds)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ds(this.comparator);return t.data=e,t}}class TZ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.fields=e,e.sort(ls.comparator)}static empty(){return new Uc([])}unionWith(e){let t=new ds(ls.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Uc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return w1(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dme extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new dme("Invalid base64 string: "+a):a}}(e);return new fs(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new fs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fs.EMPTY_BYTE_STRING=new fs("");const BPe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oy(n){if(yi(!!n),typeof n=="string"){let e=0;const t=BPe.exec(n);if(yi(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$a(n.seconds),nanos:$a(n.nanos)}}function $a(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Tw(n){return typeof n=="string"?fs.fromBase64String(n):fs.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a7(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function o7(n){const e=n.mapValue.fields.__previous_value__;return a7(e)?o7(e):e}function WD(n){const e=oy(n.mapValue.fields.__local_write_time__.timestampValue);return new ci(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UPe{constructor(e,t,r,i,a,o,s,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=c}}class YD{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new YD("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof YD&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM={mapValue:{}};function Ew(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?a7(n)?4:zPe(n)?9007199254740991:VPe(n)?10:11:$n()}function kf(n,e){if(n===e)return!0;const t=Ew(n);if(t!==Ew(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return WD(n).isEqual(WD(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=oy(i.timestampValue),s=oy(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Tw(i.bytesValue).isEqual(Tw(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return $a(i.geoPointValue.latitude)===$a(a.geoPointValue.latitude)&&$a(i.geoPointValue.longitude)===$a(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return $a(i.integerValue)===$a(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=$a(i.doubleValue),s=$a(a.doubleValue);return o===s?fR(o)===fR(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return w1(n.arrayValue.values||[],e.arrayValue.values||[],kf);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(SZ(o)!==SZ(s))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(s[l]===void 0||!kf(o[l],s[l])))return!1;return!0}(n,e);default:return $n()}}function KD(n,e){return(n.values||[]).find(t=>kf(t,e))!==void 0}function _1(n,e){if(n===e)return 0;const t=Ew(n),r=Ew(e);if(t!==r)return qr(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qr(n.booleanValue,e.booleanValue);case 2:return function(a,o){const s=$a(a.integerValue||a.doubleValue),l=$a(o.integerValue||o.doubleValue);return s<l?-1:s>l?1:s===l?0:isNaN(s)?isNaN(l)?0:-1:1}(n,e);case 3:return EZ(n.timestampValue,e.timestampValue);case 4:return EZ(WD(n),WD(e));case 5:return qr(n.stringValue,e.stringValue);case 6:return function(a,o){const s=Tw(a),l=Tw(o);return s.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),l=o.split("/");for(let c=0;c<s.length&&c<l.length;c++){const u=qr(s[c],l[c]);if(u!==0)return u}return qr(s.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const s=qr($a(a.latitude),$a(o.latitude));return s!==0?s:qr($a(a.longitude),$a(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return AZ(n.arrayValue,e.arrayValue);case 10:return function(a,o){var s,l,c,u;const d=a.fields||{},h=o.fields||{},f=(s=d.value)===null||s===void 0?void 0:s.arrayValue,m=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=qr(((c=f==null?void 0:f.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:AZ(f,m)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===IM.mapValue&&o===IM.mapValue)return 0;if(a===IM.mapValue)return 1;if(o===IM.mapValue)return-1;const s=a.fields||{},l=Object.keys(s),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=qr(l[d],u[d]);if(h!==0)return h;const f=_1(s[l[d]],c[u[d]]);if(f!==0)return f}return qr(l.length,u.length)}(n.mapValue,e.mapValue);default:throw $n()}}function EZ(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qr(n,e);const t=oy(n),r=oy(e),i=qr(t.seconds,r.seconds);return i!==0?i:qr(t.nanos,r.nanos)}function AZ(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=_1(t[i],r[i]);if(a)return a}return qr(t.length,r.length)}function x1(n){return vz(n)}function vz(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=oy(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Tw(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return cn.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=vz(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${vz(t.fields[o])}`;return i+"}"}(n.mapValue):$n()}function CZ(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yz(n){return!!n&&"integerValue"in n}function s7(n){return!!n&&"arrayValue"in n}function DZ(n){return!!n&&"nullValue"in n}function kZ(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xO(n){return!!n&&"mapValue"in n}function VPe(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function nD(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return qw(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=nD(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nD(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zPe(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.value=e}static empty(){return new Zl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xO(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nD(t)}setAll(e){let t=ls.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!t.isImmediateParentOf(s)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=s.popLast()}o?r[s.lastSegment()]=nD(o):i.push(s.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());xO(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xO(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qw(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Zl(nD(this.value))}}function hme(n){const e=[];return qw(n.fields,(t,r)=>{const i=new ls([t]);if(xO(r)){const a=hme(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Uc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t,r,i,a,o,s){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Us(e,0,Gn.min(),Gn.min(),Gn.min(),Zl.empty(),0)}static newFoundDocument(e,t,r,i){return new Us(e,1,t,Gn.min(),r,i,0)}static newNoDocument(e,t){return new Us(e,2,t,Gn.min(),Gn.min(),Zl.empty(),0)}static newUnknownDocument(e,t){return new Us(e,3,t,Gn.min(),Gn.min(),Zl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Us&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Us(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t){this.position=e,this.inclusive=t}}function IZ(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=cn.comparator(cn.fromName(o.referenceValue),t.key):r=_1(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function MZ(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kf(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t="asc"){this.field=e,this.dir=t}}function HPe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fme{}class no extends fme{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new GPe(e,t,r):t==="array-contains"?new KPe(e,r):t==="in"?new XPe(e,r):t==="not-in"?new ZPe(e,r):t==="array-contains-any"?new QPe(e,r):new no(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new WPe(e,r):new YPe(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(_1(t,this.value)):t!==null&&Ew(this.value)===Ew(t)&&this.matchesComparison(_1(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $n()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sh extends fme{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new sh(e,t)}matches(e){return pme(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pme(n){return n.op==="and"}function gme(n){return qPe(n)&&pme(n)}function qPe(n){for(const e of n.filters)if(e instanceof sh)return!1;return!0}function bz(n){if(n instanceof no)return n.field.canonicalString()+n.op.toString()+x1(n.value);if(gme(n))return n.filters.map(e=>bz(e)).join(",");{const e=n.filters.map(t=>bz(t)).join(",");return`${n.op}(${e})`}}function mme(n,e){return n instanceof no?function(r,i){return i instanceof no&&r.op===i.op&&r.field.isEqual(i.field)&&kf(r.value,i.value)}(n,e):n instanceof sh?function(r,i){return i instanceof sh&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&mme(o,i.filters[s]),!0):!1}(n,e):void $n()}function vme(n){return n instanceof no?function(t){return`${t.field.canonicalString()} ${t.op} ${x1(t.value)}`}(n):n instanceof sh?function(t){return t.op.toString()+" {"+t.getFilters().map(vme).join(" ,")+"}"}(n):"Filter"}class GPe extends no{constructor(e,t,r){super(e,t,r),this.key=cn.fromName(r.referenceValue)}matches(e){const t=cn.comparator(e.key,this.key);return this.matchesComparison(t)}}class WPe extends no{constructor(e,t){super(e,"in",t),this.keys=yme("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class YPe extends no{constructor(e,t){super(e,"not-in",t),this.keys=yme("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yme(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>cn.fromName(r.referenceValue))}class KPe extends no{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return s7(t)&&KD(t.arrayValue,this.value)}}class XPe extends no{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&KD(this.value.arrayValue,t)}}class ZPe extends no{constructor(e,t){super(e,"not-in",t)}matches(e){if(KD(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!KD(this.value.arrayValue,t)}}class QPe extends no{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!s7(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>KD(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JPe{constructor(e,t=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ue=null}}function PZ(n,e=null,t=[],r=[],i=null,a=null,o=null){return new JPe(n,e,t,r,i,a,o)}function l7(n){const e=Wn(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bz(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),BL(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>x1(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>x1(r)).join(",")),e.ue=t}return e.ue}function c7(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HPe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mme(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MZ(n.startAt,e.startAt)&&MZ(n.endAt,e.endAt)}function wz(n){return cn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,t=null,r=[],i=[],a=null,o="F",s=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function eOe(n,e,t,r,i,a,o,s){return new hT(n,e,t,r,i,a,o,s)}function UL(n){return new hT(n)}function OZ(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bme(n){return n.collectionGroup!==null}function rD(n){const e=Wn(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new ds(ls.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(s=s.add(c.field))})}),s})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new XD(a,r))}),t.has(ls.keyField().canonicalString())||e.ce.push(new XD(ls.keyField(),r))}return e.ce}function Sf(n){const e=Wn(n);return e.le||(e.le=tOe(e,rD(n))),e.le}function tOe(n,e){if(n.limitType==="F")return PZ(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new XD(i.field,a)});const t=n.endAt?new pR(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pR(n.startAt.position,n.startAt.inclusive):null;return PZ(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _z(n,e){const t=n.filters.concat([e]);return new hT(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gR(n,e,t){return new hT(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function VL(n,e){return c7(Sf(n),Sf(e))&&n.limitType===e.limitType}function wme(n){return`${l7(Sf(n))}|lt:${n.limitType}`}function TS(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>vme(i)).join(", ")}]`),BL(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>x1(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>x1(i)).join(",")),`Target(${r})`}(Sf(n))}; limitType=${n.limitType})`}function zL(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):cn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of rD(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,s,l){const c=IZ(o,s,l);return o.inclusive?c<=0:c<0}(r.startAt,rD(r),i)||r.endAt&&!function(o,s,l){const c=IZ(o,s,l);return o.inclusive?c>=0:c>0}(r.endAt,rD(r),i))}(n,e)}function nOe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _me(n){return(e,t)=>{let r=!1;for(const i of rD(n)){const a=rOe(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function rOe(n,e,t){const r=n.field.isKeyField()?cn.comparator(e.key,t.key):function(a,o,s){const l=o.data.field(a),c=s.data.field(a);return l!==null&&c!==null?_1(l,c):$n()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $n()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qw(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return ume(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iOe=new ba(cn.comparator);function Eg(){return iOe}const xme=new ba(cn.comparator);function DC(...n){let e=xme;for(const t of n)e=e.insert(t.key,t);return e}function Sme(n){let e=xme;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hb(){return iD()}function Tme(){return iD()}function iD(){return new fT(n=>n.toString(),(n,e)=>n.isEqual(e))}const aOe=new ba(cn.comparator),oOe=new ds(cn.comparator);function Ar(...n){let e=oOe;for(const t of n)e=e.add(t);return e}const sOe=new ds(qr);function lOe(){return sOe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fR(e)?"-0":e}}function Eme(n){return{integerValue:""+n}}function Ame(n,e){return $Pe(e)?Eme(e):u7(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this._=void 0}}function cOe(n,e,t){return n instanceof ZD?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&a7(a)&&(a=o7(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(t,e):n instanceof QD?Dme(n,e):n instanceof JD?kme(n,e):function(i,a){const o=Cme(i,a),s=RZ(o)+RZ(i.Pe);return yz(o)&&yz(i.Pe)?Eme(s):u7(i.serializer,s)}(n,e)}function uOe(n,e,t){return n instanceof QD?Dme(n,e):n instanceof JD?kme(n,e):t}function Cme(n,e){return n instanceof ek?function(r){return yz(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class ZD extends HL{}class QD extends HL{constructor(e){super(),this.elements=e}}function Dme(n,e){const t=Ime(e);for(const r of n.elements)t.some(i=>kf(i,r))||t.push(r);return{arrayValue:{values:t}}}class JD extends HL{constructor(e){super(),this.elements=e}}function kme(n,e){let t=Ime(e);for(const r of n.elements)t=t.filter(i=>!kf(i,r));return{arrayValue:{values:t}}}class ek extends HL{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function RZ(n){return $a(n.integerValue||n.doubleValue)}function Ime(n){return s7(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mme{constructor(e,t){this.field=e,this.transform=t}}function dOe(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof QD&&i instanceof QD||r instanceof JD&&i instanceof JD?w1(r.elements,i.elements,kf):r instanceof ek&&i instanceof ek?kf(r.Pe,i.Pe):r instanceof ZD&&i instanceof ZD}(n.transform,e.transform)}class hOe{constructor(e,t){this.version=e,this.transformResults=t}}class bl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bl}static exists(e){return new bl(void 0,e)}static updateTime(e){return new bl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function SO(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qL{}function Pme(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new GL(n.key,bl.none()):new DI(n.key,n.data,bl.none());{const t=n.data,r=Zl.empty();let i=new ds(ls.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new wy(n.key,r,new Uc(i.toArray()),bl.none())}}function fOe(n,e,t){n instanceof DI?function(i,a,o){const s=i.value.clone(),l=LZ(i.fieldTransforms,a,o.transformResults);s.setAll(l),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof wy?function(i,a,o){if(!SO(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=LZ(i.fieldTransforms,a,o.transformResults),l=a.data;l.setAll(Ome(i)),l.setAll(s),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function aD(n,e,t,r){return n instanceof DI?function(a,o,s,l){if(!SO(a.precondition,o))return s;const c=a.value.clone(),u=jZ(a.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof wy?function(a,o,s,l){if(!SO(a.precondition,o))return s;const c=jZ(a.fieldTransforms,l,o),u=o.data;return u.setAll(Ome(a)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(a,o,s){return SO(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(n,e,t)}function pOe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Cme(r.transform,i||null);a!=null&&(t===null&&(t=Zl.empty()),t.set(r.field,a))}return t||null}function NZ(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&w1(r,i,(a,o)=>dOe(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class DI extends qL{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wy extends qL{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Ome(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function LZ(n,e,t){const r=new Map;yi(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,uOe(o,s,t[i]))}return r}function jZ(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,cOe(a,o,e))}return r}class GL extends qL{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gOe extends qL{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mOe{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&fOe(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=aD(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=aD(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Tme();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=t.has(i.key)?null:s;const l=Pme(o,s);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Gn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ar())}isEqual(e){return this.batchId===e.batchId&&w1(this.mutations,e.mutations,(t,r)=>NZ(t,r))&&w1(this.baseMutations,e.baseMutations,(t,r)=>NZ(t,r))}}class d7{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){yi(e.mutations.length===r.length);let i=function(){return aOe}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new d7(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vOe{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yOe{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qa,Or;function bOe(n){switch(n){default:return $n();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}function Rme(n){if(n===void 0)return Tg("GRPC error has no .code"),Ke.UNKNOWN;switch(n){case Qa.OK:return Ke.OK;case Qa.CANCELLED:return Ke.CANCELLED;case Qa.UNKNOWN:return Ke.UNKNOWN;case Qa.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case Qa.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case Qa.INTERNAL:return Ke.INTERNAL;case Qa.UNAVAILABLE:return Ke.UNAVAILABLE;case Qa.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case Qa.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case Qa.NOT_FOUND:return Ke.NOT_FOUND;case Qa.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case Qa.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case Qa.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case Qa.ABORTED:return Ke.ABORTED;case Qa.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case Qa.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case Qa.DATA_LOSS:return Ke.DATA_LOSS;default:return $n()}}(Or=Qa||(Qa={}))[Or.OK=0]="OK",Or[Or.CANCELLED=1]="CANCELLED",Or[Or.UNKNOWN=2]="UNKNOWN",Or[Or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Or[Or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Or[Or.NOT_FOUND=5]="NOT_FOUND",Or[Or.ALREADY_EXISTS=6]="ALREADY_EXISTS",Or[Or.PERMISSION_DENIED=7]="PERMISSION_DENIED",Or[Or.UNAUTHENTICATED=16]="UNAUTHENTICATED",Or[Or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Or[Or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Or[Or.ABORTED=10]="ABORTED",Or[Or.OUT_OF_RANGE=11]="OUT_OF_RANGE",Or[Or.UNIMPLEMENTED=12]="UNIMPLEMENTED",Or[Or.INTERNAL=13]="INTERNAL",Or[Or.UNAVAILABLE=14]="UNAVAILABLE",Or[Or.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wOe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Oe=new ow([4294967295,4294967295],0);function FZ(n){const e=wOe().encode(n),t=new nme;return t.update(e),new Uint8Array(t.digest())}function $Z(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ow([t,r],0),new ow([i,a],0)]}class h7{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new kC(`Invalid padding: ${t}`);if(r<0)throw new kC(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kC(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new kC(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ow.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ow.fromNumber(r)));return i.compare(_Oe)===1&&(i=new ow([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=FZ(e),[r,i]=$Z(t);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new h7(a,i,t);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.Ie===0)return;const t=FZ(e),[r,i]=$Z(t);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class kC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,kI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new WL(Gn.min(),i,new ba(qr),Eg(),Ar())}}class kI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kI(r,t,Ar(),Ar(),Ar())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Nme{constructor(e,t){this.targetId=e,this.me=t}}class Lme{constructor(e,t,r=fs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class BZ{constructor(){this.fe=0,this.ge=VZ(),this.pe=fs.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ar(),t=Ar(),r=Ar();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$n()}}),new kI(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=VZ()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,yi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xOe{constructor(e){this.Le=e,this.Be=new Map,this.ke=Eg(),this.qe=UZ(),this.Qe=new ba(qr)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:$n()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const a=i.target;if(wz(a))if(r===0){const o=new cn(a.path);this.Ue(t,o,Us.newNoDocument(o,Gn.min()))}else yi(r===1);else{const o=this.Ye(t);if(o!==r){const s=this.Ze(e),l=s?this.Xe(s,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,s;try{o=Tw(r).toUint8Array()}catch(l){if(l instanceof dme)return b1("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new h7(o,i,a)}catch(l){return b1(l instanceof kC?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return s.Ie===0?null:s}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.Le.tt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,a,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((a,o)=>{const s=this.Je(o);if(s){if(a.current&&wz(s.target)){const l=new cn(s.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Us.newNoDocument(l,e))}a.be&&(t.set(o,a.ve()),a.Ce())}});let r=Ar();this.qe.forEach((a,o)=>{let s=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new WL(e,t,this.Qe,this.ke,r);return this.ke=Eg(),this.qe=UZ(),this.Qe=new ba(qr),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new BZ,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ds(qr),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Gt("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new BZ),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function UZ(){return new ba(cn.comparator)}function VZ(){return new ba(cn.comparator)}const SOe={asc:"ASCENDING",desc:"DESCENDING"},TOe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EOe={and:"AND",or:"OR"};class AOe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xz(n,e){return n.useProto3Json||BL(e)?e:{value:e}}function mR(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jme(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function COe(n,e){return mR(n,e.toTimestamp())}function Tf(n){return yi(!!n),Gn.fromTimestamp(function(t){const r=oy(t);return new ci(r.seconds,r.nanos)}(n))}function f7(n,e){return Sz(n,e).canonicalString()}function Sz(n,e){const t=function(i){return new ta(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Fme(n){const e=ta.fromString(n);return yi(zme(e)),e}function Tz(n,e){return f7(n.databaseId,e.path)}function kF(n,e){const t=Fme(e);if(t.get(1)!==n.databaseId.projectId)throw new It(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new It(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new cn(Bme(t))}function $me(n,e){return f7(n.databaseId,e)}function DOe(n){const e=Fme(n);return e.length===4?ta.emptyPath():Bme(e)}function Ez(n){return new ta(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Bme(n){return yi(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function zZ(n,e,t){return{name:Tz(n,e),fields:t.value.mapValue.fields}}function kOe(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:$n()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(c,u){return c.useProto3Json?(yi(u===void 0||typeof u=="string"),fs.fromBase64String(u||"")):(yi(u===void 0||u instanceof Buffer||u instanceof Uint8Array),fs.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(c){const u=c.code===void 0?Ke.UNKNOWN:Rme(c.code);return new It(u,c.message||"")}(o);t=new Lme(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kF(n,r.document.name),a=Tf(r.document.updateTime),o=r.document.createTime?Tf(r.document.createTime):Gn.min(),s=new Zl({mapValue:{fields:r.document.fields}}),l=Us.newFoundDocument(i,a,o,s),c=r.targetIds||[],u=r.removedTargetIds||[];t=new TO(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kF(n,r.document),a=r.readTime?Tf(r.readTime):Gn.min(),o=Us.newNoDocument(i,a),s=r.removedTargetIds||[];t=new TO([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kF(n,r.document),a=r.removedTargetIds||[];t=new TO([],a,i,null)}else{if(!("filter"in e))return $n();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new yOe(i,a),s=r.targetId;t=new Nme(s,o)}}return t}function IOe(n,e){let t;if(e instanceof DI)t={update:zZ(n,e.key,e.value)};else if(e instanceof GL)t={delete:Tz(n,e.key)};else if(e instanceof wy)t={update:zZ(n,e.key,e.data),updateMask:$Oe(e.fieldMask)};else{if(!(e instanceof gOe))return $n();t={verify:Tz(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof ZD)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof QD)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof JD)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof ek)return{fieldPath:o.field.canonicalString(),increment:s.Pe};throw $n()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:COe(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:$n()}(n,e.precondition)),t}function MOe(n,e){return n&&n.length>0?(yi(e!==void 0),n.map(t=>function(i,a){let o=i.updateTime?Tf(i.updateTime):Tf(a);return o.isEqual(Gn.min())&&(o=Tf(a)),new hOe(o,i.transformResults||[])}(t,e))):[]}function POe(n,e){return{documents:[$me(n,e.path)]}}function OOe(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$me(n,i);const a=function(c){if(c.length!==0)return Vme(sh.create(c,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:ES(h.field),direction:LOe(h.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=xz(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function ROe(n){let e=DOe(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){yi(r===1);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let a=[];t.where&&(a=function(d){const h=Ume(d);return h instanceof sh&&gme(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(h=>function(m){return new XD(AS(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(t.orderBy));let s=null;t.limit&&(s=function(d){let h;return h=typeof d=="object"?d.value:d,BL(h)?null:h}(t.limit));let l=null;t.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new pR(f,h)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const h=!d.before,f=d.values||[];return new pR(f,h)}(t.endAt)),eOe(e,i,o,a,s,"F",l,c)}function NOe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $n()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ume(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=AS(t.unaryFilter.field);return no.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=AS(t.unaryFilter.field);return no.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=AS(t.unaryFilter.field);return no.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=AS(t.unaryFilter.field);return no.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $n()}}(n):n.fieldFilter!==void 0?function(t){return no.create(AS(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $n()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return sh.create(t.compositeFilter.filters.map(r=>Ume(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $n()}}(t.compositeFilter.op))}(n):$n()}function LOe(n){return SOe[n]}function jOe(n){return TOe[n]}function FOe(n){return EOe[n]}function ES(n){return{fieldPath:n.canonicalString()}}function AS(n){return ls.fromServerFormat(n.fieldPath)}function Vme(n){return n instanceof no?function(t){if(t.op==="=="){if(kZ(t.value))return{unaryFilter:{field:ES(t.field),op:"IS_NAN"}};if(DZ(t.value))return{unaryFilter:{field:ES(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kZ(t.value))return{unaryFilter:{field:ES(t.field),op:"IS_NOT_NAN"}};if(DZ(t.value))return{unaryFilter:{field:ES(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ES(t.field),op:jOe(t.op),value:t.value}}}(n):n instanceof sh?function(t){const r=t.getFilters().map(i=>Vme(i));return r.length===1?r[0]:{compositeFilter:{op:FOe(t.op),filters:r}}}(n):$n()}function $Oe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zme(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,t,r,i,a=Gn.min(),o=Gn.min(),s=fs.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(e){return new Rv(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rv(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BOe{constructor(e){this.ct=e}}function UOe(n){const e=ROe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gR(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VOe{constructor(){this.un=new zOe}addToCollectionParentIndex(e,t){return this.un.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}deleteAllFieldIndexes(e){return et.resolve()}createTargetIndexes(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getIndexType(e,t){return et.resolve(0)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}getMinOffset(e,t){return et.resolve(ay.min())}getMinOffsetFromCollectionGroup(e,t){return et.resolve(ay.min())}updateCollectionGroup(e,t,r){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class zOe{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ds(ta.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ds(ta.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new S1(0)}static kn(){return new S1(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HOe{constructor(){this.changes=new fT(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Us.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?et.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qOe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GOe{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&aD(r.mutation,i,Uc.empty(),ci.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ar()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ar()){const i=Hb();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=DC();return a.forEach((s,l)=>{o=o.insert(s,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Hb();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ar()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{t.set(o,s)})})}computeViews(e,t,r,i){let a=Eg();const o=iD(),s=function(){return iD()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof wy)?a=a.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),aD(u.mutation,c,u.mutation.getFieldMask(),ci.now())):o.set(c.key,Uc.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return s.set(c,new qOe(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),s))}recalculateAndSaveOverlays(e,t){const r=iD();let i=new ba((o,s)=>o-s),a=Ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const s of o)s.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Uc.empty();u=s.applyToLocalView(c,u),r.set(l,u);const d=(i.get(s.batchId)||Ar()).add(l);i=i.insert(s.batchId,d)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const l=s.getNext(),c=l.key,u=l.value,d=Tme();u.forEach(h=>{if(!a.has(h)){const f=Pme(t.get(h),r.get(h));f!==null&&d.set(h,f),a=a.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return et.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return cn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bme(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):et.resolve(Hb());let s=-1,l=a;return o.next(c=>et.forEach(c,(u,d)=>(s<d.largestBatchId&&(s=d.largestBatchId),a.get(u)?et.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,l,c,Ar())).next(u=>({batchId:s,changes:Sme(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cn(t)).next(r=>{let i=DC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=DC();return this.indexManager.getCollectionParents(e,a).next(s=>et.forEach(s,l=>{const c=function(d,h){return new hT(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Us.newInvalidDocument(u)))});let s=DC();return o.forEach((l,c)=>{const u=a.get(l);u!==void 0&&aD(u.mutation,c,Uc.empty(),ci.now()),zL(t,c)&&(s=s.insert(l,c))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WOe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return et.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Tf(i.createTime)}}(t)),et.resolve()}getNamedQuery(e,t){return et.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:UOe(i.bundledQuery),readTime:Tf(i.readTime)}}(t)),et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YOe{constructor(){this.overlays=new ba(cn.comparator),this.Ir=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Hb();return et.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ht(e,t,a)}),et.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),et.resolve()}getOverlaysForCollection(e,t,r){const i=Hb(),a=t.length+1,o=new cn(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const l=s.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return et.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ba((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=a.get(c.largestBatchId);u===null&&(u=Hb(),a=a.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const s=Hb(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>s.set(c,u)),!(s.size()>=i)););return et.resolve(s)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vOe(t,r));let a=this.Ir.get(t);a===void 0&&(a=Ar(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KOe{constructor(){this.sessionToken=fs.EMPTY_BYTE_STRING}getSessionToken(e){return et.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,et.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(){this.Tr=new ds(Bo.Er),this.dr=new ds(Bo.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Bo(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Bo(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new cn(new ta([])),r=new Bo(t,e),i=new Bo(t,e+1),a=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new cn(new ta([])),r=new Bo(t,e),i=new Bo(t,e+1);let a=Ar();return this.dr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new Bo(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Bo{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return cn.comparator(e.key,t.key)||qr(e.wr,t.wr)}static Ar(e,t){return qr(e.wr,t.wr)||cn.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XOe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ds(Bo.Er)}checkEmpty(e){return et.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new mOe(a,t,r,i);this.mutationQueue.push(o);for(const s of i)this.br=this.br.add(new Bo(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return et.resolve(o)}lookupMutationBatch(e,t){return et.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),a=i<0?0:i;return et.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bo(t,0),i=new Bo(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],o=>{const s=this.Dr(o.wr);a.push(s)}),et.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ds(qr);return t.forEach(i=>{const a=new Bo(i,0),o=new Bo(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],s=>{r=r.add(s.wr)})}),et.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;cn.isDocumentKey(a)||(a=a.child(""));const o=new Bo(new cn(a),0);let s=new ds(qr);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(s=s.add(l.wr)),!0)},o),et.resolve(this.Cr(s))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){yi(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return et.forEach(t.mutations,i=>{const a=new Bo(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Bo(t,0),i=this.br.firstAfterOrEqual(r);return et.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,et.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZOe{constructor(e){this.Mr=e,this.docs=function(){return new ba(cn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return et.resolve(r?r.document.mutableCopy():Us.newInvalidDocument(t))}getEntries(e,t){let r=Eg();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Us.newInvalidDocument(i))}),et.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Eg();const o=t.path,s=new cn(o.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||NPe(RPe(u),r)<=0||(i.has(u.key)||zL(t,u))&&(a=a.insert(u.key,u.mutableCopy()))}return et.resolve(a)}getAllFromCollectionGroup(e,t,r,i){$n()}Or(e,t){return et.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new QOe(this)}getSize(e){return et.resolve(this.size)}}class QOe extends HOe{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),et.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JOe{constructor(e){this.persistence=e,this.Nr=new fT(t=>l7(t),c7),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new p7,this.targetCount=0,this.kr=S1.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),et.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new S1(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.Kn(t),et.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Nr.forEach((o,s)=>{s.sequenceNumber<=t&&r.get(s.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),et.waitFor(a).next(()=>i)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return et.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),et.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),et.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),et.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return et.resolve(r)}containsKey(e,t){return et.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eRe{constructor(e,t){this.qr={},this.overlays={},this.Qr=new i7(0),this.Kr=!1,this.Kr=!0,this.$r=new KOe,this.referenceDelegate=e(this),this.Ur=new JOe(this),this.indexManager=new VOe,this.remoteDocumentCache=function(i){return new ZOe(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new BOe(t),this.Gr=new WOe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YOe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new XOe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Gt("MemoryPersistence","Starting transaction:",e);const i=new tRe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,t){return et.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class tRe extends jPe{constructor(e){super(),this.currentSequenceNumber=e}}class g7{constructor(e){this.persistence=e,this.Jr=new p7,this.Yr=null}static Zr(e){return new g7(e)}get Xr(){if(this.Yr)return this.Yr;throw $n()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),et.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),et.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Xr,r=>{const i=cn.fromPath(r);return this.ei(e,i).next(a=>{a||t.removeEntry(i,Gn.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return et.or([()=>et.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ar(),i=Ar();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new m7(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nRe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rRe{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return nMe()?8:FPe(ao())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.Yi(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new nRe;return this.Xi(e,t,o).next(s=>{if(a.result=s,this.zi)return this.es(e,t,o,s.size)})}).next(()=>a.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(kA()<=Tr.DEBUG&&Gt("QueryEngine","SDK will not create cache indexes for query:",TS(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),et.resolve()):(kA()<=Tr.DEBUG&&Gt("QueryEngine","Query:",TS(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(kA()<=Tr.DEBUG&&Gt("QueryEngine","The SDK decides to create cache indexes for query:",TS(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sf(t))):et.resolve())}Yi(e,t){if(OZ(t))return et.resolve(null);let r=Sf(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=gR(t,null,"F"),r=Sf(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Ar(...a);return this.Ji.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,s);return this.ns(t,c,o,l.readTime)?this.Yi(e,gR(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return OZ(t)||i.isEqual(Gn.min())?et.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(t,a);return this.ns(t,o,r,i)?et.resolve(null):(kA()<=Tr.DEBUG&&Gt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),TS(t)),this.rs(e,o,t,OPe(i,-1)).next(s=>s))})}ts(e,t){let r=new ds(_me(e));return t.forEach((i,a)=>{zL(e,a)&&(r=r.add(a))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,t,r){return kA()<=Tr.DEBUG&&Gt("QueryEngine","Using full collection scan to execute query:",TS(t)),this.Ji.getDocumentsMatchingQuery(e,t,ay.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iRe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ba(qr),this._s=new fT(a=>l7(a),c7),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GOe(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function aRe(n,e,t,r){return new iRe(n,e,t,r)}async function Hme(n,e){const t=Wn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let l=Ar();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of a){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:s}))})})}function oRe(n,e){const t=Wn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(s,l,c,u){const d=c.batch,h=d.keys();let f=et.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(l,m)).next(v=>{const y=c.docVersions.get(m);yi(y!==null),v.version.compareTo(y)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),f.next(()=>s.mutationQueue.removeMutationBatch(l,d))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let l=Ar();for(let c=0;c<s.mutationResults.length;++c)s.mutationResults[c].transformResults.length>0&&(l=l.add(s.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function qme(n){const e=Wn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function sRe(n,e){const t=Wn(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const s=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;s.push(t.Ur.removeMatchingKeys(a,u.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(a,u.addedDocuments,d)));let f=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(fs.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(v,y,w){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,u)&&s.push(t.Ur.updateTargetData(a,f))});let l=Eg(),c=Ar();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&s.push(t.persistence.referenceDelegate.updateLimboDocument(a,u))}),s.push(lRe(a,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(Gn.min())){const u=t.Ur.getLastRemoteSnapshotVersion(a).next(d=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(u)}return et.waitFor(s).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,l,c)).next(()=>l)}).then(a=>(t.os=i,a))}function lRe(n,e,t){let r=Ar(),i=Ar();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=Eg();return t.forEach((s,l)=>{const c=a.get(s);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(s)),l.isNoDocument()&&l.version.isEqual(Gn.min())?(e.removeEntry(s,l.readTime),o=o.insert(s,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(s,l)):Gt("LocalStore","Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function cRe(n,e){const t=Wn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uRe(n,e){const t=Wn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(a=>a?(i=a,et.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Rv(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Az(n,e,t){const r=Wn(n),i=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!CI(o))throw o;Gt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function HZ(n,e,t){const r=Wn(n);let i=Gn.min(),a=Ar();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Wn(l),h=d._s.get(u);return h!==void 0?et.resolve(d.os.get(h)):d.Ur.getTargetData(c,u)}(r,o,Sf(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,s.targetId).next(l=>{a=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Gn.min(),t?a:Ar())).next(s=>(dRe(r,nOe(e),s),{documents:s,Ts:a})))}function dRe(n,e,t){let r=n.us.get(e)||Gn.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.us.set(e,r)}class qZ{constructor(){this.activeTargetIds=lOe()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hRe{constructor(){this.so=new qZ,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qZ,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fRe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GZ{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Gt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Gt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MM=null;function IF(){return MM===null?MM=function(){return 268435456+Math.round(2147483648*Math.random())}():MM++,"0x"+MM.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pRe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gRe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="WebChannelConnection";class mRe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(t,r,i,a,o){const s=IF(),l=this.xo(t,r.toUriEncodedString());Gt("RestConnection",`Sending RPC '${t}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,a,o),this.No(t,l,c,i).then(u=>(Gt("RestConnection",`Received RPC '${t}' ${s}: `,u),u),u=>{throw b1("RestConnection",`RPC '${t}' ${s} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,a,o,s){return this.Mo(t,r,i,a,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dT}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>t[o]=a),i&&i.headers.forEach((a,o)=>t[o]=a)}xo(t,r){const i=pRe[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const a=IF();return new Promise((o,s)=>{const l=new rme;l.setWithCredentials(!0),l.listenOnce(ime.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _O.NO_ERROR:const u=l.getResponseJson();Gt(Ms,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(u)),o(u);break;case _O.TIMEOUT:Gt(Ms,`RPC '${e}' ${a} timed out`),s(new It(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case _O.HTTP_ERROR:const d=l.getStatus();if(Gt(Ms,`RPC '${e}' ${a} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(w)>=0?w:Ke.UNKNOWN}(f.status);s(new It(m,f.message))}else s(new It(Ke.UNKNOWN,"Server responded with status "+l.getStatus()))}else s(new It(Ke.UNAVAILABLE,"Connection failed."));break;default:$n()}}finally{Gt(Ms,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(i);Gt(Ms,`RPC '${e}' ${a} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=IF(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sme(),s=ome(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=a.join("");Gt(Ms,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,f=!1;const m=new gRe({Io:y=>{f?Gt(Ms,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(Gt(Ms,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Gt(Ms,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},To:()=>d.close()}),v=(y,w,_)=>{y.listen(w,S=>{try{_(S)}catch(A){setTimeout(()=>{throw A},0)}})};return v(d,CC.EventType.OPEN,()=>{f||(Gt(Ms,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),v(d,CC.EventType.CLOSE,()=>{f||(f=!0,Gt(Ms,`RPC '${e}' stream ${i} transport closed`),m.So())}),v(d,CC.EventType.ERROR,y=>{f||(f=!0,b1(Ms,`RPC '${e}' stream ${i} transport errored:`,y),m.So(new It(Ke.UNAVAILABLE,"The operation could not be completed")))}),v(d,CC.EventType.MESSAGE,y=>{var w;if(!f){const _=y.data[0];yi(!!_);const S=_,A=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(A){Gt(Ms,`RPC '${e}' stream ${i} received error:`,A);const C=A.status;let D=function(O){const j=Qa[O];if(j!==void 0)return Rme(j)}(C),M=A.message;D===void 0&&(D=Ke.INTERNAL,M="Unknown error status: "+C+" with message "+A.message),f=!0,m.So(new It(D,M)),d.close()}else Gt(Ms,`RPC '${e}' stream ${i} received:`,_),m.bo(_)}}),v(s,ame.STAT_EVENT,y=>{y.stat===mz.PROXY?Gt(Ms,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===mz.NOPROXY&&Gt(Ms,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function MF(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(n){return new AOe(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gme{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Gt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wme{constructor(e,t,r,i,a,o,s,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gme(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Ke.RESOURCE_EXHAUSTED?(Tg(t.toString()),Tg("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new It(Ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Gt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Gt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vRe extends Wme{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=kOe(this.serializer,e),r=function(a){if(!("targetChange"in a))return Gn.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Gn.min():o.readTime?Tf(o.readTime):Gn.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Ez(this.serializer),t.addTarget=function(a,o){let s;const l=o.target;if(s=wz(l)?{documents:POe(a,l)}:{query:OOe(a,l)._t},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=jme(a,o.resumeToken);const c=xz(a,o.expectedCount);c!==null&&(s.expectedCount=c)}else if(o.snapshotVersion.compareTo(Gn.min())>0){s.readTime=mR(a,o.snapshotVersion.toTimestamp());const c=xz(a,o.expectedCount);c!==null&&(s.expectedCount=c)}return s}(this.serializer,e);const r=NOe(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Ez(this.serializer),t.removeTarget=e,this.a_(t)}}class yRe extends Wme{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return yi(!!e.streamToken),this.lastStreamToken=e.streamToken,yi(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){yi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=MOe(e.writeResults,e.commitTime),r=Tf(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Ez(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>IOe(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bRe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new It(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Sz(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new It(Ke.UNKNOWN,a.toString())})}Lo(e,t,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Lo(e,Sz(t,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new It(Ke.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class wRe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tg(t),this.D_=!1):Gt("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Re{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Gw(this)&&(Gt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Wn(l);c.L_.add(4),await II(c),c.q_.set("Unknown"),c.L_.delete(4),await KL(c)}(this))})}),this.q_=new wRe(r,i)}}async function KL(n){if(Gw(n))for(const e of n.B_)await e(!0)}async function II(n){for(const e of n.B_)await e(!1)}function Yme(n,e){const t=Wn(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),w7(t)?b7(t):pT(t).r_()&&y7(t,e))}function v7(n,e){const t=Wn(n),r=pT(t);t.N_.delete(e),r.r_()&&Kme(t,e),t.N_.size===0&&(r.r_()?r.o_():Gw(t)&&t.q_.set("Unknown"))}function y7(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pT(n).A_(e)}function Kme(n,e){n.Q_.xe(e),pT(n).R_(e)}function b7(n){n.Q_=new xOe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),pT(n).start(),n.q_.v_()}function w7(n){return Gw(n)&&!pT(n).n_()&&n.N_.size>0}function Gw(n){return Wn(n).L_.size===0}function Xme(n){n.Q_=void 0}async function xRe(n){n.q_.set("Online")}async function SRe(n){n.N_.forEach((e,t)=>{y7(n,e)})}async function TRe(n,e){Xme(n),w7(n)?(n.q_.M_(e),b7(n)):n.q_.set("Unknown")}async function ERe(n,e,t){if(n.q_.set("Online"),e instanceof Lme&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.N_.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.N_.delete(s),i.Q_.removeTarget(s))}(n,e)}catch(r){Gt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vR(n,r)}else if(e instanceof TO?n.Q_.Ke(e):e instanceof Nme?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Gn.min()))try{const r=await qme(n.localStore);t.compareTo(r)>=0&&await function(a,o){const s=a.Q_.rt(o);return s.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=a.N_.get(c);u&&a.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),s.targetMismatches.forEach((l,c)=>{const u=a.N_.get(l);if(!u)return;a.N_.set(l,u.withResumeToken(fs.EMPTY_BYTE_STRING,u.snapshotVersion)),Kme(a,l);const d=new Rv(u.target,l,c,u.sequenceNumber);y7(a,d)}),a.remoteSyncer.applyRemoteEvent(s)}(n,t)}catch(r){Gt("RemoteStore","Failed to raise snapshot:",r),await vR(n,r)}}async function vR(n,e,t){if(!CI(e))throw e;n.L_.add(1),await II(n),n.q_.set("Offline"),t||(t=()=>qme(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Gt("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await KL(n)})}function Zme(n,e){return e().catch(t=>vR(n,t,e))}async function XL(n){const e=Wn(n),t=sy(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ARe(e);)try{const i=await cRe(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,CRe(e,i)}catch(i){await vR(e,i)}Qme(e)&&Jme(e)}function ARe(n){return Gw(n)&&n.O_.length<10}function CRe(n,e){n.O_.push(e);const t=sy(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Qme(n){return Gw(n)&&!sy(n).n_()&&n.O_.length>0}function Jme(n){sy(n).start()}async function DRe(n){sy(n).p_()}async function kRe(n){const e=sy(n);for(const t of n.O_)e.m_(t.mutations)}async function IRe(n,e,t){const r=n.O_.shift(),i=d7.from(r,e,t);await Zme(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await XL(n)}async function MRe(n,e){e&&sy(n).V_&&await async function(r,i){if(function(o){return bOe(o)&&o!==Ke.ABORTED}(i.code)){const a=r.O_.shift();sy(r).s_(),await Zme(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await XL(r)}}(n,e),Qme(n)&&Jme(n)}async function WZ(n,e){const t=Wn(n);t.asyncQueue.verifyOperationInProgress(),Gt("RemoteStore","RemoteStore received new credentials");const r=Gw(t);t.L_.add(3),await II(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await KL(t)}async function PRe(n,e){const t=Wn(n);e?(t.L_.delete(2),await KL(t)):e||(t.L_.add(2),await II(t),t.q_.set("Unknown"))}function pT(n){return n.K_||(n.K_=function(t,r,i){const a=Wn(t);return a.w_(),new vRe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Eo:xRe.bind(null,n),Ro:SRe.bind(null,n),mo:TRe.bind(null,n),d_:ERe.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),w7(n)?b7(n):n.q_.set("Unknown")):(await n.K_.stop(),Xme(n))})),n.K_}function sy(n){return n.U_||(n.U_=function(t,r,i){const a=Wn(t);return a.w_(),new yRe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DRe.bind(null,n),mo:MRe.bind(null,n),f_:kRe.bind(null,n),g_:IRe.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await XL(n)):(await n.U_.stop(),n.O_.length>0&&(Gt("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ug,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,s=new _7(e,t,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new It(Ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x7(n,e){if(Tg("AsyncQueue",`${e}: ${n}`),CI(n))return new It(Ke.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.comparator=e?(t,r)=>e(t,r)||cn.comparator(t.key,r.key):(t,r)=>cn.comparator(t.key,r.key),this.keyedMap=DC(),this.sortedSet=new ba(this.comparator)}static emptySet(e){return new WS(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof WS)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new WS;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZ{constructor(){this.W_=new ba(cn.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):$n():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class T1{constructor(e,t,r,i,a,o,s,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(s=>{o.push({type:0,doc:s})}),new T1(e,t,WS.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&VL(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ORe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class RRe{constructor(){this.queries=KZ(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Wn(t),a=i.queries;i.queries=KZ(),a.forEach((o,s)=>{for(const l of s.j_)l.onError(r)})})(this,new It(Ke.ABORTED,"Firestore shutting down"))}}function KZ(){return new fT(n=>wme(n),VL)}async function S7(n,e){const t=Wn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new ORe,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(i,!0);break;case 1:a.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const s=x7(o,`Initialization of query '${TS(e.query)}' failed`);return void e.onError(s)}t.queries.set(i,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&E7(t)}async function T7(n,e){const t=Wn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function NRe(n,e){const t=Wn(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const s of o.j_)s.X_(i)&&(r=!0);o.z_=i}}r&&E7(t)}function LRe(n,e,t){const r=Wn(n),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(t);r.queries.delete(e)}function E7(n){n.Y_.forEach(e=>{e.next()})}var Cz,XZ;(XZ=Cz||(Cz={})).ea="default",XZ.Cache="cache";class A7{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new T1(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=T1.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Cz.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eve{constructor(e){this.key=e}}class tve{constructor(e){this.key=e}}class jRe{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ar(),this.mutatedKeys=Ar(),this.Aa=_me(e),this.Ra=new WS(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new YZ,i=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=zL(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?m!==v&&(r.track({type:3,doc:f}),y=!0):this.ga(h,f)||(r.track({type:2,doc:f}),y=!0,(l&&this.Aa(f,l)>0||c&&this.Aa(f,c)<0)&&(s=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(l||c)&&(s=!0)),y&&(f?(o=o.add(f),a=v?a.add(u):a.delete(u)):(o=o.delete(u),a=a.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),a=a.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:s,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(f,m){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $n()}};return v(f)-v(m)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=i!=null&&i;const s=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new T1(this.query,e.Ra,a,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:s}:{wa:s}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new YZ,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ar(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new tve(r))}),this.da.forEach(r=>{e.has(r)||t.push(new eve(r))}),t}ba(e){this.Ta=e.Ts,this.da=Ar();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return T1.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class FRe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $Re{constructor(e){this.key=e,this.va=!1}}class BRe{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new fT(s=>wme(s),VL),this.Ma=new Map,this.xa=new Set,this.Oa=new ba(cn.comparator),this.Na=new Map,this.La=new p7,this.Ba={},this.ka=new Map,this.qa=S1.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function URe(n,e,t=!0){const r=sve(n);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await nve(r,e,t,!0),i}async function VRe(n,e){const t=sve(n);await nve(t,e,!0,!1)}async function nve(n,e,t,r){const i=await uRe(n.localStore,Sf(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let s;return r&&(s=await zRe(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Yme(n.remoteStore,i),s}async function zRe(n,e,t,r,i){n.Ka=(d,h,f)=>async function(v,y,w,_){let S=y.view.ma(w);S.ns&&(S=await HZ(v.localStore,y.query,!1).then(({documents:M})=>y.view.ma(M,S)));const A=_&&_.targetChanges.get(y.targetId),C=_&&_.targetMismatches.get(y.targetId)!=null,D=y.view.applyChanges(S,v.isPrimaryClient,A,C);return QZ(v,y.targetId,D.wa),D.snapshot}(n,d,h,f);const a=await HZ(n.localStore,e,!0),o=new jRe(e,a.Ts),s=o.ma(a.documents),l=kI.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(s,n.isPrimaryClient,l);QZ(n,t,c.wa);const u=new FRe(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function HRe(n,e,t){const r=Wn(n),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(o=>!VL(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Az(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&v7(r.remoteStore,i.targetId),Dz(r,i.targetId)}).catch(AI)):(Dz(r,i.targetId),await Az(r.localStore,i.targetId,!0))}async function qRe(n,e){const t=Wn(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),v7(t.remoteStore,r.targetId))}async function GRe(n,e,t){const r=JRe(n);try{const i=await function(o,s){const l=Wn(o),c=ci.now(),u=s.reduce((f,m)=>f.add(m.key),Ar());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Eg(),v=Ar();return l.cs.getEntries(f,u).next(y=>{m=y,m.forEach((w,_)=>{_.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,m)).next(y=>{d=y;const w=[];for(const _ of s){const S=pOe(_,d.get(_.key).overlayedDocument);S!=null&&w.push(new wy(_.key,S,hme(S.value.mapValue),bl.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,w,s)}).next(y=>{h=y;const w=y.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(f,y.batchId,w)})}).then(()=>({batchId:h.batchId,changes:Sme(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ba(qr)),c=c.insert(s,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),await MI(r,i.changes),await XL(r.remoteStore)}catch(i){const a=x7(i,"Failed to persist write");t.reject(a)}}async function rve(n,e){const t=Wn(n);try{const r=await sRe(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Na.get(a);o&&(yi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?yi(o.va):i.removedDocuments.size>0&&(yi(o.va),o.va=!1))}),await MI(t,r,e)}catch(r){await AI(r)}}function ZZ(n,e,t){const r=Wn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((a,o)=>{const s=o.view.Z_(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const l=Wn(o);l.onlineState=s;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.j_)h.Z_(s)&&(c=!0)}),c&&E7(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WRe(n,e,t){const r=Wn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new ba(cn.comparator);o=o.insert(a,Us.newNoDocument(a,Gn.min()));const s=Ar().add(a),l=new WL(Gn.min(),new Map,new ba(qr),o,s);await rve(r,l),r.Oa=r.Oa.remove(a),r.Na.delete(e),C7(r)}else await Az(r.localStore,e,!1).then(()=>Dz(r,e,t)).catch(AI)}async function YRe(n,e){const t=Wn(n),r=e.batch.batchId;try{const i=await oRe(t.localStore,e);ave(t,r,null),ive(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await MI(t,i)}catch(i){await AI(i)}}async function KRe(n,e,t){const r=Wn(n);try{const i=await function(o,s){const l=Wn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,s).next(d=>(yi(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,s)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);ave(r,e,t),ive(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await MI(r,i)}catch(i){await AI(i)}}function ive(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ave(n,e,t){const r=Wn(n);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Dz(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||ove(n,r)})}function ove(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(v7(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),C7(n))}function QZ(n,e,t){for(const r of t)r instanceof eve?(n.La.addReference(r.key,e),XRe(n,r)):r instanceof tve?(Gt("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||ove(n,r.key)):$n()}function XRe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Gt("SyncEngine","New document in limbo: "+t),n.xa.add(r),C7(n))}function C7(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new cn(ta.fromString(e)),r=n.qa.next();n.Na.set(r,new $Re(t)),n.Oa=n.Oa.insert(t,r),Yme(n.remoteStore,new Rv(Sf(UL(t.path)),r,"TargetPurposeLimboResolution",i7.oe))}}async function MI(n,e,t){const r=Wn(n),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((s,l)=>{o.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=m7.Wi(l.targetId,c);a.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=Wn(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>et.forEach(c,h=>et.forEach(h.$i,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>et.forEach(h.Ui,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!CI(d))throw d;Gt("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.os.get(h),m=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(m);u.os=u.os.insert(h,v)}}}(r.localStore,a))}async function ZRe(n,e){const t=Wn(n);if(!t.currentUser.isEqual(e)){Gt("SyncEngine","User change. New user:",e.toKey());const r=await Hme(t.localStore,e);t.currentUser=e,function(a,o){a.ka.forEach(s=>{s.forEach(l=>{l.reject(new It(Ke.CANCELLED,o))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await MI(t,r.hs)}}function QRe(n,e){const t=Wn(n),r=t.Na.get(e);if(r&&r.va)return Ar().add(r.key);{let i=Ar();const a=t.Ma.get(e);if(!a)return i;for(const o of a){const s=t.Fa.get(o);i=i.unionWith(s.view.Va)}return i}}function sve(n){const e=Wn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rve.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QRe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WRe.bind(null,e),e.Ca.d_=NRe.bind(null,e.eventManager),e.Ca.$a=LRe.bind(null,e.eventManager),e}function JRe(n){const e=Wn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YRe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KRe.bind(null,e),e}class yR{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=YL(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return aRe(this.persistence,new rRe,e.initialUser,this.serializer)}Ga(e){return new eRe(g7.Zr,this.serializer)}Wa(e){return new hRe}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yR.provider={build:()=>new yR};class kz{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZZ(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZRe.bind(null,this.syncEngine),await PRe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RRe}()}createDatastore(e){const t=YL(e.databaseInfo.databaseId),r=function(a){return new mRe(a)}(e.databaseInfo);return function(a,o,s,l){return new bRe(a,o,s,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,s){return new _Re(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,t=>ZZ(this.syncEngine,t,0),function(){return GZ.D()?new GZ:new fRe}())}createSyncEngine(e,t){return function(i,a,o,s,l,c,u){const d=new BRe(i,a,o,s,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Wn(i);Gt("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await II(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}kz.provider={build:()=>new kz};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Tg("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eNe{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Fs.UNAUTHENTICATED,this.clientId=cme.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Gt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Gt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ug;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=x7(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function PF(n,e){n.asyncQueue.verifyOperationInProgress(),Gt("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Hme(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function JZ(n,e){n.asyncQueue.verifyOperationInProgress();const t=await tNe(n);Gt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>WZ(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>WZ(e.remoteStore,i)),n._onlineComponents=e}async function tNe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Gt("FirestoreClient","Using user provided OfflineComponentProvider");try{await PF(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ke.FAILED_PRECONDITION||i.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;b1("Error using user provided cache. Falling back to memory cache: "+t),await PF(n,new yR)}}else Gt("FirestoreClient","Using default OfflineComponentProvider"),await PF(n,new yR);return n._offlineComponents}async function lve(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Gt("FirestoreClient","Using user provided OnlineComponentProvider"),await JZ(n,n._uninitializedComponentsProvider._online)):(Gt("FirestoreClient","Using default OnlineComponentProvider"),await JZ(n,new kz))),n._onlineComponents}function nNe(n){return lve(n).then(e=>e.syncEngine)}async function bR(n){const e=await lve(n),t=e.eventManager;return t.onListen=URe.bind(null,e.syncEngine),t.onUnlisten=HRe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VRe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qRe.bind(null,e.syncEngine),t}function rNe(n,e,t={}){const r=new ug;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,l,c){const u=new D7({next:h=>{u.Za(),o.enqueueAndForget(()=>T7(a,d));const f=h.docs.has(s);!f&&h.fromCache?c.reject(new It(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&l&&l.source==="server"?c.reject(new It(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new A7(UL(s.path),u,{includeMetadataChanges:!0,_a:!0});return S7(a,d)}(await bR(n),n.asyncQueue,e,t,r)),r.promise}function iNe(n,e,t={}){const r=new ug;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,l,c){const u=new D7({next:h=>{u.Za(),o.enqueueAndForget(()=>T7(a,d)),h.fromCache&&l.source==="server"?c.reject(new It(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new A7(s,u,{includeMetadataChanges:!0,_a:!0});return S7(a,d)}(await bR(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cve(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eQ=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uve(n,e,t){if(!t)throw new It(Ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function aNe(n,e,t,r){if(e===!0&&r===!0)throw new It(Ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tQ(n){if(!cn.isDocumentKey(n))throw new It(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nQ(n){if(cn.isDocumentKey(n))throw new It(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZL(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$n()}function wl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new It(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZL(n);throw new It(Ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function oNe(n,e){if(e<=0)throw new It(Ke.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rQ{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new It(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new It(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aNe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cve((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new It(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new It(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new It(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class QL{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rQ({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new It(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new It(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rQ(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TPe;switch(r.type){case"firstParty":return new DPe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new It(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=eQ.get(t);r&&(Gt("ComponentProvider","Removing Datastore"),eQ.delete(t),r.terminate())}(this),Promise.resolve()}}function sNe(n,e,t,r={}){var i;const a=(n=wl(n,QL))._getSettings(),o=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&b1("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let s,l;if(typeof r.mockUserToken=="string")s=r.mockUserToken,l=Fs.MOCK_USER;else{s=Q2e(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new It(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Fs(c)}n._authCredentials=new EPe(new lme(s,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vg(this.firestore,e,this._query)}}class qs{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qs(this.firestore,e,this._key)}}class Wv extends Vg{constructor(e,t,r){super(e,t,UL(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qs(this.firestore,null,new cn(e))}withConverter(e){return new Wv(this.firestore,e,this._path)}}function wn(n,e,...t){if(n=mn(n),uve("collection","path",e),n instanceof QL){const r=ta.fromString(e,...t);return nQ(r),new Wv(n,null,r)}{if(!(n instanceof qs||n instanceof Wv))throw new It(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ta.fromString(e,...t));return nQ(r),new Wv(n.firestore,null,r)}}function Sr(n,e,...t){if(n=mn(n),arguments.length===1&&(e=cme.newId()),uve("doc","path",e),n instanceof QL){const r=ta.fromString(e,...t);return tQ(r),new qs(n,null,new cn(r))}{if(!(n instanceof qs||n instanceof Wv))throw new It(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ta.fromString(e,...t));return tQ(r),new qs(n.firestore,n instanceof Wv?n.converter:null,new cn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gme(this,"async_queue_retry"),this.Vu=()=>{const r=MF();r&&Gt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=MF();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=MF();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ug;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!CI(e))throw e;Gt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),s}(r);throw Tg("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=_7.createAndSchedule(this,e,t,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&$n()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function aQ(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class If extends QL{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new iQ,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iQ(e),this._firestoreClient=void 0,await e}}}function lNe(n,e){const t=typeof n=="object"?n:$L(),r=typeof n=="string"?n:"(default)",i=Ug(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=X2e("firestore");a&&sNe(i,...a)}return i}function PI(n){if(n._terminated)throw new It(Ke.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cNe(n),n._firestoreClient}function cNe(n){var e,t,r;const i=n._freezeSettings(),a=function(s,l,c,u){return new UPe(s,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,cve(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new eNe(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(s){const l=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this._byteString=e}static fromBase64String(e){try{return new E1(fs.fromBase64String(e))}catch(t){throw new It(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new E1(fs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new It(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ls(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new It(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new It(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qr(this._lat,e._lat)||qr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uNe=/^__.*__$/;class dNe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wy(e,this.data,this.fieldMask,t,this.fieldTransforms):new DI(e,this.data,t,this.fieldTransforms)}}class dve{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hve(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $n()}}class M7{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new M7(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return wR(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(hve(this.Cu)&&uNe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class hNe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||YL(e)}Qu(e,t,r,i=!1){return new M7({Cu:e,methodName:t,qu:r,path:ls.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NI(n){const e=n._freezeSettings(),t=YL(n._databaseId);return new hNe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function P7(n,e,t,r,i,a={}){const o=n.Qu(a.merge||a.mergeFields?2:0,e,t,i);N7("Data must be an object, but it was:",o,r);const s=gve(r,o);let l,c;if(a.merge)l=new Uc(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const u=[];for(const d of a.mergeFields){const h=Iz(e,d,t);if(!o.contains(h))throw new It(Ke.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);vve(u,h)||u.push(h)}l=new Uc(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new dNe(new Zl(s),l,c)}class JL extends RI{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof JL}}class O7 extends RI{_toFieldTransform(e){return new Mme(e.path,new ZD)}isEqual(e){return e instanceof O7}}class R7 extends RI{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new ek(e.serializer,Ame(e.serializer,this.$u));return new Mme(e.path,t)}isEqual(e){return e instanceof R7&&this.$u===e.$u}}function fve(n,e,t,r){const i=n.Qu(1,e,t);N7("Data must be an object, but it was:",i,r);const a=[],o=Zl.empty();qw(r,(l,c)=>{const u=L7(e,l,t);c=mn(c);const d=i.Nu(u);if(c instanceof JL)a.push(u);else{const h=LI(c,d);h!=null&&(a.push(u),o.set(u,h))}});const s=new Uc(a);return new dve(o,s,i.fieldTransforms)}function pve(n,e,t,r,i,a){const o=n.Qu(1,e,t),s=[Iz(e,r,t)],l=[i];if(a.length%2!=0)throw new It(Ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)s.push(Iz(e,a[h])),l.push(a[h+1]);const c=[],u=Zl.empty();for(let h=s.length-1;h>=0;--h)if(!vve(c,s[h])){const f=s[h];let m=l[h];m=mn(m);const v=o.Nu(f);if(m instanceof JL)c.push(f);else{const y=LI(m,v);y!=null&&(c.push(f),u.set(f,y))}}const d=new Uc(c);return new dve(u,d,o.fieldTransforms)}function fNe(n,e,t,r=!1){return LI(t,n.Qu(r?4:3,e))}function LI(n,e){if(mve(n=mn(n)))return N7("Unsupported field value:",e,n),gve(n,e);if(n instanceof RI)return function(r,i){if(!hve(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let l=LI(s,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ame(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ci.fromDate(r);return{timestampValue:mR(i.serializer,a)}}if(r instanceof ci){const a=new ci(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mR(i.serializer,a)}}if(r instanceof k7)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof E1)return{bytesValue:jme(i.serializer,r._byteString)};if(r instanceof qs){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:f7(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof I7)return function(o,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw s.Bu("VectorValues must only contain numeric values.");return u7(s.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ZL(r)}`)}(n,e)}function gve(n,e){const t={};return ume(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qw(n,(r,i)=>{const a=LI(i,e.Mu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function mve(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ci||n instanceof k7||n instanceof E1||n instanceof qs||n instanceof RI||n instanceof I7)}function N7(n,e,t){if(!mve(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=ZL(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Iz(n,e,t){if((e=mn(e))instanceof OI)return e._internalPath;if(typeof e=="string")return L7(n,e);throw wR("Field path arguments must be of type string or ",n,!1,void 0,t)}const pNe=new RegExp("[~\\*/\\[\\]]");function L7(n,e,t){if(e.search(pNe)>=0)throw wR(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new OI(...e.split("."))._internalPath}catch{throw wR(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wR(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;t&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(a||o)&&(l+=" (found",a&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new It(Ke.INVALID_ARGUMENT,s+n+l)}function vve(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yve{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gNe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ej("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gNe extends yve{data(){return super.data()}}function ej(n,e){return typeof e=="string"?L7(n,e):e instanceof OI?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bve(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new It(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class j7{}class F7 extends j7{}function fn(n,e,...t){let r=[];e instanceof j7&&r.push(e),r=r.concat(t),function(a){const o=a.filter(l=>l instanceof $7).length,s=a.filter(l=>l instanceof tj).length;if(o>1||o>0&&s>0)throw new It(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class tj extends F7{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new tj(e,t,r)}_apply(e){const t=this._parse(e);return _ve(e._query,t),new Vg(e.firestore,e.converter,_z(e._query,t))}_parse(e){const t=NI(e.firestore);return function(a,o,s,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new It(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){sQ(d,u);const f=[];for(const m of d)f.push(oQ(l,a,m));h={arrayValue:{values:f}}}else h=oQ(l,a,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||sQ(d,u),h=fNe(s,o,d,u==="in"||u==="not-in");return no.create(c,u,h)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ot(n,e,t){const r=e,i=ej("where",n);return tj._create(i,r,t)}class $7 extends j7{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $7(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:sh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const l of s)_ve(o,l),o=_z(o,l)}(e._query,t),new Vg(e.firestore,e.converter,_z(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class B7 extends F7{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new B7(e,t)}_apply(e){const t=function(i,a,o){if(i.startAt!==null)throw new It(Ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new It(Ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new XD(a,o)}(e._query,this._field,this._direction);return new Vg(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new hT(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function Ua(n,e="asc"){const t=e,r=ej("orderBy",n);return B7._create(r,t)}class U7 extends F7{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new U7(e,t,r)}_apply(e){return new Vg(e.firestore,e.converter,gR(e._query,this._limit,this._limitType))}}function wve(n){return oNe("limit",n),U7._create("limit",n,"F")}function oQ(n,e,t){if(typeof(t=mn(t))=="string"){if(t==="")throw new It(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bme(e)&&t.indexOf("/")!==-1)throw new It(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ta.fromString(t));if(!cn.isDocumentKey(r))throw new It(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CZ(n,new cn(r))}if(t instanceof qs)return CZ(n,t._key);throw new It(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZL(t)}.`)}function sQ(n,e){if(!Array.isArray(n)||n.length===0)throw new It(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _ve(n,e){const t=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new It(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new It(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class mNe{convertValue(e,t="none"){switch(Ew(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $a(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $n()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return qw(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>$a(o.doubleValue));return new I7(a)}convertGeoPoint(e){return new k7($a(e.latitude),$a(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=o7(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(WD(e));default:return null}}convertTimestamp(e){const t=oy(e);return new ci(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ta.fromString(e);yi(zme(r));const i=new YD(r.get(1),r.get(3)),a=new cn(r.popFirst(5));return i.isEqual(t)||Tg(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xve extends yve{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new EO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ej("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class EO extends xve{data(e={}){return super.data(e)}}class Sve{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new IC(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new EO(this._firestore,this._userDataWriter,r.key,r,new IC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new It(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const l=new EO(i._firestore,i._userDataWriter,s.doc.key,s.doc,new IC(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const l=new EO(i._firestore,i._userDataWriter,s.doc.key,s.doc,new IC(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return s.type!==0&&(c=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),u=o.indexOf(s.doc.key)),{type:vNe(s.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vNe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $n()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(n){n=wl(n,qs);const e=wl(n.firestore,If);return rNe(PI(e),n._key).then(t=>Eve(e,n,t))}class z7 extends mNe{constructor(e){super(),this.firestore=e}convertBytes(e){return new E1(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qs(this.firestore,null,t)}}function or(n){n=wl(n,Vg);const e=wl(n.firestore,If),t=PI(e),r=new z7(e);return bve(n._query),iNe(t,n._query).then(i=>new Sve(e,r,n,i))}function dg(n,e,t){n=wl(n,qs);const r=wl(n.firestore,If),i=V7(n.converter,e,t);return jI(r,[P7(NI(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,bl.none())])}function ss(n,e,t,...r){n=wl(n,qs);const i=wl(n.firestore,If),a=NI(i);let o;return o=typeof(e=mn(e))=="string"||e instanceof OI?pve(a,"updateDoc",n._key,e,t,r):fve(a,"updateDoc",n._key,e),jI(i,[o.toMutation(n._key,bl.exists(!0))])}function Tve(n){return jI(wl(n.firestore,If),[new GL(n._key,bl.none())])}function _R(n,e){const t=wl(n.firestore,If),r=Sr(n),i=V7(n.converter,e);return jI(t,[P7(NI(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,bl.exists(!1))]).then(()=>r)}function Yv(n,...e){var t,r,i;n=mn(n);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||aQ(e[o])||(a=e[o],o++);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(aQ(e[o])){const d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(n instanceof qs)c=wl(n.firestore,If),u=UL(n._key.path),l={next:d=>{e[o]&&e[o](Eve(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=wl(n,Vg);c=wl(d.firestore,If),u=d._query;const h=new z7(c);l={next:f=>{e[o]&&e[o](new Sve(c,h,d,f))},error:e[o+1],complete:e[o+2]},bve(n._query)}return function(h,f,m,v){const y=new D7(v),w=new A7(f,y,m);return h.asyncQueue.enqueueAndForget(async()=>S7(await bR(h),w)),()=>{y.Za(),h.asyncQueue.enqueueAndForget(async()=>T7(await bR(h),w))}}(PI(c),u,s,l)}function jI(n,e){return function(r,i){const a=new ug;return r.asyncQueue.enqueueAndForget(async()=>GRe(await nNe(r),i,a)),a.promise}(PI(n),e)}function Eve(n,e,t){const r=t.docs.get(e._key),i=new z7(n);return new xve(n,i,e._key,r,new IC(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yNe{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=NI(e)}set(e,t,r){this._verifyNotCommitted();const i=OF(e,this._firestore),a=V7(i.converter,t,r),o=P7(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,bl.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=OF(e,this._firestore);let o;return o=typeof(t=mn(t))=="string"||t instanceof OI?pve(this._dataReader,"WriteBatch.update",a._key,t,r,i):fve(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,bl.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=OF(e,this._firestore);return this._mutations=this._mutations.concat(new GL(t._key,bl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new It(Ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function OF(n,e){if((n=mn(n)).firestore!==e)throw new It(Ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function jo(){return new O7("serverTimestamp")}function Ave(n){return new R7("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n){return PI(n=wl(n,If)),new yNe(n,e=>jI(n,e))}(function(e,t=!0){(function(i){dT=i})(by),Ku(new Kc("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new If(new APe(r.getProvider("auth-internal")),new IPe(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new It(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new YD(c.options.projectId,u)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),Hs(xZ,"4.7.3",e),Hs(xZ,"4.7.3","esm2017")})();var bNe="firebase",wNe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(bNe,wNe,"app");function H7(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const IA={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ox={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Cve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xNe=_Ne,SNe=Cve,Dve=new Bg("auth","Firebase",Cve());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new EI("@firebase/auth");function TNe(n,...e){xR.logLevel<=Tr.WARN&&xR.warn(`Auth (${by}): ${n}`,...e)}function AO(n,...e){xR.logLevel<=Tr.ERROR&&xR.error(`Auth (${by}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(n,...e){throw G7(n,...e)}function _o(n,...e){return G7(n,...e)}function q7(n,e,t){const r=Object.assign(Object.assign({},SNe()),{[e]:t});return new Bg("auth","Firebase",r).create(e,{appName:n.name})}function qo(n){return q7(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gT(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Go(n,"argument-error"),q7(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function G7(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Dve.create(n,...e)}function lt(n,e,...t){if(!n)throw G7(e,...t)}function mf(n){const e="INTERNAL ASSERTION FAILED: "+n;throw AO(e),new Error(e)}function lh(n,e){n||mf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function W7(){return lQ()==="http:"||lQ()==="https:"}function lQ(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ENe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W7()||Qq()||"connection"in navigator)?navigator.onLine:!0}function ANe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t){this.shortDelay=e,this.longDelay=t,lh(t>e,"Short delay should be less than long delay!"),this.isMobile=J2e()||Jq()}get(){return ENe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(n,e){lh(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kve{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CNe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DNe=new FI(3e4,6e4);function Ia(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ma(n,e,t,r,i={}){return Ive(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=uT(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},a);return tMe()||(c.referrerPolicy="no-referrer"),kve.fetch()(Mve(n,n.config.apiHost,t,s),c)})}async function Ive(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},CNe),e);try{const i=new INe(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw MC(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[l,c]=s.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw MC(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw MC(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw MC(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw q7(n,u,c);Go(n,u)}}catch(i){if(i instanceof us)throw i;Go(n,"network-request-failed",{message:String(i)})}}async function zg(n,e,t,r,i={}){const a=await Ma(n,e,t,r,i);return"mfaPendingCredential"in a&&Go(n,"multi-factor-auth-required",{_serverResponse:a}),a}function Mve(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Y7(n.config,i):`${n.config.apiScheme}://${i}`}function kNe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class INe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_o(this.auth,"network-request-failed")),DNe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function MC(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=_o(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQ(n){return n!==void 0&&n.getResponse!==void 0}function uQ(n){return n!==void 0&&n.enterprise!==void 0}class MNe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return kNe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PNe(n){return(await Ma(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ONe(n,e){return Ma(n,"GET","/v2/recaptchaConfig",Ia(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RNe(n,e){return Ma(n,"POST","/v1/accounts:delete",e)}async function NNe(n,e){return Ma(n,"POST","/v1/accounts:update",e)}async function Pve(n,e){return Ma(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LNe(n,e=!1){const t=mn(n),r=await t.getIdToken(e),i=nj(r);lt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:sD(RF(i.auth_time)),issuedAtTime:sD(RF(i.iat)),expirationTime:sD(RF(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function RF(n){return Number(n)*1e3}function nj(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return AO("JWT malformed, contained fewer than 3 sections"),null;try{const i=Nge(t);return i?JSON.parse(i):(AO("Failed to decode base64 JWT payload"),null)}catch(i){return AO("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function dQ(n){const e=nj(n);return lt(e,"internal-error"),lt(typeof e.exp<"u","internal-error"),lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ag(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof us&&jNe(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function jNe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FNe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sD(this.lastLoginAt),this.creationTime=sD(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Ag(n,Pve(t,{idToken:r}));lt(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Ove(a.providerUserInfo):[],s=BNe(n.providerData,o),l=n.isAnonymous,c=!(n.email&&a.passwordHash)&&!(s!=null&&s.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Mz(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function $Ne(n){const e=mn(n);await nk(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BNe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ove(n){return n.map(e=>{var{providerId:t}=e,r=H7(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UNe(n,e){const t=await Ive(n,{},async()=>{const r=uT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=Mve(n,i,"/v1/token",`key=${a}`),s=await n._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",kve.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function VNe(n,e){return Ma(n,"POST","/v2/accounts:revokeToken",Ia(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lt(e.idToken,"internal-error"),lt(typeof e.idToken<"u","internal-error"),lt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dQ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){lt(e.length!==0,"internal-error");const t=dQ(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await UNe(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new YS;return r&&(lt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(lt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(lt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new YS,this.toJSON())}_performRefresh(){return mf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n,e){lt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class tg{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=H7(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FNe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Mz(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ag(this,this.stsTokenManager.getToken(this.auth,e));return lt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return LNe(this,e)}reload(){return $Ne(this)}_assign(e){this!==e&&(lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new tg(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await nk(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Aa(this.auth.app))return Promise.reject(qo(this.auth));const e=await this.getIdToken();return await Ag(this,RNe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,s,l,c,u;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,f=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,v=(s=t.tenantId)!==null&&s!==void 0?s:void 0,y=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=t.createdAt)!==null&&c!==void 0?c:void 0,_=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:A,isAnonymous:C,providerData:D,stsTokenManager:M}=t;lt(S&&M,e,"internal-error");const P=YS.fromJSON(this.name,M);lt(typeof S=="string",e,"internal-error"),cv(d,e.name),cv(h,e.name),lt(typeof A=="boolean",e,"internal-error"),lt(typeof C=="boolean",e,"internal-error"),cv(f,e.name),cv(m,e.name),cv(v,e.name),cv(y,e.name),cv(w,e.name),cv(_,e.name);const O=new tg({uid:S,auth:e,email:h,emailVerified:A,displayName:d,isAnonymous:C,photoURL:m,phoneNumber:f,tenantId:v,stsTokenManager:P,createdAt:w,lastLoginAt:_});return D&&Array.isArray(D)&&(O.providerData=D.map(j=>Object.assign({},j))),y&&(O._redirectEventId=y),O}static async _fromIdTokenResponse(e,t,r=!1){const i=new YS;i.updateFromServerResponse(t);const a=new tg({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nk(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];lt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Ove(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new YS;s.updateFromIdToken(r);const l=new tg({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Mz(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQ=new Map;function Vc(n){lh(n instanceof Function,"Expected a class definition");let e=hQ.get(n);return e?(lh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hQ.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Rve.type="NONE";const A1=Rve;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(n,e,t){return`firebase:${n}:${e}:${t}`}class KS{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=lw(this.userKey,i.apiKey,a),this.fullPersistenceKey=lw("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tg._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new KS(Vc(A1),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=i[0]||Vc(A1);const o=lw(r,e.config.apiKey,e.name);let s=null;for(const c of t)try{const u=await c._get(o);if(u){const d=tg._fromJSON(e,u);c!==a&&(s=d),a=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new KS(a,e,r):(a=l[0],s&&await a._set(o,s.toJSON()),await Promise.all(t.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new KS(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fQ(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fve(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nve(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($ve(e))return"Blackberry";if(Bve(e))return"Webos";if(Lve(e))return"Safari";if((e.includes("chrome/")||jve(e))&&!e.includes("edge/"))return"Chrome";if($I(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Nve(n=ao()){return/firefox\//i.test(n)}function Lve(n=ao()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jve(n=ao()){return/crios\//i.test(n)}function Fve(n=ao()){return/iemobile/i.test(n)}function $I(n=ao()){return/android/i.test(n)}function $ve(n=ao()){return/blackberry/i.test(n)}function Bve(n=ao()){return/webos/i.test(n)}function BI(n=ao()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zNe(n=ao()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function HNe(n=ao()){var e;return BI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qNe(){return Uge()&&document.documentMode===10}function Uve(n=ao()){return BI(n)||$I(n)||Bve(n)||$ve(n)||/windows phone/i.test(n)||Fve(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vve(n,e=[]){let t;switch(n){case"Browser":t=fQ(ao());break;case"Worker":t=`${fQ(ao())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${by}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GNe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,s)=>{try{const l=e(a);o(l)}catch(l){s(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WNe(n,e={}){return Ma(n,"GET","/v2/passwordPolicy",Ia(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YNe=6;class KNe{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:YNe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,s;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XNe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pQ(this),this.idTokenSubscription=new pQ(this),this.beforeStateQueue=new GNe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vc(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await KS.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Pve(this,{idToken:e}),r=await tg._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Aa(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===s)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nk(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ANe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Aa(this.app))return Promise.reject(qo(this));const t=e?mn(e):null;return t&&lt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Aa(this.app)?Promise.reject(qo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Aa(this.app)?Promise.reject(qo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WNe(this),t=new KNe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bg("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await VNe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vc(e)||this._popupRedirectResolver;lt(t,this,"argument-error"),this.redirectPersistenceManager=await KS.create(this,[Vc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(lt(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vve(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&TNe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Da(n){return mn(n)}class pQ{constructor(e){this.auth=e,this.observer=null,this.addObserver=zge(t=>this.observer=t)}get next(){return lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZNe(n){UI=n}function K7(n){return UI.loadJS(n)}function QNe(){return UI.recaptchaV2Script}function JNe(){return UI.recaptchaEnterpriseScript}function eLe(){return UI.gapiScript}function zve(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const tLe="recaptcha-enterprise",nLe="NO_RECAPTCHA";class rLe{constructor(e){this.type=tLe,this.auth=Da(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{ONe(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const c=new MNe(l);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,o(c.siteKey)}}).catch(l=>{s(l)})})}function i(a,o,s){const l=window.grecaptcha;uQ(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(c=>{o(c)}).catch(()=>{o(nLe)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(s=>{if(!t&&uQ(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=JNe();l.length!==0&&(l+=s),K7(l).then(()=>{i(s,a,o)}).catch(c=>{o(c)})}}).catch(s=>{o(s)})})}}async function gQ(n,e,t,r=!1){const i=new rLe(n);let a;try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function rk(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await gQ(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await gQ(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iLe(n,e){const t=Ug(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(zD(a,e??{}))return i;Go(i,"already-initialized")}return t.initialize({options:e})}function aLe(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Vc);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Hve(n,e,t){const r=Da(n);lt(r._canInitEmulator,r,"emulator-config-failed"),lt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),a=qve(e),{host:o,port:s}=oLe(e),l=s===null?"":`:${s}`;r.config.emulator={url:`${a}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||sLe()}function qve(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function oLe(n){const e=qve(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:mQ(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:mQ(o)}}}function mQ(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sLe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mf("not implemented")}_getIdTokenResponse(e){return mf("not implemented")}_linkToIdToken(e,t){return mf("not implemented")}_getReauthenticationResolver(e){return mf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gve(n,e){return Ma(n,"POST","/v1/accounts:resetPassword",Ia(n,e))}async function lLe(n,e){return Ma(n,"POST","/v1/accounts:update",e)}async function cLe(n,e){return Ma(n,"POST","/v1/accounts:signUp",e)}async function uLe(n,e){return Ma(n,"POST","/v1/accounts:update",Ia(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dLe(n,e){return zg(n,"POST","/v1/accounts:signInWithPassword",Ia(n,e))}async function rj(n,e){return Ma(n,"POST","/v1/accounts:sendOobCode",Ia(n,e))}async function hLe(n,e){return rj(n,e)}async function fLe(n,e){return rj(n,e)}async function pLe(n,e){return rj(n,e)}async function gLe(n,e){return rj(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mLe(n,e){return zg(n,"POST","/v1/accounts:signInWithEmailLink",Ia(n,e))}async function vLe(n,e){return zg(n,"POST","/v1/accounts:signInWithEmailLink",Ia(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik extends mT{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ik(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ik(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rk(e,t,"signInWithPassword",dLe);case"emailLink":return mLe(e,{email:this._email,oobCode:this._password});default:Go(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rk(e,r,"signUpPassword",cLe);case"emailLink":return vLe(e,{idToken:t,email:this._email,oobCode:this._password});default:Go(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hg(n,e){return zg(n,"POST","/v1/accounts:signInWithIdp",Ia(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yLe="http://localhost";class Mf extends mT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Mf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Go("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=H7(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Mf(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return hg(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hg(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hg(e,t)}buildRequest(){const e={requestUri:yLe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uT(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bLe(n,e){return Ma(n,"POST","/v1/accounts:sendVerificationCode",Ia(n,e))}async function wLe(n,e){return zg(n,"POST","/v1/accounts:signInWithPhoneNumber",Ia(n,e))}async function _Le(n,e){const t=await zg(n,"POST","/v1/accounts:signInWithPhoneNumber",Ia(n,e));if(t.temporaryProof)throw MC(n,"account-exists-with-different-credential",t);return t}const xLe={USER_NOT_FOUND:"user-not-found"};async function SLe(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return zg(n,"POST","/v1/accounts:signInWithPhoneNumber",Ia(n,t),xLe)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends mT{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new cw({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new cw({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return wLe(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return _Le(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return SLe(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!t&&!i&&!a?null:new cw({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TLe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ELe(n){const e=LS(AC(n)).link,t=e?LS(AC(e)).deep_link_id:null,r=LS(AC(n)).deep_link_id;return(r?LS(AC(r)).link:null)||r||t||e||n}class ij{constructor(e){var t,r,i,a,o,s;const l=LS(AC(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=TLe((i=l.mode)!==null&&i!==void 0?i:null);lt(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(s=l.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const t=ELe(e);try{return new ij(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.providerId=_y.PROVIDER_ID}static credential(e,t){return ik._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ij.parseLink(t);return lt(r,"argument-error"),ik._fromEmailAndCode(e,r.code,r.tenantId)}}_y.PROVIDER_ID="password";_y.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_y.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT extends Hg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class XS extends vT{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return lt("providerId"in t&&"signInMethod"in t,"argument-error"),Mf._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return lt(e.idToken||e.accessToken,"argument-error"),Mf._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return XS.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return XS.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:o,providerId:s}=e;if(!r&&!i&&!t&&!a||!s)return null;try{return new XS(s)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends vT{constructor(){super("facebook.com")}static credential(e){return Mf._fromParams({providerId:uf.PROVIDER_ID,signInMethod:uf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uf.credentialFromTaggedObject(e)}static credentialFromError(e){return uf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uf.credential(e.oauthAccessToken)}catch{return null}}}uf.FACEBOOK_SIGN_IN_METHOD="facebook.com";uf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd extends vT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Mf._fromParams({providerId:Xd.PROVIDER_ID,signInMethod:Xd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xd.credentialFromTaggedObject(e)}static credentialFromError(e){return Xd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Xd.credential(t,r)}catch{return null}}}Xd.GOOGLE_SIGN_IN_METHOD="google.com";Xd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends vT{constructor(){super("github.com")}static credential(e){return Mf._fromParams({providerId:df.PROVIDER_ID,signInMethod:df.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return df.credentialFromTaggedObject(e)}static credentialFromError(e){return df.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return df.credential(e.oauthAccessToken)}catch{return null}}}df.GITHUB_SIGN_IN_METHOD="github.com";df.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ALe="http://localhost";class C1 extends mT{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return hg(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hg(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hg(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=t;return!r||!i||!a||r!==i?null:new C1(r,a)}static _create(e,t){return new C1(e,t)}buildRequest(){return{requestUri:ALe,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CLe="saml.";class SR extends Hg{constructor(e){lt(e.startsWith(CLe),"argument-error"),super(e)}static credentialFromResult(e){return SR.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return SR.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=C1.fromJSON(e);return lt(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return C1._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends vT{constructor(){super("twitter.com")}static credential(e,t){return Mf._fromParams({providerId:hf.PROVIDER_ID,signInMethod:hf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hf.credentialFromTaggedObject(e)}static credentialFromError(e){return hf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return hf.credential(t,r)}catch{return null}}}hf.TWITTER_SIGN_IN_METHOD="twitter.com";hf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wve(n,e){return zg(n,"POST","/v1/accounts:signUp",Ia(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await tg._fromIdTokenResponse(e,r,i),o=vQ(r);return new Xu({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=vQ(r);return new Xu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function vQ(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DLe(n){var e;if(Aa(n.app))return Promise.reject(qo(n));const t=Da(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Xu({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await Wve(t,{returnSecureToken:!0}),i=await Xu._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR extends us{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,TR.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new TR(e,t,r,i)}}function Yve(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?TR._fromErrorAndOperation(n,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kve(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kLe(n,e){const t=mn(n);await aj(!0,t,e);const{providerUserInfo:r}=await NNe(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Kve(r||[]);return t.providerData=t.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function X7(n,e,t=!1){const r=await Ag(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xu._forOperation(n,"link",r)}async function aj(n,e,t){await nk(e);const r=Kve(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";lt(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xve(n,e,t=!1){const{auth:r}=n;if(Aa(r.app))return Promise.reject(qo(r));const i="reauthenticate";try{const a=await Ag(n,Yve(r,i,e,n),t);lt(a.idToken,r,"internal-error");const o=nj(a.idToken);lt(o,r,"internal-error");const{sub:s}=o;return lt(n.uid===s,r,"user-mismatch"),Xu._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Go(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zve(n,e,t=!1){if(Aa(n.app))return Promise.reject(qo(n));const r="signIn",i=await Yve(n,r,e),a=await Xu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function oj(n,e){return Zve(Da(n),e)}async function Qve(n,e){const t=mn(n);return await aj(!1,t,e.providerId),X7(t,e)}async function Jve(n,e){return Xve(mn(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ILe(n,e){return zg(n,"POST","/v1/accounts:signInWithCustomToken",Ia(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MLe(n,e){if(Aa(n.app))return Promise.reject(qo(n));const t=Da(n),r=await ILe(t,{token:e,returnSecureToken:!0}),i=await Xu._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Z7._fromServerResponse(e,t):"totpInfo"in t?Q7._fromServerResponse(e,t):Go(e,"internal-error")}}class Z7 extends VI{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Z7(t)}}class Q7 extends VI{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Q7(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(n,e,t){var r;lt(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),lt(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(lt(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(lt(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J7(n){const e=Da(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PLe(n,e,t){const r=Da(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&sj(r,i,t),await rk(r,i,"getOobCode",fLe)}async function OLe(n,e,t){await Gve(mn(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&J7(n),r})}async function RLe(n,e){await uLe(mn(n),{oobCode:e})}async function eye(n,e){const t=mn(n),r=await Gve(t,{oobCode:e}),i=r.requestType;switch(lt(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":lt(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":lt(r.mfaInfo,t,"internal-error");default:lt(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=VI._fromServerResponse(Da(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function NLe(n,e){const{data:t}=await eye(mn(n),e);return t.email}async function LLe(n,e,t){if(Aa(n.app))return Promise.reject(qo(n));const r=Da(n),o=await rk(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wve).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&J7(n),l}),s=await Xu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function jLe(n,e,t){return Aa(n.app)?Promise.reject(qo(n)):oj(mn(n),_y.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&J7(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FLe(n,e,t){const r=Da(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(o,s){lt(s.handleCodeInApp,r,"argument-error"),s&&sj(r,o,s)}a(i,t),await rk(r,i,"getOobCode",pLe)}function $Le(n,e){const t=ij.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function BLe(n,e,t){if(Aa(n.app))return Promise.reject(qo(n));const r=mn(n),i=_y.credentialWithLink(e,t||tk());return lt(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),oj(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ULe(n,e){return Ma(n,"POST","/v1/accounts:createAuthUri",Ia(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VLe(n,e){const t=W7()?tk():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await ULe(mn(n),r);return i||[]}async function zLe(n,e){const t=mn(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&sj(t.auth,i,e);const{email:a}=await hLe(t.auth,i);a!==n.email&&await n.reload()}async function HLe(n,e,t){const r=mn(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&sj(r.auth,a,t);const{email:o}=await gLe(r.auth,a);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qLe(n,e){return Ma(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GLe(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=mn(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Ag(r,qLe(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const s=r.providerData.find(({providerId:l})=>l==="password");s&&(s.displayName=r.displayName,s.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function WLe(n,e){const t=mn(n);return Aa(t.auth.app)?Promise.reject(qo(t.auth)):tye(t,e,null)}function YLe(n,e){return tye(mn(n),null,e)}async function tye(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const o=await Ag(n,lLe(r,a));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KLe(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},a=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=nj(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const s=o!=="anonymous"&&o!=="custom"?o:null;return new ZS(a,s)}}if(!r)return null;switch(r){case"facebook.com":return new XLe(a,i);case"github.com":return new ZLe(a,i);case"google.com":return new QLe(a,i);case"twitter.com":return new JLe(a,i,n.screenName||null);case"custom":case"anonymous":return new ZS(a,null);default:return new ZS(a,r,i)}}class ZS{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class nye extends ZS{constructor(e,t,r,i){super(e,t,r),this.username=i}}class XLe extends ZS{constructor(e,t){super(e,"facebook.com",t)}}class ZLe extends nye{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class QLe extends ZS{constructor(e,t){super(e,"google.com",t)}}class JLe extends nye{constructor(e,t,r){super(e,"twitter.com",t,r)}}function eje(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:KLe(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tje(n,e){return mn(n).setPersistence(e)}function nje(n,e,t,r){return mn(n).onIdTokenChanged(e,t,r)}function rje(n,e,t){return mn(n).beforeAuthStateChanged(e,t)}function ije(n,e,t,r){return mn(n).onAuthStateChanged(e,t,r)}function aje(n){return mn(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new qb("enroll",e,t)}static _fromMfaPendingCredential(e){return new qb("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return qb._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return qb._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Da(e),i=t.customData._serverResponse,a=(i.mfaInfo||[]).map(s=>VI._fromServerResponse(r,s));lt(i.mfaPendingCredential,r,"internal-error");const o=qb._fromMfaPendingCredential(i.mfaPendingCredential);return new eG(o,a,async s=>{const l=await s._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":const u=await Xu._fromIdTokenResponse(r,t.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return lt(t.user,r,"internal-error"),Xu._forOperation(t.user,t.operationType,c);default:Go(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function oje(n,e){var t;const r=mn(n),i=e;return lt(e.customData.operationType,r,"argument-error"),lt((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),eG._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sje(n,e){return Ma(n,"POST","/v2/accounts/mfaEnrollment:start",Ia(n,e))}function lje(n,e){return Ma(n,"POST","/v2/accounts/mfaEnrollment:finalize",Ia(n,e))}function cje(n,e){return Ma(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Ia(n,e))}class tG{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>VI._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new tG(e)}async getSession(){return qb._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),a=await Ag(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ag(this.user,cje(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const NF=new WeakMap;function uje(n){const e=mn(n);return NF.has(e)||NF.set(e,tG._fromUser(e)),NF.get(e)}const ER="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rye{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ER,"1"),this.storage.removeItem(ER),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dje=1e3,hje=10;class iye extends rye{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uve(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,s,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);qNe()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hje):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},dje)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iye.type="LOCAL";const zI=iye;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aye extends rye{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aye.type="SESSION";const ly=aye;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fje(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new lj(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async c=>c(t.origin,a)),l=await fje(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pje{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,l)=>{const c=HI("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(h.data.response);break;default:clearTimeout(u),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(){return window}function gje(n){to().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nG(){return typeof to().WorkerGlobalScope<"u"&&typeof to().importScripts=="function"}async function mje(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vje(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function yje(){return nG()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oye="firebaseLocalStorageDb",bje=1,AR="firebaseLocalStorage",sye="fbase_key";class qI{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cj(n,e){return n.transaction([AR],e?"readwrite":"readonly").objectStore(AR)}function wje(){const n=indexedDB.deleteDatabase(oye);return new qI(n).toPromise()}function Pz(){const n=indexedDB.open(oye,bje);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(AR,{keyPath:sye})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(AR)?e(r):(r.close(),await wje(),e(await Pz()))})})}async function yQ(n,e,t){const r=cj(n,!0).put({[sye]:e,value:t});return new qI(r).toPromise()}async function _je(n,e){const t=cj(n,!1).get(e),r=await new qI(t).toPromise();return r===void 0?null:r.value}function bQ(n,e){const t=cj(n,!0).delete(e);return new qI(t).toPromise()}const xje=800,Sje=3;class lye{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pz(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Sje)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nG()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lj._getInstance(yje()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await mje(),!this.activeServiceWorker)return;this.sender=new pje(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vje()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pz();return await yQ(e,ER,"1"),await bQ(e,ER),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>yQ(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>_je(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bQ(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=cj(i,!1).getAll();return new qI(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xje)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lye.type="LOCAL";const D1=lye;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tje(n,e){return Ma(n,"POST","/v2/accounts/mfaSignIn:start",Ia(n,e))}function Eje(n,e){return Ma(n,"POST","/v2/accounts/mfaSignIn:finalize",Ia(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aje=500,Cje=6e4,PM=1e12;class Dje{constructor(e){this.auth=e,this.counter=PM,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new kje(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||PM;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||PM;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||PM;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class kje{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;lt(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Ije(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Cje)},Aje))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Ije(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=zve("rcb"),Mje=new FI(3e4,6e4);class Pje{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=to().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return lt(Oje(t),e,"argument-error"),this.shouldResolveImmediately(t)&&cQ(to().grecaptcha)?Promise.resolve(to().grecaptcha):new Promise((r,i)=>{const a=to().setTimeout(()=>{i(_o(e,"network-request-failed"))},Mje.get());to()[LF]=()=>{to().clearTimeout(a),delete to()[LF];const s=to().grecaptcha;if(!s||!cQ(s)){i(_o(e,"internal-error"));return}const l=s.render;s.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=t,r(s)};const o=`${QNe()}?${uT({onload:LF,render:"explicit",hl:t})}`;K7(o).catch(()=>{clearTimeout(a),i(_o(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=to().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Oje(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class Rje{async load(e){return new Dje(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cye="recaptcha",Nje={theme:"light",type:"image"};let Lje=class{constructor(e,t,r=Object.assign({},Nje)){this.parameters=r,this.type=cye,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Da(e),this.isInvisible=this.parameters.size==="invisible",lt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;lt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rje:new Pje,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),i(o))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){lt(!this.parameters.sitekey,this.auth,"argument-error"),lt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),lt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=to()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){lt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){lt(W7()&&!nG(),this.auth,"internal-error"),await jje(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await PNe(this.auth);lt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return lt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function jje(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=cw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Fje(n,e,t){if(Aa(n.app))return Promise.reject(qo(n));const r=Da(n),i=await uj(r,e,mn(t));return new rG(i,a=>oj(r,a))}async function $je(n,e,t){const r=mn(n);await aj(!1,r,"phone");const i=await uj(r.auth,e,mn(t));return new rG(i,a=>Qve(r,a))}async function Bje(n,e,t){const r=mn(n);if(Aa(r.auth.app))return Promise.reject(qo(r.auth));const i=await uj(r.auth,e,mn(t));return new rG(i,a=>Jve(r,a))}async function uj(n,e,t){var r;const i=await t.verify();try{lt(typeof i=="string",n,"argument-error"),lt(t.type===cye,n,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const o=a.session;if("phoneNumber"in a)return lt(o.type==="enroll",n,"internal-error"),(await sje(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{lt(o.type==="signin",n,"internal-error");const s=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;return lt(s,n,"missing-multi-factor-info"),(await Tje(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await bLe(n,{phoneNumber:a.phoneNumber,recaptchaToken:i});return o}}finally{t._reset()}}async function Uje(n,e){const t=mn(n);if(Aa(t.auth.app))return Promise.reject(qo(t.auth));await X7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aw=class CO{constructor(e){this.providerId=CO.PROVIDER_ID,this.auth=Da(e)}verifyPhoneNumber(e,t){return uj(this.auth,e,mn(t))}static credential(e,t){return cw._fromVerification(e,t)}static credentialFromResult(e){const t=e;return CO.credentialFromTaggedObject(t)}static credentialFromError(e){return CO.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?cw._fromTokenResponse(t,r):null}};Aw.PROVIDER_ID="phone";Aw.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n,e){return e?Vc(e):(lt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG extends mT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vje(n){return Zve(n.auth,new iG(n),n.bypassAuthState)}function zje(n){const{auth:e,user:t}=n;return lt(t,e,"internal-error"),Xve(t,new iG(n),n.bypassAuthState)}async function Hje(n){const{auth:e,user:t}=n;return lt(t,e,"internal-error"),X7(t,new iG(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uye{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vje;case"linkViaPopup":case"linkViaRedirect":return Hje;case"reauthViaPopup":case"reauthViaRedirect":return zje;default:Go(this.auth,"internal-error")}}resolve(e){lh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qje=new FI(2e3,1e4);async function Gje(n,e,t){if(Aa(n.app))return Promise.reject(_o(n,"operation-not-supported-in-this-environment"));const r=Da(n);gT(n,e,Hg);const i=Ww(r,t);return new ng(r,"signInViaPopup",e,i).executeNotNull()}async function Wje(n,e,t){const r=mn(n);if(Aa(r.auth.app))return Promise.reject(_o(r.auth,"operation-not-supported-in-this-environment"));gT(r.auth,e,Hg);const i=Ww(r.auth,t);return new ng(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Yje(n,e,t){const r=mn(n);gT(r.auth,e,Hg);const i=Ww(r.auth,t);return new ng(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ng extends uye{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ng.currentPopupAction&&ng.currentPopupAction.cancel(),ng.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lt(e,this.auth,"internal-error"),e}async onExecution(){lh(this.filter.length===1,"Popup operations only handle one event");const e=HI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_o(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_o(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ng.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_o(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qje.get())};e()}}ng.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kje="pendingRedirect",lD=new Map;class Xje extends uye{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=lD.get(this.auth._key());if(!e){try{const r=await Zje(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lD.set(this.auth._key(),e)}return this.bypassAuthState||lD.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Zje(n,e){const t=hye(e),r=dye(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function aG(n,e){return dye(n)._set(hye(e),"true")}function Qje(){lD.clear()}function oG(n,e){lD.set(n._key(),e)}function dye(n){return Vc(n._redirectPersistence)}function hye(n){return lw(Kje,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jje(n,e,t){return e5e(n,e,t)}async function e5e(n,e,t){if(Aa(n.app))return Promise.reject(qo(n));const r=Da(n);gT(n,e,Hg),await r._initializationPromise;const i=Ww(r,t);return await aG(i,r),i._openRedirect(r,e,"signInViaRedirect")}function t5e(n,e,t){return n5e(n,e,t)}async function n5e(n,e,t){const r=mn(n);if(gT(r.auth,e,Hg),Aa(r.auth.app))return Promise.reject(qo(r.auth));await r.auth._initializationPromise;const i=Ww(r.auth,t);await aG(i,r.auth);const a=await fye(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function r5e(n,e,t){return i5e(n,e,t)}async function i5e(n,e,t){const r=mn(n);gT(r.auth,e,Hg),await r.auth._initializationPromise;const i=Ww(r.auth,t);await aj(!1,r,e.providerId),await aG(i,r.auth);const a=await fye(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function a5e(n,e){return await Da(n)._initializationPromise,dj(n,e,!1)}async function dj(n,e,t=!1){if(Aa(n.app))return Promise.reject(qo(n));const r=Da(n),i=Ww(r,e),o=await new Xje(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function fye(n){const e=HI(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5e=10*60*1e3;class pye{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s5e(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!gye(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(_o(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o5e&&this.cachedEventUids.clear(),this.cachedEventUids.has(wQ(e))}saveEventToCache(e){this.cachedEventUids.add(wQ(e)),this.lastProcessedEventTime=Date.now()}}function wQ(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gye({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function s5e(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gye(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mye(n,e={}){return Ma(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c5e=/^https?/;async function u5e(n){if(n.config.emulator)return;const{authorizedDomains:e}=await mye(n);for(const t of e)try{if(d5e(t))return}catch{}Go(n,"unauthorized-domain")}function d5e(n){const e=tk(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!c5e.test(t))return!1;if(l5e.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5e=new FI(3e4,6e4);function _Q(){const n=to().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function f5e(n){return new Promise((e,t)=>{var r,i,a;function o(){_Q(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_Q(),t(_o(n,"network-request-failed"))},timeout:h5e.get()})}if(!((i=(r=to().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=to().gapi)===null||a===void 0)&&a.load)o();else{const s=zve("iframefcb");return to()[s]=()=>{gapi.load?o():t(_o(n,"network-request-failed"))},K7(`${eLe()}?onload=${s}`).catch(l=>t(l))}}).catch(e=>{throw DO=null,e})}let DO=null;function p5e(n){return DO=DO||f5e(n),DO}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5e=new FI(5e3,15e3),m5e="__/auth/iframe",v5e="emulator/auth/iframe",y5e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b5e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function w5e(n){const e=n.config;lt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Y7(e,v5e):`https://${n.config.authDomain}/${m5e}`,r={apiKey:e.apiKey,appName:n.name,v:by},i=b5e.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${uT(r).slice(1)}`}async function _5e(n){const e=await p5e(n),t=to().gapi;return lt(t,n,"internal-error"),e.open({where:document.body,url:w5e(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y5e,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=_o(n,"network-request-failed"),s=to().setTimeout(()=>{a(o)},g5e.get());function l(){to().clearTimeout(s),i(r)}r.ping(l).then(l,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S5e=500,T5e=600,E5e="_blank",A5e="http://localhost";class xQ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function C5e(n,e,t,r=S5e,i=T5e){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},x5e),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ao().toLowerCase();t&&(s=jve(c)?E5e:t),Nve(c)&&(e=e||A5e,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(HNe(c)&&s!=="_self")return D5e(e||"",s),new xQ(null);const d=window.open(e||"",s,u);lt(d,n,"popup-blocked");try{d.focus()}catch{}return new xQ(d)}function D5e(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5e="__/auth/handler",I5e="emulator/auth/handler",M5e=encodeURIComponent("fac");async function Oz(n,e,t,r,i,a){lt(n.config.authDomain,n,"auth-domain-config-required"),lt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:by,eventId:i};if(e instanceof Hg){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",sMe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(a||{}))o[u]=d}if(e instanceof vT){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const s=o;for(const u of Object.keys(s))s[u]===void 0&&delete s[u];const l=await n._getAppCheckToken(),c=l?`#${M5e}=${encodeURIComponent(l)}`:"";return`${P5e(n)}?${uT(s).slice(1)}${c}`}function P5e({config:n}){return n.emulator?Y7(n,I5e):`https://${n.authDomain}/${k5e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF="webStorageSupport";class O5e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ly,this._completeRedirectFn=dj,this._overrideRedirectResult=oG}async _openPopup(e,t,r,i){var a;lh((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Oz(e,t,r,tk(),i);return C5e(e,o,HI())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Oz(e,t,r,tk(),i);return gje(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(lh(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _5e(e),r=new pye(e);return t.register("authEvent",i=>(lt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jF,{type:jF},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[jF];o!==void 0&&t(!!o),Go(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=u5e(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Uve()||Lve()||BI()}}const vye=O5e;class R5e{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return mf("unexpected MultiFactorSessionType")}}}class sG extends R5e{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new sG(e)}_finalizeEnroll(e,t,r){return lje(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Eje(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class yye{constructor(){}static assertion(e){return sG._fromCredential(e)}}yye.FACTOR_ID="phone";var SQ="@firebase/auth",TQ="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5e(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j5e(n){Ku(new Kc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;lt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vve(n)},c=new XNe(r,i,a,l);return aLe(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ku(new Kc("auth-internal",e=>{const t=Da(e.getProvider("auth").getImmediate());return(r=>new N5e(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(SQ,TQ,L5e(n)),Hs(SQ,TQ,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5e=5*60,$5e=$ge("authIdTokenMaxAge")||F5e;let EQ=null;const B5e=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>$5e)return;const i=t==null?void 0:t.token;EQ!==i&&(EQ=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function U5e(n=$L()){const e=Ug(n,"auth");if(e.isInitialized())return e.getImmediate();const t=iLe(n,{popupRedirectResolver:vye,persistence:[D1,zI,ly]}),r=$ge("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=B5e(a.toString());rje(t,o,()=>o(t.currentUser)),nje(t,s=>o(s))}}const i=jge("auth");return i&&Hve(t,`http://${i}`),t}function V5e(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ZNe({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=_o("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",V5e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j5e("Browser");const bye="@firebase/installations",lG="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wye=1e4,_ye=`w:${lG}`,xye="FIS_v2",z5e="https://firebaseinstallations.googleapis.com/v1",H5e=60*60*1e3,q5e="installations",G5e="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5e={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Cw=new Bg(q5e,G5e,W5e);function Sye(n){return n instanceof us&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tye({projectId:n}){return`${z5e}/projects/${n}/installations`}function Eye(n){return{token:n.token,requestStatus:2,expiresIn:K5e(n.expiresIn),creationTime:Date.now()}}async function Aye(n,e){const r=(await e.json()).error;return Cw.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Cye({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Y5e(n,{refreshToken:e}){const t=Cye(n);return t.append("Authorization",X5e(e)),t}async function Dye(n){const e=await n();return e.status>=500&&e.status<600?n():e}function K5e(n){return Number(n.replace("s","000"))}function X5e(n){return`${xye} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5e({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Tye(n),i=Cye(n),a=e.getImmediate({optional:!0});if(a){const c=await a.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:t,authVersion:xye,appId:n.appId,sdkVersion:_ye},s={method:"POST",headers:i,body:JSON.stringify(o)},l=await Dye(()=>fetch(r,s));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:Eye(c.authToken)}}else throw await Aye("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kye(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5e(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5e=/^[cdef][\w-]{21}$/,Rz="";function eFe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=tFe(n);return J5e.test(t)?t:Rz}catch{return Rz}}function tFe(n){return Q5e(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iye=new Map;function Mye(n,e){const t=hj(n);Pye(t,e),nFe(t,e)}function Pye(n,e){const t=Iye.get(n);if(t)for(const r of t)r(e)}function nFe(n,e){const t=rFe();t&&t.postMessage({key:n,fid:e}),iFe()}let Gb=null;function rFe(){return!Gb&&"BroadcastChannel"in self&&(Gb=new BroadcastChannel("[Firebase] FID Change"),Gb.onmessage=n=>{Pye(n.data.key,n.data.fid)}),Gb}function iFe(){Iye.size===0&&Gb&&(Gb.close(),Gb=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aFe="firebase-installations-database",oFe=1,Dw="firebase-installations-store";let FF=null;function cG(){return FF||(FF=Yge(aFe,oFe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Dw)}}})),FF}async function CR(n,e){const t=hj(n),i=(await cG()).transaction(Dw,"readwrite"),a=i.objectStore(Dw),o=await a.get(t);return await a.put(e,t),await i.done,(!o||o.fid!==e.fid)&&Mye(n,e.fid),e}async function Oye(n){const e=hj(n),r=(await cG()).transaction(Dw,"readwrite");await r.objectStore(Dw).delete(e),await r.done}async function fj(n,e){const t=hj(n),i=(await cG()).transaction(Dw,"readwrite"),a=i.objectStore(Dw),o=await a.get(t),s=e(o);return s===void 0?await a.delete(t):await a.put(s,t),await i.done,s&&(!o||o.fid!==s.fid)&&Mye(n,s.fid),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uG(n){let e;const t=await fj(n.appConfig,r=>{const i=sFe(r),a=lFe(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===Rz?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function sFe(n){const e=n||{fid:eFe(),registrationStatus:0};return Rye(e)}function lFe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Cw.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=cFe(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uFe(n)}:{installationEntry:e}}async function cFe(n,e){try{const t=await Z5e(n,e);return CR(n.appConfig,t)}catch(t){throw Sye(t)&&t.customData.serverCode===409?await Oye(n.appConfig):await CR(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function uFe(n){let e=await AQ(n.appConfig);for(;e.registrationStatus===1;)await kye(100),e=await AQ(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await uG(n);return r||t}return e}function AQ(n){return fj(n,e=>{if(!e)throw Cw.create("installation-not-found");return Rye(e)})}function Rye(n){return dFe(n)?{fid:n.fid,registrationStatus:0}:n}function dFe(n){return n.registrationStatus===1&&n.registrationTime+wye<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hFe({appConfig:n,heartbeatServiceProvider:e},t){const r=fFe(n,t),i=Y5e(n,t),a=e.getImmediate({optional:!0});if(a){const c=await a.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:_ye,appId:n.appId}},s={method:"POST",headers:i,body:JSON.stringify(o)},l=await Dye(()=>fetch(r,s));if(l.ok){const c=await l.json();return Eye(c)}else throw await Aye("Generate Auth Token",l)}function fFe(n,{fid:e}){return`${Tye(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dG(n,e=!1){let t;const r=await fj(n.appConfig,a=>{if(!Nye(a))throw Cw.create("not-registered");const o=a.authToken;if(!e&&mFe(o))return a;if(o.requestStatus===1)return t=pFe(n,e),a;{if(!navigator.onLine)throw Cw.create("app-offline");const s=yFe(a);return t=gFe(n,s),s}});return t?await t:r.authToken}async function pFe(n,e){let t=await CQ(n.appConfig);for(;t.authToken.requestStatus===1;)await kye(100),t=await CQ(n.appConfig);const r=t.authToken;return r.requestStatus===0?dG(n,e):r}function CQ(n){return fj(n,e=>{if(!Nye(e))throw Cw.create("not-registered");const t=e.authToken;return bFe(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function gFe(n,e){try{const t=await hFe(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await CR(n.appConfig,r),t}catch(t){if(Sye(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Oye(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await CR(n.appConfig,r)}throw t}}function Nye(n){return n!==void 0&&n.registrationStatus===2}function mFe(n){return n.requestStatus===2&&!vFe(n)}function vFe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+H5e}function yFe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function bFe(n){return n.requestStatus===1&&n.requestTime+wye<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wFe(n){const e=n,{installationEntry:t,registrationPromise:r}=await uG(e);return r?r.catch(console.error):dG(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Fe(n,e=!1){const t=n;return await xFe(t),(await dG(t,e)).token}async function xFe(n){const{registrationPromise:e}=await uG(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SFe(n){if(!n||!n.options)throw $F("App Configuration");if(!n.name)throw $F("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw $F(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function $F(n){return Cw.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lye="installations",TFe="installations-internal",EFe=n=>{const e=n.getProvider("app").getImmediate(),t=SFe(e),r=Ug(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},AFe=n=>{const e=n.getProvider("app").getImmediate(),t=Ug(e,Lye).getImmediate();return{getId:()=>wFe(t),getToken:i=>_Fe(t,i)}};function CFe(){Ku(new Kc(Lye,EFe,"PUBLIC")),Ku(new Kc(TFe,AFe,"PRIVATE"))}CFe();Hs(bye,lG);Hs(bye,lG,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="analytics",DFe="firebase_id",kFe="origin",IFe=60*1e3,MFe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hG="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=new EI("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PFe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},qc=new Bg("analytics","Analytics",PFe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OFe(n){if(!n.startsWith(hG)){const e=qc.create("invalid-gtag-resource",{gtagURL:n});return _l.warn(e.message),""}return n}function jye(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function RFe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function NFe(n,e){const t=RFe("firebase-js-sdk-policy",{createScriptURL:OFe}),r=document.createElement("script"),i=`${hG}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function LFe(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function jFe(n,e,t,r,i,a){const o=r[i];try{if(o)await e[o];else{const l=(await jye(t)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(s){_l.error(s)}n("config",i,a)}async function FFe(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=await jye(t);for(const l of o){const c=s.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)a.push(u);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){_l.error(a)}}function $Fe(n,e,t,r){async function i(a,...o){try{if(a==="event"){const[s,l]=o;await FFe(n,e,t,s,l)}else if(a==="config"){const[s,l]=o;await jFe(n,e,t,r,s,l)}else if(a==="consent"){const[s,l]=o;n("consent",s,l)}else if(a==="get"){const[s,l,c]=o;n("get",s,l,c)}else if(a==="set"){const[s]=o;n("set",s)}else n(a,...o)}catch(s){_l.error(s)}}return i}function BFe(n,e,t,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=$Fe(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function UFe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(hG)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VFe=30,zFe=1e3;class HFe{constructor(e={},t=zFe){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Fye=new HFe;function qFe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function GFe(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:qFe(r)},a=MFe.replace("{app-id}",t),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(s=l.error.message)}catch{}throw qc.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()}async function WFe(n,e=Fye,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw qc.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw qc.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new XFe;return setTimeout(async()=>{s.abort()},IFe),$ye({appId:r,apiKey:i,measurementId:a},o,s,e)}async function $ye(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Fye){var a;const{appId:o,measurementId:s}=n;try{await YFe(r,e)}catch(l){if(s)return _l.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:s};throw l}try{const l=await GFe(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!KFe(c)){if(i.deleteThrottleMetadata(o),s)return _l.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:s};throw l}const u=Number((a=c==null?void 0:c.customData)===null||a===void 0?void 0:a.httpStatus)===503?pZ(t,i.intervalMillis,VFe):pZ(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,d),_l.debug(`Calling attemptFetch again in ${u} millis`),$ye(n,d,r,i)}}function YFe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(qc.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function KFe(n){if(!(n instanceof us)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class XFe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function ZFe(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});n("event",t,o)}}async function QFe(n,e,t,r){{const i=await e;n("config",i,{update:!0,user_id:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JFe(){if(VD())try{await Vge()}catch(n){return _l.warn(qc.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return _l.warn(qc.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function e3e(n,e,t,r,i,a,o){var s;const l=WFe(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&_l.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>_l.error(f)),e.push(l);const c=JFe().then(f=>{if(f)return r.getId()}),[u,d]=await Promise.all([l,c]);UFe(a)||NFe(a,u.measurementId),i("js",new Date);const h=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return h[kFe]="firebase",h.update=!0,d!=null&&(h[DFe]=d),i("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3e{constructor(e){this.app=e}_delete(){return delete QS[this.app.options.appId],Promise.resolve()}}let QS={},DQ=[];const kQ={};let BF="dataLayer",n3e="gtag",IQ,fG,MQ=!1;function r3e(){const n=[];if(Qq()&&n.push("This is a browser extension environment."),rMe()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=qc.create("invalid-analytics-context",{errorInfo:e});_l.warn(t.message)}}function i3e(n,e,t){r3e();const r=n.options.appId;if(!r)throw qc.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)_l.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw qc.create("no-api-key");if(QS[r]!=null)throw qc.create("already-exists",{id:r});if(!MQ){LFe(BF);const{wrappedGtag:a,gtagCore:o}=BFe(QS,DQ,kQ,BF,n3e);fG=a,IQ=o,MQ=!0}return QS[r]=e3e(n,DQ,kQ,e,IQ,BF,t),new t3e(n)}function a3e(n=$L()){n=mn(n);const e=Ug(n,DR);return e.isInitialized()?e.getImmediate():o3e(n)}function o3e(n,e={}){const t=Ug(n,DR);if(t.isInitialized()){const i=t.getImmediate();if(zD(e,t.getOptions()))return i;throw qc.create("already-initialized")}return t.initialize({options:e})}function s3e(n,e,t){n=mn(n),QFe(fG,QS[n.app.options.appId],e).catch(r=>_l.error(r))}function Vf(n,e,t,r){n=mn(n),ZFe(fG,QS[n.app.options.appId],e,t,r).catch(i=>_l.error(i))}const PQ="@firebase/analytics",OQ="0.10.8";function l3e(){Ku(new Kc(DR,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return i3e(r,i,t)},"PUBLIC")),Ku(new Kc("analytics-internal",n,"PRIVATE")),Hs(PQ,OQ),Hs(PQ,OQ,"esm2017");function n(e){try{const t=e.getProvider(DR).getImmediate();return{logEvent:(r,i,a)=>Vf(t,r,i,a)}}catch(t){throw qc.create("interop-component-reg-failed",{reason:t})}}}l3e();const c3e={apiKey:"AIzaSyCqlF02YJgHBt-uxqAlzF0bYUf5_ihOlUk",authDomain:"make10000hours.firebaseapp.com",projectId:"make10000hours",storageBucket:"make10000hours.firebasestorage.app",messagingSenderId:"496225832510",appId:"1:496225832510:web:27dc0adaf5d89a71cd0b6f",measurementId:"G-X6YHGN5WRS"},pG=FL(c3e),kR=U5e(pG);tje(kR,zI).then(()=>{console.log("🔐 Firebase Auth persistence set to LOCAL")}).catch(n=>{console.error("❌ Failed to set Firebase Auth persistence:",n)});const yt=lNe(pG);let ka;try{ka=a3e(pG),console.log("📊 Firebase Analytics initialized")}catch(n){console.warn("⚠️ Firebase Analytics not available:",n)}let RQ=!1;const NQ=wn(yt,"users"),Rn=yy((n,e)=>({user:null,isLoading:!0,error:null,isAuthenticated:!1,isInitialized:!1,initialize:()=>{if(RQ){console.log("User store already initializing, skipping...");return}return RQ=!0,console.log("🔐 Initializing user store authentication..."),ije(kR,async r=>{if(console.log("🔐 Auth state changed from userStore:",r?"User found":"No user"),r)try{n({isLoading:!0});const i=await e().createUserDataIfNotExists(r.uid,r),a={...r,...i};n({user:a,isAuthenticated:!0,isLoading:!1,isInitialized:!0,error:null}),console.log("✅ User authentication restored successfully")}catch(i){console.error("❌ Error creating user data:",i),n({error:i,isLoading:!1,isAuthenticated:!1,isInitialized:!0})}else n({user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!0,error:null}),console.log("🔐 No authenticated user found")},r=>{console.error("❌ Firebase Auth error:",r),n({error:r,isLoading:!1,isAuthenticated:!1,isInitialized:!0})})},createUserDataIfNotExists:async(t,r)=>{try{const i=()=>r!=null&&r.displayName?r.displayName:r!=null&&r.email?r.email.split("@")[0]:`user_${t.substring(0,8)}`,a={uid:t,userName:i(),settings:tD},o=Sr(NQ,t),s=await sw(o);if(!s.exists())await dg(o,a);else{const l=s.data();if(!l.userName){const c={...l,userName:i()};return await dg(o,c,{merge:!0}),c}return l}return a}catch(i){throw new Error(`Failed to create user data: ${i}`)}},updateUserData:async t=>{try{const r=Sr(NQ,t.uid);await dg(r,t,{merge:!0});const{user:i}=e();i&&(console.log("Updating user data in store:",t),n({user:{...i,...t}}))}catch(r){throw new Error(`Failed to update user data: ${r}`)}},signOut:async()=>{try{n({isLoading:!0}),await aje(kR),n({user:null,isAuthenticated:!1,isInitialized:!0,error:null,isLoading:!1})}catch(t){n({error:t,isLoading:!1})}},setUser:t=>{n({user:t,isAuthenticated:!!t,error:null})},setError:t=>n({error:t}),setLoading:t=>n({isLoading:t})})),Ps=Object.freeze(Object.defineProperty({__proto__:null,useUserStore:Rn},Symbol.toStringTag,{value:"Module"})),Bye=(n,e)=>{ka&&Vf(ka,"page_view",{page_title:e||n,page_location:window.location.href,page_path:window.location.pathname})},u3e=n=>{ka&&Vf(ka,"login",{method:n})},d3e=n=>{ka&&Vf(ka,"sign_up",{method:n})},h3e=n=>{ka&&Vf(ka,"task_created",{project_id:n||"no-project",timestamp:new Date().toISOString()})},f3e=(n,e,t)=>{ka&&Vf(ka,"task_completed",{task_id:n,time_spent_minutes:e,project_id:t||"no-project",timestamp:new Date().toISOString()})},LQ=(n,e)=>{ka&&Vf(ka,"pomodoro_started",{task_id:n,estimated_time_minutes:e,timestamp:new Date().toISOString()})},p3e=(n,e)=>{ka&&Vf(ka,"pomodoro_completed",{task_id:n,actual_time_minutes:e,timestamp:new Date().toISOString()})},g3e=n=>{ka&&Vf(ka,"project_created",{project_name:n,timestamp:new Date().toISOString()})},m3e=n=>{ka&&s3e(ka,n)},v3e=(n,e)=>{ka&&Vf(ka,n,{...e,timestamp:new Date().toISOString()})},y3e="workSessions",Bl=n=>{if(!n)return new Date;if(n instanceof Date)return n;if(n&&typeof n.toDate=="function")return n.toDate();if(typeof n=="string"||typeof n=="number"){const e=new Date(n);return isNaN(e.getTime())?new Date:e}return new Date};class b3e{constructor(){hn(this,"workSessionsCollection",wn(yt,y3e))}async createWorkSession(e){try{const t=new Date().getTime(),r=`${e.taskId}_${e.date}_${t}`,i=Sr(this.workSessionsCollection,r),a={...e,id:r,status:e.status||"completed",createdAt:new Date,updatedAt:new Date};return await dg(i,a),r}catch(t){throw console.error("Error creating work session:",t),t}}async createActiveSession(e,t,r,i){try{const a=new Date,o={userId:r,taskId:e,projectId:t,date:a.toISOString().split("T")[0],duration:0,sessionType:i,status:"active",startTime:a,notes:`${i} session started`};return await this.createWorkSession(o)}catch(a){throw console.error("Error creating active session:",a),a}}async updateSession(e,t){try{const r=Sr(this.workSessionsCollection,e),i={...t,updatedAt:new Date};await ss(r,i)}catch(r){throw console.error("Error updating session:",r),r}}async incrementDuration(e,t){try{const r=Sr(this.workSessionsCollection,e),i={duration:Ave(t),updatedAt:new Date};await ss(r,i)}catch(r){throw console.error("Error incrementing session duration:",r),r}}async completeSession(e,t,r,i){try{await this.updateSession(e,{duration:t,status:r,endTime:new Date,notes:i||`Session ${r}: ${t}m`})}catch(a){throw console.error("Error completing session:",a),a}}async getActiveSessions(e){try{const t=fn(this.workSessionsCollection,Ot("userId","==",e),Ot("status","==","active"),Ua("updatedAt","desc"));return(await or(t)).docs.map(i=>{const a=i.data();return{id:i.id,...a,createdAt:Bl(a.createdAt),updatedAt:Bl(a.updatedAt),startTime:a.startTime?Bl(a.startTime):void 0,endTime:a.endTime?Bl(a.endTime):void 0}})}catch(t){return console.error("Error fetching active sessions:",t),[]}}async cleanupOrphanedSessions(e,t=60){try{const r=await this.getActiveSessions(e),i=new Date(Date.now()-t*60*1e3);let a=0;for(const o of r)new Date(o.updatedAt)<i&&(o.duration>0?(await this.completeSession(o.id,o.duration,"completed",`Session completed: ${o.duration}m (app restart cleanup)`),console.log(`✅ Completed meaningful session: ${o.id} (${o.duration}m)`)):(await this.deleteWorkSession(o.id),console.log(`🗑️ Deleted empty orphaned session: ${o.id}`)),a++);return a}catch(r){return console.error("Error cleaning up orphaned sessions:",r),0}}async upsertWorkSession(e,t=0,r="manual"){try{const i={...e,duration:t,sessionType:r,status:"completed",notes:r==="manual"?t>0?`Manual time addition: +${t}m`:`Manual time reduction: ${t}m`:`${r} session completed`};return await this.createWorkSession(i)}catch(i){throw console.error("Error upserting work session:",i),i}}async getWorkSessionsByDateRange(e,t,r){try{const i=fn(this.workSessionsCollection,Ot("userId","==",e),Ot("updatedAt",">=",ci.fromDate(t)),Ot("updatedAt","<=",ci.fromDate(r)),Ua("updatedAt","desc"));return(await or(i)).docs.map(o=>{const s=o.data();return{id:o.id,...s,createdAt:Bl(s.createdAt),updatedAt:Bl(s.updatedAt)}})}catch(i){throw console.error("Error fetching work sessions:",i),i}}async getWorkSessionsByTask(e,t){try{const r=fn(this.workSessionsCollection,Ot("userId","==",e),Ot("taskId","==",t));return(await or(r)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:Bl(o.createdAt),updatedAt:Bl(o.updatedAt)}})}catch(r){throw console.error("Error fetching task work sessions:",r),r}}async getWorkSessionsByProject(e,t){try{const r=fn(this.workSessionsCollection,Ot("userId","==",e),Ot("projectId","==",t),Ua("updatedAt","desc"));return(await or(r)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:Bl(o.createdAt),updatedAt:Bl(o.updatedAt)}})}catch(r){throw console.error("Error fetching project work sessions:",r),r}}async updateWorkSessionsProjectId(e,t,r){try{const i=await this.getWorkSessionsByTask(e,t);if(i.length===0)return 0;const a=i.map(async o=>{const s=Sr(this.workSessionsCollection,o.id);return ss(s,{projectId:r,updatedAt:new Date})});return await Promise.all(a),console.log(`✅ Updated ${i.length} work sessions for task ${t} to project ${r}`),i.length}catch(i){throw console.error("Error updating work sessions project ID:",i),i}}async deleteWorkSession(e){try{const t=Sr(this.workSessionsCollection,e);await Tve(t)}catch(t){throw console.error("Error deleting work session:",t),t}}subscribeToWorkSessions(e,t){const r=fn(this.workSessionsCollection,Ot("userId","==",e));return Yv(r,i=>{const a=i.docs.map(o=>{const s=o.data();return{id:o.id,...s,createdAt:Bl(s.createdAt),updatedAt:Bl(s.updatedAt)}});t(a)})}async getRecentWorkSessions(e,t=50){try{const r=fn(this.workSessionsCollection,Ot("userId","==",e),Ua("updatedAt","desc"),wve(t));return(await or(r)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:Bl(o.createdAt),updatedAt:Bl(o.updatedAt)}})}catch(r){throw console.error("Error fetching recent work sessions:",r),r}}}const vo=new b3e,jQ=wn(yt,"tasks"),FQ=wn(yt,"projects"),rn=yy((n,e)=>({tasks:[],projects:[],isAddingTask:!1,editingTaskId:null,showDetailsMenu:!1,isLoading:!1,unsubscribe:null,initializeStore:async()=>{const{user:t,isAuthenticated:r}=Rn.getState();if(!r||!t){n({tasks:[],projects:[],isLoading:!1});return}n({isLoading:!0});const{unsubscribe:i}=e();i&&i();const a=fn(jQ,Ot("userId","==",t.uid),Ua("order","asc")),o=fn(FQ,Ot("userId","==",t.uid)),s=Yv(a,u=>{const d=u.docs.map(h=>({id:h.id,...h.data()}));console.log(`Fetched ${d.length} tasks for user ${t.uid}`),n({tasks:d})}),l=Yv(o,u=>{const d=u.docs.map(h=>({id:h.id,...h.data()}));n({projects:d,isLoading:!1})});n({unsubscribe:()=>{s(),l()}})},cleanupListeners:()=>{const{unsubscribe:t}=e();t&&(t(),n({unsubscribe:null,tasks:[],projects:[]}))},addProject:async t=>{try{const{user:r}=Rn.getState();if(!r)throw new Error("User not authenticated");const i={...t,userId:r.uid};if(t.name==="No Project"){const o=Sr(yt,"projects","no-project");return await dg(o,i),"no-project"}const a=await _R(FQ,i);return g3e(t.name),a.id}catch(r){throw console.error("Error adding project:",r),r}},updateProject:async(t,r)=>{try{const{user:i}=Rn.getState();if(!i)throw new Error("User not authenticated");const a=Sr(yt,"projects",t);await ss(a,r),console.log(`✅ Successfully updated project ${t}`)}catch(i){throw console.error(`❌ Error updating project ${t}:`,i),i}},deleteProject:async t=>{try{const{user:r}=Rn.getState();if(!r)throw new Error("User not authenticated");console.log(`🗑️ Starting deletion of project ${t}...`);const i=fn(jQ,Ot("userId","==",r.uid),Ot("projectId","==",t)),a=await or(i),o=a.docs.map(c=>c.id);if(console.log(`📋 Found ${o.length} tasks in project ${t}`),o.length>0)try{for(const c of o){const u=await vo.getWorkSessionsByTask(r.uid,c);if(console.log(`📋 Found ${u.length} work sessions for task ${c}`),u.length>0){const d=u.map(h=>vo.deleteWorkSession(h.id));await Promise.all(d),console.log(`✅ Deleted ${u.length} work sessions for task ${c}`)}}}catch(c){console.error("❌ Error deleting work sessions for project tasks:",c),console.warn(`⚠️ Work session cleanup failed for project ${t}, but continuing with deletion`)}const s=oD(yt);a.docs.forEach(c=>{s.delete(c.ref)});const l=Sr(yt,"projects",t);s.delete(l),await s.commit(),console.log(`✅ Successfully deleted project ${t}, ${o.length} tasks, and all related work sessions`)}catch(r){throw console.error(`❌ Error deleting project ${t}:`,r),r}},addTask:async t=>{try{console.log("addTask started");const{user:r}=Rn.getState();if(!r)throw new Error("No user found");console.log("User found:",r.uid);const i=wn(yt,"tasks"),{tasks:a}=e();console.log("Current tasks count:",a.length);const o={...t,userId:r.uid,order:a.length,createdAt:new Date,updatedAt:new Date};console.log("About to add task to Firestore:",o);const s=await _R(i,o);return console.log("Firestore addDoc completed, docRef:",s.id),h3e(t.projectId),console.log("Task creation initiated successfully"),s.id}catch(r){throw console.error("Error adding task:",r),r}},updateTask:async(t,r)=>{try{const{user:i}=Rn.getState();if(!i)throw new Error("No user found");const{tasks:a}=e(),o=a.find(u=>u.id===t),s=r.projectId&&o&&r.projectId!==o.projectId,l=Object.fromEntries(Object.entries(r).filter(([u,d])=>d!==void 0)),c=Sr(yt,"tasks",t);if(await ss(c,{...l,updatedAt:new Date}),s&&r.projectId)try{const u=await vo.updateWorkSessionsProjectId(i.uid,t,r.projectId);u>0&&console.log(`🔄 Updated ${u} work sessions for task ${t} to project ${r.projectId}`)}catch(u){console.error("❌ Failed to update work sessions project ID:",u),console.warn("⚠️ Task was updated but work session project IDs may be inconsistent")}n({editingTaskId:null})}catch(i){throw console.error("Error updating task:",i),i}},updateTaskLocally:(t,r)=>{const{tasks:i}=e();i[t]={...i[t],...r,updatedAt:new Date},n({tasks:[...i]})},deleteTask:async t=>{try{const{user:r}=Rn.getState();if(!r)throw new Error("No user found");console.log(`🗑️ Starting deletion of task ${t}...`);try{const a=await vo.getWorkSessionsByTask(r.uid,t);if(console.log(`📋 Found ${a.length} work sessions for task ${t}`),a.length>0){const o=a.map(async s=>(console.log(`🗑️ Deleting work session: ${s.id}`),vo.deleteWorkSession(s.id)));await Promise.all(o),console.log(`✅ Successfully deleted ${a.length} work sessions for task ${t}`)}else console.log(`ℹ️ No work sessions found for task ${t}`)}catch(a){console.error("❌ Error deleting work sessions for task:",a),console.warn(`⚠️ Work session cleanup failed for task ${t}, but continuing with task deletion`)}console.log(`🗑️ Deleting task ${t}...`);const i=Sr(yt,"tasks",t);await Tve(i),console.log(`✅ Successfully deleted task ${t} and all related work sessions`)}catch(r){throw console.error(`❌ Error deleting task ${t}:`,r),r}},toggleTaskCompletion:async(t,r="default")=>{try{const{tasks:i}=e(),a=i.find(u=>u.id===t);if(!a)return null;const o=!a.completed,s=o?"completed":"pomodoro";let l=null;if(o&&r==="pomodoro"&&(l=e().getNextPomodoroTask(t)),o){const{useTimerStore:u}=await Fr(async()=>{const{useTimerStore:h}=await Promise.resolve().then(()=>T3e);return{useTimerStore:h}},[]),d=u.getState();d.currentTask&&d.currentTask.id===t&&(r==="pomodoro"&&l?await d.switchToNextPomodoroTask(l):(d.isRunning&&await d.pause(),await d.setCurrentTask(null)))}const c=Sr(yt,"tasks",t);return await ss(c,{completed:o,status:s,updatedAt:new Date}),o&&f3e(t,a.timeSpent,a.projectId),l}catch(i){throw console.error("Error toggling task completion:",i),i}},updateTaskStatus:async(t,r)=>{try{const{tasks:i}=e(),a=i.find(c=>c.id===t);if(!a)return;const o=r==="completed"?!0:a.status==="completed"?!1:a.completed,s={status:r,completed:o,updatedAt:new Date};r==="pomodoro"&&(s.hideFromPomodoro=!1);const l=Sr(yt,"tasks",t);await ss(l,s)}catch(i){throw console.error("Error updating task status:",i),i}},reorderTasks:async(t,r)=>{try{const{tasks:i}=e(),a=i.findIndex(c=>c.id===t);if(a===-1)return;const o=[...i],[s]=o.splice(a,1);o.splice(r,0,s);const l=o.map(async(c,u)=>{const d=Sr(yt,"tasks",c.id);return ss(d,{order:u,updatedAt:c.id===t?new Date:c.updatedAt})});await Promise.all(l)}catch(i){throw console.error("Error reordering tasks:",i),i}},moveTaskToStatusAndPosition:async(t,r,i)=>{try{const{tasks:a}=e(),o=a.findIndex(v=>v.id===t);if(o===-1)return;const s=a[o],l=r==="completed"?!0:s.status==="completed"?!1:s.completed,c=[...a];c[o]={...s,status:r,completed:l,hideFromPomodoro:r==="pomodoro"?!1:s.hideFromPomodoro};const[u]=c.splice(o,1),d=o<i?i-1:i;c.splice(d,0,u);const h=[],f=Sr(yt,"tasks",t);h.push(ss(f,{status:r,completed:l,hideFromPomodoro:r==="pomodoro"?!1:s.hideFromPomodoro,order:d,updatedAt:new Date}));const m=a;for(let v=0;v<c.length;v++){const y=c[v],w=m.find(S=>S.id===y.id);if(y.id===t||!w||w.order===v)continue;const _=Sr(yt,"tasks",y.id);h.push(ss(_,{order:v,updatedAt:new Date}))}await Promise.all(h)}catch(a){throw console.error("Error moving task to status and position:",a),a}},timeSpentIncrement:async(t,r=1)=>{if(r<=0){console.warn("Increment must be a positive number");return}const{tasks:i}=e(),a=i.find(s=>s.id===t);if(!a)throw console.error("Task not found:",t),new Error("Task not found");const o=a.timeSpent+r;if(o<0)throw console.error("Time spent cannot be negative"),new Error("Time spent cannot be negative");try{const s=Sr(yt,"tasks",t);await ss(s,{timeSpent:o,updatedAt:new Date})}catch(s){throw console.error("Error incrementing time spent:",s),s}},setIsAddingTask:t=>n({isAddingTask:t}),setEditingTaskId:t=>n({editingTaskId:t}),setShowDetailsMenu:t=>n({showDetailsMenu:t}),handleMoveCompletedDown:async()=>{try{const{tasks:t}=e(),r=t.filter(s=>s.completed),a=[...t.filter(s=>!s.completed),...r],o=oD(yt);a.forEach((s,l)=>{const c=Sr(yt,"tasks",s.id);o.update(c,{order:l})}),await o.commit(),n({showDetailsMenu:!1})}catch(t){throw console.error("Error moving completed tasks:",t),t}},handleArchiveCompleted:async()=>{try{const{tasks:t}=e(),r=t.filter(a=>a.completed),i=oD(yt);r.forEach(a=>{const o=Sr(yt,"tasks",a.id);i.update(o,{hideFromPomodoro:!0,updatedAt:new Date})}),await i.commit(),n({showDetailsMenu:!1})}catch(t){throw console.error("Error archiving completed tasks:",t),t}},cleanupOrphanedWorkSessions:async()=>{try{const{user:t}=Rn.getState(),{tasks:r}=e();if(!t)throw new Error("No user found");console.log("🧹 Starting cleanup of orphaned work sessions...");const i=await vo.getRecentWorkSessions(t.uid,1e3);console.log(`Found ${i.length} total work sessions`);const a=new Set(r.map(l=>l.id));console.log(`Found ${a.size} current tasks`);const o=i.filter(l=>!a.has(l.taskId));if(console.log(`Found ${o.length} orphaned work sessions to delete`),o.length===0)return console.log("✅ No orphaned work sessions found"),{deletedCount:0,orphanedSessions:[]};const s=o.map(l=>vo.deleteWorkSession(l.id));return await Promise.all(s),console.log(`✅ Successfully deleted ${o.length} orphaned work sessions`),{deletedCount:o.length,orphanedSessions:o.map(l=>({id:l.id,taskId:l.taskId,duration:l.duration,date:l.date}))}}catch(t){throw console.error("Error cleaning up orphaned work sessions:",t),t}},getNextPomodoroTask:t=>{const{tasks:r}=e(),i=r.filter(s=>s.status==="pomodoro"&&!s.completed&&!s.hideFromPomodoro).sort((s,l)=>s.order-l.order);console.log("Finding next Pomodoro task:",{currentTaskId:t,allPomodoroTasks:i.map(s=>({id:s.id,title:s.title,order:s.order}))});const a=i.findIndex(s=>s.id===t),o=a>=0&&a<i.length-1?i[a+1]:null;return console.log("Next task result:",{currentIndex:a,nextTask:o?{id:o.id,title:o.title}:null}),o}}));Rn.subscribe(n=>{const e=rn.getState();if(!n.isInitialized){console.log("TaskStore - User store not initialized yet, waiting...");return}console.log("TaskStore - User state changed:",{isAuthenticated:n.isAuthenticated,hasUser:!!n.user,isInitialized:n.isInitialized}),n.isAuthenticated&&n.user?(console.log("TaskStore - User authenticated, initializing..."),e.initializeStore()):(console.log("TaskStore - User not authenticated, cleaning up..."),e.cleanupListeners())});const gG=n=>{const e=Math.floor(n/60),t=n%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},Kv=n=>{const e=Math.floor(n/60),t=n%60;return e===0?`${t}m`:t===0?`${e}h`:`${e}h ${t}m`},w3e=()=>{const n=Date.now().toString(36),e=Math.random().toString(36).substr(2,9);return`${n}-${e}`},_3e=()=>{const n=localStorage.getItem("timer-device-id");if(n)return n;const e=w3e();return localStorage.setItem("timer-device-id",e),e},kO=(n=new Date)=>Ji(n),Ji=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`},x3e=(n,e)=>{let t=e.getTime()-n.getTime();t<0&&(t+=24*60*60*1e3);let r=Math.round(t/(1e3*60));return r===0&&(r=30),r>480&&(r=480),r},UF="timerStates";class S3e{constructor(){hn(this,"unsubscribe",null);hn(this,"deviceId");this.deviceId=_3e()}async saveTimerState(e,t){try{const r=Sr(yt,UF,e),i={userId:e,...t,activeDeviceId:this.deviceId,updatedAt:new Date};await dg(r,i,{merge:!0})}catch(r){throw console.error("Error saving timer state:",r),r}}async loadTimerState(e){try{const t=Sr(yt,UF,e),r=await sw(t);return r.exists()?r.data():null}catch(t){throw console.error("Error loading timer state:",t),t}}async deleteTimerState(e){try{const t=Sr(yt,UF,e);await dg(t,{currentTime:0,totalTime:0,mode:"pomodoro",sessionsCompleted:0,isRunning:!1,currentTaskId:null,lastUpdated:jo(),deviceId:this.deviceId,userId:e})}catch(t){throw console.error("Error deleting timer state:",t),t}}isActiveDevice(e){return(e==null?void 0:e.activeDeviceId)===this.deviceId}getDeviceId(){return this.deviceId}}const $Q=new S3e,pi=yy((n,e)=>{const t=async(r,i=3)=>{const a=rn.getState();let o=0;for(;o<i;){const s=a.tasks.find(l=>l.id===r);if(s)return s;await new Promise(l=>setTimeout(l,Math.pow(2,o)*1e3)),o++}return null};return{isRunning:!1,currentTime:tD.timer.pomodoro*60,totalTime:tD.timer.pomodoro*60,mode:"pomodoro",sessionsCompleted:0,currentTask:null,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:tD.timer,enableStartPauseBtn:!0,isLoading:!1,isSyncing:!1,lastSyncTime:null,isActiveDevice:!0,syncError:null,taskLoadRetryCount:0,isTaskLoading:!1,taskLoadError:null,start:async()=>{const r=e();r.isActiveDevice||n({isActiveDevice:!0}),!r.isRunning&&r.currentTask&&await e().createActiveSession(),n({isRunning:!0,syncError:null}),r.mode==="pomodoro"&&r.currentTask&&LQ(r.currentTask.id,r.currentTask.timeEstimated||0),e().saveToDatabase()},pause:async()=>{e().activeSession&&await e().completeActiveSession("paused"),n({isRunning:!1}),e().saveToDatabase()},reset:()=>{const{mode:r,settings:i}=e(),a=i[r]*60;n({currentTime:a,totalTime:a,isRunning:!1,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:i}),e().saveToDatabase()},skip:async()=>{const{mode:r,sessionsCompleted:i,settings:a,currentTask:o,activeSession:s}=e();if(s&&await e().completeActiveSession("completed"),r==="pomodoro"&&o){const f=(a.pomodoro*60-e().currentTime)/60;p3e(o.id,f)}let l=r,c=i;r==="pomodoro"?(c=i+1,c%a.longBreakInterval===0?l="longBreak":l="shortBreak"):l="pomodoro";const u=a[l]*60,d=a.autoStartPomodoros&&l==="pomodoro",h=a.autoStartBreaks&&(l==="shortBreak"||l==="longBreak");n({mode:l,currentTime:u,totalTime:u,isRunning:d||h,sessionsCompleted:c,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:a}),(d||h)&&o&&(await e().createActiveSession(),d&&LQ(o.id,o.timeEstimated||0)),e().saveToDatabase()},tick:()=>{const{currentTime:r,totalTime:i,isActiveDevice:a,isRunning:o,activeSession:s,lastCountedMinute:l,mode:c}=e();if(!a||!o)return;const{timeSpentIncrement:u}=rn.getState();if(s&&c==="pomodoro"){const d=Math.floor(r/60);l!==null&&l!==d&&d<l&&(console.log("Minute boundary crossed:",{from:l,to:d,sessionId:s.sessionId,taskId:s.taskId}),e().updateActiveSession(),s.taskId&&u(s.taskId,1)),(l===null||l!==d)&&n({lastCountedMinute:d})}r>0?(n({currentTime:r-1}),e().saveToLocalStorage(),r%60===0&&e().saveToDatabase()):r===0&&e().skip()},setMode:r=>{const{settings:i}=e(),a=i[r]*60;n({mode:r,currentTime:a,totalTime:a,isRunning:!1,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:i}),e().saveToDatabase()},setCurrentTask:async r=>{const i=e();i.isRunning&&i.activeSession&&i.currentTask&&r&&i.currentTask.id!==r.id?(await e().switchActiveSession(),n({currentTask:r,sessionStartTimerPosition:null,lastCountedMinute:null}),await e().createActiveSession()):n({currentTask:r}),e().saveToDatabase()},setSettings:r=>{const i=e();if(i.currentTime===i.totalTime&&!i.isRunning&&i.sessionsCompleted===0){const{mode:o}=i,s=r[o]*60;n({settings:r,currentTime:s,totalTime:s,isRunning:!1}),e().saveToDatabase()}else n({settings:r})},createActiveSession:async()=>{const{currentTask:r,mode:i,currentTime:a}=e(),{user:o}=Rn.getState();if(!(!r||!o))try{const s=await vo.createActiveSession(r.id,r.projectId,o.uid,i),l={sessionId:s,taskId:r.id,startTime:new Date,lastUpdateTime:new Date,status:"active"},c=Math.floor(a/60);n({activeSession:l,sessionStartTimerPosition:a,lastCountedMinute:null}),console.log("Created new session:",{sessionId:s,taskId:r.id,startTimerPosition:a,startMinute:c,timer_display:`${Math.floor(a/60)}:${String(a%60).padStart(2,"0")}`,sessionType:i})}catch(s){console.error("Failed to create active session:",s)}},updateActiveSession:async()=>{const{activeSession:r}=e();if(r)try{await vo.incrementDuration(r.sessionId,1),n({activeSession:{...r,lastUpdateTime:new Date}}),console.log("Session updated: +1 minute",{sessionId:r.sessionId,lastUpdateTime:new Date})}catch(i){console.error("Failed to update active session:",i)}},switchActiveSession:async()=>{const{activeSession:r}=e();if(r)try{const i={status:"switched",endTime:new Date,notes:"Task switched"};await vo.updateSession(r.sessionId,i),n({activeSession:null,lastCountedMinute:null})}catch(i){console.error("Failed to switch active session:",i)}},completeActiveSession:async r=>{const{activeSession:i,lastCountedMinute:a,currentTime:o}=e();if(i)try{let s=0;if(a!==null){const c=Math.floor(o/60);c<a&&(s=a-c)}s>0&&await vo.incrementDuration(i.sessionId,s);const l={status:r,endTime:new Date,notes:`Session ${r}${s>0?`: +${s}m remaining`:""}`};await vo.updateSession(i.sessionId,l),n({activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null}),console.log("Session completed:",{sessionId:i.sessionId,status:r,remainingMinutes:s})}catch(s){console.error("Failed to complete active session:",s)}},cleanupOrphanedSessions:async()=>{const{user:r}=Rn.getState();if(r)try{const i=await vo.cleanupOrphanedSessions(r.uid);console.log(`Cleaned up ${i} orphaned sessions`)}catch(i){console.error("Failed to cleanup orphaned sessions:",i)}},initializePersistence:async r=>{try{n({isLoading:!0,syncError:null}),await e().loadFromLocalStorage();const i=rn.getState();i.tasks.length===0&&i.initializeStore().catch(s=>{console.warn("Background task store initialization failed:",s)}),e().cleanupOrphanedSessions().catch(s=>{console.warn("Background cleanup failed:",s)});const a=localStorage.getItem("lastRemoteSync");(!a||Date.now()-parseInt(a)>5*60*1e3)&&$Q.loadTimerState(r).then(s=>{s&&e().syncFromRemoteState(s),localStorage.setItem("lastRemoteSync",Date.now().toString())}).catch(s=>{console.warn("Background remote sync failed:",s),n({syncError:"Failed to sync timer state"})}),n({isLoading:!1})}catch(i){console.error("Failed to initialize timer persistence:",i),n({isLoading:!1,syncError:"Failed to sync timer state"})}},saveToDatabase:async()=>{const r=Rn.getState();if(!r.user||!r.isAuthenticated)return;const i=e();if(i.isActiveDevice)try{n({isSyncing:!0,syncError:null});const a={currentTime:i.currentTime,totalTime:i.totalTime,mode:i.mode,sessionsCompleted:i.sessionsCompleted,isRunning:i.isRunning,currentTaskId:i.currentTask?i.currentTask.id:null};i.activeSession&&(a.sessionStartTime=i.activeSession.startTime,a.activeSessionId=i.activeSession.sessionId,a.sessionStartTimerPosition=i.sessionStartTimerPosition),await $Q.saveTimerState(r.user.uid,a),n({isSyncing:!1,lastSyncTime:new Date})}catch(a){console.error("Failed to save timer state:",a),n({isSyncing:!1,syncError:"Failed to save timer state"})}},saveToLocalStorage:()=>{var a;const r=e(),i={currentTime:r.currentTime,totalTime:r.totalTime,mode:r.mode,sessionsCompleted:r.sessionsCompleted,isRunning:r.isRunning,currentTaskId:((a=r.currentTask)==null?void 0:a.id)||null,lastSaveTime:new Date().toISOString(),activeSession:r.activeSession,sessionStartTimerPosition:r.sessionStartTimerPosition,currentTaskDetails:r.currentTask?{id:r.currentTask.id,title:r.currentTask.title,projectId:r.currentTask.projectId,timeSpent:r.currentTask.timeSpent,timeEstimated:r.currentTask.timeEstimated}:null};try{localStorage.setItem("timerState",JSON.stringify(i))}catch(o){console.error("Failed to save to localStorage:",o)}},loadFromLocalStorage:async()=>{var i;e();const r=localStorage.getItem("timerState");if(r)try{n({isTaskLoading:!0,taskLoadError:null});const a=JSON.parse(r);n({currentTime:a.currentTime,totalTime:a.totalTime,mode:a.mode,sessionsCompleted:a.sessionsCompleted,isRunning:a.isRunning,activeSession:a.activeSession,sessionStartTimerPosition:a.sessionStartTimerPosition}),a.currentTaskDetails?(n({currentTask:{...a.currentTaskDetails,completed:!1,status:"pomodoro",userId:((i=Rn.getState().user)==null?void 0:i.uid)||"",createdAt:new Date,updatedAt:new Date,order:0},isTaskLoading:!1}),a.currentTaskId&&t(a.currentTaskId,1).then(o=>{o&&n({currentTask:o})}).catch(o=>{console.warn("Background task verification failed:",o)})):n({isTaskLoading:!1})}catch(a){console.error("Failed to parse timer state from localStorage:",a),n({isTaskLoading:!1,taskLoadError:"Failed to load saved timer state"})}},syncFromRemoteState:async r=>{const i=r.currentTaskId||null,a=i&&rn.getState().tasks.find(o=>o.id===i)||null;if(n({...r,currentTask:a,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null}),r.isRunning&&a&&r.mode==="pomodoro")try{if(r.activeSessionId){const{user:o}=Rn.getState();if(o){const l=(await vo.getActiveSessions(o.uid)).find(c=>c.id===r.activeSessionId&&c.status==="active");if(l){console.log("Resuming existing session:",{sessionId:l.id,duration:l.duration,reason:"page reload"});return}}}await e().createActiveSession(),console.log("Created new session:",{taskId:a.id,reason:"no active session found"})}catch(o){console.error("Failed to handle session during page reload:",o)}},cleanupPersistence:()=>{n({isLoading:!1,isSyncing:!1,lastSyncTime:null,isActiveDevice:!0,syncError:null,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null})},resetTimerState:()=>{const{settings:r}=e();n({isRunning:!1,currentTime:r.pomodoro*60,totalTime:r.pomodoro*60,mode:"pomodoro",sessionsCompleted:0,currentTask:null,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,isActiveDevice:!0,syncError:null})},setEnableStartPauseBtn:r=>{n({enableStartPauseBtn:r})},switchToNextPomodoroTask:async r=>{const{mode:i,sessionsCompleted:a,settings:o,currentTask:s,activeSession:l}=e();console.log("switchToNextPomodoroTask called:",{nextTaskId:r.id,nextTaskTitle:r.title,currentTaskId:s==null?void 0:s.id,currentTaskTitle:s==null?void 0:s.title,mode:i,hasActiveSession:!!l}),i==="pomodoro"&&s&&r.id!==s.id?(l&&(console.log("Completing current session:",l.sessionId),await e().completeActiveSession("completed")),console.log("Setting new current task:",r.title),n({currentTask:r,sessionStartTimerPosition:null,lastCountedMinute:null}),console.log("Creating new session for task:",r.title),await e().createActiveSession()):console.log("Skipping task switch - conditions not met"),e().saveToDatabase()}}});Rn.subscribe(async n=>{const e=pi.getState();if(!n.isInitialized){console.log("TimerStore - User store not initialized yet, waiting...");return}if(console.log("TimerStore - User state changed:",{isAuthenticated:n.isAuthenticated,hasUser:!!n.user,isLoading:n.isLoading,isInitialized:n.isInitialized}),n.isAuthenticated&&n.user&&!n.isLoading){console.log("TimerStore - User authenticated, initializing persistence...");try{await e.initializePersistence(n.user.uid),e.setSettings(n.user.settings.timer)}catch(t){console.error("Failed to initialize timer persistence:",t)}}else console.log("TimerStore - User not authenticated, cleaning up..."),e.cleanupPersistence(),e.resetTimerState()});const T3e=Object.freeze(Object.defineProperty({__proto__:null,useTimerStore:pi},Symbol.toStringTag,{value:"Module"})),E3e=({currentTime:n,totalTime:e,size:t=300,strokeWidth:r=12,color:i="#BA4949",bgColor:a="var(--border-color)",children:o,className:s=""})=>{const[l,c]=K.useState(t);K.useEffect(()=>{const m=()=>{const v=Math.min(window.innerWidth-80,300);c(t>v?v:t)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[t]);const u=l/2-r/2,d=2*Math.PI*u,h=e>0?n/e:0,f=d*(1-h);return E.jsxs("div",{className:`timer-circle relative ${s}`,style:{width:l,height:l},children:[E.jsxs("svg",{width:l,height:l,viewBox:`0 0 ${l} ${l}`,children:[E.jsx("circle",{className:"timer-circle-bg",cx:l/2,cy:l/2,r:u,fill:"none",stroke:a,strokeWidth:r}),E.jsx("circle",{className:"timer-circle-progress",cx:l/2,cy:l/2,r:u,fill:"none",stroke:i,strokeWidth:r,strokeLinecap:"round",strokeDasharray:d,strokeDashoffset:f,style:{transform:"rotate(-90deg)",transformOrigin:"center",transition:"stroke-dashoffset 1s linear"}})]}),E.jsx("div",{className:"timer-text absolute inset-0 flex flex-col items-center justify-center",children:o})]})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3e=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),C3e=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),BQ=n=>{const e=C3e(n);return e.charAt(0).toUpperCase()+e.slice(1)},Uye=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),D3e=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k3e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3e=K.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},l)=>K.createElement("svg",{ref:l,...k3e,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Uye("lucide",i),...!a&&!D3e(s)&&{"aria-hidden":"true"},...s},[...o.map(([c,u])=>K.createElement(c,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=(n,e)=>{const t=K.forwardRef(({className:r,...i},a)=>K.createElement(I3e,{ref:a,iconNode:e,className:Uye(`lucide-${A3e(BQ(n))}`,`lucide-${n}`,r),...i}));return t.displayName=BQ(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],P3e=At("activity",M3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3e=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],R3e=At("beaker",O3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],L3e=At("bell",N3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3e=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],IO=At("bot",j3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3e=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],$3e=At("brain",F3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3e=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],U3e=At("bug",B3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],z3e=At("calendar-days",V3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],q3e=At("calendar",H3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],W3e=At("chart-column",G3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3e=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],K3e=At("check-check",Y3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Z3e=At("check",X3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vye=At("chevron-down",Q3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],e4e=At("chevron-left",J3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],zye=At("chevron-right",t4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],r4e=At("circle-alert",n4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],MO=At("circle-check-big",i4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],o4e=At("circle-help",a4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],IR=At("circle-x",s4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],c4e=At("clock",l4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4e=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Nz=At("database",u4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4e=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],h4e=At("ellipsis-vertical",d4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],p4e=At("external-link",f4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],m4e=At("eye-off",g4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y4e=At("eye",v4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4e=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],w4e=At("facebook",b4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],mG=At("file-text",_4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4e=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],S4e=At("flame",x4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4e=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],E4e=At("focus",T4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],C4e=At("folder",A4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4e=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],k4e=At("github",D4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],VF=At("globe",I4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],P4e=At("grid-3x3",M4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],R4e=At("info",O4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4e=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],L4e=At("instagram",N4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],UQ=At("key",j4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],$4e=At("link",F4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4e=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],VQ=At("linkedin",B4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4e=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],V4e=At("list-checks",U4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4e=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],zQ=At("loader",z4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],q4e=At("mail",H4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4e=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],W4e=At("maximize",G4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4e=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],K4e=At("menu",Y4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4e=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],CS=At("message-circle",X4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4e=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],Q4e=At("minimize",Z4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],e$e=At("monitor",J4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$e=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],n$e=At("moon",t$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$e=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],i$e=At("music",r$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],o$e=At("palette",a$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],l$e=At("panel-right-close",s$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],u$e=At("panel-right-open",c$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$e=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],h$e=At("pause",d$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$e=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],p$e=At("play",f$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],m$e=At("plus",g$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Lz=At("refresh-cw",v$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],b$e=At("rotate-ccw",y$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_$e=At("send",w$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$e=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Hye=At("settings",x$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$e=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],T$e=At("shopping-cart",S$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$e=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],A$e=At("skip-forward",E$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$e=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],D$e=At("square-check-big",C$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],I$e=At("square-pen",k$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$e=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],P$e=At("sun",M$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$e=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],R$e=At("test-tube",O$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$e=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],L$e=At("timer",N$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$e=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],F$e=At("trash-2",j$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],B$e=At("trending-up",$$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qye=At("triangle-alert",U$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$e=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],z$e=At("twitter",V$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],q$e=At("user",H$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],W$e=At("users",G$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],HQ=At("video",Y$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jz=At("x",K$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Z$e=At("wrench",X$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$e=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],J$e=At("youtube",Q$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eBe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Gye=At("zap",eBe),tBe={"timer-line":L$e,"task-line":D$e,"dashboard-line":W3e,"calendar-line":q3e,"settings-line":Hye,"question-line":o4e,"arrow-left-s-line":e4e,"arrow-right-s-line":zye,"menu-line":K4e,"layout-right-line":u$e,"layout-right-2-line":l$e,"check-line":Z3e,"close-line":jz,"add-line":m$e,"edit-line":I$e,"delete-bin-line":F$e,"pause-line":h$e,"restart-line":b$e,"skip-forward-line":A$e,"play-line":p$e,"notification-line":L3e,"fullscreen-line":W4e,"fullscreen-exit-line":Q4e,"time-line":c4e,"calendar-event-line":z3e,"arrow-down-s-line":Vye,"fire-line":S4e,"focus-3-line":E4e,"brain-line":$3e,"list-check":V4e,"layout-grid-line":P4e,"checkbox-multiple-line":K3e,"more-2-fill":h4e,"folder-line":C4e,"palette-line":o$e,"sun-line":P$e,"moon-line":n$e,"computer-line":e$e,"database-2-line":Nz,"refresh-line":Lz,"information-line":R4e,"error-warning-line":qye,"test-tube-line":R$e,"tools-line":Z$e,"ri-global-line":VF,"ri-github-line":k4e,"ri-facebook-line":w4e,"ri-file-list-line":mG,"ri-instagram-line":L4e,"ri-linkedin-line":VQ,"ri-twitter-line":z$e,"ri-youtube-line":J$e,"ri-linkedin-box-line":VQ,"ri-discord-line":CS,"ri-telegram-line":CS,"ri-whatsapp-line":CS,"ri-snapchat-line":CS,"ri-music-line":i$e,"ri-video-line":HQ,"ri-mail-line":q4e,"ri-amazon-line":T$e,"ri-netflix-line":HQ,"ri-reddit-line":CS,"ri-pinterest-line":VF,"ri-google-line":VF,"flask-line":R3e,"links-line":$4e,"bug-line":U3e},bt=({name:n,className:e="",size:t=20})=>{const r=tBe[n];return r?E.jsx(r,{size:t,className:e,"aria-hidden":"true"}):(console.warn(`Icon "${n}" not found in iconMap`),E.jsx("div",{className:`w-5 h-5 ${e}`}))},nBe=({className:n=""})=>{var M;const e=pi(P=>P.currentTime),t=pi(P=>P.totalTime),r=pi(P=>P.isRunning),i=pi(P=>P.mode),a=pi(P=>P.sessionsCompleted),o=pi(P=>P.currentTask),s=pi(P=>P.enableStartPauseBtn),l=pi(P=>P.isLoading),c=pi(P=>P.isSyncing),u=pi(P=>P.syncError),d=pi(P=>P.isTaskLoading),h=pi(P=>P.taskLoadError),{start:f,pause:m,reset:v,skip:y,setMode:w}=pi(),_=()=>{if(!s){console.warn("Start/Pause button is disabled");return}r?m():f()},S=()=>{v()},A=()=>{y()},C=gG(e),D=()=>d?E.jsxs("div",{className:"flex items-center text-sm text-text-secondary mb-2",children:[E.jsx(bt,{name:"loader-4-line",className:"mr-1 animate-spin",size:16}),"Recovering task state..."]}):h?E.jsxs("div",{className:"flex items-center text-sm text-red-500 mb-2",children:[E.jsx(bt,{name:"error-warning-line",className:"mr-1",size:16}),h]}):u&&!l&&!c?E.jsxs("div",{className:"flex items-center text-sm text-red-500 mb-2",children:[E.jsx(bt,{name:"error-warning-line",className:"mr-1",size:16}),"Connection error"]}):null;return E.jsxs("div",{className:`flex flex-col items-center max-w-full w-full ${n}`,children:[E.jsxs("div",{className:"mb-8 text-center w-full",children:[E.jsxs("div",{className:"inline-flex items-center bg-background-container p-1 rounded-full mb-2 flex-wrap justify-center",children:[E.jsx("button",{className:`px-4 sm:px-6 py-2 rounded-full font-medium transition-all !rounded-button whitespace-nowrap text-sm sm:text-base
            ${i==="pomodoro"?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,onClick:()=>w("pomodoro"),disabled:l||d,children:"Pomodoro"}),E.jsx("button",{className:`px-4 sm:px-6 py-2 rounded-full font-medium transition-all !rounded-button whitespace-nowrap text-sm sm:text-base
            ${i==="shortBreak"?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,onClick:()=>w("shortBreak"),disabled:l||d,children:"Short Break"}),E.jsx("button",{className:`px-4 sm:px-6 py-2 rounded-full font-medium transition-all !rounded-button whitespace-nowrap text-sm sm:text-base
            ${i==="longBreak"?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,onClick:()=>w("longBreak"),disabled:l||d,children:"Long Break"})]}),E.jsxs("p",{className:"text-sm text-text-secondary",children:["Session ",a+1," of ",pi.getState().settings.longBreakInterval]}),D()]}),E.jsxs(E3e,{currentTime:e,totalTime:t,className:"mb-6",size:Math.min(300,window.innerWidth-80),children:[E.jsx("div",{className:"text-4xl sm:text-5xl font-bold text-text-primary",children:C}),E.jsx("div",{className:"text-sm text-text-secondary",children:"remaining"})]}),E.jsxs("div",{className:"flex items-center space-x-4 mb-8 flex-wrap justify-center",children:[E.jsx("button",{className:`px-5 sm:px-6 py-3 rounded-full font-medium bg-primary text-white hover:bg-opacity-90 !rounded-button whitespace-nowrap m-1 ${!s||l||d?"opacity-50 cursor-not-allowed":""}`,onClick:_,disabled:l||d||!s,children:E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:`${r?"pause":"play"}-line`,size:20})}),E.jsx("span",{className:"ml-2",children:r?"Pause":"Start"})]})}),E.jsx("button",{className:"p-3 rounded-full border border-border text-text-primary hover:bg-background-secondary !rounded-button whitespace-nowrap m-1 disabled:opacity-50",onClick:S,disabled:l||d,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"restart-line",size:20})})}),E.jsx("button",{className:"p-3 rounded-full border border-border text-text-primary hover:bg-background-secondary !rounded-button whitespace-nowrap m-1 disabled:opacity-50",onClick:A,disabled:l||d,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"skip-forward-line",size:20})})})]}),E.jsxs("div",{className:"w-full max-w-md bg-background-container rounded-lg p-4",children:[E.jsx("p",{className:"text-text-primary mb-2 break-words text-left",children:d?E.jsxs("span",{className:"flex items-center",children:[E.jsx(bt,{name:"loader-4-line",className:"mr-2 animate-spin",size:16}),"Recovering task..."]}):o?o.title:"Select a task to start working"}),E.jsxs("div",{className:"flex items-center justify-between text-sm text-text-secondary flex-wrap gap-2 text-left",children:[E.jsx("span",{className:"break-words text-left",children:o?`Project: ${((M=rn.getState().projects.find(P=>P.id===o.projectId))==null?void 0:M.name)||"Unknown Project"}`:"No project selected"}),E.jsx("span",{className:"text-left",children:o?`Est: ${o.timeSpent}/${o.timeEstimated}m`:"Est: --"})]})]})]})},rBe=()=>E.jsx(nBe,{});function Wye(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Wye(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Gr(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Wye(n))&&(r&&(r+=" "),r+=e);return r}const fg=({children:n,className:e,title:t,action:r,noPadding:i=!1,fullHeight:a=!1})=>E.jsxs("div",{className:Gr("bg-background-secondary rounded-lg shadow-sm border border-border",a?"h-full":"",e),children:[t&&E.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[E.jsx("h3",{className:"text-lg font-medium text-text-primary",children:t}),r&&E.jsx("div",{className:"flex items-center",children:r})]}),E.jsx("div",{className:Gr(!i&&"p-6"),children:n})]}),qg=yy((n,e)=>({selectedRange:{rangeType:"all time",startDate:null,endDate:null},workSessions:[],focusTimeView:"daily",unsubscribe:null,setSelectedRange:t=>n({selectedRange:t}),setWorkSessions:t=>n({workSessions:t}),setFocusTimeView:t=>n({focusTimeView:t}),subscribeWorkSessions:t=>{console.log("DashboardStore - Subscribing to work sessions for user:",t);const{unsubscribe:r}=e();r&&r();const i=vo.subscribeToWorkSessions(t,a=>{console.log("DashboardStore - Received work sessions:",a.length),console.log("DashboardStore - Sample work sessions:",a.slice(0,3)),console.log("DashboardStore - Today's sessions:",a.filter(o=>{const s=new Date(o.date),l=new Date;return s.toDateString()===l.toDateString()}).length),n({workSessions:a})});n({unsubscribe:i})},cleanupListeners:()=>{const{unsubscribe:t}=e();t&&(t(),n({unsubscribe:null,workSessions:[]}))}}));Rn.subscribe(n=>{var t;const e=qg.getState();if(!n.isInitialized){console.log("DashboardStore - User store not initialized yet, waiting...");return}console.log("DashboardStore - User state changed:",{isAuthenticated:n.isAuthenticated,hasUser:!!n.user,userId:(t=n.user)==null?void 0:t.uid,isInitialized:n.isInitialized}),n.isAuthenticated&&n.user?(console.log("DashboardStore - User logged in, subscribing to work sessions"),e.subscribeWorkSessions(n.user.uid)):(console.log("DashboardStore - User logged out, cleaning up"),e.setWorkSessions([]),e.cleanupListeners())});const iBe=Object.freeze(Object.defineProperty({__proto__:null,useDashboardStore:qg},Symbol.toStringTag,{value:"Module"})),aBe=()=>{const{workSessions:n}=qg(),[e,t]=K.useState({dailyAverage:{hours:0,minutes:0},totalFocus:{hours:0,minutes:0},weeklyGoal:{current:0,target:25,progress:0},journey:{current:0,target:1e4,progress:0}}),[r,i]=K.useState(!1);return K.useEffect(()=>{(()=>{i(!0);const o={};let s=0;const l=new Date,c=l.getDay()===0?6:l.getDay()-1;l.setDate(l.getDate()-c),l.setHours(0,0,0,0),n.filter(h=>h.sessionType==="pomodoro"||h.sessionType==="manual").forEach(h=>{const f=h.date,m=h.duration;o[f]?o[f]+=m:o[f]=m,new Date(f)>=l&&(s+=m)});const u=Object.values(o).reduce((h,f)=>h+f,0),d=u/Object.keys(o).length||0;t({dailyAverage:{hours:Math.floor(d/60),minutes:Math.floor(d%60)},totalFocus:{hours:Math.floor(u/60),minutes:u%60},weeklyGoal:{current:parseFloat((s/60).toFixed(1)),target:25,progress:Math.min(s/60/25*100,100)},journey:{current:Math.floor(u/60),target:1e4,progress:parseFloat((u/60/1e4*100).toFixed(2))}}),i(!1)})()},[n]),r?E.jsx(fg,{title:"Average Focus Time",children:E.jsx("div",{className:"flex items-center justify-center h-40",children:E.jsx("div",{className:"text-text-secondary",children:"Loading focus statistics..."})})}):E.jsxs(fg,{title:"Average Focus Time",children:[E.jsxs("div",{className:"flex items-center justify-between mb-8",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"text-3xl font-bold text-text-primary",children:[e.dailyAverage.hours,"h ",e.dailyAverage.minutes,"m"]}),E.jsx("p",{className:"text-sm text-text-secondary mt-2",children:"Daily average"})]}),E.jsxs("div",{children:[E.jsxs("div",{className:"text-3xl font-bold text-text-primary",children:[e.totalFocus.hours,"h ",e.totalFocus.minutes,"m"]}),E.jsx("p",{className:"text-sm text-text-secondary mt-2",children:"Total focus time"})]})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[E.jsx("span",{className:"text-text-secondary",children:"Weekly goal (25h)"}),E.jsxs("span",{className:"font-medium text-text-primary",children:[e.weeklyGoal.current,"h / ",e.weeklyGoal.target,"h"]})]}),E.jsx("div",{className:"w-full h-2 bg-background-container rounded-full overflow-hidden",children:E.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${e.weeklyGoal.progress}%`}})})]}),E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[E.jsx("span",{className:"text-text-secondary",children:"Journey to 10,000 hours"}),E.jsxs("span",{className:"font-medium text-text-primary",children:[e.journey.current,"h / ",e.journey.target,"h"]})]}),E.jsx("div",{className:"w-full h-2 bg-background-container rounded-full overflow-hidden",children:E.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${e.journey.progress}%`}})})]})]})]})},oBe=(n,e)=>{const t=n.timeSpent||0;return{id:n.id,userId:n.userId,projectId:n.projectId,name:n.title,description:n.description||"",completed:n.completed,totalFocusTime:t,createdAt:n.createdAt,status:n.status,timeSpent:n.timeSpent,timeEstimated:n.timeEstimated,order:n.order,hideFromPomodoro:n.hideFromPomodoro,updatedAt:n.updatedAt}},sBe=n=>{if(n.length===0)return{currentStreak:0,longestStreak:0,totalFocusDays:0,streakDates:[]};const e=new Map;n.forEach(u=>{const d=u.date;e.has(d)||e.set(d,[]),e.get(d).push(u)});const t=Array.from(e.keys()).map(u=>new Date(u)).sort((u,d)=>u.getTime()-d.getTime());if(t.length===0)return{currentStreak:0,longestStreak:0,totalFocusDays:0,streakDates:[]};let r=0,i=0;const a=new Date;a.setHours(0,0,0,0);const o=t[t.length-1];if(o.setHours(0,0,0,0),Math.floor((a.getTime()-o.getTime())/(1e3*60*60*24))<=1){r=1;for(let u=t.length-2;u>=0;u--){const d=t[u+1],h=t[u];if(Math.floor((d.getTime()-h.getTime())/(1e3*60*60*24))===1)r++;else break}}let l=1;for(let u=1;u<t.length;u++){const d=t[u],h=t[u-1];Math.floor((d.getTime()-h.getTime())/(1e3*60*60*24))===1?l++:(i=Math.max(i,l),l=1)}i=Math.max(i,l);const c=t.map(u=>({date:u,hasFocused:!0}));return{currentStreak:r,longestStreak:i,totalFocusDays:t.length,streakDates:c}},lBe=async(n,e,t)=>{try{const r=new Date,i=new Date(r);i.setDate(r.getDate()-1);const a=i.toISOString().split("T")[0];await vo.upsertWorkSession({userId:n,taskId:e,projectId:t,date:a},120);const s=new Date(r).toISOString().split("T")[0];await vo.upsertWorkSession({userId:n,taskId:e,projectId:t,date:s},90);const l=new Date(r);l.setDate(r.getDate()-3);const c=l.toISOString().split("T")[0];await vo.upsertWorkSession({userId:n,taskId:e,projectId:t,date:c},45),console.log("✅ Test work sessions created successfully!"),console.log("🎯 Check your dashboard to see the sync in action")}catch(r){console.error("❌ Failed to create test work sessions:",r)}},cBe=()=>{const[n,e]=K.useState(()=>{const S=new Date;return new Date(S.getFullYear(),S.getMonth(),1)}),[t,r]=K.useState([]),[i,a]=K.useState(null),{workSessions:o}=qg(),{user:s}=Rn(),l=sBe(o);K.useEffect(()=>{if(o.length>0){const S=new Date,A=new Date(S.getFullYear(),S.getMonth(),1);e(A)}},[o.length]);const c=()=>{const S=new Date(n);S.setMonth(S.getMonth()-1),e(S)},u=()=>{const S=new Date(n);S.setMonth(S.getMonth()+1),e(S)},d=(S,A)=>{if(!A)return!1;const C=new Date(S).toDateString(),D=typeof A=="string"?new Date(A).toDateString():A.toDateString();return C===D},h=S=>{const A=kO(S),C=o.some(D=>D.date===A);return A===kO(new Date)&&console.log(`Today (${A}): has session = ${C}`),C&&console.log(`Date ${A} has work session`),C};K.useEffect(()=>{const S=n.getFullYear(),A=n.getMonth(),C=new Date(S,A,1),D=new Date(C);D.setDate(D.getDate()-C.getDay());const M=[];for(let P=0;P<35;P++){const O=new Date(D);if(O.setDate(D.getDate()+P),O.getMonth()===A||Math.abs(O.getMonth()-A)===1||A===0&&O.getMonth()===11||A===11&&O.getMonth()===0){const j=h(O);kO(O),M.push({date:O,hasFocused:j})}else M.push(null)}r(M)},[n,o]);const f=n.toLocaleDateString("en-US",{month:"long",year:"numeric"}),m=S=>{a(S.date)},v=S=>{const A=new Date;return S.getDate()===A.getDate()&&S.getMonth()===A.getMonth()&&S.getFullYear()===A.getFullYear()},y=S=>{const A=new Date;A.setHours(0,0,0,0);const C=new Date(S);return C.setHours(0,0,0,0),C<A},w=S=>{const A="w-8 h-8 rounded-full flex items-center justify-center text-xs cursor-pointer transition-all duration-200";return v(S.date)?`${A} bg-background-primary border-2 border-primary border-dashed text-text-primary font-medium`:y(S.date)?S.hasFocused?`${A} bg-primary text-white hover:bg-opacity-90 font-medium`:`${A} bg-background-primary border border-border text-text-secondary hover:bg-background-container`:`${A} bg-background-primary border border-border text-text-secondary opacity-50`},_=async()=>{s!=null&&s.uid&&await lBe(s.uid,"test-task-id","test-project-id")};return E.jsxs(fg,{title:"Focus Streak",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{className:"flex items-center text-sm text-green-500 font-medium",children:[E.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:E.jsx("i",{className:"ri-fire-line"})}),E.jsxs("span",{children:[l.currentStreak," days"]})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[o.length===0&&E.jsx("button",{onClick:_,className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Test Data"}),E.jsx("button",{onClick:c,className:"p-1.5 rounded-full hover:bg-background-container",children:E.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:"ri-arrow-left-s-line"})})}),E.jsx("span",{className:"text-sm font-medium text-text-primary",children:f}),E.jsx("button",{onClick:u,className:"p-1.5 rounded-full hover:bg-background-container",children:E.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:"ri-arrow-right-s-line"})})})]})]}),E.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(S=>E.jsx("div",{className:"text-center text-xs font-medium text-text-secondary py-1",children:S},S))}),E.jsx("div",{className:"grid grid-cols-7 gap-2",children:t.map((S,A)=>E.jsx("div",{className:"flex items-center justify-center",children:S?E.jsx("div",{className:`${w(S)}
                  ${i&&d(S.date,i)?"ring-2 ring-primary ring-offset-2":""}
                `,onClick:()=>m(S),children:S.date.getDate()}):E.jsx("div",{})},A))})]})};var zF,qQ;function ac(){if(qQ)return zF;qQ=1;var n=Array.isArray;return zF=n,zF}var HF,GQ;function Yye(){if(GQ)return HF;GQ=1;var n=typeof AM=="object"&&AM&&AM.Object===Object&&AM;return HF=n,HF}var qF,WQ;function zf(){if(WQ)return qF;WQ=1;var n=Yye(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return qF=t,qF}var GF,YQ;function GI(){if(YQ)return GF;YQ=1;var n=zf(),e=n.Symbol;return GF=e,GF}var WF,KQ;function uBe(){if(KQ)return WF;KQ=1;var n=GI(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function a(o){var s=t.call(o,i),l=o[i];try{o[i]=void 0;var c=!0}catch{}var u=r.call(o);return c&&(s?o[i]=l:delete o[i]),u}return WF=a,WF}var YF,XQ;function dBe(){if(XQ)return YF;XQ=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return YF=t,YF}var KF,ZQ;function Gg(){if(ZQ)return KF;ZQ=1;var n=GI(),e=uBe(),t=dBe(),r="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function o(s){return s==null?s===void 0?i:r:a&&a in Object(s)?e(s):t(s)}return KF=o,KF}var XF,QQ;function Wg(){if(QQ)return XF;QQ=1;function n(e){return e!=null&&typeof e=="object"}return XF=n,XF}var ZF,JQ;function yT(){if(JQ)return ZF;JQ=1;var n=Gg(),e=Wg(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return ZF=r,ZF}var QF,eJ;function vG(){if(eJ)return QF;eJ=1;var n=ac(),e=yT(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){if(n(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:r.test(a)||!t.test(a)||o!=null&&a in Object(o)}return QF=i,QF}var JF,tJ;function xy(){if(tJ)return JF;tJ=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return JF=n,JF}var e3,nJ;function yG(){if(nJ)return e3;nJ=1;var n=Gg(),e=xy(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var l=n(s);return l==r||l==i||l==t||l==a}return e3=o,e3}var t3,rJ;function hBe(){if(rJ)return t3;rJ=1;var n=zf(),e=n["__core-js_shared__"];return t3=e,t3}var n3,iJ;function fBe(){if(iJ)return n3;iJ=1;var n=hBe(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return n3=t,n3}var r3,aJ;function Kye(){if(aJ)return r3;aJ=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return r3=t,r3}var i3,oJ;function pBe(){if(oJ)return i3;oJ=1;var n=yG(),e=fBe(),t=xy(),r=Kye(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,l=o.toString,c=s.hasOwnProperty,u=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!t(h)||e(h))return!1;var f=n(h)?u:a;return f.test(r(h))}return i3=d,i3}var a3,sJ;function gBe(){if(sJ)return a3;sJ=1;function n(e,t){return e==null?void 0:e[t]}return a3=n,a3}var o3,lJ;function Yw(){if(lJ)return o3;lJ=1;var n=pBe(),e=gBe();function t(r,i){var a=e(r,i);return n(a)?a:void 0}return o3=t,o3}var s3,cJ;function pj(){if(cJ)return s3;cJ=1;var n=Yw(),e=n(Object,"create");return s3=e,s3}var l3,uJ;function mBe(){if(uJ)return l3;uJ=1;var n=pj();function e(){this.__data__=n?n(null):{},this.size=0}return l3=e,l3}var c3,dJ;function vBe(){if(dJ)return c3;dJ=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return c3=n,c3}var u3,hJ;function yBe(){if(hJ)return u3;hJ=1;var n=pj(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(a){var o=this.__data__;if(n){var s=o[a];return s===e?void 0:s}return r.call(o,a)?o[a]:void 0}return u3=i,u3}var d3,fJ;function bBe(){if(fJ)return d3;fJ=1;var n=pj(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var a=this.__data__;return n?a[i]!==void 0:t.call(a,i)}return d3=r,d3}var h3,pJ;function wBe(){if(pJ)return h3;pJ=1;var n=pj(),e="__lodash_hash_undefined__";function t(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=n&&i===void 0?e:i,this}return h3=t,h3}var f3,gJ;function _Be(){if(gJ)return f3;gJ=1;var n=mBe(),e=vBe(),t=yBe(),r=bBe(),i=wBe();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,f3=a,f3}var p3,mJ;function xBe(){if(mJ)return p3;mJ=1;function n(){this.__data__=[],this.size=0}return p3=n,p3}var g3,vJ;function bG(){if(vJ)return g3;vJ=1;function n(e,t){return e===t||e!==e&&t!==t}return g3=n,g3}var m3,yJ;function gj(){if(yJ)return m3;yJ=1;var n=bG();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return m3=e,m3}var v3,bJ;function SBe(){if(bJ)return v3;bJ=1;var n=gj(),e=Array.prototype,t=e.splice;function r(i){var a=this.__data__,o=n(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():t.call(a,o,1),--this.size,!0}return v3=r,v3}var y3,wJ;function TBe(){if(wJ)return y3;wJ=1;var n=gj();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return y3=e,y3}var b3,_J;function EBe(){if(_J)return b3;_J=1;var n=gj();function e(t){return n(this.__data__,t)>-1}return b3=e,b3}var w3,xJ;function ABe(){if(xJ)return w3;xJ=1;var n=gj();function e(t,r){var i=this.__data__,a=n(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this}return w3=e,w3}var _3,SJ;function mj(){if(SJ)return _3;SJ=1;var n=xBe(),e=SBe(),t=TBe(),r=EBe(),i=ABe();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,_3=a,_3}var x3,TJ;function wG(){if(TJ)return x3;TJ=1;var n=Yw(),e=zf(),t=n(e,"Map");return x3=t,x3}var S3,EJ;function CBe(){if(EJ)return S3;EJ=1;var n=_Be(),e=mj(),t=wG();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return S3=r,S3}var T3,AJ;function DBe(){if(AJ)return T3;AJ=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return T3=n,T3}var E3,CJ;function vj(){if(CJ)return E3;CJ=1;var n=DBe();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return E3=e,E3}var A3,DJ;function kBe(){if(DJ)return A3;DJ=1;var n=vj();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return A3=e,A3}var C3,kJ;function IBe(){if(kJ)return C3;kJ=1;var n=vj();function e(t){return n(this,t).get(t)}return C3=e,C3}var D3,IJ;function MBe(){if(IJ)return D3;IJ=1;var n=vj();function e(t){return n(this,t).has(t)}return D3=e,D3}var k3,MJ;function PBe(){if(MJ)return k3;MJ=1;var n=vj();function e(t,r){var i=n(this,t),a=i.size;return i.set(t,r),this.size+=i.size==a?0:1,this}return k3=e,k3}var I3,PJ;function _G(){if(PJ)return I3;PJ=1;var n=CBe(),e=kBe(),t=IBe(),r=MBe(),i=PBe();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,I3=a,I3}var M3,OJ;function Xye(){if(OJ)return M3;OJ=1;var n=_G(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],l=a.cache;if(l.has(s))return l.get(s);var c=r.apply(this,o);return a.cache=l.set(s,c)||l,c};return a.cache=new(t.Cache||n),a}return t.Cache=n,M3=t,M3}var P3,RJ;function OBe(){if(RJ)return P3;RJ=1;var n=Xye(),e=500;function t(r){var i=n(r,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return P3=t,P3}var O3,NJ;function RBe(){if(NJ)return O3;NJ=1;var n=OBe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,l,c){a.push(l?c.replace(t,"$1"):s||o)}),a});return O3=r,O3}var R3,LJ;function xG(){if(LJ)return R3;LJ=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}return R3=n,R3}var N3,jJ;function NBe(){if(jJ)return N3;jJ=1;var n=GI(),e=xG(),t=ac(),r=yT(),i=n?n.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(t(s))return e(s,o)+"";if(r(s))return a?a.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return N3=o,N3}var L3,FJ;function Zye(){if(FJ)return L3;FJ=1;var n=NBe();function e(t){return t==null?"":n(t)}return L3=e,L3}var j3,$J;function Qye(){if($J)return j3;$J=1;var n=ac(),e=vG(),t=RBe(),r=Zye();function i(a,o){return n(a)?a:e(a,o)?[a]:t(r(a))}return j3=i,j3}var F3,BJ;function yj(){if(BJ)return F3;BJ=1;var n=yT();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return F3=e,F3}var $3,UJ;function SG(){if(UJ)return $3;UJ=1;var n=Qye(),e=yj();function t(r,i){i=n(i,r);for(var a=0,o=i.length;r!=null&&a<o;)r=r[e(i[a++])];return a&&a==o?r:void 0}return $3=t,$3}var B3,VJ;function Jye(){if(VJ)return B3;VJ=1;var n=SG();function e(t,r,i){var a=t==null?void 0:n(t,r);return a===void 0?i:a}return B3=e,B3}var LBe=Jye();const Wu=Br(LBe);var U3,zJ;function jBe(){if(zJ)return U3;zJ=1;function n(e){return e==null}return U3=n,U3}var FBe=jBe();const ui=Br(FBe);var V3,HJ;function $Be(){if(HJ)return V3;HJ=1;var n=Gg(),e=ac(),t=Wg(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&n(a)==r}return V3=i,V3}var BBe=$Be();const kw=Br(BBe);var UBe=yG();const vr=Br(UBe);var VBe=xy();const bT=Br(VBe);var z3={exports:{}},oi={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qJ;function zBe(){if(qJ)return oi;qJ=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m;m=Symbol.for("react.module.reference");function v(y){if(typeof y=="object"&&y!==null){var w=y.$$typeof;switch(w){case n:switch(y=y.type,y){case t:case i:case r:case c:case u:return y;default:switch(y=y&&y.$$typeof,y){case s:case o:case l:case h:case d:case a:return y;default:return w}}case e:return w}}}return oi.ContextConsumer=o,oi.ContextProvider=a,oi.Element=n,oi.ForwardRef=l,oi.Fragment=t,oi.Lazy=h,oi.Memo=d,oi.Portal=e,oi.Profiler=i,oi.StrictMode=r,oi.Suspense=c,oi.SuspenseList=u,oi.isAsyncMode=function(){return!1},oi.isConcurrentMode=function(){return!1},oi.isContextConsumer=function(y){return v(y)===o},oi.isContextProvider=function(y){return v(y)===a},oi.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===n},oi.isForwardRef=function(y){return v(y)===l},oi.isFragment=function(y){return v(y)===t},oi.isLazy=function(y){return v(y)===h},oi.isMemo=function(y){return v(y)===d},oi.isPortal=function(y){return v(y)===e},oi.isProfiler=function(y){return v(y)===i},oi.isStrictMode=function(y){return v(y)===r},oi.isSuspense=function(y){return v(y)===c},oi.isSuspenseList=function(y){return v(y)===u},oi.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===t||y===i||y===r||y===c||y===u||y===f||typeof y=="object"&&y!==null&&(y.$$typeof===h||y.$$typeof===d||y.$$typeof===a||y.$$typeof===o||y.$$typeof===l||y.$$typeof===m||y.getModuleId!==void 0)},oi.typeOf=v,oi}var GJ;function HBe(){return GJ||(GJ=1,z3.exports=zBe()),z3.exports}var qBe=HBe(),H3,WJ;function e0e(){if(WJ)return H3;WJ=1;var n=Gg(),e=Wg(),t="[object Number]";function r(i){return typeof i=="number"||e(i)&&n(i)==t}return H3=r,H3}var q3,YJ;function GBe(){if(YJ)return q3;YJ=1;var n=e0e();function e(t){return n(t)&&t!=+t}return q3=e,q3}var WBe=GBe();const WI=Br(WBe);var YBe=e0e();const KBe=Br(YBe);var Jd=function(e){return e===0?0:e>0?1:-1},Wb=function(e){return kw(e)&&e.indexOf("%")===e.length-1},St=function(e){return KBe(e)&&!WI(e)},yo=function(e){return St(e)||kw(e)},XBe=0,bj=function(e){var t=++XBe;return"".concat(e||"").concat(t)},Iw=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!St(e)&&!kw(e))return r;var a;if(Wb(e)){var o=e.indexOf("%");a=t*parseFloat(e.slice(0,o))/100}else a=+e;return WI(a)&&(a=r),i&&a>t&&(a=t),a},Pv=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},ZBe=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},i=0;i<t;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Rx=function(e,t){return St(e)&&St(t)?function(r){return e+r*(t-e)}:function(){return t}};function Fz(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&(typeof e=="function"?e(r):Wu(r,e))===t})}var QBe=function(e,t){return St(e)&&St(t)?e-t:kw(e)&&kw(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function JS(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function $z(n){"@babel/helpers - typeof";return $z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$z(n)}var JBe=["viewBox","children"],eUe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],KJ=["points","pathLength"],G3={svg:JBe,polygon:KJ,polyline:KJ},TG=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],MR=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(K.isValidElement(e)&&(r=e.props),!bT(r))return null;var i={};return Object.keys(r).forEach(function(a){TG.includes(a)&&(i[a]=t||function(o){return r[a](r,o)})}),i},tUe=function(e,t,r){return function(i){return e(t,r,i),null}},PR=function(e,t,r){if(!bT(e)||$z(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];TG.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=tUe(o,t,r))}),i},nUe=["children"],rUe=["children"];function XJ(n,e){if(n==null)return{};var t=iUe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function iUe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var ZJ={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},pg=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},QJ=null,W3=null,EG=function n(e){if(e===QJ&&Array.isArray(W3))return W3;var t=[];return K.Children.forEach(e,function(r){ui(r)||(qBe.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),W3=t,QJ=e,t};function rh(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return pg(i)}):r=[pg(e)],EG(n).forEach(function(i){var a=Wu(i,"type.displayName")||Wu(i,"type.name");r.indexOf(a)!==-1&&t.push(i)}),t}function Lc(n,e){var t=rh(n,e);return t&&t[0]}var JJ=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,i=t.height;return!(!St(r)||r<=0||!St(i)||i<=0)},aUe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],oUe=function(e){return e&&e.type&&kw(e.type)&&aUe.indexOf(e.type)>=0},sUe=function(e,t,r,i){var a,o=(a=G3==null?void 0:G3[i])!==null&&a!==void 0?a:[];return t.startsWith("data-")||!vr(e)&&(i&&o.includes(t)||eUe.includes(t))||r&&TG.includes(t)},ei=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(K.isValidElement(e)&&(i=e.props),!bT(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;sUe((s=i)===null||s===void 0?void 0:s[o],o,t,r)&&(a[o]=i[o])}),a},Bz=function n(e,t){if(e===t)return!0;var r=K.Children.count(e);if(r!==K.Children.count(t))return!1;if(r===0)return!0;if(r===1)return eee(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<r;i++){var a=e[i],o=t[i];if(Array.isArray(a)||Array.isArray(o)){if(!n(a,o))return!1}else if(!eee(a,o))return!1}return!0},eee=function(e,t){if(ui(e)&&ui(t))return!0;if(!ui(e)&&!ui(t)){var r=e.props||{},i=r.children,a=XJ(r,nUe),o=t.props||{},s=o.children,l=XJ(o,rUe);return i&&s?JS(a,l)&&Bz(i,s):!i&&!s?JS(a,l):!1}return!1},tee=function(e,t){var r=[],i={};return EG(e).forEach(function(a,o){if(oUe(a))r.push(a);else if(a){var s=pg(a.type),l=t[s]||{},c=l.handler,u=l.once;if(c&&(!u||!i[s])){var d=c(a,s,o);r.push(d),i[s]=!0}}}),r},lUe=function(e){var t=e&&e.type;return t&&ZJ[t]?ZJ[t]:null},cUe=function(e,t){return EG(t).indexOf(e)},uUe=["children","width","height","viewBox","className","style","title","desc"];function Uz(){return Uz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Uz.apply(this,arguments)}function dUe(n,e){if(n==null)return{};var t=hUe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function hUe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Vz(n){var e=n.children,t=n.width,r=n.height,i=n.viewBox,a=n.className,o=n.style,s=n.title,l=n.desc,c=dUe(n,uUe),u=i||{width:t,height:r,x:0,y:0},d=Gr("recharts-surface",a);return ye.createElement("svg",Uz({},ei(c,!0,"svg"),{className:d,width:t,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ye.createElement("title",null,s),ye.createElement("desc",null,l),e)}var fUe=["children","className"];function zz(){return zz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zz.apply(this,arguments)}function pUe(n,e){if(n==null)return{};var t=gUe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function gUe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var zo=ye.forwardRef(function(n,e){var t=n.children,r=n.className,i=pUe(n,fUe),a=Gr("recharts-layer",r);return ye.createElement("g",zz({className:a},ei(i,!0),{ref:e}),t)}),gg=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},Y3,nee;function mUe(){if(nee)return Y3;nee=1;function n(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++i<a;)o[i]=e[i+t];return o}return Y3=n,Y3}var K3,ree;function vUe(){if(ree)return K3;ree=1;var n=mUe();function e(t,r,i){var a=t.length;return i=i===void 0?a:i,!r&&i>=a?t:n(t,r,i)}return K3=e,K3}var X3,iee;function t0e(){if(iee)return X3;iee=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+n+i+a+"]");function l(c){return s.test(c)}return X3=l,X3}var Z3,aee;function yUe(){if(aee)return Z3;aee=1;function n(e){return e.split("")}return Z3=n,Z3}var Q3,oee;function bUe(){if(oee)return Q3;oee=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",o="["+n+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+l+")",u="[^"+n+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",m=c+"?",v="["+a+"]?",y="(?:"+f+"(?:"+[u,d,h].join("|")+")"+v+m+")*",w=v+m+y,_="(?:"+[u+s+"?",s,d,h,o].join("|")+")",S=RegExp(l+"(?="+l+")|"+_+w,"g");function A(C){return C.match(S)||[]}return Q3=A,Q3}var J3,see;function wUe(){if(see)return J3;see=1;var n=yUe(),e=t0e(),t=bUe();function r(i){return e(i)?t(i):n(i)}return J3=r,J3}var e4,lee;function _Ue(){if(lee)return e4;lee=1;var n=vUe(),e=t0e(),t=wUe(),r=Zye();function i(a){return function(o){o=r(o);var s=e(o)?t(o):void 0,l=s?s[0]:o.charAt(0),c=s?n(s,1).join(""):o.slice(1);return l[a]()+c}}return e4=i,e4}var t4,cee;function xUe(){if(cee)return t4;cee=1;var n=_Ue(),e=n("toUpperCase");return t4=e,t4}var SUe=xUe();const wj=Br(SUe);function Gi(n){return function(){return n}}const n0e=Math.cos,OR=Math.sin,dh=Math.sqrt,RR=Math.PI,_j=2*RR,Hz=Math.PI,qz=2*Hz,Ab=1e-6,TUe=qz-Ab;function r0e(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function EUe(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return r0e;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}let AUe=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?r0e:EUe(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,o){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,c=i-t,u=o-e,d=s-t,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(h>Ab)if(!(Math.abs(d*l-c*u)>Ab)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let f=r-o,m=i-s,v=l*l+c*c,y=f*f+m*m,w=Math.sqrt(v),_=Math.sqrt(h),S=a*Math.tan((Hz-Math.acos((v+h-y)/(2*w*_)))/2),A=S/_,C=S/w;Math.abs(A-1)>Ab&&this._append`L${e+A*u},${t+A*d}`,this._append`A${a},${a},0,0,${+(d*f>u*m)},${this._x1=e+C*l},${this._y1=t+C*c}`}}arc(e,t,r,i,a,o){if(e=+e,t=+t,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,u=t+l,d=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Ab||Math.abs(this._y1-u)>Ab)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%qz+qz),h>TUe?this._append`A${r},${r},0,1,${d},${e-s},${t-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>Ab&&this._append`A${r},${r},0,${+(h>=Hz)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function AG(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new AUe(e)}function CG(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function i0e(n){this._context=n}i0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function xj(n){return new i0e(n)}function a0e(n){return n[0]}function o0e(n){return n[1]}function s0e(n,e){var t=Gi(!0),r=null,i=xj,a=null,o=AG(s);n=typeof n=="function"?n:n===void 0?a0e:Gi(n),e=typeof e=="function"?e:e===void 0?o0e:Gi(e);function s(l){var c,u=(l=CG(l)).length,d,h=!1,f;for(r==null&&(a=i(f=o())),c=0;c<=u;++c)!(c<u&&t(d=l[c],c,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+n(d,c,l),+e(d,c,l));if(f)return a=null,f+""||null}return s.x=function(l){return arguments.length?(n=typeof l=="function"?l:Gi(+l),s):n},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Gi(+l),s):e},s.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Gi(!!l),s):t},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function OM(n,e,t){var r=null,i=Gi(!0),a=null,o=xj,s=null,l=AG(c);n=typeof n=="function"?n:n===void 0?a0e:Gi(+n),e=typeof e=="function"?e:Gi(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?o0e:Gi(+t);function c(d){var h,f,m,v=(d=CG(d)).length,y,w=!1,_,S=new Array(v),A=new Array(v);for(a==null&&(s=o(_=l())),h=0;h<=v;++h){if(!(h<v&&i(y=d[h],h,d))===w)if(w=!w)f=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=f;--m)s.point(S[m],A[m]);s.lineEnd(),s.areaEnd()}w&&(S[h]=+n(y,h,d),A[h]=+e(y,h,d),s.point(r?+r(y,h,d):S[h],t?+t(y,h,d):A[h]))}if(_)return s=null,_+""||null}function u(){return s0e().defined(i).curve(o).context(a)}return c.x=function(d){return arguments.length?(n=typeof d=="function"?d:Gi(+d),r=null,c):n},c.x0=function(d){return arguments.length?(n=typeof d=="function"?d:Gi(+d),c):n},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Gi(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Gi(+d),t=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Gi(+d),c):e},c.y1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:Gi(+d),c):t},c.lineX0=c.lineY0=function(){return u().x(n).y(e)},c.lineY1=function(){return u().x(n).y(t)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Gi(!!d),c):i},c.curve=function(d){return arguments.length?(o=d,a!=null&&(s=o(a)),c):o},c.context=function(d){return arguments.length?(d==null?a=s=null:s=o(a=d),c):a},c}class l0e{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function CUe(n){return new l0e(n,!0)}function DUe(n){return new l0e(n,!1)}const DG={draw(n,e){const t=dh(e/RR);n.moveTo(t,0),n.arc(0,0,t,0,_j)}},kUe={draw(n,e){const t=dh(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},c0e=dh(1/3),IUe=c0e*2,MUe={draw(n,e){const t=dh(e/IUe),r=t*c0e;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},PUe={draw(n,e){const t=dh(e),r=-t/2;n.rect(r,r,t,t)}},OUe=.8908130915292852,u0e=OR(RR/10)/OR(7*RR/10),RUe=OR(_j/10)*u0e,NUe=-n0e(_j/10)*u0e,LUe={draw(n,e){const t=dh(e*OUe),r=RUe*t,i=NUe*t;n.moveTo(0,-t),n.lineTo(r,i);for(let a=1;a<5;++a){const o=_j*a/5,s=n0e(o),l=OR(o);n.lineTo(l*t,-s*t),n.lineTo(s*r-l*i,l*r+s*i)}n.closePath()}},n4=dh(3),jUe={draw(n,e){const t=-dh(e/(n4*3));n.moveTo(0,t*2),n.lineTo(-n4*t,-t),n.lineTo(n4*t,-t),n.closePath()}},xu=-.5,Su=dh(3)/2,Gz=1/dh(12),FUe=(Gz/2+1)*3,$Ue={draw(n,e){const t=dh(e/FUe),r=t/2,i=t*Gz,a=r,o=t*Gz+t,s=-a,l=o;n.moveTo(r,i),n.lineTo(a,o),n.lineTo(s,l),n.lineTo(xu*r-Su*i,Su*r+xu*i),n.lineTo(xu*a-Su*o,Su*a+xu*o),n.lineTo(xu*s-Su*l,Su*s+xu*l),n.lineTo(xu*r+Su*i,xu*i-Su*r),n.lineTo(xu*a+Su*o,xu*o-Su*a),n.lineTo(xu*s+Su*l,xu*l-Su*s),n.closePath()}};function BUe(n,e){let t=null,r=AG(i);n=typeof n=="function"?n:Gi(n||DG),e=typeof e=="function"?e:Gi(e===void 0?64:+e);function i(){let a;if(t||(t=a=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return i.type=function(a){return arguments.length?(n=typeof a=="function"?a:Gi(a),i):n},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Gi(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i}function NR(){}function LR(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function d0e(n){this._context=n}d0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:LR(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:LR(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function UUe(n){return new d0e(n)}function h0e(n){this._context=n}h0e.prototype={areaStart:NR,areaEnd:NR,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:LR(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function VUe(n){return new h0e(n)}function f0e(n){this._context=n}f0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:LR(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function zUe(n){return new f0e(n)}function p0e(n){this._context=n}p0e.prototype={areaStart:NR,areaEnd:NR,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function HUe(n){return new p0e(n)}function uee(n){return n<0?-1:1}function dee(n,e,t){var r=n._x1-n._x0,i=e-n._x1,a=(n._y1-n._y0)/(r||i<0&&-0),o=(t-n._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(uee(a)+uee(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function hee(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function r4(n,e,t){var r=n._x0,i=n._y0,a=n._x1,o=n._y1,s=(a-r)/3;n._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*t,a,o)}function jR(n){this._context=n}jR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:r4(this,this._t0,hee(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,r4(this,hee(this,t=dee(this,n,e)),t);break;default:r4(this,this._t0,t=dee(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function g0e(n){this._context=new m0e(n)}(g0e.prototype=Object.create(jR.prototype)).point=function(n,e){jR.prototype.point.call(this,e,n)};function m0e(n){this._context=n}m0e.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,a){this._context.bezierCurveTo(e,n,r,t,a,i)}};function qUe(n){return new jR(n)}function GUe(n){return new g0e(n)}function v0e(n){this._context=n}v0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=fee(n),i=fee(e),a=0,o=1;o<t;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],n[o],e[o]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function fee(n){var e,t=n.length-1,r,i=new Array(t),a=new Array(t),o=new Array(t);for(i[0]=0,a[0]=2,o[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,o[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,a[t-1]=7,o[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[t-1]=o[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-i[e+1];return[i,a]}function WUe(n){return new v0e(n)}function Sj(n,e){this._context=n,this._t=e}Sj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function YUe(n){return new Sj(n,.5)}function KUe(n){return new Sj(n,0)}function XUe(n){return new Sj(n,1)}function k1(n,e){if((o=n.length)>1)for(var t=1,r,i,a=n[e[0]],o,s=a.length;t<o;++t)for(i=a,a=n[e[t]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Wz(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function ZUe(n,e){return n[e]}function QUe(n){const e=[];return e.key=n,e}function JUe(){var n=Gi([]),e=Wz,t=k1,r=ZUe;function i(a){var o=Array.from(n.apply(this,arguments),QUe),s,l=o.length,c=-1,u;for(const d of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(d,o[s].key,c,a)]).data=d;for(s=0,u=CG(e(o));s<l;++s)o[u[s]].index=s;return t(o,u),o}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Gi(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Gi(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Wz:typeof a=="function"?a:Gi(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??k1,i):t},i}function e6e(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,o;i<a;++i){for(o=t=0;t<r;++t)o+=n[t][i][1]||0;if(o)for(t=0;t<r;++t)n[t][i][1]/=o}k1(n,e)}}function t6e(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var o=0,s=0;o<i;++o)s+=n[o][t][1]||0;r[t][1]+=r[t][0]=-s/2}k1(n,e)}}function n6e(n,e){if(!(!((o=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,c=0;s<o;++s){for(var u=n[e[s]],d=u[r][1]||0,h=u[r-1][1]||0,f=(d-h)/2,m=0;m<s;++m){var v=n[e[m]],y=v[r][1]||0,w=v[r-1][1]||0;f+=y-w}l+=d,c+=f*d}i[r-1][1]+=i[r-1][0]=t,l&&(t-=c/l)}i[r-1][1]+=i[r-1][0]=t,k1(n,e)}}function ak(n){"@babel/helpers - typeof";return ak=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ak(n)}var r6e=["type","size","sizeType"];function Yz(){return Yz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yz.apply(this,arguments)}function pee(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function gee(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pee(Object(t),!0).forEach(function(r){i6e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pee(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function i6e(n,e,t){return e=a6e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a6e(n){var e=o6e(n,"string");return ak(e)=="symbol"?e:e+""}function o6e(n,e){if(ak(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ak(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function s6e(n,e){if(n==null)return{};var t=l6e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function l6e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var y0e={symbolCircle:DG,symbolCross:kUe,symbolDiamond:MUe,symbolSquare:PUe,symbolStar:LUe,symbolTriangle:jUe,symbolWye:$Ue},c6e=Math.PI/180,u6e=function(e){var t="symbol".concat(wj(e));return y0e[t]||DG},d6e=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*c6e;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},h6e=function(e,t){y0e["symbol".concat(wj(e))]=t},kG=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,a=i===void 0?64:i,o=e.sizeType,s=o===void 0?"area":o,l=s6e(e,r6e),c=gee(gee({},l),{},{type:r,size:a,sizeType:s}),u=function(){var y=u6e(r),w=BUe().type(y).size(d6e(a,s,r));return w()},d=c.className,h=c.cx,f=c.cy,m=ei(c,!0);return h===+h&&f===+f&&a===+a?ye.createElement("path",Yz({},m,{className:Gr("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(f,")"),d:u()})):null};kG.registerSymbol=h6e;function I1(n){"@babel/helpers - typeof";return I1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I1(n)}function Kz(){return Kz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kz.apply(this,arguments)}function mee(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function f6e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mee(Object(t),!0).forEach(function(r){ok(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mee(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function p6e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function g6e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,w0e(r.key),r)}}function m6e(n,e,t){return e&&g6e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function v6e(n,e,t){return e=FR(e),y6e(n,b0e()?Reflect.construct(e,t||[],FR(n).constructor):e.apply(n,t))}function y6e(n,e){if(e&&(I1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b6e(n)}function b6e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function b0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b0e=function(){return!!n})()}function FR(n){return FR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FR(n)}function w6e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Xz(n,e)}function Xz(n,e){return Xz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Xz(n,e)}function ok(n,e,t){return e=w0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function w0e(n){var e=_6e(n,"string");return I1(e)=="symbol"?e:e+""}function _6e(n,e){if(I1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(I1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Tu=32,IG=function(n){function e(){return p6e(this,e),v6e(this,e,arguments)}return w6e(e,n),m6e(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Tu/2,o=Tu/6,s=Tu/3,l=r.inactive?i:r.color;if(r.type==="plainline")return ye.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Tu,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return ye.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(Tu,"M").concat(2*s,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return ye.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Tu/8,"h").concat(Tu,"v").concat(Tu*3/4,"h").concat(-Tu,"z"),className:"recharts-legend-icon"});if(ye.isValidElement(r.legendIcon)){var c=f6e({},r);return delete c.legendIcon,ye.cloneElement(r.legendIcon,c)}return ye.createElement(kG,{fill:l,cx:a,cy:a,size:Tu,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:Tu,height:Tu},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(f,m){var v=f.formatter||l,y=Gr(ok(ok({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",f.inactive));if(f.type==="none")return null;var w=vr(f.value)?null:f.value;gg(!vr(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=f.inactive?c:f.color;return ye.createElement("li",Kz({className:y,style:d,key:"legend-item-".concat(m)},PR(r.props,f,m)),ye.createElement(Vz,{width:o,height:o,viewBox:u,style:h},r.renderIcon(f)),ye.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},v?v(w,f,m):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return ye.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(K.PureComponent);ok(IG,"displayName","Legend");ok(IG,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var i4,vee;function x6e(){if(vee)return i4;vee=1;var n=mj();function e(){this.__data__=new n,this.size=0}return i4=e,i4}var a4,yee;function S6e(){if(yee)return a4;yee=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return a4=n,a4}var o4,bee;function T6e(){if(bee)return o4;bee=1;function n(e){return this.__data__.get(e)}return o4=n,o4}var s4,wee;function E6e(){if(wee)return s4;wee=1;function n(e){return this.__data__.has(e)}return s4=n,s4}var l4,_ee;function A6e(){if(_ee)return l4;_ee=1;var n=mj(),e=wG(),t=_G(),r=200;function i(a,o){var s=this.__data__;if(s instanceof n){var l=s.__data__;if(!e||l.length<r-1)return l.push([a,o]),this.size=++s.size,this;s=this.__data__=new t(l)}return s.set(a,o),this.size=s.size,this}return l4=i,l4}var c4,xee;function _0e(){if(xee)return c4;xee=1;var n=mj(),e=x6e(),t=S6e(),r=T6e(),i=E6e(),a=A6e();function o(s){var l=this.__data__=new n(s);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,c4=o,c4}var u4,See;function C6e(){if(See)return u4;See=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return u4=e,u4}var d4,Tee;function D6e(){if(Tee)return d4;Tee=1;function n(e){return this.__data__.has(e)}return d4=n,d4}var h4,Eee;function x0e(){if(Eee)return h4;Eee=1;var n=_G(),e=C6e(),t=D6e();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new n;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,h4=r,h4}var f4,Aee;function S0e(){if(Aee)return f4;Aee=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return f4=n,f4}var p4,Cee;function T0e(){if(Cee)return p4;Cee=1;function n(e,t){return e.has(t)}return p4=n,p4}var g4,Dee;function E0e(){if(Dee)return g4;Dee=1;var n=x0e(),e=S0e(),t=T0e(),r=1,i=2;function a(o,s,l,c,u,d){var h=l&r,f=o.length,m=s.length;if(f!=m&&!(h&&m>f))return!1;var v=d.get(o),y=d.get(s);if(v&&y)return v==s&&y==o;var w=-1,_=!0,S=l&i?new n:void 0;for(d.set(o,s),d.set(s,o);++w<f;){var A=o[w],C=s[w];if(c)var D=h?c(C,A,w,s,o,d):c(A,C,w,o,s,d);if(D!==void 0){if(D)continue;_=!1;break}if(S){if(!e(s,function(M,P){if(!t(S,P)&&(A===M||u(A,M,l,c,d)))return S.push(P)})){_=!1;break}}else if(!(A===C||u(A,C,l,c,d))){_=!1;break}}return d.delete(o),d.delete(s),_}return g4=a,g4}var m4,kee;function k6e(){if(kee)return m4;kee=1;var n=zf(),e=n.Uint8Array;return m4=e,m4}var v4,Iee;function I6e(){if(Iee)return v4;Iee=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,a){r[++t]=[a,i]}),r}return v4=n,v4}var y4,Mee;function MG(){if(Mee)return y4;Mee=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return y4=n,y4}var b4,Pee;function M6e(){if(Pee)return b4;Pee=1;var n=GI(),e=k6e(),t=bG(),r=E0e(),i=I6e(),a=MG(),o=1,s=2,l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Map]",h="[object Number]",f="[object RegExp]",m="[object Set]",v="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",_="[object DataView]",S=n?n.prototype:void 0,A=S?S.valueOf:void 0;function C(D,M,P,O,j,L,B){switch(P){case _:if(D.byteLength!=M.byteLength||D.byteOffset!=M.byteOffset)return!1;D=D.buffer,M=M.buffer;case w:return!(D.byteLength!=M.byteLength||!L(new e(D),new e(M)));case l:case c:case h:return t(+D,+M);case u:return D.name==M.name&&D.message==M.message;case f:case v:return D==M+"";case d:var $=i;case m:var Y=O&o;if($||($=a),D.size!=M.size&&!Y)return!1;var q=B.get(D);if(q)return q==M;O|=s,B.set(D,M);var W=r($(D),$(M),O,j,L,B);return B.delete(D),W;case y:if(A)return A.call(D)==A.call(M)}return!1}return b4=C,b4}var w4,Oee;function A0e(){if(Oee)return w4;Oee=1;function n(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}return w4=n,w4}var _4,Ree;function P6e(){if(Ree)return _4;Ree=1;var n=A0e(),e=ac();function t(r,i,a){var o=i(r);return e(r)?o:n(o,a(r))}return _4=t,_4}var x4,Nee;function O6e(){if(Nee)return x4;Nee=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var s=e[r];t(s,r,e)&&(o[a++]=s)}return o}return x4=n,x4}var S4,Lee;function R6e(){if(Lee)return S4;Lee=1;function n(){return[]}return S4=n,S4}var T4,jee;function N6e(){if(jee)return T4;jee=1;var n=O6e(),e=R6e(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),n(i(o),function(s){return r.call(o,s)}))}:e;return T4=a,T4}var E4,Fee;function L6e(){if(Fee)return E4;Fee=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return E4=n,E4}var A4,$ee;function j6e(){if($ee)return A4;$ee=1;var n=Gg(),e=Wg(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return A4=r,A4}var C4,Bee;function PG(){if(Bee)return C4;Bee=1;var n=j6e(),e=Wg(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return C4=a,C4}var PC={exports:{}},D4,Uee;function F6e(){if(Uee)return D4;Uee=1;function n(){return!1}return D4=n,D4}PC.exports;var Vee;function C0e(){return Vee||(Vee=1,function(n,e){var t=zf(),r=F6e(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,o=a&&a.exports===i,s=o?t.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;n.exports=c}(PC,PC.exports)),PC.exports}var k4,zee;function OG(){if(zee)return k4;zee=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var a=typeof r;return i=i??n,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return k4=t,k4}var I4,Hee;function RG(){if(Hee)return I4;Hee=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return I4=e,I4}var M4,qee;function $6e(){if(qee)return M4;qee=1;var n=Gg(),e=RG(),t=Wg(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",d="[object Object]",h="[object RegExp]",f="[object Set]",m="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",S="[object Float64Array]",A="[object Int8Array]",C="[object Int16Array]",D="[object Int32Array]",M="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",j="[object Uint32Array]",L={};L[_]=L[S]=L[A]=L[C]=L[D]=L[M]=L[P]=L[O]=L[j]=!0,L[r]=L[i]=L[y]=L[a]=L[w]=L[o]=L[s]=L[l]=L[c]=L[u]=L[d]=L[h]=L[f]=L[m]=L[v]=!1;function B($){return t($)&&e($.length)&&!!L[n($)]}return M4=B,M4}var P4,Gee;function D0e(){if(Gee)return P4;Gee=1;function n(e){return function(t){return e(t)}}return P4=n,P4}var OC={exports:{}};OC.exports;var Wee;function B6e(){return Wee||(Wee=1,function(n,e){var t=Yye(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===r,o=a&&t.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=s}(OC,OC.exports)),OC.exports}var O4,Yee;function k0e(){if(Yee)return O4;Yee=1;var n=$6e(),e=D0e(),t=B6e(),r=t&&t.isTypedArray,i=r?e(r):n;return O4=i,O4}var R4,Kee;function U6e(){if(Kee)return R4;Kee=1;var n=L6e(),e=PG(),t=ac(),r=C0e(),i=OG(),a=k0e(),o=Object.prototype,s=o.hasOwnProperty;function l(c,u){var d=t(c),h=!d&&e(c),f=!d&&!h&&r(c),m=!d&&!h&&!f&&a(c),v=d||h||f||m,y=v?n(c.length,String):[],w=y.length;for(var _ in c)(u||s.call(c,_))&&!(v&&(_=="length"||f&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,w)))&&y.push(_);return y}return R4=l,R4}var N4,Xee;function V6e(){if(Xee)return N4;Xee=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return N4=e,N4}var L4,Zee;function I0e(){if(Zee)return L4;Zee=1;function n(e,t){return function(r){return e(t(r))}}return L4=n,L4}var j4,Qee;function z6e(){if(Qee)return j4;Qee=1;var n=I0e(),e=n(Object.keys,Object);return j4=e,j4}var F4,Jee;function H6e(){if(Jee)return F4;Jee=1;var n=V6e(),e=z6e(),t=Object.prototype,r=t.hasOwnProperty;function i(a){if(!n(a))return e(a);var o=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&o.push(s);return o}return F4=i,F4}var $4,ete;function YI(){if(ete)return $4;ete=1;var n=yG(),e=RG();function t(r){return r!=null&&e(r.length)&&!n(r)}return $4=t,$4}var B4,tte;function Tj(){if(tte)return B4;tte=1;var n=U6e(),e=H6e(),t=YI();function r(i){return t(i)?n(i):e(i)}return B4=r,B4}var U4,nte;function q6e(){if(nte)return U4;nte=1;var n=P6e(),e=N6e(),t=Tj();function r(i){return n(i,t,e)}return U4=r,U4}var V4,rte;function G6e(){if(rte)return V4;rte=1;var n=q6e(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(a,o,s,l,c,u){var d=s&e,h=n(a),f=h.length,m=n(o),v=m.length;if(f!=v&&!d)return!1;for(var y=f;y--;){var w=h[y];if(!(d?w in o:r.call(o,w)))return!1}var _=u.get(a),S=u.get(o);if(_&&S)return _==o&&S==a;var A=!0;u.set(a,o),u.set(o,a);for(var C=d;++y<f;){w=h[y];var D=a[w],M=o[w];if(l)var P=d?l(M,D,w,o,a,u):l(D,M,w,a,o,u);if(!(P===void 0?D===M||c(D,M,s,l,u):P)){A=!1;break}C||(C=w=="constructor")}if(A&&!C){var O=a.constructor,j=o.constructor;O!=j&&"constructor"in a&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof j=="function"&&j instanceof j)&&(A=!1)}return u.delete(a),u.delete(o),A}return V4=i,V4}var z4,ite;function W6e(){if(ite)return z4;ite=1;var n=Yw(),e=zf(),t=n(e,"DataView");return z4=t,z4}var H4,ate;function Y6e(){if(ate)return H4;ate=1;var n=Yw(),e=zf(),t=n(e,"Promise");return H4=t,H4}var q4,ote;function M0e(){if(ote)return q4;ote=1;var n=Yw(),e=zf(),t=n(e,"Set");return q4=t,q4}var G4,ste;function K6e(){if(ste)return G4;ste=1;var n=Yw(),e=zf(),t=n(e,"WeakMap");return G4=t,G4}var W4,lte;function X6e(){if(lte)return W4;lte=1;var n=W6e(),e=wG(),t=Y6e(),r=M0e(),i=K6e(),a=Gg(),o=Kye(),s="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",d="[object WeakMap]",h="[object DataView]",f=o(n),m=o(e),v=o(t),y=o(r),w=o(i),_=a;return(n&&_(new n(new ArrayBuffer(1)))!=h||e&&_(new e)!=s||t&&_(t.resolve())!=c||r&&_(new r)!=u||i&&_(new i)!=d)&&(_=function(S){var A=a(S),C=A==l?S.constructor:void 0,D=C?o(C):"";if(D)switch(D){case f:return h;case m:return s;case v:return c;case y:return u;case w:return d}return A}),W4=_,W4}var Y4,cte;function Z6e(){if(cte)return Y4;cte=1;var n=_0e(),e=E0e(),t=M6e(),r=G6e(),i=X6e(),a=ac(),o=C0e(),s=k0e(),l=1,c="[object Arguments]",u="[object Array]",d="[object Object]",h=Object.prototype,f=h.hasOwnProperty;function m(v,y,w,_,S,A){var C=a(v),D=a(y),M=C?u:i(v),P=D?u:i(y);M=M==c?d:M,P=P==c?d:P;var O=M==d,j=P==d,L=M==P;if(L&&o(v)){if(!o(y))return!1;C=!0,O=!1}if(L&&!O)return A||(A=new n),C||s(v)?e(v,y,w,_,S,A):t(v,y,M,w,_,S,A);if(!(w&l)){var B=O&&f.call(v,"__wrapped__"),$=j&&f.call(y,"__wrapped__");if(B||$){var Y=B?v.value():v,q=$?y.value():y;return A||(A=new n),S(Y,q,w,_,A)}}return L?(A||(A=new n),r(v,y,w,_,S,A)):!1}return Y4=m,Y4}var K4,ute;function NG(){if(ute)return K4;ute=1;var n=Z6e(),e=Wg();function t(r,i,a,o,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,a,o,t,s)}return K4=t,K4}var X4,dte;function Q6e(){if(dte)return X4;dte=1;var n=_0e(),e=NG(),t=1,r=2;function i(a,o,s,l){var c=s.length,u=c,d=!l;if(a==null)return!u;for(a=Object(a);c--;){var h=s[c];if(d&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++c<u;){h=s[c];var f=h[0],m=a[f],v=h[1];if(d&&h[2]){if(m===void 0&&!(f in a))return!1}else{var y=new n;if(l)var w=l(m,v,f,a,o,y);if(!(w===void 0?e(v,m,t|r,l,y):w))return!1}}return!0}return X4=i,X4}var Z4,hte;function P0e(){if(hte)return Z4;hte=1;var n=xy();function e(t){return t===t&&!n(t)}return Z4=e,Z4}var Q4,fte;function J6e(){if(fte)return Q4;fte=1;var n=P0e(),e=Tj();function t(r){for(var i=e(r),a=i.length;a--;){var o=i[a],s=r[o];i[a]=[o,s,n(s)]}return i}return Q4=t,Q4}var J4,pte;function O0e(){if(pte)return J4;pte=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return J4=n,J4}var e$,gte;function eVe(){if(gte)return e$;gte=1;var n=Q6e(),e=J6e(),t=O0e();function r(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(o){return o===i||n(o,i,a)}}return e$=r,e$}var t$,mte;function tVe(){if(mte)return t$;mte=1;function n(e,t){return e!=null&&t in Object(e)}return t$=n,t$}var n$,vte;function nVe(){if(vte)return n$;vte=1;var n=Qye(),e=PG(),t=ac(),r=OG(),i=RG(),a=yj();function o(s,l,c){l=n(l,s);for(var u=-1,d=l.length,h=!1;++u<d;){var f=a(l[u]);if(!(h=s!=null&&c(s,f)))break;s=s[f]}return h||++u!=d?h:(d=s==null?0:s.length,!!d&&i(d)&&r(f,d)&&(t(s)||e(s)))}return n$=o,n$}var r$,yte;function rVe(){if(yte)return r$;yte=1;var n=tVe(),e=nVe();function t(r,i){return r!=null&&e(r,i,n)}return r$=t,r$}var i$,bte;function iVe(){if(bte)return i$;bte=1;var n=NG(),e=Jye(),t=rVe(),r=vG(),i=P0e(),a=O0e(),o=yj(),s=1,l=2;function c(u,d){return r(u)&&i(d)?a(o(u),d):function(h){var f=e(h,u);return f===void 0&&f===d?t(h,u):n(d,f,s|l)}}return i$=c,i$}var a$,wte;function wT(){if(wte)return a$;wte=1;function n(e){return e}return a$=n,a$}var o$,_te;function aVe(){if(_te)return o$;_te=1;function n(e){return function(t){return t==null?void 0:t[e]}}return o$=n,o$}var s$,xte;function oVe(){if(xte)return s$;xte=1;var n=SG();function e(t){return function(r){return n(r,t)}}return s$=e,s$}var l$,Ste;function sVe(){if(Ste)return l$;Ste=1;var n=aVe(),e=oVe(),t=vG(),r=yj();function i(a){return t(a)?n(r(a)):e(a)}return l$=i,l$}var c$,Tte;function Sy(){if(Tte)return c$;Tte=1;var n=eVe(),e=iVe(),t=wT(),r=ac(),i=sVe();function a(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?r(o)?e(o[0],o[1]):n(o):i(o)}return c$=a,c$}var u$,Ete;function R0e(){if(Ete)return u$;Ete=1;function n(e,t,r,i){for(var a=e.length,o=r+(i?1:-1);i?o--:++o<a;)if(t(e[o],o,e))return o;return-1}return u$=n,u$}var d$,Ate;function lVe(){if(Ate)return d$;Ate=1;function n(e){return e!==e}return d$=n,d$}var h$,Cte;function cVe(){if(Cte)return h$;Cte=1;function n(e,t,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return h$=n,h$}var f$,Dte;function uVe(){if(Dte)return f$;Dte=1;var n=R0e(),e=lVe(),t=cVe();function r(i,a,o){return a===a?t(i,a,o):n(i,e,o)}return f$=r,f$}var p$,kte;function dVe(){if(kte)return p$;kte=1;var n=uVe();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return p$=e,p$}var g$,Ite;function hVe(){if(Ite)return g$;Ite=1;function n(e,t,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(t,e[i]))return!0;return!1}return g$=n,g$}var m$,Mte;function fVe(){if(Mte)return m$;Mte=1;function n(){}return m$=n,m$}var v$,Pte;function pVe(){if(Pte)return v$;Pte=1;var n=M0e(),e=fVe(),t=MG(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(a){return new n(a)}:e;return v$=i,v$}var y$,Ote;function gVe(){if(Ote)return y$;Ote=1;var n=x0e(),e=dVe(),t=hVe(),r=T0e(),i=pVe(),a=MG(),o=200;function s(l,c,u){var d=-1,h=e,f=l.length,m=!0,v=[],y=v;if(u)m=!1,h=t;else if(f>=o){var w=c?null:i(l);if(w)return a(w);m=!1,h=r,y=new n}else y=c?[]:v;e:for(;++d<f;){var _=l[d],S=c?c(_):_;if(_=u||_!==0?_:0,m&&S===S){for(var A=y.length;A--;)if(y[A]===S)continue e;c&&y.push(S),v.push(_)}else h(y,S,u)||(y!==v&&y.push(S),v.push(_))}return v}return y$=s,y$}var b$,Rte;function mVe(){if(Rte)return b$;Rte=1;var n=Sy(),e=gVe();function t(r,i){return r&&r.length?e(r,n(i,2)):[]}return b$=t,b$}var vVe=mVe();const Nte=Br(vVe);function N0e(n,e,t){return e===!0?Nte(n,t):vr(e)?Nte(n,e):n}function M1(n){"@babel/helpers - typeof";return M1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M1(n)}var yVe=["ref"];function Lte(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lte(Object(t),!0).forEach(function(r){Ej(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Lte(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function bVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jte(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,j0e(r.key),r)}}function wVe(n,e,t){return e&&jte(n.prototype,e),t&&jte(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function _Ve(n,e,t){return e=$R(e),xVe(n,L0e()?Reflect.construct(e,t||[],$R(n).constructor):e.apply(n,t))}function xVe(n,e){if(e&&(M1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SVe(n)}function SVe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function L0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L0e=function(){return!!n})()}function $R(n){return $R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$R(n)}function TVe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Zz(n,e)}function Zz(n,e){return Zz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Zz(n,e)}function Ej(n,e,t){return e=j0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j0e(n){var e=EVe(n,"string");return M1(e)=="symbol"?e:e+""}function EVe(n,e){if(M1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(M1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function AVe(n,e){if(n==null)return{};var t=CVe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function CVe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function DVe(n){return n.value}function kVe(n,e){if(ye.isValidElement(n))return ye.cloneElement(n,e);if(typeof n=="function")return ye.createElement(n,e);e.ref;var t=AVe(e,yVe);return ye.createElement(IG,t)}var Fte=1,e1=function(n){function e(){var t;bVe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=_Ve(this,e,[].concat(i)),Ej(t,"lastBoundingBox",{width:-1,height:-1}),t}return TVe(e,n),wVe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Fte||Math.abs(i.height-this.lastBoundingBox.height)>Fte)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?zp({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var f=this.getBBoxSnapshot();d={left:((c||0)-f.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var m=this.getBBoxSnapshot();h={top:((u||0)-m.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return zp(zp({},d),h)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,d=zp(zp({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return ye.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(f){r.wrapperNode=f}},kVe(a,zp(zp({},this.props),{},{payload:N0e(u,c,DVe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=zp(zp({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&St(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(K.PureComponent);Ej(e1,"displayName","Legend");Ej(e1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var w$,$te;function IVe(){if($te)return w$;$te=1;var n=GI(),e=PG(),t=ac(),r=n?n.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(r&&a&&a[r])}return w$=i,w$}var _$,Bte;function F0e(){if(Bte)return _$;Bte=1;var n=A0e(),e=IVe();function t(r,i,a,o,s){var l=-1,c=r.length;for(a||(a=e),s||(s=[]);++l<c;){var u=r[l];i>0&&a(u)?i>1?t(u,i-1,a,o,s):n(s,u):o||(s[s.length]=u)}return s}return _$=t,_$}var x$,Ute;function MVe(){if(Ute)return x$;Ute=1;function n(e){return function(t,r,i){for(var a=-1,o=Object(t),s=i(t),l=s.length;l--;){var c=s[e?l:++a];if(r(o[c],c,o)===!1)break}return t}}return x$=n,x$}var S$,Vte;function PVe(){if(Vte)return S$;Vte=1;var n=MVe(),e=n();return S$=e,S$}var T$,zte;function $0e(){if(zte)return T$;zte=1;var n=PVe(),e=Tj();function t(r,i){return r&&n(r,i,e)}return T$=t,T$}var E$,Hte;function OVe(){if(Hte)return E$;Hte=1;var n=YI();function e(t,r){return function(i,a){if(i==null)return i;if(!n(i))return t(i,a);for(var o=i.length,s=r?o:-1,l=Object(i);(r?s--:++s<o)&&a(l[s],s,l)!==!1;);return i}}return E$=e,E$}var A$,qte;function LG(){if(qte)return A$;qte=1;var n=$0e(),e=OVe(),t=e(n);return A$=t,A$}var C$,Gte;function B0e(){if(Gte)return C$;Gte=1;var n=LG(),e=YI();function t(r,i){var a=-1,o=e(r)?Array(r.length):[];return n(r,function(s,l,c){o[++a]=i(s,l,c)}),o}return C$=t,C$}var D$,Wte;function RVe(){if(Wte)return D$;Wte=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return D$=n,D$}var k$,Yte;function NVe(){if(Yte)return k$;Yte=1;var n=yT();function e(t,r){if(t!==r){var i=t!==void 0,a=t===null,o=t===t,s=n(t),l=r!==void 0,c=r===null,u=r===r,d=n(r);if(!c&&!d&&!s&&t>r||s&&l&&u&&!c&&!d||a&&l&&u||!i&&u||!o)return 1;if(!a&&!s&&!d&&t<r||d&&i&&o&&!a&&!s||c&&i&&o||!l&&o||!u)return-1}return 0}return k$=e,k$}var I$,Kte;function LVe(){if(Kte)return I$;Kte=1;var n=NVe();function e(t,r,i){for(var a=-1,o=t.criteria,s=r.criteria,l=o.length,c=i.length;++a<l;){var u=n(o[a],s[a]);if(u){if(a>=c)return u;var d=i[a];return u*(d=="desc"?-1:1)}}return t.index-r.index}return I$=e,I$}var M$,Xte;function jVe(){if(Xte)return M$;Xte=1;var n=xG(),e=SG(),t=Sy(),r=B0e(),i=RVe(),a=D0e(),o=LVe(),s=wT(),l=ac();function c(u,d,h){d.length?d=n(d,function(v){return l(v)?function(y){return e(y,v.length===1?v[0]:v)}:v}):d=[s];var f=-1;d=n(d,a(t));var m=r(u,function(v,y,w){var _=n(d,function(S){return S(v)});return{criteria:_,index:++f,value:v}});return i(m,function(v,y){return o(v,y,h)})}return M$=c,M$}var P$,Zte;function FVe(){if(Zte)return P$;Zte=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return P$=n,P$}var O$,Qte;function $Ve(){if(Qte)return O$;Qte=1;var n=FVe(),e=Math.max;function t(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,s=-1,l=e(o.length-i,0),c=Array(l);++s<l;)c[s]=o[i+s];s=-1;for(var u=Array(i+1);++s<i;)u[s]=o[s];return u[i]=a(c),n(r,this,u)}}return O$=t,O$}var R$,Jte;function BVe(){if(Jte)return R$;Jte=1;function n(e){return function(){return e}}return R$=n,R$}var N$,ene;function U0e(){if(ene)return N$;ene=1;var n=Yw(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return N$=e,N$}var L$,tne;function UVe(){if(tne)return L$;tne=1;var n=BVe(),e=U0e(),t=wT(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return L$=r,L$}var j$,nne;function VVe(){if(nne)return j$;nne=1;var n=800,e=16,t=Date.now;function r(i){var a=0,o=0;return function(){var s=t(),l=e-(s-o);if(o=s,l>0){if(++a>=n)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return j$=r,j$}var F$,rne;function zVe(){if(rne)return F$;rne=1;var n=UVe(),e=VVe(),t=e(n);return F$=t,F$}var $$,ine;function HVe(){if(ine)return $$;ine=1;var n=wT(),e=$Ve(),t=zVe();function r(i,a){return t(e(i,a,n),i+"")}return $$=r,$$}var B$,ane;function Aj(){if(ane)return B$;ane=1;var n=bG(),e=YI(),t=OG(),r=xy();function i(a,o,s){if(!r(s))return!1;var l=typeof o;return(l=="number"?e(s)&&t(o,s.length):l=="string"&&o in s)?n(s[o],a):!1}return B$=i,B$}var U$,one;function qVe(){if(one)return U$;one=1;var n=F0e(),e=jVe(),t=HVe(),r=Aj(),i=t(function(a,o){if(a==null)return[];var s=o.length;return s>1&&r(a,o[0],o[1])?o=[]:s>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(a,n(o,1),[])});return U$=i,U$}var GVe=qVe();const jG=Br(GVe);function sk(n){"@babel/helpers - typeof";return sk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sk(n)}function Qz(){return Qz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qz.apply(this,arguments)}function WVe(n,e){return ZVe(n)||XVe(n,e)||KVe(n,e)||YVe()}function YVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KVe(n,e){if(n){if(typeof n=="string")return sne(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sne(n,e)}}function sne(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function XVe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function ZVe(n){if(Array.isArray(n))return n}function lne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function V$(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lne(Object(t),!0).forEach(function(r){QVe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function QVe(n,e,t){return e=JVe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JVe(n){var e=eze(n,"string");return sk(e)=="symbol"?e:e+""}function eze(n,e){if(sk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(sk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tze(n){return Array.isArray(n)&&yo(n[0])&&yo(n[1])?n.join(" ~ "):n}var nze=function(e){var t=e.separator,r=t===void 0?" : ":t,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,s=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,f=e.wrapperClassName,m=e.labelClassName,v=e.label,y=e.labelFormatter,w=e.accessibilityLayer,_=w===void 0?!1:w,S=function(){if(u&&u.length){var B={padding:0,margin:0},$=(h?jG(u,h):u).map(function(Y,q){if(Y.type==="none")return null;var W=V$({display:"block",paddingTop:4,paddingBottom:4,color:Y.color||"#000"},s),X=Y.formatter||d||tze,te=Y.value,re=Y.name,z=te,oe=re;if(X&&z!=null&&oe!=null){var le=X(te,re,Y,q,u);if(Array.isArray(le)){var ee=WVe(le,2);z=ee[0],oe=ee[1]}else z=le}return ye.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:W},yo(oe)?ye.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,yo(oe)?ye.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ye.createElement("span",{className:"recharts-tooltip-item-value"},z),ye.createElement("span",{className:"recharts-tooltip-item-unit"},Y.unit||""))});return ye.createElement("ul",{className:"recharts-tooltip-item-list",style:B},$)}return null},A=V$({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),C=V$({margin:0},c),D=!ui(v),M=D?v:"",P=Gr("recharts-default-tooltip",f),O=Gr("recharts-tooltip-label",m);D&&y&&u!==void 0&&u!==null&&(M=y(v,u));var j=_?{role:"status","aria-live":"assertive"}:{};return ye.createElement("div",Qz({className:P,style:A},j),ye.createElement("p",{className:O,style:C},ye.isValidElement(M)?M:"".concat(M)),S())};function lk(n){"@babel/helpers - typeof";return lk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lk(n)}function RM(n,e,t){return e=rze(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rze(n){var e=ize(n,"string");return lk(e)=="symbol"?e:e+""}function ize(n,e){if(lk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(lk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var MA="recharts-tooltip-wrapper",aze={visibility:"hidden"};function oze(n){var e=n.coordinate,t=n.translateX,r=n.translateY;return Gr(MA,RM(RM(RM(RM({},"".concat(MA,"-right"),St(t)&&e&&St(e.x)&&t>=e.x),"".concat(MA,"-left"),St(t)&&e&&St(e.x)&&t<e.x),"".concat(MA,"-bottom"),St(r)&&e&&St(e.y)&&r>=e.y),"".concat(MA,"-top"),St(r)&&e&&St(e.y)&&r<e.y))}function cne(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.key,i=n.offsetTopLeft,a=n.position,o=n.reverseDirection,s=n.tooltipDimension,l=n.viewBox,c=n.viewBoxDimension;if(a&&St(a[r]))return a[r];var u=t[r]-s-i,d=t[r]+i;if(e[r])return o[r]?u:d;if(o[r]){var h=u,f=l[r];return h<f?Math.max(d,l[r]):Math.max(u,l[r])}var m=d+s,v=l[r]+c;return m>v?Math.max(u,l[r]):Math.max(d,l[r])}function sze(n){var e=n.translateX,t=n.translateY,r=n.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function lze(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.offsetTopLeft,i=n.position,a=n.reverseDirection,o=n.tooltipBox,s=n.useTranslate3d,l=n.viewBox,c,u,d;return o.height>0&&o.width>0&&t?(u=cne({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=cne({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=sze({translateX:u,translateY:d,useTranslate3d:s})):c=aze,{cssProperties:c,cssClasses:oze({translateX:u,translateY:d,coordinate:t})}}function P1(n){"@babel/helpers - typeof";return P1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P1(n)}function une(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dne(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?une(Object(t),!0).forEach(function(r){e9(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):une(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cze(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function uze(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,z0e(r.key),r)}}function dze(n,e,t){return e&&uze(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function hze(n,e,t){return e=BR(e),fze(n,V0e()?Reflect.construct(e,t||[],BR(n).constructor):e.apply(n,t))}function fze(n,e){if(e&&(P1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pze(n)}function pze(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function V0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V0e=function(){return!!n})()}function BR(n){return BR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BR(n)}function gze(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Jz(n,e)}function Jz(n,e){return Jz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Jz(n,e)}function e9(n,e,t){return e=z0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z0e(n){var e=mze(n,"string");return P1(e)=="symbol"?e:e+""}function mze(n,e){if(P1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(P1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var hne=1,vze=function(n){function e(){var t;cze(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=hze(this,e,[].concat(i)),e9(t,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),e9(t,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,c,u;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=t.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(u=t.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),t}return gze(e,n),dze(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>hne||Math.abs(r.height-this.state.lastBoundingBox.height)>hne)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,f=i.offset,m=i.position,v=i.reverseDirection,y=i.useTranslate3d,w=i.viewBox,_=i.wrapperStyle,S=lze({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:f,position:m,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:w}),A=S.cssClasses,C=S.cssProperties,D=dne(dne({transition:h&&a?"transform ".concat(s,"ms ").concat(l):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},_);return ye.createElement("div",{tabIndex:-1,className:A,style:D,ref:function(P){r.wrapperNode=P}},c)}}])}(K.PureComponent),yze=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},KI={isSsr:yze()};function O1(n){"@babel/helpers - typeof";return O1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O1(n)}function fne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pne(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fne(Object(t),!0).forEach(function(r){FG(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function bze(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function wze(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,q0e(r.key),r)}}function _ze(n,e,t){return e&&wze(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function xze(n,e,t){return e=UR(e),Sze(n,H0e()?Reflect.construct(e,t||[],UR(n).constructor):e.apply(n,t))}function Sze(n,e){if(e&&(O1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tze(n)}function Tze(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function H0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H0e=function(){return!!n})()}function UR(n){return UR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UR(n)}function Eze(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&t9(n,e)}function t9(n,e){return t9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},t9(n,e)}function FG(n,e,t){return e=q0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q0e(n){var e=Aze(n,"string");return O1(e)=="symbol"?e:e+""}function Aze(n,e){if(O1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(O1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Cze(n){return n.dataKey}function Dze(n,e){return ye.isValidElement(n)?ye.cloneElement(n,e):typeof n=="function"?ye.createElement(n,e):ye.createElement(nze,e)}var Wd=function(n){function e(){return bze(this,e),xze(this,e,arguments)}return Eze(e,n),_ze(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,d=i.filterNull,h=i.isAnimationActive,f=i.offset,m=i.payload,v=i.payloadUniqBy,y=i.position,w=i.reverseDirection,_=i.useTranslate3d,S=i.viewBox,A=i.wrapperStyle,C=m??[];d&&C.length&&(C=N0e(m.filter(function(M){return M.value!=null&&(M.hide!==!0||r.props.includeHidden)}),v,Cze));var D=C.length>0;return ye.createElement(vze,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:a,coordinate:u,hasPayload:D,offset:f,position:y,reverseDirection:w,useTranslate3d:_,viewBox:S,wrapperStyle:A},Dze(c,pne(pne({},this.props),{},{payload:C})))}}])}(K.PureComponent);FG(Wd,"displayName","Tooltip");FG(Wd,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!KI.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var z$,gne;function kze(){if(gne)return z$;gne=1;var n=zf(),e=function(){return n.Date.now()};return z$=e,z$}var H$,mne;function Ize(){if(mne)return H$;mne=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return H$=e,H$}var q$,vne;function Mze(){if(vne)return q$;vne=1;var n=Ize(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return q$=t,q$}var G$,yne;function G0e(){if(yne)return G$;yne=1;var n=Mze(),e=xy(),t=yT(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(c){if(typeof c=="number")return c;if(t(c))return r;if(e(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=e(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=n(c);var d=a.test(c);return d||o.test(c)?s(c.slice(2),d?2:8):i.test(c)?r:+c}return G$=l,G$}var W$,bne;function Pze(){if(bne)return W$;bne=1;var n=xy(),e=kze(),t=G0e(),r="Expected a function",i=Math.max,a=Math.min;function o(s,l,c){var u,d,h,f,m,v,y=0,w=!1,_=!1,S=!0;if(typeof s!="function")throw new TypeError(r);l=t(l)||0,n(c)&&(w=!!c.leading,_="maxWait"in c,h=_?i(t(c.maxWait)||0,l):h,S="trailing"in c?!!c.trailing:S);function A($){var Y=u,q=d;return u=d=void 0,y=$,f=s.apply(q,Y),f}function C($){return y=$,m=setTimeout(P,l),w?A($):f}function D($){var Y=$-v,q=$-y,W=l-Y;return _?a(W,h-q):W}function M($){var Y=$-v,q=$-y;return v===void 0||Y>=l||Y<0||_&&q>=h}function P(){var $=e();if(M($))return O($);m=setTimeout(P,D($))}function O($){return m=void 0,S&&u?A($):(u=d=void 0,f)}function j(){m!==void 0&&clearTimeout(m),y=0,u=v=d=m=void 0}function L(){return m===void 0?f:O(e())}function B(){var $=e(),Y=M($);if(u=arguments,d=this,v=$,Y){if(m===void 0)return C(v);if(_)return clearTimeout(m),m=setTimeout(P,l),A(v)}return m===void 0&&(m=setTimeout(P,l)),f}return B.cancel=j,B.flush=L,B}return W$=o,W$}var Y$,wne;function Oze(){if(wne)return Y$;wne=1;var n=Pze(),e=xy(),t="Expected a function";function r(i,a,o){var s=!0,l=!0;if(typeof i!="function")throw new TypeError(t);return e(o)&&(s="leading"in o?!!o.leading:s,l="trailing"in o?!!o.trailing:l),n(i,a,{leading:s,maxWait:a,trailing:l})}return Y$=r,Y$}var Rze=Oze();const W0e=Br(Rze);function ck(n){"@babel/helpers - typeof";return ck=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ck(n)}function _ne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function NM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_ne(Object(t),!0).forEach(function(r){Nze(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_ne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Nze(n,e,t){return e=Lze(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lze(n){var e=jze(n,"string");return ck(e)=="symbol"?e:e+""}function jze(n,e){if(ck(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ck(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Fze(n,e){return Vze(n)||Uze(n,e)||Bze(n,e)||$ze()}function $ze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bze(n,e){if(n){if(typeof n=="string")return xne(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xne(n,e)}}function xne(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Uze(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Vze(n){if(Array.isArray(n))return n}var Y0e=K.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=n.width,o=a===void 0?"100%":a,s=n.height,l=s===void 0?"100%":s,c=n.minWidth,u=c===void 0?0:c,d=n.minHeight,h=n.maxHeight,f=n.children,m=n.debounce,v=m===void 0?0:m,y=n.id,w=n.className,_=n.onResize,S=n.style,A=S===void 0?{}:S,C=K.useRef(null),D=K.useRef();D.current=_,K.useImperativeHandle(e,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var M=K.useState({containerWidth:i.width,containerHeight:i.height}),P=Fze(M,2),O=P[0],j=P[1],L=K.useCallback(function($,Y){j(function(q){var W=Math.round($),X=Math.round(Y);return q.containerWidth===W&&q.containerHeight===X?q:{containerWidth:W,containerHeight:X}})},[]);K.useEffect(function(){var $=function(re){var z,oe=re[0].contentRect,le=oe.width,ee=oe.height;L(le,ee),(z=D.current)===null||z===void 0||z.call(D,le,ee)};v>0&&($=W0e($,v,{trailing:!0,leading:!1}));var Y=new ResizeObserver($),q=C.current.getBoundingClientRect(),W=q.width,X=q.height;return L(W,X),Y.observe(C.current),function(){Y.disconnect()}},[L,v]);var B=K.useMemo(function(){var $=O.containerWidth,Y=O.containerHeight;if($<0||Y<0)return null;gg(Wb(o)||Wb(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),gg(!t||t>0,"The aspect(%s) must be greater than zero.",t);var q=Wb(o)?$:o,W=Wb(l)?Y:l;t&&t>0&&(q?W=q/t:W&&(q=W*t),h&&W>h&&(W=h)),gg(q>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,q,W,o,l,u,d,t);var X=!Array.isArray(f)&&pg(f.type).endsWith("Chart");return ye.Children.map(f,function(te){return ye.isValidElement(te)?K.cloneElement(te,NM({width:q,height:W},X?{style:NM({height:"100%",width:"100%",maxHeight:W,maxWidth:q},te.props.style)}:{})):te})},[t,f,l,h,d,u,O,o]);return ye.createElement("div",{id:y?"".concat(y):void 0,className:Gr("recharts-responsive-container",w),style:NM(NM({},A),{},{width:o,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:C},B)}),Cj=function(e){return null};Cj.displayName="Cell";function uk(n){"@babel/helpers - typeof";return uk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uk(n)}function Sne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function n9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sne(Object(t),!0).forEach(function(r){zze(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zze(n,e,t){return e=Hze(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hze(n){var e=qze(n,"string");return uk(e)=="symbol"?e:e+""}function qze(n,e){if(uk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(uk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Nx={widthCache:{},cacheCount:0},Gze=2e3,Wze={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Tne="recharts_measurement_span";function Yze(n){var e=n9({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var cD=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||KI.isSsr)return{width:0,height:0};var r=Yze(t),i=JSON.stringify({text:e,copyStyle:r});if(Nx.widthCache[i])return Nx.widthCache[i];try{var a=document.getElementById(Tne);a||(a=document.createElement("span"),a.setAttribute("id",Tne),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=n9(n9({},Wze),r);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return Nx.widthCache[i]=l,++Nx.cacheCount>Gze&&(Nx.cacheCount=0,Nx.widthCache={}),l}catch{return{width:0,height:0}}},Kze=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function dk(n){"@babel/helpers - typeof";return dk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dk(n)}function VR(n,e){return Jze(n)||Qze(n,e)||Zze(n,e)||Xze()}function Xze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zze(n,e){if(n){if(typeof n=="string")return Ene(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ene(n,e)}}function Ene(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Qze(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Jze(n){if(Array.isArray(n))return n}function e9e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ane(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,n9e(r.key),r)}}function t9e(n,e,t){return e&&Ane(n.prototype,e),t&&Ane(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function n9e(n){var e=r9e(n,"string");return dk(e)=="symbol"?e:e+""}function r9e(n,e){if(dk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(dk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Cne=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Dne=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,i9e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,a9e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,K0e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},o9e=Object.keys(K0e),jS="NaN";function s9e(n,e){return n*K0e[e]}var LM=function(){function n(e,t){e9e(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!i9e.test(t)&&(this.num=NaN,this.unit=""),o9e.includes(t)&&(this.num=s9e(e,t),this.unit="px")}return t9e(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=a9e.exec(t))!==null&&r!==void 0?r:[],a=VR(i,3),o=a[1],s=a[2];return new n(parseFloat(o),s??"")}}])}();function X0e(n){if(n.includes(jS))return jS;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=Cne.exec(e))!==null&&t!==void 0?t:[],i=VR(r,4),a=i[1],o=i[2],s=i[3],l=LM.parse(a??""),c=LM.parse(s??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return jS;e=e.replace(Cne,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=Dne.exec(e))!==null&&d!==void 0?d:[],f=VR(h,4),m=f[1],v=f[2],y=f[3],w=LM.parse(m??""),_=LM.parse(y??""),S=v==="+"?w.add(_):w.subtract(_);if(S.isNaN())return jS;e=e.replace(Dne,S.toString())}return e}var kne=/\(([^()]*)\)/;function l9e(n){for(var e=n;e.includes("(");){var t=kne.exec(e),r=VR(t,2),i=r[1];e=e.replace(kne,X0e(i))}return e}function c9e(n){var e=n.replace(/\s+/g,"");return e=l9e(e),e=X0e(e),e}function u9e(n){try{return c9e(n)}catch{return jS}}function K$(n){var e=u9e(n.slice(5,-1));return e===jS?"":e}var d9e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],h9e=["dx","dy","angle","className","breakAll"];function r9(){return r9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r9.apply(this,arguments)}function Ine(n,e){if(n==null)return{};var t=f9e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function f9e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Mne(n,e){return v9e(n)||m9e(n,e)||g9e(n,e)||p9e()}function p9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g9e(n,e){if(n){if(typeof n=="string")return Pne(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pne(n,e)}}function Pne(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function m9e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function v9e(n){if(Array.isArray(n))return n}var Z0e=/[ \f\n\r\t\v\u2028\u2029]+/,Q0e=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var a=[];ui(t)||(r?a=t.toString().split(""):a=t.toString().split(Z0e));var o=a.map(function(l){return{word:l,width:cD(l,i).width}}),s=r?0:cD(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},y9e=function(e,t,r,i,a){var o=e.maxLines,s=e.children,l=e.style,c=e.breakAll,u=St(o),d=s,h=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce(function(W,X){var te=X.word,re=X.width,z=W[W.length-1];if(z&&(i==null||a||z.width+re+r<Number(i)))z.words.push(te),z.width+=re+r;else{var oe={words:[te],width:re};W.push(oe)}return W},[])},f=h(t),m=function(q){return q.reduce(function(W,X){return W.width>X.width?W:X})};if(!u)return f;for(var v="…",y=function(q){var W=d.slice(0,q),X=Q0e({breakAll:c,style:l,children:W+v}).wordsWithComputedWidth,te=h(X),re=te.length>o||m(te).width>Number(i);return[re,te]},w=0,_=d.length-1,S=0,A;w<=_&&S<=d.length-1;){var C=Math.floor((w+_)/2),D=C-1,M=y(D),P=Mne(M,2),O=P[0],j=P[1],L=y(C),B=Mne(L,1),$=B[0];if(!O&&!$&&(w=C+1),O&&$&&(_=C-1),!O&&$){A=j;break}S++}return A||f},One=function(e){var t=ui(e)?[]:e.toString().split(Z0e);return[{words:t}]},b9e=function(e){var t=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,s=e.maxLines;if((t||r)&&!KI.isSsr){var l,c,u=Q0e({breakAll:o,children:i,style:a});if(u){var d=u.wordsWithComputedWidth,h=u.spaceWidth;l=d,c=h}else return One(i);return y9e({breakAll:o,children:i,maxLines:s,style:a},l,c,t,r)}return One(i)},Rne="#808080",zR=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.lineHeight,s=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,h=e.textAnchor,f=h===void 0?"start":h,m=e.verticalAnchor,v=m===void 0?"end":m,y=e.fill,w=y===void 0?Rne:y,_=Ine(e,d9e),S=K.useMemo(function(){return b9e({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:d,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,d,_.style,_.width]),A=_.dx,C=_.dy,D=_.angle,M=_.className,P=_.breakAll,O=Ine(_,h9e);if(!yo(r)||!yo(a))return null;var j=r+(St(A)?A:0),L=a+(St(C)?C:0),B;switch(v){case"start":B=K$("calc(".concat(c,")"));break;case"middle":B=K$("calc(".concat((S.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:B=K$("calc(".concat(S.length-1," * -").concat(s,")"));break}var $=[];if(d){var Y=S[0].width,q=_.width;$.push("scale(".concat((St(q)?q/Y:1)/Y,")"))}return D&&$.push("rotate(".concat(D,", ").concat(j,", ").concat(L,")")),$.length&&(O.transform=$.join(" ")),ye.createElement("text",r9({},ei(O,!0),{x:j,y:L,className:Gr("recharts-text",M),textAnchor:f,fill:w.includes("url")?Rne:w}),S.map(function(W,X){var te=W.words.join(P?"":" ");return ye.createElement("tspan",{x:j,dy:X===0?B:s,key:"".concat(te,"-").concat(X)},te)}))};function Xv(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function w9e(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function $G(n){let e,t,r;n.length!==2?(e=Xv,t=(s,l)=>Xv(n(s),l),r=(s,l)=>n(s)-l):(e=n===Xv||n===w9e?n:_9e,t=n,r=n);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;t(s[d],l)<0?c=d+1:u=d}while(c<u)}return c}function a(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;t(s[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(s,l,c=0,u=s.length){const d=i(s,l,c,u-1);return d>c&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:o,right:a}}function _9e(){return 0}function J0e(n){return n===null?NaN:+n}function*x9e(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const S9e=$G(Xv),XI=S9e.right;$G(J0e).center;class Nne extends Map{constructor(e,t=A9e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Lne(this,e))}has(e){return super.has(Lne(this,e))}set(e,t){return super.set(T9e(this,e),t)}delete(e){return super.delete(E9e(this,e))}}function Lne({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function T9e({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function E9e({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function A9e(n){return n!==null&&typeof n=="object"?n.valueOf():n}function C9e(n=Xv){if(n===Xv)return ebe;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function ebe(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const D9e=Math.sqrt(50),k9e=Math.sqrt(10),I9e=Math.sqrt(2);function HR(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=D9e?10:a>=k9e?5:a>=I9e?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(n*c),l=Math.round(e*c),s/c<n&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(n/c),l=Math.round(e/c),s*c<n&&++s,l*c>e&&--l),l<s&&.5<=t&&t<2?HR(n,e,t*2):[s,l,c]}function i9(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,o]=r?HR(e,n,t):HR(n,e,t);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function a9(n,e,t){return e=+e,n=+n,t=+t,HR(n,e,t)[2]}function o9(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?a9(e,n,t):a9(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function jne(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function Fne(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function tbe(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?ebe:C9e(i);r>t;){if(r-t>600){const l=r-t+1,c=e-t+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),f=Math.max(t,Math.floor(e-c*d/l+h)),m=Math.min(r,Math.floor(e+(l-c)*d/l+h));tbe(n,e,f,m,i)}const a=n[e];let o=t,s=r;for(PA(n,t,e),i(n[r],a)>0&&PA(n,t,r);o<s;){for(PA(n,o,s),++o,--s;i(n[o],a)<0;)++o;for(;i(n[s],a)>0;)--s}i(n[t],a)===0?PA(n,t,s):(++s,PA(n,s,r)),s<=e&&(t=s+1),e<=s&&(r=s-1)}return n}function PA(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function M9e(n,e,t){if(n=Float64Array.from(x9e(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return Fne(n);if(e>=1)return jne(n);var r,i=(r-1)*e,a=Math.floor(i),o=jne(tbe(n,a).subarray(0,a+1)),s=Fne(n.subarray(a+1));return o+(s-o)*(i-a)}}function P9e(n,e,t=J0e){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,a=Math.floor(i),o=+t(n[a],a,n),s=+t(n[a+1],a+1,n);return o+(s-o)*(i-a)}}function O9e(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function Ju(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Yg(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const s9=Symbol("implicit");function BG(){var n=new Nne,e=[],t=[],r=s9;function i(a){let o=n.get(a);if(o===void 0){if(r!==s9)return r;n.set(a,o=e.push(a)-1)}return t[o%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new Nne;for(const o of a)n.has(o)||n.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return BG(e,t).unknown(r)},Ju.apply(i,arguments),i}function hk(){var n=BG().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,o,s=!1,l=0,c=0,u=.5;delete n.unknown;function d(){var h=e().length,f=i<r,m=f?i:r,v=f?r:i;a=(v-m)/Math.max(1,h-l+c*2),s&&(a=Math.floor(a)),m+=(v-m-a*(h-l))*u,o=a*(1-l),s&&(m=Math.round(m),o=Math.round(o));var y=O9e(h).map(function(w){return m+a*w});return t(f?y.reverse():y)}return n.domain=function(h){return arguments.length?(e(h),d()):e()},n.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},n.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,d()},n.bandwidth=function(){return o},n.step=function(){return a},n.round=function(h){return arguments.length?(s=!!h,d()):s},n.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},n.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},n.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},n.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},n.copy=function(){return hk(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},Ju.apply(d(),arguments)}function nbe(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return nbe(e())},n}function uD(){return nbe(hk.apply(null,arguments).paddingInner(1))}function UG(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function rbe(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function ZI(){}var fk=.7,qR=1/fk,t1="\\s*([+-]?\\d+)\\s*",pk="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ef="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",R9e=/^#([0-9a-f]{3,8})$/,N9e=new RegExp(`^rgb\\(${t1},${t1},${t1}\\)$`),L9e=new RegExp(`^rgb\\(${Ef},${Ef},${Ef}\\)$`),j9e=new RegExp(`^rgba\\(${t1},${t1},${t1},${pk}\\)$`),F9e=new RegExp(`^rgba\\(${Ef},${Ef},${Ef},${pk}\\)$`),$9e=new RegExp(`^hsl\\(${pk},${Ef},${Ef}\\)$`),B9e=new RegExp(`^hsla\\(${pk},${Ef},${Ef},${pk}\\)$`),$ne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};UG(ZI,gk,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Bne,formatHex:Bne,formatHex8:U9e,formatHsl:V9e,formatRgb:Une,toString:Une});function Bne(){return this.rgb().formatHex()}function U9e(){return this.rgb().formatHex8()}function V9e(){return ibe(this).formatHsl()}function Une(){return this.rgb().formatRgb()}function gk(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=R9e.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?Vne(e):t===3?new Jl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?jM(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?jM(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=N9e.exec(n))?new Jl(e[1],e[2],e[3],1):(e=L9e.exec(n))?new Jl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=j9e.exec(n))?jM(e[1],e[2],e[3],e[4]):(e=F9e.exec(n))?jM(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$9e.exec(n))?qne(e[1],e[2]/100,e[3]/100,1):(e=B9e.exec(n))?qne(e[1],e[2]/100,e[3]/100,e[4]):$ne.hasOwnProperty(n)?Vne($ne[n]):n==="transparent"?new Jl(NaN,NaN,NaN,0):null}function Vne(n){return new Jl(n>>16&255,n>>8&255,n&255,1)}function jM(n,e,t,r){return r<=0&&(n=e=t=NaN),new Jl(n,e,t,r)}function z9e(n){return n instanceof ZI||(n=gk(n)),n?(n=n.rgb(),new Jl(n.r,n.g,n.b,n.opacity)):new Jl}function l9(n,e,t,r){return arguments.length===1?z9e(n):new Jl(n,e,t,r??1)}function Jl(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}UG(Jl,l9,rbe(ZI,{brighter(n){return n=n==null?qR:Math.pow(qR,n),new Jl(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?fk:Math.pow(fk,n),new Jl(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Jl(uw(this.r),uw(this.g),uw(this.b),GR(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zne,formatHex:zne,formatHex8:H9e,formatRgb:Hne,toString:Hne}));function zne(){return`#${Yb(this.r)}${Yb(this.g)}${Yb(this.b)}`}function H9e(){return`#${Yb(this.r)}${Yb(this.g)}${Yb(this.b)}${Yb((isNaN(this.opacity)?1:this.opacity)*255)}`}function Hne(){const n=GR(this.opacity);return`${n===1?"rgb(":"rgba("}${uw(this.r)}, ${uw(this.g)}, ${uw(this.b)}${n===1?")":`, ${n})`}`}function GR(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function uw(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Yb(n){return n=uw(n),(n<16?"0":"")+n.toString(16)}function qne(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Zd(n,e,t,r)}function ibe(n){if(n instanceof Zd)return new Zd(n.h,n.s,n.l,n.opacity);if(n instanceof ZI||(n=gk(n)),!n)return new Zd;if(n instanceof Zd)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Zd(o,s,l,n.opacity)}function q9e(n,e,t,r){return arguments.length===1?ibe(n):new Zd(n,e,t,r??1)}function Zd(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}UG(Zd,q9e,rbe(ZI,{brighter(n){return n=n==null?qR:Math.pow(qR,n),new Zd(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?fk:Math.pow(fk,n),new Zd(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Jl(X$(n>=240?n-240:n+120,i,r),X$(n,i,r),X$(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Zd(Gne(this.h),FM(this.s),FM(this.l),GR(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=GR(this.opacity);return`${n===1?"hsl(":"hsla("}${Gne(this.h)}, ${FM(this.s)*100}%, ${FM(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Gne(n){return n=(n||0)%360,n<0?n+360:n}function FM(n){return Math.max(0,Math.min(1,n||0))}function X$(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const VG=n=>()=>n;function G9e(n,e){return function(t){return n+t*e}}function W9e(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Y9e(n){return(n=+n)==1?abe:function(e,t){return t-e?W9e(e,t,n):VG(isNaN(e)?t:e)}}function abe(n,e){var t=e-n;return t?G9e(n,t):VG(isNaN(n)?e:n)}const Wne=function n(e){var t=Y9e(e);function r(i,a){var o=t((i=l9(i)).r,(a=l9(a)).r),s=t(i.g,a.g),l=t(i.b,a.b),c=abe(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=n,r}(1);function K9e(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function X9e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Z9e(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)i[o]=_T(n[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Q9e(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function WR(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function J9e(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=_T(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var c9=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Z$=new RegExp(c9.source,"g");function eHe(n){return function(){return n}}function tHe(n){return function(e){return n(e)+""}}function nHe(n,e){var t=c9.lastIndex=Z$.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(n=n+"",e=e+"";(r=c9.exec(n))&&(i=Z$.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:WR(r,i)})),t=Z$.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?tHe(l[0].x):eHe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)s[(d=l[u]).i]=d.x(c);return s.join("")})}function _T(n,e){var t=typeof e,r;return e==null||t==="boolean"?VG(e):(t==="number"?WR:t==="string"?(r=gk(e))?(e=r,Wne):nHe:e instanceof gk?Wne:e instanceof Date?Q9e:X9e(e)?K9e:Array.isArray(e)?Z9e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?J9e:WR)(n,e)}function zG(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function rHe(n,e){e===void 0&&(e=n,n=_T);for(var t=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);t<r;)a[t]=n(i,i=e[++t]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function iHe(n){return function(){return n}}function YR(n){return+n}var Yne=[0,1];function yl(n){return n}function u9(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:iHe(isNaN(e)?NaN:.5)}function aHe(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function oHe(n,e,t){var r=n[0],i=n[1],a=e[0],o=e[1];return i<r?(r=u9(i,r),a=t(o,a)):(r=u9(r,i),a=t(a,o)),function(s){return a(r(s))}}function sHe(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=u9(n[o],n[o+1]),a[o]=t(e[o],e[o+1]);return function(s){var l=XI(n,s,1,r)-1;return a[l](i[l](s))}}function QI(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Dj(){var n=Yne,e=Yne,t=_T,r,i,a,o=yl,s,l,c;function u(){var h=Math.min(n.length,e.length);return o!==yl&&(o=aHe(n[0],n[h-1])),s=h>2?sHe:oHe,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?a:(l||(l=s(n.map(r),e,t)))(r(o(h)))}return d.invert=function(h){return o(i((c||(c=s(e,n.map(r),WR)))(h)))},d.domain=function(h){return arguments.length?(n=Array.from(h,YR),u()):n.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),t=zG,u()},d.clamp=function(h){return arguments.length?(o=h?!0:yl,u()):o!==yl},d.interpolate=function(h){return arguments.length?(t=h,u()):t},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,f){return r=h,i=f,u()}}function HG(){return Dj()(yl,yl)}function lHe(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function KR(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function R1(n){return n=KR(Math.abs(n)),n?n[1]:NaN}function cHe(n,e){return function(t,r){for(var i=t.length,a=[],o=0,s=n[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=n[o=(o+1)%n.length];return a.reverse().join(e)}}function uHe(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var dHe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mk(n){if(!(e=dHe.exec(n)))throw new Error("invalid format: "+n);var e;return new qG({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}mk.prototype=qG.prototype;function qG(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}qG.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hHe(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var obe;function fHe(n,e){var t=KR(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(obe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+KR(n,Math.max(0,e+a-1))[0]}function Kne(n,e){var t=KR(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Xne={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:lHe,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>Kne(n*100,e),r:Kne,s:fHe,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Zne(n){return n}var Qne=Array.prototype.map,Jne=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function pHe(n){var e=n.grouping===void 0||n.thousands===void 0?Zne:cHe(Qne.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?Zne:uHe(Qne.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",s=n.minus===void 0?"−":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function c(d){d=mk(d);var h=d.fill,f=d.align,m=d.sign,v=d.symbol,y=d.zero,w=d.width,_=d.comma,S=d.precision,A=d.trim,C=d.type;C==="n"?(_=!0,C="g"):Xne[C]||(S===void 0&&(S=12),A=!0,C="g"),(y||h==="0"&&f==="=")&&(y=!0,h="0",f="=");var D=v==="$"?t:v==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",M=v==="$"?r:/[%p]/.test(C)?o:"",P=Xne[C],O=/[defgprs%]/.test(C);S=S===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function j(L){var B=D,$=M,Y,q,W;if(C==="c")$=P(L)+$,L="";else{L=+L;var X=L<0||1/L<0;if(L=isNaN(L)?l:P(Math.abs(L),S),A&&(L=hHe(L)),X&&+L==0&&m!=="+"&&(X=!1),B=(X?m==="("?m:s:m==="-"||m==="("?"":m)+B,$=(C==="s"?Jne[8+obe/3]:"")+$+(X&&m==="("?")":""),O){for(Y=-1,q=L.length;++Y<q;)if(W=L.charCodeAt(Y),48>W||W>57){$=(W===46?i+L.slice(Y+1):L.slice(Y))+$,L=L.slice(0,Y);break}}}_&&!y&&(L=e(L,1/0));var te=B.length+L.length+$.length,re=te<w?new Array(w-te+1).join(h):"";switch(_&&y&&(L=e(re+L,re.length?w-$.length:1/0),re=""),f){case"<":L=B+L+$+re;break;case"=":L=B+re+L+$;break;case"^":L=re.slice(0,te=re.length>>1)+B+L+$+re.slice(te);break;default:L=re+B+L+$;break}return a(L)}return j.toString=function(){return d+""},j}function u(d,h){var f=c((d=mk(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(R1(h)/3)))*3,v=Math.pow(10,-m),y=Jne[8+m/3];return function(w){return f(v*w)+y}}return{format:c,formatPrefix:u}}var $M,GG,sbe;gHe({thousands:",",grouping:[3],currency:["$",""]});function gHe(n){return $M=pHe(n),GG=$M.format,sbe=$M.formatPrefix,$M}function mHe(n){return Math.max(0,-R1(Math.abs(n)))}function vHe(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(R1(e)/3)))*3-R1(Math.abs(n)))}function yHe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,R1(e)-R1(n))+1}function lbe(n,e,t,r){var i=o9(n,e,t),a;switch(r=mk(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=vHe(i,o))&&(r.precision=a),sbe(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=yHe(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=mHe(i))&&(r.precision=a-(r.type==="%")*2);break}}return GG(r)}function Ty(n){var e=n.domain;return n.ticks=function(t){var r=e();return i9(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return lbe(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,u=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);u-- >0;){if(c=a9(o,s,t),c===l)return r[i]=o,r[a]=s,e(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return n},n}function XR(){var n=HG();return n.copy=function(){return QI(n,XR())},Ju.apply(n,arguments),Ty(n)}function cbe(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,YR),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return cbe(n).unknown(e)},n=arguments.length?Array.from(n,YR):[0,1],Ty(t)}function ube(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],o;return a<i&&(o=t,t=r,r=o,o=i,i=a,a=o),n[t]=e.floor(i),n[r]=e.ceil(a),n}function ere(n){return Math.log(n)}function tre(n){return Math.exp(n)}function bHe(n){return-Math.log(-n)}function wHe(n){return-Math.exp(-n)}function _He(n){return isFinite(n)?+("1e"+n):n<0?0:n}function xHe(n){return n===10?_He:n===Math.E?Math.exp:e=>Math.pow(n,e)}function SHe(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function nre(n){return(e,t)=>-n(-e,t)}function WG(n){const e=n(ere,tre),t=e.domain;let r=10,i,a;function o(){return i=SHe(r),a=xHe(r),t()[0]<0?(i=nre(i),a=nre(a),n(bHe,wHe)):n(ere,tre),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(t(s),o()):t()},e.ticks=s=>{const l=t();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=i(c),f=i(u),m,v;const y=s==null?10:+s;let w=[];if(!(r%1)&&f-h<y){if(h=Math.floor(h),f=Math.ceil(f),c>0){for(;h<=f;++h)for(m=1;m<r;++m)if(v=h<0?m/a(-h):m*a(h),!(v<c)){if(v>u)break;w.push(v)}}else for(;h<=f;++h)for(m=r-1;m>=1;--m)if(v=h>0?m/a(-h):m*a(h),!(v<c)){if(v>u)break;w.push(v)}w.length*2<y&&(w=i9(c,u,y))}else w=i9(h,f,Math.min(f-h,y)).map(a);return d?w.reverse():w},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=mk(l)).precision==null&&(l.trim=!0),l=GG(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return u=>{let d=u/a(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>t(ube(t(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function dbe(){const n=WG(Dj()).domain([1,10]);return n.copy=()=>QI(n,dbe()).base(n.base()),Ju.apply(n,arguments),n}function rre(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function ire(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function YG(n){var e=1,t=n(rre(e),ire(e));return t.constant=function(r){return arguments.length?n(rre(e=+r),ire(e)):e},Ty(t)}function hbe(){var n=YG(Dj());return n.copy=function(){return QI(n,hbe()).constant(n.constant())},Ju.apply(n,arguments)}function are(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function THe(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function EHe(n){return n<0?-n*n:n*n}function KG(n){var e=n(yl,yl),t=1;function r(){return t===1?n(yl,yl):t===.5?n(THe,EHe):n(are(t),are(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Ty(e)}function XG(){var n=KG(Dj());return n.copy=function(){return QI(n,XG()).exponent(n.exponent())},Ju.apply(n,arguments),n}function AHe(){return XG.apply(null,arguments).exponent(.5)}function ore(n){return Math.sign(n)*n*n}function CHe(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function fbe(){var n=HG(),e=[0,1],t=!1,r;function i(a){var o=CHe(n(a));return isNaN(o)?r:t?Math.round(o):o}return i.invert=function(a){return n.invert(ore(a))},i.domain=function(a){return arguments.length?(n.domain(a),i):n.domain()},i.range=function(a){return arguments.length?(n.range((e=Array.from(a,YR)).map(ore)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(n.clamp(a),i):n.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return fbe(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},Ju.apply(i,arguments),Ty(i)}function pbe(){var n=[],e=[],t=[],r;function i(){var o=0,s=Math.max(1,e.length);for(t=new Array(s-1);++o<s;)t[o-1]=P9e(n,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[XI(t,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?t[s-1]:n[0],s<t.length?t[s]:n[n.length-1]]},a.domain=function(o){if(!arguments.length)return n.slice();n=[];for(let s of o)s!=null&&!isNaN(s=+s)&&n.push(s);return n.sort(Xv),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return t.slice()},a.copy=function(){return pbe().domain(n).range(e).unknown(r)},Ju.apply(a,arguments)}function gbe(){var n=0,e=1,t=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[XI(r,l,0,t)]:a}function s(){var l=-1;for(r=new Array(t);++l<t;)r[l]=((l+1)*e-(l-t)*n)/(t+1);return o}return o.domain=function(l){return arguments.length?([n,e]=l,n=+n,e=+e,s()):[n,e]},o.range=function(l){return arguments.length?(t=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[n,r[0]]:c>=t?[r[t-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return gbe().domain([n,e]).range(i).unknown(a)},Ju.apply(Ty(o),arguments)}function mbe(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[XI(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[n[o-1],n[o]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return mbe().domain(n).range(e).unknown(t)},Ju.apply(i,arguments)}const Q$=new Date,J$=new Date;function Eo(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),e(a,s),n(a);while(c<a&&a<o);return l},i.filter=a=>Eo(o=>{if(o>=o)for(;n(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),t&&(i.count=(a,o)=>(Q$.setTime(+a),J$.setTime(+o),n(Q$),n(J$),Math.floor(t(Q$,J$))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const ZR=Eo(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);ZR.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Eo(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):ZR);ZR.range;const rg=1e3,Vu=rg*60,ig=Vu*60,Cg=ig*24,ZG=Cg*7,sre=Cg*30,eB=Cg*365,Kb=Eo(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*rg)},(n,e)=>(e-n)/rg,n=>n.getUTCSeconds());Kb.range;const QG=Eo(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*rg)},(n,e)=>{n.setTime(+n+e*Vu)},(n,e)=>(e-n)/Vu,n=>n.getMinutes());QG.range;const JG=Eo(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Vu)},(n,e)=>(e-n)/Vu,n=>n.getUTCMinutes());JG.range;const eW=Eo(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*rg-n.getMinutes()*Vu)},(n,e)=>{n.setTime(+n+e*ig)},(n,e)=>(e-n)/ig,n=>n.getHours());eW.range;const tW=Eo(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*ig)},(n,e)=>(e-n)/ig,n=>n.getUTCHours());tW.range;const JI=Eo(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Vu)/Cg,n=>n.getDate()-1);JI.range;const kj=Eo(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Cg,n=>n.getUTCDate()-1);kj.range;const vbe=Eo(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Cg,n=>Math.floor(n/Cg));vbe.range;function Kw(n){return Eo(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Vu)/ZG)}const Ij=Kw(0),QR=Kw(1),DHe=Kw(2),kHe=Kw(3),N1=Kw(4),IHe=Kw(5),MHe=Kw(6);Ij.range;QR.range;DHe.range;kHe.range;N1.range;IHe.range;MHe.range;function Xw(n){return Eo(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/ZG)}const Mj=Xw(0),JR=Xw(1),PHe=Xw(2),OHe=Xw(3),L1=Xw(4),RHe=Xw(5),NHe=Xw(6);Mj.range;JR.range;PHe.range;OHe.range;L1.range;RHe.range;NHe.range;const nW=Eo(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());nW.range;const rW=Eo(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());rW.range;const Dg=Eo(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Dg.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Eo(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Dg.range;const kg=Eo(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());kg.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Eo(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});kg.range;function ybe(n,e,t,r,i,a){const o=[[Kb,1,rg],[Kb,5,5*rg],[Kb,15,15*rg],[Kb,30,30*rg],[a,1,Vu],[a,5,5*Vu],[a,15,15*Vu],[a,30,30*Vu],[i,1,ig],[i,3,3*ig],[i,6,6*ig],[i,12,12*ig],[r,1,Cg],[r,2,2*Cg],[t,1,ZG],[e,1,sre],[e,3,3*sre],[n,1,eB]];function s(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const f=d&&typeof d.range=="function"?d:l(c,u,d),m=f?f.range(c,+u+1):[];return h?m.reverse():m}function l(c,u,d){const h=Math.abs(u-c)/d,f=$G(([,,y])=>y).right(o,h);if(f===o.length)return n.every(o9(c/eB,u/eB,d));if(f===0)return ZR.every(Math.max(o9(c,u,d),1));const[m,v]=o[h/o[f-1][2]<o[f][2]/h?f-1:f];return m.every(v)}return[s,l]}const[LHe,jHe]=ybe(kg,rW,Mj,vbe,tW,JG),[FHe,$He]=ybe(Dg,nW,Ij,JI,eW,QG);function tB(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function nB(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function OA(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function BHe(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,o=n.shortDays,s=n.months,l=n.shortMonths,c=RA(i),u=NA(i),d=RA(a),h=NA(a),f=RA(o),m=NA(o),v=RA(s),y=NA(s),w=RA(l),_=NA(l),S={a:X,A:te,b:re,B:z,c:null,d:fre,e:fre,f:c8e,g:b8e,G:_8e,H:o8e,I:s8e,j:l8e,L:bbe,m:u8e,M:d8e,p:oe,q:le,Q:mre,s:vre,S:h8e,u:f8e,U:p8e,V:g8e,w:m8e,W:v8e,x:null,X:null,y:y8e,Y:w8e,Z:x8e,"%":gre},A={a:ee,A:be,b:he,B:pe,c:null,d:pre,e:pre,f:A8e,g:L8e,G:F8e,H:S8e,I:T8e,j:E8e,L:_be,m:C8e,M:D8e,p:ct,q:Be,Q:mre,s:vre,S:k8e,u:I8e,U:M8e,V:P8e,w:O8e,W:R8e,x:null,X:null,y:N8e,Y:j8e,Z:$8e,"%":gre},C={a:j,A:L,b:B,B:$,c:Y,d:dre,e:dre,f:n8e,g:ure,G:cre,H:hre,I:hre,j:QHe,L:t8e,m:ZHe,M:JHe,p:O,q:XHe,Q:i8e,s:a8e,S:e8e,u:qHe,U:GHe,V:WHe,w:HHe,W:YHe,x:q,X:W,y:ure,Y:cre,Z:KHe,"%":r8e};S.x=D(t,S),S.X=D(r,S),S.c=D(e,S),A.x=D(t,A),A.X=D(r,A),A.c=D(e,A);function D(Se,_e){return function(me){var fe=[],Ge=-1,Ve=0,nt=Se.length,we,rt,on;for(me instanceof Date||(me=new Date(+me));++Ge<nt;)Se.charCodeAt(Ge)===37&&(fe.push(Se.slice(Ve,Ge)),(rt=lre[we=Se.charAt(++Ge)])!=null?we=Se.charAt(++Ge):rt=we==="e"?" ":"0",(on=_e[we])&&(we=on(me,rt)),fe.push(we),Ve=Ge+1);return fe.push(Se.slice(Ve,Ge)),fe.join("")}}function M(Se,_e){return function(me){var fe=OA(1900,void 0,1),Ge=P(fe,Se,me+="",0),Ve,nt;if(Ge!=me.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(_e&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Ve=nB(OA(fe.y,0,1)),nt=Ve.getUTCDay(),Ve=nt>4||nt===0?JR.ceil(Ve):JR(Ve),Ve=kj.offset(Ve,(fe.V-1)*7),fe.y=Ve.getUTCFullYear(),fe.m=Ve.getUTCMonth(),fe.d=Ve.getUTCDate()+(fe.w+6)%7):(Ve=tB(OA(fe.y,0,1)),nt=Ve.getDay(),Ve=nt>4||nt===0?QR.ceil(Ve):QR(Ve),Ve=JI.offset(Ve,(fe.V-1)*7),fe.y=Ve.getFullYear(),fe.m=Ve.getMonth(),fe.d=Ve.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),nt="Z"in fe?nB(OA(fe.y,0,1)).getUTCDay():tB(OA(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(nt+5)%7:fe.w+fe.U*7-(nt+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,nB(fe)):tB(fe)}}function P(Se,_e,me,fe){for(var Ge=0,Ve=_e.length,nt=me.length,we,rt;Ge<Ve;){if(fe>=nt)return-1;if(we=_e.charCodeAt(Ge++),we===37){if(we=_e.charAt(Ge++),rt=C[we in lre?_e.charAt(Ge++):we],!rt||(fe=rt(Se,me,fe))<0)return-1}else if(we!=me.charCodeAt(fe++))return-1}return fe}function O(Se,_e,me){var fe=c.exec(_e.slice(me));return fe?(Se.p=u.get(fe[0].toLowerCase()),me+fe[0].length):-1}function j(Se,_e,me){var fe=f.exec(_e.slice(me));return fe?(Se.w=m.get(fe[0].toLowerCase()),me+fe[0].length):-1}function L(Se,_e,me){var fe=d.exec(_e.slice(me));return fe?(Se.w=h.get(fe[0].toLowerCase()),me+fe[0].length):-1}function B(Se,_e,me){var fe=w.exec(_e.slice(me));return fe?(Se.m=_.get(fe[0].toLowerCase()),me+fe[0].length):-1}function $(Se,_e,me){var fe=v.exec(_e.slice(me));return fe?(Se.m=y.get(fe[0].toLowerCase()),me+fe[0].length):-1}function Y(Se,_e,me){return P(Se,e,_e,me)}function q(Se,_e,me){return P(Se,t,_e,me)}function W(Se,_e,me){return P(Se,r,_e,me)}function X(Se){return o[Se.getDay()]}function te(Se){return a[Se.getDay()]}function re(Se){return l[Se.getMonth()]}function z(Se){return s[Se.getMonth()]}function oe(Se){return i[+(Se.getHours()>=12)]}function le(Se){return 1+~~(Se.getMonth()/3)}function ee(Se){return o[Se.getUTCDay()]}function be(Se){return a[Se.getUTCDay()]}function he(Se){return l[Se.getUTCMonth()]}function pe(Se){return s[Se.getUTCMonth()]}function ct(Se){return i[+(Se.getUTCHours()>=12)]}function Be(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var _e=D(Se+="",S);return _e.toString=function(){return Se},_e},parse:function(Se){var _e=M(Se+="",!1);return _e.toString=function(){return Se},_e},utcFormat:function(Se){var _e=D(Se+="",A);return _e.toString=function(){return Se},_e},utcParse:function(Se){var _e=M(Se+="",!0);return _e.toString=function(){return Se},_e}}}var lre={"-":"",_:" ",0:"0"},Wo=/^\s*\d+/,UHe=/^%/,VHe=/[\\^$*+?|[\]().{}]/g;function Yr(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function zHe(n){return n.replace(VHe,"\\$&")}function RA(n){return new RegExp("^(?:"+n.map(zHe).join("|")+")","i")}function NA(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function HHe(n,e,t){var r=Wo.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function qHe(n,e,t){var r=Wo.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function GHe(n,e,t){var r=Wo.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function WHe(n,e,t){var r=Wo.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function YHe(n,e,t){var r=Wo.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function cre(n,e,t){var r=Wo.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function ure(n,e,t){var r=Wo.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function KHe(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function XHe(n,e,t){var r=Wo.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function ZHe(n,e,t){var r=Wo.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function dre(n,e,t){var r=Wo.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function QHe(n,e,t){var r=Wo.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function hre(n,e,t){var r=Wo.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function JHe(n,e,t){var r=Wo.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function e8e(n,e,t){var r=Wo.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function t8e(n,e,t){var r=Wo.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function n8e(n,e,t){var r=Wo.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function r8e(n,e,t){var r=UHe.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function i8e(n,e,t){var r=Wo.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function a8e(n,e,t){var r=Wo.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function fre(n,e){return Yr(n.getDate(),e,2)}function o8e(n,e){return Yr(n.getHours(),e,2)}function s8e(n,e){return Yr(n.getHours()%12||12,e,2)}function l8e(n,e){return Yr(1+JI.count(Dg(n),n),e,3)}function bbe(n,e){return Yr(n.getMilliseconds(),e,3)}function c8e(n,e){return bbe(n,e)+"000"}function u8e(n,e){return Yr(n.getMonth()+1,e,2)}function d8e(n,e){return Yr(n.getMinutes(),e,2)}function h8e(n,e){return Yr(n.getSeconds(),e,2)}function f8e(n){var e=n.getDay();return e===0?7:e}function p8e(n,e){return Yr(Ij.count(Dg(n)-1,n),e,2)}function wbe(n){var e=n.getDay();return e>=4||e===0?N1(n):N1.ceil(n)}function g8e(n,e){return n=wbe(n),Yr(N1.count(Dg(n),n)+(Dg(n).getDay()===4),e,2)}function m8e(n){return n.getDay()}function v8e(n,e){return Yr(QR.count(Dg(n)-1,n),e,2)}function y8e(n,e){return Yr(n.getFullYear()%100,e,2)}function b8e(n,e){return n=wbe(n),Yr(n.getFullYear()%100,e,2)}function w8e(n,e){return Yr(n.getFullYear()%1e4,e,4)}function _8e(n,e){var t=n.getDay();return n=t>=4||t===0?N1(n):N1.ceil(n),Yr(n.getFullYear()%1e4,e,4)}function x8e(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yr(e/60|0,"0",2)+Yr(e%60,"0",2)}function pre(n,e){return Yr(n.getUTCDate(),e,2)}function S8e(n,e){return Yr(n.getUTCHours(),e,2)}function T8e(n,e){return Yr(n.getUTCHours()%12||12,e,2)}function E8e(n,e){return Yr(1+kj.count(kg(n),n),e,3)}function _be(n,e){return Yr(n.getUTCMilliseconds(),e,3)}function A8e(n,e){return _be(n,e)+"000"}function C8e(n,e){return Yr(n.getUTCMonth()+1,e,2)}function D8e(n,e){return Yr(n.getUTCMinutes(),e,2)}function k8e(n,e){return Yr(n.getUTCSeconds(),e,2)}function I8e(n){var e=n.getUTCDay();return e===0?7:e}function M8e(n,e){return Yr(Mj.count(kg(n)-1,n),e,2)}function xbe(n){var e=n.getUTCDay();return e>=4||e===0?L1(n):L1.ceil(n)}function P8e(n,e){return n=xbe(n),Yr(L1.count(kg(n),n)+(kg(n).getUTCDay()===4),e,2)}function O8e(n){return n.getUTCDay()}function R8e(n,e){return Yr(JR.count(kg(n)-1,n),e,2)}function N8e(n,e){return Yr(n.getUTCFullYear()%100,e,2)}function L8e(n,e){return n=xbe(n),Yr(n.getUTCFullYear()%100,e,2)}function j8e(n,e){return Yr(n.getUTCFullYear()%1e4,e,4)}function F8e(n,e){var t=n.getUTCDay();return n=t>=4||t===0?L1(n):L1.ceil(n),Yr(n.getUTCFullYear()%1e4,e,4)}function $8e(){return"+0000"}function gre(){return"%"}function mre(n){return+n}function vre(n){return Math.floor(+n/1e3)}var Lx,Sbe,Tbe;B8e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function B8e(n){return Lx=BHe(n),Sbe=Lx.format,Lx.parse,Tbe=Lx.utcFormat,Lx.utcParse,Lx}function U8e(n){return new Date(n)}function V8e(n){return n instanceof Date?+n:+new Date(+n)}function iW(n,e,t,r,i,a,o,s,l,c){var u=HG(),d=u.invert,h=u.domain,f=c(".%L"),m=c(":%S"),v=c("%I:%M"),y=c("%I %p"),w=c("%a %d"),_=c("%b %d"),S=c("%B"),A=c("%Y");function C(D){return(l(D)<D?f:s(D)<D?m:o(D)<D?v:a(D)<D?y:r(D)<D?i(D)<D?w:_:t(D)<D?S:A)(D)}return u.invert=function(D){return new Date(d(D))},u.domain=function(D){return arguments.length?h(Array.from(D,V8e)):h().map(U8e)},u.ticks=function(D){var M=h();return n(M[0],M[M.length-1],D??10)},u.tickFormat=function(D,M){return M==null?C:c(M)},u.nice=function(D){var M=h();return(!D||typeof D.range!="function")&&(D=e(M[0],M[M.length-1],D??10)),D?h(ube(M,D)):u},u.copy=function(){return QI(u,iW(n,e,t,r,i,a,o,s,l,c))},u}function z8e(){return Ju.apply(iW(FHe,$He,Dg,nW,Ij,JI,eW,QG,Kb,Sbe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function H8e(){return Ju.apply(iW(LHe,jHe,kg,rW,Mj,kj,tW,JG,Kb,Tbe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Pj(){var n=0,e=1,t,r,i,a,o=yl,s=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(a(d)-t)*i,s?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([n,e]=d,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),c):[n,e]},c.clamp=function(d){return arguments.length?(s=!!d,c):s},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(h){var f,m;return arguments.length?([f,m]=h,o=d(f,m),c):[o(0),o(1)]}}return c.range=u(_T),c.rangeRound=u(zG),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return a=d,t=d(n),r=d(e),i=t===r?0:1/(r-t),c}}function Ey(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Ebe(){var n=Ty(Pj()(yl));return n.copy=function(){return Ey(n,Ebe())},Yg.apply(n,arguments)}function Abe(){var n=WG(Pj()).domain([1,10]);return n.copy=function(){return Ey(n,Abe()).base(n.base())},Yg.apply(n,arguments)}function Cbe(){var n=YG(Pj());return n.copy=function(){return Ey(n,Cbe()).constant(n.constant())},Yg.apply(n,arguments)}function aW(){var n=KG(Pj());return n.copy=function(){return Ey(n,aW()).exponent(n.exponent())},Yg.apply(n,arguments)}function q8e(){return aW.apply(null,arguments).exponent(.5)}function Dbe(){var n=[],e=yl;function t(r){if(r!=null&&!isNaN(r=+r))return e((XI(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(Xv),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,a)=>M9e(n,a/r))},t.copy=function(){return Dbe(e).domain(n)},Yg.apply(t,arguments)}function Oj(){var n=0,e=.5,t=1,r=1,i,a,o,s,l,c=yl,u,d=!1,h;function f(v){return isNaN(v=+v)?h:(v=.5+((v=+u(v))-a)*(r*v<r*a?s:l),c(d?Math.max(0,Math.min(1,v)):v))}f.domain=function(v){return arguments.length?([n,e,t]=v,i=u(n=+n),a=u(e=+e),o=u(t=+t),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,f):[n,e,t]},f.clamp=function(v){return arguments.length?(d=!!v,f):d},f.interpolator=function(v){return arguments.length?(c=v,f):c};function m(v){return function(y){var w,_,S;return arguments.length?([w,_,S]=y,c=rHe(v,[w,_,S]),f):[c(0),c(.5),c(1)]}}return f.range=m(_T),f.rangeRound=m(zG),f.unknown=function(v){return arguments.length?(h=v,f):h},function(v){return u=v,i=v(n),a=v(e),o=v(t),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,f}}function kbe(){var n=Ty(Oj()(yl));return n.copy=function(){return Ey(n,kbe())},Yg.apply(n,arguments)}function Ibe(){var n=WG(Oj()).domain([.1,1,10]);return n.copy=function(){return Ey(n,Ibe()).base(n.base())},Yg.apply(n,arguments)}function Mbe(){var n=YG(Oj());return n.copy=function(){return Ey(n,Mbe()).constant(n.constant())},Yg.apply(n,arguments)}function oW(){var n=KG(Oj());return n.copy=function(){return Ey(n,oW()).exponent(n.exponent())},Yg.apply(n,arguments)}function G8e(){return oW.apply(null,arguments).exponent(.5)}const yre=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hk,scaleDiverging:kbe,scaleDivergingLog:Ibe,scaleDivergingPow:oW,scaleDivergingSqrt:G8e,scaleDivergingSymlog:Mbe,scaleIdentity:cbe,scaleImplicit:s9,scaleLinear:XR,scaleLog:dbe,scaleOrdinal:BG,scalePoint:uD,scalePow:XG,scaleQuantile:pbe,scaleQuantize:gbe,scaleRadial:fbe,scaleSequential:Ebe,scaleSequentialLog:Abe,scaleSequentialPow:aW,scaleSequentialQuantile:Dbe,scaleSequentialSqrt:q8e,scaleSequentialSymlog:Cbe,scaleSqrt:AHe,scaleSymlog:hbe,scaleThreshold:mbe,scaleTime:z8e,scaleUtc:H8e,tickFormat:lbe},Symbol.toStringTag,{value:"Module"}));var rB,bre;function Pbe(){if(bre)return rB;bre=1;var n=yT();function e(t,r,i){for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r(s);if(l!=null&&(c===void 0?l===l&&!n(l):i(l,c)))var c=l,u=s}return u}return rB=e,rB}var iB,wre;function W8e(){if(wre)return iB;wre=1;function n(e,t){return e>t}return iB=n,iB}var aB,_re;function Y8e(){if(_re)return aB;_re=1;var n=Pbe(),e=W8e(),t=wT();function r(i){return i&&i.length?n(i,t,e):void 0}return aB=r,aB}var K8e=Y8e();const Rj=Br(K8e);var oB,xre;function X8e(){if(xre)return oB;xre=1;function n(e,t){return e<t}return oB=n,oB}var sB,Sre;function Z8e(){if(Sre)return sB;Sre=1;var n=Pbe(),e=X8e(),t=wT();function r(i){return i&&i.length?n(i,t,e):void 0}return sB=r,sB}var Q8e=Z8e();const Nj=Br(Q8e);var lB,Tre;function J8e(){if(Tre)return lB;Tre=1;var n=xG(),e=Sy(),t=B0e(),r=ac();function i(a,o){var s=r(a)?n:t;return s(a,e(o,3))}return lB=i,lB}var cB,Ere;function eqe(){if(Ere)return cB;Ere=1;var n=F0e(),e=J8e();function t(r,i){return n(e(r,i),1)}return cB=t,cB}var tqe=eqe();const nqe=Br(tqe);var uB,Are;function rqe(){if(Are)return uB;Are=1;var n=NG();function e(t,r){return n(t,r)}return uB=e,uB}var iqe=rqe();const sW=Br(iqe);var xT=1e9,aqe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},cW,oa=!0,Zu="[DecimalError] ",dw=Zu+"Invalid argument: ",lW=Zu+"Exponent out of range: ",ST=Math.floor,Cb=Math.pow,oqe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$c,Uo=1e7,ea=7,Obe=9007199254740991,eN=ST(Obe/ea),$t={};$t.absoluteValue=$t.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};$t.comparedTo=$t.cmp=function(n){var e,t,r,i,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(r=a.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};$t.decimalPlaces=$t.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*ea;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};$t.dividedBy=$t.div=function(n){return mg(this,new this.constructor(n))};$t.dividedToIntegerBy=$t.idiv=function(n){var e=this,t=e.constructor;return Ri(mg(e,new t(n),0,1),t.precision)};$t.equals=$t.eq=function(n){return!this.cmp(n)};$t.exponent=function(){return io(this)};$t.greaterThan=$t.gt=function(n){return this.cmp(n)>0};$t.greaterThanOrEqualTo=$t.gte=function(n){return this.cmp(n)>=0};$t.isInteger=$t.isint=function(){return this.e>this.d.length-2};$t.isNegative=$t.isneg=function(){return this.s<0};$t.isPositive=$t.ispos=function(){return this.s>0};$t.isZero=function(){return this.s===0};$t.lessThan=$t.lt=function(n){return this.cmp(n)<0};$t.lessThanOrEqualTo=$t.lte=function(n){return this.cmp(n)<1};$t.logarithm=$t.log=function(n){var e,t=this,r=t.constructor,i=r.precision,a=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq($c))throw Error(Zu+"NaN");if(t.s<1)throw Error(Zu+(t.s?"NaN":"-Infinity"));return t.eq($c)?new r(0):(oa=!1,e=mg(vk(t,a),vk(n,a),a),oa=!0,Ri(e,i))};$t.minus=$t.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?Lbe(e,n):Rbe(e,(n.s=-n.s,n))};$t.modulo=$t.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(Zu+"NaN");return t.s?(oa=!1,e=mg(t,n,0,1).times(n),oa=!0,t.minus(e)):Ri(new r(t),i)};$t.naturalExponential=$t.exp=function(){return Nbe(this)};$t.naturalLogarithm=$t.ln=function(){return vk(this)};$t.negated=$t.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};$t.plus=$t.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?Rbe(e,n):Lbe(e,(n.s=-n.s,n))};$t.precision=$t.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(dw+n);if(e=io(i)+1,r=i.d.length-1,t=r*ea+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};$t.squareRoot=$t.sqrt=function(){var n,e,t,r,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Zu+"NaN")}for(n=io(s),oa=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=vf(s.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=ST((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new l(e)):r=new l(i.toString()),t=l.precision,i=o=t+3;;)if(a=r,r=a.plus(mg(s,a,o+2)).times(.5),vf(a.d).slice(0,o)===(e=vf(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Ri(a,t+1,0),a.times(a).eq(s)){r=a;break}}else if(e!="9999")break;o+=4}return oa=!0,Ri(r,t)};$t.times=$t.mul=function(n){var e,t,r,i,a,o,s,l,c,u=this,d=u.constructor,h=u.d,f=(n=new d(n)).d;if(!u.s||!n.s)return new d(0);for(n.s*=u.s,t=u.e+n.e,l=h.length,c=f.length,l<c&&(a=h,h=f,f=a,o=l,l=c,c=o),a=[],o=l+c,r=o;r--;)a.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=a[i]+f[r]*h[i-r-1]+e,a[i--]=s%Uo|0,e=s/Uo|0;a[i]=(a[i]+e)%Uo|0}for(;!a[--o];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,oa?Ri(n,d.precision):n};$t.toDecimalPlaces=$t.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Pf(n,0,xT),e===void 0?e=r.rounding:Pf(e,0,8),Ri(t,n+io(t)+1,e))};$t.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Mw(r,!0):(Pf(n,0,xT),e===void 0?e=i.rounding:Pf(e,0,8),r=Ri(new i(r),n+1,e),t=Mw(r,!0,n+1)),t};$t.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?Mw(i):(Pf(n,0,xT),e===void 0?e=a.rounding:Pf(e,0,8),r=Ri(new a(i),n+io(i)+1,e),t=Mw(r.abs(),!1,n+io(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};$t.toInteger=$t.toint=function(){var n=this,e=n.constructor;return Ri(new e(n),io(n)+1,e.rounding)};$t.toNumber=function(){return+this};$t.toPower=$t.pow=function(n){var e,t,r,i,a,o,s=this,l=s.constructor,c=12,u=+(n=new l(n));if(!n.s)return new l($c);if(s=new l(s),!s.s){if(n.s<1)throw Error(Zu+"Infinity");return s}if(s.eq($c))return s;if(r=l.precision,n.eq($c))return Ri(s,r);if(e=n.e,t=n.d.length-1,o=e>=t,a=s.s,o){if((t=u<0?-u:u)<=Obe){for(i=new l($c),e=Math.ceil(r/ea+4),oa=!1;t%2&&(i=i.times(s),Dre(i.d,e)),t=ST(t/2),t!==0;)s=s.times(s),Dre(s.d,e);return oa=!0,n.s<0?new l($c).div(i):Ri(i,r)}}else if(a<0)throw Error(Zu+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,s.s=1,oa=!1,i=n.times(vk(s,r+c)),oa=!0,i=Nbe(i),i.s=a,i};$t.toPrecision=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?(t=io(i),r=Mw(i,t<=a.toExpNeg||t>=a.toExpPos)):(Pf(n,1,xT),e===void 0?e=a.rounding:Pf(e,0,8),i=Ri(new a(i),n,e),t=io(i),r=Mw(i,n<=t||t<=a.toExpNeg,n)),r};$t.toSignificantDigits=$t.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Pf(n,1,xT),e===void 0?e=r.rounding:Pf(e,0,8)),Ri(new r(t),n,e)};$t.toString=$t.valueOf=$t.val=$t.toJSON=$t[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=io(n),t=n.constructor;return Mw(n,e<=t.toExpNeg||e>=t.toExpPos)};function Rbe(n,e){var t,r,i,a,o,s,l,c,u=n.constructor,d=u.precision;if(!n.s||!e.s)return e.s||(e=new u(n)),oa?Ri(e,d):e;if(l=n.d,c=e.d,o=n.e,i=e.e,l=l.slice(),a=o-i,a){for(a<0?(r=l,a=-a,s=c.length):(r=c,i=o,s=l.length),o=Math.ceil(d/ea),s=o>s?o+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,r=c,c=l,l=r),t=0;a;)t=(l[--a]=l[a]+c[a]+t)/Uo|0,l[a]%=Uo;for(t&&(l.unshift(t),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,oa?Ri(e,d):e}function Pf(n,e,t){if(n!==~~n||n<e||n>t)throw Error(dw+n)}function vf(n){var e,t,r,i=n.length-1,a="",o=n[0];if(i>0){for(a+=o,e=1;e<i;e++)r=n[e]+"",t=ea-r.length,t&&(a+=Dv(t)),a+=r;o=n[e],r=o+"",t=ea-r.length,t&&(a+=Dv(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var mg=function(){function n(r,i){var a,o=0,s=r.length;for(r=r.slice();s--;)a=r[s]*i+o,r[s]=a%Uo|0,o=a/Uo|0;return o&&r.unshift(o),r}function e(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function t(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Uo+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var s,l,c,u,d,h,f,m,v,y,w,_,S,A,C,D,M,P,O=r.constructor,j=r.s==i.s?1:-1,L=r.d,B=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(Zu+"Division by zero");for(l=r.e-i.e,M=B.length,C=L.length,f=new O(j),m=f.d=[],c=0;B[c]==(L[c]||0);)++c;if(B[c]>(L[c]||0)&&--l,a==null?_=a=O.precision:o?_=a+(io(r)-io(i))+1:_=a,_<0)return new O(0);if(_=_/ea+2|0,c=0,M==1)for(u=0,B=B[0],_++;(c<C||u)&&_--;c++)S=u*Uo+(L[c]||0),m[c]=S/B|0,u=S%B|0;else{for(u=Uo/(B[0]+1)|0,u>1&&(B=n(B,u),L=n(L,u),M=B.length,C=L.length),A=M,v=L.slice(0,M),y=v.length;y<M;)v[y++]=0;P=B.slice(),P.unshift(0),D=B[0],B[1]>=Uo/2&&++D;do u=0,s=e(B,v,M,y),s<0?(w=v[0],M!=y&&(w=w*Uo+(v[1]||0)),u=w/D|0,u>1?(u>=Uo&&(u=Uo-1),d=n(B,u),h=d.length,y=v.length,s=e(d,v,h,y),s==1&&(u--,t(d,M<h?P:B,h))):(u==0&&(s=u=1),d=B.slice()),h=d.length,h<y&&d.unshift(0),t(v,d,y),s==-1&&(y=v.length,s=e(B,v,M,y),s<1&&(u++,t(v,M<y?P:B,y))),y=v.length):s===0&&(u++,v=[0]),m[c++]=u,s&&v[0]?v[y++]=L[A]||0:(v=[L[A]],y=1);while((A++<C||v[0]!==void 0)&&_--)}return m[0]||m.shift(),f.e=l,Ri(f,o?a+io(f)+1:a)}}();function Nbe(n,e){var t,r,i,a,o,s,l=0,c=0,u=n.constructor,d=u.precision;if(io(n)>16)throw Error(lW+io(n));if(!n.s)return new u($c);for(oa=!1,s=d,o=new u(.03125);n.abs().gte(.1);)n=n.times(o),c+=5;for(r=Math.log(Cb(2,c))/Math.LN10*2+5|0,s+=r,t=i=a=new u($c),u.precision=s;;){if(i=Ri(i.times(n),s),t=t.times(++l),o=a.plus(mg(i,t,s)),vf(o.d).slice(0,s)===vf(a.d).slice(0,s)){for(;c--;)a=Ri(a.times(a),s);return u.precision=d,e==null?(oa=!0,Ri(a,d)):a}a=o}}function io(n){for(var e=n.e*ea,t=n.d[0];t>=10;t/=10)e++;return e}function dB(n,e,t){if(e>n.LN10.sd())throw oa=!0,t&&(n.precision=t),Error(Zu+"LN10 precision limit exceeded");return Ri(new n(n.LN10),e)}function Dv(n){for(var e="";n--;)e+="0";return e}function vk(n,e){var t,r,i,a,o,s,l,c,u,d=1,h=10,f=n,m=f.d,v=f.constructor,y=v.precision;if(f.s<1)throw Error(Zu+(f.s?"NaN":"-Infinity"));if(f.eq($c))return new v(0);if(e==null?(oa=!1,c=y):c=e,f.eq(10))return e==null&&(oa=!0),dB(v,c);if(c+=h,v.precision=c,t=vf(m),r=t.charAt(0),a=io(f),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)f=f.times(n),t=vf(f.d),r=t.charAt(0),d++;a=io(f),r>1?(f=new v("0."+t),a++):f=new v(r+"."+t.slice(1))}else return l=dB(v,c+2,y).times(a+""),f=vk(new v(r+"."+t.slice(1)),c-h).plus(l),v.precision=y,e==null?(oa=!0,Ri(f,y)):f;for(s=o=f=mg(f.minus($c),f.plus($c),c),u=Ri(f.times(f),c),i=3;;){if(o=Ri(o.times(u),c),l=s.plus(mg(o,new v(i),c)),vf(l.d).slice(0,c)===vf(s.d).slice(0,c))return s=s.times(2),a!==0&&(s=s.plus(dB(v,c+2,y).times(a+""))),s=mg(s,new v(d),c),v.precision=y,e==null?(oa=!0,Ri(s,y)):s;s=l,i+=2}}function Cre(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=ST(t/ea),n.d=[],r=(t+1)%ea,t<0&&(r+=ea),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=ea;r<i;)n.d.push(+e.slice(r,r+=ea));e=e.slice(r),r=ea-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),oa&&(n.e>eN||n.e<-eN))throw Error(lW+t)}else n.s=0,n.e=0,n.d=[0];return n}function Ri(n,e,t){var r,i,a,o,s,l,c,u,d=n.d;for(o=1,a=d[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=ea,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/ea),a=d.length,u>=a)return n;for(c=a=d[u],o=1;a>=10;a/=10)o++;r%=ea,i=r-ea+o}if(t!==void 0&&(a=Cb(10,o-i-1),s=c/a%10|0,l=e<0||d[u+1]!==void 0||c%a,l=t<4?(s||l)&&(t==0||t==(n.s<0?3:2)):s>5||s==5&&(t==4||l||t==6&&(r>0?i>0?c/Cb(10,o-i):0:d[u-1])%10&1||t==(n.s<0?8:7))),e<1||!d[0])return l?(a=io(n),d.length=1,e=e-a-1,d[0]=Cb(10,(ea-e%ea)%ea),n.e=ST(-e/ea)||0):(d.length=1,d[0]=n.e=n.s=0),n;if(r==0?(d.length=u,a=1,u--):(d.length=u+1,a=Cb(10,ea-r),d[u]=i>0?(c/Cb(10,o-i)%Cb(10,i)|0)*a:0),l)for(;;)if(u==0){(d[0]+=a)==Uo&&(d[0]=1,++n.e);break}else{if(d[u]+=a,d[u]!=Uo)break;d[u--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(oa&&(n.e>eN||n.e<-eN))throw Error(lW+io(n));return n}function Lbe(n,e){var t,r,i,a,o,s,l,c,u,d,h=n.constructor,f=h.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new h(n),oa?Ri(e,f):e;if(l=n.d,d=e.d,r=e.e,c=n.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(t=l,o=-o,s=d.length):(t=d,r=c,s=l.length),i=Math.max(Math.ceil(f/ea),s)+2,o>i&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for(i=l.length,s=d.length,u=i<s,u&&(s=i),i=0;i<s;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}o=0}for(u&&(t=l,l=d,d=t,e.s=-e.s),s=l.length,i=d.length-s;i>0;--i)l[s++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(a=i;a&&l[--a]===0;)l[a]=Uo-1;--l[a],l[i]+=Uo}l[i]-=d[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,oa?Ri(e,f):e):new h(0)}function Mw(n,e,t){var r,i=io(n),a=vf(n.d),o=a.length;return e?(t&&(r=t-o)>0?a=a.charAt(0)+"."+a.slice(1)+Dv(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Dv(-i-1)+a,t&&(r=t-o)>0&&(a+=Dv(r))):i>=o?(a+=Dv(i+1-o),t&&(r=t-i-1)>0&&(a=a+"."+Dv(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(a+="."),a+=Dv(r))),n.s<0?"-"+a:a}function Dre(n,e){if(n.length>e)return n.length=e,!0}function jbe(n){var e,t,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(dw+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return Cre(o,a.toString())}else if(typeof a!="string")throw Error(dw+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,oqe.test(a))Cre(o,a);else throw Error(dw+a)}if(i.prototype=$t,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=jbe,i.config=i.set=sqe,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function sqe(n){if(!n||typeof n!="object")throw Error(Zu+"Object expected");var e,t,r,i=["precision",1,xT,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(ST(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(dw+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(dw+t+": "+r);return this}var cW=jbe(aqe);$c=new cW(1);const Di=cW;function lqe(n){return hqe(n)||dqe(n)||uqe(n)||cqe()}function cqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uqe(n,e){if(n){if(typeof n=="string")return d9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d9(n,e)}}function dqe(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function hqe(n){if(Array.isArray(n))return d9(n)}function d9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var fqe=function(e){return e},Fbe={},$be=function(e){return e===Fbe},kre=function(e){return function t(){return arguments.length===0||arguments.length===1&&$be(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},pqe=function n(e,t){return e===1?t:kre(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==Fbe}).length;return o>=e?t.apply(void 0,i):n(e-o,kre(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=i.map(function(d){return $be(d)?l.shift():d});return t.apply(void 0,lqe(u).concat(l))}))})},Lj=function(e){return pqe(e.length,e)},h9=function(e,t){for(var r=[],i=e;i<t;++i)r[i-e]=i;return r},gqe=Lj(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)}),mqe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return fqe;var i=t.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},f9=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Bbe=function(e){var t=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t&&a.every(function(s,l){return s===t[l]})||(t=a,r=e.apply(void 0,a)),r}};function vqe(n){var e;return n===0?e=1:e=Math.floor(new Di(n).abs().log(10).toNumber())+1,e}function yqe(n,e,t){for(var r=new Di(n),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(t),i++;return a}var bqe=Lj(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)}),wqe=Lj(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r}),_qe=Lj(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});const jj={rangeStep:yqe,getDigitCount:vqe,interpolateNumber:bqe,uninterpolateNumber:wqe,uninterpolateTruncation:_qe};function p9(n){return Tqe(n)||Sqe(n)||Ube(n)||xqe()}function xqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sqe(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function Tqe(n){if(Array.isArray(n))return g9(n)}function yk(n,e){return Cqe(n)||Aqe(n,e)||Ube(n,e)||Eqe()}function Eqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ube(n,e){if(n){if(typeof n=="string")return g9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g9(n,e)}}function g9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Aqe(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,i=!1,a=void 0;try{for(var o=n[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return t}}function Cqe(n){if(Array.isArray(n))return n}function Vbe(n){var e=yk(n,2),t=e[0],r=e[1],i=t,a=r;return t>r&&(i=r,a=t),[i,a]}function zbe(n,e,t){if(n.lte(0))return new Di(0);var r=jj.getDigitCount(n.toNumber()),i=new Di(10).pow(r),a=n.div(i),o=r!==1?.05:.1,s=new Di(Math.ceil(a.div(o).toNumber())).add(t).mul(o),l=s.mul(i);return e?l:new Di(Math.ceil(l))}function Dqe(n,e,t){var r=1,i=new Di(n);if(!i.isint()&&t){var a=Math.abs(n);a<1?(r=new Di(10).pow(jj.getDigitCount(n)-1),i=new Di(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Di(Math.floor(n)))}else n===0?i=new Di(Math.floor((e-1)/2)):t||(i=new Di(Math.floor(n)));var o=Math.floor((e-1)/2),s=mqe(gqe(function(l){return i.add(new Di(l-o).mul(r)).toNumber()}),h9);return s(0,e)}function Hbe(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-n)/(t-1)))return{step:new Di(0),tickMin:new Di(0),tickMax:new Di(0)};var a=zbe(new Di(e).sub(n).div(t-1),r,i),o;n<=0&&e>=0?o=new Di(0):(o=new Di(n).add(e).div(2),o=o.sub(new Di(o).mod(a)));var s=Math.ceil(o.sub(n).div(a).toNumber()),l=Math.ceil(new Di(e).sub(o).div(a).toNumber()),c=s+l+1;return c>t?Hbe(n,e,t,r,i+1):(c<t&&(l=e>0?l+(t-c):l,s=e>0?s:s+(t-c)),{step:a,tickMin:o.sub(new Di(s).mul(a)),tickMax:o.add(new Di(l).mul(a))})}function kqe(n){var e=yk(n,2),t=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=Vbe([t,r]),l=yk(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(p9(h9(0,i-1).map(function(){return 1/0}))):[].concat(p9(h9(0,i-1).map(function(){return-1/0})),[u]);return t>r?f9(d):d}if(c===u)return Dqe(c,i,a);var h=Hbe(c,u,o,a),f=h.step,m=h.tickMin,v=h.tickMax,y=jj.rangeStep(m,v.add(new Di(.1).mul(f)),f);return t>r?f9(y):y}function Iqe(n,e){var t=yk(n,2),r=t[0],i=t[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Vbe([r,i]),s=yk(o,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),d=zbe(new Di(c).sub(l).div(u-1),a,0),h=[].concat(p9(jj.rangeStep(new Di(l),new Di(c).sub(new Di(.99).mul(d)),d)),[c]);return r>i?f9(h):h}var Mqe=Bbe(kqe),Pqe=Bbe(Iqe),Oqe="Invariant failed";function Pw(n,e){throw new Error(Oqe)}var Rqe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function j1(n){"@babel/helpers - typeof";return j1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j1(n)}function tN(){return tN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tN.apply(this,arguments)}function Nqe(n,e){return $qe(n)||Fqe(n,e)||jqe(n,e)||Lqe()}function Lqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jqe(n,e){if(n){if(typeof n=="string")return Ire(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ire(n,e)}}function Ire(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Fqe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function $qe(n){if(Array.isArray(n))return n}function Bqe(n,e){if(n==null)return{};var t=Uqe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Uqe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Vqe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function zqe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Wbe(r.key),r)}}function Hqe(n,e,t){return e&&zqe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function qqe(n,e,t){return e=nN(e),Gqe(n,qbe()?Reflect.construct(e,t||[],nN(n).constructor):e.apply(n,t))}function Gqe(n,e){if(e&&(j1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wqe(n)}function Wqe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qbe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qbe=function(){return!!n})()}function nN(n){return nN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nN(n)}function Yqe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&m9(n,e)}function m9(n,e){return m9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},m9(n,e)}function Gbe(n,e,t){return e=Wbe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wbe(n){var e=Kqe(n,"string");return j1(e)=="symbol"?e:e+""}function Kqe(n,e){if(j1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(j1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Fj=function(n){function e(){return Vqe(this,e),qqe(this,e,arguments)}return Yqe(e,n),Hqe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,h=Bqe(r,Rqe),f=ei(h,!1);this.props.direction==="x"&&u.type!=="number"&&Pw();var m=l.map(function(v){var y=c(v,s),w=y.x,_=y.y,S=y.value,A=y.errorVal;if(!A)return null;var C=[],D,M;if(Array.isArray(A)){var P=Nqe(A,2);D=P[0],M=P[1]}else D=M=A;if(a==="vertical"){var O=u.scale,j=_+i,L=j+o,B=j-o,$=O(S-D),Y=O(S+M);C.push({x1:Y,y1:L,x2:Y,y2:B}),C.push({x1:$,y1:j,x2:Y,y2:j}),C.push({x1:$,y1:L,x2:$,y2:B})}else if(a==="horizontal"){var q=d.scale,W=w+i,X=W-o,te=W+o,re=q(S-D),z=q(S+M);C.push({x1:X,y1:z,x2:te,y2:z}),C.push({x1:W,y1:re,x2:W,y2:z}),C.push({x1:X,y1:re,x2:te,y2:re})}return ye.createElement(zo,tN({className:"recharts-errorBar",key:"bar-".concat(C.map(function(oe){return"".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))},f),C.map(function(oe){return ye.createElement("line",tN({},oe,{key:"line-".concat(oe.x1,"-").concat(oe.x2,"-").concat(oe.y1,"-").concat(oe.y2)}))}))});return ye.createElement(zo,{className:"recharts-errorBars"},m)}}])}(ye.Component);Gbe(Fj,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Gbe(Fj,"displayName","ErrorBar");function bk(n){"@babel/helpers - typeof";return bk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bk(n)}function Mre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Q0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mre(Object(t),!0).forEach(function(r){Xqe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xqe(n,e,t){return e=Zqe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Zqe(n){var e=Qqe(n,"string");return bk(e)=="symbol"?e:e+""}function Qqe(n,e){if(bk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(bk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Ybe=function(e){var t=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Lc(t,e1);if(!o)return null;var s=e1.defaultProps,l=s!==void 0?Q0(Q0({},s),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:a==="children"?c=(r||[]).reduce(function(u,d){var h=d.item,f=d.props,m=f.sectors||f.data||[];return u.concat(m.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):c=(r||[]).map(function(u){var d=u.item,h=d.type.defaultProps,f=h!==void 0?Q0(Q0({},h),d.props):{},m=f.dataKey,v=f.name,y=f.legendType,w=f.hide;return{inactive:w,dataKey:m,type:l.iconType||y||"square",color:uW(d),value:v||m,payload:f}}),Q0(Q0(Q0({},l),e1.getWithHeight(o,i)),{},{payload:c,item:o})};function wk(n){"@babel/helpers - typeof";return wk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wk(n)}function Pre(n){return n7e(n)||t7e(n)||e7e(n)||Jqe()}function Jqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e7e(n,e){if(n){if(typeof n=="string")return v9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v9(n,e)}}function t7e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function n7e(n){if(Array.isArray(n))return v9(n)}function v9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ore(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ea(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ore(Object(t),!0).forEach(function(r){n1(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ore(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function n1(n,e,t){return e=r7e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r7e(n){var e=i7e(n,"string");return wk(e)=="symbol"?e:e+""}function i7e(n,e){if(wk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(wk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Of(n,e,t){return ui(n)||ui(e)?t:yo(e)?Wu(n,e,t):vr(e)?e(n):t}function dD(n,e,t,r){var i=nqe(n,function(s){return Of(s,e)});if(t==="number"){var a=i.filter(function(s){return St(s)||parseFloat(s)});return a.length?[Nj(a),Rj(a)]:[1/0,-1/0]}var o=r?i.filter(function(s){return!ui(s)}):i;return o.map(function(s){return yo(s)||s instanceof Date?s:""})}var a7e=function(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(t=r==null?void 0:r.length)!==null&&t!==void 0?t:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<s;c++){var u=c>0?i[c-1].coordinate:i[s-1].coordinate,d=i[c].coordinate,h=c>=s-1?i[0].coordinate:i[c+1].coordinate,f=void 0;if(Jd(d-u)!==Jd(h-d)){var m=[];if(Jd(h-d)===Jd(l[1]-l[0])){f=h;var v=d+l[1]-l[0];m[0]=Math.min(v,(v+u)/2),m[1]=Math.max(v,(v+u)/2)}else{f=u;var y=h+l[1]-l[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var w=[Math.min(d,(f+d)/2),Math.max(d,(f+d)/2)];if(e>w[0]&&e<=w[1]||e>=m[0]&&e<=m[1]){o=i[c].index;break}}else{var _=Math.min(u,h),S=Math.max(u,h);if(e>(_+d)/2&&e<=(S+d)/2){o=i[c].index;break}}}else for(var A=0;A<s;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<s-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===s-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){o=r[A].index;break}return o},uW=function(e){var t,r=e,i=r.type.displayName,a=(t=e.type)!==null&&t!==void 0&&t.defaultProps?Ea(Ea({},e.type.defaultProps),e.props):e.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},o7e=function(e){var t=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,c=s.length;l<c;l++)for(var u=a[s[l]].stackGroups,d=Object.keys(u),h=0,f=d.length;h<f;h++){var m=u[d[h]],v=m.items,y=m.cateAxisId,w=v.filter(function(M){return pg(M.type).indexOf("Bar")>=0});if(w&&w.length){var _=w[0].type.defaultProps,S=_!==void 0?Ea(Ea({},_),w[0].props):w[0].props,A=S.barSize,C=S[y];o[C]||(o[C]=[]);var D=ui(A)?t:A;o[C].push({item:w[0],stackList:w.slice(1),barSize:ui(D)?void 0:Iw(D,r,0)})}}return o},s7e=function(e){var t=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,s=e.maxBarSize,l=o.length;if(l<1)return null;var c=Iw(t,i,0,!0),u,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,f=i/l,m=o.reduce(function(A,C){return A+C.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&f>0&&(h=!0,f*=.9,m=l*f);var v=(i-m)/2>>0,y={offset:v-c,size:0};u=o.reduce(function(A,C){var D={item:C.item,position:{offset:y.offset+y.size+c,size:h?f:C.barSize}},M=[].concat(Pre(A),[D]);return y=M[M.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(P){M.push({item:P,position:y})}),M},d)}else{var w=Iw(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var _=(i-2*w-(l-1)*c)/l;_>1&&(_>>=0);var S=s===+s?Math.min(_,s):_;u=o.reduce(function(A,C,D){var M=[].concat(Pre(A),[{item:C.item,position:{offset:w+(_+c)*D+(_-S)/2,size:S}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(P){M.push({item:P,position:M[M.length-1].position})}),M},d)}return u},l7e=function(e,t,r,i){var a=r.children,o=r.width,s=r.margin,l=o-(s.left||0)-(s.right||0),c=Ybe({children:a,legendWidth:l});if(c){var u=i||{},d=u.width,h=u.height,f=c.align,m=c.verticalAlign,v=c.layout;if((v==="vertical"||v==="horizontal"&&m==="middle")&&f!=="center"&&St(e[f]))return Ea(Ea({},e),{},n1({},f,e[f]+(d||0)));if((v==="horizontal"||v==="vertical"&&f==="center")&&m!=="middle"&&St(e[m]))return Ea(Ea({},e),{},n1({},m,e[m]+(h||0)))}return e},c7e=function(e,t,r){return ui(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||r==="x"?t==="xAxis":r==="y"?t==="yAxis":!0},Kbe=function(e,t,r,i,a){var o=t.props.children,s=rh(o,Fj).filter(function(c){return c7e(i,a,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=Of(u,r);if(ui(d))return c;var h=Array.isArray(d)?[Nj(d),Rj(d)]:[d,d],f=l.reduce(function(m,v){var y=Of(u,v,0),w=h[0]-Math.abs(Array.isArray(y)?y[0]:y),_=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(w,m[0]),Math.max(_,m[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},u7e=function(e,t,r,i,a){var o=t.map(function(s){return Kbe(e,s,r,a,i)}).filter(function(s){return!ui(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},Xbe=function(e,t,r,i,a){var o=t.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&Kbe(e,l,c,i)||dD(e,c,r,a)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)s[c[u]]||(s[c[u]]=!0,l.push(c[u]));return l},[])},Zbe=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},Qbe=function(e,t,r,i){if(i)return e.map(function(l){return l.coordinate});var a,o,s=e.map(function(l){return l.coordinate===t&&(a=!0),l.coordinate===r&&(o=!0),l.coordinate});return a||s.push(t),o||s.push(r),s},ag=function(e,t,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(t||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Jd(s[0]-s[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var h=a?a.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return u.filter(function(d){return!WI(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:a?a[d]:d,index:h,offset:c}})},hB=new WeakMap,BM=function(e,t){if(typeof t!="function")return e;hB.has(e)||hB.set(e,new WeakMap);var r=hB.get(e);if(r.has(t))return r.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,i),i},d7e=function(e,t,r){var i=e.scale,a=e.type,o=e.layout,s=e.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:hk(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:XR(),realScaleType:"linear"}:a==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:uD(),realScaleType:"point"}:a==="category"?{scale:hk(),realScaleType:"band"}:{scale:XR(),realScaleType:"linear"};if(kw(i)){var l="scale".concat(wj(i));return{scale:(yre[l]||uD)(),realScaleType:yre[l]?l:"point"}}return vr(i)?{scale:i}:{scale:uD(),realScaleType:"point"}},Rre=1e-4,h7e=function(e){var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,i=e.range(),a=Math.min(i[0],i[1])-Rre,o=Math.max(i[0],i[1])+Rre,s=e(t[0]),l=e(t[r-1]);(s<a||s>o||l<a||l>o)&&e.domain([t[0],t[r-1]])}},f7e=function(e,t){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===t)return e[r].position;return null},p7e=function(e,t){if(!t||t.length!==2||!St(t[0])||!St(t[1]))return e;var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!St(e[0])||e[0]<r)&&(a[0]=r),(!St(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},g7e=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,s=0;s<t;++s){var l=WI(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1]):(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1])}},m7e=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<t;++o){var s=WI(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},v7e={sign:g7e,expand:e6e,none:k1,silhouette:t6e,wiggle:n6e,positive:m7e},y7e=function(e,t,r){var i=t.map(function(s){return s.props.dataKey}),a=v7e[r],o=JUe().keys(i).value(function(s,l){return+Of(s,l,0)}).order(Wz).offset(a);return o(e)},b7e=function(e,t,r,i,a,o){if(!e)return null;var s=o?t.reverse():t,l={},c=s.reduce(function(d,h){var f,m=(f=h.type)!==null&&f!==void 0&&f.defaultProps?Ea(Ea({},h.type.defaultProps),h.props):h.props,v=m.stackId,y=m.hide;if(y)return d;var w=m[r],_=d[w]||{hasStack:!1,stackGroups:{}};if(yo(v)){var S=_.stackGroups[v]||{numericAxisId:r,cateAxisId:i,items:[]};S.items.push(h),_.hasStack=!0,_.stackGroups[v]=S}else _.stackGroups[bj("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Ea(Ea({},d),{},n1({},w,_))},l),u={};return Object.keys(c).reduce(function(d,h){var f=c[h];if(f.hasStack){var m={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(v,y){var w=f.stackGroups[y];return Ea(Ea({},v),{},n1({},y,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:y7e(e,w.items,a)}))},m)}return Ea(Ea({},d),{},n1({},h,f))},u)},w7e=function(e,t){var r=t.realScaleType,i=t.type,a=t.tickCount,o=t.originalDomain,s=t.allowDecimals,l=r||t.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=Mqe(c,a,s);return e.domain([Nj(u),Rj(u)]),{niceTicks:u}}if(a&&i==="number"){var d=e.domain(),h=Pqe(d,a,s);return{niceTicks:h}}return null},Nre=function(e){var t=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,s=e.index;if(t.type==="category")return r[s]?r[s].coordinate+i:null;var l=Of(o,t.dataKey,t.domain[s]);return ui(l)?null:t.scale(l)-a/2+i},_7e=function(e){var t=e.numericAxis,r=t.scale.domain();if(t.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},x7e=function(e,t){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Ea(Ea({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(yo(a)){var o=t[a];if(o){var s=o.items.indexOf(e);return s>=0?o.stackedData[s]:null}}return null},S7e=function(e){return e.reduce(function(t,r){return[Nj(r.concat([t[0]]).filter(St)),Rj(r.concat([t[1]]).filter(St))]},[1/0,-1/0])},Jbe=function(e,t,r){return Object.keys(e).reduce(function(i,a){var o=e[a],s=o.stackedData,l=s.reduce(function(c,u){var d=S7e(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Lre=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jre=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,y9=function(e,t,r){if(vr(e))return e(t,r);if(!Array.isArray(e))return t;var i=[];if(St(e[0]))i[0]=r?e[0]:Math.min(e[0],t[0]);else if(Lre.test(e[0])){var a=+Lre.exec(e[0])[1];i[0]=t[0]-a}else vr(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(St(e[1]))i[1]=r?e[1]:Math.max(e[1],t[1]);else if(jre.test(e[1])){var o=+jre.exec(e[1])[1];i[1]=t[1]+o}else vr(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},rN=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&t&&t.length>=2){for(var a=jG(t,function(d){return d.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var c=a[s],u=a[s-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},Fre=function(e,t,r){return!e||!e.length||sW(e,Wu(r,"type.defaultProps.domain"))?t:e},ewe=function(e,t){var r=e.type.defaultProps?Ea(Ea({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return Ea(Ea({},ei(e,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:uW(e),value:Of(t,i),type:l,payload:t,chartType:c,hide:u})};function _k(n){"@babel/helpers - typeof";return _k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_k(n)}function $re(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$re(Object(t),!0).forEach(function(r){T7e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$re(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function T7e(n,e,t){return e=E7e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E7e(n){var e=A7e(n,"string");return _k(e)=="symbol"?e:e+""}function A7e(n,e){if(_k(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(_k(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var iN=Math.PI/180,C7e=function(e){return e*180/Math.PI},cs=function(e,t,r,i){return{x:e+Math.cos(-iN*i)*r,y:t+Math.sin(-iN*i)*r}},D7e=function(e,t){var r=e.x,i=e.y,a=t.x,o=t.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},k7e=function(e,t){var r=e.x,i=e.y,a=t.cx,o=t.cy,s=D7e({x:r,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(r-a)/s,c=Math.acos(l);return i>o&&(c=2*Math.PI-c),{radius:s,angle:C7e(c),angleInRadian:c}},I7e=function(e){var t=e.startAngle,r=e.endAngle,i=Math.floor(t/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:t-o*360,endAngle:r-o*360}},M7e=function(e,t){var r=t.startAngle,i=t.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),s=Math.min(a,o);return e+s*360},Ure=function(e,t){var r=e.x,i=e.y,a=k7e({x:r,y:i},t),o=a.radius,s=a.angle,l=t.innerRadius,c=t.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var u=I7e(t),d=u.startAngle,h=u.endAngle,f=s,m;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;m=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;m=f>=h&&f<=d}return m?Bre(Bre({},t),{},{radius:o,angle:M7e(f,t)}):null};function xk(n){"@babel/helpers - typeof";return xk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xk(n)}var P7e=["offset"];function O7e(n){return j7e(n)||L7e(n)||N7e(n)||R7e()}function R7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N7e(n,e){if(n){if(typeof n=="string")return b9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b9(n,e)}}function L7e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function j7e(n){if(Array.isArray(n))return b9(n)}function b9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function F7e(n,e){if(n==null)return{};var t=$7e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function $7e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Vre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vre(Object(t),!0).forEach(function(r){B7e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function B7e(n,e,t){return e=U7e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U7e(n){var e=V7e(n,"string");return xk(e)=="symbol"?e:e+""}function V7e(n,e){if(xk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(xk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Sk(){return Sk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sk.apply(this,arguments)}var z7e=function(e){var t=e.value,r=e.formatter,i=ui(e.children)?t:e.children;return vr(r)?r(i):i},H7e=function(e,t){var r=Jd(t-e),i=Math.min(Math.abs(t-e),360);return r*i},q7e=function(e,t,r){var i=e.position,a=e.viewBox,o=e.offset,s=e.className,l=a,c=l.cx,u=l.cy,d=l.innerRadius,h=l.outerRadius,f=l.startAngle,m=l.endAngle,v=l.clockWise,y=(d+h)/2,w=H7e(f,m),_=w>=0?1:-1,S,A;i==="insideStart"?(S=f+_*o,A=v):i==="insideEnd"?(S=m-_*o,A=!v):i==="end"&&(S=m+_*o,A=v),A=w<=0?A:!A;var C=cs(c,u,y,S),D=cs(c,u,y,S+(A?1:-1)*359),M="M".concat(C.x,",").concat(C.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(A?0:1,`,
    `).concat(D.x,",").concat(D.y),P=ui(e.id)?bj("recharts-radial-line-"):e.id;return ye.createElement("text",Sk({},r,{dominantBaseline:"central",className:Gr("recharts-radial-bar-label",s)}),ye.createElement("defs",null,ye.createElement("path",{id:P,d:M})),ye.createElement("textPath",{xlinkHref:"#".concat(P)},t))},G7e=function(e){var t=e.viewBox,r=e.offset,i=e.position,a=t,o=a.cx,s=a.cy,l=a.innerRadius,c=a.outerRadius,u=a.startAngle,d=a.endAngle,h=(u+d)/2;if(i==="outside"){var f=cs(o,s,c+r,h),m=f.x,v=f.y;return{x:m,y:v,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(l+c)/2,w=cs(o,s,y,h),_=w.x,S=w.y;return{x:_,y:S,textAnchor:"middle",verticalAnchor:"middle"}},W7e=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=t,s=o.x,l=o.y,c=o.width,u=o.height,d=u>=0?1:-1,h=d*i,f=d>0?"end":"start",m=d>0?"start":"end",v=c>=0?1:-1,y=v*i,w=v>0?"end":"start",_=v>0?"start":"end";if(a==="top"){var S={x:s+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:f};return fo(fo({},S),r?{height:Math.max(l-r.y,0),width:c}:{})}if(a==="bottom"){var A={x:s+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:m};return fo(fo({},A),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(a==="left"){var C={x:s-y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"};return fo(fo({},C),r?{width:Math.max(C.x-r.x,0),height:u}:{})}if(a==="right"){var D={x:s+c+y,y:l+u/2,textAnchor:_,verticalAnchor:"middle"};return fo(fo({},D),r?{width:Math.max(r.x+r.width-D.x,0),height:u}:{})}var M=r?{width:c,height:u}:{};return a==="insideLeft"?fo({x:s+y,y:l+u/2,textAnchor:_,verticalAnchor:"middle"},M):a==="insideRight"?fo({x:s+c-y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"},M):a==="insideTop"?fo({x:s+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},M):a==="insideBottom"?fo({x:s+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:f},M):a==="insideTopLeft"?fo({x:s+y,y:l+h,textAnchor:_,verticalAnchor:m},M):a==="insideTopRight"?fo({x:s+c-y,y:l+h,textAnchor:w,verticalAnchor:m},M):a==="insideBottomLeft"?fo({x:s+y,y:l+u-h,textAnchor:_,verticalAnchor:f},M):a==="insideBottomRight"?fo({x:s+c-y,y:l+u-h,textAnchor:w,verticalAnchor:f},M):bT(a)&&(St(a.x)||Wb(a.x))&&(St(a.y)||Wb(a.y))?fo({x:s+Iw(a.x,c),y:l+Iw(a.y,u),textAnchor:"end",verticalAnchor:"end"},M):fo({x:s+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},M)},Y7e=function(e){return"cx"in e&&St(e.cx)};function Vs(n){var e=n.offset,t=e===void 0?5:e,r=F7e(n,P7e),i=fo({offset:t},r),a=i.viewBox,o=i.position,s=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,h=i.textBreakAll;if(!a||ui(s)&&ui(l)&&!K.isValidElement(c)&&!vr(c))return null;if(K.isValidElement(c))return K.cloneElement(c,i);var f;if(vr(c)){if(f=K.createElement(c,i),K.isValidElement(f))return f}else f=z7e(i);var m=Y7e(a),v=ei(i,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return q7e(i,f,v);var y=m?G7e(i):W7e(i);return ye.createElement(zR,Sk({className:Gr("recharts-label",d)},v,y,{breakAll:h}),f)}Vs.displayName="Label";var twe=function(e){var t=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,h=e.y,f=e.top,m=e.left,v=e.width,y=e.height,w=e.clockWise,_=e.labelViewBox;if(_)return _;if(St(v)&&St(y)){if(St(d)&&St(h))return{x:d,y:h,width:v,height:y};if(St(f)&&St(m))return{x:f,y:m,width:v,height:y}}return St(d)&&St(h)?{x:d,y:h,width:0,height:0}:St(t)&&St(r)?{cx:t,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:w}:e.viewBox?e.viewBox:{}},K7e=function(e,t){return e?e===!0?ye.createElement(Vs,{key:"label-implicit",viewBox:t}):yo(e)?ye.createElement(Vs,{key:"label-implicit",viewBox:t,value:e}):K.isValidElement(e)?e.type===Vs?K.cloneElement(e,{key:"label-implicit",viewBox:t}):ye.createElement(Vs,{key:"label-implicit",content:e,viewBox:t}):vr(e)?ye.createElement(Vs,{key:"label-implicit",content:e,viewBox:t}):bT(e)?ye.createElement(Vs,Sk({viewBox:t},e,{key:"label-implicit"})):null:null},X7e=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=twe(e),o=rh(i,Vs).map(function(l,c){return K.cloneElement(l,{viewBox:t||a,key:"label-".concat(c)})});if(!r)return o;var s=K7e(e.label,t||a);return[s].concat(O7e(o))};Vs.parseViewBox=twe;Vs.renderCallByParent=X7e;var fB,zre;function Z7e(){if(zre)return fB;zre=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return fB=n,fB}var Q7e=Z7e();const J7e=Br(Q7e);function Tk(n){"@babel/helpers - typeof";return Tk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tk(n)}var eGe=["valueAccessor"],tGe=["data","dataKey","clockWise","id","textBreakAll"];function nGe(n){return oGe(n)||aGe(n)||iGe(n)||rGe()}function rGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iGe(n,e){if(n){if(typeof n=="string")return w9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w9(n,e)}}function aGe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function oGe(n){if(Array.isArray(n))return w9(n)}function w9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function aN(){return aN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},aN.apply(this,arguments)}function Hre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function qre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hre(Object(t),!0).forEach(function(r){sGe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sGe(n,e,t){return e=lGe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lGe(n){var e=cGe(n,"string");return Tk(e)=="symbol"?e:e+""}function cGe(n,e){if(Tk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Tk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Gre(n,e){if(n==null)return{};var t=uGe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function uGe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var dGe=function(e){return Array.isArray(e.value)?J7e(e.value):e.value};function hw(n){var e=n.valueAccessor,t=e===void 0?dGe:e,r=Gre(n,eGe),i=r.data,a=r.dataKey,o=r.clockWise,s=r.id,l=r.textBreakAll,c=Gre(r,tGe);return!i||!i.length?null:ye.createElement(zo,{className:"recharts-label-list"},i.map(function(u,d){var h=ui(a)?t(u,d):Of(u&&u.payload,a),f=ui(s)?{}:{id:"".concat(s,"-").concat(d)};return ye.createElement(Vs,aN({},ei(u,!0),c,f,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:Vs.parseViewBox(ui(o)?u:qre(qre({},u),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}hw.displayName="LabelList";function hGe(n,e){return n?n===!0?ye.createElement(hw,{key:"labelList-implicit",data:e}):ye.isValidElement(n)||vr(n)?ye.createElement(hw,{key:"labelList-implicit",data:e,content:n}):bT(n)?ye.createElement(hw,aN({data:e},n,{key:"labelList-implicit"})):null:null}function fGe(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=rh(r,hw).map(function(o,s){return K.cloneElement(o,{data:e,key:"labelList-".concat(s)})});if(!t)return i;var a=hGe(n.label,e);return[a].concat(nGe(i))}hw.renderCallByParent=fGe;function Ek(n){"@babel/helpers - typeof";return Ek=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ek(n)}function _9(){return _9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_9.apply(this,arguments)}function Wre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wre(Object(t),!0).forEach(function(r){pGe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pGe(n,e,t){return e=gGe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gGe(n){var e=mGe(n,"string");return Ek(e)=="symbol"?e:e+""}function mGe(n,e){if(Ek(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ek(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var vGe=function(e,t){var r=Jd(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},UM=function(e){var t=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(s?1:-1)+i,d=Math.asin(l/u)/iN,h=c?a:a+o*d,f=cs(t,r,u,h),m=cs(t,r,i,h),v=c?a-o*d:a,y=cs(t,r,u*Math.cos(d*iN),v);return{center:f,circleTangency:m,lineTangency:y,theta:d}},nwe=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,s=e.endAngle,l=vGe(o,s),c=o+l,u=cs(t,r,a,o),d=cs(t,r,a,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var f=cs(t,r,i,o),m=cs(t,r,i,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},yGe=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=Jd(u-c),h=UM({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),f=h.circleTangency,m=h.lineTangency,v=h.theta,y=UM({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),w=y.circleTangency,_=y.lineTangency,S=y.theta,A=l?Math.abs(c-u):Math.abs(c-u)-v-S;if(A<0)return s?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):nwe({cx:t,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:u});var C="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var D=UM({cx:t,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),M=D.circleTangency,P=D.lineTangency,O=D.theta,j=UM({cx:t,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),L=j.circleTangency,B=j.lineTangency,$=j.theta,Y=l?Math.abs(c-u):Math.abs(c-u)-O-$;if(Y<0&&o===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+="L".concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Y>180),",").concat(+(d>0),",").concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else C+="L".concat(t,",").concat(r,"Z");return C},bGe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},rwe=function(e){var t=Yre(Yre({},bGe),e),r=t.cx,i=t.cy,a=t.innerRadius,o=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=t.className;if(o<a||u===d)return null;var f=Gr("recharts-sector",h),m=o-a,v=Iw(s,m,0,!0),y;return v>0&&Math.abs(u-d)<360?y=yGe({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(v,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=nwe({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:d}),ye.createElement("path",_9({},ei(t,!0),{className:f,d:y,role:"img"}))};function Ak(n){"@babel/helpers - typeof";return Ak=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ak(n)}function x9(){return x9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},x9.apply(this,arguments)}function Kre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Xre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kre(Object(t),!0).forEach(function(r){wGe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Kre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wGe(n,e,t){return e=_Ge(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Ge(n){var e=xGe(n,"string");return Ak(e)=="symbol"?e:e+""}function xGe(n,e){if(Ak(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ak(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Zre={curveBasisClosed:VUe,curveBasisOpen:zUe,curveBasis:UUe,curveBumpX:CUe,curveBumpY:DUe,curveLinearClosed:HUe,curveLinear:xj,curveMonotoneX:qUe,curveMonotoneY:GUe,curveNatural:WUe,curveStep:YUe,curveStepAfter:XUe,curveStepBefore:KUe},VM=function(e){return e.x===+e.x&&e.y===+e.y},LA=function(e){return e.x},jA=function(e){return e.y},SGe=function(e,t){if(vr(e))return e;var r="curve".concat(wj(e));return(r==="curveMonotone"||r==="curveBump")&&t?Zre["".concat(r).concat(t==="vertical"?"Y":"X")]:Zre[r]||xj},TGe=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,a=i===void 0?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=SGe(r,s),d=c?a.filter(function(v){return VM(v)}):a,h;if(Array.isArray(o)){var f=c?o.filter(function(v){return VM(v)}):o,m=d.map(function(v,y){return Xre(Xre({},v),{},{base:f[y]})});return s==="vertical"?h=OM().y(jA).x1(LA).x0(function(v){return v.base.x}):h=OM().x(LA).y1(jA).y0(function(v){return v.base.y}),h.defined(VM).curve(u),h(m)}return s==="vertical"&&St(o)?h=OM().y(jA).x1(LA).x0(o):St(o)?h=OM().x(LA).y1(jA).y0(o):h=s0e().x(LA).y(jA),h.defined(VM).curve(u),h(d)},Qre=function(e){var t=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?TGe(e):i;return ye.createElement("path",x9({},ei(e,!1),MR(e),{className:Gr("recharts-curve",t),d:o,ref:a}))},pB={exports:{}},gB,Jre;function EGe(){if(Jre)return gB;Jre=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gB=n,gB}var mB,eie;function AGe(){if(eie)return mB;eie=1;var n=EGe();function e(){}function t(){}return t.resetWarningCache=e,mB=function(){function r(o,s,l,c,u,d){if(d!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},mB}var tie;function CGe(){return tie||(tie=1,pB.exports=AGe()()),pB.exports}var DGe=CGe();const si=Br(DGe);var kGe=Object.getOwnPropertyNames,IGe=Object.getOwnPropertySymbols,MGe=Object.prototype.hasOwnProperty;function nie(n,e){return function(r,i,a){return n(r,i,a)&&e(r,i,a)}}function zM(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);var a=i.cache,o=a.get(t),s=a.get(r);if(o&&s)return o===r&&s===t;a.set(t,r),a.set(r,t);var l=n(t,r,i);return a.delete(t),a.delete(r),l}}function rie(n){return kGe(n).concat(IGe(n))}var PGe=Object.hasOwn||function(n,e){return MGe.call(n,e)};function Zw(n,e){return n===e||!n&&!e&&n!==n&&e!==e}var OGe="__v",RGe="__o",NGe="_owner",iie=Object.getOwnPropertyDescriptor,aie=Object.keys;function LGe(n,e,t){var r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function jGe(n,e){return Zw(n.getTime(),e.getTime())}function FGe(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function $Ge(n,e){return n===e}function oie(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.entries(),o,s,l=0;(o=a.next())&&!o.done;){for(var c=e.entries(),u=!1,d=0;(s=c.next())&&!s.done;){if(i[d]){d++;continue}var h=o.value,f=s.value;if(t.equals(h[0],f[0],l,d,n,e,t)&&t.equals(h[1],f[1],h[0],f[0],n,e,t)){u=i[d]=!0;break}d++}if(!u)return!1;l++}return!0}var BGe=Zw;function UGe(n,e,t){var r=aie(n),i=r.length;if(aie(e).length!==i)return!1;for(;i-- >0;)if(!iwe(n,e,t,r[i]))return!1;return!0}function FA(n,e,t){var r=rie(n),i=r.length;if(rie(e).length!==i)return!1;for(var a,o,s;i-- >0;)if(a=r[i],!iwe(n,e,t,a)||(o=iie(n,a),s=iie(e,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function VGe(n,e){return Zw(n.valueOf(),e.valueOf())}function zGe(n,e){return n.source===e.source&&n.flags===e.flags}function sie(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.values(),o,s;(o=a.next())&&!o.done;){for(var l=e.values(),c=!1,u=0;(s=l.next())&&!s.done;){if(!i[u]&&t.equals(o.value,s.value,o.value,s.value,n,e,t)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function HGe(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function qGe(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function iwe(n,e,t,r){return(r===NGe||r===RGe||r===OGe)&&(n.$$typeof||e.$$typeof)?!0:PGe(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}var GGe="[object Arguments]",WGe="[object Boolean]",YGe="[object Date]",KGe="[object Error]",XGe="[object Map]",ZGe="[object Number]",QGe="[object Object]",JGe="[object RegExp]",eWe="[object Set]",tWe="[object String]",nWe="[object URL]",rWe=Array.isArray,lie=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,cie=Object.assign,iWe=Object.prototype.toString.call.bind(Object.prototype.toString);function aWe(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,a=n.areMapsEqual,o=n.areNumbersEqual,s=n.areObjectsEqual,l=n.arePrimitiveWrappersEqual,c=n.areRegExpsEqual,u=n.areSetsEqual,d=n.areTypedArraysEqual,h=n.areUrlsEqual;return function(m,v,y){if(m===v)return!0;if(m==null||v==null)return!1;var w=typeof m;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?o(m,v,y):w==="function"?i(m,v,y):!1;var _=m.constructor;if(_!==v.constructor)return!1;if(_===Object)return s(m,v,y);if(rWe(m))return e(m,v,y);if(lie!=null&&lie(m))return d(m,v,y);if(_===Date)return t(m,v,y);if(_===RegExp)return c(m,v,y);if(_===Map)return a(m,v,y);if(_===Set)return u(m,v,y);var S=iWe(m);return S===YGe?t(m,v,y):S===JGe?c(m,v,y):S===XGe?a(m,v,y):S===eWe?u(m,v,y):S===QGe?typeof m.then!="function"&&typeof v.then!="function"&&s(m,v,y):S===nWe?h(m,v,y):S===KGe?r(m,v,y):S===GGe?s(m,v,y):S===WGe||S===ZGe||S===tWe?l(m,v,y):!1}}function oWe(n){var e=n.circular,t=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?FA:LGe,areDatesEqual:jGe,areErrorsEqual:FGe,areFunctionsEqual:$Ge,areMapsEqual:r?nie(oie,FA):oie,areNumbersEqual:BGe,areObjectsEqual:r?FA:UGe,arePrimitiveWrappersEqual:VGe,areRegExpsEqual:zGe,areSetsEqual:r?nie(sie,FA):sie,areTypedArraysEqual:r?FA:HGe,areUrlsEqual:qGe};if(t&&(i=cie({},i,t(i))),e){var a=zM(i.areArraysEqual),o=zM(i.areMapsEqual),s=zM(i.areObjectsEqual),l=zM(i.areSetsEqual);i=cie({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}function sWe(n){return function(e,t,r,i,a,o,s){return n(e,t,s)}}function lWe(n){var e=n.circular,t=n.comparator,r=n.createState,i=n.equals,a=n.strict;if(r)return function(l,c){var u=r(),d=u.cache,h=d===void 0?e?new WeakMap:void 0:d,f=u.meta;return t(l,c,{cache:h,equals:i,meta:f,strict:a})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return t(l,c,o)}}var cWe=Ay();Ay({strict:!0});Ay({circular:!0});Ay({circular:!0,strict:!0});Ay({createInternalComparator:function(){return Zw}});Ay({strict:!0,createInternalComparator:function(){return Zw}});Ay({circular:!0,createInternalComparator:function(){return Zw}});Ay({circular:!0,createInternalComparator:function(){return Zw},strict:!0});function Ay(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,r=n.createInternalComparator,i=n.createState,a=n.strict,o=a===void 0?!1:a,s=oWe(n),l=aWe(s),c=r?r(l):sWe(l);return lWe({circular:t,comparator:l,createState:i,equals:c,strict:o})}function uWe(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function uie(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(a){t<0&&(t=a),a-t>e?(n(a),t=-1):uWe(i)};requestAnimationFrame(r)}function S9(n){"@babel/helpers - typeof";return S9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S9(n)}function dWe(n){return gWe(n)||pWe(n)||fWe(n)||hWe()}function hWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fWe(n,e){if(n){if(typeof n=="string")return die(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return die(n,e)}}function die(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function pWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function gWe(n){if(Array.isArray(n))return n}function mWe(){var n={},e=function(){return null},t=!1,r=function i(a){if(!t){if(Array.isArray(a)){if(!a.length)return;var o=a,s=dWe(o),l=s[0],c=s.slice(1);if(typeof l=="number"){uie(i.bind(null,c),l);return}i(l),uie(i.bind(null,c));return}S9(a)==="object"&&(n=a,e(n)),typeof a=="function"&&a()}};return{stop:function(){t=!0},start:function(a){t=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Ck(n){"@babel/helpers - typeof";return Ck=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ck(n)}function hie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hie(Object(t),!0).forEach(function(r){awe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function awe(n,e,t){return e=vWe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vWe(n){var e=yWe(n,"string");return Ck(e)==="symbol"?e:String(e)}function yWe(n,e){if(Ck(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ck(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var bWe=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},wWe=function(e){return e},_We=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},hD=function(e,t){return Object.keys(t).reduce(function(r,i){return fie(fie({},r),{},awe({},i,e(i,t[i])))},{})},pie=function(e,t,r){return e.map(function(i){return"".concat(_We(i)," ").concat(t,"ms ").concat(r)}).join(",")};function xWe(n,e){return EWe(n)||TWe(n,e)||owe(n,e)||SWe()}function SWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TWe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function EWe(n){if(Array.isArray(n))return n}function AWe(n){return kWe(n)||DWe(n)||owe(n)||CWe()}function CWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function owe(n,e){if(n){if(typeof n=="string")return T9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T9(n,e)}}function DWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function kWe(n){if(Array.isArray(n))return T9(n)}function T9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var oN=1e-4,swe=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},lwe=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},gie=function(e,t){return function(r){var i=swe(e,t);return lwe(i,r)}},IWe=function(e,t){return function(r){var i=swe(e,t),a=[].concat(AWe(i.map(function(o,s){return o*s}).slice(1)),[0]);return lwe(a,r)}},mie=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2],s=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=t[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=xWe(c,4);i=u[0],a=u[1],o=u[2],s=u[3]}}}var d=gie(i,o),h=gie(a,s),f=IWe(i,o),m=function(w){return w>1?1:w<0?0:w},v=function(w){for(var _=w>1?1:w,S=_,A=0;A<8;++A){var C=d(S)-_,D=f(S);if(Math.abs(C-_)<oN||D<oN)return h(S);S=m(S-C/D)}return h(S)};return v.isStepper=!1,v},MWe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,a=i===void 0?8:i,o=e.dt,s=o===void 0?17:o,l=function(u,d,h){var f=-(u-d)*r,m=h*a,v=h+(f-m)*s/1e3,y=h*s/1e3+u;return Math.abs(y-d)<oN&&Math.abs(v)<oN?[d,0]:[y,v]};return l.isStepper=!0,l.dt=s,l},PWe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mie(i);case"spring":return MWe();default:if(i.split("(")[0]==="cubic-bezier")return mie(i)}return typeof i=="function"?i:null};function Dk(n){"@babel/helpers - typeof";return Dk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dk(n)}function vie(n){return NWe(n)||RWe(n)||cwe(n)||OWe()}function OWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function NWe(n){if(Array.isArray(n))return A9(n)}function yie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function rs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yie(Object(t),!0).forEach(function(r){E9(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function E9(n,e,t){return e=LWe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LWe(n){var e=jWe(n,"string");return Dk(e)==="symbol"?e:String(e)}function jWe(n,e){if(Dk(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Dk(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function FWe(n,e){return UWe(n)||BWe(n,e)||cwe(n,e)||$We()}function $We(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cwe(n,e){if(n){if(typeof n=="string")return A9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A9(n,e)}}function A9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function BWe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function UWe(n){if(Array.isArray(n))return n}var sN=function(e,t,r){return e+(t-e)*r},C9=function(e){var t=e.from,r=e.to;return t!==r},VWe=function n(e,t,r){var i=hD(function(a,o){if(C9(o)){var s=e(o.from,o.to,o.velocity),l=FWe(s,2),c=l[0],u=l[1];return rs(rs({},o),{},{from:c,velocity:u})}return o},t);return r<1?hD(function(a,o){return C9(o)?rs(rs({},o),{},{velocity:sN(o.velocity,i[a].velocity,r),from:sN(o.from,i[a].from,r)}):o},t):n(e,i,r-1)};const zWe=function(n,e,t,r,i){var a=bWe(n,e),o=a.reduce(function(y,w){return rs(rs({},y),{},E9({},w,[n[w],e[w]]))},{}),s=a.reduce(function(y,w){return rs(rs({},y),{},E9({},w,{from:n[w],velocity:0,to:e[w]}))},{}),l=-1,c,u,d=function(){return null},h=function(){return hD(function(w,_){return _.from},s)},f=function(){return!Object.values(s).filter(C9).length},m=function(w){c||(c=w);var _=w-c,S=_/t.dt;s=VWe(t,s,S),i(rs(rs(rs({},n),e),h())),c=w,f()||(l=requestAnimationFrame(d))},v=function(w){u||(u=w);var _=(w-u)/r,S=hD(function(C,D){return sN.apply(void 0,vie(D).concat([t(_)]))},o);if(i(rs(rs(rs({},n),e),S)),_<1)l=requestAnimationFrame(d);else{var A=hD(function(C,D){return sN.apply(void 0,vie(D).concat([t(1)]))},o);i(rs(rs(rs({},n),e),A))}};return d=t.isStepper?m:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function F1(n){"@babel/helpers - typeof";return F1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F1(n)}var HWe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function qWe(n,e){if(n==null)return{};var t=GWe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function GWe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function vB(n){return XWe(n)||KWe(n)||YWe(n)||WWe()}function WWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YWe(n,e){if(n){if(typeof n=="string")return D9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D9(n,e)}}function KWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function XWe(n){if(Array.isArray(n))return D9(n)}function D9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function bie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Nd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bie(Object(t),!0).forEach(function(r){RC(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function RC(n,e,t){return e=uwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZWe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function QWe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,uwe(r.key),r)}}function JWe(n,e,t){return e&&QWe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function uwe(n){var e=eYe(n,"string");return F1(e)==="symbol"?e:String(e)}function eYe(n,e){if(F1(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(F1(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tYe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&k9(n,e)}function k9(n,e){return k9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k9(n,e)}function nYe(n){var e=rYe();return function(){var r=lN(n),i;if(e){var a=lN(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return I9(this,i)}}function I9(n,e){if(e&&(F1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M9(n)}function M9(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function rYe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lN(n){return lN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lN(n)}var cy=function(n){tYe(t,n);var e=nYe(t);function t(r,i){var a;ZWe(this,t),a=e.call(this,r,i);var o=a.props,s=o.isActive,l=o.attributeName,c=o.from,u=o.to,d=o.steps,h=o.children,f=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(M9(a)),a.changeStyle=a.changeStyle.bind(M9(a)),!s||f<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:u}),I9(a);if(d&&d.length)a.state={style:d[0].style};else if(c){if(typeof h=="function")return a.state={style:c},I9(a);a.state={style:l?RC({},l,c):c}}else a.state={style:{}};return a}return JWe(t,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,u=a.to,d=a.from,h=this.state.style;if(s){if(!o){var f={style:l?RC({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(f);return}if(!(cWe(i.to,u)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=m||c?d:i.to;if(this.state&&h){var y={style:l?RC({},l,v):v};(l&&h[l]!==v||!l&&h!==v)&&this.setState(y)}this.runAnimation(Nd(Nd({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,f=zWe(o,s,PWe(c),l,this.changeStyle),m=function(){a.stopJSAnimation=f()};this.manager.start([h,u,m,l,d])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,c=o[0],u=c.style,d=c.duration,h=d===void 0?0:d,f=function(v,y,w){if(w===0)return v;var _=y.duration,S=y.easing,A=S===void 0?"ease":S,C=y.style,D=y.properties,M=y.onAnimationEnd,P=w>0?o[w-1]:y,O=D||Object.keys(C);if(typeof A=="function"||A==="spring")return[].concat(vB(v),[a.runJSAnimation.bind(a,{from:P.style,to:C,duration:_,easing:A}),_]);var j=pie(O,_,A),L=Nd(Nd(Nd({},P.style),C),{},{transition:j});return[].concat(vB(v),[L,_,M]).filter(wWe)};return this.manager.start([l].concat(vB(o.reduce(f,[u,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=mWe());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,f=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var v=s?RC({},s,l):l,y=pie(Object.keys(v),o,c);m.start([u,a,Nd(Nd({},v),{},{transition:y}),o,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=qWe(i,HWe),c=K.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!s||c===0||o<=0)return a;var d=function(f){var m=f.props,v=m.style,y=v===void 0?{}:v,w=m.className,_=K.cloneElement(f,Nd(Nd({},l),{},{style:Nd(Nd({},y),u),className:w}));return _};return c===1?d(K.Children.only(a)):ye.createElement("div",null,K.Children.map(a,function(h){return d(h)}))}}]),t}(K.PureComponent);cy.displayName="Animate";cy.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};cy.propTypes={from:si.oneOfType([si.object,si.string]),to:si.oneOfType([si.object,si.string]),attributeName:si.string,duration:si.number,begin:si.number,easing:si.oneOfType([si.string,si.func]),steps:si.arrayOf(si.shape({duration:si.number.isRequired,style:si.object.isRequired,easing:si.oneOfType([si.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),si.func]),properties:si.arrayOf("string"),onAnimationEnd:si.func})),children:si.oneOfType([si.node,si.func]),isActive:si.bool,canBegin:si.bool,onAnimationEnd:si.func,shouldReAnimate:si.bool,onAnimationStart:si.func,onAnimationReStart:si.func};function kk(n){"@babel/helpers - typeof";return kk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kk(n)}function cN(){return cN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cN.apply(this,arguments)}function iYe(n,e){return lYe(n)||sYe(n,e)||oYe(n,e)||aYe()}function aYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oYe(n,e){if(n){if(typeof n=="string")return wie(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wie(n,e)}}function wie(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function sYe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function lYe(n){if(Array.isArray(n))return n}function _ie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_ie(Object(t),!0).forEach(function(r){cYe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_ie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cYe(n,e,t){return e=uYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uYe(n){var e=dYe(n,"string");return kk(e)=="symbol"?e:e+""}function dYe(n,e){if(kk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(kk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Sie=function(e,t,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(o>0&&a instanceof Array){for(var d=[0,0,0,0],h=0,f=4;h<f;h++)d[h]=a[h]>o?o:a[h];u="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+s*d[1])),u+="L ".concat(e+r,",").concat(t+i-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+i)),u+="L ".concat(e+l*d[3],",").concat(t+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+i-s*d[3])),u+="Z"}else if(o>0&&a===+a&&a>0){var m=Math.min(o,a);u="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+i-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+i,`
            L `).concat(e+l*m,",").concat(t+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+i-s*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},hYe=function(e,t){if(!e||!t)return!1;var r=e.x,i=e.y,a=t.x,o=t.y,s=t.width,l=t.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(a,a+s),u=Math.max(a,a+s),d=Math.min(o,o+l),h=Math.max(o,o+l);return r>=c&&r<=u&&i>=d&&i<=h}return!1},fYe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dW=function(e){var t=xie(xie({},fYe),e),r=K.useRef(),i=K.useState(-1),a=iYe(i,2),o=a[0],s=a[1];K.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&s(A)}catch{}},[]);var l=t.x,c=t.y,u=t.width,d=t.height,h=t.radius,f=t.className,m=t.animationEasing,v=t.animationDuration,y=t.animationBegin,w=t.isAnimationActive,_=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var S=Gr("recharts-rectangle",f);return _?ye.createElement(cy,{canBegin:o>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:v,animationEasing:m,isActive:_},function(A){var C=A.width,D=A.height,M=A.x,P=A.y;return ye.createElement(cy,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:w,easing:m},ye.createElement("path",cN({},ei(t,!0),{className:S,d:Sie(M,P,C,D,h),ref:r})))}):ye.createElement("path",cN({},ei(t,!0),{className:S,d:Sie(l,c,u,d,h)}))};function P9(){return P9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},P9.apply(this,arguments)}var dwe=function(e){var t=e.cx,r=e.cy,i=e.r,a=e.className,o=Gr("recharts-dot",a);return t===+t&&r===+r&&i===+i?ye.createElement("circle",P9({},ei(e,!1),MR(e),{className:o,cx:t,cy:r,r:i})):null};function Ik(n){"@babel/helpers - typeof";return Ik=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ik(n)}var pYe=["x","y","top","left","width","height","className"];function O9(){return O9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},O9.apply(this,arguments)}function Tie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function gYe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tie(Object(t),!0).forEach(function(r){mYe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function mYe(n,e,t){return e=vYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vYe(n){var e=yYe(n,"string");return Ik(e)=="symbol"?e:e+""}function yYe(n,e){if(Ik(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ik(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bYe(n,e){if(n==null)return{};var t=wYe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function wYe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var _Ye=function(e,t,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(t,"h").concat(r)},xYe=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.top,s=o===void 0?0:o,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,h=e.height,f=h===void 0?0:h,m=e.className,v=bYe(e,pYe),y=gYe({x:r,y:a,top:s,left:c,width:d,height:f},v);return!St(r)||!St(a)||!St(d)||!St(f)||!St(s)||!St(c)?null:ye.createElement("path",O9({},ei(y,!0),{className:Gr("recharts-cross",m),d:_Ye(r,a,d,f,s,c)}))},yB,Eie;function SYe(){if(Eie)return yB;Eie=1;var n=I0e(),e=n(Object.getPrototypeOf,Object);return yB=e,yB}var bB,Aie;function TYe(){if(Aie)return bB;Aie=1;var n=Gg(),e=SYe(),t=Wg(),r="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,l=o.call(Object);function c(u){if(!t(u)||n(u)!=r)return!1;var d=e(u);if(d===null)return!0;var h=s.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==l}return bB=c,bB}var EYe=TYe();const AYe=Br(EYe);var wB,Cie;function CYe(){if(Cie)return wB;Cie=1;var n=Gg(),e=Wg(),t="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&n(i)==t}return wB=r,wB}var DYe=CYe();const kYe=Br(DYe);function Mk(n){"@babel/helpers - typeof";return Mk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mk(n)}function uN(){return uN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uN.apply(this,arguments)}function IYe(n,e){return RYe(n)||OYe(n,e)||PYe(n,e)||MYe()}function MYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PYe(n,e){if(n){if(typeof n=="string")return Die(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Die(n,e)}}function Die(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function OYe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function RYe(n){if(Array.isArray(n))return n}function kie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Iie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kie(Object(t),!0).forEach(function(r){NYe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function NYe(n,e,t){return e=LYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LYe(n){var e=jYe(n,"string");return Mk(e)=="symbol"?e:e+""}function jYe(n,e){if(Mk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Mk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Mie=function(e,t,r,i,a){var o=r-i,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-o/2,",").concat(t+a),s+="L ".concat(e+r-o/2-i,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z"),s},FYe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$Ye=function(e){var t=Iie(Iie({},FYe),e),r=K.useRef(),i=K.useState(-1),a=IYe(i,2),o=a[0],s=a[1];K.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&s(S)}catch{}},[]);var l=t.x,c=t.y,u=t.upperWidth,d=t.lowerWidth,h=t.height,f=t.className,m=t.animationEasing,v=t.animationDuration,y=t.animationBegin,w=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||h!==+h||u===0&&d===0||h===0)return null;var _=Gr("recharts-trapezoid",f);return w?ye.createElement(cy,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:h,x:l,y:c},duration:v,animationEasing:m,isActive:w},function(S){var A=S.upperWidth,C=S.lowerWidth,D=S.height,M=S.x,P=S.y;return ye.createElement(cy,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:m},ye.createElement("path",uN({},ei(t,!0),{className:_,d:Mie(M,P,A,C,D),ref:r})))}):ye.createElement("g",null,ye.createElement("path",uN({},ei(t,!0),{className:_,d:Mie(l,c,u,d,h)})))},BYe=["option","shapeType","propTransformer","activeClassName","isActive"];function Pk(n){"@babel/helpers - typeof";return Pk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pk(n)}function UYe(n,e){if(n==null)return{};var t=VYe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function VYe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Pie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dN(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pie(Object(t),!0).forEach(function(r){zYe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zYe(n,e,t){return e=HYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HYe(n){var e=qYe(n,"string");return Pk(e)=="symbol"?e:e+""}function qYe(n,e){if(Pk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Pk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GYe(n,e){return dN(dN({},e),n)}function WYe(n,e){return n==="symbols"}function Oie(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return ye.createElement(dW,t);case"trapezoid":return ye.createElement($Ye,t);case"sector":return ye.createElement(rwe,t);case"symbols":if(WYe(e))return ye.createElement(kG,t);break;default:return null}}function YYe(n){return K.isValidElement(n)?n.props:n}function KYe(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?GYe:r,a=n.activeClassName,o=a===void 0?"recharts-active-shape":a,s=n.isActive,l=UYe(n,BYe),c;if(K.isValidElement(e))c=K.cloneElement(e,dN(dN({},l),YYe(e)));else if(vr(e))c=e(l);else if(AYe(e)&&!kYe(e)){var u=i(e,l);c=ye.createElement(Oie,{shapeType:t,elementProps:u})}else{var d=l;c=ye.createElement(Oie,{shapeType:t,elementProps:d})}return s?ye.createElement(zo,{className:o},c):c}function $j(n,e){return e!=null&&"trapezoids"in n.props}function Bj(n,e){return e!=null&&"sectors"in n.props}function Ok(n,e){return e!=null&&"points"in n.props}function XYe(n,e){var t,r,i=n.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||n.x===e.x,a=n.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||n.y===e.y;return i&&a}function ZYe(n,e){var t=n.endAngle===e.endAngle,r=n.startAngle===e.startAngle;return t&&r}function QYe(n,e){var t=n.x===e.x,r=n.y===e.y,i=n.z===e.z;return t&&r&&i}function JYe(n,e){var t;return $j(n,e)?t=XYe:Bj(n,e)?t=ZYe:Ok(n,e)&&(t=QYe),t}function eKe(n,e){var t;return $j(n,e)?t="trapezoids":Bj(n,e)?t="sectors":Ok(n,e)&&(t="points"),t}function tKe(n,e){if($j(n,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(Bj(n,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Ok(n,e)?e.payload:{}}function nKe(n){var e=n.activeTooltipItem,t=n.graphicalItem,r=n.itemData,i=eKe(t,e),a=tKe(t,e),o=r.filter(function(l,c){var u=sW(a,l),d=t.props[i].filter(function(m){var v=JYe(t,e);return v(m,e)}),h=t.props[i].indexOf(d[d.length-1]),f=c===h;return u&&f}),s=r.indexOf(o[o.length-1]);return s}var _B,Rie;function rKe(){if(Rie)return _B;Rie=1;var n=Math.ceil,e=Math.max;function t(r,i,a,o){for(var s=-1,l=e(n((i-r)/(a||1)),0),c=Array(l);l--;)c[o?l:++s]=r,r+=a;return c}return _B=t,_B}var xB,Nie;function hwe(){if(Nie)return xB;Nie=1;var n=G0e(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return xB=r,xB}var SB,Lie;function iKe(){if(Lie)return SB;Lie=1;var n=rKe(),e=Aj(),t=hwe();function r(i){return function(a,o,s){return s&&typeof s!="number"&&e(a,o,s)&&(o=s=void 0),a=t(a),o===void 0?(o=a,a=0):o=t(o),s=s===void 0?a<o?1:-1:t(s),n(a,o,s,i)}}return SB=r,SB}var TB,jie;function aKe(){if(jie)return TB;jie=1;var n=iKe(),e=n();return TB=e,TB}var oKe=aKe();const hN=Br(oKe);function Rk(n){"@babel/helpers - typeof";return Rk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rk(n)}function Fie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $ie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fie(Object(t),!0).forEach(function(r){fwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fwe(n,e,t){return e=sKe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sKe(n){var e=lKe(n,"string");return Rk(e)=="symbol"?e:e+""}function lKe(n,e){if(Rk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Rk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var cKe=["Webkit","Moz","O","ms"],uKe=function(e,t){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=cKe.reduce(function(a,o){return $ie($ie({},a),{},fwe({},o+r,t))},{});return i[e]=t,i};function $1(n){"@babel/helpers - typeof";return $1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$1(n)}function fN(){return fN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fN.apply(this,arguments)}function Bie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function EB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bie(Object(t),!0).forEach(function(r){Nc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Bie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function dKe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Uie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,gwe(r.key),r)}}function hKe(n,e,t){return e&&Uie(n.prototype,e),t&&Uie(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function fKe(n,e,t){return e=pN(e),pKe(n,pwe()?Reflect.construct(e,t||[],pN(n).constructor):e.apply(n,t))}function pKe(n,e){if(e&&($1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gKe(n)}function gKe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pwe=function(){return!!n})()}function pN(n){return pN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pN(n)}function mKe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&R9(n,e)}function R9(n,e){return R9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},R9(n,e)}function Nc(n,e,t){return e=gwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gwe(n){var e=vKe(n,"string");return $1(e)=="symbol"?e:e+""}function vKe(n,e){if($1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if($1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var yKe=function(e){var t=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var l=t.length,c=uD().domain(hN(0,l)).range([a,a+o-s]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},Vie=function(e){return e.changedTouches&&!!e.changedTouches.length},B1=function(n){function e(t){var r;return dKe(this,e),r=fKe(this,e,[t]),Nc(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Nc(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Nc(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),Nc(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Nc(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Nc(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Nc(r,"handleSlideDragStart",function(i){var a=Vie(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return mKe(e,n),hKe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,u=c.length-1,d=Math.min(i,a),h=Math.max(i,a),f=e.getIndexInRange(o,d),m=e.getIndexInRange(o,h);return{startIndex:f-f%l,endIndex:m===u?u:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=Of(a[r],s,r);return vr(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,h=l.startIndex,f=l.endIndex,m=l.onChange,v=r.pageX-a;v>0?v=Math.min(v,c+u-d-s,c+u-d-o):v<0&&(v=Math.max(v,c-o,c-s));var y=this.getIndex({startX:o+v,endX:s+v});(y.startIndex!==h||y.endIndex!==f)&&m&&m(y),this.setState({startX:o+v,endX:s+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=Vie(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[o],u=this.props,d=u.x,h=u.width,f=u.travellerWidth,m=u.onChange,v=u.gap,y=u.data,w={startX:this.state.startX,endX:this.state.endX},_=r.pageX-a;_>0?_=Math.min(_,d+h-f-c):_<0&&(_=Math.max(_,d-c)),w[o]=c+_;var S=this.getIndex(w),A=S.startIndex,C=S.endIndex,D=function(){var P=y.length-1;return o==="startX"&&(s>l?A%v===0:C%v===0)||s<l&&C===P||o==="endX"&&(s>l?C%v===0:A%v===0)||s>l&&C===P};this.setState(Nc(Nc({},o,c+_),"brushMoveStartX",r.pageX),function(){m&&D()&&m(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,c=o.endX,u=this.state[i],d=s.indexOf(u);if(d!==-1){var h=d+r;if(!(h===-1||h>=s.length)){var f=s[h];i==="startX"&&f>=c||i==="endX"&&f<=l||this.setState(Nc({},i,f),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.fill,c=r.stroke;return ye.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.data,c=r.children,u=r.padding,d=K.Children.only(c);return d?ye.cloneElement(d,{x:i,y:a,width:o,height:s,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,s=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,h=l.traveller,f=l.ariaLabel,m=l.data,v=l.startIndex,y=l.endIndex,w=Math.max(r,this.props.x),_=EB(EB({},ei(this.props,!1)),{},{x:w,y:c,width:u,height:d}),S=f||"Min value: ".concat((a=m[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=m[y])===null||o===void 0?void 0:o.name);return ye.createElement(zo,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),s.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,_))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,c=a.travellerWidth,u=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return ye.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:o,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,h=u.endX,f=5,m={pointerEvents:"none",fill:c};return ye.createElement(zo,{className:"recharts-brush-texts"},ye.createElement(zR,fN({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-f,y:o+s/2},m),this.getTextOfTick(i)),ye.createElement(zR,fN({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+f,y:o+s/2},m),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,s=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,h=this.state,f=h.startX,m=h.endX,v=h.isTextActive,y=h.isSlideMoving,w=h.isTravellerMoving,_=h.isTravellerFocused;if(!i||!i.length||!St(s)||!St(l)||!St(c)||!St(u)||c<=0||u<=0)return null;var S=Gr("recharts-brush",a),A=ye.Children.count(o)===1,C=uKe("userSelect","none");return ye.createElement(zo,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(f,m),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(m,"endX"),(v||y||w||_||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,s=r.height,l=r.stroke,c=Math.floor(a+s/2)-1;return ye.createElement(ye.Fragment,null,ye.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),ye.createElement("line",{x1:i+1,y1:c,x2:i+o-1,y2:c,fill:"none",stroke:"#fff"}),ye.createElement("line",{x1:i+1,y1:c+2,x2:i+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return ye.isValidElement(r)?a=ye.cloneElement(r,i):vr(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return EB({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o},a&&a.length?yKe({data:a,width:o,x:s,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var h=i.scale.domain().map(function(f){return i.scale(f)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);r[l]>i?s=l:o=l}return i>=r[s]?s:o}}])}(K.PureComponent);Nc(B1,"displayName","Brush");Nc(B1,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var AB,zie;function bKe(){if(zie)return AB;zie=1;var n=LG();function e(t,r){var i;return n(t,function(a,o,s){return i=r(a,o,s),!i}),!!i}return AB=e,AB}var CB,Hie;function wKe(){if(Hie)return CB;Hie=1;var n=S0e(),e=Sy(),t=bKe(),r=ac(),i=Aj();function a(o,s,l){var c=r(o)?n:t;return l&&i(o,s,l)&&(s=void 0),c(o,e(s,3))}return CB=a,CB}var _Ke=wKe();const xKe=Br(_Ke);var Af=function(e,t){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===t},DB,qie;function SKe(){if(qie)return DB;qie=1;var n=U0e();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return DB=e,DB}var kB,Gie;function TKe(){if(Gie)return kB;Gie=1;var n=SKe(),e=$0e(),t=Sy();function r(i,a){var o={};return a=t(a,3),e(i,function(s,l,c){n(o,l,a(s,l,c))}),o}return kB=r,kB}var EKe=TKe();const AKe=Br(EKe);var IB,Wie;function CKe(){if(Wie)return IB;Wie=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}return IB=n,IB}var MB,Yie;function DKe(){if(Yie)return MB;Yie=1;var n=LG();function e(t,r){var i=!0;return n(t,function(a,o,s){return i=!!r(a,o,s),i}),i}return MB=e,MB}var PB,Kie;function kKe(){if(Kie)return PB;Kie=1;var n=CKe(),e=DKe(),t=Sy(),r=ac(),i=Aj();function a(o,s,l){var c=r(o)?n:e;return l&&i(o,s,l)&&(s=void 0),c(o,t(s,3))}return PB=a,PB}var IKe=kKe();const mwe=Br(IKe);var MKe=["x","y"];function Nk(n){"@babel/helpers - typeof";return Nk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nk(n)}function N9(){return N9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},N9.apply(this,arguments)}function Xie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $A(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xie(Object(t),!0).forEach(function(r){PKe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function PKe(n,e,t){return e=OKe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OKe(n){var e=RKe(n,"string");return Nk(e)=="symbol"?e:e+""}function RKe(n,e){if(Nk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Nk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function NKe(n,e){if(n==null)return{};var t=LKe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function LKe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function jKe(n,e){var t=n.x,r=n.y,i=NKe(n,MKe),a="".concat(t),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),h=parseInt(d,10);return $A($A($A($A($A({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function Zie(n){return ye.createElement(KYe,N9({shapeType:"rectangle",propTransformer:jKe,activeClassName:"recharts-active-bar"},n))}var FKe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||Pw(),t)}},$Ke=["value","background"],vwe;function U1(n){"@babel/helpers - typeof";return U1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U1(n)}function BKe(n,e){if(n==null)return{};var t=UKe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function UKe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function gN(){return gN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gN.apply(this,arguments)}function Qie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ja(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qie(Object(t),!0).forEach(function(r){Nv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function VKe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Jie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,bwe(r.key),r)}}function zKe(n,e,t){return e&&Jie(n.prototype,e),t&&Jie(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function HKe(n,e,t){return e=mN(e),qKe(n,ywe()?Reflect.construct(e,t||[],mN(n).constructor):e.apply(n,t))}function qKe(n,e){if(e&&(U1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GKe(n)}function GKe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ywe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ywe=function(){return!!n})()}function mN(n){return mN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mN(n)}function WKe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&L9(n,e)}function L9(n,e){return L9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L9(n,e)}function Nv(n,e,t){return e=bwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bwe(n){var e=YKe(n,"string");return U1(e)=="symbol"?e:e+""}function YKe(n,e){if(U1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(U1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Cy=function(n){function e(){var t;VKe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=HKe(this,e,[].concat(i)),Nv(t,"state",{isAnimationFinished:!1}),Nv(t,"id",bj("recharts-bar-")),Nv(t,"handleAnimationEnd",function(){var o=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),o&&o()}),Nv(t,"handleAnimationStart",function(){var o=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),o&&o()}),t}return WKe(e,n),zKe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,c=a.activeBar,u=ei(this.props,!1);return r&&r.map(function(d,h){var f=h===l,m=f?c:o,v=Ja(Ja(Ja({},u),d),{},{isActive:f,option:m,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ye.createElement(zo,gN({className:"recharts-bar-rectangle"},PR(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),ye.createElement(Zie,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state.prevData;return ye.createElement(cy,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var m=f.t,v=a.map(function(y,w){var _=h&&h[w];if(_){var S=Rx(_.x,y.x),A=Rx(_.y,y.y),C=Rx(_.width,y.width),D=Rx(_.height,y.height);return Ja(Ja({},y),{},{x:S(m),y:A(m),width:C(m),height:D(m)})}if(o==="horizontal"){var M=Rx(0,y.height),P=M(m);return Ja(Ja({},y),{},{y:y.y+y.height-P,height:P})}var O=Rx(0,y.width),j=O(m);return Ja(Ja({},y),{},{width:j})});return ye.createElement(zo,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!sW(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=ei(this.props.background,!1);return a.map(function(c,u){c.value;var d=c.background,h=BKe(c,$Ke);if(!d)return null;var f=Ja(Ja(Ja(Ja(Ja({},h),{},{fill:"#eee"},d),l),PR(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ye.createElement(Zie,gN({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},f))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,c=a.layout,u=a.children,d=rh(u,Fj);if(!d)return null;var h=c==="vertical"?o[0].height/2:o[0].width/2,f=function(y,w){var _=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:_,errorVal:Of(y,w)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ye.createElement(zo,m,d.map(function(v){return ye.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,offset:h,dataPointFormatter:f})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,s=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,h=r.height,f=r.isAnimationActive,m=r.background,v=r.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,w=Gr("recharts-bar",o),_=s&&s.allowDataOverflow,S=l&&l.allowDataOverflow,A=_||S,C=ui(v)?this.id:v;return ye.createElement(zo,{className:w},_||S?ye.createElement("defs",null,ye.createElement("clipPath",{id:"clipPath-".concat(C)},ye.createElement("rect",{x:_?c:c-d/2,y:S?u:u-h/2,width:_?d:d*2,height:S?h:h*2}))):null,ye.createElement(zo,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(C,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,C),(!f||y)&&hw.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(K.PureComponent);vwe=Cy;Nv(Cy,"displayName","Bar");Nv(Cy,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!KI.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Nv(Cy,"getComposedData",function(n){var e=n.props,t=n.item,r=n.barPosition,i=n.bandSize,a=n.xAxis,o=n.yAxis,s=n.xAxisTicks,l=n.yAxisTicks,c=n.stackedData,u=n.dataStartIndex,d=n.displayedData,h=n.offset,f=f7e(r,t);if(!f)return null;var m=e.layout,v=t.type.defaultProps,y=v!==void 0?Ja(Ja({},v),t.props):t.props,w=y.dataKey,_=y.children,S=y.minPointSize,A=m==="horizontal"?o:a,C=c?A.scale.domain():null,D=_7e({numericAxis:A}),M=rh(_,Cj),P=d.map(function(O,j){var L,B,$,Y,q,W;c?L=p7e(c[u+j],C):(L=Of(O,w),Array.isArray(L)||(L=[D,L]));var X=FKe(S,vwe.defaultProps.minPointSize)(L[1],j);if(m==="horizontal"){var te,re=[o.scale(L[0]),o.scale(L[1])],z=re[0],oe=re[1];B=Nre({axis:a,ticks:s,bandSize:i,offset:f.offset,entry:O,index:j}),$=(te=oe??z)!==null&&te!==void 0?te:void 0,Y=f.size;var le=z-oe;if(q=Number.isNaN(le)?0:le,W={x:B,y:o.y,width:Y,height:o.height},Math.abs(X)>0&&Math.abs(q)<Math.abs(X)){var ee=Jd(q||X)*(Math.abs(X)-Math.abs(q));$-=ee,q+=ee}}else{var be=[a.scale(L[0]),a.scale(L[1])],he=be[0],pe=be[1];if(B=he,$=Nre({axis:o,ticks:l,bandSize:i,offset:f.offset,entry:O,index:j}),Y=pe-he,q=f.size,W={x:a.x,y:$,width:a.width,height:q},Math.abs(X)>0&&Math.abs(Y)<Math.abs(X)){var ct=Jd(Y||X)*(Math.abs(X)-Math.abs(Y));Y+=ct}}return Ja(Ja(Ja({},O),{},{x:B,y:$,width:Y,height:q,value:c?L:L[1],payload:O,background:W},M&&M[j]&&M[j].props),{},{tooltipPayload:[ewe(t,O)],tooltipPosition:{x:B+Y/2,y:$+q/2}})});return Ja({data:P,layout:m},h)});function Lk(n){"@babel/helpers - typeof";return Lk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lk(n)}function KKe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function eae(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,wwe(r.key),r)}}function XKe(n,e,t){return e&&eae(n.prototype,e),t&&eae(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function tae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tae(Object(t),!0).forEach(function(r){Uj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Uj(n,e,t){return e=wwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wwe(n){var e=ZKe(n,"string");return Lk(e)=="symbol"?e:e+""}function ZKe(n,e){if(Lk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Lk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var QKe=function(e,t,r,i,a){var o=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(t),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!Lc(c,Cy);return u.reduce(function(f,m){var v=t[m],y=v.orientation,w=v.domain,_=v.padding,S=_===void 0?{}:_,A=v.mirror,C=v.reversed,D="".concat(y).concat(A?"Mirror":""),M,P,O,j,L;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var B=w[1]-w[0],$=1/0,Y=v.categoricalDomain.sort(QBe);if(Y.forEach(function(be,he){he>0&&($=Math.min((be||0)-(Y[he-1]||0),$))}),Number.isFinite($)){var q=$/B,W=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(M=q*W/2),v.padding==="no-gap"){var X=Iw(e.barCategoryGap,q*W),te=q*W/2;M=te-X-(te-X)/W*X}}}i==="xAxis"?P=[r.left+(S.left||0)+(M||0),r.left+r.width-(S.right||0)-(M||0)]:i==="yAxis"?P=l==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(M||0),r.top+r.height-(S.bottom||0)-(M||0)]:P=v.range,C&&(P=[P[1],P[0]]);var re=d7e(v,a,h),z=re.scale,oe=re.realScaleType;z.domain(w).range(P),h7e(z);var le=w7e(z,Yd(Yd({},v),{},{realScaleType:oe}));i==="xAxis"?(L=y==="top"&&!A||y==="bottom"&&A,O=r.left,j=d[D]-L*v.height):i==="yAxis"&&(L=y==="left"&&!A||y==="right"&&A,O=d[D]-L*v.width,j=r.top);var ee=Yd(Yd(Yd({},v),le),{},{realScaleType:oe,x:O,y:j,scale:z,width:i==="xAxis"?r.width:v.width,height:i==="yAxis"?r.height:v.height});return ee.bandSize=rN(ee,le),!v.hide&&i==="xAxis"?d[D]+=(L?-1:1)*ee.height:v.hide||(d[D]+=(L?-1:1)*ee.width),Yd(Yd({},f),{},Uj({},m,ee))},{})},_we=function(e,t){var r=e.x,i=e.y,a=t.x,o=t.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},JKe=function(e){var t=e.x1,r=e.y1,i=e.x2,a=e.y2;return _we({x:t,y:r},{x:i,y:a})},xwe=function(){function n(e){KKe(this,n),this.scale=e}return XKe(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?t>=i&&t<=a:t>=a&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}])}();Uj(xwe,"EPS",1e-4);var hW=function(e){var t=Object.keys(e).reduce(function(r,i){return Yd(Yd({},r),{},Uj({},i,xwe.create(e[i])))},{});return Yd(Yd({},t),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return AKe(i,function(l,c){return t[c].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return mwe(i,function(a,o){return t[o].isInRange(a)})}})};function eXe(n){return(n%180+180)%180}var tXe=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=eXe(i),o=a*Math.PI/180,s=Math.atan(r/t),l=o>s&&o<Math.PI-s?r/Math.sin(o):t/Math.cos(o);return Math.abs(l)},OB,nae;function nXe(){if(nae)return OB;nae=1;var n=Sy(),e=YI(),t=Tj();function r(i){return function(a,o,s){var l=Object(a);if(!e(a)){var c=n(o,3);a=t(a),o=function(d){return c(l[d],d,l)}}var u=i(a,o,s);return u>-1?l[c?a[u]:u]:void 0}}return OB=r,OB}var RB,rae;function rXe(){if(rae)return RB;rae=1;var n=hwe();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return RB=e,RB}var NB,iae;function iXe(){if(iae)return NB;iae=1;var n=R0e(),e=Sy(),t=rXe(),r=Math.max;function i(a,o,s){var l=a==null?0:a.length;if(!l)return-1;var c=s==null?0:t(s);return c<0&&(c=r(l+c,0)),n(a,e(o,3),c)}return NB=i,NB}var LB,aae;function aXe(){if(aae)return LB;aae=1;var n=nXe(),e=iXe(),t=n(e);return LB=t,LB}var oXe=aXe();const sXe=Br(oXe);var lXe=Xye();const cXe=Br(lXe);var uXe=cXe(function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}},function(n){return["l",n.left,"t",n.top,"w",n.width,"h",n.height].join("")}),fW=K.createContext(void 0),pW=K.createContext(void 0),Swe=K.createContext(void 0),Twe=K.createContext({}),Ewe=K.createContext(void 0),Awe=K.createContext(0),Cwe=K.createContext(0),oae=function(e){var t=e.state,r=t.xAxisMap,i=t.yAxisMap,a=t.offset,o=e.clipPathId,s=e.children,l=e.width,c=e.height,u=uXe(a);return ye.createElement(fW.Provider,{value:r},ye.createElement(pW.Provider,{value:i},ye.createElement(Twe.Provider,{value:a},ye.createElement(Swe.Provider,{value:u},ye.createElement(Ewe.Provider,{value:o},ye.createElement(Awe.Provider,{value:c},ye.createElement(Cwe.Provider,{value:l},s)))))))},dXe=function(){return K.useContext(Ewe)},Dwe=function(e){var t=K.useContext(fW);t==null&&Pw();var r=t[e];return r==null&&Pw(),r},hXe=function(){var e=K.useContext(fW);return Pv(e)},fXe=function(){var e=K.useContext(pW),t=sXe(e,function(r){return mwe(r.domain,Number.isFinite)});return t||Pv(e)},kwe=function(e){var t=K.useContext(pW);t==null&&Pw();var r=t[e];return r==null&&Pw(),r},pXe=function(){var e=K.useContext(Swe);return e},gXe=function(){return K.useContext(Twe)},gW=function(){return K.useContext(Cwe)},mW=function(){return K.useContext(Awe)};function V1(n){"@babel/helpers - typeof";return V1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V1(n)}function mXe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function vXe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Mwe(r.key),r)}}function yXe(n,e,t){return e&&vXe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function bXe(n,e,t){return e=vN(e),wXe(n,Iwe()?Reflect.construct(e,t||[],vN(n).constructor):e.apply(n,t))}function wXe(n,e){if(e&&(V1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Xe(n)}function _Xe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Iwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Iwe=function(){return!!n})()}function vN(n){return vN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vN(n)}function xXe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&j9(n,e)}function j9(n,e){return j9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j9(n,e)}function sae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function lae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sae(Object(t),!0).forEach(function(r){vW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function vW(n,e,t){return e=Mwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mwe(n){var e=SXe(n,"string");return V1(e)=="symbol"?e:e+""}function SXe(n,e){if(V1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(V1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function TXe(n,e){return DXe(n)||CXe(n,e)||AXe(n,e)||EXe()}function EXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AXe(n,e){if(n){if(typeof n=="string")return cae(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cae(n,e)}}function cae(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function CXe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function DXe(n){if(Array.isArray(n))return n}function F9(){return F9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},F9.apply(this,arguments)}var kXe=function(e,t){var r;return ye.isValidElement(e)?r=ye.cloneElement(e,t):vr(e)?r=e(t):r=ye.createElement("line",F9({},t,{className:"recharts-reference-line-line"})),r},IXe=function(e,t,r,i,a,o,s,l,c){var u=a.x,d=a.y,h=a.width,f=a.height;if(r){var m=c.y,v=e.y.apply(m,{position:o});if(Af(c,"discard")&&!e.y.isInRange(v))return null;var y=[{x:u+h,y:v},{x:u,y:v}];return l==="left"?y.reverse():y}if(t){var w=c.x,_=e.x.apply(w,{position:o});if(Af(c,"discard")&&!e.x.isInRange(_))return null;var S=[{x:_,y:d+f},{x:_,y:d}];return s==="top"?S.reverse():S}if(i){var A=c.segment,C=A.map(function(D){return e.apply(D,{position:o})});return Af(c,"discard")&&xKe(C,function(D){return!e.isInRange(D)})?null:C}return null};function MXe(n){var e=n.x,t=n.y,r=n.segment,i=n.xAxisId,a=n.yAxisId,o=n.shape,s=n.className,l=n.alwaysShow,c=dXe(),u=Dwe(i),d=kwe(a),h=pXe();if(!c||!h)return null;gg(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=hW({x:u.scale,y:d.scale}),m=yo(e),v=yo(t),y=r&&r.length===2,w=IXe(f,m,v,y,h,n.position,u.orientation,d.orientation,n);if(!w)return null;var _=TXe(w,2),S=_[0],A=S.x,C=S.y,D=_[1],M=D.x,P=D.y,O=Af(n,"hidden")?"url(#".concat(c,")"):void 0,j=lae(lae({clipPath:O},ei(n,!0)),{},{x1:A,y1:C,x2:M,y2:P});return ye.createElement(zo,{className:Gr("recharts-reference-line",s)},kXe(o,j),Vs.renderCallByParent(n,JKe({x1:A,y1:C,x2:M,y2:P})))}var yW=function(n){function e(){return mXe(this,e),bXe(this,e,arguments)}return xXe(e,n),yXe(e,[{key:"render",value:function(){return ye.createElement(MXe,this.props)}}])}(ye.Component);vW(yW,"displayName","ReferenceLine");vW(yW,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function $9(){return $9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$9.apply(this,arguments)}function z1(n){"@babel/helpers - typeof";return z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z1(n)}function uae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uae(Object(t),!0).forEach(function(r){Vj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function PXe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function OXe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Owe(r.key),r)}}function RXe(n,e,t){return e&&OXe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function NXe(n,e,t){return e=yN(e),LXe(n,Pwe()?Reflect.construct(e,t||[],yN(n).constructor):e.apply(n,t))}function LXe(n,e){if(e&&(z1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jXe(n)}function jXe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Pwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pwe=function(){return!!n})()}function yN(n){return yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yN(n)}function FXe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&B9(n,e)}function B9(n,e){return B9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},B9(n,e)}function Vj(n,e,t){return e=Owe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Owe(n){var e=$Xe(n,"string");return z1(e)=="symbol"?e:e+""}function $Xe(n,e){if(z1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(z1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var BXe=function(e){var t=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=hW({x:i.scale,y:a.scale}),s=o.apply({x:t,y:r},{bandAware:!0});return Af(e,"discard")&&!o.isInRange(s)?null:s},zj=function(n){function e(){return PXe(this,e),NXe(this,e,arguments)}return FXe(e,n),RXe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,s=r.alwaysShow,l=r.clipPathId,c=yo(i),u=yo(a);if(gg(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=BXe(this.props);if(!d)return null;var h=d.x,f=d.y,m=this.props,v=m.shape,y=m.className,w=Af(this.props,"hidden")?"url(#".concat(l,")"):void 0,_=dae(dae({clipPath:w},ei(this.props,!0)),{},{cx:h,cy:f});return ye.createElement(zo,{className:Gr("recharts-reference-dot",y)},e.renderDot(v,_),Vs.renderCallByParent(this.props,{x:h-o,y:f-o,width:2*o,height:2*o}))}}])}(ye.Component);Vj(zj,"displayName","ReferenceDot");Vj(zj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Vj(zj,"renderDot",function(n,e){var t;return ye.isValidElement(n)?t=ye.cloneElement(n,e):vr(n)?t=n(e):t=ye.createElement(dwe,$9({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t});function U9(){return U9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},U9.apply(this,arguments)}function H1(n){"@babel/helpers - typeof";return H1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H1(n)}function hae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hae(Object(t),!0).forEach(function(r){Hj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function UXe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function VXe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Nwe(r.key),r)}}function zXe(n,e,t){return e&&VXe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function HXe(n,e,t){return e=bN(e),qXe(n,Rwe()?Reflect.construct(e,t||[],bN(n).constructor):e.apply(n,t))}function qXe(n,e){if(e&&(H1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GXe(n)}function GXe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Rwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rwe=function(){return!!n})()}function bN(n){return bN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bN(n)}function WXe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&V9(n,e)}function V9(n,e){return V9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},V9(n,e)}function Hj(n,e,t){return e=Nwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nwe(n){var e=YXe(n,"string");return H1(e)=="symbol"?e:e+""}function YXe(n,e){if(H1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(H1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var KXe=function(e,t,r,i,a){var o=a.x1,s=a.x2,l=a.y1,c=a.y2,u=a.xAxis,d=a.yAxis;if(!u||!d)return null;var h=hW({x:u.scale,y:d.scale}),f={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:t?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Af(a,"discard")&&(!h.isInRange(f)||!h.isInRange(m))?null:_we(f,m)},qj=function(n){function e(){return UXe(this,e),HXe(this,e,arguments)}return WXe(e,n),zXe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;gg(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=yo(i),h=yo(a),f=yo(o),m=yo(s),v=this.props.shape;if(!d&&!h&&!f&&!m&&!v)return null;var y=KXe(d,h,f,m,this.props);if(!y&&!v)return null;var w=Af(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ye.createElement(zo,{className:Gr("recharts-reference-area",l)},e.renderRect(v,fae(fae({clipPath:w},ei(this.props,!0)),y)),Vs.renderCallByParent(this.props,y))}}])}(ye.Component);Hj(qj,"displayName","ReferenceArea");Hj(qj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Hj(qj,"renderRect",function(n,e){var t;return ye.isValidElement(n)?t=ye.cloneElement(n,e):vr(n)?t=n(e):t=ye.createElement(dW,U9({},e,{className:"recharts-reference-area-rect"})),t});function Lwe(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function XXe(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return tXe(r,t)}function ZXe(n,e,t){var r=t==="width",i=n.x,a=n.y,o=n.width,s=n.height;return e===1?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}function wN(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var a=t();return n*(e-n*a/2-r)>=0&&n*(e+n*a/2-i)<=0}function QXe(n,e){return Lwe(n,e+1)}function JXe(n,e,t,r,i){for(var a=(r||[]).slice(),o=e.start,s=e.end,l=0,c=1,u=o,d=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:Lwe(r,c)};var v=l,y,w=function(){return y===void 0&&(y=t(m,v)),y},_=m.coordinate,S=l===0||wN(n,_,w,u,s);S||(l=0,u=o,c+=1),S&&(u=_+n*(w()/2+i),l+=c)},h;c<=a.length;)if(h=d(),h)return h.v;return[]}function jk(n){"@babel/helpers - typeof";return jk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jk(n)}function pae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function js(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pae(Object(t),!0).forEach(function(r){eZe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function eZe(n,e,t){return e=tZe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tZe(n){var e=nZe(n,"string");return jk(e)=="symbol"?e:e+""}function nZe(n,e){if(jk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(jk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rZe(n,e,t,r,i){for(var a=(r||[]).slice(),o=a.length,s=e.start,l=e.end,c=function(h){var f=a[h],m,v=function(){return m===void 0&&(m=t(f,h)),m};if(h===o-1){var y=n*(f.coordinate+n*v()/2-l);a[h]=f=js(js({},f),{},{tickCoord:y>0?f.coordinate-y*n:f.coordinate})}else a[h]=f=js(js({},f),{},{tickCoord:f.coordinate});var w=wN(n,f.tickCoord,v,s,l);w&&(l=f.tickCoord-n*(v()/2+i),a[h]=js(js({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return a}function iZe(n,e,t,r,i,a){var o=(r||[]).slice(),s=o.length,l=e.start,c=e.end;if(a){var u=r[s-1],d=t(u,s-1),h=n*(u.coordinate+n*d/2-c);o[s-1]=u=js(js({},u),{},{tickCoord:h>0?u.coordinate-h*n:u.coordinate});var f=wN(n,u.tickCoord,function(){return d},l,c);f&&(c=u.tickCoord-n*(d/2+i),o[s-1]=js(js({},u),{},{isShow:!0}))}for(var m=a?s-1:s,v=function(_){var S=o[_],A,C=function(){return A===void 0&&(A=t(S,_)),A};if(_===0){var D=n*(S.coordinate-n*C()/2-l);o[_]=S=js(js({},S),{},{tickCoord:D<0?S.coordinate-D*n:S.coordinate})}else o[_]=S=js(js({},S),{},{tickCoord:S.coordinate});var M=wN(n,S.tickCoord,C,l,c);M&&(l=S.tickCoord+n*(C()/2+i),o[_]=js(js({},S),{},{isShow:!0}))},y=0;y<m;y++)v(y);return o}function bW(n,e,t){var r=n.tick,i=n.ticks,a=n.viewBox,o=n.minTickGap,s=n.orientation,l=n.interval,c=n.tickFormatter,u=n.unit,d=n.angle;if(!i||!i.length||!r)return[];if(St(l)||KI.isSsr)return QXe(i,typeof l=="number"&&St(l)?l:0);var h=[],f=s==="top"||s==="bottom"?"width":"height",m=u&&f==="width"?cD(u,{fontSize:e,letterSpacing:t}):{width:0,height:0},v=function(S,A){var C=vr(c)?c(S.value,A):S.value;return f==="width"?XXe(cD(C,{fontSize:e,letterSpacing:t}),m,d):cD(C,{fontSize:e,letterSpacing:t})[f]},y=i.length>=2?Jd(i[1].coordinate-i[0].coordinate):1,w=ZXe(a,y,f);return l==="equidistantPreserveStart"?JXe(y,w,v,i,o):(l==="preserveStart"||l==="preserveStartEnd"?h=iZe(y,w,v,i,o,l==="preserveStartEnd"):h=rZe(y,w,v,i,o),h.filter(function(_){return _.isShow}))}var aZe=["viewBox"],oZe=["viewBox"],sZe=["ticks"];function q1(n){"@babel/helpers - typeof";return q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q1(n)}function FS(){return FS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},FS.apply(this,arguments)}function gae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function cl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gae(Object(t),!0).forEach(function(r){wW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jB(n,e){if(n==null)return{};var t=lZe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function lZe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function cZe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function mae(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Fwe(r.key),r)}}function uZe(n,e,t){return e&&mae(n.prototype,e),t&&mae(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function dZe(n,e,t){return e=_N(e),hZe(n,jwe()?Reflect.construct(e,t||[],_N(n).constructor):e.apply(n,t))}function hZe(n,e){if(e&&(q1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fZe(n)}function fZe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jwe=function(){return!!n})()}function _N(n){return _N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_N(n)}function pZe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&z9(n,e)}function z9(n,e){return z9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z9(n,e)}function wW(n,e,t){return e=Fwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fwe(n){var e=gZe(n,"string");return q1(e)=="symbol"?e:e+""}function gZe(n,e){if(q1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(q1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var TT=function(n){function e(t){var r;return cZe(this,e),r=dZe(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return pZe(e,n),uZe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=jB(r,aZe),s=this.props,l=s.viewBox,c=jB(s,oZe);return!JS(a,l)||!JS(o,c)||!JS(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,c=i.orientation,u=i.tickSize,d=i.mirror,h=i.tickMargin,f,m,v,y,w,_,S=d?-1:1,A=r.tickSize||u,C=St(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":f=m=r.coordinate,y=o+ +!d*l,v=y-S*A,_=v-S*h,w=C;break;case"left":v=y=r.coordinate,m=a+ +!d*s,f=m-S*A,w=f-S*h,_=C;break;case"right":v=y=r.coordinate,m=a+ +d*s,f=m+S*A,w=f+S*h,_=C;break;default:f=m=r.coordinate,y=o+ +d*l,v=y+S*A,_=v+S*h,w=C;break}return{line:{x1:f,y1:v,x2:m,y2:y},tick:{x:w,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=cl(cl(cl({},ei(this.props,!1)),ei(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);d=cl(cl({},d),{},{x1:i,y1:a+h*s,x2:i+o,y2:a+h*s})}else{var f=+(l==="left"&&!c||l==="right"&&c);d=cl(cl({},d),{},{x1:i+f*o,y1:a,x2:i+f*o,y2:a+s})}return ye.createElement("line",FS({},d,{className:Gr("recharts-cartesian-axis-line",Wu(u,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,s=this.props,l=s.tickLine,c=s.stroke,u=s.tick,d=s.tickFormatter,h=s.unit,f=bW(cl(cl({},this.props),{},{ticks:r}),i,a),m=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),y=ei(this.props,!1),w=ei(u,!1),_=cl(cl({},y),{},{fill:"none"},ei(l,!1)),S=f.map(function(A,C){var D=o.getTickLineCoord(A),M=D.line,P=D.tick,O=cl(cl(cl(cl({textAnchor:m,verticalAnchor:v},y),{},{stroke:"none",fill:c},w),P),{},{index:C,payload:A,visibleTicksCount:f.length,tickFormatter:d});return ye.createElement(zo,FS({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},PR(o.props,A,C)),l&&ye.createElement("line",FS({},_,M,{className:Gr("recharts-cartesian-axis-tick-line",Wu(l,"className"))})),u&&e.renderTickItem(u,O,"".concat(vr(d)?d(A.value,C):A.value).concat(h||"")))});return ye.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var d=this.props,h=d.ticks,f=jB(d,sZe),m=h;return vr(l)&&(m=h&&h.length>0?l(this.props):l(f)),o<=0||s<=0||!m||!m.length?null:ye.createElement(zo,{className:Gr("recharts-cartesian-axis",c),ref:function(y){r.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Vs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return ye.isValidElement(r)?o=ye.cloneElement(r,i):vr(r)?o=r(i):o=ye.createElement(zR,FS({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(K.Component);wW(TT,"displayName","CartesianAxis");wW(TT,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var mZe=["x1","y1","x2","y2","key"],vZe=["offset"];function Ow(n){"@babel/helpers - typeof";return Ow=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ow(n)}function vae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vae(Object(t),!0).forEach(function(r){yZe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yZe(n,e,t){return e=bZe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bZe(n){var e=wZe(n,"string");return Ow(e)=="symbol"?e:e+""}function wZe(n,e){if(Ow(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ow(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Xb(){return Xb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xb.apply(this,arguments)}function yae(n,e){if(n==null)return{};var t=_Ze(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function _Ze(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var xZe=function(e){var t=e.fill;if(!t||t==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return ye.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function $we(n,e){var t;if(ye.isValidElement(n))t=ye.cloneElement(n,e);else if(vr(n))t=n(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.key,l=yae(e,mZe),c=ei(l,!1);c.offset;var u=yae(c,vZe);t=ye.createElement("line",Xb({},u,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:s}))}return t}function SZe(n){var e=n.x,t=n.width,r=n.horizontal,i=r===void 0?!0:r,a=n.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=zs(zs({},n),{},{x1:e,y1:s,x2:e+t,y2:s,key:"line-".concat(l),index:l});return $we(i,c)});return ye.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function TZe(n){var e=n.y,t=n.height,r=n.vertical,i=r===void 0?!0:r,a=n.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=zs(zs({},n),{},{x1:s,y1:e,x2:s,y2:e+t,key:"line-".concat(l),index:l});return $we(i,c)});return ye.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function EZe(n){var e=n.horizontalFill,t=n.fillOpacity,r=n.x,i=n.y,a=n.width,o=n.height,s=n.horizontalPoints,l=n.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,f){return h-f});i!==u[0]&&u.unshift(0);var d=u.map(function(h,f){var m=!u[f+1],v=m?i+o-h:u[f+1]-h;if(v<=0)return null;var y=f%e.length;return ye.createElement("rect",{key:"react-".concat(f),y:h,x:r,height:v,width:a,stroke:"none",fill:e[y],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function AZe(n){var e=n.vertical,t=e===void 0?!0:e,r=n.verticalFill,i=n.fillOpacity,a=n.x,o=n.y,s=n.width,l=n.height,c=n.verticalPoints;if(!t||!r||!r.length)return null;var u=c.map(function(h){return Math.round(h+a-a)}).sort(function(h,f){return h-f});a!==u[0]&&u.unshift(0);var d=u.map(function(h,f){var m=!u[f+1],v=m?a+s-h:u[f+1]-h;if(v<=0)return null;var y=f%r.length;return ye.createElement("rect",{key:"react-".concat(f),x:h,y:o,width:v,height:l,stroke:"none",fill:r[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ye.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var CZe=function(e,t){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return Qbe(bW(zs(zs(zs({},TT.defaultProps),r),{},{ticks:ag(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,t)},DZe=function(e,t){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return Qbe(bW(zs(zs(zs({},TT.defaultProps),r),{},{ticks:ag(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,t)},jx={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function _W(n){var e,t,r,i,a,o,s=gW(),l=mW(),c=gXe(),u=zs(zs({},n),{},{stroke:(e=n.stroke)!==null&&e!==void 0?e:jx.stroke,fill:(t=n.fill)!==null&&t!==void 0?t:jx.fill,horizontal:(r=n.horizontal)!==null&&r!==void 0?r:jx.horizontal,horizontalFill:(i=n.horizontalFill)!==null&&i!==void 0?i:jx.horizontalFill,vertical:(a=n.vertical)!==null&&a!==void 0?a:jx.vertical,verticalFill:(o=n.verticalFill)!==null&&o!==void 0?o:jx.verticalFill,x:St(n.x)?n.x:c.left,y:St(n.y)?n.y:c.top,width:St(n.width)?n.width:c.width,height:St(n.height)?n.height:c.height}),d=u.x,h=u.y,f=u.width,m=u.height,v=u.syncWithTicks,y=u.horizontalValues,w=u.verticalValues,_=hXe(),S=fXe();if(!St(f)||f<=0||!St(m)||m<=0||!St(d)||d!==+d||!St(h)||h!==+h)return null;var A=u.verticalCoordinatesGenerator||CZe,C=u.horizontalCoordinatesGenerator||DZe,D=u.horizontalPoints,M=u.verticalPoints;if((!D||!D.length)&&vr(C)){var P=y&&y.length,O=C({yAxis:S?zs(zs({},S),{},{ticks:P?y:S.ticks}):void 0,width:s,height:l,offset:c},P?!0:v);gg(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ow(O),"]")),Array.isArray(O)&&(D=O)}if((!M||!M.length)&&vr(A)){var j=w&&w.length,L=A({xAxis:_?zs(zs({},_),{},{ticks:j?w:_.ticks}):void 0,width:s,height:l,offset:c},j?!0:v);gg(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ow(L),"]")),Array.isArray(L)&&(M=L)}return ye.createElement("g",{className:"recharts-cartesian-grid"},ye.createElement(xZe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ye.createElement(SZe,Xb({},u,{offset:c,horizontalPoints:D,xAxis:_,yAxis:S})),ye.createElement(TZe,Xb({},u,{offset:c,verticalPoints:M,xAxis:_,yAxis:S})),ye.createElement(EZe,Xb({},u,{horizontalPoints:D})),ye.createElement(AZe,Xb({},u,{verticalPoints:M})))}_W.displayName="CartesianGrid";function G1(n){"@babel/helpers - typeof";return G1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G1(n)}function kZe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function IZe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Vwe(r.key),r)}}function MZe(n,e,t){return e&&IZe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function PZe(n,e,t){return e=xN(e),OZe(n,Bwe()?Reflect.construct(e,t||[],xN(n).constructor):e.apply(n,t))}function OZe(n,e){if(e&&(G1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RZe(n)}function RZe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Bwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bwe=function(){return!!n})()}function xN(n){return xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xN(n)}function NZe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&H9(n,e)}function H9(n,e){return H9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},H9(n,e)}function Uwe(n,e,t){return e=Vwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vwe(n){var e=LZe(n,"string");return G1(e)=="symbol"?e:e+""}function LZe(n,e){if(G1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(G1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function q9(){return q9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},q9.apply(this,arguments)}function jZe(n){var e=n.xAxisId,t=gW(),r=mW(),i=Dwe(e);return i==null?null:ye.createElement(TT,q9({},i,{className:Gr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:r},ticksGenerator:function(o){return ag(o,!0)}}))}var e2=function(n){function e(){return kZe(this,e),PZe(this,e,arguments)}return NZe(e,n),MZe(e,[{key:"render",value:function(){return ye.createElement(jZe,this.props)}}])}(ye.Component);Uwe(e2,"displayName","XAxis");Uwe(e2,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function W1(n){"@babel/helpers - typeof";return W1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W1(n)}function FZe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ze(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,qwe(r.key),r)}}function BZe(n,e,t){return e&&$Ze(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function UZe(n,e,t){return e=SN(e),VZe(n,zwe()?Reflect.construct(e,t||[],SN(n).constructor):e.apply(n,t))}function VZe(n,e){if(e&&(W1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zZe(n)}function zZe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zwe=function(){return!!n})()}function SN(n){return SN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},SN(n)}function HZe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&G9(n,e)}function G9(n,e){return G9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},G9(n,e)}function Hwe(n,e,t){return e=qwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qwe(n){var e=qZe(n,"string");return W1(e)=="symbol"?e:e+""}function qZe(n,e){if(W1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(W1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function W9(){return W9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},W9.apply(this,arguments)}var GZe=function(e){var t=e.yAxisId,r=gW(),i=mW(),a=kwe(t);return a==null?null:ye.createElement(TT,W9({},a,{className:Gr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return ag(s,!0)}}))},t2=function(n){function e(){return FZe(this,e),UZe(this,e,arguments)}return HZe(e,n),BZe(e,[{key:"render",value:function(){return ye.createElement(GZe,this.props)}}])}(ye.Component);Hwe(t2,"displayName","YAxis");Hwe(t2,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function bae(n){return XZe(n)||KZe(n)||YZe(n)||WZe()}function WZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YZe(n,e){if(n){if(typeof n=="string")return Y9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y9(n,e)}}function KZe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function XZe(n){if(Array.isArray(n))return Y9(n)}function Y9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var K9=function(e,t,r,i,a){var o=rh(e,yW),s=rh(e,zj),l=[].concat(bae(o),bae(s)),c=rh(e,qj),u="".concat(i,"Id"),d=i[0],h=t;if(l.length&&(h=l.reduce(function(v,y){if(y.props[u]===r&&Af(y.props,"extendDomain")&&St(y.props[d])){var w=y.props[d];return[Math.min(v[0],w),Math.max(v[1],w)]}return v},h)),c.length){var f="".concat(d,"1"),m="".concat(d,"2");h=c.reduce(function(v,y){if(y.props[u]===r&&Af(y.props,"extendDomain")&&St(y.props[f])&&St(y.props[m])){var w=y.props[f],_=y.props[m];return[Math.min(v[0],w,_),Math.max(v[1],w,_)]}return v},h)}return a&&a.length&&(h=a.reduce(function(v,y){return St(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},h)),h},FB={exports:{}},wae;function ZZe(){return wae||(wae=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},s.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},s.prototype.emit=function(c,u,d,h,f,m){var v=t?t+c:c;if(!this._events[v])return!1;var y=this._events[v],w=arguments.length,_,S;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,m),!0}for(S=1,_=new Array(w-1);S<w;S++)_[S-1]=arguments[S];y.fn.apply(y.context,_)}else{var A=y.length,C;for(S=0;S<A;S++)switch(y[S].once&&this.removeListener(c,y[S].fn,void 0,!0),w){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,u);break;case 3:y[S].fn.call(y[S].context,u,d);break;case 4:y[S].fn.call(y[S].context,u,d,h);break;default:if(!_)for(C=1,_=new Array(w-1);C<w;C++)_[C-1]=arguments[C];y[S].fn.apply(y[S].context,_)}}return!0},s.prototype.on=function(c,u,d){return a(this,c,u,d,!1)},s.prototype.once=function(c,u,d){return a(this,c,u,d,!0)},s.prototype.removeListener=function(c,u,d,h){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&o(this,f);else{for(var v=0,y=[],w=m.length;v<w;v++)(m[v].fn!==u||h&&!m[v].once||d&&m[v].context!==d)&&y.push(m[v]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=t,s.EventEmitter=s,n.exports=s}(FB)),FB.exports}var QZe=ZZe();const JZe=Br(QZe);var $B=new JZe,BB="recharts.syncMouseEvents";function Fk(n){"@babel/helpers - typeof";return Fk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fk(n)}function eQe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function tQe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Gwe(r.key),r)}}function nQe(n,e,t){return e&&tQe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function UB(n,e,t){return e=Gwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gwe(n){var e=rQe(n,"string");return Fk(e)=="symbol"?e:e+""}function rQe(n,e){if(Fk(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Fk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var iQe=function(){function n(){eQe(this,n),UB(this,"activeIndex",0),UB(this,"coordinateList",[]),UB(this,"layout","horizontal")}return nQe(n,[{key:"setDetails",value:function(t){var r,i=t.coordinateList,a=i===void 0?null:i,o=t.container,s=o===void 0?null:o,l=t.layout,c=l===void 0?null:l,u=t.offset,d=u===void 0?null:u,h=t.mouseHandlerCallback,f=h===void 0?null:h;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=a+l+c,h=o+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function aQe(n,e,t){if(t==="number"&&e===!0&&Array.isArray(n)){var r=n==null?void 0:n[0],i=n==null?void 0:n[1];if(r&&i&&St(r)&&St(i))return!0}return!1}function oQe(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function Wwe(n){var e=n.cx,t=n.cy,r=n.radius,i=n.startAngle,a=n.endAngle,o=cs(e,t,r,i),s=cs(e,t,r,a);return{points:[o,s],cx:e,cy:t,radius:r,startAngle:i,endAngle:a}}function sQe(n,e,t){var r,i,a,o;if(n==="horizontal")r=e.x,a=r,i=t.top,o=t.top+t.height;else if(n==="vertical")i=e.y,o=i,r=t.left,a=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,h=cs(s,l,c,d),f=cs(s,l,u,d);r=h.x,i=h.y,a=f.x,o=f.y}else return Wwe(e);return[{x:r,y:i},{x:a,y:o}]}function $k(n){"@babel/helpers - typeof";return $k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$k(n)}function _ae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function HM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_ae(Object(t),!0).forEach(function(r){lQe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_ae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lQe(n,e,t){return e=cQe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cQe(n){var e=uQe(n,"string");return $k(e)=="symbol"?e:e+""}function uQe(n,e){if($k(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if($k(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function dQe(n){var e,t,r=n.element,i=n.tooltipEventType,a=n.isActive,o=n.activeCoordinate,s=n.activePayload,l=n.offset,c=n.activeTooltipIndex,u=n.tooltipAxisBandSize,d=n.layout,h=n.chartName,f=(e=r.props.cursor)!==null&&e!==void 0?e:(t=r.type.defaultProps)===null||t===void 0?void 0:t.cursor;if(!r||!f||!a||!o||h!=="ScatterChart"&&i!=="axis")return null;var m,v=Qre;if(h==="ScatterChart")m=o,v=xYe;else if(h==="BarChart")m=oQe(d,o,l,u),v=dW;else if(d==="radial"){var y=Wwe(o),w=y.cx,_=y.cy,S=y.radius,A=y.startAngle,C=y.endAngle;m={cx:w,cy:_,startAngle:A,endAngle:C,innerRadius:S,outerRadius:S},v=rwe}else m={points:sQe(d,o,l)},v=Qre;var D=HM(HM(HM(HM({stroke:"#ccc",pointerEvents:"none"},l),m),ei(f,!1)),{},{payload:s,payloadIndex:c,className:Gr("recharts-tooltip-cursor",f.className)});return K.isValidElement(f)?K.cloneElement(f,D):K.createElement(v,D)}var hQe=["item"],fQe=["children","className","width","height","style","compact","title","desc"];function Y1(n){"@babel/helpers - typeof";return Y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y1(n)}function $S(){return $S=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$S.apply(this,arguments)}function xae(n,e){return mQe(n)||gQe(n,e)||Kwe(n,e)||pQe()}function pQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gQe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function mQe(n){if(Array.isArray(n))return n}function Sae(n,e){if(n==null)return{};var t=vQe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function vQe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function yQe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function bQe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Xwe(r.key),r)}}function wQe(n,e,t){return e&&bQe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function _Qe(n,e,t){return e=TN(e),xQe(n,Ywe()?Reflect.construct(e,t||[],TN(n).constructor):e.apply(n,t))}function xQe(n,e){if(e&&(Y1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SQe(n)}function SQe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ywe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ywe=function(){return!!n})()}function TN(n){return TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},TN(n)}function TQe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&X9(n,e)}function X9(n,e){return X9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},X9(n,e)}function K1(n){return CQe(n)||AQe(n)||Kwe(n)||EQe()}function EQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kwe(n,e){if(n){if(typeof n=="string")return Z9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Z9(n,e)}}function AQe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function CQe(n){if(Array.isArray(n))return Z9(n)}function Z9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Tae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function He(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tae(Object(t),!0).forEach(function(r){En(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function En(n,e,t){return e=Xwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xwe(n){var e=DQe(n,"string");return Y1(e)=="symbol"?e:e+""}function DQe(n,e){if(Y1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Y1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var kQe={xAxis:["bottom","top"],yAxis:["left","right"]},IQe={width:"100%",height:"100%"},Zwe={x:0,y:0};function qM(n){return n}var MQe=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},PQe=function(e,t,r,i){var a=t.find(function(u){return u&&u.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,s=i.radius;return He(He(He({},i),cs(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,c=i.angle;return He(He(He({},i),cs(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return Zwe},Gj=function(e,t){var r=t.graphicalItems,i=t.dataStartIndex,a=t.dataEndIndex,o=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(K1(s),K1(c)):s},[]);return o.length>0?o:e&&e.length&&St(i)&&St(a)?e.slice(i,a+1):[]};function Qwe(n){return n==="number"?[0,"auto"]:void 0}var Q9=function(e,t,r,i){var a=e.graphicalItems,o=e.tooltipAxis,s=Gj(t,e);return r<0||!a||!a.length||r>=s.length?null:a.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:t;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var f=d===void 0?s:d;h=Fz(f,o.dataKey,i)}else h=d&&d[r]||s[r];return h?[].concat(K1(l),[ewe(c,h)]):l},[])},Eae=function(e,t,r,i){var a=i||{x:e.chartX,y:e.chartY},o=MQe(a,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=a7e(o,s,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,h=Q9(e,t,u,d),f=PQe(r,s,u,a);return{activeTooltipIndex:u,activeLabel:d,activePayload:h,activeCoordinate:f}}return null},OQe=function(e,t){var r=t.axes,i=t.graphicalItems,a=t.axisType,o=t.axisIdKey,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.layout,d=e.children,h=e.stackOffset,f=Zbe(u,a);return r.reduce(function(m,v){var y,w=v.type.defaultProps!==void 0?He(He({},v.type.defaultProps),v.props):v.props,_=w.type,S=w.dataKey,A=w.allowDataOverflow,C=w.allowDuplicatedCategory,D=w.scale,M=w.ticks,P=w.includeHidden,O=w[o];if(m[O])return m;var j=Gj(e.data,{graphicalItems:i.filter(function(le){var ee,be=o in le.props?le.props[o]:(ee=le.type.defaultProps)===null||ee===void 0?void 0:ee[o];return be===O}),dataStartIndex:l,dataEndIndex:c}),L=j.length,B,$,Y;aQe(w.domain,A,_)&&(B=y9(w.domain,null,A),f&&(_==="number"||D!=="auto")&&(Y=dD(j,S,"category")));var q=Qwe(_);if(!B||B.length===0){var W,X=(W=w.domain)!==null&&W!==void 0?W:q;if(S){if(B=dD(j,S,_),_==="category"&&f){var te=ZBe(B);C&&te?($=B,B=hN(0,L)):C||(B=Fre(X,B,v).reduce(function(le,ee){return le.indexOf(ee)>=0?le:[].concat(K1(le),[ee])},[]))}else if(_==="category")C?B=B.filter(function(le){return le!==""&&!ui(le)}):B=Fre(X,B,v).reduce(function(le,ee){return le.indexOf(ee)>=0||ee===""||ui(ee)?le:[].concat(K1(le),[ee])},[]);else if(_==="number"){var re=u7e(j,i.filter(function(le){var ee,be,he=o in le.props?le.props[o]:(ee=le.type.defaultProps)===null||ee===void 0?void 0:ee[o],pe="hide"in le.props?le.props.hide:(be=le.type.defaultProps)===null||be===void 0?void 0:be.hide;return he===O&&(P||!pe)}),S,a,u);re&&(B=re)}f&&(_==="number"||D!=="auto")&&(Y=dD(j,S,"category"))}else f?B=hN(0,L):s&&s[O]&&s[O].hasStack&&_==="number"?B=h==="expand"?[0,1]:Jbe(s[O].stackGroups,l,c):B=Xbe(j,i.filter(function(le){var ee=o in le.props?le.props[o]:le.type.defaultProps[o],be="hide"in le.props?le.props.hide:le.type.defaultProps.hide;return ee===O&&(P||!be)}),_,u,!0);if(_==="number")B=K9(d,B,O,a,M),X&&(B=y9(X,B,A));else if(_==="category"&&X){var z=X,oe=B.every(function(le){return z.indexOf(le)>=0});oe&&(B=z)}}return He(He({},m),{},En({},O,He(He({},w),{},{axisType:a,domain:B,categoricalDomain:Y,duplicateDomain:$,originalDomain:(y=w.domain)!==null&&y!==void 0?y:q,isCategorical:f,layout:u})))},{})},RQe=function(e,t){var r=t.graphicalItems,i=t.Axis,a=t.axisType,o=t.axisIdKey,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.layout,d=e.children,h=Gj(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),f=h.length,m=Zbe(u,a),v=-1;return r.reduce(function(y,w){var _=w.type.defaultProps!==void 0?He(He({},w.type.defaultProps),w.props):w.props,S=_[o],A=Qwe("number");if(!y[S]){v++;var C;return m?C=hN(0,f):s&&s[S]&&s[S].hasStack?(C=Jbe(s[S].stackGroups,l,c),C=K9(d,C,S,a)):(C=y9(A,Xbe(h,r.filter(function(D){var M,P,O=o in D.props?D.props[o]:(M=D.type.defaultProps)===null||M===void 0?void 0:M[o],j="hide"in D.props?D.props.hide:(P=D.type.defaultProps)===null||P===void 0?void 0:P.hide;return O===S&&!j}),"number",u),i.defaultProps.allowDataOverflow),C=K9(d,C,S,a)),He(He({},y),{},En({},S,He(He({axisType:a},i.defaultProps),{},{hide:!0,orientation:Wu(kQe,"".concat(a,".").concat(v%2),null),domain:C,originalDomain:A,isCategorical:m,layout:u})))}return y},{})},NQe=function(e,t){var r=t.axisType,i=r===void 0?"xAxis":r,a=t.AxisComp,o=t.graphicalItems,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.children,d="".concat(i,"Id"),h=rh(u,a),f={};return h&&h.length?f=OQe(e,{axes:h,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(f=RQe(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),f},LQe=function(e){var t=Pv(e),r=ag(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:jG(r,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:rN(t,r)}},Aae=function(e){var t=e.children,r=e.defaultShowTooltip,i=Lc(t,B1),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},jQe=function(e){return!e||!e.length?!1:e.some(function(t){var r=pg(t&&t.type);return r&&r.indexOf("Bar")>=0})},Cae=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},FQe=function(e,t){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,u=r.height,d=r.children,h=r.margin||{},f=Lc(d,B1),m=Lc(d,e1),v=Object.keys(l).reduce(function(C,D){var M=l[D],P=M.orientation;return!M.mirror&&!M.hide?He(He({},C),{},En({},P,C[P]+M.width)):C},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(C,D){var M=o[D],P=M.orientation;return!M.mirror&&!M.hide?He(He({},C),{},En({},P,Wu(C,"".concat(P))+M.height)):C},{top:h.top||0,bottom:h.bottom||0}),w=He(He({},y),v),_=w.bottom;f&&(w.bottom+=f.props.height||B1.defaultProps.height),m&&t&&(w=l7e(w,i,r,t));var S=c-w.left-w.right,A=u-w.top-w.bottom;return He(He({brushBottom:_},w),{},{width:Math.max(S,0),height:Math.max(A,0)})},$Qe=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},BQe=function(e){var t=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(w,_){var S=_.graphicalItems,A=_.stackGroups,C=_.offset,D=_.updateId,M=_.dataStartIndex,P=_.dataEndIndex,O=w.barSize,j=w.layout,L=w.barGap,B=w.barCategoryGap,$=w.maxBarSize,Y=Cae(j),q=Y.numericAxisName,W=Y.cateAxisName,X=jQe(S),te=[];return S.forEach(function(re,z){var oe=Gj(w.data,{graphicalItems:[re],dataStartIndex:M,dataEndIndex:P}),le=re.type.defaultProps!==void 0?He(He({},re.type.defaultProps),re.props):re.props,ee=le.dataKey,be=le.maxBarSize,he=le["".concat(q,"Id")],pe=le["".concat(W,"Id")],ct={},Be=l.reduce(function(nr,Le){var Yt=_["".concat(Le.axisType,"Map")],xn=le["".concat(Le.axisType,"Id")];Yt&&Yt[xn]||Le.axisType==="zAxis"||Pw();var Ut=Yt[xn];return He(He({},nr),{},En(En({},Le.axisType,Ut),"".concat(Le.axisType,"Ticks"),ag(Ut)))},ct),Se=Be[W],_e=Be["".concat(W,"Ticks")],me=A&&A[he]&&A[he].hasStack&&x7e(re,A[he].stackGroups),fe=pg(re.type).indexOf("Bar")>=0,Ge=rN(Se,_e),Ve=[],nt=X&&o7e({barSize:O,stackGroups:A,totalSize:$Qe(Be,W)});if(fe){var we,rt,on=ui(be)?$:be,Mt=(we=(rt=rN(Se,_e,!0))!==null&&rt!==void 0?rt:on)!==null&&we!==void 0?we:0;Ve=s7e({barGap:L,barCategoryGap:B,bandSize:Mt!==Ge?Mt:Ge,sizeList:nt[pe],maxBarSize:on}),Mt!==Ge&&(Ve=Ve.map(function(nr){return He(He({},nr),{},{position:He(He({},nr.position),{},{offset:nr.position.offset-Mt/2})})}))}var kn=re&&re.type&&re.type.getComposedData;kn&&te.push({props:He(He({},kn(He(He({},Be),{},{displayedData:oe,props:w,dataKey:ee,item:re,bandSize:Ge,barPosition:Ve,offset:C,stackedData:me,layout:j,dataStartIndex:M,dataEndIndex:P}))),{},En(En(En({key:re.key||"item-".concat(z)},q,Be[q]),W,Be[W]),"animationId",D)),childIndex:cUe(re,w.children),item:re})}),te},f=function(w,_){var S=w.props,A=w.dataStartIndex,C=w.dataEndIndex,D=w.updateId;if(!JJ({props:S}))return null;var M=S.children,P=S.layout,O=S.stackOffset,j=S.data,L=S.reverseStackOrder,B=Cae(P),$=B.numericAxisName,Y=B.cateAxisName,q=rh(M,r),W=b7e(j,q,"".concat($,"Id"),"".concat(Y,"Id"),O,L),X=l.reduce(function(le,ee){var be="".concat(ee.axisType,"Map");return He(He({},le),{},En({},be,NQe(S,He(He({},ee),{},{graphicalItems:q,stackGroups:ee.axisType===$&&W,dataStartIndex:A,dataEndIndex:C}))))},{}),te=FQe(He(He({},X),{},{props:S,graphicalItems:q}),_==null?void 0:_.legendBBox);Object.keys(X).forEach(function(le){X[le]=u(S,X[le],te,le.replace("Map",""),t)});var re=X["".concat(Y,"Map")],z=LQe(re),oe=h(S,He(He({},X),{},{dataStartIndex:A,dataEndIndex:C,updateId:D,graphicalItems:q,stackGroups:W,offset:te}));return He(He({formattedGraphicalItems:oe,graphicalItems:q,offset:te,stackGroups:W},z),X)},m=function(y){function w(_){var S,A,C;return yQe(this,w),C=_Qe(this,w,[_]),En(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),En(C,"accessibilityManager",new iQe),En(C,"handleLegendBBoxUpdate",function(D){if(D){var M=C.state,P=M.dataStartIndex,O=M.dataEndIndex,j=M.updateId;C.setState(He({legendBBox:D},f({props:C.props,dataStartIndex:P,dataEndIndex:O,updateId:j},He(He({},C.state),{},{legendBBox:D}))))}}),En(C,"handleReceiveSyncEvent",function(D,M,P){if(C.props.syncId===D){if(P===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(M)}}),En(C,"handleBrushChange",function(D){var M=D.startIndex,P=D.endIndex;if(M!==C.state.dataStartIndex||P!==C.state.dataEndIndex){var O=C.state.updateId;C.setState(function(){return He({dataStartIndex:M,dataEndIndex:P},f({props:C.props,dataStartIndex:M,dataEndIndex:P,updateId:O},C.state))}),C.triggerSyncEvent({dataStartIndex:M,dataEndIndex:P})}}),En(C,"handleMouseEnter",function(D){var M=C.getMouseInfo(D);if(M){var P=He(He({},M),{},{isTooltipActive:!0});C.setState(P),C.triggerSyncEvent(P);var O=C.props.onMouseEnter;vr(O)&&O(P,D)}}),En(C,"triggeredAfterMouseMove",function(D){var M=C.getMouseInfo(D),P=M?He(He({},M),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(P),C.triggerSyncEvent(P);var O=C.props.onMouseMove;vr(O)&&O(P,D)}),En(C,"handleItemMouseEnter",function(D){C.setState(function(){return{isTooltipActive:!0,activeItem:D,activePayload:D.tooltipPayload,activeCoordinate:D.tooltipPosition||{x:D.cx,y:D.cy}}})}),En(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),En(C,"handleMouseMove",function(D){D.persist(),C.throttleTriggeredAfterMouseMove(D)}),En(C,"handleMouseLeave",function(D){C.throttleTriggeredAfterMouseMove.cancel();var M={isTooltipActive:!1};C.setState(M),C.triggerSyncEvent(M);var P=C.props.onMouseLeave;vr(P)&&P(M,D)}),En(C,"handleOuterEvent",function(D){var M=lUe(D),P=Wu(C.props,"".concat(M));if(M&&vr(P)){var O,j;/.*touch.*/i.test(M)?j=C.getMouseInfo(D.changedTouches[0]):j=C.getMouseInfo(D),P((O=j)!==null&&O!==void 0?O:{},D)}}),En(C,"handleClick",function(D){var M=C.getMouseInfo(D);if(M){var P=He(He({},M),{},{isTooltipActive:!0});C.setState(P),C.triggerSyncEvent(P);var O=C.props.onClick;vr(O)&&O(P,D)}}),En(C,"handleMouseDown",function(D){var M=C.props.onMouseDown;if(vr(M)){var P=C.getMouseInfo(D);M(P,D)}}),En(C,"handleMouseUp",function(D){var M=C.props.onMouseUp;if(vr(M)){var P=C.getMouseInfo(D);M(P,D)}}),En(C,"handleTouchMove",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(D.changedTouches[0])}),En(C,"handleTouchStart",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&C.handleMouseDown(D.changedTouches[0])}),En(C,"handleTouchEnd",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&C.handleMouseUp(D.changedTouches[0])}),En(C,"handleDoubleClick",function(D){var M=C.props.onDoubleClick;if(vr(M)){var P=C.getMouseInfo(D);M(P,D)}}),En(C,"handleContextMenu",function(D){var M=C.props.onContextMenu;if(vr(M)){var P=C.getMouseInfo(D);M(P,D)}}),En(C,"triggerSyncEvent",function(D){C.props.syncId!==void 0&&$B.emit(BB,C.props.syncId,D,C.eventEmitterSymbol)}),En(C,"applySyncEvent",function(D){var M=C.props,P=M.layout,O=M.syncMethod,j=C.state.updateId,L=D.dataStartIndex,B=D.dataEndIndex;if(D.dataStartIndex!==void 0||D.dataEndIndex!==void 0)C.setState(He({dataStartIndex:L,dataEndIndex:B},f({props:C.props,dataStartIndex:L,dataEndIndex:B,updateId:j},C.state)));else if(D.activeTooltipIndex!==void 0){var $=D.chartX,Y=D.chartY,q=D.activeTooltipIndex,W=C.state,X=W.offset,te=W.tooltipTicks;if(!X)return;if(typeof O=="function")q=O(te,D);else if(O==="value"){q=-1;for(var re=0;re<te.length;re++)if(te[re].value===D.activeLabel){q=re;break}}var z=He(He({},X),{},{x:X.left,y:X.top}),oe=Math.min($,z.x+z.width),le=Math.min(Y,z.y+z.height),ee=te[q]&&te[q].value,be=Q9(C.state,C.props.data,q),he=te[q]?{x:P==="horizontal"?te[q].coordinate:oe,y:P==="horizontal"?le:te[q].coordinate}:Zwe;C.setState(He(He({},D),{},{activeLabel:ee,activeCoordinate:he,activePayload:be,activeTooltipIndex:q}))}else C.setState(D)}),En(C,"renderCursor",function(D){var M,P=C.state,O=P.isTooltipActive,j=P.activeCoordinate,L=P.activePayload,B=P.offset,$=P.activeTooltipIndex,Y=P.tooltipAxisBandSize,q=C.getTooltipEventType(),W=(M=D.props.active)!==null&&M!==void 0?M:O,X=C.props.layout,te=D.key||"_recharts-cursor";return ye.createElement(dQe,{key:te,activeCoordinate:j,activePayload:L,activeTooltipIndex:$,chartName:t,element:D,isActive:W,layout:X,offset:B,tooltipAxisBandSize:Y,tooltipEventType:q})}),En(C,"renderPolarAxis",function(D,M,P){var O=Wu(D,"type.axisType"),j=Wu(C.state,"".concat(O,"Map")),L=D.type.defaultProps,B=L!==void 0?He(He({},L),D.props):D.props,$=j&&j[B["".concat(O,"Id")]];return K.cloneElement(D,He(He({},$),{},{className:Gr(O,$.className),key:D.key||"".concat(M,"-").concat(P),ticks:ag($,!0)}))}),En(C,"renderPolarGrid",function(D){var M=D.props,P=M.radialLines,O=M.polarAngles,j=M.polarRadius,L=C.state,B=L.radiusAxisMap,$=L.angleAxisMap,Y=Pv(B),q=Pv($),W=q.cx,X=q.cy,te=q.innerRadius,re=q.outerRadius;return K.cloneElement(D,{polarAngles:Array.isArray(O)?O:ag(q,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(j)?j:ag(Y,!0).map(function(z){return z.coordinate}),cx:W,cy:X,innerRadius:te,outerRadius:re,key:D.key||"polar-grid",radialLines:P})}),En(C,"renderLegend",function(){var D=C.state.formattedGraphicalItems,M=C.props,P=M.children,O=M.width,j=M.height,L=C.props.margin||{},B=O-(L.left||0)-(L.right||0),$=Ybe({children:P,formattedGraphicalItems:D,legendWidth:B,legendContent:c});if(!$)return null;var Y=$.item,q=Sae($,hQe);return K.cloneElement(Y,He(He({},q),{},{chartWidth:O,chartHeight:j,margin:L,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),En(C,"renderTooltip",function(){var D,M=C.props,P=M.children,O=M.accessibilityLayer,j=Lc(P,Wd);if(!j)return null;var L=C.state,B=L.isTooltipActive,$=L.activeCoordinate,Y=L.activePayload,q=L.activeLabel,W=L.offset,X=(D=j.props.active)!==null&&D!==void 0?D:B;return K.cloneElement(j,{viewBox:He(He({},W),{},{x:W.left,y:W.top}),active:X,label:q,payload:X?Y:[],coordinate:$,accessibilityLayer:O})}),En(C,"renderBrush",function(D){var M=C.props,P=M.margin,O=M.data,j=C.state,L=j.offset,B=j.dataStartIndex,$=j.dataEndIndex,Y=j.updateId;return K.cloneElement(D,{key:D.key||"_recharts-brush",onChange:BM(C.handleBrushChange,D.props.onChange),data:O,x:St(D.props.x)?D.props.x:L.left,y:St(D.props.y)?D.props.y:L.top+L.height+L.brushBottom-(P.bottom||0),width:St(D.props.width)?D.props.width:L.width,startIndex:B,endIndex:$,updateId:"brush-".concat(Y)})}),En(C,"renderReferenceElement",function(D,M,P){if(!D)return null;var O=C,j=O.clipPathId,L=C.state,B=L.xAxisMap,$=L.yAxisMap,Y=L.offset,q=D.type.defaultProps||{},W=D.props,X=W.xAxisId,te=X===void 0?q.xAxisId:X,re=W.yAxisId,z=re===void 0?q.yAxisId:re;return K.cloneElement(D,{key:D.key||"".concat(M,"-").concat(P),xAxis:B[te],yAxis:$[z],viewBox:{x:Y.left,y:Y.top,width:Y.width,height:Y.height},clipPathId:j})}),En(C,"renderActivePoints",function(D){var M=D.item,P=D.activePoint,O=D.basePoint,j=D.childIndex,L=D.isRange,B=[],$=M.props.key,Y=M.item.type.defaultProps!==void 0?He(He({},M.item.type.defaultProps),M.item.props):M.item.props,q=Y.activeDot,W=Y.dataKey,X=He(He({index:j,dataKey:W,cx:P.x,cy:P.y,r:4,fill:uW(M.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},ei(q,!1)),MR(q));return B.push(w.renderActiveDot(q,X,"".concat($,"-activePoint-").concat(j))),O?B.push(w.renderActiveDot(q,He(He({},X),{},{cx:O.x,cy:O.y}),"".concat($,"-basePoint-").concat(j))):L&&B.push(null),B}),En(C,"renderGraphicChild",function(D,M,P){var O=C.filterFormatItem(D,M,P);if(!O)return null;var j=C.getTooltipEventType(),L=C.state,B=L.isTooltipActive,$=L.tooltipAxis,Y=L.activeTooltipIndex,q=L.activeLabel,W=C.props.children,X=Lc(W,Wd),te=O.props,re=te.points,z=te.isRange,oe=te.baseLine,le=O.item.type.defaultProps!==void 0?He(He({},O.item.type.defaultProps),O.item.props):O.item.props,ee=le.activeDot,be=le.hide,he=le.activeBar,pe=le.activeShape,ct=!!(!be&&B&&X&&(ee||he||pe)),Be={};j!=="axis"&&X&&X.props.trigger==="click"?Be={onClick:BM(C.handleItemMouseEnter,D.props.onClick)}:j!=="axis"&&(Be={onMouseLeave:BM(C.handleItemMouseLeave,D.props.onMouseLeave),onMouseEnter:BM(C.handleItemMouseEnter,D.props.onMouseEnter)});var Se=K.cloneElement(D,He(He({},O.props),Be));function _e(Le){return typeof $.dataKey=="function"?$.dataKey(Le.payload):null}if(ct)if(Y>=0){var me,fe;if($.dataKey&&!$.allowDuplicatedCategory){var Ge=typeof $.dataKey=="function"?_e:"payload.".concat($.dataKey.toString());me=Fz(re,Ge,q),fe=z&&oe&&Fz(oe,Ge,q)}else me=re==null?void 0:re[Y],fe=z&&oe&&oe[Y];if(pe||he){var Ve=D.props.activeIndex!==void 0?D.props.activeIndex:Y;return[K.cloneElement(D,He(He(He({},O.props),Be),{},{activeIndex:Ve})),null,null]}if(!ui(me))return[Se].concat(K1(C.renderActivePoints({item:O,activePoint:me,basePoint:fe,childIndex:Y,isRange:z})))}else{var nt,we=(nt=C.getItemByXY(C.state.activeCoordinate))!==null&&nt!==void 0?nt:{graphicalItem:Se},rt=we.graphicalItem,on=rt.item,Mt=on===void 0?D:on,kn=rt.childIndex,nr=He(He(He({},O.props),Be),{},{activeIndex:kn});return[K.cloneElement(Mt,nr),null,null]}return z?[Se,null,null]:[Se,null]}),En(C,"renderCustomized",function(D,M,P){return K.cloneElement(D,He(He({key:"recharts-customized-".concat(P)},C.props),C.state))}),En(C,"renderMap",{CartesianGrid:{handler:qM,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:qM},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:qM},YAxis:{handler:qM},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((S=_.id)!==null&&S!==void 0?S:bj("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=W0e(C.triggeredAfterMouseMove,(A=_.throttleDelay)!==null&&A!==void 0?A:1e3/60),C.state={},C}return TQe(w,y),wQe(w,[{key:"componentDidMount",value:function(){var S,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,A=S.children,C=S.data,D=S.height,M=S.layout,P=Lc(A,Wd);if(P){var O=P.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var j=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,L=Q9(this.state,C,O,j),B=this.state.tooltipTicks[O].coordinate,$=(this.state.offset.top+D)/2,Y=M==="horizontal",q=Y?{x:B,y:$}:{y:B,x:$},W=this.state.formattedGraphicalItems.find(function(te){var re=te.item;return re.type.name==="Scatter"});W&&(q=He(He({},q),W.props.points[O].tooltipPosition),L=W.props.points[O].tooltipPayload);var X={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:j,activePayload:L,activeCoordinate:q};this.setState(X),this.renderCursor(P),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var C,D;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(D=this.props.margin.top)!==null&&D!==void 0?D:0}})}return null}},{key:"componentDidUpdate",value:function(S){Bz([Lc(S.children,Wd)],[Lc(this.props.children,Wd)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=Lc(this.props.children,Wd);if(S&&typeof S.props.shared=="boolean"){var A=S.props.shared?"axis":"item";return s.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var A=this.container,C=A.getBoundingClientRect(),D=Kze(C),M={chartX:Math.round(S.pageX-D.left),chartY:Math.round(S.pageY-D.top)},P=C.width/A.offsetWidth||1,O=this.inRange(M.chartX,M.chartY,P);if(!O)return null;var j=this.state,L=j.xAxisMap,B=j.yAxisMap,$=this.getTooltipEventType(),Y=Eae(this.state,this.props.data,this.props.layout,O);if($!=="axis"&&L&&B){var q=Pv(L).scale,W=Pv(B).scale,X=q&&q.invert?q.invert(M.chartX):null,te=W&&W.invert?W.invert(M.chartY):null;return He(He({},M),{},{xValue:X,yValue:te},Y)}return Y?He(He({},M),Y):null}},{key:"inRange",value:function(S,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,D=this.props.layout,M=S/C,P=A/C;if(D==="horizontal"||D==="vertical"){var O=this.state.offset,j=M>=O.left&&M<=O.left+O.width&&P>=O.top&&P<=O.top+O.height;return j?{x:M,y:P}:null}var L=this.state,B=L.angleAxisMap,$=L.radiusAxisMap;if(B&&$){var Y=Pv(B);return Ure({x:M,y:P},Y)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,A=this.getTooltipEventType(),C=Lc(S,Wd),D={};C&&A==="axis"&&(C.props.trigger==="click"?D={onClick:this.handleClick}:D={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var M=MR(this.props,this.handleOuterEvent);return He(He({},M),D)}},{key:"addListener",value:function(){$B.on(BB,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){$B.removeListener(BB,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,A,C){for(var D=this.state.formattedGraphicalItems,M=0,P=D.length;M<P;M++){var O=D[M];if(O.item===S||O.props.key===S.key||A===pg(O.item.type)&&C===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,A=this.state.offset,C=A.left,D=A.top,M=A.height,P=A.width;return ye.createElement("defs",null,ye.createElement("clipPath",{id:S},ye.createElement("rect",{x:C,y:D,height:M,width:P})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(A,C){var D=xae(C,2),M=D[0],P=D[1];return He(He({},A),{},En({},M,P.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(A,C){var D=xae(C,2),M=D[0],P=D[1];return He(He({},A),{},En({},M,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[S])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(S){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[S])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(S){var A=this.state,C=A.formattedGraphicalItems,D=A.activeItem;if(C&&C.length)for(var M=0,P=C.length;M<P;M++){var O=C[M],j=O.props,L=O.item,B=L.type.defaultProps!==void 0?He(He({},L.type.defaultProps),L.props):L.props,$=pg(L.type);if($==="Bar"){var Y=(j.data||[]).find(function(te){return hYe(S,te)});if(Y)return{graphicalItem:O,payload:Y}}else if($==="RadialBar"){var q=(j.data||[]).find(function(te){return Ure(S,te)});if(q)return{graphicalItem:O,payload:q}}else if($j(O,D)||Bj(O,D)||Ok(O,D)){var W=nKe({graphicalItem:O,activeTooltipItem:D,itemData:B.data}),X=B.activeIndex===void 0?W:B.activeIndex;return{graphicalItem:He(He({},O),{},{childIndex:X}),payload:Ok(O,D)?B.data[W]:O.props.data[W]}}}return null}},{key:"render",value:function(){var S=this;if(!JJ(this))return null;var A=this.props,C=A.children,D=A.className,M=A.width,P=A.height,O=A.style,j=A.compact,L=A.title,B=A.desc,$=Sae(A,fQe),Y=ei($,!1);if(j)return ye.createElement(oae,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement(Vz,$S({},Y,{width:M,height:P,title:L,desc:B}),this.renderClipPath(),tee(C,this.renderMap)));if(this.props.accessibilityLayer){var q,W;Y.tabIndex=(q=this.props.tabIndex)!==null&&q!==void 0?q:0,Y.role=(W=this.props.role)!==null&&W!==void 0?W:"application",Y.onKeyDown=function(te){S.accessibilityManager.keyboardEvent(te)},Y.onFocus=function(){S.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return ye.createElement(oae,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ye.createElement("div",$S({className:Gr("recharts-wrapper",D),style:He({position:"relative",cursor:"default",width:M,height:P},O)},X,{ref:function(re){S.container=re}}),ye.createElement(Vz,$S({},Y,{width:M,height:P,title:L,desc:B,style:IQe}),this.renderClipPath(),tee(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(K.Component);En(m,"displayName",t),En(m,"defaultProps",He({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),En(m,"getDerivedStateFromProps",function(y,w){var _=y.dataKey,S=y.data,A=y.children,C=y.width,D=y.height,M=y.layout,P=y.stackOffset,O=y.margin,j=w.dataStartIndex,L=w.dataEndIndex;if(w.updateId===void 0){var B=Aae(y);return He(He(He({},B),{},{updateId:0},f(He(He({props:y},B),{},{updateId:0}),w)),{},{prevDataKey:_,prevData:S,prevWidth:C,prevHeight:D,prevLayout:M,prevStackOffset:P,prevMargin:O,prevChildren:A})}if(_!==w.prevDataKey||S!==w.prevData||C!==w.prevWidth||D!==w.prevHeight||M!==w.prevLayout||P!==w.prevStackOffset||!JS(O,w.prevMargin)){var $=Aae(y),Y={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},q=He(He({},Eae(w,S,M)),{},{updateId:w.updateId+1}),W=He(He(He({},$),Y),q);return He(He(He({},W),f(He({props:y},W),w)),{},{prevDataKey:_,prevData:S,prevWidth:C,prevHeight:D,prevLayout:M,prevStackOffset:P,prevMargin:O,prevChildren:A})}if(!Bz(A,w.prevChildren)){var X,te,re,z,oe=Lc(A,B1),le=oe&&(X=(te=oe.props)===null||te===void 0?void 0:te.startIndex)!==null&&X!==void 0?X:j,ee=oe&&(re=(z=oe.props)===null||z===void 0?void 0:z.endIndex)!==null&&re!==void 0?re:L,be=le!==j||ee!==L,he=!ui(S),pe=he&&!be?w.updateId:w.updateId+1;return He(He({updateId:pe},f(He(He({props:y},w),{},{updateId:pe,dataStartIndex:le,dataEndIndex:ee}),w)),{},{prevChildren:A,dataStartIndex:le,dataEndIndex:ee})}return null}),En(m,"renderActiveDot",function(y,w,_){var S;return K.isValidElement(y)?S=K.cloneElement(y,w):vr(y)?S=y(w):S=ye.createElement(dwe,w),ye.createElement(zo,{className:"recharts-active-dot",key:_},S)});var v=K.forwardRef(function(w,_){return ye.createElement(m,$S({},w,{ref:_}))});return v.displayName=m.displayName,v},Jwe=BQe({chartName:"BarChart",GraphicalChild:Cy,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:e2},{axisType:"yAxis",AxisComp:t2}],formatAxisMap:QKe});const UQe=ye.memo(()=>{const{workSessions:n,selectedRange:e}=qg(),{projects:t,tasks:r}=rn(),i=K.useMemo(()=>{var C,D;if(console.log("TopProjects - Filtering work sessions:",{totalSessions:n.length,rangeType:e.rangeType,startDate:(C=e.startDate)==null?void 0:C.toISOString(),endDate:(D=e.endDate)==null?void 0:D.toISOString()}),e.rangeType==="all time")return console.log('TopProjects - Using all sessions for "all time"'),n;if(!e.startDate||!e.endDate)return console.log("TopProjects - No date range specified, using all sessions"),n;const _=new Date(e.startDate);_.setHours(0,0,0,0);const S=new Date(e.endDate);S.setHours(23,59,59,999);const A=n.filter(M=>{const P=new Date(M.date);return P>=_&&P<=S});return console.log("TopProjects - Filtered result:",{originalCount:n.length,filteredCount:A.length,sampleFiltered:A.slice(0,3)}),A},[n,e]),a=K.useMemo(()=>{const _=new Map;return i.filter(S=>S.sessionType==="pomodoro"||S.sessionType==="manual").forEach(S=>{const A=S.duration||0,C=_.get(S.projectId)||0;_.set(S.projectId,C+A)}),t.map(S=>({id:S.id,userId:S.userId,name:S.name,color:S.color||"#3B82F6",totalFocusTime:_.get(S.id)||0,createdAt:new Date,isActive:!0})).filter(S=>S.totalFocusTime>0).sort((S,A)=>A.totalFocusTime-S.totalFocusTime)},[t,i]),o=a.slice(0,9),s=a.slice(9),l=s.reduce((_,S)=>_+S.totalFocusTime,0),c=[...o.map(_=>({name:"",fullName:_.name,value:_.totalFocusTime,color:_.color}))];s.length>0&&l>0&&c.push({name:"",fullName:"Others",value:l,color:"#969696"});const u=Math.max(...c.map(_=>_.value)),h=(_=>_<=300?60:_<=600?120:_<=1200?240:Math.ceil(_/6/60)*60)(u),f=Math.ceil(u/h)*h,m=Array.from({length:Math.floor(f/h)+1},(_,S)=>S*h),v=({active:_,payload:S,label:A})=>{if(_&&S&&S.length){const C=S[0].payload;return E.jsxs("div",{className:"bg-background-secondary border border-border rounded-lg shadow-lg p-3",children:[E.jsx("p",{className:"text-text-primary font-medium text-sm mb-1",children:C.fullName}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:C.color}}),E.jsx("span",{className:"text-text-secondary text-sm",children:Kv(C.value)})]})]})}return null},y=()=>E.jsx("div",{className:"flex flex-wrap gap-x-8 gap-y-2 mt-4 px-4",children:c.map((_,S)=>E.jsxs("div",{className:"flex items-center min-w-0 max-w-[200px]",children:[E.jsx("div",{className:"w-3 h-3 rounded-sm mr-2 flex-shrink-0",style:{backgroundColor:_.color}}),E.jsx("span",{className:"text-xs text-text-secondary overflow-hidden text-ellipsis whitespace-nowrap flex-1",title:_.fullName,children:_.fullName})]},S))}),w=_=>{const{x:S,y:A,value:C,width:D}=_;let M="";if(C<60)M=`${C}m`;else{const P=Math.floor(C/60),O=C%60;M=O>0?`${P}h ${O}m`:`${P}h`}return E.jsx("text",{x:S+D/2,y:A-8,fill:"var(--text-secondary)",textAnchor:"middle",fontSize:"11",fontWeight:"500",style:{whiteSpace:"nowrap"},children:M})};return c.length===0?E.jsx(fg,{title:"Top Projects",action:E.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:E.jsx("div",{className:"flex items-center justify-center h-[360px]",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-text-secondary flex items-center justify-center",children:E.jsx("i",{className:"ri-folder-line ri-2x"})}),E.jsx("p",{className:"text-text-secondary text-sm",children:"No projects with focus time found"})]})})}):E.jsx(fg,{title:"Top Projects",action:E.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:E.jsxs("div",{className:"flex flex-col w-full h-[360px]",children:[E.jsx("div",{className:"flex-1",children:E.jsx(Y0e,{width:"100%",height:"100%",children:E.jsxs(Jwe,{data:c,margin:{top:50,right:30,left:25,bottom:20},barSize:35,children:[E.jsx("text",{x:"50%",y:20,textAnchor:"middle",dominantBaseline:"hanging",className:"fill-text-primary text-sm font-medium",style:{transform:"translateY(-5px)"},children:"Time Spent"}),E.jsx(_W,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-color)",strokeWidth:1}),E.jsx(e2,{dataKey:"name",interval:0,tick:!1,tickLine:!1,axisLine:{stroke:"var(--border-color)",strokeWidth:1},dy:8}),E.jsx(t2,{tickFormatter:_=>{if(_<60)return`${_}m`;const S=Math.floor(_/60),A=_%60;return A>0?`${S}h ${A}m`:`${S}h`},tick:{fill:"var(--text-secondary)",fontSize:11,fontWeight:500},tickLine:!1,axisLine:{stroke:"var(--border-color)",strokeWidth:1},width:45,dx:-5,ticks:m,domain:[0,f],allowDataOverflow:!1}),E.jsx(Wd,{content:E.jsx(v,{}),cursor:{fill:"rgba(0, 0, 0, 0.05)"},wrapperStyle:{outline:"none"}}),E.jsx(Cy,{dataKey:"value",radius:[4,4,0,0],label:E.jsx(w,{}),children:c.map((_,S)=>E.jsx(Cj,{fill:_.color,style:{filter:"brightness(1)",transition:"filter 0.2s"},onMouseEnter:A=>{const C=document.querySelector(`[name="Bar-${S}"]`);C&&(C.style.filter="brightness(0.9)")},onMouseLeave:A=>{const C=document.querySelector(`[name="Bar-${S}"]`);C&&(C.style.filter="brightness(1)")}},`cell-${S}`))})]})})}),E.jsx(y,{})]})})}),VQe=ye.memo(()=>{const{workSessions:n,selectedRange:e}=qg(),{tasks:t,projects:r}=rn(),{user:i}=Rn(),[a,o]=K.useState(!1),s=K.useMemo(()=>{if(e.rangeType==="all time"||!e.startDate||!e.endDate)return n;const c=new Date(e.startDate);c.setHours(0,0,0,0);const u=new Date(e.endDate);return u.setHours(23,59,59,999),n.filter(d=>{const h=new Date(d.date);return h>=c&&h<=u})},[n,e]),l=K.useMemo(()=>{if(!i||s.length===0)return[];const c=new Map;return s.filter(u=>u.sessionType==="pomodoro"||u.sessionType==="manual").forEach(u=>{const d=u.duration||0,h=c.get(u.taskId)||0;c.set(u.taskId,h+d)}),Array.from(c.entries()).map(([u,d])=>{const h=t.find(m=>m.id===u);return h?{...oBe(h),totalFocusTime:d}:null}).filter(u=>u!==null&&u.totalFocusTime>0).sort((u,d)=>d.totalFocusTime-u.totalFocusTime)},[i,t,s]);return a?E.jsx(fg,{title:"Top Tasks",action:E.jsx("button",{className:"flex items-center text-sm text-text-secondary",children:E.jsx("span",{children:"Loading..."})}),children:E.jsx("div",{className:"flex items-center justify-center h-[360px]",children:E.jsx("div",{className:"text-center",children:E.jsx("p",{className:"text-text-secondary text-sm",children:"Loading tasks..."})})})}):l.length===0?E.jsx(fg,{title:"Top Tasks",action:E.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:E.jsx("div",{className:"flex items-center justify-center h-[360px]",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-text-secondary flex items-center justify-center",children:E.jsx("i",{className:"ri-calendar-event-line ri-2x"})}),E.jsx("p",{className:"text-text-secondary text-sm",children:"No tasks with focus time found"})]})})}):E.jsx(fg,{title:"Top Tasks",action:E.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:E.jsxs("div",{className:"space-y-2 h-[360px] overflow-y-auto pr-1 custom-scrollbar",children:[E.jsx("style",{children:`
          .custom-scrollbar::-webkit-scrollbar {
            width: 0 !important;
            display: none !important;
          }
          .custom-scrollbar {
            scrollbar-width: none !important;
            -ms-overflow-style: none !important;
            overflow: -moz-scrollbars-none !important;
          }
          .custom-scrollbar {
            -webkit-overflow-scrolling: touch;
          }
          `}),l.map((c,u)=>{const d=r.find(f=>f.id===c.projectId);if(!d)return null;const h=Kv(c.totalFocusTime);return E.jsx("div",{className:"flex items-center py-2 border-b border-border",children:E.jsxs("div",{className:"flex items-center",children:[E.jsxs("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary mr-3",children:[u+1,"."]}),E.jsxs("div",{children:[E.jsx("h4",{className:"text-sm font-medium text-text-primary",children:c.name}),E.jsx("div",{className:"flex items-center mt-0.5",children:E.jsxs("span",{className:"text-xs text-text-secondary",children:[d.name," • ",h]})})]})]})},c.id)})]})})}),zQe=({active:n,payload:e,label:t})=>{if(n&&e&&e.length){const r=e[0].value;return E.jsxs("div",{className:"bg-background-secondary p-3 border border-border rounded-lg shadow-lg",children:[E.jsx("p",{className:"font-medium text-text-primary",children:t}),E.jsxs("p",{className:"text-sm text-text-secondary",children:[E.jsx("span",{className:"inline-block w-3 h-3 bg-blue-500 rounded-full mr-2"}),"Focus Time: ",Kv(r)]})]})}return null},HQe=ye.memo(()=>{const{workSessions:n,focusTimeView:e,setFocusTimeView:t,selectedRange:r}=qg(),i=K.useMemo(()=>{if(r.rangeType==="all time"||!r.startDate||!r.endDate)return n;const h=new Date(r.startDate);h.setHours(0,0,0,0);const f=new Date(r.endDate);return f.setHours(23,59,59,999),n.filter(m=>{const v=new Date(m.date);return v>=h&&v<=f})},[n,r]),a=h=>{let f;if(typeof h=="string"){if(h.includes("T"))return h.split("T")[0];if(h.match(/^\d{4}-\d{2}-\d{2}$/))return h;f=new Date(h)}else f=new Date(h);if(f&&!isNaN(f.getTime())){const m=f.getFullYear(),v=(f.getMonth()+1).toString().padStart(2,"0"),y=f.getDate().toString().padStart(2,"0");return`${m}-${v}-${y}`}return typeof h=="string"?h:h.toISOString().split("T")[0]},o=K.useMemo(()=>{var h,f;if(!i.length)return[];try{const m={};i.filter(y=>y.sessionType==="pomodoro"||y.sessionType==="manual").forEach(y=>{const w=a(y.date),_=y.duration||0;m[w]||(m[w]=0),m[w]+=_}),console.log("Time by date aggregated:",m);const v=[];if(e==="daily"){let y,w;if(console.log("Daily view processing selectedRange:",{rangeType:r.rangeType,startDate:(h=r.startDate)==null?void 0:h.toISOString(),endDate:(f=r.endDate)==null?void 0:f.toISOString()}),r.rangeType==="all time")if(i.length>0){const S=[...new Set(i.map(A=>A.date))].map(A=>new Date(A)).sort((A,C)=>A.getTime()-C.getTime());y=new Date(S[0]),w=new Date(S[S.length-1]),console.log("All time daily - using actual data range:",{startDate:y.toISOString(),endDate:w.toISOString(),totalDates:S.length})}else w=new Date,y=new Date,y.setDate(w.getDate()-6);else r.startDate&&r.endDate?(y=new Date(r.startDate),w=new Date(r.endDate)):(w=new Date,r.rangeType==="last 30 days"?(y=new Date,y.setDate(w.getDate()-29)):r.rangeType==="last 7 days"?(y=new Date,y.setDate(w.getDate()-6)):r.rangeType==="today"?y=new Date:(y=new Date,y.setDate(w.getDate()-6)));y.setHours(0,0,0,0),w.setHours(23,59,59,999);const _=new Date(y);for(console.log("Daily view - generating days from:",y.toISOString(),"to:",w.toISOString());_<=w;){const S=a(_),A=_.toLocaleDateString("en-US",{month:"short",day:"numeric"}),C=m[S]||0;console.log(`Daily lookup: ${S} = ${C} minutes`),v.push({date:A,value:C,displayValue:C>0?Kv(C):"0m"}),_.setDate(_.getDate()+1)}console.log("Daily view - generated days:",v.length,"days with data:",v.filter(S=>S.value>0).length)}else if(e==="weekly"){const y={};Object.entries(m).forEach(([A,C])=>{try{const D=new Date(A+"T00:00:00");if(isNaN(D.getTime())){console.warn("Invalid date:",A);return}const M=new Date(D),P=D.getDay(),O=P===0?6:P-1;M.setDate(D.getDate()-O),M.setHours(0,0,0,0);const j=M.toISOString().split("T")[0];y[j]||(y[j]=0),y[j]+=C}catch(D){console.error("Error processing date for weekly view:",A,D)}}),console.log("Weekly data aggregated:",y);let w=8,_=new Date,S=new Date;if(r.rangeType==="all time")if(i.length>0){const A=[...new Set(i.map(B=>B.date))].map(B=>new Date(B)).sort((B,$)=>B.getTime()-$.getTime()),C=A[0],D=A[A.length-1],M=C.getDay(),P=M===0?6:M-1;_=new Date(C),_.setDate(C.getDate()-P),_.setHours(0,0,0,0);const O=D.getDay(),j=O===0?6:O-1;S=new Date(D),S.setDate(D.getDate()-j),S.setHours(0,0,0,0);const L=Math.ceil((S.getTime()-_.getTime())/(1e3*60*60*24*7));w=Math.max(L+1,1),console.log("All time weekly view - calculated range:",{earliestDate:C.toISOString(),latestDate:D.toISOString(),startWeek:_.toISOString(),endWeek:S.toISOString(),weeksToShow:w})}else{w=8,S=new Date;const A=S.getDay(),C=A===0?6:A-1;S.setDate(S.getDate()-C),S.setHours(0,0,0,0),_=new Date(S),_.setDate(S.getDate()-(w-1)*7)}else if(r.startDate&&r.endDate){_=new Date(r.startDate),S=new Date(r.endDate);const A=_.getDay(),C=A===0?6:A-1;_.setDate(_.getDate()-C),_.setHours(0,0,0,0);const D=S.getDay(),M=D===0?6:D-1;S.setDate(S.getDate()-M),S.setHours(0,0,0,0);const P=Math.ceil((S.getTime()-_.getTime())/(1e3*60*60*24*7));w=Math.max(P+1,1)}else{w=8,S=new Date;const A=S.getDay(),C=A===0?6:A-1;S.setDate(S.getDate()-C),S.setHours(0,0,0,0),_=new Date(S),_.setDate(S.getDate()-(w-1)*7)}console.log("Weekly view - startWeek:",_,"endWeek:",S,"weeksToShow:",w);for(let A=0;A<w;A++){const C=new Date(_);C.setDate(_.getDate()+A*7),C.setHours(0,0,0,0);const D=new Date(C);D.setDate(C.getDate()+6);const M=C.toISOString().split("T")[0],P=y[M]||0;let O;try{const j=C.toLocaleDateString("en-US",{month:"short",day:"numeric"}),L=D.toLocaleDateString("en-US",{month:"short",day:"numeric"});O=`${j} - ${L}`}catch(j){console.error("Date formatting error:",j),O=`Week ${A+1}`}v.push({date:O,value:P,displayValue:P>0?Kv(P):"0m"})}}else if(e==="monthly"){const y={};Object.entries(m).forEach(([A,C])=>{const D=new Date(A+"T00:00:00");if(isNaN(D.getTime())){console.warn("Invalid date:",A);return}const M=`${D.getFullYear()}-${(D.getMonth()+1).toString().padStart(2,"0")}`;y[M]||(y[M]=0),y[M]+=C});let w=6,_=new Date,S=new Date;if(r.rangeType==="all time")if(i.length>0){const A=i.map(P=>new Date(P.date)),C=new Date(Math.min(...A.map(P=>P.getTime()))),D=new Date(Math.max(...A.map(P=>P.getTime())));_=new Date(C.getFullYear(),C.getMonth(),1),S=new Date(D.getFullYear(),D.getMonth(),1);const M=(S.getFullYear()-_.getFullYear())*12+(S.getMonth()-_.getMonth());w=Math.max(M+1,1)}else w=6,S=new Date,S=new Date(S.getFullYear(),S.getMonth(),1),_=new Date(S),_.setMonth(S.getMonth()-(w-1));else if(r.startDate&&r.endDate){_=new Date(r.startDate.getFullYear(),r.startDate.getMonth(),1),S=new Date(r.endDate.getFullYear(),r.endDate.getMonth(),1);const A=(S.getFullYear()-_.getFullYear())*12+(S.getMonth()-_.getMonth());w=Math.max(A+1,1)}else w=6,S=new Date,S=new Date(S.getFullYear(),S.getMonth(),1),_=new Date(S),_.setMonth(S.getMonth()-(w-1));console.log("Monthly view - startMonth:",_,"endMonth:",S,"monthsToShow:",w);for(let A=0;A<w;A++){const C=new Date(_);C.setMonth(_.getMonth()+A),C.setHours(0,0,0,0);const D=`${C.getFullYear()}-${(C.getMonth()+1).toString().padStart(2,"0")}`,M=y[D]||0;let P;try{P=C.toLocaleDateString("en-US",{month:"long",year:"numeric"})}catch(O){console.error("Date formatting error:",O),P=`Month ${A+1}`}v.push({date:P,value:M,displayValue:M>0?Kv(M):"0m"})}}return v}catch(m){return console.error("Error processing chart data:",m),[]}},[i,e,r]),s=h=>{t(h)},l=()=>{const h=o.length;return h<=5?60:h<=8?50:h<=15?40:h<=31?30:h<=60?20:h<=90?15:10},c=()=>{const h=o.length;let f=0;return e==="daily"?h<=7?f=0:h<=14?f=1:h<=31?f=2:h<=60?f=4:h<=90?f=6:f=Math.floor(h/10):e==="weekly"?h<=8?f=0:h<=16?f=1:f=Math.floor(h/8):e==="monthly"&&(h<=12?f=0:f=Math.floor(h/12)),f},u=()=>45,d=h=>{if(h===0)return"";const f=Math.floor(h/60),m=h%60;return f===0?`${m}m`:m===0?`${f}h`:`${f}h${m}m`};return E.jsxs(fg,{title:"Focus Time Trend",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsx("div",{}),E.jsx("div",{className:"flex items-center space-x-2",children:E.jsxs("div",{className:"inline-flex rounded-full bg-background-container p-1",children:[E.jsx("button",{type:"button",className:`px-4 py-1.5 text-sm font-medium rounded-full ${e==="daily"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>s("daily"),children:"Daily"}),E.jsx("button",{type:"button",className:`px-4 py-1.5 text-sm font-medium rounded-full ${e==="weekly"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>s("weekly"),children:"Weekly"}),E.jsx("button",{type:"button",className:`px-4 py-1.5 text-sm font-medium rounded-full ${e==="monthly"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>s("monthly"),children:"Monthly"})]})})]}),E.jsx("div",{className:"h-[28rem]",children:o.length===0?E.jsx("div",{className:"flex items-center justify-center h-full",children:E.jsxs("div",{className:"text-center text-text-secondary",children:[E.jsx("p",{className:"text-lg font-medium mb-2",children:"No focus time data available"}),E.jsx("p",{className:"text-sm",children:"Start a timer to see your trends!"})]})}):E.jsx(Y0e,{width:"100%",height:"100%",children:E.jsxs(Jwe,{data:o,margin:{top:30,right:20,left:15,bottom:u()},children:[E.jsx(_W,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),E.jsx(e2,{dataKey:"date",axisLine:{stroke:"var(--border-color)"},tickLine:{stroke:"var(--border-color)"},tick:{fill:"var(--text-secondary)",fontSize:12},interval:c(),angle:0,textAnchor:"middle",height:55}),E.jsx(t2,{axisLine:!1,tickLine:!1,tick:{fill:"var(--text-secondary)",fontSize:12},tickFormatter:h=>h<60?`${h}m`:`${Math.floor(h/60)}h`}),E.jsx(Wd,{content:E.jsx(zQe,{}),cursor:{fill:"rgba(0, 0, 0, 0.05)"},wrapperStyle:{outline:"none"}}),E.jsx(Cy,{dataKey:"value",radius:[6,6,0,0],minPointSize:2,barSize:l(),label:{position:"top",fill:"var(--text-secondary)",fontSize:12,fontWeight:500,formatter:d},children:o.map((h,f)=>E.jsx(Cj,{fill:"#57B5E7",style:{filter:"brightness(1)",transition:"filter 0.2s"},onMouseEnter:m=>{const v=document.querySelector(`[name="Bar-${f}"]`);v&&(v.style.filter="brightness(0.9)")},onMouseLeave:m=>{const v=document.querySelector(`[name="Bar-${f}"]`);v&&(v.style.filter="brightness(1)")}},`cell-${f}`))})]})})})]})}),qQe=()=>E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[E.jsx(aBe,{}),E.jsx("div",{className:"lg:col-span-2",children:E.jsx(cBe,{})})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E.jsx(UQe,{}),E.jsx(VQe,{})]}),E.jsx(HQe,{})]}),GQe=()=>E.jsx("div",{className:"w-full max-w-7xl mx-auto",children:E.jsx(qQe,{})}),WQe=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,s,l)=>{let c=o;if(s){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(r.getState());c=h=>{const f=o(h);if(!u(d,f)){const m=d;s(d=f,m)}},l!=null&&l.fireImmediately&&s(d,d)}return i(c)},n(e,t,r)},YQe=WQe;function KQe(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var a;const o=l=>l===null?null:JSON.parse(l,void 0),s=(a=t.getItem(i))!=null?a:null;return s instanceof Promise?s.then(o):o(s)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const J9=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return J9(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return J9(r)(t)}}}},XQe=(n,e)=>(t,r,i)=>{let a={storage:KQe(()=>localStorage),partialize:v=>v,version:0,merge:(v,y)=>({...y,...v}),...e},o=!1;const s=new Set,l=new Set;let c=a.storage;if(!c)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...v)},r,i);const u=()=>{const v=a.partialize({...r()});return c.setItem(a.name,{state:v,version:a.version})},d=i.setState;i.setState=(v,y)=>{d(v,y),u()};const h=n((...v)=>{t(...v),u()},r,i);i.getInitialState=()=>h;let f;const m=()=>{var v,y;if(!c)return;o=!1,s.forEach(_=>{var S;return _((S=r())!=null?S:h)});const w=((y=a.onRehydrateStorage)==null?void 0:y.call(a,(v=r())!=null?v:h))||void 0;return J9(c.getItem.bind(c))(a.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==a.version){if(a.migrate){const S=a.migrate(_.state,_.version);return S instanceof Promise?S.then(A=>[!0,A]):[!0,S]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var S;const[A,C]=_;if(f=a.merge(C,(S=r())!=null?S:h),t(f,!0),A)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,l.forEach(_=>_(f))}).catch(_=>{w==null||w(void 0,_)})};return i.persist={setOptions:v=>{a={...a,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},a.skipHydration||m(),f||h},xW=XQe,tc=yy()(xW(n=>({isLeftSidebarOpen:!1,isRightSidebarOpen:!0,rightSidebarWidth:480,isHelpModalOpen:!1,isSettingsModalOpen:!1,isFocusMode:!1,activeHelpTab:"pomodoro",toastMessage:null,toggleLeftSidebar:()=>n(e=>({isLeftSidebarOpen:!e.isLeftSidebarOpen})),toggleRightSidebar:()=>n(e=>({isRightSidebarOpen:!e.isRightSidebarOpen})),setRightSidebarWidth:e=>n({rightSidebarWidth:e}),toggleHelpModal:()=>n(e=>({isHelpModalOpen:!e.isHelpModalOpen})),toggleSettingsModal:()=>n(e=>({isSettingsModalOpen:!e.isSettingsModalOpen})),toggleFocusMode:()=>n(e=>({isFocusMode:!e.isFocusMode})),setActiveHelpTab:e=>n({activeHelpTab:e}),showToast:e=>{n({toastMessage:e}),setTimeout(()=>{n(t=>t.toastMessage===e?{toastMessage:null}:{})},3e3)},hideToast:()=>n({toastMessage:null})}),{name:"ui-store",partialize:n=>({rightSidebarWidth:n.rightSidebarWidth,isLeftSidebarOpen:n.isLeftSidebarOpen,isRightSidebarOpen:n.isRightSidebarOpen})}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQe{constructor(e,t){this._delegate=e,this.firebase=t,HD(e,new Kc("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),n7(this._delegate)))}_getService(e,t=ry){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=ry){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){HD(this._delegate,e)}_addOrOverwriteComponent(e){Kge(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQe={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Dae=new Bg("app-compat","Firebase",QQe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JQe(n){const e={},t={__esModule:!0,initializeApp:a,app:i,registerVersion:Hs,setLogLevel:Jge,onLog:Qge,apps:null,SDK_VERSION:by,INTERNAL:{registerComponent:s,removeApp:r,useAsService:l,modularAPIs:SPe}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||ry,!hZ(e,c))throw Dae.create("no-app",{appName:c});return e[c]}i.App=n;function a(c,u={}){const d=FL(c,u);if(hZ(e,d.name))return e[d.name];const h=new n(d,t);return e[d.name]=h,h}function o(){return Object.keys(e).map(c=>e[c])}function s(c){const u=c.name,d=u.replace("-compat","");if(Ku(c)&&c.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw Dae.create("invalid-app-argument",{appName:u});return f[d]()};c.serviceProps!==void 0&&dR(h,c.serviceProps),t[d]=h,n.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?t[d]:null}function l(c,u){return u==="serverAuth"?null:u}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_e(){const n=JQe(ZQe);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e_e,extendNamespace:e,createSubscribe:zge,ErrorFactory:Bg,deepExtend:dR});function e(t){dR(n,t)}return n}const eJe=e_e();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kae=new EI("@firebase/app-compat"),tJe="@firebase/app-compat",nJe="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rJe(n){Hs(tJe,nJe,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=Lge();if(n.firebase!==void 0){kae.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&kae.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const tn=eJe;rJe();var iJe="firebase",aJe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.registerVersion(iJe,aJe,"app-compat");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oJe=2e3;async function sJe(n,e,t){var r;const{BuildInfo:i}=Rw();lh(e.sessionId,"AuthEvent did not contain a session ID");const a=await hJe(e.sessionId),o={};return BI()?o.ibi=i.packageName:$I()?o.apn=i.packageName:Go(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=a,Oz(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function lJe(n){const{BuildInfo:e}=Rw(),t={};BI()?t.iosBundleId=e.packageName:$I()?t.androidPackageName=e.packageName:Go(n,"operation-not-supported-in-this-environment"),await mye(n,t)}function cJe(n){const{cordova:e}=Rw();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,zNe()?"_blank":"_system","location=yes"),t(i)})})}async function uJe(n,e,t){const{cordova:r}=Rw();let i=()=>{};try{await new Promise((a,o)=>{let s=null;function l(){var d;a();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function c(){s||(s=window.setTimeout(()=>{o(_o(n,"redirect-cancelled-by-user"))},oJe))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),$I()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),s&&window.clearTimeout(s)}})}finally{i()}}function dJe(n){var e,t,r,i,a,o,s,l,c,u;const d=Rw();lt(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),lt(typeof((t=d==null?void 0:d.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),lt(typeof((a=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||a===void 0?void 0:a.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),lt(typeof((l=(s=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||s===void 0?void 0:s.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),lt(typeof((u=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function hJe(n){const e=fJe(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function fJe(n){if(lh(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pJe=20;class gJe extends pye{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function mJe(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:bJe(),postBody:null,tenantId:n.tenantId,error:_o(n,"no-auth-event")}}function vJe(n,e){return eH()._set(tH(n),e)}async function Iae(n){const e=await eH()._get(tH(n));return e&&await eH()._remove(tH(n)),e}function yJe(n,e){var t,r;const i=_Je(e);if(i.includes("/__/auth/callback")){const a=PO(i),o=a.firebaseError?wJe(decodeURIComponent(a.firebaseError)):null,s=(r=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],l=s?_o(s):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function bJe(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<pJe;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function eH(){return Vc(zI)}function tH(n){return lw("authEvent",n.config.apiKey,n.name)}function wJe(n){try{return JSON.parse(n)}catch{return null}}function _Je(n){const e=PO(n),t=e.link?decodeURIComponent(e.link):void 0,r=PO(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return PO(i).link||i||r||t||n}function PO(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return LS(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xJe=500;class SJe{constructor(){this._redirectPersistence=ly,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=dj,this._overrideRedirectResult=oG}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new gJe(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Go(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){dJe(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),Qje(),await this._originValidation(e);const o=mJe(e,r,i);await vJe(e,o);const s=await sJe(e,o,t),l=await cJe(s);return uJe(e,a,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lJe(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:a}=Rw(),o=setTimeout(async()=>{await Iae(e),t.onEvent(Mae())},xJe),s=async u=>{clearTimeout(o);const d=await Iae(e);let h=null;d&&(u!=null&&u.url)&&(h=yJe(d,u.url)),t.onEvent(h||Mae())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,s);const l=i,c=`${a.packageName.toLowerCase()}://`;Rw().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&s({url:u}),typeof l=="function")try{l(u)}catch(d){console.error(d)}}}}const TJe=SJe;function Mae(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_o("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJe(n,e){Da(n)._logFramework(e)}var AJe="@firebase/auth-compat",CJe="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJe=1e3;function fD(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function kJe(){return fD()==="http:"||fD()==="https:"}function t_e(n=ao()){return!!((fD()==="file:"||fD()==="ionic:"||fD()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function IJe(){return Jq()||Zq()}function MJe(){return Uge()&&(document==null?void 0:document.documentMode)===11}function PJe(n=ao()){return/Edge\/\d+/.test(n)}function OJe(n=ao()){return MJe()||PJe(n)}function n_e(){try{const n=self.localStorage,e=HI();if(n)return n.setItem(e,"1"),n.removeItem(e),OJe()?VD():!0}catch{return SW()&&VD()}return!1}function SW(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function VB(){return(kJe()||Qq()||t_e())&&!IJe()&&n_e()&&!SW()}function r_e(){return t_e()&&typeof document<"u"}async function RJe(){return r_e()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},DJe);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function NJe(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc={LOCAL:"local",NONE:"none",SESSION:"session"},BA=lt,i_e="persistence";function LJe(n,e){if(BA(Object.values(Fc).includes(e),n,"invalid-persistence-type"),Jq()){BA(e!==Fc.SESSION,n,"unsupported-persistence-type");return}if(Zq()){BA(e===Fc.NONE,n,"unsupported-persistence-type");return}if(SW()){BA(e===Fc.NONE||e===Fc.LOCAL&&VD(),n,"unsupported-persistence-type");return}BA(e===Fc.NONE||n_e(),n,"unsupported-persistence-type")}async function nH(n){await n._initializationPromise;const e=a_e(),t=lw(i_e,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function jJe(n,e){const t=a_e();if(!t)return[];const r=lw(i_e,n,e);switch(t.getItem(r)){case Fc.NONE:return[A1];case Fc.LOCAL:return[D1,ly];case Fc.SESSION:return[ly];default:return[]}}function a_e(){var n;try{return((n=NJe())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FJe=lt;class Lv{constructor(){this.browserResolver=Vc(vye),this.cordovaResolver=Vc(TJe),this.underlyingResolver=null,this._redirectPersistence=ly,this._completeRedirectFn=dj,this._overrideRedirectResult=oG}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return r_e()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return FJe(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await RJe();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_e(n){return n.unwrap()}function $Je(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BJe(n){return s_e(n)}function UJe(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new VJe(n,oje(n,e))}else if(r){const i=s_e(e),a=e;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function s_e(n){const{_tokenResponse:e}=n instanceof us?n.customData:n;if(!e)return null;if(!(n instanceof us)&&"temporaryProof"in e&&"phoneNumber"in e)return Aw.credentialFromResult(n);const t=e.providerId;if(!t||t===IA.PASSWORD)return null;let r;switch(t){case IA.GOOGLE:r=Xd;break;case IA.FACEBOOK:r=uf;break;case IA.GITHUB:r=df;break;case IA.TWITTER:r=hf;break;default:const{oauthIdToken:i,oauthAccessToken:a,oauthTokenSecret:o,pendingToken:s,nonce:l}=e;return!a&&!o&&!i&&!s?null:s?t.startsWith("saml.")?C1._create(t,s):Mf._fromParams({providerId:t,signInMethod:t,pendingToken:s,idToken:i,accessToken:a}):new XS(t).credential({idToken:i,accessToken:a,rawNonce:l})}return n instanceof us?r.credentialFromError(n):r.credentialFromResult(n)}function Wl(n,e){return e.catch(t=>{throw t instanceof us&&UJe(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:BJe(t),additionalUserInfo:eje(t),user:og.getOrCreate(i)}})}async function rH(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Wl(n,t.confirm(r))}}class VJe{constructor(e,t){this.resolver=t,this.auth=$Je(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Wl(o_e(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this._delegate=e,this.multiFactor=uje(e)}static getOrCreate(e){return og.USER_MAP.has(e)||og.USER_MAP.set(e,new og(e)),og.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Wl(this.auth,Qve(this._delegate,e))}async linkWithPhoneNumber(e,t){return rH(this.auth,$je(this._delegate,e,t))}async linkWithPopup(e){return Wl(this.auth,Yje(this._delegate,e,Lv))}async linkWithRedirect(e){return await nH(Da(this.auth)),r5e(this._delegate,e,Lv)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Wl(this.auth,Jve(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return rH(this.auth,Bje(this._delegate,e,t))}reauthenticateWithPopup(e){return Wl(this.auth,Wje(this._delegate,e,Lv))}async reauthenticateWithRedirect(e){return await nH(Da(this.auth)),t5e(this._delegate,e,Lv)}sendEmailVerification(e){return zLe(this._delegate,e)}async unlink(e){return await kLe(this._delegate,e),this}updateEmail(e){return WLe(this._delegate,e)}updatePassword(e){return YLe(this._delegate,e)}updatePhoneNumber(e){return Uje(this._delegate,e)}updateProfile(e){return GLe(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return HLe(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}og.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=lt;class iH{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;UA(r,"invalid-api-key",{appName:e.name}),UA(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Lv:void 0;this._delegate=t.initialize({options:{persistence:zJe(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(xNe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?og.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Hve(this._delegate,e,t)}applyActionCode(e){return RLe(this._delegate,e)}checkActionCode(e){return eye(this._delegate,e)}confirmPasswordReset(e,t){return OLe(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Wl(this._delegate,LLe(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return VLe(this._delegate,e)}isSignInWithEmailLink(e){return $Le(this._delegate,e)}async getRedirectResult(){UA(VB(),this._delegate,"operation-not-supported-in-this-environment");const e=await a5e(this._delegate,Lv);return e?Wl(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){EJe(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:a,complete:o}=Pae(e,t,r);return this._delegate.onAuthStateChanged(i,a,o)}onIdTokenChanged(e,t,r){const{next:i,error:a,complete:o}=Pae(e,t,r);return this._delegate.onIdTokenChanged(i,a,o)}sendSignInLinkToEmail(e,t){return FLe(this._delegate,e,t)}sendPasswordResetEmail(e,t){return PLe(this._delegate,e,t||void 0)}async setPersistence(e){LJe(this._delegate,e);let t;switch(e){case Fc.SESSION:t=ly;break;case Fc.LOCAL:t=await Vc(D1)._isAvailable()?D1:zI;break;case Fc.NONE:t=A1;break;default:return Go("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Wl(this._delegate,DLe(this._delegate))}signInWithCredential(e){return Wl(this._delegate,oj(this._delegate,e))}signInWithCustomToken(e){return Wl(this._delegate,MLe(this._delegate,e))}signInWithEmailAndPassword(e,t){return Wl(this._delegate,jLe(this._delegate,e,t))}signInWithEmailLink(e,t){return Wl(this._delegate,BLe(this._delegate,e,t))}signInWithPhoneNumber(e,t){return rH(this._delegate,Fje(this._delegate,e,t))}async signInWithPopup(e){return UA(VB(),this._delegate,"operation-not-supported-in-this-environment"),Wl(this._delegate,Gje(this._delegate,e,Lv))}async signInWithRedirect(e){return UA(VB(),this._delegate,"operation-not-supported-in-this-environment"),await nH(this._delegate),Jje(this._delegate,e,Lv)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return NLe(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}iH.Persistence=Fc;function Pae(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&og.getOrCreate(o)),error:e,complete:t}}function zJe(n,e){const t=jJe(n,e);if(typeof self<"u"&&!t.includes(D1)&&t.push(D1),typeof window<"u")for(const r of[zI,ly])t.includes(r)||t.push(r);return t.includes(A1)||t.push(A1),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(){this.providerId="phone",this._delegate=new Aw(o_e(tn.auth()))}static credential(e,t){return Aw.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}TW.PHONE_SIGN_IN_METHOD=Aw.PHONE_SIGN_IN_METHOD;TW.PROVIDER_ID=Aw.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HJe=lt;class qJe{constructor(e,t,r=tn.app()){var i;HJe((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Lje(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GJe="auth-compat";function WJe(n){n.INTERNAL.registerComponent(new Kc(GJe,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new iH(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ox.EMAIL_SIGNIN,PASSWORD_RESET:Ox.PASSWORD_RESET,RECOVER_EMAIL:Ox.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ox.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ox.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ox.VERIFY_EMAIL}},EmailAuthProvider:_y,FacebookAuthProvider:uf,GithubAuthProvider:df,GoogleAuthProvider:Xd,OAuthProvider:XS,SAMLAuthProvider:SR,PhoneAuthProvider:TW,PhoneMultiFactorGenerator:yye,RecaptchaVerifier:qJe,TwitterAuthProvider:hf,Auth:iH,AuthCredential:mT,Error:us}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(AJe,CJe)}WJe(tn);var zB={exports:{}},Oae;function YJe(){return Oae||(Oae=1,function(n){(function(){var e=window.CustomEvent;(!e||typeof e=="object")&&(e=function(y,w){w=w||{};var _=document.createEvent("CustomEvent");return _.initCustomEvent(y,!!w.bubbles,!!w.cancelable,w.detail||null),_},e.prototype=window.Event.prototype);function t(v){for(;v&&v!==document.body;){var y=window.getComputedStyle(v),w=function(_,S){return!(y[_]===void 0||y[_]===S)};if(y.opacity<1||w("zIndex","auto")||w("transform","none")||w("mixBlendMode","normal")||w("filter","none")||w("perspective","none")||y.isolation==="isolate"||y.position==="fixed"||y.webkitOverflowScrolling==="touch")return!0;v=v.parentElement}return!1}function r(v){for(;v;){if(v.localName==="dialog")return v;v=v.parentElement}return null}function i(v){v&&v.blur&&v!==document.body&&v.blur()}function a(v,y){for(var w=0;w<v.length;++w)if(v[w]===y)return!0;return!1}function o(v){return!v||!v.hasAttribute("method")?!1:v.getAttribute("method").toLowerCase()==="dialog"}function s(v){if(this.dialog_=v,this.replacedStyleTop_=!1,this.openAsModal_=!1,v.hasAttribute("role")||v.setAttribute("role","dialog"),v.show=this.show.bind(this),v.showModal=this.showModal.bind(this),v.close=this.close.bind(this),"returnValue"in v||(v.returnValue=""),"MutationObserver"in window){var y=new MutationObserver(this.maybeHideModal.bind(this));y.observe(v,{attributes:!0,attributeFilter:["open"]})}else{var w=!1,_=(function(){w?this.downgradeModal():this.maybeHideModal(),w=!1}).bind(this),S,A=function(C){if(C.target===v){var D="DOMNodeRemoved";w|=C.type.substr(0,D.length)===D,window.clearTimeout(S),S=window.setTimeout(_,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(C){v.addEventListener(C,A)})}Object.defineProperty(v,"open",{set:this.setOpen.bind(this),get:v.hasAttribute.bind(v,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}s.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),l.dm.removeDialog(this))},setOpen:function(v){v?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(v){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var y=document.createElement("div");this.dialog_.insertBefore(y,this.dialog_.firstChild),y.tabIndex=-1,y.focus(),this.dialog_.removeChild(y)}var w=document.createEvent("MouseEvents");w.initMouseEvent(v.type,v.bubbles,v.cancelable,window,v.detail,v.screenX,v.screenY,v.clientX,v.clientY,v.ctrlKey,v.altKey,v.shiftKey,v.metaKey,v.button,v.relatedTarget),this.dialog_.dispatchEvent(w),v.stopPropagation()},focus_:function(){var v=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!v&&this.dialog_.tabIndex>=0&&(v=this.dialog_),!v){var y=["button","input","keygen","select","textarea"],w=y.map(function(_){return _+":not([disabled])"});w.push('[tabindex]:not([disabled]):not([tabindex=""])'),v=this.dialog_.querySelector(w.join(", "))}i(document.activeElement),v&&v.focus()},updateZIndex:function(v,y){if(v<y)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=v,this.backdrop_.style.zIndex=y},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!l.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");t(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,l.needsCentering(this.dialog_)?(l.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(v){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),v!==void 0&&(this.dialog_.returnValue=v);var y=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(y)}};var l={};if(l.reposition=function(v){var y=document.body.scrollTop||document.documentElement.scrollTop,w=y+(window.innerHeight-v.offsetHeight)/2;v.style.top=Math.max(y,w)+"px"},l.isInlinePositionSetByStylesheet=function(v){for(var y=0;y<document.styleSheets.length;++y){var w=document.styleSheets[y],_=null;try{_=w.cssRules}catch{}if(_)for(var S=0;S<_.length;++S){var A=_[S],C=null;try{C=document.querySelectorAll(A.selectorText)}catch{}if(!(!C||!a(C,v))){var D=A.style.getPropertyValue("top"),M=A.style.getPropertyValue("bottom");if(D&&D!=="auto"||M&&M!=="auto")return!0}}}return!1},l.needsCentering=function(v){var y=window.getComputedStyle(v);return y.position!=="absolute"||v.style.top!=="auto"&&v.style.top!==""||v.style.bottom!=="auto"&&v.style.bottom!==""?!1:!l.isInlinePositionSetByStylesheet(v)},l.forceRegisterDialog=function(v){if((window.HTMLDialogElement||v.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",v),v.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new s(v)},l.registerDialog=function(v){v.showModal||l.forceRegisterDialog(v)},l.DialogManager=function(){this.pendingDialogStack=[];var v=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",(function(y){this.forwardTab_=void 0,y.stopPropagation(),v([])}).bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(y){var w=[];y.forEach(function(_){for(var S=0,A;A=_.removedNodes[S];++S){if(A instanceof Element)A.localName==="dialog"&&w.push(A);else continue;w=w.concat(A.querySelectorAll("dialog"))}}),w.length&&v(w)}))},l.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},l.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},l.DialogManager.prototype.updateStacking=function(){for(var v=this.zIndexHigh_,y=0,w;w=this.pendingDialogStack[y];++y)w.updateZIndex(--v,--v),y===0&&(this.overlay.style.zIndex=--v);var _=this.pendingDialogStack[0];if(_){var S=_.dialog.parentNode||document.body;S.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},l.DialogManager.prototype.containedByTopDialog_=function(v){for(;v=r(v);){for(var y=0,w;w=this.pendingDialogStack[y];++y)if(w.dialog===v)return y===0;v=v.parentElement}return!1},l.DialogManager.prototype.handleFocus_=function(v){if(!this.containedByTopDialog_(v.target)&&(v.preventDefault(),v.stopPropagation(),i(v.target),this.forwardTab_!==void 0)){var y=this.pendingDialogStack[0],w=y.dialog,_=w.compareDocumentPosition(v.target);return _&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?y.focus_():document.documentElement.focus()),!1}},l.DialogManager.prototype.handleKey_=function(v){if(this.forwardTab_=void 0,v.keyCode===27){v.preventDefault(),v.stopPropagation();var y=new e("cancel",{bubbles:!1,cancelable:!0}),w=this.pendingDialogStack[0];w&&w.dialog.dispatchEvent(y)&&w.dialog.close()}else v.keyCode===9&&(this.forwardTab_=!v.shiftKey)},l.DialogManager.prototype.checkDOM_=function(v){var y=this.pendingDialogStack.slice();y.forEach(function(w){v.indexOf(w.dialog)!==-1?w.downgradeModal():w.maybeHideModal()})},l.DialogManager.prototype.pushDialog=function(v){var y=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=y?!1:(this.pendingDialogStack.unshift(v)===1&&this.blockDocument(),this.updateStacking(),!0)},l.DialogManager.prototype.removeDialog=function(v){var y=this.pendingDialogStack.indexOf(v);y!==-1&&(this.pendingDialogStack.splice(y,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())},l.dm=new l.DialogManager,l.formSubmitter=null,l.useValue=null,window.HTMLDialogElement===void 0){var c=document.createElement("form");if(c.setAttribute("method","dialog"),c.method!=="dialog"){var u=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(u){var d=u.get;u.get=function(){return o(this)?"dialog":d.call(this)};var h=u.set;u.set=function(v){return typeof v=="string"&&v.toLowerCase()==="dialog"?this.setAttribute("method",v):h.call(this,v)},Object.defineProperty(HTMLFormElement.prototype,"method",u)}}document.addEventListener("click",function(v){if(l.formSubmitter=null,l.useValue=null,!v.defaultPrevented){var y=v.target;if(!(!y||!o(y.form))){var w=y.type==="submit"&&["button","input"].indexOf(y.localName)>-1;if(!w){if(!(y.localName==="input"&&y.type==="image"))return;l.useValue=v.offsetX+","+v.offsetY}var _=r(y);_&&(l.formSubmitter=y)}}},!1);var f=HTMLFormElement.prototype.submit,m=function(){if(!o(this))return f.call(this);var v=r(this);v&&v.close()};HTMLFormElement.prototype.submit=m,document.addEventListener("submit",function(v){var y=v.target;if(o(y)){v.preventDefault();var w=r(y);if(w){var _=l.formSubmitter;_&&_.form===y?w.close(l.useValue||_.value):w.close(),l.formSubmitter=null}}},!0)}l.forceRegisterDialog=l.forceRegisterDialog,l.registerDialog=l.registerDialog,typeof n.exports=="object"?n.exports=l:window.dialogPolyfill=l})()}(zB)),zB.exports}var KJe=YJe();const XJe=Br(KJe);var Rae={};/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nae;function ZJe(){if(Nae)return Rae;Nae=1;var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};return n=function(){var e=[],t=[],r="mdlComponentConfigInternal_";function i(y,w){for(var _=0;_<e.length;_++)if(e[_].className===y)return typeof w<"u"&&(e[_]=w),e[_];return!1}function a(y){var w=y.getAttribute("data-upgraded");return w===null?[""]:w.split(",")}function o(y,w){var _=a(y);return _.indexOf(w)!==-1}function s(y,w,_){if("CustomEvent"in window&&typeof window.CustomEvent=="function")return new CustomEvent(y,{bubbles:w,cancelable:_});var S=document.createEvent("Events");return S.initEvent(y,w,_),S}function l(y,w){if(typeof y>"u"&&typeof w>"u")for(var _=0;_<e.length;_++)l(e[_].className,e[_].cssClass);else{var S=y;if(typeof w>"u"){var A=i(S);A&&(w=A.cssClass)}for(var C=document.querySelectorAll("."+w),D=0;D<C.length;D++)c(C[D],S)}}function c(y,w){if(!(typeof y=="object"&&y instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var _=s("mdl-componentupgrading",!0,!0);if(y.dispatchEvent(_),!_.defaultPrevented){var S=a(y),A=[];if(w)o(y,w)||A.push(i(w));else{var C=y.classList;e.forEach(function($){C.contains($.cssClass)&&A.indexOf($)===-1&&!o(y,$.className)&&A.push($)})}for(var D=0,M=A.length,P;D<M;D++){if(P=A[D],P){S.push(P.className),y.setAttribute("data-upgraded",S.join(","));var O=new P.classConstructor(y);O[r]=P,t.push(O);for(var j=0,L=P.callbacks.length;j<L;j++)P.callbacks[j](y);P.widget&&(y[P.className]=O)}else throw new Error("Unable to find a registered component for the given class.");var B=s("mdl-componentupgraded",!0,!1);y.dispatchEvent(B)}}}function u(y){Array.isArray(y)||(y instanceof Element?y=[y]:y=Array.prototype.slice.call(y));for(var w=0,_=y.length,S;w<_;w++)S=y[w],S instanceof HTMLElement&&(c(S),S.children.length>0&&u(S.children))}function d(y){var w=typeof y.widget>"u"&&typeof y.widget>"u",_=!0;w||(_=y.widget||y.widget);var S={classConstructor:y.constructor||y.constructor,className:y.classAsString||y.classAsString,cssClass:y.cssClass||y.cssClass,widget:_,callbacks:[]};if(e.forEach(function(C){if(C.cssClass===S.cssClass)throw new Error("The provided cssClass has already been registered: "+C.cssClass);if(C.className===S.className)throw new Error("The provided className has already been registered")}),y.constructor.prototype.hasOwnProperty(r))throw new Error("MDL component classes must not have "+r+" defined as a property.");var A=i(y.classAsString,S);A||e.push(S)}function h(y,w){var _=i(y);_&&_.callbacks.push(w)}function f(){for(var y=0;y<e.length;y++)l(e[y].className)}function m(y){if(y){var w=t.indexOf(y);t.splice(w,1);var _=y.element_.getAttribute("data-upgraded").split(","),S=_.indexOf(y[r].classAsString);_.splice(S,1),y.element_.setAttribute("data-upgraded",_.join(","));var A=s("mdl-componentdowngraded",!0,!1);y.element_.dispatchEvent(A)}}function v(y){var w=function(S){t.filter(function(A){return A.element_===S}).forEach(m)};if(y instanceof Array||y instanceof NodeList)for(var _=0;_<y.length;_++)w(y[_]);else if(y instanceof Node)w(y);else throw new Error("Invalid argument provided to downgrade MDL nodes.")}return{upgradeDom:l,upgradeElement:c,upgradeElements:u,upgradeAllRegistered:f,registerUpgradedCallback:h,register:d,downgradeElements:v}}(),n.ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,window.componentHandler=n,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})}),Rae}ZJe();var Lae={};/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jae;function QJe(){return jae||(jae=1,function(){var n=function(t){this.element_=t,this.init()};window.MaterialButton=n,n.prototype.Constant_={},n.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},n.prototype.blurHandler_=function(e){e&&this.element_.blur()},n.prototype.disable=function(){this.element_.disabled=!0},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.element_.disabled=!1},n.prototype.enable=n.prototype.enable,n.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:n,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})}()),Lae}QJe();var Fae={};/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $ae;function JJe(){return $ae||($ae=1,function(){var n=function(t){this.element_=t,this.init()};window.MaterialProgress=n,n.prototype.Constant_={},n.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},n.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},n.prototype.setProgress=n.prototype.setProgress,n.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},n.prototype.setBuffer=n.prototype.setBuffer,n.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:n,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})}()),Fae}JJe();var Bae={};/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uae;function eet(){return Uae||(Uae=1,function(){var n=function(t){this.element_=t,this.init()};window.MaterialSpinner=n,n.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},n.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},n.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),r.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var a=document.createElement("div");a.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),a.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[r,i,a],s=0;s<o.length;s++){var l=document.createElement("div");l.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[s].appendChild(l)}t.appendChild(r),t.appendChild(i),t.appendChild(a),this.element_.appendChild(t)},n.prototype.createLayer=n.prototype.createLayer,n.prototype.stop=function(){this.element_.classList.remove("is-active")},n.prototype.stop=n.prototype.stop,n.prototype.start=function(){this.element_.classList.add("is-active")},n.prototype.start=n.prototype.start,n.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:n,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})}()),Bae}eet();var Vae={};/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zae;function tet(){return zae||(zae=1,function(){var n=function(t){this.element_=t,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=n,n.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},n.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},n.prototype.onKeyDown_=function(e){var t=e.target.value.split(`
`).length;e.keyCode===13&&t>=this.maxRows&&e.preventDefault()},n.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},n.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},n.prototype.onReset_=function(e){this.updateClasses_()},n.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},n.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},n.prototype.checkDisabled=n.prototype.checkDisabled,n.prototype.checkFocus=function(){this.element_.querySelector(":focus")?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},n.prototype.checkFocus=n.prototype.checkFocus,n.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},n.prototype.checkValidity=n.prototype.checkValidity,n.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},n.prototype.checkDirty=n.prototype.checkDirty,n.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},n.prototype.enable=n.prototype.enable,n.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},n.prototype.change=n.prototype.change,n.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:n,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})}()),Vae}tet();(function(){(function(){var n,e=typeof Object.create=="function"?Object.create:function(p){function x(){}return x.prototype=p,new x},t;if(typeof Object.setPrototypeOf=="function")t=Object.setPrototypeOf;else{var r;e:{var i={xb:!0},a={};try{a.__proto__=i,r=a.xb;break e}catch{}r=!1}t=r?function(p,x){if(p.__proto__=x,p.__proto__!==x)throw new TypeError(p+" is not extensible");return p}:null}var o=t;function s(p,x){if(p.prototype=e(x.prototype),p.prototype.constructor=p,o)o(p,x);else for(var k in x)if(k!="prototype")if(Object.defineProperties){var N=Object.getOwnPropertyDescriptor(x,k);N&&Object.defineProperty(p,k,N)}else p[k]=x[k];p.K=x.prototype}var l=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,x,k){p!=Array.prototype&&p!=Object.prototype&&(p[x]=k.value)},c=typeof window<"u"&&window===this?this:typeof global<"u"&&global!=null?global:this;function u(p,x){if(x){var k=c;p=p.split(".");for(var N=0;N<p.length-1;N++){var V=p[N];V in k||(k[V]={}),k=k[V]}p=p[p.length-1],N=k[p],x=x(N),x!=N&&x!=null&&l(k,p,{configurable:!0,writable:!0,value:x})}}u("Object.is",function(p){return p||function(x,k){return x===k?x!==0||1/x===1/k:x!==x&&k!==k}}),u("Array.prototype.includes",function(p){return p||function(x,k){var N=this;N instanceof String&&(N=String(N));var V=N.length;for(k=k||0,0>k&&(k=Math.max(k+V,0));k<V;k++){var H=N[k];if(H===x||Object.is(H,x))return!0}return!1}});var d=this;function h(p){return p!==void 0}function f(p){return typeof p=="string"}var m=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(){}function w(p){p.W=void 0,p.Xa=function(){return p.W?p.W:p.W=new p}}function _(p){var x=typeof p;if(x=="object")if(p){if(p instanceof Array)return"array";if(p instanceof Object)return x;var k=Object.prototype.toString.call(p);if(k=="[object Window]")return"object";if(k=="[object Array]"||typeof p.length=="number"&&typeof p.splice<"u"&&typeof p.propertyIsEnumerable<"u"&&!p.propertyIsEnumerable("splice"))return"array";if(k=="[object Function]"||typeof p.call<"u"&&typeof p.propertyIsEnumerable<"u"&&!p.propertyIsEnumerable("call"))return"function"}else return"null";else if(x=="function"&&typeof p.call>"u")return"object";return x}function S(p){return _(p)=="array"}function A(p){var x=_(p);return x=="array"||x=="object"&&typeof p.length=="number"}function C(p){return _(p)=="function"}function D(p){var x=typeof p;return x=="object"&&p!=null||x=="function"}function M(p,x,k){return p.call.apply(p.bind,arguments)}function P(p,x,k){if(!p)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,N),p.apply(x,V)}}return function(){return p.apply(x,arguments)}}function O(p,x,k){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?O=M:O=P,O.apply(null,arguments)}function j(p,x){var k=Array.prototype.slice.call(arguments,1);return function(){var N=k.slice();return N.push.apply(N,arguments),p.apply(this,N)}}function L(p,x){for(var k in x)p[k]=x[k]}var B=Date.now||function(){return+new Date};function $(p,x){p=p.split(".");var k=d;p[0]in k||typeof k.execScript>"u"||k.execScript("var "+p[0]);for(var N;p.length&&(N=p.shift());)!p.length&&h(x)?k[N]=x:k[N]&&k[N]!==Object.prototype[N]?k=k[N]:k=k[N]={}}function Y(p,x){function k(){}k.prototype=x.prototype,p.K=x.prototype,p.prototype=new k,p.prototype.constructor=p,p.vc=function(N,V,H){for(var ne=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)ne[ue-2]=arguments[ue];return x.prototype[V].apply(N,ne)}}function q(p){if(Error.captureStackTrace)Error.captureStackTrace(this,q);else{var x=Error().stack;x&&(this.stack=x)}p&&(this.message=String(p))}Y(q,Error),q.prototype.name="CustomError";var W;function X(p,x){p=p.split("%s");for(var k="",N=p.length-1,V=0;V<N;V++)k+=p[V]+(V<x.length?x[V]:"%s");q.call(this,k+p[N])}Y(X,q),X.prototype.name="AssertionError";function te(p,x){throw new X("Failure"+(p?": "+p:""),Array.prototype.slice.call(arguments,1))}var re=Array.prototype.indexOf?function(p,x){return Array.prototype.indexOf.call(p,x,void 0)}:function(p,x){if(f(p))return f(x)&&x.length==1?p.indexOf(x,0):-1;for(var k=0;k<p.length;k++)if(k in p&&p[k]===x)return k;return-1},z=Array.prototype.forEach?function(p,x,k){Array.prototype.forEach.call(p,x,k)}:function(p,x,k){for(var N=p.length,V=f(p)?p.split(""):p,H=0;H<N;H++)H in V&&x.call(k,V[H],H,p)};function oe(p,x){for(var k=f(p)?p.split(""):p,N=p.length-1;0<=N;--N)N in k&&x.call(void 0,k[N],N,p)}var le=Array.prototype.filter?function(p,x){return Array.prototype.filter.call(p,x,void 0)}:function(p,x){for(var k=p.length,N=[],V=0,H=f(p)?p.split(""):p,ne=0;ne<k;ne++)if(ne in H){var ue=H[ne];x.call(void 0,ue,ne,p)&&(N[V++]=ue)}return N},ee=Array.prototype.map?function(p,x){return Array.prototype.map.call(p,x,void 0)}:function(p,x){for(var k=p.length,N=Array(k),V=f(p)?p.split(""):p,H=0;H<k;H++)H in V&&(N[H]=x.call(void 0,V[H],H,p));return N},be=Array.prototype.some?function(p,x){return Array.prototype.some.call(p,x,void 0)}:function(p,x){for(var k=p.length,N=f(p)?p.split(""):p,V=0;V<k;V++)if(V in N&&x.call(void 0,N[V],V,p))return!0;return!1};function he(p,x){return 0<=re(p,x)}function pe(p,x){x=re(p,x);var k;return(k=0<=x)&&ct(p,x),k}function ct(p,x){return Array.prototype.splice.call(p,x,1).length==1}function Be(p,x){e:{for(var k=p.length,N=f(p)?p.split(""):p,V=0;V<k;V++)if(V in N&&x.call(void 0,N[V],V,p)){x=V;break e}x=-1}0<=x&&ct(p,x)}function Se(p,x){var k=0;oe(p,function(N,V){x.call(void 0,N,V,p)&&ct(p,V)&&k++})}function _e(p){return Array.prototype.concat.apply([],arguments)}function me(p){var x=p.length;if(0<x){for(var k=Array(x),N=0;N<x;N++)k[N]=p[N];return k}return[]}function fe(p,x,k){return 2>=arguments.length?Array.prototype.slice.call(p,x):Array.prototype.slice.call(p,x,k)}var Ge=String.prototype.trim?function(p){return p.trim()}:function(p){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(p)[1]},Ve=/&/g,nt=/</g,we=/>/g,rt=/"/g,on=/'/g,Mt=/\x00/g,kn=/[\x00&<>"']/;function nr(p,x){return p<x?-1:p>x?1:0}function Le(p){return kn.test(p)&&(p.indexOf("&")!=-1&&(p=p.replace(Ve,"&amp;")),p.indexOf("<")!=-1&&(p=p.replace(nt,"&lt;")),p.indexOf(">")!=-1&&(p=p.replace(we,"&gt;")),p.indexOf('"')!=-1&&(p=p.replace(rt,"&quot;")),p.indexOf("'")!=-1&&(p=p.replace(on,"&#39;")),p.indexOf("\0")!=-1&&(p=p.replace(Mt,"&#0;"))),p}function Yt(p,x,k){for(var N in p)x.call(k,p[N],N,p)}function xn(p){var x={},k;for(k in p)x[k]=p[k];return x}var Ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(p,x){for(var k,N,V=1;V<arguments.length;V++){N=arguments[V];for(k in N)p[k]=N[k];for(var H=0;H<Ut.length;H++)k=Ut[H],Object.prototype.hasOwnProperty.call(N,k)&&(p[k]=N[k])}}var je="StopIteration"in d?d.StopIteration:{message:"StopIteration",stack:""};function tt(){}tt.prototype.next=function(){throw je},tt.prototype.ha=function(){return this};function Et(p){if(p instanceof tt)return p;if(typeof p.ha=="function")return p.ha(!1);if(A(p)){var x=0,k=new tt;return k.next=function(){for(;;){if(x>=p.length)throw je;if(x in p)return p[x++];x++}},k}throw Error("Not implemented")}function pt(p,x){if(A(p))try{z(p,x,void 0)}catch(k){if(k!==je)throw k}else{p=Et(p);try{for(;;)x.call(void 0,p.next(),void 0,p)}catch(k){if(k!==je)throw k}}}function Rr(p){if(A(p))return me(p);p=Et(p);var x=[];return pt(p,function(k){x.push(k)}),x}function vn(p,x){this.g={},this.a=[],this.j=this.h=0;var k=arguments.length;if(1<k){if(k%2)throw Error("Uneven number of arguments");for(var N=0;N<k;N+=2)this.set(arguments[N],arguments[N+1])}else if(p)if(p instanceof vn)for(k=p.ja(),N=0;N<k.length;N++)this.set(k[N],p.get(k[N]));else for(N in p)this.set(N,p[N])}n=vn.prototype,n.la=function(){Ur(this);for(var p=[],x=0;x<this.a.length;x++)p.push(this.g[this.a[x]]);return p},n.ja=function(){return Ur(this),this.a.concat()},n.clear=function(){this.g={},this.j=this.h=this.a.length=0};function Ur(p){if(p.h!=p.a.length){for(var x=0,k=0;x<p.a.length;){var N=p.a[x];Li(p.g,N)&&(p.a[k++]=N),x++}p.a.length=k}if(p.h!=p.a.length){var V={};for(k=x=0;x<p.a.length;)N=p.a[x],Li(V,N)||(p.a[k++]=N,V[N]=1),x++;p.a.length=k}}n.get=function(p,x){return Li(this.g,p)?this.g[p]:x},n.set=function(p,x){Li(this.g,p)||(this.h++,this.a.push(p),this.j++),this.g[p]=x},n.forEach=function(p,x){for(var k=this.ja(),N=0;N<k.length;N++){var V=k[N],H=this.get(V);p.call(x,H,V,this)}},n.ha=function(p){Ur(this);var x=0,k=this.j,N=this,V=new tt;return V.next=function(){if(k!=N.j)throw Error("The map has changed since the iterator was created");if(x>=N.a.length)throw je;var H=N.a[x++];return p?H:N.g[H]},V};function Li(p,x){return Object.prototype.hasOwnProperty.call(p,x)}var un=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dr(p,x){if(p){p=p.split("&");for(var k=0;k<p.length;k++){var N=p[k].indexOf("="),V=null;if(0<=N){var H=p[k].substring(0,N);V=p[k].substring(N+1)}else H=p[k];x(H,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function wi(p,x,k,N){for(var V=k.length;0<=(x=p.indexOf(k,x))&&x<N;){var H=p.charCodeAt(x-1);if((H==38||H==63)&&(H=p.charCodeAt(x+V),!H||H==61||H==38||H==35))return x;x+=V+1}return-1}var ze=/#|$/;function rr(p,x){var k=p.search(ze),N=wi(p,0,x,k);if(0>N)return null;var V=p.indexOf("&",N);return(0>V||V>k)&&(V=k),N+=x.length+1,decodeURIComponent(p.substr(N,V-N).replace(/\+/g," "))}var ji=/[?&]($|#)/;function Ln(p,x){this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1;var k;p instanceof Ln?(this.i=h(x)?x:p.i,Fi(this,p.j),this.A=p.A,this.h=p.h,Co(this,p.C),this.g=p.g,ae(this,Fe(p.a)),this.s=p.s):p&&(k=String(p).match(un))?(this.i=!!x,Fi(this,k[1]||"",!0),this.A=ge(k[2]||""),this.h=ge(k[3]||"",!0),Co(this,k[4]),this.g=ge(k[5]||"",!0),ae(this,k[6]||"",!0),this.s=ge(k[7]||"")):(this.i=!!x,this.a=new qt(null,this.i))}Ln.prototype.toString=function(){var p=[],x=this.j;x&&p.push(Me(x,xt,!0),":");var k=this.h;return(k||x=="file")&&(p.push("//"),(x=this.A)&&p.push(Me(x,xt,!0),"@"),p.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.C,k!=null&&p.push(":",String(k))),(k=this.g)&&(this.h&&k.charAt(0)!="/"&&p.push("/"),p.push(Me(k,k.charAt(0)=="/"?gt:Pt,!0))),(k=this.a.toString())&&p.push("?",k),(k=this.s)&&p.push("#",Me(k,Tt)),p.join("")};function Fi(p,x,k){p.j=k?ge(x,!0):x,p.j&&(p.j=p.j.replace(/:$/,""))}function Co(p,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);p.C=x}else p.C=null}function ae(p,x,k){x instanceof qt?(p.a=x,vt(p.a,p.i)):(k||(x=Me(x,Nt)),p.a=new qt(x,p.i))}function ce(p){return p instanceof Ln?new Ln(p):new Ln(p,void 0)}function ge(p,x){return p?x?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Me(p,x,k){return f(p)?(p=encodeURI(p).replace(x,it),k&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function it(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var xt=/[#\/\?@]/g,Pt=/[#\?:]/g,gt=/[#\?]/g,Nt=/[#\?@]/g,Tt=/#/g;function qt(p,x){this.g=this.a=null,this.h=p||null,this.j=!!x}function Hn(p){p.a||(p.a=new vn,p.g=0,p.h&&dr(p.h,function(x,k){p.add(decodeURIComponent(x.replace(/\+/g," ")),k)}))}n=qt.prototype,n.add=function(p,x){Hn(this),this.h=null,p=Qe(this,p);var k=this.a.get(p);return k||this.a.set(p,k=[]),k.push(x),this.g+=1,this};function di(p,x){Hn(p),x=Qe(p,x),Li(p.a.g,x)&&(p.h=null,p.g-=p.a.get(x).length,p=p.a,Li(p.g,x)&&(delete p.g[x],p.h--,p.j++,p.a.length>2*p.h&&Ur(p)))}n.clear=function(){this.a=this.h=null,this.g=0};function Ce(p,x){return Hn(p),x=Qe(p,x),Li(p.a.g,x)}n.forEach=function(p,x){Hn(this),this.a.forEach(function(k,N){z(k,function(V){p.call(x,V,N,this)},this)},this)},n.ja=function(){Hn(this);for(var p=this.a.la(),x=this.a.ja(),k=[],N=0;N<x.length;N++)for(var V=p[N],H=0;H<V.length;H++)k.push(x[N]);return k},n.la=function(p){Hn(this);var x=[];if(f(p))Ce(this,p)&&(x=_e(x,this.a.get(Qe(this,p))));else{p=this.a.la();for(var k=0;k<p.length;k++)x=_e(x,p[k])}return x},n.set=function(p,x){return Hn(this),this.h=null,p=Qe(this,p),Ce(this,p)&&(this.g-=this.a.get(p).length),this.a.set(p,[x]),this.g+=1,this},n.get=function(p,x){return p?(p=this.la(p),0<p.length?String(p[0]):x):x},n.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var p=[],x=this.a.ja(),k=0;k<x.length;k++){var N=x[k],V=encodeURIComponent(String(N));N=this.la(N);for(var H=0;H<N.length;H++){var ne=V;N[H]!==""&&(ne+="="+encodeURIComponent(String(N[H]))),p.push(ne)}}return this.h=p.join("&")};function Fe(p){var x=new qt;return x.h=p.h,p.a&&(x.a=new vn(p.a),x.g=p.g),x}function Qe(p,x){return x=String(x),p.j&&(x=x.toLowerCase()),x}function vt(p,x){x&&!p.j&&(Hn(p),p.h=null,p.a.forEach(function(k,N){var V=N.toLowerCase();N!=V&&(di(this,N),di(this,V),0<k.length&&(this.h=null,this.a.set(Qe(this,V),me(k)),this.g+=k.length))},p)),p.j=x}function ot(p){this.a=ce(p)}function wt(p,x){x?p.a.a.set(sn.Sa,x):di(p.a.a,sn.Sa)}function mt(p,x){x!==null?p.a.a.set(sn.Qa,x?"1":"0"):di(p.a.a,sn.Qa)}function Kt(p){return p.a.a.get(sn.Pa)||null}function Sn(p,x){x?p.a.a.set(sn.PROVIDER_ID,x):di(p.a.a,sn.PROVIDER_ID)}ot.prototype.toString=function(){return this.a.toString()};var sn={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"},Xt;e:{var jn=d.navigator;if(jn){var ni=jn.userAgent;if(ni){Xt=ni;break e}}Xt=""}function Lt(p){return Xt.indexOf(p)!=-1}function ri(){return(Lt("Chrome")||Lt("CriOS"))&&!Lt("Edge")}function Bn(p){return Bn[" "](p),p}Bn[" "]=y;function _a(p,x){var k=Ny;return Object.prototype.hasOwnProperty.call(k,p)?k[p]:k[p]=x(p)}var $i=Lt("Opera"),Qt=Lt("Trident")||Lt("MSIE"),Pa=Lt("Edge"),ph=Pa||Qt,sa=Lt("Gecko")&&!(Xt.toLowerCase().indexOf("webkit")!=-1&&!Lt("Edge"))&&!(Lt("Trident")||Lt("MSIE"))&&!Lt("Edge"),ra=Xt.toLowerCase().indexOf("webkit")!=-1&&!Lt("Edge"),Qg=ra&&Lt("Mobile"),kl=Lt("Macintosh");function Wf(){var p=d.document;return p?p.documentMode:void 0}var qa;e:{var Yf="",Ry=function(){var p=Xt;if(sa)return/rv:([^\);]+)(\)|;)/.exec(p);if(Pa)return/Edge\/([\d\.]+)/.exec(p);if(Qt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(p);if(ra)return/WebKit\/(\S+)/.exec(p);if($i)return/(?:Version)[ \/]?(\S+)/.exec(p)}();if(Ry&&(Yf=Ry?Ry[1]:""),Qt){var gh=Wf();if(gh!=null&&gh>parseFloat(Yf)){qa=String(gh);break e}}qa=Yf}var Ny={};function Xs(p){return _a(p,function(){for(var x=0,k=Ge(String(qa)).split("."),N=Ge(String(p)).split("."),V=Math.max(k.length,N.length),H=0;x==0&&H<V;H++){var ne=k[H]||"",ue=N[H]||"";do{if(ne=/(\d*)(\D*)(.*)/.exec(ne)||["","","",""],ue=/(\d*)(\D*)(.*)/.exec(ue)||["","","",""],ne[0].length==0&&ue[0].length==0)break;x=nr(ne[1].length==0?0:parseInt(ne[1],10),ue[1].length==0?0:parseInt(ue[1],10))||nr(ne[2].length==0,ue[2].length==0)||nr(ne[2],ue[2]),ne=ne[3],ue=ue[3]}while(x==0)}return 0<=x})}var Kf,la=d.document;Kf=la&&Qt?Wf()||(la.compatMode=="CSS1Compat"?parseInt(qa,10):5):void 0;function Ga(p,x){this.a=p===rd&&x||"",this.g=mh}Ga.prototype.ma=!0,Ga.prototype.ka=function(){return this.a},Ga.prototype.toString=function(){return"Const{"+this.a+"}"};var mh={},rd={};function Ko(){this.a="",this.h=Zs}Ko.prototype.ma=!0,Ko.prototype.ka=function(){return this.a.toString()},Ko.prototype.g=function(){return 1},Ko.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function Kr(p){return p instanceof Ko&&p.constructor===Ko&&p.h===Zs?p.a:(te("expected object of type TrustedResourceUrl, got '"+p+"' of type "+_(p)),"type_error:TrustedResourceUrl")}function Xf(){var p=U2;p instanceof Ga&&p.constructor===Ga&&p.g===mh?p=p.a:(te("expected object of type Const, got '"+p+"'"),p="type_error:Const");var x=new Ko;return x.a=p,x}var Zs={};function Oa(){this.a="",this.h=u_}Oa.prototype.ma=!0,Oa.prototype.ka=function(){return this.a.toString()},Oa.prototype.g=function(){return 1},Oa.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function sc(p){return p instanceof Oa&&p.constructor===Oa&&p.h===u_?p.a:(te("expected object of type SafeUrl, got '"+p+"' of type "+_(p)),"type_error:SafeUrl")}var Jg=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function vh(p){return p instanceof Oa?p:(p=typeof p=="object"&&p.ma?p.ka():String(p),Jg.test(p)||(p="about:invalid#zClosurez"),yh(p))}function c_(p){return p instanceof Oa?p:(p=typeof p=="object"&&p.ma?p.ka():String(p),Jg.test(p)||(p="about:invalid#zClosurez"),yh(p))}var u_={};function yh(p){var x=new Oa;return x.a=p,x}yh("about:blank");function ys(){this.a="",this.g=Qs}ys.prototype.ma=!0;var Qs={};ys.prototype.ka=function(){return this.a},ys.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function Do(){this.a="",this.j=em,this.h=null}Do.prototype.g=function(){return this.h},Do.prototype.ma=!0,Do.prototype.ka=function(){return this.a.toString()},Do.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function Il(p){return p instanceof Do&&p.constructor===Do&&p.j===em?p.a:(te("expected object of type SafeHtml, got '"+p+"' of type "+_(p)),"type_error:SafeHtml")}var em={};function bs(p,x){var k=new Do;return k.a=p,k.h=x,k}bs("<!DOCTYPE html>",0);var d_=bs("",0);bs("<br>",0);var Zf=function(p){var x=!1,k;return function(){return x||(k=p(),x=!0),k}}(function(){if(typeof document>"u")return!1;var p=document.createElement("div"),x=document.createElement("div");return x.appendChild(document.createElement("div")),p.appendChild(x),p.firstChild?(x=p.firstChild.firstChild,p.innerHTML=Il(d_),!x.parentElement):!1});function lc(p,x){if(p.src=Kr(x),v===null)e:{if(x=d.document,(x=x.querySelector&&x.querySelector("script[nonce]"))&&(x=x.nonce||x.getAttribute("nonce"))&&m.test(x)){v=x;break e}v=""}x=v,x&&p.setAttribute("nonce",x)}function so(p,x){x=x instanceof Oa?x:c_(x),p.assign(sc(x))}function ws(p,x){this.a=h(p)?p:0,this.g=h(x)?x:0}ws.prototype.toString=function(){return"("+this.a+", "+this.g+")"},ws.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},ws.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},ws.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this};function Ml(p,x){this.width=p,this.height=x}n=Ml.prototype,n.toString=function(){return"("+this.width+" x "+this.height+")"},n.aspectRatio=function(){return this.width/this.height},n.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},n.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},n.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};function cc(p){return p?new bh(Zc(p)):W||(W=new bh)}function uc(p,x){var k=x||document;return k.querySelectorAll&&k.querySelector?k.querySelectorAll("."+p):dc(document,p,x)}function Qf(p,x){var k=x||document;if(k.getElementsByClassName)p=k.getElementsByClassName(p)[0];else{k=document;var N=x||k;p=N.querySelectorAll&&N.querySelector&&p?N.querySelector(p?"."+p:""):dc(k,p,x)[0]||null}return p||null}function dc(p,x,k){var N;if(p=k||p,p.querySelectorAll&&p.querySelector&&x)return p.querySelectorAll(x?"."+x:"");if(x&&p.getElementsByClassName){var V=p.getElementsByClassName(x);return V}if(V=p.getElementsByTagName("*"),x){var H={};for(k=N=0;p=V[k];k++){var ne=p.className;typeof ne.split=="function"&&he(ne.split(/\s+/),x)&&(H[N++]=p)}return H.length=N,H}return V}function Xc(p,x){Yt(x,function(k,N){k&&typeof k=="object"&&k.ma&&(k=k.ka()),N=="style"?p.style.cssText=k:N=="class"?p.className=k:N=="for"?p.htmlFor=k:tm.hasOwnProperty(N)?p.setAttribute(tm[N],k):N.lastIndexOf("aria-",0)==0||N.lastIndexOf("data-",0)==0?p.setAttribute(N,k):p[N]=k})}var tm={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ca(p){return p.scrollingElement?p.scrollingElement:(ra||p.compatMode!="CSS1Compat")&&p.body||p.documentElement}function pr(p){p&&p.parentNode&&p.parentNode.removeChild(p)}function Zc(p){return p.nodeType==9?p:p.ownerDocument||p.document}function id(p,x){if("textContent"in p)p.textContent=x;else if(p.nodeType==3)p.data=String(x);else if(p.firstChild&&p.firstChild.nodeType==3){for(;p.lastChild!=p.firstChild;)p.removeChild(p.lastChild);p.firstChild.data=String(x)}else{for(var k;k=p.firstChild;)p.removeChild(k);p.appendChild(Zc(p).createTextNode(String(x)))}}function Ly(p,x){return x?nm(p,function(k){return!x||f(k.className)&&he(k.className.split(/\s+/),x)}):null}function nm(p,x){for(var k=0;p;){if(x(p))return p;p=p.parentNode,k++}return null}function bh(p){this.a=p||d.document||document}bh.prototype.N=function(){return f(void 0)?this.a.getElementById(void 0):void 0};var Js={Fc:!0},wh={Hc:!0},Pl={},jy={Gc:!0};function Qc(){throw Error("Do not instantiate directly")}Qc.prototype.va=null,Qc.prototype.toString=function(){return this.content};function hc(p,x,k,N){if(p=p(x||im,void 0,k),N=(N||cc()).a.createElement("DIV"),p=rm(p),p.match(Fy),p=bs(p,null),Zf())for(;N.lastChild;)N.removeChild(N.lastChild);return N.innerHTML=Il(p),N.childNodes.length==1&&(p=N.firstChild,p.nodeType==1&&(N=p)),N}function rm(p){if(!D(p))return Le(String(p));if(p instanceof Qc){if(p.fa===Js)return p.content;if(p.fa===jy)return Le(p.content)}return te("Soy template output is unsafe for use as HTML: "+p),"zSoyz"}var Fy=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,im={};function h_(p){if(p!=null)switch(p.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}function ad(){Qc.call(this)}Y(ad,Qc),ad.prototype.fa=Js;function gn(p){return p!=null&&p.fa===Js?p:p instanceof Do?Ct(Il(p).toString(),p.g()):Ct(Le(String(String(p))),h_(p))}function _h(){Qc.call(this)}Y(_h,Qc),_h.prototype.fa=wh,_h.prototype.va=1;function Jc(p,x){this.content=String(p),this.va=x??null}Y(Jc,Qc),Jc.prototype.fa=jy;function gr(p){return new Jc(p,void 0)}var Ct=function(p){function x(k){this.content=k}return x.prototype=p.prototype,function(k,N){return k=new x(String(k)),N!==void 0&&(k.va=N),k}}(ad),$y=function(p){function x(k){this.content=k}return x.prototype=p.prototype,function(k){return new x(String(k))}}(_h);function Jf(p){function x(){}var k={label:Ii("New password")};x.prototype=p,p=new x;for(var N in k)p[N]=k[N];return p}function Ii(p){return(p=String(p))?new Jc(p,void 0):""}var ep=function(p){function x(k){this.content=k}return x.prototype=p.prototype,function(k,N){return k=String(k),k?(k=new x(k),N!==void 0&&(k.va=N),k):""}}(ad);function Wa(p){return p!=null&&p.fa===Js?String(String(p.content).replace(tu,"").replace(R,"&lt;")).replace(om,p_):Le(String(p))}function fc(p){return p!=null&&p.fa===wh?p=String(p).replace(lo,am):p instanceof Oa?p=String(sc(p).toString()).replace(lo,am):(p=String(p),v_.test(p)?p=p.replace(lo,am):(te("Bad value `%s` for |filterNormalizeUri",[p]),p="#zSoyz")),p}function eu(p){return p!=null&&p.fa===Pl?p=p.content:p==null?p="":p instanceof ys?p instanceof ys&&p.constructor===ys&&p.g===Qs?p=p.a:(te("expected object of type SafeStyle, got '"+p+"' of type "+_(p)),p="type_error:SafeStyle"):(p=String(p),m_.test(p)||(te("Bad value `%s` for |filterCssValue",[p]),p="zSoyz")),p}var f_={"\0":"&#0;","	":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function p_(p){return f_[p]}var g_={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","\x07":"%07","\b":"%08","	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","\x1B":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function am(p){return g_[p]}var om=/[\x00\x22\x27\x3c\x3e]/g,lo=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,m_=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,v_=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,tu=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,R=/</g;function G(){return gr("Enter a valid phone number")}function Q(){return gr("Unable to send password reset code to specified email")}function se(){return gr("Something went wrong. Please try again.")}function Ee(){return gr("This email already exists without any means of sign-in. Please reset the password to recover.")}function Ne(p){p=p||{};var x="";switch(p.code){case"invalid-argument":x+="Client specified an invalid argument.";break;case"invalid-configuration":x+="Client specified an invalid project configuration.";break;case"failed-precondition":x+="Request can not be executed in the current system state.";break;case"out-of-range":x+="Client specified an invalid range.";break;case"unauthenticated":x+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":x+="Client does not have sufficient permission.";break;case"not-found":x+="Specified resource is not found.";break;case"aborted":x+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":x+="The resource that a client tried to create already exists.";break;case"resource-exhausted":x+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":x+="Request cancelled by the client.";break;case"data-loss":x+="Unrecoverable data loss or data corruption.";break;case"unknown":x+="Unknown server error.";break;case"internal":x+="Internal server error.";break;case"not-implemented":x+="API method not implemented by the server.";break;case"unavailable":x+="Service unavailable.";break;case"deadline-exceeded":x+="Request deadline exceeded.";break;case"auth/user-disabled":x+="The user account has been disabled by an administrator.";break;case"auth/timeout":x+="The operation has timed out.";break;case"auth/too-many-requests":x+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":x+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":x+="A network error has occurred. Try again later.";break;case"restart-process":x+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":x+="No sign-in provider is available for the given email, please try with a different email."}return gr(x)}function ht(){return gr("Please login again to perform this operation")}function lr(p,x,k){var N=Error.call(this);if(this.message=N.message,"stack"in N&&(this.stack=N.stack),this.code=Ra+p,!(p=x)){switch(p="",this.code){case"firebaseui/merge-conflict":p+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:p+=se()}p=gr(p).toString()}this.message=p||"",this.credential=k||null}s(lr,Error),lr.prototype.toJSON=function(){return{code:this.code,message:this.message}};var Ra="firebaseui/";function Kn(){this.T=this.T,this.C=this.C}var Ya=0;Kn.prototype.T=!1,Kn.prototype.m=function(){!this.T&&(this.T=!0,this.o(),Ya!=0)};function Ki(p,x){p.T?h(void 0)?x.call(void 0):x():(p.C||(p.C=[]),p.C.push(h(void 0)?O(x,void 0):x))}Kn.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function el(p){p&&typeof p.m=="function"&&p.m()}var co=Object.freeze||function(p){return p},pc=!Qt||9<=Number(Kf),By=Qt&&!Xs("9"),y_=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var p=!1,x=Object.defineProperty({},"passive",{get:function(){p=!0}});try{d.addEventListener("test",y,x),d.removeEventListener("test",y,x)}catch{}return p}();function nu(p,x){this.type=p,this.g=this.target=x,this.h=!1,this.qb=!0}nu.prototype.stopPropagation=function(){this.h=!0},nu.prototype.preventDefault=function(){this.qb=!1};function ko(p,x){if(nu.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,p){var k=this.type=p.type,N=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=x,x=p.relatedTarget){if(sa){e:{try{Bn(x.nodeName);var V=!0;break e}catch{}V=!1}V||(x=null)}}else k=="mouseover"?x=p.fromElement:k=="mouseout"&&(x=p.toElement);this.relatedTarget=x,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.keyCode=p.keyCode||0,this.key=p.key||"",this.j=p.charCode||(k=="keypress"?p.keyCode:0),this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=f(p.pointerType)?p.pointerType:KT[p.pointerType]||"",this.a=p,p.defaultPrevented&&this.preventDefault()}}Y(ko,nu);var KT=co({2:"touch",3:"pen",4:"mouse"});ko.prototype.stopPropagation=function(){ko.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},ko.prototype.preventDefault=function(){ko.K.preventDefault.call(this);var p=this.a;if(p.preventDefault)p.preventDefault();else if(p.returnValue=!1,By)try{(p.ctrlKey||112<=p.keyCode&&123>=p.keyCode)&&(p.keyCode=-1)}catch{}};var tp="closure_listenable_"+(1e6*Math.random()|0),N2=0;function L2(p,x,k,N,V){this.listener=p,this.proxy=null,this.src=x,this.type=k,this.capture=!!N,this.La=V,this.key=++N2,this.sa=this.Ia=!1}function Uy(p){p.sa=!0,p.listener=null,p.proxy=null,p.src=null,p.La=null}function b_(p){this.src=p,this.a={},this.g=0}b_.prototype.add=function(p,x,k,N,V){var H=p.toString();p=this.a[H],p||(p=this.a[H]=[],this.g++);var ne=ZT(p,x,N,V);return-1<ne?(x=p[ne],k||(x.Ia=!1)):(x=new L2(x,this.src,H,!!N,V),x.Ia=k,p.push(x)),x};function XT(p,x){var k=x.type;k in p.a&&pe(p.a[k],x)&&(Uy(x),p.a[k].length==0&&(delete p.a[k],p.g--))}function ZT(p,x,k,N){for(var V=0;V<p.length;++V){var H=p[V];if(!H.sa&&H.listener==x&&H.capture==!!k&&H.La==N)return V}return-1}var QT="closure_lm_"+(1e6*Math.random()|0),JT={};function Xi(p,x,k,N,V){if(N&&N.once)return lm(p,x,k,N,V);if(S(x)){for(var H=0;H<x.length;H++)Xi(p,x[H],k,N,V);return null}return k=__(k),p&&p[tp]?p.J.add(String(x),k,!1,D(N)?!!N.capture:!!N,V):sm(p,x,k,!1,N,V)}function sm(p,x,k,N,V,H){if(!x)throw Error("Invalid event type");var ne=D(V)?!!V.capture:!!V,ue=Sh(p);if(ue||(p[QT]=ue=new b_(p)),k=ue.add(x,k,N,ne,H),k.proxy)return k;if(N=j2(),k.proxy=N,N.src=p,N.listener=k,p.addEventListener)y_||(V=ne),V===void 0&&(V=!1),p.addEventListener(x.toString(),N,V);else if(p.attachEvent)p.attachEvent(w_(x.toString()),N);else if(p.addListener&&p.removeListener)p.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return k}function j2(){var p=eE,x=pc?function(k){return p.call(x.src,x.listener,k)}:function(k){if(k=p.call(x.src,x.listener,k),!k)return k};return x}function lm(p,x,k,N,V){if(S(x)){for(var H=0;H<x.length;H++)lm(p,x[H],k,N,V);return null}return k=__(k),p&&p[tp]?p.J.add(String(x),k,!0,D(N)?!!N.capture:!!N,V):sm(p,x,k,!0,N,V)}function xh(p,x,k,N,V){if(S(x))for(var H=0;H<x.length;H++)xh(p,x[H],k,N,V);else N=D(N)?!!N.capture:!!N,k=__(k),p&&p[tp]?(p=p.J,x=String(x).toString(),x in p.a&&(H=p.a[x],k=ZT(H,k,N,V),-1<k&&(Uy(H[k]),ct(H,k),H.length==0&&(delete p.a[x],p.g--)))):p&&(p=Sh(p))&&(x=p.a[x.toString()],p=-1,x&&(p=ZT(x,k,N,V)),(k=-1<p?x[p]:null)&&od(k))}function od(p){if(typeof p!="number"&&p&&!p.sa){var x=p.src;if(x&&x[tp])XT(x.J,p);else{var k=p.type,N=p.proxy;x.removeEventListener?x.removeEventListener(k,N,p.capture):x.detachEvent?x.detachEvent(w_(k),N):x.addListener&&x.removeListener&&x.removeListener(N),(k=Sh(x))?(XT(k,p),k.g==0&&(k.src=null,x[QT]=null)):Uy(p)}}}function w_(p){return p in JT?JT[p]:JT[p]="on"+p}function F2(p,x,k,N){var V=!0;if((p=Sh(p))&&(x=p.a[x.toString()]))for(x=x.concat(),p=0;p<x.length;p++){var H=x[p];H&&H.capture==k&&!H.sa&&(H=np(H,N),V=V&&H!==!1)}return V}function np(p,x){var k=p.listener,N=p.La||p.src;return p.Ia&&od(p),k.call(N,x)}function eE(p,x){if(p.sa)return!0;if(!pc){if(!x)e:{x=["window","event"];for(var k=d,N=0;N<x.length;N++)if(k=k[x[N]],k==null){x=null;break e}x=k}if(N=x,x=new ko(N,this),k=!0,!(0>N.keyCode||N.returnValue!=null)){e:{var V=!1;if(N.keyCode==0)try{N.keyCode=-1;break e}catch{V=!0}(V||N.returnValue==null)&&(N.returnValue=!0)}for(N=[],V=x.g;V;V=V.parentNode)N.push(V);for(p=p.type,V=N.length-1;!x.h&&0<=V;V--){x.g=N[V];var H=F2(N[V],p,!0,x);k=k&&H}for(V=0;!x.h&&V<N.length;V++)x.g=N[V],H=F2(N[V],p,!1,x),k=k&&H}return k}return np(p,new ko(x,this))}function Sh(p){return p=p[QT],p instanceof b_?p:null}var Vy="__closure_events_fn_"+(1e9*Math.random()>>>0);function __(p){return C(p)?p:(p[Vy]||(p[Vy]=function(x){return p.handleEvent(x)}),p[Vy])}function _i(){Kn.call(this),this.J=new b_(this),this.wb=this,this.Ha=null}Y(_i,Kn),_i.prototype[tp]=!0,_i.prototype.Za=function(p){this.Ha=p},_i.prototype.removeEventListener=function(p,x,k,N){xh(this,p,x,k,N)};function tl(p,x){var k,N=p.Ha;if(N)for(k=[];N;N=N.Ha)k.push(N);if(p=p.wb,N=x.type||x,f(x))x=new nu(x,p);else if(x instanceof nu)x.target=x.target||p;else{var V=x;x=new nu(N,p),Ae(x,V)}if(V=!0,k)for(var H=k.length-1;!x.h&&0<=H;H--){var ne=x.g=k[H];V=cm(ne,N,!0,x)&&V}if(x.h||(ne=x.g=p,V=cm(ne,N,!0,x)&&V,x.h||(V=cm(ne,N,!1,x)&&V)),k)for(H=0;!x.h&&H<k.length;H++)ne=x.g=k[H],V=cm(ne,N,!1,x)&&V;return V}_i.prototype.o=function(){if(_i.K.o.call(this),this.J){var p=this.J,x;for(x in p.a){for(var k=p.a[x],N=0;N<k.length;N++)Uy(k[N]);delete p.a[x],p.g--}}this.Ha=null};function cm(p,x,k,N){if(x=p.J.a[String(x)],!x)return!0;x=x.concat();for(var V=!0,H=0;H<x.length;++H){var ne=x[H];if(ne&&!ne.sa&&ne.capture==k){var ue=ne.listener,Re=ne.La||ne.src;ne.Ia&&XT(p.J,ne),V=ue.call(Re,N)!==!1&&V}}return V&&N.qb!=0}var _s={},Th=0;function tE(p,x){if(!p)throw Error("Event target element must be provided!");if(p=x_(p),_s[p]&&_s[p].length)for(var k=0;k<_s[p].length;k++)tl(_s[p][k],x)}function $2(p){var x=x_(p.N());_s[x]&&_s[x].length&&(Be(_s[x],function(k){return k==p}),_s[x].length||delete _s[x])}function x_(p){return typeof p.a>"u"&&(p.a=Th,Th++),p.a}function S_(p){if(!p)throw Error("Event target element must be provided!");_i.call(this),this.a=p}s(S_,_i),S_.prototype.N=function(){return this.a},S_.prototype.register=function(){var p=x_(this.N());_s[p]?he(_s[p],this)||_s[p].push(this):_s[p]=[this]};function B2(p){if(!p)return!1;try{return!!p.$goog_Thenable}catch{return!1}}function nE(p,x){this.h=p,this.j=x,this.g=0,this.a=null}nE.prototype.get=function(){if(0<this.g){this.g--;var p=this.a;this.a=p.next,p.next=null}else p=this.h();return p};function rE(p,x){p.j(x),100>p.g&&(p.g++,x.next=p.a,p.a=x)}function iE(){this.g=this.a=null}var T_=new nE(function(){return new E_},function(p){p.reset()});iE.prototype.add=function(p,x){var k=T_.get();k.set(p,x),this.g?this.g.next=k:this.a=k,this.g=k};function gc(){var p=ip,x=null;return p.a&&(x=p.a,p.a=p.a.next,p.a||(p.g=null),x.next=null),x}function E_(){this.next=this.g=this.a=null}E_.prototype.set=function(p,x){this.a=p,this.g=x,this.next=null},E_.prototype.reset=function(){this.next=this.g=this.a=null};function nl(p){d.setTimeout(function(){throw p},0)}var xs;function um(){var p=d.MessageChannel;if(typeof p>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Lt("Presto")&&(p=function(){var V=document.createElement("IFRAME");V.style.display="none",V.src="",document.documentElement.appendChild(V);var H=V.contentWindow;V=H.document,V.open(),V.write(""),V.close();var ne="callImmediate"+Math.random(),ue=H.location.protocol=="file:"?"*":H.location.protocol+"//"+H.location.host;V=O(function(Re){(ue=="*"||Re.origin==ue)&&Re.data==ne&&this.port1.onmessage()},this),H.addEventListener("message",V,!1),this.port1={},this.port2={postMessage:function(){H.postMessage(ne,ue)}}}),typeof p<"u"&&!Lt("Trident")&&!Lt("MSIE")){var x=new p,k={},N=k;return x.port1.onmessage=function(){if(h(k.next)){k=k.next;var V=k.gb;k.gb=null,V()}},function(V){N.next={gb:V},N=N.next,x.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in document.createElement("SCRIPT")?function(V){var H=document.createElement("SCRIPT");H.onreadystatechange=function(){H.onreadystatechange=null,H.parentNode.removeChild(H),H=null,V(),V=null},document.documentElement.appendChild(H)}:function(V){d.setTimeout(V,0)}}function zy(p,x){rp||A_(),Hy||(rp(),Hy=!0),ip.add(p,x)}var rp;function A_(){if(d.Promise&&d.Promise.resolve){var p=d.Promise.resolve(void 0);rp=function(){p.then(aE)}}else rp=function(){var x=aE;!C(d.setImmediate)||d.Window&&d.Window.prototype&&!Lt("Edge")&&d.Window.prototype.setImmediate==d.setImmediate?(xs||(xs=um()),xs(x)):d.setImmediate(x)}}var Hy=!1,ip=new iE;function aE(){for(var p;p=gc();){try{p.a.call(p.g)}catch(x){nl(x)}rE(T_,p)}Hy=!1}function Zi(p){if(this.a=Ol,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,p!=y)try{var x=this;p.call(void 0,function(k){Nl(x,qy,k)},function(k){if(!(k instanceof Ll))try{throw k instanceof Error?k:Error("Promise rejected.")}catch{}Nl(x,ua,k)})}catch(k){Nl(this,ua,k)}}var Ol=0,qy=2,ua=3;function C_(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}C_.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var ru=new nE(function(){return new C_},function(p){p.reset()});function D_(p,x,k){var N=ru.get();return N.s=p,N.g=x,N.j=k,N}function Mi(p){if(p instanceof Zi)return p;var x=new Zi(y);return Nl(x,qy,p),x}function Rl(p){return new Zi(function(x,k){k(p)})}Zi.prototype.then=function(p,x,k){return ap(this,C(p)?p:null,C(x)?x:null,k)},Zi.prototype.$goog_Thenable=!0,n=Zi.prototype,n.fc=function(p,x){return p=D_(p,p,x),p.h=!0,Gy(this,p),this},n.Ca=function(p,x){return ap(this,null,p,x)},n.cancel=function(p){this.a==Ol&&zy(function(){var x=new Ll(p);k_(this,x)},this)};function k_(p,x){if(p.a==Ol)if(p.h){var k=p.h;if(k.g){for(var N=0,V=null,H=null,ne=k.g;ne&&(ne.h||(N++,ne.a==p&&(V=ne),!(V&&1<N)));ne=ne.next)V||(H=ne);V&&(k.a==Ol&&N==1?k_(k,x):(H?(N=H,N.next==k.j&&(k.j=N),N.next=N.next.next):rl(k),il(k,V,ua,x)))}p.h=null}else Nl(p,ua,x)}function Gy(p,x){p.g||p.a!=qy&&p.a!=ua||Wy(p),p.j?p.j.next=x:p.g=x,p.j=x}function ap(p,x,k,N){var V=D_(null,null,null);return V.a=new Zi(function(H,ne){V.s=x?function(ue){try{var Re=x.call(N,ue);H(Re)}catch(at){ne(at)}}:H,V.g=k?function(ue){try{var Re=k.call(N,ue);!h(Re)&&ue instanceof Ll?ne(ue):H(Re)}catch(at){ne(at)}}:ne}),V.a.h=p,Gy(p,V),V.a}n.hc=function(p){this.a=Ol,Nl(this,qy,p)},n.ic=function(p){this.a=Ol,Nl(this,ua,p)};function Nl(p,x,k){if(p.a==Ol){p===k&&(x=ua,k=new TypeError("Promise cannot resolve to itself")),p.a=1;e:{var N=k,V=p.hc,H=p.ic;if(N instanceof Zi){Gy(N,D_(V||y,H||null,p));var ne=!0}else if(B2(N))N.then(V,H,p),ne=!0;else{if(D(N))try{var ue=N.then;if(C(ue)){I_(N,ue,V,H,p),ne=!0;break e}}catch(Re){H.call(p,Re),ne=!0;break e}ne=!1}}ne||(p.A=k,p.a=x,p.h=null,Wy(p),x!=ua||k instanceof Ll||sd(p,k))}}function I_(p,x,k,N,V){function H(Re){ue||(ue=!0,N.call(V,Re))}function ne(Re){ue||(ue=!0,k.call(V,Re))}var ue=!1;try{x.call(p,ne,H)}catch(Re){H(Re)}}function Wy(p){p.i||(p.i=!0,zy(p.Hb,p))}function rl(p){var x=null;return p.g&&(x=p.g,p.g=x.next,x.next=null),p.g||(p.j=null),x}n.Hb=function(){for(var p;p=rl(this);)il(this,p,this.a,this.A);this.i=!1};function il(p,x,k,N){if(k==ua&&x.g&&!x.h)for(;p&&p.s;p=p.h)p.s=!1;if(x.a)x.a.h=null,Eh(x,k,N);else try{x.h?x.s.call(x.j):Eh(x,k,N)}catch(V){iu.call(null,V)}rE(ru,x)}function Eh(p,x,k){x==qy?p.s.call(p.j,k):p.g&&p.g.call(p.j,k)}function sd(p,x){p.s=!0,zy(function(){p.s&&iu.call(null,x)})}var iu=nl;function Ll(p){q.call(this,p)}Y(Ll,q),Ll.prototype.name="cancel";function oE(p,x,k){x||(x={}),k=k||window;var N=p instanceof Oa?p:vh(typeof p.href<"u"?p.href:String(p));p=x.target||p.target;var V=[];for(H in x)switch(H){case"width":case"height":case"top":case"left":V.push(H+"="+x[H]);break;case"target":case"noopener":case"noreferrer":break;default:V.push(H+"="+(x[H]?1:0))}var H=V.join(",");return(Lt("iPhone")&&!Lt("iPod")&&!Lt("iPad")||Lt("iPad")||Lt("iPod"))&&k.navigator&&k.navigator.standalone&&p&&p!="_self"?(H=k.document.createElement("A"),N=N instanceof Oa?N:c_(N),H.href=sc(N),H.setAttribute("target",p),x.noreferrer&&H.setAttribute("rel","noreferrer"),x=document.createEvent("MouseEvent"),x.initMouseEvent("click",!0,!0,k,1),H.dispatchEvent(x),k={}):x.noreferrer?(k=k.open("",p,H),x=sc(N).toString(),k&&(ph&&x.indexOf(";")!=-1&&(x="'"+x.replace(/'/g,"%27")+"'"),k.opener=null,x=bs('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Le(x)+'">',null),k.document.write(Il(x)),k.document.close())):(k=k.open(sc(N).toString(),p,H))&&x.noopener&&(k.opener=null),k}function M_(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch{}return!1}function Ah(p){oE(p,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function Ka(p,x){if(p=D(p)&&p.nodeType==1?p:document.querySelector(String(p)),p==null)throw Error(x||"Cannot find element.");return p}function Vr(){return window.location.href}function Nr(){var p=null;return new Zi(function(x){d.document.readyState=="complete"?x():(p=function(){x()},lm(window,"load",p))}).Ca(function(x){throw xh(window,"load",p),x})}function op(){for(var p=32,x=[];0<p;)x.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),p--;return x.join("")}function au(p,x,k){return k=k===void 0?{}:k,Object.keys(p).filter(function(N){return x.includes(N)}).reduce(function(N,V){return N[V]=p[V],N},k)}function ou(p){var x=ud;this.s=[],this.T=x,this.O=p||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}ou.prototype.cancel=function(p){if(this.a)this.h instanceof ou&&this.h.cancel();else{if(this.g){var x=this.g;delete this.g,p?x.cancel(p):(x.C--,0>=x.C&&x.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(p=new ld,Yy(this),mc(this,!1,p))}},ou.prototype.L=function(p,x){this.A=!1,mc(this,p,x)};function mc(p,x,k){p.a=!0,p.h=k,p.j=!x,hm(p)}function Yy(p){if(p.a){if(!p.J)throw new Ky;p.J=!1}}ou.prototype.callback=function(p){Yy(this),mc(this,!0,p)};function sE(p,x,k){p.s.push([x,k,void 0]),p.a&&hm(p)}ou.prototype.then=function(p,x,k){var N,V,H=new Zi(function(ne,ue){N=ne,V=ue});return sE(this,N,function(ne){ne instanceof ld?H.cancel():V(ne)}),H.then(p,x,k)},ou.prototype.$goog_Thenable=!0;function dm(p){return be(p.s,function(x){return C(x[1])})}function hm(p){if(p.i&&p.a&&dm(p)){var x=p.i,k=su[x];k&&(d.clearTimeout(k.a),delete su[x]),p.i=0}p.g&&(p.g.C--,delete p.g),x=p.h;for(var N=k=!1;p.s.length&&!p.A;){var V=p.s.shift(),H=V[0],ne=V[1];if(V=V[2],H=p.j?ne:H)try{var ue=H.call(V||p.O,x);h(ue)&&(p.j=p.j&&(ue==x||ue instanceof Error),p.h=x=ue),(B2(x)||typeof d.Promise=="function"&&x instanceof d.Promise)&&(N=!0,p.A=!0)}catch(Re){x=Re,p.j=!0,dm(p)||(k=!0)}}p.h=x,N&&(ue=O(p.L,p,!0),N=O(p.L,p,!1),x instanceof ou?(sE(x,ue,N),x.l=!0):x.then(ue,N)),k&&(x=new P_(x),su[x.a]=x,p.i=x.a)}function Ky(){q.call(this)}Y(Ky,q),Ky.prototype.message="Deferred has already fired",Ky.prototype.name="AlreadyCalledError";function ld(){q.call(this)}Y(ld,q),ld.prototype.message="Deferred was canceled",ld.prototype.name="CanceledError";function P_(p){this.a=d.setTimeout(O(this.h,this),0),this.g=p}P_.prototype.h=function(){throw delete su[this.a],this.g};var su={};function cd(p){var x={},k=x.document||document,N=Kr(p).toString(),V=document.createElement("SCRIPT"),H={rb:V,sb:void 0},ne=new ou(H),ue=null,Re=x.timeout!=null?x.timeout:5e3;return 0<Re&&(ue=window.setTimeout(function(){fm(V,!0);var at=new pm(Xy,"Timeout reached for loading script "+N);Yy(ne),mc(ne,!1,at)},Re),H.sb=ue),V.onload=V.onreadystatechange=function(){V.readyState&&V.readyState!="loaded"&&V.readyState!="complete"||(fm(V,x.xc||!1,ue),ne.callback(null))},V.onerror=function(){fm(V,!0,ue);var at=new pm(lE,"Error while loading script "+N);Yy(ne),mc(ne,!1,at)},H=x.attributes||{},Ae(H,{type:"text/javascript",charset:"UTF-8"}),Xc(V,H),lc(V,p),Ch(k).appendChild(V),ne}function Ch(p){var x=(p||document).getElementsByTagName("HEAD");return x&&x.length!=0?x[0]:p.documentElement}function ud(){if(this&&this.rb){var p=this.rb;p&&p.tagName=="SCRIPT"&&fm(p,!0,this.sb)}}function fm(p,x,k){k!=null&&d.clearTimeout(k),p.onload=y,p.onerror=y,p.onreadystatechange=y,x&&window.setTimeout(function(){pr(p)},0)}var lE=0,Xy=1;function pm(p,x){var k="Jsloader error (code #"+p+")";x&&(k+=": "+x),q.call(this,k),this.code=p}Y(pm,q);function vc(){return d.google&&d.google.accounts&&d.google.accounts.id||null}function Xa(p){this.a=p||vc(),this.h=!1,this.g=null}Xa.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())};function Zy(p,x,k){if(p.a&&x)return function(){return p.h=!0,new Zi(function(V){p.g=V,p.a.initialize({client_id:x,callback:V,auto_select:!k}),p.a.prompt()})}();if(x){var N=cE.Xa().load().then(function(){return p.a=vc(),Zy(p,x,k)}).Ca(function(){return null});return Mi(N)}return Mi(null)}w(Xa);var U2=new Ga(rd,"https://accounts.google.com/gsi/client");function cE(){this.a=null}cE.prototype.load=function(){var p=this;if(this.a)return this.a;var x=Xf();return vc()?Mi():this.a=Nr().then(function(){if(!vc())return new Zi(function(k,N){var V=setTimeout(function(){p.a=null,N(Error("Network error!"))},1e4);d.onGoogleLibraryLoad=function(){clearTimeout(V),k()},Mi(cd(x)).then(function(){vc()&&k()}).Ca(function(H){clearTimeout(V),p.a=null,N(H)})})})},w(cE);function uE(p,x){this.a=p,this.g=x||function(k){throw k}}uE.prototype.confirm=function(p){return Mi(this.a.confirm(p)).Ca(this.g)};function dE(p,x,k){this.reset(p,x,k,void 0,void 0)}dE.prototype.a=null,dE.prototype.reset=function(p,x,k,N,V){this.h=N||B(),this.j=p,this.s=x,this.g=k,delete this.a};function da(p){this.s=p,this.a=this.h=this.j=this.g=null}function gm(p,x){this.name=p,this.value=x}gm.prototype.toString=function(){return this.name};var mm=new gm("SEVERE",1e3),vm=new gm("WARNING",900),O_=new gm("CONFIG",700);function sp(p){return p.j?p.j:p.g?sp(p.g):(te("Root logger has no level set."),null)}da.prototype.log=function(p,x,k){if(p.value>=sp(this).value)for(C(x)&&(x=x()),p=new dE(p,String(x),this.s),k&&(p.a=k),k=this;k;){var N=k,V=p;if(N.a)for(var H=0;x=N.a[H];H++)x(V);k=k.g}};var Dh={},Qy=null;function hE(){Qy||(Qy=new da(""),Dh[""]=Qy,Qy.j=O_)}function V2(p){hE();var x;if(!(x=Dh[p])){x=new da(p);var k=p.lastIndexOf("."),N=p.substr(k+1);k=V2(p.substr(0,k)),k.h||(k.h={}),k.h[N]=x,x.g=k,Dh[p]=x}return x}function Jy(){this.a=B()}var dd=null;Jy.prototype.set=function(p){this.a=p},Jy.prototype.reset=function(){this.set(B())},Jy.prototype.get=function(){return this.a};function lp(p){this.j=p||"",dd||(dd=new Jy),this.s=dd}lp.prototype.a=!0,lp.prototype.g=!0,lp.prototype.h=!1;function lu(p){return 10>p?"0"+p:String(p)}function z2(p,x){p=(p.h-x)/1e3,x=p.toFixed(3);var k=0;if(1>p)k=2;else for(;100>p;)k++,p*=10;for(;0<k--;)x=" "+x;return x}function ym(p){lp.call(this,p)}Y(ym,lp);function H2(p,x){var k=[];if(k.push(p.j," "),p.g){var N=new Date(x.h);k.push("[",lu(N.getFullYear()-2e3)+lu(N.getMonth()+1)+lu(N.getDate())+" "+lu(N.getHours())+":"+lu(N.getMinutes())+":"+lu(N.getSeconds())+"."+lu(Math.floor(N.getMilliseconds()/10)),"] ")}return k.push("[",z2(x,p.s.get()),"s] "),k.push("[",x.g,"] "),k.push(x.s),p.h&&(x=x.a)&&k.push(`
`,x instanceof Error?x.message:x.toString()),p.a&&k.push(`
`),k.join("")}function e0(){this.s=O(this.h,this),this.a=new ym,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}e0.prototype.h=function(p){function x(H){if(H){if(H.value>=mm.value)return"error";if(H.value>=vm.value)return"warn";if(H.value>=O_.value)return"log"}return"debug"}if(!this.j[p.g]){var k=H2(this.a,p),N=fE;if(N){var V=x(p.j);q2(N,V,k,p.a)}}};var fE=d.console;function q2(p,x,k,N){p[x]?p[x](k,N||""):p.log(k,N||"")}function Io(p,x){var k=R_;k&&k.log(mm,p,x)}var R_;R_=V2("firebaseui");var cp=new e0;if(cp.g!=1){var t0;hE(),t0=Qy;var G2=cp.s;t0.a||(t0.a=[]),t0.a.push(G2),cp.g=!0}function Xo(p){var x=R_;x&&x.log(vm,p,void 0)}function N_(){this.a=(typeof document>"u"?null:document)||{cookie:""}}n=N_.prototype,n.set=function(p,x,k,N,V,H){if(/[;=\s]/.test(p))throw Error('Invalid cookie name "'+p+'"');if(/[;\r\n]/.test(x))throw Error('Invalid cookie value "'+x+'"');h(k)||(k=-1),V=V?";domain="+V:"",N=N?";path="+N:"",H=H?";secure":"",k=0>k?"":k==0?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(B()+1e3*k).toUTCString(),this.a.cookie=p+"="+x+V+N+k+H},n.get=function(p,x){for(var k=p+"=",N=(this.a.cookie||"").split(";"),V=0,H;V<N.length;V++){if(H=Ge(N[V]),H.lastIndexOf(k,0)==0)return H.substr(k.length);if(H==p)return""}return x},n.ja=function(){return n0(this).keys},n.la=function(){return n0(this).values},n.clear=function(){for(var p=n0(this).keys,x=p.length-1;0<=x;x--){var k=p[x];this.get(k),this.set(k,"",0,void 0,void 0)}};function n0(p){p=(p.a.cookie||"").split(";");for(var x=[],k=[],N,V,H=0;H<p.length;H++)V=Ge(p[H]),N=V.indexOf("="),N==-1?(x.push(""),k.push(V)):(x.push(V.substring(0,N)),k.push(V.substring(N+1)));return{keys:x,values:k}}var yc=new N_;function hd(){}function cu(p,x,k,N){this.h=typeof p<"u"&&p!==null?p:-1,this.g=x||null,this.a=k||null,this.j=!!N}s(cu,hd),cu.prototype.set=function(p,x){yc.set(p,x,this.h,this.g,this.a,this.j)},cu.prototype.get=function(p){return yc.get(p)||null},cu.prototype.ra=function(p){var x=this.g,k=this.a;yc.get(p),yc.set(p,"",0,x,k)};function r0(p,x){this.g=p,this.a=x||null}function L_(p){return{email:p.g,credential:p.a&&p.a.toJSON()}}function bm(p){if(p&&p.email){var x=p.credential&&tn.auth.AuthCredential.fromJSON(p.credential);return new r0(p.email,x)}return null}function wm(p){this.a=p||null}function pE(p){for(var x=[],k=0,N=0;N<p.length;N++){var V=p.charCodeAt(N);255<V&&(x[k++]=V&255,V>>=8),x[k++]=V}return x}function W2(p){return ee(p,function(x){return x=x.toString(16),1<x.length?x:"0"+x}).join("")}function fd(p){for(this.i=p,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(pd*(this.j+1)),p=0;p<this.g;p++)this.a[p]=[this.i[4*p],this.i[4*p+1],this.i[4*p+2],this.i[4*p+3]];var x=Array(4);for(p=this.g;p<pd*(this.j+1);p++){if(x[0]=this.a[p-1][0],x[1]=this.a[p-1][1],x[2]=this.a[p-1][2],x[3]=this.a[p-1][3],p%this.g==0){var k=x,N=k[0];k[0]=k[1],k[1]=k[2],k[2]=k[3],k[3]=N,ha(x),x[0]^=uu[p/this.g][0],x[1]^=uu[p/this.g][1],x[2]^=uu[p/this.g][2],x[3]^=uu[p/this.g][3]}else 6<this.g&&p%this.g==4&&ha(x);this.a[p]=Array(4),this.a[p][0]=this.a[p-this.g][0]^x[0],this.a[p][1]=this.a[p-this.g][1]^x[1],this.a[p][2]=this.a[p-this.g][2]^x[2],this.a[p][3]=this.a[p-this.g][3]^x[3]}}fd.prototype.A=16;var pd=fd.prototype.A/4;function gE(p,x){for(var k,N=0;N<pd;N++)for(var V=0;4>V;V++)k=4*V+N,k=x[k],p.h[N][V]=k}function j_(p){for(var x=[],k=0;k<pd;k++)for(var N=0;4>N;N++)x[4*N+k]=p.h[k][N];return x}function kh(p,x){for(var k=0;4>k;k++)for(var N=0;4>N;N++)p.h[k][N]^=p.a[4*x+N][k]}function bc(p,x){for(var k=0;4>k;k++)for(var N=0;4>N;N++)p.h[k][N]=x[p.h[k][N]]}function Xn(p){for(var x=1;4>x;x++)for(var k=0;4>k;k++)p.s[x][k]=p.h[x][k];for(x=1;4>x;x++)for(k=0;4>k;k++)p.h[x][k]=p.s[x][(k+x)%pd]}function Xr(p){for(var x=1;4>x;x++)for(var k=0;4>k;k++)p.s[x][(k+x)%pd]=p.h[x][k];for(x=1;4>x;x++)for(k=0;4>k;k++)p.h[x][k]=p.s[x][k]}function ha(p){p[0]=gd[p[0]],p[1]=gd[p[1]],p[2]=gd[p[2]],p[3]=gd[p[3]]}var gd=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],up=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],uu=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],dp=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Ih=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],md=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],F_=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Bi=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],_m=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function $_(p,x){p=new fd(vE(p)),x=pE(x);for(var k=x.splice(0,16),N="",V;k.length;){V=16-k.length;for(var H=0;H<V;H++)k.push(0);for(V=p,gE(V,k),kh(V,0),k=1;k<V.j;++k){bc(V,gd),Xn(V),H=V.h;for(var ne=V.s[0],ue=0;4>ue;ue++)ne[0]=H[0][ue],ne[1]=H[1][ue],ne[2]=H[2][ue],ne[3]=H[3][ue],H[0][ue]=dp[ne[0]]^Ih[ne[1]]^ne[2]^ne[3],H[1][ue]=ne[0]^dp[ne[1]]^Ih[ne[2]]^ne[3],H[2][ue]=ne[0]^ne[1]^dp[ne[2]]^Ih[ne[3]],H[3][ue]=Ih[ne[0]]^ne[1]^ne[2]^dp[ne[3]];kh(V,k)}bc(V,gd),Xn(V),kh(V,V.j),N+=W2(j_(V)),k=x.splice(0,16)}return N}function mE(p,x){p=new fd(vE(p));for(var k=[],N=0;N<x.length;N+=2)k.push(parseInt(x.substring(N,N+2),16));var V=k.splice(0,16);for(x="";V.length;){for(N=p,gE(N,V),kh(N,N.j),V=1;V<N.j;++V){Xr(N),bc(N,up),kh(N,N.j-V);for(var H=N.h,ne=N.s[0],ue=0;4>ue;ue++)ne[0]=H[0][ue],ne[1]=H[1][ue],ne[2]=H[2][ue],ne[3]=H[3][ue],H[0][ue]=_m[ne[0]]^F_[ne[1]]^Bi[ne[2]]^md[ne[3]],H[1][ue]=md[ne[0]]^_m[ne[1]]^F_[ne[2]]^Bi[ne[3]],H[2][ue]=Bi[ne[0]]^md[ne[1]]^_m[ne[2]]^F_[ne[3]],H[3][ue]=F_[ne[0]]^Bi[ne[1]]^md[ne[2]]^_m[ne[3]]}if(Xr(N),bc(N,up),kh(N,0),N=j_(N),8192>=N.length)N=String.fromCharCode.apply(null,N);else{for(V="",H=0;H<N.length;H+=8192)V+=String.fromCharCode.apply(null,fe(N,H,H+8192));N=V}x+=N,V=k.splice(0,16)}return x.replace(/(\x00)+$/,"")}function vE(p){p=pE(p.substring(0,32));for(var x=32-p.length,k=0;k<x;k++)p.push(0);return p}function Y2(p){var x=[];return i0(new yE,p,x),x.join("")}function yE(){}function i0(p,x,k){if(x==null)k.push("null");else{if(typeof x=="object"){if(S(x)){var N=x;x=N.length,k.push("[");for(var V="",H=0;H<x;H++)k.push(V),i0(p,N[H],k),V=",";k.push("]");return}if(x instanceof String||x instanceof Number||x instanceof Boolean)x=x.valueOf();else{k.push("{"),V="";for(N in x)Object.prototype.hasOwnProperty.call(x,N)&&(H=x[N],typeof H!="function"&&(k.push(V),fa(N,k),k.push(":"),i0(p,H,k),V=","));k.push("}");return}}switch(typeof x){case"string":fa(x,k);break;case"number":k.push(isFinite(x)&&!isNaN(x)?String(x):"null");break;case"boolean":k.push(String(x));break;case"function":k.push("null");break;default:throw Error("Unknown type: "+typeof x)}}}var B_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},Ss=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function fa(p,x){x.push('"',p.replace(Ss,function(k){var N=B_[k];return N||(N="\\u"+(k.charCodeAt(0)|65536).toString(16).substr(1),B_[k]=N),N}),'"')}function hp(p){this.a=p}hp.prototype.set=function(p,x){h(x)?this.a.set(p,Y2(x)):this.a.ra(p)},hp.prototype.get=function(p){try{var x=this.a.get(p)}catch{return}if(x!==null)try{return JSON.parse(x)}catch{throw"Storage: Invalid value was encountered"}};function Mh(){}Y(Mh,hd),Mh.prototype.clear=function(){var p=Rr(this.ha(!0)),x=this;z(p,function(k){x.ra(k)})};function fp(p){this.a=p}Y(fp,Mh);function xm(p){if(!p.a)return!1;try{return p.a.setItem("__sak","1"),p.a.removeItem("__sak"),!0}catch{return!1}}n=fp.prototype,n.set=function(p,x){try{this.a.setItem(p,x)}catch{throw this.a.length==0?"Storage mechanism: Storage disabled":"Storage mechanism: Quota exceeded"}},n.get=function(p){if(p=this.a.getItem(p),!f(p)&&p!==null)throw"Storage mechanism: Invalid value was encountered";return p},n.ra=function(p){this.a.removeItem(p)},n.ha=function(p){var x=0,k=this.a,N=new tt;return N.next=function(){if(x>=k.length)throw je;var V=k.key(x++);if(p)return V;if(V=k.getItem(V),!f(V))throw"Storage mechanism: Invalid value was encountered";return V},N},n.clear=function(){this.a.clear()},n.key=function(p){return this.a.key(p)};function wc(){var p=null;try{p=window.localStorage||null}catch{}this.a=p}Y(wc,fp);function Sm(){var p=null;try{p=window.sessionStorage||null}catch{}this.a=p}Y(Sm,fp);function Ph(p,x){this.g=p,this.a=x+"::"}Y(Ph,Mh),Ph.prototype.set=function(p,x){this.g.set(this.a+p,x)},Ph.prototype.get=function(p){return this.g.get(this.a+p)},Ph.prototype.ra=function(p){this.g.ra(this.a+p)},Ph.prototype.ha=function(p){var x=this.g.ha(!0),k=this,N=new tt;return N.next=function(){for(var V=x.next();V.substr(0,k.a.length)!=k.a;)V=x.next();return p?V.substr(k.a.length):k.g.get(V)},N},xm(new wc);var U_,bE=new Sm;U_=xm(bE)?new Ph(bE,"firebaseui"):null;var V_=new hp(U_),z_={name:"pendingEmailCredential",storage:V_},Oh={name:"redirectStatus",storage:V_},Tm={name:"redirectUrl",storage:V_},pp={name:"emailForSignIn",storage:new hp(new cu(3600,"/"))},gp={name:"pendingEncryptedCredential",storage:new hp(new cu(3600,"/"))};function mp(p,x){return p.storage.get(x?p.name+":"+x:p.name)}function Ts(p,x){p.storage.a.ra(x?p.name+":"+x:p.name)}function vp(p,x,k){p.storage.set(k?p.name+":"+k:p.name,x)}function wE(p){return mp(Tm,p)||null}function _c(p){return p=mp(z_,p)||null,bm(p)}function jl(p){Ts(z_,p)}function _E(p,x){vp(z_,L_(p),x)}function H_(p){return(p=mp(Oh,p)||null)&&typeof p.tenantId<"u"?new wm(p.tenantId):null}function K2(p,x){vp(Oh,{tenantId:p.a},x)}function X2(p,x){x=mp(pp,x);var k=null;if(x)try{var N=mE(p,x),V=JSON.parse(N);k=V&&V.email||null}catch{}return k}function Z2(p,x){x=mp(gp,x);var k=null;if(x)try{var N=mE(p,x);k=JSON.parse(N)}catch{}return bm(k||null)}function iF(p,x,k){vp(gp,$_(p,JSON.stringify(L_(x))),k)}function q_(){this.W={}}function xi(p,x,k){if(x.toLowerCase()in p.W)throw Error("Configuration "+x+" has already been defined.");p.W[x.toLowerCase()]=k}function Em(p,x,k){if(!(x.toLowerCase()in p.W))throw Error("Configuration "+x+" is not defined.");p.W[x.toLowerCase()]=k}q_.prototype.get=function(p){if(!(p.toLowerCase()in this.W))throw Error("Configuration "+p+" is not defined.");return this.W[p.toLowerCase()]};function G_(p,x){if(p=p.get(x),!p)throw Error("Configuration "+x+" is required.");return p}function Am(){this.g=void 0,this.a={}}n=Am.prototype,n.set=function(p,x){Cm(this,p,x,!1)},n.add=function(p,x){Cm(this,p,x,!0)};function Cm(p,x,k,N){for(var V=0;V<x.length;V++){var H=x.charAt(V);p.a[H]||(p.a[H]=new Am),p=p.a[H]}if(N&&p.g!==void 0)throw Error('The collection already contains the key "'+x+'"');p.g=k}n.get=function(p){e:{for(var x=this,k=0;k<p.length;k++)if(x=x.a[p.charAt(k)],!x){p=void 0;break e}p=x}return p?p.g:void 0},n.la=function(){var p=[];return xE(this,p),p};function xE(p,x){p.g!==void 0&&x.push(p.g);for(var k in p.a)xE(p.a[k],x)}n.ja=function(){var p=[];return SE(this,"",p),p};function SE(p,x,k){p.g!==void 0&&k.push(x);for(var N in p.a)SE(p.a[N],x+N,k)}n.clear=function(){this.a={},this.g=void 0};function TE(p){for(this.a=p,this.g=new Am,p=0;p<this.a.length;p++){var x=this.g.get("+"+this.a[p].b);x?x.push(this.a[p]):this.g.add("+"+this.a[p].b,[this.a[p]])}}function a0(p,x){p=p.g;var k={},N=0;for(p.g!==void 0&&(k[N]=p.g);N<x.length;N++){var V=x.charAt(N);if(!(V in p.a))break;p=p.a[V],p.g!==void 0&&(k[N]=p.g)}for(var H in k)if(k.hasOwnProperty(H))return k[H];return[]}function Rh(p){for(var x=0;x<Mo.length;x++)if(Mo[x].c===p)return Mo[x];return null}function EE(p){p=p.toUpperCase();for(var x=[],k=0;k<Mo.length;k++)Mo[k].f===p&&x.push(Mo[k]);return x}function W_(p){if(0<p.length&&p.charAt(0)=="+"){p=p.substring(1);for(var x=[],k=0;k<Mo.length;k++)Mo[k].b==p&&x.push(Mo[k]);p=x}else p=EE(p);return p}function AE(p){p.sort(function(x,k){return x.name.localeCompare(k.name,"en")})}var Mo=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];AE(Mo);var yp=new TE(Mo);function CE(p,x){this.a=p,this.Aa=x}function DE(p){p=Ge(p);var x=a0(yp,p);return 0<x.length?new CE(x[0].b=="1"?"1-US-0":x[0].c,Ge(p.substr(x[0].b.length+1))):null}function kE(p){var x=Rh(p.a);if(!x)throw Error("Country ID "+p.a+" not found.");return"+"+x.b+p.Aa}function Y_(p,x){for(var k=0;k<p.length;k++)if(!he(IE,p[k])&&(bp!==null&&p[k]in bp||he(x,p[k])))return p[k];return null}var IE=["emailLink","password","phone"],bp={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function ME(){this.a=new q_,xi(this.a,"autoUpgradeAnonymousUsers"),xi(this.a,"callbacks"),xi(this.a,"credentialHelper",h0),xi(this.a,"immediateFederatedRedirect",!1),xi(this.a,"popupMode",!1),xi(this.a,"privacyPolicyUrl"),xi(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),xi(this.a,"queryParameterForWidgetMode","mode"),xi(this.a,"signInFlow"),xi(this.a,"signInOptions"),xi(this.a,"signInSuccessUrl"),xi(this.a,"siteName"),xi(this.a,"tosUrl"),xi(this.a,"widgetUrl"),xi(this.a,"adminRestrictedOperation")}function o0(p){var x=!!p.a.get("autoUpgradeAnonymousUsers");return x&&!u0(p)&&Io('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),x}function s0(p){p=p.a.get("signInOptions")||[];for(var x=[],k=0;k<p.length;k++){var N=p[k];N=D(N)?N:{provider:N},N.provider&&x.push(N)}return x}function al(p,x){p=s0(p);for(var k=0;k<p.length;k++)if(p[k].provider===x)return p[k];return null}function Dm(p){return s0(p).map(function(x){return x.provider})}function km(p,x){p=Im(p);for(var k=0;k<p.length;k++)if(p[k].providerId===x)return p[k];return null}function Im(p){return s0(p).map(function(x){if(bp[x.provider]||he(tM,x.provider)){x={providerId:x.provider,S:x.providerName||null,V:x.fullLabel||null,ta:x.buttonColor||null,za:x.iconUrl?sc(vh(x.iconUrl)).toString():null};for(var k in x)x[k]===null&&delete x[k];return x}return{providerId:x.provider,S:x.providerName||null,V:x.fullLabel||null,ta:x.buttonColor||null,za:x.iconUrl?sc(vh(x.iconUrl)).toString():null,Ob:x.loginHintKey||null}})}function K_(p){var x=al(p,tn.auth.GoogleAuthProvider.PROVIDER_ID),k;if(k=x&&x.clientId){e:{if((window.location&&window.location.protocol)==="http:"||(window.location&&window.location.protocol)==="https:"){for(N in p=p.a.get("credentialHelper"),J_)if(J_[N]===p){var N=J_[N];break e}}N=h0}k=N===d0}return k&&x.clientId||null}function l0(p){return p=al(p,tn.auth.EmailAuthProvider.PROVIDER_ID),!!(p&&p.disableSignUp&&p.disableSignUp.status)}function Nh(p){return p=p.a.get("adminRestrictedOperation")||null,!(!p||!p.status)}function Q2(p){var x=null;if(s0(p).forEach(function(N){N.provider==tn.auth.PhoneAuthProvider.PROVIDER_ID&&D(N.recaptchaParameters)&&!Array.isArray(N.recaptchaParameters)&&(x=xn(N.recaptchaParameters))}),x){var k=[];nM.forEach(function(N){typeof x[N]<"u"&&(k.push(N),delete x[N])}),k.length&&Xo('The following provided "recaptchaParameters" keys are not allowed: '+k.join(", "))}return x}function X_(p){return(p=p.a.get("adminRestrictedOperation"))&&p.adminEmail?p.adminEmail:null}function J2(p){if(p=p.a.get("adminRestrictedOperation")||null){var x=p.helpLink||null;if(x&&typeof x=="string")return function(){Ah(x)}}return null}function eM(p){return(p=al(p,tn.auth.EmailAuthProvider.PROVIDER_ID))&&p.disableSignUp&&p.disableSignUp.adminEmail||null}function aF(p){if((p=al(p,tn.auth.EmailAuthProvider.PROVIDER_ID))&&p.disableSignUp){var x=p.disableSignUp.helpLink||null;if(x&&typeof x=="string")return function(){Ah(x)}}return null}function wp(p,x){return p=(p=al(p,x))&&p.scopes,Array.isArray(p)?p:[]}function Mm(p,x){return p=(p=al(p,x))&&p.customParameters,D(p)?(p=xn(p),x===tn.auth.GoogleAuthProvider.PROVIDER_ID&&delete p.login_hint,x===tn.auth.GithubAuthProvider.PROVIDER_ID&&delete p.login,p):null}function Z_(p){p=al(p,tn.auth.PhoneAuthProvider.PROVIDER_ID);var x=null;return p&&typeof p.loginHint=="string"&&(x=DE(p.loginHint)),p&&p.defaultNationalNumber||x&&x.Aa||null}function c0(p){var x=(p=al(p,tn.auth.PhoneAuthProvider.PROVIDER_ID))&&p.defaultCountry||null;x=x&&EE(x);var k=null;return p&&typeof p.loginHint=="string"&&(k=DE(p.loginHint)),x&&x[0]||k&&Rh(k.a)||null}function Pm(p){if(p=al(p,tn.auth.PhoneAuthProvider.PROVIDER_ID),!p)return null;var x=p.whitelistedCountries,k=p.blacklistedCountries;if(typeof x<"u"&&(!Array.isArray(x)||x.length==0))throw Error("WhitelistedCountries must be a non-empty array.");if(typeof k<"u"&&!Array.isArray(k))throw Error("BlacklistedCountries must be an array.");if(x&&k)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!x&&!k)return Mo;if(p=[],x){k={};for(var N=0;N<x.length;N++)for(var V=W_(x[N]),H=0;H<V.length;H++)k[V[H].c]=V[H];for(var ne in k)k.hasOwnProperty(ne)&&p.push(k[ne])}else{for(ne={},x=0;x<k.length;x++)for(V=W_(k[x]),N=0;N<V.length;N++)ne[V[N].c]=V[N];for(V=0;V<Mo.length;V++)ne!==null&&Mo[V].c in ne||p.push(Mo[V])}return p}function PE(p){return G_(p.a,"queryParameterForWidgetMode")}function ia(p){var x=p.a.get("tosUrl")||null;if(p=p.a.get("privacyPolicyUrl")||null,x&&!p&&Xo("Privacy Policy URL is missing, the link will not be displayed."),x&&p){if(typeof x=="function")return x;if(typeof x=="string")return function(){Ah(x)}}return null}function Si(p){var x=p.a.get("tosUrl")||null,k=p.a.get("privacyPolicyUrl")||null;if(k&&!x&&Xo("Term of Service URL is missing, the link will not be displayed."),x&&k){if(typeof k=="function")return k;if(typeof k=="string")return function(){Ah(k)}}return null}function OE(p){return(p=al(p,tn.auth.EmailAuthProvider.PROVIDER_ID))&&typeof p.requireDisplayName<"u"?!!p.requireDisplayName:!0}function uo(p){return p=al(p,tn.auth.EmailAuthProvider.PROVIDER_ID),!(!p||p.signInMethod!==tn.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function du(p){return p=al(p,tn.auth.EmailAuthProvider.PROVIDER_ID),!(!p||!p.forceSameDevice)}function Lh(p){if(uo(p)){var x={url:Vr(),handleCodeInApp:!0};(p=al(p,tn.auth.EmailAuthProvider.PROVIDER_ID))&&typeof p.emailLinkSignIn=="function"&&Ae(x,p.emailLinkSignIn()),p=x.url;var k=Vr();k instanceof Ln||(k=ce(k)),p instanceof Ln||(p=ce(p));var N=k;k=new Ln(N);var V=!!p.j;V?Fi(k,p.j):V=!!p.A,V?k.A=p.A:V=!!p.h,V?k.h=p.h:V=p.C!=null;var H=p.g;if(V)Co(k,p.C);else if(V=!!p.g){if(H.charAt(0)!="/"&&(N.h&&!N.g?H="/"+H:(N=k.g.lastIndexOf("/"),N!=-1&&(H=k.g.substr(0,N+1)+H))),H==".."||H==".")H="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){N=H.lastIndexOf("/",0)==0,H=H.split("/");for(var ne=[],ue=0;ue<H.length;){var Re=H[ue++];Re=="."?N&&ue==H.length&&ne.push(""):Re==".."?((1<ne.length||ne.length==1&&ne[0]!="")&&ne.pop(),N&&ue==H.length&&ne.push("")):(ne.push(Re),N=!0)}H=ne.join("/")}}return V?k.g=H:V=p.a.toString()!=="",V?ae(k,Fe(p.a)):V=!!p.s,V&&(k.s=p.s),x.url=k.toString(),x}return null}function Q_(p){var x=!!p.a.get("immediateFederatedRedirect"),k=Dm(p);return p=vd(p),x&&k.length==1&&!he(IE,k[0])&&p==hu}function vd(p){p=p.a.get("signInFlow");for(var x in Om)if(Om[x]==p)return Om[x];return hu}function xc(p){return _p(p).signInSuccess||null}function xa(p){return _p(p).signInSuccessWithAuthResult||null}function u0(p){return _p(p).signInFailure||null}function _p(p){return p.a.get("callbacks")||{}}var d0="googleyolo",h0="none",J_={nc:d0,NONE:h0},hu="redirect",Om={qc:"popup",rc:hu},ex={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},tM=["anonymous"],nM=["sitekey","tabindex","callback","expired-callback"],jh,xp,f0,RE,Mr={};function Ft(p,x,k,N){Mr[p].apply(null,Array.prototype.slice.call(arguments,1))}function NE(p){return p.classList?p.classList:(p=p.className,f(p)&&p.match(/\S+/g)||[])}function aa(p,x){return p.classList?p.classList.contains(x):he(NE(p),x)}function Ti(p,x){p.classList?p.classList.add(x):aa(p,x)||(p.className+=0<p.className.length?" "+x:x)}function Sc(p,x){p.classList?p.classList.remove(x):aa(p,x)&&(p.className=le(NE(p),function(k){return k!=x}).join(" "))}function Na(p){var x=p.type;switch(f(x)&&x.toLowerCase()){case"checkbox":case"radio":return p.checked?p.value:null;case"select-one":return x=p.selectedIndex,0<=x?p.options[x].value:null;case"select-multiple":x=[];for(var k,N=0;k=p.options[N];N++)k.selected&&x.push(k.value);return x.length?x:null;default:return p.value!=null?p.value:null}}function LE(p,x){var k=p.type;switch(f(k)&&k.toLowerCase()){case"checkbox":case"radio":p.checked=x;break;case"select-one":if(p.selectedIndex=-1,f(x)){for(var N=0;k=p.options[N];N++)if(k.value==x){k.selected=!0;break}}break;case"select-multiple":for(f(x)&&(x=[x]),N=0;k=p.options[N];N++)if(k.selected=!1,x)for(var V,H=0;V=x[H];H++)k.value==V&&(k.selected=!0);break;default:p.value=x??""}}function rM(p){if(p.altKey&&!p.ctrlKey||p.metaKey||112<=p.keyCode&&123>=p.keyCode)return!1;if(Fh(p.keyCode))return!0;switch(p.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!sa;default:return 166>p.keyCode||183<p.keyCode}}function jE(p,x,k,N,V,H){if(ra&&!Xs("525"))return!0;if(kl&&V)return Fh(p);if(V&&!N)return!1;if(!sa){typeof x=="number"&&(x=p0(x));var ne=x==17||x==18||kl&&x==91;if((!k||kl)&&ne||kl&&x==16&&(N||H))return!1}if((ra||Pa)&&N&&k)switch(p){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(Qt&&N&&x==p)return!1;switch(p){case 13:return sa?H||V?!1:!(k&&N):!0;case 27:return!(ra||Pa||sa)}return sa&&(N||V||H)?!1:Fh(p)}function Fh(p){if(48<=p&&57>=p||96<=p&&106>=p||65<=p&&90>=p||(ra||Pa)&&p==0)return!0;switch(p){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return sa;default:return!1}}function p0(p){if(sa)p=iM(p);else if(kl&&ra)switch(p){case 93:p=91}return p}function iM(p){switch(p){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return p}}function Sp(p){_i.call(this),this.a=p,Xi(p,"keydown",this.g,!1,this),Xi(p,"click",this.h,!1,this)}Y(Sp,_i),Sp.prototype.g=function(p){(p.keyCode==13||ra&&p.keyCode==3)&&FE(this,p)},Sp.prototype.h=function(p){FE(this,p)};function FE(p,x){var k=new nx(x);if(tl(p,k)){k=new tx(x);try{tl(p,k)}finally{x.stopPropagation()}}}Sp.prototype.o=function(){Sp.K.o.call(this),xh(this.a,"keydown",this.g,!1,this),xh(this.a,"click",this.h,!1,this),delete this.a};function tx(p){ko.call(this,p.a),this.type="action"}Y(tx,ko);function nx(p){ko.call(this,p.a),this.type="beforeaction"}Y(nx,ko);function $h(p){_i.call(this),this.a=p,p=Qt?"focusout":"blur",this.g=Xi(this.a,Qt?"focusin":"focus",this,!Qt),this.h=Xi(this.a,p,this,!Qt)}Y($h,_i),$h.prototype.handleEvent=function(p){var x=new ko(p.a);x.type=p.type=="focusin"||p.type=="focus"?"focusin":"focusout",tl(this,x)},$h.prototype.o=function(){$h.K.o.call(this),od(this.g),od(this.h),delete this.a};function g0(p,x){_i.call(this),this.g=p||1,this.a=x||d,this.h=O(this.gc,this),this.j=B()}Y(g0,_i),n=g0.prototype,n.Ka=!1,n.aa=null,n.gc=function(){if(this.Ka){var p=B()-this.j;0<p&&p<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-p):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),tl(this,"tick"),this.Ka&&(Rm(this),this.start()))}},n.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=B())};function Rm(p){p.Ka=!1,p.aa&&(p.a.clearTimeout(p.aa),p.aa=null)}n.o=function(){g0.K.o.call(this),Rm(this),delete this.a};function rx(p,x){if(C(p))x&&(p=O(p,x));else if(p&&typeof p.handleEvent=="function")p=O(p.handleEvent,p);else throw Error("Invalid listener argument");return d.setTimeout(p,0)}function Bh(p){Kn.call(this),this.g=p,this.a={}}Y(Bh,Kn);var $E=[];function Uh(p,x,k,N){S(k)||(k&&($E[0]=k.toString()),k=$E);for(var V=0;V<k.length;V++){var H=Xi(x,k[V],N||p.handleEvent,!1,p.g||p);if(!H)break;p.a[H.key]=H}}function BE(p){Yt(p.a,function(x,k){this.a.hasOwnProperty(k)&&od(x)},p),p.a={}}Bh.prototype.o=function(){Bh.K.o.call(this),BE(this)},Bh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ol(p){_i.call(this),this.a=null,this.g=p,p=Qt||Pa||ra&&!Xs("531")&&p.tagName=="TEXTAREA",this.h=new Bh(this),Uh(this.h,this.g,p?["keydown","paste","cut","drop","input"]:"input",this)}Y(ol,_i),ol.prototype.handleEvent=function(p){if(p.type=="input")Qt&&Xs(10)&&p.keyCode==0&&p.j==0||(m0(this),tl(this,aM(p)));else if(p.type!="keydown"||rM(p)){var x=p.type=="keydown"?this.g.value:null;Qt&&p.keyCode==229&&(x=null);var k=aM(p);m0(this),this.a=rx(function(){this.a=null,this.g.value!=x&&tl(this,k)},this)}};function m0(p){p.a!=null&&(d.clearTimeout(p.a),p.a=null)}function aM(p){return p=new ko(p.a),p.type="input",p}ol.prototype.o=function(){ol.K.o.call(this),this.h.m(),m0(this),delete this.g};function Nm(p,x){_i.call(this),p&&(this.Oa&&Ui(this),this.qa=p,this.Na=Xi(this.qa,"keypress",this,x),this.Ya=Xi(this.qa,"keydown",this.Jb,x,this),this.Oa=Xi(this.qa,"keyup",this.Kb,x,this))}Y(Nm,_i),n=Nm.prototype,n.qa=null,n.Na=null,n.Ya=null,n.Oa=null,n.R=-1,n.X=-1,n.Ua=!1;var fu={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},UE={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},v0=!ra||Xs("525"),Lm=kl&&sa;n=Nm.prototype,n.Jb=function(p){(ra||Pa)&&(this.R==17&&!p.ctrlKey||this.R==18&&!p.altKey||kl&&this.R==91&&!p.metaKey)&&(this.X=this.R=-1),this.R==-1&&(p.ctrlKey&&p.keyCode!=17?this.R=17:p.altKey&&p.keyCode!=18?this.R=18:p.metaKey&&p.keyCode!=91&&(this.R=91)),v0&&!jE(p.keyCode,this.R,p.shiftKey,p.ctrlKey,p.altKey,p.metaKey)?this.handleEvent(p):(this.X=p0(p.keyCode),Lm&&(this.Ua=p.altKey))},n.Kb=function(p){this.X=this.R=-1,this.Ua=p.altKey},n.handleEvent=function(p){var x=p.a,k=x.altKey;if(Qt&&p.type=="keypress")var N=this.X,V=N!=13&&N!=27?x.keyCode:0;else(ra||Pa)&&p.type=="keypress"?(N=this.X,V=0<=x.charCode&&63232>x.charCode&&Fh(N)?x.charCode:0):$i&&!ra?(N=this.X,V=Fh(N)?x.keyCode:0):(p.type=="keypress"?(Lm&&(k=this.Ua),x.keyCode==x.charCode?32>x.keyCode?(N=x.keyCode,V=0):(N=this.X,V=x.charCode):(N=x.keyCode||this.X,V=x.charCode||0)):(N=x.keyCode||this.X,V=x.charCode||0),kl&&V==63&&N==224&&(N=191));var H=N=p0(N);N?63232<=N&&N in fu?H=fu[N]:N==25&&p.shiftKey&&(H=9):x.keyIdentifier&&x.keyIdentifier in UE&&(H=UE[x.keyIdentifier]),sa&&v0&&p.type=="keypress"&&!jE(H,this.R,p.shiftKey,p.ctrlKey,k,p.metaKey)||(p=H==this.R,this.R=H,x=new oM(H,V,p,x),x.altKey=k,tl(this,x))},n.N=function(){return this.qa};function Ui(p){p.Na&&(od(p.Na),od(p.Ya),od(p.Oa),p.Na=null,p.Ya=null,p.Oa=null),p.qa=null,p.R=-1,p.X=-1}n.o=function(){Nm.K.o.call(this),Ui(this)};function oM(p,x,k,N){ko.call(this,N),this.type="key",this.keyCode=p,this.j=x,this.repeat=k}Y(oM,ko);function jm(p,x,k,N){this.top=p,this.right=x,this.bottom=k,this.left=N}jm.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},jm.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},jm.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},jm.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};function y0(p,x){var k=Zc(p);return k.defaultView&&k.defaultView.getComputedStyle&&(p=k.defaultView.getComputedStyle(p,null))&&(p[x]||p.getPropertyValue(x))||""}function Fm(p){try{var x=p.getBoundingClientRect()}catch{return{left:0,top:0,right:0,bottom:0}}return Qt&&p.ownerDocument.body&&(p=p.ownerDocument,x.left-=p.documentElement.clientLeft+p.body.clientLeft,x.top-=p.documentElement.clientTop+p.body.clientTop),x}function Vh(p,x){x=x||ca(document);var k=x||ca(document),N=VE(p),V=VE(k);if(!Qt||9<=Number(Kf)){ne=y0(k,"borderLeftWidth");var H=y0(k,"borderRightWidth");ue=y0(k,"borderTopWidth"),Re=y0(k,"borderBottomWidth"),H=new jm(parseFloat(ue),parseFloat(H),parseFloat(Re),parseFloat(ne))}else{var ne=zh(k,"borderLeft");H=zh(k,"borderRight");var ue=zh(k,"borderTop"),Re=zh(k,"borderBottom");H=new jm(ue,H,Re,ne)}k==ca(document)?(ne=N.a-k.scrollLeft,N=N.g-k.scrollTop,!Qt||10<=Number(Kf)||(ne+=H.left,N+=H.top)):(ne=N.a-V.a-H.left,N=N.g-V.g-H.top),V=p.offsetWidth,H=p.offsetHeight,ue=ra&&!V&&!H,h(V)&&!ue||!p.getBoundingClientRect?p=new Ml(V,H):(p=Fm(p),p=new Ml(p.right-p.left,p.bottom-p.top)),V=k.clientHeight-p.height,H=k.scrollLeft,ue=k.scrollTop,H+=Math.min(ne,Math.max(ne-(k.clientWidth-p.width),0)),ue+=Math.min(N,Math.max(N-V,0)),k=new ws(H,ue),x.scrollLeft=k.a,x.scrollTop=k.g}function VE(p){var x=Zc(p),k=new ws(0,0),N=x?Zc(x):document;return N=!Qt||9<=Number(Kf)||cc(N).a.compatMode=="CSS1Compat"?N.documentElement:N.body,p==N||(p=Fm(p),N=cc(x).a,x=ca(N),N=N.parentWindow||N.defaultView,x=Qt&&Xs("10")&&N.pageYOffset!=x.scrollTop?new ws(x.scrollLeft,x.scrollTop):new ws(N.pageXOffset||x.scrollLeft,N.pageYOffset||x.scrollTop),k.a=p.left+x.a,k.g=p.top+x.g),k}var zE={thin:2,medium:4,thick:6};function zh(p,x){if((p.currentStyle?p.currentStyle[x+"Style"]:null)=="none")return 0;var k=p.currentStyle?p.currentStyle[x+"Width"]:null;if(k in zE)p=zE[k];else if(/^\d+px?$/.test(k))p=parseInt(k,10);else{x=p.style.left;var N=p.runtimeStyle.left;p.runtimeStyle.left=p.currentStyle.left,p.style.left=k,k=p.style.pixelLeft,p.style.left=x,p.runtimeStyle.left=N,p=+k}return p}function Fl(){}w(Fl),Fl.prototype.a=0;function Hh(p){_i.call(this),this.s=p||cc(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}Y(Hh,_i),n=Hh.prototype,n.Lb=Fl.Xa(),n.N=function(){return this.g};function hr(p,x){return p.g?Qf(x,p.g||p.s.a):null}function $m(p){return p.L||(p.L=new Bh(p)),p.L}n.Za=function(p){if(this.Y&&this.Y!=p)throw Error("Method not supported");Hh.K.Za.call(this,p)},n.kb=function(){this.g=this.s.a.createElement("DIV")},n.render=function(p){if(this.na)throw Error("Component already rendered");this.g||this.kb(),p?p.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},n.v=function(){this.na=!0,b0(this,function(p){!p.na&&p.N()&&p.v()})},n.ya=function(){b0(this,function(p){p.na&&p.ya()}),this.L&&BE(this.L),this.na=!1},n.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),b0(this,function(p){p.m()}),this.g&&pr(this.g),this.Y=this.g=this.oa=this.Ea=null,Hh.K.o.call(this)};function b0(p,x){p.Ea&&z(p.Ea,x,void 0)}n.removeChild=function(p,x){if(p){var k=f(p)?p:p.cb||(p.cb=":"+(p.Lb.a++).toString(36));if(this.oa&&k?(p=this.oa,p=(p!==null&&k in p?p[k]:void 0)||null):p=null,k&&p){var N=this.oa;if(k in N&&delete N[k],pe(this.Ea,p),x&&(p.ya(),p.g&&pr(p.g)),x=p,x==null)throw Error("Unable to set parent component");x.Y=null,Hh.K.Za.call(x,null)}}if(!p)throw Error("Child is not in parent component");return p};function Vi(p,x){var k=Ly(p,"firebaseui-textfield");x?(Sc(p,"firebaseui-input-invalid"),Ti(p,"firebaseui-input"),k&&Sc(k,"firebaseui-textfield-invalid")):(Sc(p,"firebaseui-input"),Ti(p,"firebaseui-input-invalid"),k&&Ti(k,"firebaseui-textfield-invalid"))}function yd(p,x,k){x=new ol(x),Ki(p,j(el,x)),Uh($m(p),x,"input",k)}function Bm(p,x,k){x=new Nm(x),Ki(p,j(el,x)),Uh($m(p),x,"key",function(N){N.keyCode==13&&(N.stopPropagation(),N.preventDefault(),k(N))})}function bd(p,x,k){x=new $h(x),Ki(p,j(el,x)),Uh($m(p),x,"focusin",k)}function pa(p,x,k){x=new $h(x),Ki(p,j(el,x)),Uh($m(p),x,"focusout",k)}function Pi(p,x,k){x=new Sp(x),Ki(p,j(el,x)),Uh($m(p),x,"action",function(N){N.stopPropagation(),N.preventDefault(),k(N)})}function Es(p){Ti(p,"firebaseui-hidden")}function yr(p,x){x&&id(p,x),Sc(p,"firebaseui-hidden")}function Um(p){return!aa(p,"firebaseui-hidden")&&p.style.display!="none"}function Tp(p){p=p||{};var x=p.email,k=p.disabled,N='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return N=p.wc?N+"Enter new email address":N+"Email",N+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+Wa(x??"")+'"'+(k?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',Ct(N)}function Zo(p){p=p||{},p=p.label;var x='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return x=p?x+gn(p):x+"Next",Ct(x+"</button>")}function Ei(){var p=""+Zo({label:Ii("Sign In")});return Ct(p)}function Qo(){var p=""+Zo({label:Ii("Save")});return Ct(p)}function La(){var p=""+Zo({label:Ii("Continue")});return Ct(p)}function HE(p){p=p||{},p=p.label;var x='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return x=p?x+gn(p):x+"Choose password",Ct(x+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function qE(){var p={},x='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return x=p.current?x+"Current password":x+"Password",Ct(x+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function sM(){return Ct('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function Jo(p){p=p||{},p=p.label;var x='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return x=p?x+gn(p):x+"Cancel",Ct(x+"</button>")}function Zr(p){var x="";return p.F&&p.D&&(x+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),Ct(x)}function Po(p){var x="";return p.F&&p.D&&(x+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),Ct(x)}function GE(p){return p='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+gn(p.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',Ct(p)}GE.a="firebaseui.auth.soy2.element.infoBar";function As(p){var x=p.content;return p=p.Ab,Ct('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(p?" "+Wa(p):"")+'">'+gn(x)+"</dialog>")}function WE(p){var x=p.message;return Ct(As({content:ep('<div class="firebaseui-dialog-icon-wrapper"><div class="'+Wa(p.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+gn(x)+"</div>")}))}WE.a="firebaseui.auth.soy2.element.progressDialog";function wd(p){var x='<div class="firebaseui-list-box-actions">';p=p.items;for(var k=p.length,N=0;N<k;N++){var V=p[N];x+='<button type="button" data-listboxid="'+Wa(V.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(V.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+Wa(V.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+gn(V.label)+"</div></button>"}return x=""+As({Ab:Ii("firebaseui-list-box-dialog"),content:ep(x+"</div>")}),Ct(x)}wd.a="firebaseui.auth.soy2.element.listBoxDialog";function pu(p){return p=p||{},Ct(p.tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}pu.a="firebaseui.auth.soy2.element.busyIndicator";function es(p,x){return p=p||{},p=p.ga,gr(p.S?p.S:x.hb[p.providerId]?""+x.hb[p.providerId]:p.providerId&&p.providerId.indexOf("saml.")==0||p.providerId&&p.providerId.indexOf("oidc.")==0?p.providerId.substring(5):""+p.providerId)}function w0(p){YE(p,"upgradeElement")}function _0(p){YE(p,"downgradeElements")}var gu=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function YE(p,x){p&&window.componentHandler&&window.componentHandler[x]&&gu.forEach(function(k){aa(p,k)&&window.componentHandler[x](p),z(uc(k,p),function(N){window.componentHandler[x](N)})})}function Ep(p,x,k){if(qh.call(this),document.body.appendChild(p),p.showModal||window.dialogPolyfill.registerDialog(p),p.showModal(),w0(p),x&&Pi(this,p,function(H){var ne=p.getBoundingClientRect();(H.clientX<ne.left||ne.left+ne.width<H.clientX||H.clientY<ne.top||ne.top+ne.height<H.clientY)&&qh.call(this)}),!k){var N=this.N().parentElement||this.N().parentNode;if(N){var V=this;this.da=function(){if(p.open){var H=p.getBoundingClientRect().height,ne=N.getBoundingClientRect().height,ue=N.getBoundingClientRect().top-document.body.getBoundingClientRect().top,Re=N.getBoundingClientRect().left-document.body.getBoundingClientRect().left,at=p.getBoundingClientRect().width,Ht=N.getBoundingClientRect().width;p.style.top=(ue+(ne-H)/2).toString()+"px",H=Re+(Ht-at)/2,p.style.left=H.toString()+"px",p.style.right=(document.body.getBoundingClientRect().width-H-at).toString()+"px"}else window.removeEventListener("resize",V.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function qh(){var p=Ap.call(this);p&&(_0(p),p.open&&p.close(),pr(p),this.da&&window.removeEventListener("resize",this.da))}function Ap(){return Qf("firebaseui-id-dialog")}function Cp(){pr(KE.call(this))}function KE(){return hr(this,"firebaseui-id-info-bar")}function XE(){return hr(this,"firebaseui-id-dismiss-info-bar")}var x0={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function ix(p,x,k){nu.call(this,p,x);for(var N in k)this[N]=k[N]}Y(ix,nu);function Ye(p,x,k,N,V){Hh.call(this,k),this.fb=p,this.eb=x,this.Fa=!1,this.Ga=N||null,this.A=this.ca=null,this.Z=xn(x0),Ae(this.Z,V||{})}Y(Ye,Hh),n=Ye.prototype,n.kb=function(){var p=hc(this.fb,this.eb,this.Z,this.s);w0(p),this.g=p},n.v=function(){if(Ye.K.v.call(this),tE(zi(this),new ix("pageEnter",zi(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var p=this.Z.F;Pi(this,this.bb(),function(){p()})}if(this.ab()&&this.Z.D){var x=this.Z.D;Pi(this,this.ab(),function(){x()})}},n.ya=function(){tE(zi(this),new ix("pageExit",zi(this),{pageId:this.Ga})),Ye.K.ya.call(this)},n.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,_0(this.N()),Ye.K.o.call(this)};function lM(p){p.Fa=!0;var x=aa(p.N(),"firebaseui-use-spinner");p.ca=window.setTimeout(function(){p.N()&&p.A===null&&(p.A=hc(pu,{tb:x},null,p.s),p.N().appendChild(p.A),w0(p.A))},500)}n.I=function(p,x,k,N){function V(){if(H.T)return null;H.Fa=!1,window.clearTimeout(H.ca),H.ca=null,H.A&&(_0(H.A),pr(H.A),H.A=null)}var H=this;return H.Fa?null:(lM(H),p.apply(null,x).then(k,N).then(V,V))};function zi(p){return p.N().parentElement||p.N().parentNode}function S0(p,x,k){Bm(p,x,function(){k.focus()})}function xr(p,x,k){Bm(p,x,function(){k()})}L(Ye.prototype,{a:function(p){Cp.call(this);var x=hc(GE,{message:p},null,this.s);this.N().appendChild(x),Pi(this,XE.call(this),function(){pr(x)})},yc:Cp,Ac:KE,zc:XE,$:function(p,x){p=hc(WE,{Ma:p,message:x},null,this.s),Ep.call(this,p)},h:qh,Cb:Ap,Cc:function(){return hr(this,"firebaseui-tos")},bb:function(){return hr(this,"firebaseui-tos-link")},ab:function(){return hr(this,"firebaseui-pp-link")},Dc:function(){return hr(this,"firebaseui-tos-list")}});function hi(p,x,k){p=p||{},x=p.Va;var N=p.ia;return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Tp(p)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(x?Jo(null):"")+Zo(null)+'</div></div><div class="firebaseui-card-footer">'+(N?Po(k):Zr(k))+"</div></form></div>",Ct(p)}hi.a="firebaseui.auth.soy2.page.signIn";function cr(p,x,k){return p=p||{},x=p.ia,p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+Tp(p)+qE()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+sM()+'</div><div class="firebaseui-form-actions">'+Ei()+'</div></div><div class="firebaseui-card-footer">'+(x?Po(k):Zr(k))+"</div></form></div>",Ct(p)}cr.a="firebaseui.auth.soy2.page.passwordSignIn";function br(p,x,k){p=p||{};var N=p.Tb;x=p.Ta;var V=p.ia,H='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+Tp(p);return N?(p=p||{},p=p.name,p='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+Wa(p??"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',p=Ct(p)):p="",k=H+p+HE(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(x?Jo(null):"")+Qo()+'</div></div><div class="firebaseui-card-footer">'+(V?Po(k):Zr(k))+"</div></form></div>",Ct(k)}br.a="firebaseui.auth.soy2.page.passwordSignUp";function zr(p,x,k){return p=p||{},x=p.Ta,p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+Tp(p)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(x?Jo(null):"")+Zo({label:Ii("Send")})+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(p)}zr.a="firebaseui.auth.soy2.page.passwordRecovery";function Cs(p,x,k){x=p.G;var N="";return p="Follow the instructions sent to <strong>"+(gn(p.email)+"</strong> to recover your password"),N+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions">',x&&(N+='<div class="firebaseui-form-actions">'+Zo({label:Ii("Done")})+"</div>"),N+='</div><div class="firebaseui-card-footer">'+Zr(k)+"</div></div>",Ct(N)}Cs.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent";function _d(p,x,k){return Ct('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+pu(null)+"</div></div>")}_d.a="firebaseui.auth.soy2.page.callback";function Dp(p,x,k){return Ct('<div class="firebaseui-container firebaseui-id-page-spinner">'+pu({tb:!0})+"</div>")}Dp.a="firebaseui.auth.soy2.page.spinner";function ax(){return Ct('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}ax.a="firebaseui.auth.soy2.page.blank";function mu(p,x,k){x="",p="A sign-in email with additional instructions was sent to <strong>"+(gn(p.email)+"</strong>. Check your email to complete sign-in.");var N=Ct('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>');return x+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+N+'</div><div class="firebaseui-form-actions">'+Jo({label:Ii("Back")})+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(x)}mu.a="firebaseui.auth.soy2.page.emailLinkSignInSent";function Qi(p,x,k){return p=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn't work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">`+Ct('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+Jo({label:Ii("Back")})+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(p)}Qi.a="firebaseui.auth.soy2.page.emailNotReceived";function xd(p,x,k){return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+Tp(p)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Jo(null)+Zo(null)+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(p)}xd.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation";function Gh(){var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Jo({label:Ii("Dismiss")})+"</div></div></div>";return Ct(p)}Gh.a="firebaseui.auth.soy2.page.differentDeviceError";function ox(){var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Jo({label:Ii("Dismiss")})+"</div></div></div>";return Ct(p)}ox.a="firebaseui.auth.soy2.page.anonymousUserMismatch";function sl(p,x,k){return x="",p="You’ve already used <strong>"+(gn(p.email)+"</strong> to sign in. Enter your password for that account."),x+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+p+"</p>"+qE()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+sM()+'</div><div class="firebaseui-form-actions">'+Ei()+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(x)}sl.a="firebaseui.auth.soy2.page.passwordLinking";function kp(p,x,k){var N=p.email;return x="",p=""+es(p,k),p=Ii(p),N="You’ve already used <strong>"+(gn(N)+("</strong>. You can connect your <strong>"+(gn(p)+("</strong> account with <strong>"+(gn(N)+"</strong> by signing in with email link below."))))),p="For this flow to successfully connect your "+(gn(p)+" account with this email, you have to open the link on the same device or browser."),x+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+N+'<p class="firebaseui-text firebaseui-text-justify">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ei()+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(x)}kp.a="firebaseui.auth.soy2.page.emailLinkSignInLinking";function Vm(p,x,k){x="";var N=""+es(p,k);return N=Ii(N),p="You originally intended to connect <strong>"+(gn(N)+"</strong> to your email account but have opened the link on a different device where you are not signed in."),N="If you still want to connect your <strong>"+(gn(N)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device."),x+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+p+'</p><p class="firebaseui-text firebaseui-text-justify">'+N+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+La()+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(x)}Vm.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice";function ts(p,x,k){var N=p.email;return x="",p=""+es(p,k),p=Ii(p),N="You’ve already used <strong>"+(gn(N)+("</strong>. Sign in with "+(gn(p)+" to continue."))),x+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+N+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Zo({label:Ii("Sign in with "+p)})+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(x)}ts.a="firebaseui.auth.soy2.page.federatedLinking";function sx(p,x,k){p=p||{};var N=p.kc;x=p.yb,p=p.Eb;var V='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return N?(N="<strong>"+(gn(N)+"</strong> is not authorized to view the requested page."),V+=N):V+="User is not authorized to view the requested page.",V+="</p>",x&&(x="Please contact <strong>"+(gn(x)+"</strong> for authorization."),V+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+x+"</p>"),V+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',p&&(V+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),V+='</div><div class="firebaseui-form-actions">'+Jo({label:Ii("Back")})+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(V)}sx.a="firebaseui.auth.soy2.page.unauthorizedUser";function lx(p,x,k){return x="",p="To continue sign in with <strong>"+(gn(p.email)+"</strong> on this device, you have to recover the password."),x+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Jo(null)+Zo({label:Ii("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(x)}lx.a="firebaseui.auth.soy2.page.unsupportedProvider";function T0(p){var x="",k='<p class="firebaseui-text">for <strong>'+(gn(p.email)+"</strong></p>");return x+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+k+HE(Jf(p))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Qo()+"</div></div></form></div>",Ct(x)}T0.a="firebaseui.auth.soy2.page.passwordReset";function E0(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></div>",Ct(p)}E0.a="firebaseui.auth.soy2.page.passwordResetSuccess";function Sd(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></div>",Ct(p)}Sd.a="firebaseui.auth.soy2.page.passwordResetFailure";function Za(p){var x=p.G,k="";return p="Your sign-in email address has been changed back to <strong>"+(gn(p.email)+"</strong>."),k+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(x?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></form></div>",Ct(k)}Za.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess";function Td(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></div>",Ct(p)}Td.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure";function Ip(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></div>",Ct(p)}Ip.a="firebaseui.auth.soy2.page.emailVerificationSuccess";function Mp(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></div>",Ct(p)}Mp.a="firebaseui.auth.soy2.page.emailVerificationFailure";function cx(p){var x=p.G,k="";return p="You can now sign in with your new email <strong>"+(gn(p.email)+"</strong>."),k+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions">'+(x?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></div>",Ct(k)}cx.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess";function ux(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></div>",Ct(p)}ux.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure";function ZE(p){var x=p.factorId,k=p.phoneNumber;p=p.G;var N='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(x){case"phone":x="The <strong>"+(gn(x)+(" "+(gn(k)+"</strong> was removed as a second authentication step."))),N+=x;break;default:N+="The device or app was removed as a second authentication step."}return N+=`</p><p class="firebaseui-text">If you don't recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">`+(p?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></form></div>",Ct(N)}ZE.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess";function zm(p){return p=p||{},p=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn't remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn't work, contact support for assistance.</p></div><div class="firebaseui-card-actions">`+(p.G?'<div class="firebaseui-form-actions">'+La()+"</div>":"")+"</div></div>",Ct(p)}zm.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure";function dx(p){var x=p.zb;return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+gn(p.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',x&&(p+=Zo({label:Ii("Retry")})),Ct(p+"</div></div></div>")}dx.a="firebaseui.auth.soy2.page.recoverableError";function Ds(p){return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+gn(p.errorMessage)+"</p></div></div>",Ct(p)}Ds.a="firebaseui.auth.soy2.page.unrecoverableError";function QE(p,x,k){var N=p.Qb;return x="",p="Continue with "+(gn(p.jc)+"?"),N="You originally wanted to sign in with "+gn(N),x+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+p+'</h2><p class="firebaseui-text">'+N+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Jo(null)+Zo({label:Ii("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form></div>",Ct(x)}QE.a="firebaseui.auth.soy2.page.emailMismatch";function ks(p,x,k){var N='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';p=p.Sb,x=p.length;for(var V=0;V<x;V++){var H={ga:p[V]},ne=k;H=H||{};var ue=H.ga,Re=H;Re=Re||{};var at="";switch(Re.ga.providerId){case"google.com":at+="firebaseui-idp-google";break;case"github.com":at+="firebaseui-idp-github";break;case"facebook.com":at+="firebaseui-idp-facebook";break;case"twitter.com":at+="firebaseui-idp-twitter";break;case"phone":at+="firebaseui-idp-phone";break;case"anonymous":at+="firebaseui-idp-anonymous";break;case"password":at+="firebaseui-idp-password";break;default:at+="firebaseui-idp-generic"}Re='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+Wa(gr(at))+' firebaseui-id-idp-button" data-provider-id="'+Wa(ue.providerId)+'" style="background-color:',at=(at=H)||{},at=at.ga,Re=Re+Wa(eu(gr(at.ta?at.ta:ne.wa[at.providerId]?""+ne.wa[at.providerId]:at.providerId.indexOf("saml.")==0?""+ne.wa.saml:at.providerId.indexOf("oidc.")==0?""+ne.wa.oidc:""+ne.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var Ht=H;at=ne,Ht=Ht||{},Ht=Ht.ga,at=$y(Ht.za?fc(Ht.za):at.xa[Ht.providerId]?fc(at.xa[Ht.providerId]):Ht.providerId.indexOf("saml.")==0?fc(at.xa.saml):Ht.providerId.indexOf("oidc.")==0?fc(at.xa.oidc):fc(at.xa.password)),Re=Re+Wa(fc(at))+'"></span>',ue.providerId=="password"?(Re+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Re+=gn(ue.V):ue.S?(H="Sign in with "+gn(es(H,ne)),Re+=H):Re+="Sign in with email",Re+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Re=ue.S?Re+gn(ue.S):Re+"Email",Re+="</span>"):ue.providerId=="phone"?(Re+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Re+=gn(ue.V):ue.S?(H="Sign in with "+gn(es(H,ne)),Re+=H):Re+="Sign in with phone",Re+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Re=ue.S?Re+gn(ue.S):Re+"Phone",Re+="</span>"):ue.providerId=="anonymous"?(Re+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Re+=gn(ue.V):ue.S?(H="Sign in with "+gn(es(H,ne)),Re+=H):Re+="Continue as guest",Re+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Re=ue.S?Re+gn(ue.S):Re+"Guest",Re+="</span>"):(Re+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Re+=gn(ue.V):(at="Sign in with "+gn(es(H,ne)),Re+=at),Re+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(ue.S?gn(ue.S):gn(es(H,ne)))+"</span>"),ue=Ct(Re+"</button>"),N+='<li class="firebaseui-list-item">'+ue+"</li>"}return N+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Po(k)+"</div></div>",Ct(N)}ks.a="firebaseui.auth.soy2.page.providerSignIn";function JE(p,x,k){p=p||{};var N=p.Gb,V=p.Va;x=p.ia,p=p||{},p=p.Aa,p='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+Wa(p??"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Ct(p);var H;return N?H=Ct('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):H="",H=p+H+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(V?Jo(null):"")+Zo({label:Ii("Verify")})+'</div></div><div class="firebaseui-card-footer">',x?(x='<p class="firebaseui-tos firebaseui-phone-tos">',x=k.F&&k.D?x+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':x+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",k=Ct(x+"</p>")):k=Ct('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+Zr(k),Ct(H+k+"</div></form></div>")}JE.a="firebaseui.auth.soy2.page.phoneSignInStart";function eA(p,x,k){p=p||{},x=p.phoneNumber;var N="";return p='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+(gn(x)+"</a>"),gn(x),x=N,N=Ct('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'),k='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+"</p>"+N+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Jo(null)+Zo({label:Ii("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Zr(k)+"</div></form>",p=Ct('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),Ct(x+(k+p+"</div>"))}eA.a="firebaseui.auth.soy2.page.phoneSignInFinish";function cM(){return Ct('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}cM.a="firebaseui.auth.soy2.page.signOut";function Ed(p,x,k){var N='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';p=p.ec,x=p.length;for(var V=0;V<x;V++){var H=p[V],ne="",ue=gn(H.displayName),Re=H.tenantId?H.tenantId:"top-level-project";Re=Ii(Re),ne+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+Wa(Re)+' firebaseui-id-tenant-selection-button"'+(H.tenantId?'data-tenant-id="'+Wa(H.tenantId)+'"':"")+'style="background-color:'+Wa(eu(H.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+Wa(fc(H.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',H.V?ne+=gn(H.V):(H="Sign in to "+gn(H.displayName),ne+=H),ne=Ct(ne+('</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+ue+"</span></button>")),N+='<li class="firebaseui-list-item">'+ne+"</li>"}return N+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+Po(k)+"</div></div>",Ct(N)}Ed.a="firebaseui.auth.soy2.page.selectTenant";function A0(p,x,k){return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Tp(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Zo(null)+'</div></div><div class="firebaseui-card-footer">'+Po(k)+"</div></form></div>",Ct(p)}A0.a="firebaseui.auth.soy2.page.providerMatchByEmail";function ga(){return hr(this,"firebaseui-id-submit")}function Oi(){return hr(this,"firebaseui-id-secondary-link")}function ja(p,x){Pi(this,ga.call(this),function(N){p(N)});var k=Oi.call(this);k&&x&&Pi(this,k,function(N){x(N)})}function C0(){return hr(this,"firebaseui-id-password")}function D0(){return hr(this,"firebaseui-id-password-error")}function hx(){var p=C0.call(this),x=D0.call(this);yd(this,p,function(){Um(x)&&(Vi(p,!0),Es(x))})}function fx(){var p=C0.call(this),x=D0.call(this);return Na(p)?(Vi(p,!0),Es(x),x=!0):(Vi(p,!1),yr(x,gr("Enter your password").toString()),x=!1),x?Na(p):null}function Hm(p,x,k,N,V,H){Ye.call(this,sl,{email:p},H,"passwordLinking",{F:N,D:V}),this.w=x,this.H=k}s(Hm,Ye),Hm.prototype.v=function(){this.P(),this.M(this.w,this.H),xr(this,this.i(),this.w),this.i().focus(),Ye.prototype.v.call(this)},Hm.prototype.o=function(){this.w=null,Ye.prototype.o.call(this)},Hm.prototype.j=function(){return Na(hr(this,"firebaseui-id-email"))},L(Hm.prototype,{i:C0,B:D0,P:hx,u:fx,ea:ga,ba:Oi,M:ja});var oF=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Ad(){return hr(this,"firebaseui-id-email")}function Cd(){return hr(this,"firebaseui-id-email-error")}function Pp(p){var x=Ad.call(this),k=Cd.call(this);yd(this,x,function(){Um(k)&&(Vi(x,!0),Es(k))}),p&&Bm(this,x,function(){p()})}function Tc(){return Ge(Na(Ad.call(this))||"")}function Dd(){var p=Ad.call(this),x=Cd.call(this),k=Na(p)||"";return k?oF.test(k)?(Vi(p,!0),Es(x),x=!0):(Vi(p,!1),yr(x,gr("That email address isn't correct").toString()),x=!1):(Vi(p,!1),yr(x,gr("Enter your email address to continue").toString()),x=!1),x?Ge(Na(p)):null}function qm(p,x,k,N,V,H,ne){Ye.call(this,cr,{email:k,ia:!!H},ne,"passwordSignIn",{F:N,D:V}),this.w=p,this.H=x}s(qm,Ye),qm.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),S0(this,this.l(),this.i()),xr(this,this.i(),this.w),Na(this.l())?this.i().focus():this.l().focus(),Ye.prototype.v.call(this)},qm.prototype.o=function(){this.H=this.w=null,Ye.prototype.o.call(this)},L(qm.prototype,{l:Ad,U:Cd,P:Pp,M:Tc,j:Dd,i:C0,B:D0,ea:hx,u:fx,ua:ga,pa:Oi,ba:ja});function Lr(p,x,k,N,V,H){Ye.call(this,p,x,N,V||"notice",H),this.i=k||null}Y(Lr,Ye),Lr.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Lr.K.v.call(this)},Lr.prototype.o=function(){this.i=null,Lr.K.o.call(this)},L(Lr.prototype,{l:ga,w:Oi,u:ja});function k0(p,x,k,N,V){Lr.call(this,Cs,{email:p,G:!!x},x,V,"passwordRecoveryEmailSent",{F:k,D:N})}Y(k0,Lr);function tA(p,x){Lr.call(this,Ip,{G:!!p},p,x,"emailVerificationSuccess")}Y(tA,Lr);function nA(p,x){Lr.call(this,Mp,{G:!!p},p,x,"emailVerificationFailure")}Y(nA,Lr);function rA(p,x,k){Lr.call(this,cx,{email:p,G:!!x},x,k,"verifyAndChangeEmailSuccess")}Y(rA,Lr);function I0(p,x){Lr.call(this,ux,{G:!!p},p,x,"verifyAndChangeEmailFailure")}Y(I0,Lr);function iA(p,x){Lr.call(this,zm,{G:!!p},p,x,"revertSecondFactorAdditionFailure")}Y(iA,Lr);function aA(p){Lr.call(this,cM,void 0,void 0,p,"signOut")}Y(aA,Lr);function ii(p,x){Lr.call(this,E0,{G:!!p},p,x,"passwordResetSuccess")}Y(ii,Lr);function px(p,x){Lr.call(this,Sd,{G:!!p},p,x,"passwordResetFailure")}Y(px,Lr);function uM(p,x){Lr.call(this,Td,{G:!!p},p,x,"emailChangeRevokeFailure")}Y(uM,Lr);function oA(p,x,k){Lr.call(this,dx,{errorMessage:p,zb:!!x},x,k,"recoverableError")}Y(oA,Lr);function dM(p,x){Lr.call(this,Ds,{errorMessage:p},void 0,x,"unrecoverableError")}Y(dM,Lr);function M0(p){if(p.code==="auth/invalid-credential"&&p.message&&p.message.indexOf("error=consent_required")!==-1)return{code:"auth/user-cancelled"};if(p.message&&p.message.indexOf("HTTP Cloud Function returned an error:")!==-1){var x=JSON.parse(p.message.substring(p.message.indexOf("{"),p.message.lastIndexOf("}")+1));return{code:p.code,message:x&&x.error&&x.error.message||p.message}}return p}function kd(p,x,k,N){function V(ne){if(!ne.name||ne.name!="cancel"){e:{var ue=ne.message;try{var Re=((JSON.parse(ue).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(Re&&Re.length){var at=!0;break e}}catch{}at=!1}if(at)ne=zi(x),x.m(),ai(p,ne,void 0,gr("Your sign-in session has expired. Please try again.").toString());else{if(at=ne&&ne.message||"",ne.code){if(ne.code=="auth/email-already-in-use"||ne.code=="auth/credential-already-in-use")return;at=jr(ne)}x.a(at)}}}if(xM(p),N)return P0(p,k),Mi();if(!k.credential)throw Error("No credential found!");if(!Zn(p).currentUser&&!k.user)throw Error("User not logged in.");try{var H=xA(p,k)}catch(ne){return Io(ne.code||ne.message,ne),x.a(ne.code||ne.message),Mi()}return k=H.then(function(ne){P0(p,ne)},V).then(void 0,V),qn(p,H),Mi(k)}function P0(p,x){if(!x.user)throw Error("No user found");var k=xa(Ze(p));if(xc(Ze(p))&&k&&Xo("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),k){k=xa(Ze(p));var N=wE(dn(p))||void 0;Ts(Tm,dn(p));var V=!1;M_()?((!k||k(x,N))&&(V=!0,so(window.opener.location,Id(p,N))),k||window.close()):(!k||k(x,N))&&(V=!0,so(window.location,Id(p,N))),V||p.reset()}else{k=x.user,x=x.credential,N=xc(Ze(p)),V=wE(dn(p))||void 0,Ts(Tm,dn(p));var H=!1;M_()?((!N||N(k,x,V))&&(H=!0,so(window.opener.location,Id(p,V))),N||window.close()):(!N||N(k,x,V))&&(H=!0,so(window.location,Id(p,V))),H||p.reset()}}function Id(p,x){if(p=x||Ze(p).a.get("signInSuccessUrl"),!p)throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return p}function jr(p){var x={code:p.code};x=x||{};var k="";switch(x.code){case"auth/email-already-in-use":k+="The email address is already used by another account";break;case"auth/requires-recent-login":k+=ht();break;case"auth/too-many-requests":k+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":k+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":k+="That email address doesn't match an existing account";break;case"auth/user-token-expired":k+=ht();break;case"auth/weak-password":k+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":k+="The email and password you entered don't match";break;case"auth/network-request-failed":k+="A network error has occurred";break;case"auth/invalid-phone-number":k+=G();break;case"auth/invalid-verification-code":k+=gr("Wrong code. Try again.");break;case"auth/code-expired":k+="This code is no longer valid";break;case"auth/expired-action-code":k+="This code has expired.";break;case"auth/invalid-action-code":k+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(x=gr(k).toString())return x;try{return JSON.parse(p.message),Io("Internal error: "+p.message,void 0),se().toString()}catch{return p.message}}function gx(p,x,k){var N=bp[x]&&tn.auth[bp[x]]?new tn.auth[bp[x]]:x.indexOf("saml.")==0?new tn.auth.SAMLAuthProvider(x):new tn.auth.OAuthProvider(x);if(!N)throw Error("Invalid Firebase Auth provider!");var V=wp(Ze(p),x);if(N.addScope)for(var H=0;H<V.length;H++)N.addScope(V[H]);return V=Mm(Ze(p),x)||{},k&&(x==tn.auth.GoogleAuthProvider.PROVIDER_ID?p="login_hint":x==tn.auth.GithubAuthProvider.PROVIDER_ID?p="login":p=(p=km(Ze(p),x))&&p.Ob,p&&(V[p]=k)),N.setCustomParameters&&N.setCustomParameters(V),N}function Op(p,x,k,N){function V(){K2(new wm(p.h.tenantId||null),dn(p)),qn(p,x.I(O(p.dc,p),[Re],function(){if((window.location&&window.location.protocol)==="file:")return qn(p,Up(p).then(function(at){x.m(),Ts(Oh,dn(p)),Ft("callback",p,ue,Mi(at))},H))},ne))}function H(at){if(Ts(Oh,dn(p)),!at.name||at.name!="cancel")switch(at=M0(at),at.code){case"auth/popup-blocked":V();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":break;case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":x.a(jr(at));break;case"auth/admin-restricted-operation":x.m(),Nh(Ze(p))?Ft("handleUnauthorizedUser",p,ue,null,k):Ft("callback",p,ue,Rl(at));break;default:x.m(),Ft("callback",p,ue,Rl(at))}}function ne(at){Ts(Oh,dn(p)),at.name&&at.name=="cancel"||(Io("signInWithRedirect: "+at.code,void 0),at=jr(at),x.Ga=="blank"&&Q_(Ze(p))?(x.m(),Ft("providerSignIn",p,ue,at)):x.a(at))}var ue=zi(x),Re=gx(p,k,N);vd(Ze(p))==hu?V():qn(p,EM(p,Re).then(function(at){x.m(),Ft("callback",p,ue,Mi(at))},H))}function Rp(p,x){qn(p,x.I(O(p.$b,p),[],function(k){return x.m(),kd(p,x,k,!0)},function(k){k.name&&k.name=="cancel"||(Io("ContinueAsGuest: "+k.code,void 0),k=jr(k),x.a(k))}))}function vu(p,x,k){function N(H){var ne=!1;return H=x.I(O(p.ac,p),[H],function(ue){var Re=zi(x);x.m(),Ft("callback",p,Re,Mi(ue)),ne=!0},function(ue){if((!ue.name||ue.name!="cancel")&&(!ue||ue.code!="auth/credential-already-in-use"))if(ue&&ue.code=="auth/email-already-in-use"&&ue.email&&ue.credential){var Re=zi(x);x.m(),Ft("callback",p,Re,Rl(ue))}else ue&&ue.code=="auth/admin-restricted-operation"&&Nh(Ze(p))?(ue=zi(x),x.m(),Ft("handleUnauthorizedUser",p,ue,null,tn.auth.GoogleAuthProvider.PROVIDER_ID)):(ue=jr(ue),x.a(ue))}),qn(p,H),H.then(function(){return ne},function(){return!1})}if(k&&k.credential&&k.clientId===K_(Ze(p))){if(wp(Ze(p),tn.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var V=JSON.parse(atob(k.credential.split(".")[1])).email}catch{}return Op(p,x,tn.auth.GoogleAuthProvider.PROVIDER_ID,V),Mi(!0)}return N(tn.auth.GoogleAuthProvider.credential(k.credential))}return k&&x.a(gr("The selected credential for the authentication provider is not supported!").toString()),Mi(!1)}function O0(p,x){var k=x.j(),N=x.u();if(k)if(N){var V=tn.auth.EmailAuthProvider.credential(k,N);qn(p,x.I(O(p.bc,p),[k,N],function(H){return kd(p,x,{user:H.user,credential:V,operationType:H.operationType,additionalUserInfo:H.additionalUserInfo})},function(H){if(!H.name||H.name!="cancel")switch(H.code){case"auth/email-already-in-use":break;case"auth/email-exists":Vi(x.l(),!1),yr(x.U(),jr(H));break;case"auth/too-many-requests":case"auth/wrong-password":Vi(x.i(),!1),yr(x.B(),jr(H));break;default:Io("verifyPassword: "+H.message,void 0),x.a(jr(H))}}))}else x.i().focus();else x.l().focus()}function mx(p){return p=Dm(Ze(p)),p.length==1&&p[0]==tn.auth.EmailAuthProvider.PROVIDER_ID}function sA(p){return p=Dm(Ze(p)),p.length==1&&p[0]==tn.auth.PhoneAuthProvider.PROVIDER_ID}function ai(p,x,k,N){mx(p)?N?Ft("signIn",p,x,k,N):R0(p,x,k):p&&sA(p)&&!N?Ft("phoneSignInStart",p,x):p&&Q_(Ze(p))&&!N?Ft("federatedRedirect",p,x,k):Ft("providerSignIn",p,x,N,k)}function lA(p,x,k,N){var V=zi(x);qn(p,x.I(O(Zn(p).fetchSignInMethodsForEmail,Zn(p)),[k],function(H){x.m(),cA(p,V,H,k,N)},function(H){H=jr(H),x.a(H)}))}function cA(p,x,k,N,V,H){k.length||uo(Ze(p))&&!uo(Ze(p))?he(k,tn.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Ft("passwordSignIn",p,x,N,H):k.length==1&&k[0]===tn.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?uo(Ze(p))?Ft("sendEmailLinkForSignIn",p,x,N,function(){Ft("signIn",p,x)}):Ft("unsupportedProvider",p,x,N):(k=Y_(k,Dm(Ze(p))))?(_E(new r0(N),dn(p)),Ft("federatedSignIn",p,x,N,k,V)):Ft("unsupportedProvider",p,x,N):l0(Ze(p))?Ft("handleUnauthorizedUser",p,x,N,tn.auth.EmailAuthProvider.PROVIDER_ID):uo(Ze(p))?Ft("sendEmailLinkForSignIn",p,x,N,function(){Ft("signIn",p,x)}):Ft("passwordSignUp",p,x,N,void 0,void 0,H)}function uA(p,x,k,N,V,H){var ne=zi(x);qn(p,x.I(O(p.Ib,p),[k,H],function(){x.m(),Ft("emailLinkSignInSent",p,ne,k,N,H)},V))}function R0(p,x,k){k?Ft("prefilledEmailSignIn",p,x,k):Ft("signIn",p,x)}function Gm(){return rr(Vr(),"oobCode")}function vx(){var p=rr(Vr(),"continueUrl");return p?function(){so(window.location,p)}:null}function N0(p,x){Ye.call(this,ox,void 0,x,"anonymousUserMismatch"),this.i=p}s(N0,Ye),N0.prototype.v=function(){var p=this;Pi(this,this.l(),function(){p.i()}),this.l().focus(),Ye.prototype.v.call(this)},N0.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(N0.prototype,{l:Oi}),Mr.anonymousUserMismatch=function(p,x){var k=new N0(function(){k.m(),ai(p,x)});k.render(x),Fn(p,k)};function Wm(p){Ye.call(this,_d,void 0,p,"callback")}s(Wm,Ye),Wm.prototype.I=function(p,x,k,N){return p.apply(null,x).then(k,N)};function yx(p,x,k){if(k.user){var N={user:k.user,credential:k.credential,operationType:k.operationType,additionalUserInfo:k.additionalUserInfo},V=_c(dn(p)),H=V&&V.g;if(H&&!fM(k.user,H))sF(p,x,N);else{var ne=V&&V.a;ne?qn(p,k.user.linkWithCredential(ne).then(function(ue){N={user:ue.user,credential:ne,operationType:ue.operationType,additionalUserInfo:ue.additionalUserInfo},hM(p,x,N)},function(ue){bx(p,x,ue)})):hM(p,x,N)}}else k=zi(x),x.m(),jl(dn(p)),ai(p,k)}function hM(p,x,k){jl(dn(p)),kd(p,x,k)}function bx(p,x,k){var N=zi(x);jl(dn(p)),k=jr(k),x.m(),ai(p,N,void 0,k)}function Ym(p,x,k,N){var V=zi(x);qn(p,Zn(p).fetchSignInMethodsForEmail(k).then(function(H){x.m(),H.length?he(H,tn.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Ft("passwordLinking",p,V,k):H.length==1&&H[0]===tn.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Ft("emailLinkSignInLinking",p,V,k):(H=Y_(H,Dm(Ze(p))))?Ft("federatedLinking",p,V,k,H,N):(jl(dn(p)),Ft("unsupportedProvider",p,V,k)):(jl(dn(p)),Ft("passwordRecovery",p,V,k,!1,Ee().toString()))},function(H){bx(p,x,H)}))}function sF(p,x,k){var N=zi(x);qn(p,Md(p).then(function(){x.m(),Ft("emailMismatch",p,N,k)},function(V){V.name&&V.name=="cancel"||(V=jr(V.code),x.a(V))}))}function fM(p,x){if(x==p.email)return!0;if(p.providerData){for(var k=0;k<p.providerData.length;k++)if(x==p.providerData[k].email)return!0}return!1}Mr.callback=function(p,x,k){var N=new Wm;N.render(x),Fn(p,N),k=k||Up(p),qn(p,k.then(function(V){yx(p,N,V)},function(V){if((V=M0(V))&&(V.code=="auth/account-exists-with-different-credential"||V.code=="auth/email-already-in-use")&&V.email&&V.credential)_E(new r0(V.email,V.credential),dn(p)),Ym(p,N,V.email);else if(V&&V.code=="auth/user-cancelled"){var H=_c(dn(p)),ne=jr(V);H&&H.a?Ym(p,N,H.g,ne):H?lA(p,N,H.g,ne):bx(p,N,V)}else V&&V.code=="auth/credential-already-in-use"||(V&&V.code=="auth/operation-not-supported-in-this-environment"&&mx(p)?yx(p,N,{user:null,credential:null}):V&&V.code=="auth/admin-restricted-operation"&&Nh(Ze(p))?(N.m(),jl(dn(p)),Ft("handleUnauthorizedUser",p,x,null,null)):bx(p,N,V))}))};function Yn(p,x){Ye.call(this,Gh,void 0,x,"differentDeviceError"),this.i=p}s(Yn,Ye),Yn.prototype.v=function(){var p=this;Pi(this,this.l(),function(){p.i()}),this.l().focus(),Ye.prototype.v.call(this)},Yn.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(Yn.prototype,{l:Oi}),Mr.differentDeviceError=function(p,x){var k=new Yn(function(){k.m(),ai(p,x)});k.render(x),Fn(p,k)};function Np(p,x,k,N){Ye.call(this,Za,{email:p,G:!!k},N,"emailChangeRevoke"),this.l=x,this.i=k||null}s(Np,Ye),Np.prototype.v=function(){var p=this;Pi(this,hr(this,"firebaseui-id-reset-password-link"),function(){p.l()}),this.i&&(this.w(this.i),this.u().focus()),Ye.prototype.v.call(this)},Np.prototype.o=function(){this.l=this.i=null,Ye.prototype.o.call(this)},L(Np.prototype,{u:ga,B:Oi,w:ja});function Wh(){return hr(this,"firebaseui-id-new-password")}function Km(){return hr(this,"firebaseui-id-password-toggle")}function pM(){this.Ra=!this.Ra;var p=Km.call(this),x=Wh.call(this);this.Ra?(x.type="text",Ti(p,"firebaseui-input-toggle-off"),Sc(p,"firebaseui-input-toggle-on")):(x.type="password",Ti(p,"firebaseui-input-toggle-on"),Sc(p,"firebaseui-input-toggle-off")),x.focus()}function Xm(){return hr(this,"firebaseui-id-new-password-error")}function Zm(){this.Ra=!1;var p=Wh.call(this);p.type="password";var x=Xm.call(this);yd(this,p,function(){Um(x)&&(Vi(p,!0),Es(x))});var k=Km.call(this);Ti(k,"firebaseui-input-toggle-on"),Sc(k,"firebaseui-input-toggle-off"),bd(this,p,function(){Ti(k,"firebaseui-input-toggle-focus"),Sc(k,"firebaseui-input-toggle-blur")}),pa(this,p,function(){Ti(k,"firebaseui-input-toggle-blur"),Sc(k,"firebaseui-input-toggle-focus")}),Pi(this,k,O(pM,this))}function L0(){var p=Wh.call(this),x=Xm.call(this);return Na(p)?(Vi(p,!0),Es(x),x=!0):(Vi(p,!1),yr(x,gr("Enter your password").toString()),x=!1),x?Na(p):null}function yu(p,x,k){Ye.call(this,T0,{email:p},k,"passwordReset"),this.l=x}s(yu,Ye),yu.prototype.v=function(){this.H(),this.B(this.l),xr(this,this.i(),this.l),this.i().focus(),Ye.prototype.v.call(this)},yu.prototype.o=function(){this.l=null,Ye.prototype.o.call(this)},L(yu.prototype,{i:Wh,w:Xm,M:Km,H:Zm,u:L0,U:ga,P:Oi,B:ja});function Qm(p,x,k,N,V){Ye.call(this,ZE,{factorId:p,phoneNumber:k||null,G:!!N},V,"revertSecondFactorAdditionSuccess"),this.l=x,this.i=N||null}s(Qm,Ye),Qm.prototype.v=function(){var p=this;Pi(this,hr(this,"firebaseui-id-reset-password-link"),function(){p.l()}),this.i&&(this.w(this.i),this.u().focus()),Ye.prototype.v.call(this)},Qm.prototype.o=function(){this.l=this.i=null,Ye.prototype.o.call(this)},L(Qm.prototype,{u:ga,B:Oi,w:ja});function lF(p,x,k,N,V){var H=k.u();H&&qn(p,k.I(O(Zn(p).confirmPasswordReset,Zn(p)),[N,H],function(){k.m();var ne=new ii(V);ne.render(x),Fn(p,ne)},function(ne){gM(p,x,k,ne)}))}function gM(p,x,k,N){(N&&N.code)=="auth/weak-password"?(p=jr(N),Vi(k.i(),!1),yr(k.w(),p),k.i().focus()):(k&&k.m(),k=new px,k.render(x),Fn(p,k))}function mM(p,x,k){var N=new Np(k,function(){qn(p,N.I(O(Zn(p).sendPasswordResetEmail,Zn(p)),[k],function(){N.m(),N=new k0(k,void 0,ia(Ze(p)),Si(Ze(p))),N.render(x),Fn(p,N)},function(){N.a(Q().toString())}))});N.render(x),Fn(p,N)}function vM(p,x,k,N){var V=new Qm(N.factorId,function(){V.I(O(Zn(p).sendPasswordResetEmail,Zn(p)),[k],function(){V.m(),V=new k0(k,void 0,ia(Ze(p)),Si(Ze(p))),V.render(x),Fn(p,V)},function(){V.a(Q().toString())})},N.phoneNumber);V.render(x),Fn(p,V)}Mr.passwordReset=function(p,x,k,N){qn(p,Zn(p).verifyPasswordResetCode(k).then(function(V){var H=new yu(V,function(){lF(p,x,H,k,N)});H.render(x),Fn(p,H)},function(){gM(p,x)}))},Mr.emailChangeRevocation=function(p,x,k){var N=null;qn(p,Zn(p).checkActionCode(k).then(function(V){return N=V.data.email,Zn(p).applyActionCode(k)}).then(function(){mM(p,x,N)},function(){var V=new uM;V.render(x),Fn(p,V)}))},Mr.emailVerification=function(p,x,k,N){qn(p,Zn(p).applyActionCode(k).then(function(){var V=new tA(N);V.render(x),Fn(p,V)},function(){var V=new nA;V.render(x),Fn(p,V)}))},Mr.revertSecondFactorAddition=function(p,x,k){var N=null,V=null;qn(p,Zn(p).checkActionCode(k).then(function(H){return N=H.data.email,V=H.data.multiFactorInfo,Zn(p).applyActionCode(k)}).then(function(){vM(p,x,N,V)},function(){var H=new iA;H.render(x),Fn(p,H)}))},Mr.verifyAndChangeEmail=function(p,x,k,N){var V=null;qn(p,Zn(p).checkActionCode(k).then(function(H){return V=H.data.email,Zn(p).applyActionCode(k)}).then(function(){var H=new rA(V,N);H.render(x),Fn(p,H)},function(){var H=new I0;H.render(x),Fn(p,H)}))};function Lp(p,x){try{var k=typeof p.selectionStart=="number"}catch{k=!1}k?(p.selectionStart=x,p.selectionEnd=x):Qt&&!Xs("9")&&(p.type=="textarea"&&(x=p.value.substring(0,x).replace(/(\r\n|\r|\n)/g,`
`).length),p=p.createTextRange(),p.collapse(!0),p.move("character",x),p.select())}function Pr(p,x,k,N,V,H){Ye.call(this,xd,{email:k},H,"emailLinkSignInConfirmation",{F:N,D:V}),this.l=p,this.u=x}s(Pr,Ye),Pr.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Lp(this.i(),(this.i().value||"").length),Ye.prototype.v.call(this)},Pr.prototype.o=function(){this.u=this.l=null,Ye.prototype.o.call(this)},L(Pr.prototype,{i:Ad,M:Cd,w:Pp,H:Tc,j:Dd,U:ga,P:Oi,B:ja}),Mr.emailLinkConfirmation=function(p,x,k,N,V,H){var ne=new Pr(function(){var ue=ne.j();ue?(ne.m(),N(p,x,ue,k)):ne.i().focus()},function(){ne.m(),ai(p,x,V||void 0)},V||void 0,ia(Ze(p)),Si(Ze(p)));ne.render(x),Fn(p,ne),H&&ne.a(H)};function jp(p,x,k,N,V){Ye.call(this,Vm,{ga:p},V,"emailLinkSignInLinkingDifferentDevice",{F:k,D:N}),this.i=x}s(jp,Ye),jp.prototype.v=function(){this.u(this.i),this.l().focus(),Ye.prototype.v.call(this)},jp.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(jp.prototype,{l:ga,u:ja}),Mr.emailLinkNewDeviceLinking=function(p,x,k,N){var V=new ot(k);if(k=V.a.a.get(sn.PROVIDER_ID)||null,Sn(V,null),k){var H=new jp(km(Ze(p),k),function(){H.m(),N(p,x,V.toString())},ia(Ze(p)),Si(Ze(p)));H.render(x),Fn(p,H)}else ai(p,x)};function Sa(p){Ye.call(this,ax,void 0,p,"blank")}s(Sa,Ye);function dA(p,x,k,N,V){var H=new Sa,ne=new ot(k),ue=ne.a.a.get(sn.$a)||"",Re=ne.a.a.get(sn.Sa)||"",at=ne.a.a.get(sn.Qa)==="1",Ht=Kt(ne),Dr=ne.a.a.get(sn.PROVIDER_ID)||null;ne=ne.a.a.get(sn.vb)||null,q0(p,ne);var g=!mp(pp,dn(p)),b=N||X2(Re,dn(p)),T=(N=Z2(Re,dn(p)))&&N.a;Dr&&T&&T.providerId!==Dr&&(T=null),H.render(x),Fn(p,H),qn(p,H.I(function(){var I=Mi(null);I=Ht&&g||g&&at?Rl(Error("anonymous-user-not-found")):gF(p,k).then(function(U){if(Dr&&!T)throw Error("pending-credential-not-found");return U});var F=null;return I.then(function(U){return F=U,V?null:Zn(p).checkActionCode(ue)}).then(function(){return F})},[],function(I){b?xx(p,H,b,k,T,I):at?(H.m(),Ft("differentDeviceError",p,x)):(H.m(),Ft("emailLinkConfirmation",p,x,k,_x))},function(I){var F=void 0;if(!I||!I.name||I.name!="cancel")switch(H.m(),I&&I.message){case"anonymous-user-not-found":Ft("differentDeviceError",p,x);break;case"anonymous-user-mismatch":Ft("anonymousUserMismatch",p,x);break;case"pending-credential-not-found":Ft("emailLinkNewDeviceLinking",p,x,k,hA);break;default:I&&(F=jr(I)),ai(p,x,void 0,F)}}))}function _x(p,x,k,N){dA(p,x,N,k,!0)}function hA(p,x,k){dA(p,x,k)}function xx(p,x,k,N,V,H){var ne=zi(x);x.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",gr("Signing in...").toString());var ue=null;V=(H?SM(p,H,k,N,V):TM(p,k,N,V)).then(function(Re){Ts(gp,dn(p)),Ts(pp,dn(p)),x.h(),x.$("firebaseui-icon-done",gr("Signed in!").toString()),ue=setTimeout(function(){x.h(),kd(p,x,Re,!0)},1e3),qn(p,function(){x&&(x.h(),x.m()),clearTimeout(ue)})},function(Re){if(x.h(),x.m(),!Re.name||Re.name!="cancel"){Re=M0(Re);var at=jr(Re);Re.code=="auth/email-already-in-use"||Re.code=="auth/credential-already-in-use"?(Ts(gp,dn(p)),Ts(pp,dn(p))):Re.code=="auth/invalid-email"?(at=gr("The email provided does not match the current sign-in session.").toString(),Ft("emailLinkConfirmation",p,ne,N,_x,null,at)):ai(p,ne,k,at)}}),qn(p,V)}Mr.emailLinkSignInCallback=dA;function Jm(p,x,k,N,V,H){Ye.call(this,kp,{email:p,ga:x},H,"emailLinkSignInLinking",{F:N,D:V}),this.i=k}s(Jm,Ye),Jm.prototype.v=function(){this.u(this.i),this.l().focus(),Ye.prototype.v.call(this)},Jm.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(Jm.prototype,{l:ga,u:ja});function yM(p,x,k,N){var V=zi(x);uA(p,x,k,function(){ai(p,V,k)},function(H){if(!H.name||H.name!="cancel"){var ne=jr(H);H&&H.code=="auth/network-request-failed"?x.a(ne):(x.m(),ai(p,V,k,ne))}},N)}Mr.emailLinkSignInLinking=function(p,x,k){var N=_c(dn(p));if(jl(dn(p)),N){var V=N.a.providerId,H=new Jm(k,km(Ze(p),V),function(){yM(p,H,k,N)},ia(Ze(p)),Si(Ze(p)));H.render(x),Fn(p,H)}else ai(p,x)};function Fp(p,x,k,N,V,H){Ye.call(this,mu,{email:p},H,"emailLinkSignInSent",{F:N,D:V}),this.u=x,this.i=k}s(Fp,Ye),Fp.prototype.v=function(){var p=this;Pi(this,this.l(),function(){p.i()}),Pi(this,hr(this,"firebaseui-id-trouble-getting-email-link"),function(){p.u()}),this.l().focus(),Ye.prototype.v.call(this)},Fp.prototype.o=function(){this.i=this.u=null,Ye.prototype.o.call(this)},L(Fp.prototype,{l:Oi}),Mr.emailLinkSignInSent=function(p,x,k,N,V){var H=new Fp(k,function(){H.m(),Ft("emailNotReceived",p,x,k,N,V)},function(){H.m(),N()},ia(Ze(p)),Si(Ze(p)));H.render(x),Fn(p,H)};function $p(p,x,k,N,V,H,ne){Ye.call(this,QE,{jc:p,Qb:x},ne,"emailMismatch",{F:V,D:H}),this.l=k,this.i=N}s($p,Ye),$p.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ye.prototype.v.call(this)},$p.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L($p.prototype,{u:ga,B:Oi,w:ja}),Mr.emailMismatch=function(p,x,k){var N=_c(dn(p));if(N){var V=new $p(k.user.email,N.g,function(){var H=V;jl(dn(p)),kd(p,H,k)},function(){var H=k.credential.providerId,ne=zi(V);V.m(),N.a?Ft("federatedLinking",p,ne,N.g,H):Ft("federatedSignIn",p,ne,N.g,H)},ia(Ze(p)),Si(Ze(p)));V.render(x),Fn(p,V)}else ai(p,x)};function ev(p,x,k,N,V){Ye.call(this,Qi,void 0,V,"emailNotReceived",{F:k,D:N}),this.l=p,this.i=x}s(ev,Ye),ev.prototype.v=function(){var p=this;Pi(this,this.u(),function(){p.i()}),Pi(this,this.Da(),function(){p.l()}),this.u().focus(),Ye.prototype.v.call(this)},ev.prototype.Da=function(){return hr(this,"firebaseui-id-resend-email-link")},ev.prototype.o=function(){this.i=this.l=null,Ye.prototype.o.call(this)},L(ev.prototype,{u:Oi}),Mr.emailNotReceived=function(p,x,k,N,V){var H=new ev(function(){uA(p,H,k,N,function(ne){ne=jr(ne),H.a(ne)},V)},function(){H.m(),ai(p,x,k)},ia(Ze(p)),Si(Ze(p)));H.render(x),Fn(p,H)};function Bp(p,x,k,N,V,H){Ye.call(this,ts,{email:p,ga:x},H,"federatedLinking",{F:N,D:V}),this.i=k}s(Bp,Ye),Bp.prototype.v=function(){this.u(this.i),this.l().focus(),Ye.prototype.v.call(this)},Bp.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(Bp.prototype,{l:ga,u:ja}),Mr.federatedLinking=function(p,x,k,N,V){var H=_c(dn(p));if(H&&H.a){var ne=new Bp(k,km(Ze(p),N),function(){Op(p,ne,N,k)},ia(Ze(p)),Si(Ze(p)));ne.render(x),Fn(p,ne),V&&ne.a(V)}else ai(p,x)},Mr.federatedRedirect=function(p,x,k){var N=new Sa;N.render(x),Fn(p,N),x=Dm(Ze(p))[0],Op(p,N,x,k)},Mr.federatedSignIn=function(p,x,k,N,V){var H=new Bp(k,km(Ze(p),N),function(){Op(p,H,N,k)},ia(Ze(p)),Si(Ze(p)));H.render(x),Fn(p,H),V&&H.a(V)};function cF(p,x,k,N){var V=x.u();V?qn(p,x.I(O(p.Xb,p),[k,V],function(H){return H=H.user.linkWithCredential(N).then(function(ne){return kd(p,x,{user:ne.user,credential:N,operationType:ne.operationType,additionalUserInfo:ne.additionalUserInfo})}),qn(p,H),H},function(H){if(!H.name||H.name!="cancel")switch(H.code){case"auth/wrong-password":Vi(x.i(),!1),yr(x.B(),jr(H));break;case"auth/too-many-requests":x.a(jr(H));break;default:Io("signInWithEmailAndPassword: "+H.message,void 0),x.a(jr(H))}})):x.i().focus()}Mr.passwordLinking=function(p,x,k){var N=_c(dn(p));jl(dn(p));var V=N&&N.a;if(V){var H=new Hm(k,function(){cF(p,H,k,V)},function(){H.m(),Ft("passwordRecovery",p,x,k)},ia(Ze(p)),Si(Ze(p)));H.render(x),Fn(p,H)}else ai(p,x)};function tv(p,x,k,N,V,H){Ye.call(this,zr,{email:k,Ta:!!x},H,"passwordRecovery",{F:N,D:V}),this.l=p,this.u=x}s(tv,Ye),tv.prototype.v=function(){this.B(),this.H(this.l,this.u),Na(this.i())||this.i().focus(),xr(this,this.i(),this.l),Ye.prototype.v.call(this)},tv.prototype.o=function(){this.u=this.l=null,Ye.prototype.o.call(this)},L(tv.prototype,{i:Ad,w:Cd,B:Pp,M:Tc,j:Dd,U:ga,P:Oi,H:ja});function uF(p,x){var k=x.j();if(k){var N=zi(x);qn(p,x.I(O(Zn(p).sendPasswordResetEmail,Zn(p)),[k],function(){x.m();var V=new k0(k,function(){V.m(),ai(p,N)},ia(Ze(p)),Si(Ze(p)));V.render(N),Fn(p,V)},function(V){Vi(x.i(),!1),yr(x.w(),jr(V))}))}else x.i().focus()}Mr.passwordRecovery=function(p,x,k,N,V){var H=new tv(function(){uF(p,H)},N?void 0:function(){H.m(),ai(p,x)},k,ia(Ze(p)),Si(Ze(p)));H.render(x),Fn(p,H),V&&H.a(V)},Mr.passwordSignIn=function(p,x,k,N){var V=new qm(function(){O0(p,V)},function(){var H=V.M();V.m(),Ft("passwordRecovery",p,x,H)},k,ia(Ze(p)),Si(Ze(p)),N);V.render(x),Fn(p,V)};function fA(){return hr(this,"firebaseui-id-name")}function bu(){return hr(this,"firebaseui-id-name-error")}function nv(p,x,k,N,V,H,ne,ue,Re){Ye.call(this,br,{email:N,Tb:p,name:V,Ta:!!k,ia:!!ue},Re,"passwordSignUp",{F:H,D:ne}),this.w=x,this.H=k,this.B=p}s(nv,Ye),nv.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(S0(this,this.i(),this.u()),S0(this,this.u(),this.l())):S0(this,this.i(),this.l()),this.w&&xr(this,this.l(),this.w),Na(this.i())?this.B&&!Na(this.u())?this.u().focus():this.l().focus():this.i().focus(),Ye.prototype.v.call(this)},nv.prototype.o=function(){this.H=this.w=null,Ye.prototype.o.call(this)},L(nv.prototype,{i:Ad,U:Cd,ea:Pp,jb:Tc,j:Dd,u:fA,Bc:bu,Ja:function(){var p=fA.call(this),x=bu.call(this);yd(this,p,function(){Um(x)&&(Vi(p,!0),Es(x))})},M:function(){var p=fA.call(this),x=bu.call(this),k=Na(p);return k=!/^[\s\xa0]*$/.test(k==null?"":String(k)),Vi(p,k),k?(Es(x),x=!0):(yr(x,gr("Enter your account name").toString()),x=!1),x?Ge(Na(p)):null},l:Wh,ba:Xm,lb:Km,ua:Zm,P:L0,Nb:ga,Mb:Oi,pa:ja});function pA(p,x){var k=OE(Ze(p)),N=x.j(),V=null;k&&(V=x.M());var H=x.P();if(N){if(k)if(V)V=Le(V);else{x.u().focus();return}if(H){var ne=tn.auth.EmailAuthProvider.credential(N,H);qn(p,x.I(O(p.Yb,p),[N,H],function(ue){var Re={user:ue.user,credential:ne,operationType:ue.operationType,additionalUserInfo:ue.additionalUserInfo};return k?(ue=ue.user.updateProfile({displayName:V}).then(function(){return kd(p,x,Re)}),qn(p,ue),ue):kd(p,x,Re)},function(ue){if(!ue.name||ue.name!="cancel"){var Re=M0(ue);switch(ue=jr(Re),Re.code){case"auth/email-already-in-use":return dF(p,x,N,Re);case"auth/too-many-requests":ue=gr("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Vi(x.l(),!1),yr(x.ba(),ue);break;case"auth/admin-restricted-operation":Nh(Ze(p))?(ue=zi(x),x.m(),Ft("handleUnauthorizedUser",p,ue,N,tn.auth.EmailAuthProvider.PROVIDER_ID)):x.a(ue);break;default:Re="setAccountInfo: "+Y2(Re),Io(Re,void 0),x.a(ue)}}}))}else x.l().focus()}else x.i().focus()}function dF(p,x,k,N){function V(){var ne=jr(N);Vi(x.i(),!1),yr(x.U(),ne),x.i().focus()}var H=Zn(p).fetchSignInMethodsForEmail(k).then(function(ne){ne.length?V():(ne=zi(x),x.m(),Ft("passwordRecovery",p,ne,k,!1,Ee().toString()))},function(){V()});return qn(p,H),H}Mr.passwordSignUp=function(p,x,k,N,V,H){function ne(){ue.m(),ai(p,x)}var ue=new nv(OE(Ze(p)),function(){pA(p,ue)},V?void 0:ne,k,N,ia(Ze(p)),Si(Ze(p)),H);ue.render(x),Fn(p,ue)};function gA(){return hr(this,"firebaseui-id-phone-confirmation-code")}function Sx(){return hr(this,"firebaseui-id-phone-confirmation-code-error")}function bM(){return hr(this,"firebaseui-id-resend-countdown")}function Oo(p,x,k,N,V,H,ne,ue,Re){Ye.call(this,eA,{phoneNumber:V},Re,"phoneSignInFinish",{F:ne,D:ue}),this.jb=H,this.i=new g0(1e3),this.B=H,this.P=p,this.l=x,this.H=k,this.M=N}s(Oo,Ye),Oo.prototype.v=function(){var p=this;this.U(this.jb),Xi(this.i,"tick",this.w,!1,this),this.i.start(),Pi(this,hr(this,"firebaseui-id-change-phone-number-link"),function(){p.P()}),Pi(this,this.Da(),function(){p.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),Ye.prototype.v.call(this)},Oo.prototype.o=function(){this.M=this.H=this.l=this.P=null,Rm(this.i),xh(this.i,"tick",this.w),this.i=null,Ye.prototype.o.call(this)},Oo.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Rm(this.i),xh(this.i,"tick",this.w),this.ua(),this.lb())},L(Oo.prototype,{u:gA,pa:Sx,Ja:function(p){var x=gA.call(this),k=Sx.call(this);yd(this,x,function(){Um(k)&&(Vi(x,!0),Es(k))}),p&&Bm(this,x,function(){p()})},ba:function(){var p=Ge(Na(gA.call(this))||"");return/^\d{6}$/.test(p)?p:null},Fb:bM,U:function(p){id(bM.call(this),gr("Resend code in "+((9<p?"0:":"0:0")+p)).toString())},ua:function(){Es(this.Fb())},Da:function(){return hr(this,"firebaseui-id-resend-link")},lb:function(){yr(this.Da())},Nb:ga,Mb:Oi,ea:ja});function mA(p,x,k,N){function V(ne){x.u().focus(),Vi(x.u(),!1),yr(x.pa(),ne)}var H=x.ba();H?(x.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",gr("Verifying...").toString()),qn(p,x.I(O(N.confirm,N),[H],function(ne){x.h(),x.$("firebaseui-icon-done",gr("Verified!").toString());var ue=setTimeout(function(){x.h(),x.m();var Re={user:ll(p).currentUser,credential:null,operationType:ne.operationType,additionalUserInfo:ne.additionalUserInfo};kd(p,x,Re,!0)},1e3);qn(p,function(){x&&x.h(),clearTimeout(ue)})},function(ne){if(ne.name&&ne.name=="cancel")x.h();else{var ue=M0(ne);switch(ne=jr(ue),ue.code){case"auth/credential-already-in-use":x.h();break;case"auth/code-expired":ue=zi(x),x.h(),x.m(),Ft("phoneSignInStart",p,ue,k,ne);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":x.h(),V(ne);break;default:x.h(),x.a(ne)}}}))):V(gr("Wrong code. Try again.").toString())}Mr.phoneSignInFinish=function(p,x,k,N,V,H){var ne=new Oo(function(){ne.m(),Ft("phoneSignInStart",p,x,k)},function(){mA(p,ne,k,V)},function(){ne.m(),ai(p,x)},function(){ne.m(),Ft("phoneSignInStart",p,x,k)},kE(k),N,ia(Ze(p)),Si(Ze(p)));ne.render(x),Fn(p,ne),H&&ne.a(H)};var wM=!Qt&&!(Lt("Safari")&&!(ri()||Lt("Coast")||Lt("Opera")||Lt("Edge")||Lt("Firefox")||Lt("FxiOS")||Lt("Silk")||Lt("Android")));function j0(p,x){return/-[a-z]/.test(x)?null:wM&&p.dataset?!Lt("Android")||ri()||Lt("Firefox")||Lt("FxiOS")||Lt("Opera")||Lt("Silk")||x in p.dataset?(p=p.dataset[x],p===void 0?null:p):null:p.getAttribute("data-"+String(x).replace(/([A-Z])/g,"-$1").toLowerCase())}function F0(p,x,k){var N=this;p=hc(wd,{items:p},null,this.s),Ep.call(this,p,!0,!0),k&&(k=$l(p,k))&&(k.focus(),Vh(k,p)),Pi(this,p,function(V){(V=(V=Ly(V.target,"firebaseui-id-list-box-dialog-button"))&&j0(V,"listboxid"))&&(qh.call(N),x(V))})}function $l(p,x){p=(p||document).getElementsByTagName("BUTTON");for(var k=0;k<p.length;k++)if(j0(p[k],"listboxid")===x)return p[k];return null}function Yh(){return hr(this,"firebaseui-id-phone-number")}function $0(){return hr(this,"firebaseui-id-country-selector")}function Ec(){return hr(this,"firebaseui-id-phone-number-error")}function hF(p,x){var k=p.a,N=vA("1-US-0",k),V=null;if(x&&vA(x,k)?V=x:N?V="1-US-0":V=0<k.length?k[0].c:null,!V)throw Error("No available default country");Ex.call(this,V,p)}function vA(p,x){return p=Rh(p),!(!p||!he(x,p))}function rv(p){return p.map(function(x){return{id:x.c,Ma:"firebaseui-flag "+Tx(x),label:x.name+" "+("‎+"+x.b)}})}function Tx(p){return"firebaseui-flag-"+p.f}function fF(p){var x=this;F0.call(this,rv(p.a),function(k){Ex.call(x,k,p,!0),x.O().focus()},this.Ba)}function Ex(p,x,k){var N=Rh(p);N&&(k&&(k=Ge(Na(Yh.call(this))||""),x=a0(x,k),x.length&&x[0].b!=N.b&&(k="+"+N.b+k.substr(x[0].b.length+1),LE(Yh.call(this),k))),x=Rh(this.Ba),this.Ba=p,p=hr(this,"firebaseui-id-country-selector-flag"),x&&Sc(p,Tx(x)),Ti(p,Tx(N)),id(hr(this,"firebaseui-id-country-selector-code"),"‎+"+N.b))}function B0(p,x,k,N,V,H,ne,ue,Re,at){Ye.call(this,JE,{Gb:x,Aa:Re||null,Va:!!k,ia:!!H},at,"phoneSignInStart",{F:N,D:V}),this.H=ue||null,this.M=x,this.l=p,this.w=k||null,this.pa=ne||null}s(B0,Ye),B0.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||S0(this,this.O(),this.i()),xr(this,this.i(),this.l),this.O().focus(),Lp(this.O(),(this.O().value||"").length),Ye.prototype.v.call(this)},B0.prototype.o=function(){this.w=this.l=null,Ye.prototype.o.call(this)},L(B0.prototype,{Cb:Ap,O:Yh,B:Ec,ea:function(p,x,k){var N=this,V=Yh.call(this),H=$0.call(this),ne=Ec.call(this),ue=p||yp,Re=ue.a;if(Re.length==0)throw Error("No available countries provided.");hF.call(N,ue,x),Pi(this,H,function(){fF.call(N,ue)}),yd(this,V,function(){Um(ne)&&(Vi(V,!0),Es(ne));var at=Ge(Na(V)||""),Ht=Rh(this.Ba),Dr=a0(ue,at);at=vA("1-US-0",Re),Dr.length&&Dr[0].b!=Ht.b&&(Ht=Dr[0],Ex.call(N,Ht.b=="1"&&at?"1-US-0":Ht.c,ue))}),k&&Bm(this,V,function(){k()})},U:function(p){var x=Ge(Na(Yh.call(this))||"");p=p||yp;var k=p.a,N=a0(yp,x);if(N.length&&!he(k,N[0]))throw LE(Yh.call(this)),Yh.call(this).focus(),yr(Ec.call(this),gr("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return k=Rh(this.Ba),N.length&&N[0].b!=k.b&&Ex.call(this,N[0].c,p),N.length&&(x=x.substr(N[0].b.length+1)),x?new CE(this.Ba,x):null},Ja:$0,ba:function(){return hr(this,"firebaseui-recaptcha-container")},u:function(){return hr(this,"firebaseui-id-recaptcha-error")},i:ga,ua:Oi,P:ja});function _M(p,x,k,N){try{var V=x.U(f0)}catch{return}V?jh?(x.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",gr("Verifying...").toString()),qn(p,x.I(O(p.cc,p),[kE(V),k],function(H){var ne=zi(x);x.$("firebaseui-icon-done",gr("Code sent!").toString());var ue=setTimeout(function(){x.h(),x.m(),Ft("phoneSignInFinish",p,ne,V,15,H)},1e3);qn(p,function(){x&&x.h(),clearTimeout(ue)})},function(H){if(x.h(),!H.name||H.name!="cancel"){grecaptcha.reset(RE),jh=null;var ne=H&&H.message||"";if(H.code)switch(H.code){case"auth/too-many-requests":ne=gr("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":x.O().focus(),yr(x.B(),G().toString());return;case"auth/admin-restricted-operation":if(Nh(Ze(p))){H=zi(x),x.m(),Ft("handleUnauthorizedUser",p,H,kE(V),tn.auth.PhoneAuthProvider.PROVIDER_ID);return}ne=jr(H);break;default:ne=jr(H)}x.a(ne)}}))):xp?yr(x.u(),gr("Solve the reCAPTCHA").toString()):!xp&&N&&x.i().click():(x.O().focus(),yr(x.B(),G().toString()))}Mr.phoneSignInStart=function(p,x,k,N){var V=Q2(Ze(p))||{};jh=null,xp=!(V&&V.size==="invisible");var H=sA(p),ne=c0(Ze(p)),ue=H?Z_(Ze(p)):null;ne=k&&k.a||ne&&ne.c||null,k=k&&k.Aa||ue,(ue=Pm(Ze(p)))&&AE(ue),f0=ue?new TE(Pm(Ze(p))):yp;var Re=new B0(function(Ht){_M(p,Re,at,!(!Ht||!Ht.keyCode))},xp,H?null:function(){at.clear(),Re.m(),ai(p,x)},ia(Ze(p)),Si(Ze(p)),H,f0,ne,k);Re.render(x),Fn(p,Re),N&&Re.a(N),V.callback=function(Ht){Re.u()&&Es(Re.u()),jh=Ht,xp||_M(p,Re,at)},V["expired-callback"]=function(){jh=null};var at=new tn.auth.RecaptchaVerifier(xp?Re.ba():Re.i(),V,ll(p).app);qn(p,Re.I(O(at.render,at),[],function(Ht){RE=Ht},function(Ht){Ht.name&&Ht.name=="cancel"||(Ht=jr(Ht),Re.m(),ai(p,x,void 0,Ht))}))},Mr.prefilledEmailSignIn=function(p,x,k){var N=new Sa;N.render(x),Fn(p,N),qn(p,N.I(O(Zn(p).fetchSignInMethodsForEmail,Zn(p)),[k],function(V){N.m();var H=!(!mx(p)||!H0(p));cA(p,x,V,k,void 0,H)},function(V){V=jr(V),N.m(),Ft("signIn",p,x,k,V)}))};function U0(p,x,k,N,V){Ye.call(this,ks,{Sb:x},V,"providerSignIn",{F:k,D:N}),this.i=p}s(U0,Ye),U0.prototype.v=function(){this.l(this.i),Ye.prototype.v.call(this)},U0.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(U0.prototype,{l:function(p){function x(ne){p(ne)}for(var k=this.g?uc("firebaseui-id-idp-button",this.g||this.s.a):[],N=0;N<k.length;N++){var V=k[N],H=j0(V,"providerId");Pi(this,V,j(x,H))}}}),Mr.providerSignIn=function(p,x,k,N){var V=new U0(function(H){H==tn.auth.EmailAuthProvider.PROVIDER_ID?(V.m(),R0(p,x,N)):H==tn.auth.PhoneAuthProvider.PROVIDER_ID?(V.m(),Ft("phoneSignInStart",p,x)):H=="anonymous"?Rp(p,V):Op(p,V,H,N),wr(p),p.l.cancel()},Im(Ze(p)),ia(Ze(p)),Si(Ze(p)));V.render(x),Fn(p,V),k&&V.a(k),G0(p)},Mr.sendEmailLinkForSignIn=function(p,x,k,N){var V=new Wm;V.render(x),Fn(p,V),uA(p,V,k,N,function(H){V.m(),H&&H.code=="auth/admin-restricted-operation"&&Nh(Ze(p))?Ft("handleUnauthorizedUser",p,x,k,tn.auth.EmailAuthProvider.PROVIDER_ID):(H=jr(H),Ft("signIn",p,x,k,H))})};function V0(p,x,k,N,V,H,ne){Ye.call(this,hi,{email:k,Va:!!x,ia:!!H},ne,"signIn",{F:N,D:V}),this.i=p,this.u=x}s(V0,Ye),V0.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Lp(this.l(),(this.l().value||"").length),Ye.prototype.v.call(this)},V0.prototype.o=function(){this.u=this.i=null,Ye.prototype.o.call(this)},L(V0.prototype,{l:Ad,M:Cd,w:Pp,H:Tc,j:Dd,U:ga,P:Oi,B:ja}),Mr.signIn=function(p,x,k,N){var V=mx(p),H=new V0(function(){var ne=H,ue=ne.j()||"";ue&&lA(p,ne,ue)},V?null:function(){H.m(),ai(p,x,k)},k,ia(Ze(p)),Si(Ze(p)),V);H.render(x),Fn(p,H),N&&H.a(N)};function z0(p,x,k,N,V,H,ne){Ye.call(this,sx,{kc:p,yb:k,Eb:!!N},ne,"unauthorizedUser",{F:V,D:H}),this.l=x,this.i=N}s(z0,Ye),z0.prototype.v=function(){var p=this,x=hr(this,"firebaseui-id-unauthorized-user-help-link");this.i&&x&&Pi(this,x,function(){p.i()}),Pi(this,this.u(),function(){p.l()}),this.u().focus(),Ye.prototype.v.call(this)},z0.prototype.o=function(){this.i=this.l=null,Ye.prototype.o.call(this)},L(z0.prototype,{u:Oi}),Mr.handleUnauthorizedUser=function(p,x,k,N){function V(){ai(p,x)}N===tn.auth.EmailAuthProvider.PROVIDER_ID?V=function(){R0(p,x)}:N===tn.auth.PhoneAuthProvider.PROVIDER_ID&&(V=function(){Ft("phoneSignInStart",p,x)});var H=null,ne=null;N===tn.auth.EmailAuthProvider.PROVIDER_ID&&l0(Ze(p))?(H=eM(Ze(p)),ne=aF(Ze(p))):Nh(Ze(p))&&(H=X_(Ze(p)),ne=J2(Ze(p)));var ue=new z0(k,function(){ue.m(),V()},H,ne,ia(Ze(p)),Si(Ze(p)));ue.render(x),Fn(p,ue)};function iv(p,x,k,N,V,H){Ye.call(this,lx,{email:p},H,"unsupportedProvider",{F:N,D:V}),this.l=x,this.i=k}s(iv,Ye),iv.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ye.prototype.v.call(this)},iv.prototype.o=function(){this.i=this.l=null,Ye.prototype.o.call(this)},L(iv.prototype,{u:ga,B:Oi,w:ja}),Mr.unsupportedProvider=function(p,x,k){var N=new iv(k,function(){N.m(),Ft("passwordRecovery",p,x,k)},function(){N.m(),ai(p,x,k)},ia(Ze(p)),Si(Ze(p)));N.render(x),Fn(p,N)};function ns(p,x){this.$=!1;var k=yA(x);if(ov[k])throw Error('An AuthUI instance already exists for the key "'+k+'"');ov[k]=this,this.a=p,this.u=null,this.Y=!1,av(this.a),this.h=tn.initializeApp({apiKey:p.app.options.apiKey,authDomain:p.app.options.authDomain},p.app.name+"-firebaseui-temp").auth(),(p=p.emulatorConfig)&&(k=p.port,this.h.useEmulator(p.protocol+"://"+p.host+(k===null?"":":"+k),p.options)),av(this.h),this.h.setPersistence&&this.h.setPersistence(tn.auth.Auth.Persistence.SESSION),this.oa=x,this.ca=new ME,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=Xa.Xa(),this.j=this.C=null,this.da=this.A=!1}function av(p){p&&p.INTERNAL&&p.INTERNAL.logFramework&&p.INTERNAL.logFramework("FirebaseUI-web")}var ov={};function yA(p){return p||"[DEFAULT]"}function Up(p){return wr(p),p.i||(p.i=wu(p,function(x){return x&&!_c(dn(p))?Mi(ll(p).getRedirectResult().then(function(k){return k},function(k){if(k&&k.code=="auth/email-already-in-use"&&k.email&&k.credential)throw k;return Ac(p,k)})):Mi(Zn(p).getRedirectResult().then(function(k){return o0(Ze(p))&&!k.user&&p.j&&!p.j.isAnonymous?ll(p).getRedirectResult():k}))})),p.i}function Fn(p,x){wr(p),p.g=x}var Vp=null;function Zn(p){return wr(p),p.h}function ll(p){return wr(p),p.a}function dn(p){return wr(p),p.oa}function H0(p){return wr(p),p.O?p.O.emailHint:void 0}n=ns.prototype,n.nb=function(){return wr(this),!!H_(dn(this))||bA(Vr())};function bA(p){return p=new ot(p),(p.a.a.get(sn.ub)||null)==="signIn"&&!!p.a.a.get(sn.$a)}n.start=function(p,x){wA(this,p,x)};function wA(p,x,k,N){wr(p),typeof p.a.languageCode<"u"&&(p.u=p.a.languageCode);var V="en".replace(/_/g,"-");p.a.languageCode=V,p.h.languageCode=V,p.Y=!0,typeof p.a.tenantId<"u"&&(p.h.tenantId=p.a.tenantId),p.ib(k),p.O=N||null;var H=d.document;p.C?p.C.then(function(){H.readyState=="complete"?Ax(p,x):lm(window,"load",function(){Ax(p,x)})}):H.readyState=="complete"?Ax(p,x):lm(window,"load",function(){Ax(p,x)})}function Ax(p,x){var k=Ka(x,"Could not find the FirebaseUI widget element on the page.");if(k.setAttribute("lang","en".replace(/_/g,"-")),Vp){var N=Vp;wr(N),_c(dn(N))&&Xo("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),Vp.reset()}if(Vp=p,p.T=k,Cx(p,k),xm(new wc)&&xm(new Sm)){x=Ka(x,"Could not find the FirebaseUI widget element on the page."),k=Vr(),N=G_(Ze(p).a,"queryParameterForSignInSuccessUrl"),k=(k=rr(k,N))?sc(vh(k)).toString():null;e:{N=Vr();var V=PE(Ze(p));N=rr(N,V)||"";for(H in ex)if(ex[H].toLowerCase()==N.toLowerCase()){var H=ex[H];break e}H="callback"}switch(H){case"callback":k&&(H=dn(p),vp(Tm,k,H)),p.nb()?Ft("callback",p,x):ai(p,x,H0(p));break;case"resetPassword":Ft("passwordReset",p,x,Gm(),vx());break;case"recoverEmail":Ft("emailChangeRevocation",p,x,Gm());break;case"revertSecondFactorAddition":Ft("revertSecondFactorAddition",p,x,Gm());break;case"verifyEmail":Ft("emailVerification",p,x,Gm(),vx());break;case"verifyAndChangeEmail":Ft("verifyAndChangeEmail",p,x,Gm(),vx());break;case"signIn":Ft("emailLinkSignInCallback",p,x,Vr()),_A();break;case"select":k&&(H=dn(p),vp(Tm,k,H)),ai(p,x);break;default:throw Error("Unhandled widget operation.")}x=Ze(p),(x=_p(x).uiShown||null)&&x()}else x=Ka(x,"Could not find the FirebaseUI widget element on the page."),H=new dM(gr("The browser you are using does not support Web Storage. Please try again in a different browser.").toString()),H.render(x),Fn(p,H);x=p.g&&p.g.Ga=="blank"&&Q_(Ze(p)),H_(dn(p))&&!x&&(x=H_(dn(p)),q0(p,x.a),Ts(Oh,dn(p)))}function wu(p,x){if(p.A)return x(sv(p));if(qn(p,function(){p.A=!1}),o0(Ze(p))){var k=new Zi(function(N){qn(p,p.a.onAuthStateChanged(function(V){p.j=V,p.A||(p.A=!0,N(x(sv(p))))}))});return qn(p,k),k}return p.A=!0,x(null)}function sv(p){return wr(p),o0(Ze(p))&&p.j&&p.j.isAnonymous?p.j:null}function qn(p,x){if(wr(p),x){p.s.push(x);var k=function(){Se(p.s,function(N){return N==x})};typeof x!="function"&&x.then(k,k)}}n.Db=function(){wr(this),this.Z=!0};function pF(p){wr(p);var x;return(x=p.Z)||(p=Ze(p),p=Mm(p,tn.auth.GoogleAuthProvider.PROVIDER_ID),x=!(!p||p.prompt!=="select_account")),x}function xM(p){typeof p.a.languageCode<"u"&&p.Y&&(p.Y=!1,p.a.languageCode=p.u)}function q0(p,x){p.a.tenantId=x,p.h.tenantId=x}n.reset=function(){wr(this);var p=this;this.T&&this.T.removeAttribute("lang"),this.J&&$2(this.J),xM(this),this.O=null,_A(),Ts(Oh,dn(this)),wr(this),this.l.cancel(),this.i=Mi({user:null,credential:null}),Vp==this&&(Vp=null),this.T=null;for(var x=0;x<this.s.length;x++)typeof this.s[x]=="function"?this.s[x]():this.s[x].cancel&&this.s[x].cancel();this.s=[],jl(dn(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=Md(this).then(function(){p.C=null},function(){p.C=null}))};function Cx(p,x){p.L=null,p.J=new S_(x),p.J.register(),Xi(p.J,"pageEnter",function(k){if(k=k&&k.pageId,p.L!=k){var N=Ze(p);(N=_p(N).uiChanged||null)&&N(p.L,k),p.L=k}})}n.ib=function(p){wr(this);var x=this.ca,k;for(k in p)try{Em(x.a,k,p[k])}catch{Io('Invalid config: "'+k+'"',void 0)}Qg&&Em(x.a,"popupMode",!1),Pm(x),!this.da&&xc(Ze(this))&&(Xo("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)};function Ze(p){return wr(p),p.ca}n.Wb=function(){wr(this);var p=Ze(this),x=G_(p.a,"widgetUrl");p=PE(p);for(var k=x.search(ze),N=0,V,H=[];0<=(V=wi(x,N,p,k));)H.push(x.substring(N,V)),N=Math.min(x.indexOf("&",V)+1||k,k);H.push(x.substr(N)),x=H.join("").replace(ji,"$1"),k="="+encodeURIComponent("select"),(p+=k)?(k=x.indexOf("#"),0>k&&(k=x.length),N=x.indexOf("?"),0>N||N>k?(N=k,V=""):V=x.substring(N+1,k),x=[x.substr(0,N),V,x.substr(k)],k=x[1],x[1]=p?k?k+"&"+p:p:k,k=x[0]+(x[1]?"?"+x[1]:"")+x[2]):k=x,Ze(this).a.get("popupMode")?(p=(window.screen.availHeight-600)/2,x=(window.screen.availWidth-500)/2,k=k||"about:blank",p={width:500,height:600,top:0<p?p:0,left:0<x?x:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},p.target=p.target||k.target||"google_popup",p.width=p.width||690,p.height=p.height||500,(p=oE(k,p))&&p.focus()):so(window.location,k)};function wr(p){if(p.$)throw Error("AuthUI instance is deleted!")}n.Wa=function(){var p=this;return wr(this),this.h.app.delete().then(function(){var x=yA(dn(p));delete ov[x],p.reset(),p.$=!0})};function G0(p){wr(p);try{Zy(p.l,K_(Ze(p)),pF(p)).then(function(x){return p.g?vu(p,p.g,x):!1})}catch{}}n.Ib=function(p,x){wr(this);var k=this,N=op();if(!uo(Ze(this)))return Rl(Error("Email link sign-in should be enabled to trigger email sending."));var V=Lh(Ze(this)),H=new ot(V.url);return wt(H,N),x&&x.a&&(iF(N,x,dn(this)),Sn(H,x.a.providerId)),mt(H,du(Ze(this))),wu(this,function(ne){return ne&&((ne=ne.uid)?H.a.a.set(sn.Pa,ne):di(H.a.a,sn.Pa)),V.url=H.toString(),Zn(k).sendSignInLinkToEmail(p,V)}).then(function(){var ne=dn(k),ue={};ue.email=p,vp(pp,$_(N,JSON.stringify(ue)),ne)},function(ne){throw Ts(gp,dn(k)),Ts(pp,dn(k)),ne})};function gF(p,x){var k=Kt(new ot(x));return k?(x=new Zi(function(N,V){var H=ll(p).onAuthStateChanged(function(ne){H(),ne&&ne.isAnonymous&&ne.uid===k?N(ne):ne&&ne.isAnonymous&&ne.uid!==k?V(Error("anonymous-user-mismatch")):V(Error("anonymous-user-not-found"))});qn(p,H)}),qn(p,x),x):Mi(null)}function SM(p,x,k,N,V){wr(p);var H=V||null,ne=tn.auth.EmailAuthProvider.credentialWithLink(k,N);return k=H?Zn(p).signInWithEmailLink(k,N).then(function(ue){return ue.user.linkWithCredential(H)}).then(function(){return Md(p)}).then(function(){return Ac(p,{code:"auth/email-already-in-use"},H)}):Zn(p).fetchSignInMethodsForEmail(k).then(function(ue){return ue.length?Ac(p,{code:"auth/email-already-in-use"},ne):x.linkWithCredential(ne)}),qn(p,k),k}function TM(p,x,k,N){wr(p);var V=N||null,H;return x=Zn(p).signInWithEmailLink(x,k).then(function(ne){if(H={user:ne.user,credential:null,operationType:ne.operationType,additionalUserInfo:ne.additionalUserInfo},V)return ne.user.linkWithCredential(V).then(function(ue){H={user:ue.user,credential:V,operationType:H.operationType,additionalUserInfo:ue.additionalUserInfo}})}).then(function(){Md(p)}).then(function(){return ll(p).updateCurrentUser(H.user)}).then(function(){return H.user=ll(p).currentUser,H}),qn(p,x),x}function _A(){var p=Vr();if(bA(p)){p=new ot(p);for(var x in sn)sn.hasOwnProperty(x)&&di(p.a.a,sn[x]);x={state:"signIn",mode:"emailLink",operation:"clear"};var k=d.document.title;d.history&&d.history.replaceState&&d.history.replaceState(x,k,p.toString())}}n.bc=function(p,x){wr(this);var k=this;return Zn(this).signInWithEmailAndPassword(p,x).then(function(N){return wu(k,function(V){return V?Md(k).then(function(){return Ac(k,{code:"auth/email-already-in-use"},tn.auth.EmailAuthProvider.credential(p,x))}):N})})},n.Yb=function(p,x){wr(this);var k=this;return wu(this,function(N){if(N){var V=tn.auth.EmailAuthProvider.credential(p,x);return N.linkWithCredential(V)}return Zn(k).createUserWithEmailAndPassword(p,x)})},n.ac=function(p){wr(this);var x=this;return wu(this,function(k){return k?k.linkWithCredential(p).then(function(N){return N},function(N){if(N&&N.code=="auth/email-already-in-use"&&N.email&&N.credential)throw N;return Ac(x,N,p)}):Zn(x).signInWithCredential(p)})};function EM(p,x){return wr(p),wu(p,function(k){return k&&!_c(dn(p))?k.linkWithPopup(x).then(function(N){return N},function(N){if(N&&N.code=="auth/email-already-in-use"&&N.email&&N.credential)throw N;return Ac(p,N)}):Zn(p).signInWithPopup(x)})}n.dc=function(p){wr(this);var x=this,k=this.i;return this.i=null,wu(this,function(N){return N&&!_c(dn(x))?N.linkWithRedirect(p):Zn(x).signInWithRedirect(p)}).then(function(){},function(N){throw x.i=k,N})},n.cc=function(p,x){wr(this);var k=this;return wu(this,function(N){return N?N.linkWithPhoneNumber(p,x).then(function(V){return new uE(V,function(H){if(H.code=="auth/credential-already-in-use")return Ac(k,H);throw H})}):ll(k).signInWithPhoneNumber(p,x).then(function(V){return new uE(V)})})},n.$b=function(){return wr(this),ll(this).signInAnonymously()};function xA(p,x){return wr(p),wu(p,function(k){if(p.j&&!p.j.isAnonymous&&o0(Ze(p))&&!Zn(p).currentUser)return Md(p).then(function(){return x.credential.providerId=="password"&&(x.credential=null),x});if(k)return Md(p).then(function(){return k.linkWithCredential(x.credential)}).then(function(N){return x.user=N.user,x.credential=N.credential,x.operationType=N.operationType,x.additionalUserInfo=N.additionalUserInfo,x},function(N){if(N&&N.code=="auth/email-already-in-use"&&N.email&&N.credential)throw N;return Ac(p,N,x.credential)});if(!x.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Md(p).then(function(){return ll(p).updateCurrentUser(x.user)}).then(function(){return x.user=ll(p).currentUser,x.operationType="signIn",x.credential&&x.credential.providerId&&x.credential.providerId=="password"&&(x.credential=null),x})})}n.Xb=function(p,x){return wr(this),Zn(this).signInWithEmailAndPassword(p,x)};function Md(p){return wr(p),Zn(p).signOut()}function Ac(p,x,k){if(wr(p),x&&x.code&&(x.code=="auth/email-already-in-use"||x.code=="auth/credential-already-in-use")){var N=u0(Ze(p));return Mi().then(function(){return N(new lr("anonymous-upgrade-merge-conflict",null,k||x.credential))}).then(function(){throw p.g&&(p.g.m(),p.g=null),x})}return Rl(x)}function W0(p,x,k,N){Ye.call(this,A0,void 0,N,"providerMatchByEmail",{F:x,D:k}),this.i=p}s(W0,Ye),W0.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Lp(this.l(),(this.l().value||"").length),Ye.prototype.v.call(this)},W0.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(W0.prototype,{l:Ad,H:Cd,u:Pp,B:Tc,j:Dd,M:ga,w:ja});function Dx(p,x,k,N,V){Ye.call(this,Ed,{ec:x},V,"selectTenant",{F:k,D:N}),this.i=p}s(Dx,Ye),Dx.prototype.v=function(){SA(this,this.i),Ye.prototype.v.call(this)},Dx.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)};function SA(p,x){function k(ue){x(ue)}for(var N=p.g?uc("firebaseui-id-tenant-selection-button",p.g||p.s.a):[],V=0;V<N.length;V++){var H=N[V],ne=j0(H,"tenantId");Pi(p,H,j(k,ne))}}function Y0(p){Ye.call(this,Dp,void 0,p,"spinner")}s(Y0,Ye);function kx(p){this.a=new q_,xi(this.a,"authDomain"),xi(this.a,"displayMode",Mx),xi(this.a,"tenants"),xi(this.a,"callbacks"),xi(this.a,"tosUrl"),xi(this.a,"privacyPolicyUrl");for(var x in p)if(p.hasOwnProperty(x))try{Em(this.a,x,p[x])}catch{Io('Invalid config: "'+x+'"',void 0)}}function TA(p){p=p.a.get("displayMode");for(var x in Px)if(Px[x]===p)return Px[x];return Mx}function K0(p){return p.a.get("callbacks")||{}}function Ix(p){var x=p.a.get("tosUrl")||null;if(p=p.a.get("privacyPolicyUrl")||null,x&&!p&&Xo("Privacy Policy URL is missing, the link will not be displayed."),x&&p){if(typeof x=="function")return x;if(typeof x=="string")return function(){Ah(x)}}return null}function Pd(p){var x=p.a.get("tosUrl")||null,k=p.a.get("privacyPolicyUrl")||null;if(k&&!x&&Xo("Terms of Service URL is missing, the link will not be displayed."),x&&k){if(typeof k=="function")return k;if(typeof k=="string")return function(){Ah(k)}}return null}function _u(p,x){if(p=p.a.get("tenants"),!p||!p.hasOwnProperty(x)&&!p.hasOwnProperty(Xh))throw Error("Invalid tenant configuration!")}function Od(p,x,k){if(p=p.a.get("tenants"),!p)throw Error("Invalid tenant configuration!");var N=[];if(p=p[x]||p[Xh],!p)return Io("Invalid tenant configuration: "+(x+" is not configured!"),void 0),N;if(x=p.signInOptions,!x)throw Error("Invalid tenant configuration: signInOptions are invalid!");return x.forEach(function(V){if(typeof V=="string")N.push(V);else if(typeof V.provider=="string"){var H=V.hd;H&&k?(H instanceof RegExp?H:new RegExp("@"+H.replace(".","\\.")+"$")).test(k)&&N.push(V.provider):N.push(V.provider)}else V="Invalid tenant configuration: signInOption "+(JSON.stringify(V)+" is invalid!"),Io(V,void 0)}),N}function X0(p,x,k){return p=Z0(p,x),(x=p.signInOptions)&&k&&(x=x.filter(function(N){return typeof N=="string"?k.includes(N):k.includes(N.provider)}),p.signInOptions=x),p}function Z0(p,x){var k=Kh,N=N===void 0?{}:N;return _u(p,x),p=p.a.get("tenants"),au(p[x]||p[Xh],k,N)}var Kh=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],Mx="optionFirst",Px={pc:Mx,oc:"identifierFirst"},Xh="*";function Cc(p,x){var k=this;this.s=Ka(p),this.a={},Object.keys(x).forEach(function(N){k.a[N]=new kx(x[N])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(N){this.ob=N||null},enumerable:!1})}n=Cc.prototype,n.Ub=function(p,x){var k=this;Rd(this);var N=p.apiKey;return new Zi(function(V,H){if(k.a.hasOwnProperty(N)){var ne=K0(k.a[N]).selectTenantUiHidden||null;if(TA(k.a[N])===Mx){var ue=[];x.forEach(function(Ht){Ht=Ht||"_";var Dr=k.a[N].a.get("tenants");if(!Dr)throw Error("Invalid tenant configuration!");(Dr=Dr[Ht]||Dr[Xh])?Ht={tenantId:Ht!=="_"?Ht:null,V:Dr.fullLabel||null,displayName:Dr.displayName,za:Dr.iconUrl,ta:Dr.buttonColor}:(Io("Invalid tenant configuration: "+(Ht+" is not configured!"),void 0),Ht=null),Ht&&ue.push(Ht)});var Re=function(Ht){Ht={tenantId:Ht,providerIds:Od(k.a[N],Ht||"_")},V(Ht)};if(ue.length===1){Re(ue[0].tenantId);return}k.g=new Dx(function(Ht){Rd(k),ne&&ne(),Re(Ht)},ue,Ix(k.a[N]),Pd(k.a[N]))}else k.g=new W0(function(){var Ht=k.g.j();if(Ht){for(var Dr=0;Dr<x.length;Dr++){var g=Od(k.a[N],x[Dr]||"_",Ht);if(g.length!==0){Ht={tenantId:x[Dr],providerIds:g,email:Ht},Rd(k),ne&&ne(),V(Ht);return}}k.g.a(Ne({code:"no-matching-tenant-for-email"}).toString())}},Ix(k.a[N]),Pd(k.a[N]));k.g.render(k.s),(H=K0(k.a[N]).selectTenantUiShown||null)&&H()}else{var at=Error("Invalid project configuration: API key is invalid!");at.code="invalid-configuration",k.pb(at),H(at)}})},n.Pb=function(p,x){if(!this.a.hasOwnProperty(p))throw Error("Invalid project configuration: API key is invalid!");var k=x||void 0;_u(this.a[p],x||"_");try{this.i=tn.app(k).auth()}catch{var N=this.a[p].a.get("authDomain");if(!N)throw Error("Invalid project configuration: authDomain is required!");p=tn.initializeApp({apiKey:p,authDomain:N},k),p.auth().tenantId=x,this.i=p.auth()}return this.i},n.Zb=function(p,x){var k=this;return new Zi(function(N,V){function H(Dr,g){k.j=new ns(p),wA(k.j,k.s,Dr,g)}var ne=p.app.options.apiKey;k.a.hasOwnProperty(ne)||V(Error("Invalid project configuration: API key is invalid!"));var ue=X0(k.a[ne],p.tenantId||"_",x&&x.providerIds);Rd(k),V={signInSuccessWithAuthResult:function(Dr){return N(Dr),!1}};var Re=K0(k.a[ne]).signInUiShown||null,at=!1;V.uiChanged=function(Dr,g){Dr===null&&g==="callback"?((Dr=Qf("firebaseui-id-page-callback",k.s))&&Es(Dr),k.h=new Y0,k.h.render(k.s)):at||Dr===null&&g==="spinner"||g==="blank"||(k.h&&(k.h.m(),k.h=null),at=!0,Re&&Re(p.tenantId))},ue.callbacks=V,ue.credentialHelper="none";var Ht;x&&x.email&&(Ht={emailHint:x.email}),k.j?k.j.Wa().then(function(){H(ue,Ht)}):H(ue,Ht)})},n.reset=function(){var p=this;return Mi().then(function(){p.j&&p.j.Wa()}).then(function(){p.j=null,Rd(p)})},n.Vb=function(){var p=this;this.h||this.A||(this.A=window.setTimeout(function(){Rd(p),p.h=new Y0,p.g=p.h,p.h.render(p.s),p.A=null},500))},n.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},n.Bb=function(){return Rd(this),this.g=new aA,this.g.render(this.s),Mi()};function Rd(p){p.j&&p.j.reset(),p.mb(),p.g&&p.g.m()}n.pb=function(p){var x=this,k=Ne({code:p.code}).toString()||p.message;Rd(this);var N;p.retry&&typeof p.retry=="function"&&(N=function(){x.reset(),p.retry()}),this.g=new oA(k,N),this.g.render(this.s)},n.Rb=function(p){var x=this;return Mi().then(function(){var k=x.i&&x.i.app.options.apiKey;if(!x.a.hasOwnProperty(k))throw Error("Invalid project configuration: API key is invalid!");if(_u(x.a[k],p.tenantId||"_"),!x.i.currentUser||x.i.currentUser.uid!==p.uid)throw Error("The user being processed does not match the signed in user!");return(k=K0(x.a[k]).beforeSignInSuccess||null)?k(p):p}).then(function(k){if(k.uid!==p.uid)throw Error("User with mismatching UID returned.");return k})},$("firebaseui.auth.FirebaseUiHandler",Cc),$("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Cc.prototype.Ub),$("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Cc.prototype.Pb),$("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Cc.prototype.Zb),$("firebaseui.auth.FirebaseUiHandler.prototype.reset",Cc.prototype.reset),$("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Cc.prototype.Vb),$("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Cc.prototype.mb),$("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Cc.prototype.Bb),$("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Cc.prototype.pb),$("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Cc.prototype.Rb),$("firebaseui.auth.AuthUI",ns),$("firebaseui.auth.AuthUI.getInstance",function(p){return p=yA(p),ov[p]?ov[p]:null}),$("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",ns.prototype.Db),$("firebaseui.auth.AuthUI.prototype.start",ns.prototype.start),$("firebaseui.auth.AuthUI.prototype.setConfig",ns.prototype.ib),$("firebaseui.auth.AuthUI.prototype.signIn",ns.prototype.Wb),$("firebaseui.auth.AuthUI.prototype.reset",ns.prototype.reset),$("firebaseui.auth.AuthUI.prototype.delete",ns.prototype.Wa),$("firebaseui.auth.AuthUI.prototype.isPendingRedirect",ns.prototype.nb),$("firebaseui.auth.AuthUIError",lr),$("firebaseui.auth.AuthUIError.prototype.toJSON",lr.prototype.toJSON),$("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",d0),$("firebaseui.auth.CredentialHelper.NONE",h0),$("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Zi.prototype.catch=Zi.prototype.Ca,Zi.prototype.finally=Zi.prototype.fc}).apply(typeof global<"u"?global:typeof self<"u"?self:window)}).apply(typeof global<"u"?global:typeof self<"u"?self:window);typeof window<"u"&&(window.dialogPolyfill=XJe);var Hae=firebaseui.auth;const net=()=>{const n=K.useRef(null);return K.useEffect(()=>{const e=Hae.AuthUI.getInstance()||new Hae.AuthUI(kR),t={signInFlow:"popup",signInOptions:[Xd.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:r=>{var i;return(i=r.additionalUserInfo)!=null&&i.isNewUser?d3e("google"):u3e("google"),!1}}};return n.current&&e.start(n.current,t),()=>{e.reset()}},[]),E.jsx("div",{ref:n,id:"firebaseui-auth-container"})},ret=()=>{const{user:n,signOut:e}=Rn(),[t,r]=K.useState(!1);return E.jsx("div",{className:"p-4 border-b border-border",children:E.jsx("div",{className:"flex items-center",children:n?E.jsxs("div",{className:"w-full",children:[E.jsxs("div",{className:"flex items-center w-full cursor-pointer hover:bg-background-primary rounded-lg p-2 -m-2",onClick:()=>r(!t),children:[E.jsx("img",{src:n.photoURL||"",alt:"User Avatar",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:i=>{console.error("Error loading user avatar:",i)},className:"w-10 h-10 rounded-full"}),E.jsxs("div",{className:"ml-3 text-left flex-1",children:[E.jsx("p",{className:"text-sm font-medium text-text-primary",children:n.displayName}),n.userName&&E.jsxs("p",{className:"text-xs text-text-secondary",children:["@",n.userName]})]})]}),t&&E.jsx("div",{className:"mt-2 pl-2",children:E.jsx("button",{onClick:()=>{e(),r(!1)},className:"px-3 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",children:"Sign Out"})})]}):E.jsx(net,{})})})},HB=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,qae=n=>{const e=document.documentElement;n?(e.classList.add("dark"),e.setAttribute("data-theme","dark")):(e.classList.remove("dark"),e.setAttribute("data-theme","light"))},EW=yy()(xW((n,e)=>({mode:"system",isDark:HB(),setMode:t=>{const r=t==="system"?HB():t==="dark";qae(r),n({mode:t,isDark:r})},initializeTheme:()=>{const{mode:t}=e(),r=t==="system"?HB():t==="dark";qae(r),n({isDark:r})}}),{name:"theme-store",partialize:n=>({mode:n.mode})}));typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const{mode:n,setMode:e}=EW.getState();n==="system"&&e("system")});const iet=()=>{const{mode:n,setMode:e}=EW(),t=[{mode:"light",icon:"sun-line",label:"Light"},{mode:"dark",icon:"moon-line",label:"Dark"},{mode:"system",icon:"computer-line",label:"System"}];return E.jsxs("div",{className:"p-4 border-t border-border",children:[E.jsx("div",{className:"flex items-center justify-between mb-2",children:E.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Theme"})}),E.jsx("div",{className:"flex items-center bg-background-primary rounded-md p-1",children:t.map(r=>E.jsx("button",{onClick:()=>e(r.mode),className:`flex-1 flex items-center justify-center p-2 rounded text-xs font-medium transition-all ${n===r.mode?"bg-primary text-white shadow-sm":"text-text-secondary hover:text-text-primary hover:bg-background-secondary"}`,title:r.label,children:E.jsx(bt,{name:r.icon,size:16})},r.mode))})]})},ET=({className:n=""})=>{const{isLeftSidebarOpen:e,toggleLeftSidebar:t}=tc(),r=vs(),i=$g(),{user:a,signOut:o}=Rn(),s=[{icon:"timer-line",label:"Pomodoro Timer",path:"/pomodoro"},{icon:"task-line",label:"Task Management",path:"/projects"},{icon:"dashboard-line",label:"Productivity Insights",path:"/dashboard"},{icon:"calendar-line",label:"Calendar",path:"/calendar"},{icon:"brain-line",label:"Deep Focus",path:"/deep-focus"},{icon:"database-2-line",label:"Data Sync",path:"/data-sync"},{icon:"settings-line",label:"Settings",path:"/dashboard/settings"}],l=d=>{i(d),window.innerWidth<768&&t()},c=d=>!!(d==="/dashboard"&&r.pathname==="/dashboard"||d==="/pomodoro"&&r.pathname==="/pomodoro"||d==="/projects"&&r.pathname==="/projects"||d==="/deep-focus"&&r.pathname==="/deep-focus"||d==="/calendar"&&r.pathname==="/calendar"||d==="/data-sync"&&r.pathname==="/data-sync"||d.startsWith("/dashboard/")&&r.pathname.startsWith(d)),u=()=>{t()};return E.jsx(E.Fragment,{children:E.jsxs("aside",{id:"sidebar",className:`bg-background-secondary border-r border-border flex flex-col
        ${e?"w-64":"w-0"} ${n}`,style:{zIndex:40},children:[E.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[E.jsx("h1",{className:"text-xl font-['Pacifico'] text-primary",children:"Make10000hours"}),E.jsx("button",{onClick:u,className:"p-1 hover:bg-background-primary hover:shadow-sm hover:scale-105 rounded-md transition-all duration-200 group",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:E.jsx(bt,{name:"arrow-left-s-line",size:20})})})]}),E.jsx(ret,{}),E.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:E.jsx("ul",{className:"space-y-1",children:s.map((d,h)=>{const f=c(d.path);return E.jsx("li",{children:E.jsxs(cR,{to:d.path,onClick:m=>{m.preventDefault(),l(d.path)},className:`flex items-center px-3 py-2 text-sm font-medium rounded-md text-left
                    ${f?"text-primary bg-indigo-50 dark:bg-primary/10":"text-text-secondary hover:bg-background-primary"}`,children:[E.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-3",children:E.jsx(bt,{name:d.icon,size:20})}),d.label]})},h)})})}),E.jsx(iet,{}),E.jsx("div",{className:"p-4 border-t border-border",children:E.jsxs(cR,{to:"/support",onClick:d=>{d.preventDefault(),l("/support")},className:"flex items-center px-3 py-2 text-sm font-medium text-text-secondary rounded-md hover:bg-background-secondary",children:[E.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-3",children:E.jsx(bt,{name:"question-line",size:20})}),"Help & Support"]})})]})})},mi=({text:n,children:e,className:t="",placement:r="bottom",offset:i=16})=>{const[a,o]=K.useState(!1),[s,l]=K.useState({x:0,y:0}),c=K.useRef(null),u=f=>{if(c.current){const m=c.current.getBoundingClientRect();let v=0,y=0;switch(r){case"bottom":v=m.left+m.width/2,y=m.bottom+i;break;case"top":v=m.left+m.width/2,y=m.top-i;break;case"left":v=m.left-i,y=m.top+m.height/2;break;case"right":v=m.right+i,y=m.top+m.height/2;break;default:v=m.left+m.width/2,y=m.bottom+i}l({x:v,y})}o(!0)},d=()=>{o(!1)},h=()=>{switch(r){case"bottom":case"top":return"-translate-x-1/2";case"left":return"-translate-y-1/2 -translate-x-full";case"right":return"-translate-y-1/2";default:return"-translate-x-1/2"}};return E.jsxs(E.Fragment,{children:[E.jsx("div",{ref:c,onMouseEnter:u,onMouseLeave:d,className:`relative ${t}`,children:e}),a&&E.jsx("div",{className:`fixed z-[99999] px-3 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-md pointer-events-none transition-all duration-150 ease-out whitespace-nowrap shadow-lg transform ${h()}`,style:{left:s.x,top:s.y},children:n})]})},zb=class zb{constructor(){hn(this,"failureCount",0);hn(this,"lastFailureTime",0);hn(this,"lastResetTime",0);hn(this,"state","CLOSED");hn(this,"FAILURE_THRESHOLD",5);hn(this,"TIMEOUT",6e4);hn(this,"RETRY_TIMEOUT",1e4);hn(this,"MIN_RESET_INTERVAL",3e4);hn(this,"lastLogTime",0);hn(this,"LOG_THROTTLE",5e3)}static getInstance(){return zb.instance||(zb.instance=new zb),zb.instance}throttledLog(e){const t=Date.now();t-this.lastLogTime>=this.LOG_THROTTLE&&(console.log(e),this.lastLogTime=t)}reset(){const e=Date.now();e-this.lastResetTime<this.MIN_RESET_INTERVAL&&this.state==="CLOSED"||(this.failureCount=0,this.state="CLOSED",this.lastFailureTime=0,this.lastResetTime=e,this.throttledLog("🔄 Extension circuit breaker RESET"))}canExecute(){const e=Date.now();return this.state==="OPEN"?e-this.lastFailureTime>=this.TIMEOUT?(this.state="HALF_OPEN",!0):!1:!0}onSuccess(){this.failureCount=0,this.state="CLOSED"}onFailure(){this.failureCount++,this.lastFailureTime=Date.now(),this.failureCount>=this.FAILURE_THRESHOLD&&(this.state="OPEN",this.throttledLog(`🚫 Extension circuit breaker OPEN - preventing further calls for ${this.TIMEOUT/1e3}s`))}isOpen(){return this.state==="OPEN"}getStatus(){const e=Date.now(),t=this.state==="OPEN"?Math.max(0,this.TIMEOUT-(e-this.lastFailureTime)):0;return{state:this.state,failureCount:this.failureCount,timeUntilRetry:t}}};hn(zb,"instance");let aH=zb;class bn{static isExtensionInstalled(){return typeof window.chrome<"u"&&!!window.chrome.runtime}static isCriticalOperation(e){return["ENABLE_FOCUS_MODE","DISABLE_FOCUS_MODE","BLOCK_SITE","UNBLOCK_SITE","GET_FOCUS_STATE","ADD_BLOCKED_SITE","REMOVE_BLOCKED_SITE","BLOCK_MULTIPLE_SITES"].includes(e.type)}static async sendMessage(e){if(!this.isExtensionInstalled())throw new Error("Extension not installed");const t=Date.now(),r=e.type||"unknown",i=this.lastCallTimes.get(r)||0,a=this.isCriticalOperation(e)?this.CRITICAL_DEBOUNCE_MS:this.CALL_DEBOUNCE_MS;if(t-i<a)throw new Error(`Extension call debounced - ${r} too frequent`);if(this.lastCallTimes.set(r,t),!this.circuitBreaker.canExecute())throw new Error("Extension communication temporarily disabled - circuit breaker open");try{const o=await this.sendMessageViaContentScript(e);return this.circuitBreaker.onSuccess(),o}catch(o){throw this.circuitBreaker.onFailure(),this.circuitBreaker.isOpen()||console.error("Extension communication failed:",o),o}}static async sendMessageViaContentScript(e){return new Promise((t,r)=>{const i=Math.random().toString(36),a=setTimeout(()=>{window.removeEventListener("message",o),r(new Error("Extension communication timeout"))},5e3),o=s=>{var l;((l=s.data)==null?void 0:l.extensionResponseId)===i&&(clearTimeout(a),window.removeEventListener("message",o),t(s.data.response))};window.addEventListener("message",o),window.postMessage({type:"EXTENSION_REQUEST",messageId:i,payload:e},"*")})}static async getTodayStats(){return await this.sendMessage({type:"GET_TODAY_STATS"})}static async getTimeDataRange(e,t){return await this.sendMessage({type:"GET_TIME_DATA_RANGE",payload:{startDate:e,endDate:t}})}static async getSettings(){return await this.sendMessage({type:"GET_SETTINGS"})}static async toggleFocusMode(){return(await this.sendMessage({type:"TOGGLE_FOCUS_MODE"})).focusMode}static async enableFocusMode(){const e=await this.sendMessage({type:"ENABLE_FOCUS_MODE"});if(!(e!=null&&e.success))throw new Error((e==null?void 0:e.error)||"Failed to enable focus mode")}static async disableFocusMode(){const e=await this.sendMessage({type:"DISABLE_FOCUS_MODE"});if(!(e!=null&&e.success))throw new Error((e==null?void 0:e.error)||"Failed to disable focus mode")}static async getFocusStatus(){const e=await this.sendMessage({type:"GET_FOCUS_STATE"});if(!(e!=null&&e.success)&&(e!=null&&e.error))throw new Error(e.error);return e.data||e}static async blockSite(e){await this.sendMessage({type:"ADD_BLOCKED_SITE",payload:{domain:e}})}static async blockMultipleSites(e){var t,r;if(!e||e.length===0)return{success:!0,results:[],summary:{successCount:0,failureCount:0,total:0}};try{const i=await this.sendMessage({type:"BLOCK_MULTIPLE_SITES",payload:{domains:e}});return i&&i.success&&!i.summary&&(i.summary={successCount:((t=i.results)==null?void 0:t.filter(a=>a.success).length)||0,failureCount:((r=i.results)==null?void 0:r.filter(a=>!a.success).length)||0,total:e.length}),i}catch(i){console.warn("⚠️ Batch blocking failed, falling back to individual blocking:",i);const a=[];let o=0,s=0;for(const l of e)try{await this.blockSite(l),a.push({domain:l,success:!0}),o++}catch(c){a.push({domain:l,success:!1,error:c instanceof Error?c.message:String(c)}),s++}return{success:o>0,results:a,summary:{successCount:o,failureCount:s,total:e.length}}}}static async unblockSite(e){await this.sendMessage({type:"REMOVE_BLOCKED_SITE",payload:{domain:e}})}static async getAnalyticsData(e="week"){return await this.sendMessage({type:"GET_ANALYTICS_DATA",payload:{period:e}})}static mapExtensionDataToWebApp(e){const t=Object.entries(e.sites).map(([r,i],a)=>({id:(a+1).toString(),name:this.getDomainDisplayName(r),url:r,icon:this.getDomainIcon(r),backgroundColor:this.getDomainColor(r),timeSpent:Math.round(i.timeSpent/6e4),sessions:i.visits,percentage:Math.round(i.timeSpent/e.totalTime*100)}));return{timeMetrics:{onScreenTime:Math.round(e.totalTime/(1e3*60)),workingTime:Math.round(e.totalTime/(1e3*60)),deepFocusTime:Math.round(e.totalTime/(1e3*60)),overrideTime:0},siteUsage:t.sort((r,i)=>i.timeSpent-r.timeSpent),productivityScore:e.productivityScore}}static mapArrSiteUsage(e){const t={};let r=0;const i={onScreenTime:0,workingTime:0,deepFocusTime:0,overrideTime:0},a=[];e.forEach(s=>{Object.entries(s.sites).forEach(([l,c])=>{t[l]||(t[l]={id:l,name:this.getDomainDisplayName(l),url:l,icon:this.getDomainIcon(l),backgroundColor:this.getDomainColor(l),timeSpent:0,sessions:0,percentage:0}),t[l].timeSpent+=Math.round(c.timeSpent/(1e3*60)),t[l].sessions+=c.visits,r+=c.timeSpent}),i.onScreenTime+=Math.round(s.totalTime/(1e3*60)),a.push({date:s.date,onScreenTime:Math.round(s.totalTime/(1e3*60)),workingTime:0,deepFocusTime:0})});const o=Object.values(t).map(s=>{const l=r>0?Math.round(s.timeSpent/r*100):0;return{...s,percentage:l}}).sort((s,l)=>l.timeSpent-s.timeSpent);return{timeMetrics:i,dailyUsage:a,siteUsage:o}}static getDomainDisplayName(e){return{"youtube.com":"YouTube","github.com":"GitHub","stackoverflow.com":"Stack Overflow","figma.com":"Figma","notion.so":"Notion","twitter.com":"Twitter","facebook.com":"Facebook","instagram.com":"Instagram","linkedin.com":"LinkedIn"}[e]||e.replace(/^www\./,"")}static getDomainIcon(e){return{"youtube.com":"ri-youtube-line","github.com":"ri-github-line","stackoverflow.com":"ri-stack-overflow-line","figma.com":"ri-file-text-line","notion.so":"ri-file-list-line","twitter.com":"ri-twitter-line","facebook.com":"ri-facebook-line","instagram.com":"ri-instagram-line","linkedin.com":"ri-linkedin-box-line"}[e]||"ri-global-line"}static getDomainColor(e){return{"youtube.com":"rgba(251,191,114,1)","github.com":"rgba(141,211,199,1)","stackoverflow.com":"rgba(252,141,98,1)","figma.com":"rgba(87,181,231,1)","notion.so":"#E5E7EB","twitter.com":"#1DA1F2","facebook.com":"#4267B2","instagram.com":"#E4405F","linkedin.com":"#0A66C2"}[e]||"#6B7280"}static resetCircuitBreaker(){const e=this.circuitBreaker.getStatus();(e.state==="OPEN"||e.failureCount>0)&&this.circuitBreaker.reset()}static getCircuitBreakerStatus(){return this.circuitBreaker.getStatus()}static async testConnection(){try{const e=await this.sendMessage({type:"GET_TODAY_STATS"});return e&&e.success!==!1}catch{return!1}}}hn(bn,"extensionId",null),hn(bn,"circuitBreaker",aH.getInstance()),hn(bn,"lastCallTimes",new Map),hn(bn,"CALL_DEBOUNCE_MS",500),hn(bn,"CRITICAL_DEBOUNCE_MS",200);const Gae=Object.freeze(Object.defineProperty({__proto__:null,default:bn},Symbol.toStringTag,{value:"Module"}));class aet{constructor(){hn(this,"collectionName","deepFocusSessions");hn(this,"sessionCreationLocks",new Map);hn(this,"lockTimeout",1e4)}async startSession(e,t="extension"){const r=this.sessionCreationLocks.get(e);if(r){console.log("🔒 Session creation in progress for user, waiting for existing lock:",e);try{const a=await r;return console.log("✅ Using session from existing lock:",a),a}catch(a){console.warn("⚠️ Existing lock failed, proceeding with new session creation:",a),this.sessionCreationLocks.delete(e)}}const i=this.createSessionWithLock(e,t);this.sessionCreationLocks.set(e,i),setTimeout(()=>{this.sessionCreationLocks.delete(e)},this.lockTimeout);try{const a=await i;return console.log("✅ Deep Focus session created with lock:",a),a}catch(a){throw console.error("❌ Error creating Deep Focus session:",a),a}finally{this.sessionCreationLocks.delete(e)}}async createSessionWithLock(e,t){try{const r=await this.getActiveSession(e);if(r)return console.log("🛡️ Session creation prevented - active session already exists:",r.id),r.id;const i=await this.cleanupOrphanedSessions(e);i>0&&console.log(`🧹 Cleaned up ${i} orphaned session(s) before creating new session`);const a={userId:e,startTime:jo(),status:"active",duration:0,source:t,createdAt:jo(),updatedAt:jo()},o=await _R(wn(yt,this.collectionName),a);return console.log("✅ Deep Focus session started:",o.id),o.id}catch(r){throw console.error("❌ Error starting Deep Focus session:",r),r}}async endSession(e){var t,r;try{const i=Sr(yt,this.collectionName,e),a=new Date,o=await or(fn(wn(yt,this.collectionName),Ot("__name__","==",e)));if(o.empty)return console.error("Session not found:",e),null;const s=o.docs[0].data(),l=((t=s.startTime)==null?void 0:t.toDate())||new Date,c=s.duration||0;return await ss(i,{endTime:jo(),duration:c,status:"completed",updatedAt:jo()}),console.log("Deep Focus session ended:",e,"Duration:",c,"minutes","(incremental only)"),{id:e,userId:s.userId,startTime:l,endTime:a,duration:c,status:"completed",createdAt:((r=s.createdAt)==null?void 0:r.toDate())||new Date,updatedAt:new Date}}catch(i){throw console.error("Error ending Deep Focus session:",i),i}}async getUserSessions(e,t,r){try{console.log("🚀 DeepFocusSessionService: Smart query with database-level filtering",{userId:e,hasDateFilter:!!(t&&r),dateRange:t&&r?`${t.toISOString().split("T")[0]} to ${r.toISOString().split("T")[0]}`:"all time"});let i=fn(wn(yt,this.collectionName),Ot("userId","==",e));if(t&&r){const s=ci.fromDate(t),l=ci.fromDate(r);i=fn(wn(yt,this.collectionName),Ot("userId","==",e),Ot("createdAt",">=",s),Ot("createdAt","<=",l)),console.log("✅ Database-level date filtering applied:",{startDate:t.toISOString(),endDate:r.toISOString(),benefit:"No individual session checking needed"})}const o=(await or(i)).docs.map(s=>{var c,u,d,h;const l=s.data();return{id:s.id,userId:l.userId,startTime:((c=l.startTime)==null?void 0:c.toDate())||new Date,endTime:(u=l.endTime)==null?void 0:u.toDate(),duration:l.duration,status:l.status,createdAt:((d=l.createdAt)==null?void 0:d.toDate())||new Date,updatedAt:((h=l.updatedAt)==null?void 0:h.toDate())||new Date}});return o.sort((s,l)=>l.createdAt.getTime()-s.createdAt.getTime()),console.log("✅ Smart query completed:",{sessionsReturned:o.length,approach:t&&r?"database-filtered":"all-sessions",efficiency:"No JavaScript filtering or individual session logs"}),o}catch(i){throw console.error("❌ Error fetching user Deep Focus sessions:",i),i}}async getActiveSession(e){try{const t=fn(wn(yt,this.collectionName),Ot("userId","==",e),Ot("status","==","active")),r=await or(t);if(r.empty)return null;const i=r.docs.map(a=>{var s,l,c,u;const o=a.data();return{id:a.id,userId:o.userId,startTime:((s=o.startTime)==null?void 0:s.toDate())||new Date,endTime:(l=o.endTime)==null?void 0:l.toDate(),duration:o.duration,status:o.status,createdAt:((c=o.createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=o.updatedAt)==null?void 0:u.toDate())||new Date}});return i.sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime()),i[0]||null}catch(t){throw console.error("Error fetching active Deep Focus session:",t),t}}subscribeToUserSessions(e,t){const r=fn(wn(yt,this.collectionName),Ot("userId","==",e));return Yv(r,i=>{let a=i.docs.map(o=>{var l,c,u,d;const s=o.data();return{id:o.id,userId:s.userId,startTime:((l=s.startTime)==null?void 0:l.toDate())||new Date,endTime:(c=s.endTime)==null?void 0:c.toDate(),duration:s.duration,status:s.status,createdAt:((u=s.createdAt)==null?void 0:u.toDate())||new Date,updatedAt:((d=s.updatedAt)==null?void 0:d.toDate())||new Date}});a.sort((o,s)=>s.createdAt.getTime()-o.createdAt.getTime()),t(a)})}async getCompletedSessionsCount(e){try{const t=fn(wn(yt,this.collectionName),Ot("userId","==",e),Ot("status","==","completed"));return(await or(t)).size}catch(t){return console.error("Error getting completed sessions count:",t),0}}async getTotalFocusTime(e){try{return(await this.getUserSessions(e)).filter(r=>r.status==="completed"&&r.duration).reduce((r,i)=>r+(i.duration||0),0)}catch(t){return console.error("Error calculating total focus time:",t),0}}async updateSessionDuration(e,t){try{const r=Sr(yt,this.collectionName,e);await ss(r,{duration:t,updatedAt:jo()})}catch(r){console.error("Error updating Deep Focus session duration:",r)}}async suspendSession(e){try{const t=Sr(yt,this.collectionName,e);await ss(t,{status:"suspended",suspendedAt:jo(),updatedAt:jo()}),console.log("Deep Focus session suspended:",e)}catch(t){throw console.error("Error suspending Deep Focus session:",t),t}}async resumeSession(e){try{const t=Sr(yt,this.collectionName,e);await ss(t,{status:"active",resumedAt:jo(),updatedAt:jo()}),console.log("Deep Focus session resumed:",e)}catch(t){throw console.error("Error resuming Deep Focus session:",t),t}}async cleanupOrphanedSessions(e){var t;try{const r=fn(wn(yt,this.collectionName),Ot("userId","==",e),Ot("status","==","active")),i=await or(r);let a=0;for(const o of i.docs){const s=o.data(),l=((t=s.startTime)==null?void 0:t.toDate())||new Date,c=new Date,u=s.duration||0;await ss(Sr(yt,this.collectionName,o.id),{endTime:jo(),duration:u,status:"completed",updatedAt:jo()}),a++,console.log("🧹 Cleaned up orphaned session:",o.id,"Duration:",u,"minutes","(incremental only)")}return a>0&&console.log("✅ Cleaned up",a,"orphaned sessions"),a}catch(r){return console.error("❌ Error cleaning up orphaned sessions:",r),0}}async incrementSessionDuration(e,t=1){try{if(t<=0)return;const r=Sr(yt,this.collectionName,e);await ss(r,{duration:Ave(t),updatedAt:jo()}),console.log(`⏱️ Deep Focus session ${e}: +${t} minute(s) added`)}catch(r){console.error("Error incrementing Deep Focus session duration:",r)}}}const $o=new aet,oet=Object.freeze(Object.defineProperty({__proto__:null,deepFocusSessionService:$o},Symbol.toStringTag,{value:"Module"}));class set{constructor(){hn(this,"collectionName","dailySiteUsage")}async backupDayData(e,t,r){var i;try{const a=`${e}_${t}`,o=Sr(yt,this.collectionName,a),s=await sw(o),l=new Date,c={userId:e,date:t,totalTime:r.totalTime||0,sitesVisited:r.sitesVisited||0,productivityScore:r.productivityScore||0,sites:this.processSiteData(r.sites||{}),syncedAt:l,extensionVersion:r.version||"1.0.0",createdAt:s.exists()&&((i=s.data())==null?void 0:i.createdAt)||l,updatedAt:l};await dg(o,c,{merge:!0}),console.log(`✅ Backed up site usage data for ${t}`)}catch(a){throw console.error(`❌ Failed to backup site usage for ${t}:`,a),a}}async batchBackupData(e,t){try{const r=oD(yt),i=new Date;Object.entries(t).forEach(([a,o])=>{const s=`${e}_${a}`,l=Sr(yt,this.collectionName,s),c={userId:e,date:a,totalTime:o.totalTime||0,sitesVisited:o.sitesVisited||0,productivityScore:o.productivityScore||0,sites:this.processSiteData(o.sites||{}),syncedAt:i,extensionVersion:o.version||"1.0.0",createdAt:i,updatedAt:i};r.set(l,c,{merge:!0})}),await r.commit(),console.log(`✅ Batch backed up ${Object.keys(t).length} days of data`)}catch(r){throw console.error("❌ Failed to batch backup data:",r),r}}async getUserData(e,t,r){try{const i=fn(wn(yt,this.collectionName),Ot("userId","==",e),Ot("date",">=",t),Ot("date","<=",r),Ua("date","desc"));return(await or(i)).docs.map(o=>{var s,l,c;return{id:o.id,...o.data(),createdAt:((s=o.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((l=o.data().updatedAt)==null?void 0:l.toDate())||new Date,syncedAt:((c=o.data().syncedAt)==null?void 0:c.toDate())||new Date}})}catch(i){throw console.error("❌ Failed to retrieve user site usage data:",i),i}}async getLastSyncInfo(e){try{const t=fn(wn(yt,this.collectionName),Ot("userId","==",e),Ua("date","desc"),wve(1)),r=await or(t);if(r.empty)return{lastSyncDate:null,totalDays:0};const i=r.docs[0],a=fn(wn(yt,this.collectionName),Ot("userId","==",e)),o=await or(a);return{lastSyncDate:i.data().date,totalDays:o.size}}catch(t){return console.error("❌ Failed to get sync info:",t),{lastSyncDate:null,totalDays:0}}}async restoreToExtension(e,t){try{const r=`${e}_${t}`,i=Sr(yt,this.collectionName,r),a=await sw(i);if(!a.exists())throw new Error(`No data found for ${t}`);const o=a.data();return{totalTime:o.totalTime,sitesVisited:o.sitesVisited,productivityScore:o.productivityScore,sites:Object.fromEntries(Object.entries(o.sites).map(([s,l])=>[s,{timeSpent:l.timeSpent,visits:l.visits,category:l.category,lastVisit:l.lastVisit}]))}}catch(r){throw console.error(`❌ Failed to restore data for ${t}:`,r),r}}async cleanupOldData(e,t=90){try{const r=new Date;r.setDate(r.getDate()-t);const i=r.toISOString().split("T")[0],a=fn(wn(yt,this.collectionName),Ot("userId","==",e),Ot("date","<",i)),o=await or(a);if(o.empty)return 0;const s=oD(yt);return o.docs.forEach(l=>{s.delete(l.ref)}),await s.commit(),console.log(`🧹 Cleaned up ${o.size} old site usage records`),o.size}catch(r){throw console.error("❌ Failed to cleanup old data:",r),r}}processSiteData(e){const t={};return Object.entries(e).forEach(([r,i])=>{r&&i&&typeof i.timeSpent=="number"&&(t[r]={domain:r,timeSpent:Math.max(0,i.timeSpent),visits:Math.max(0,i.visits||0),category:i.category||"uncategorized",lastVisit:i.lastVisit?new Date(i.lastVisit):new Date})}),t}async getBatchBackupData(e,t){try{const r={},i=t.map(async a=>{const o=await this.getBackupData(e,a);o&&(r[a]=o)});return await Promise.all(i),r}catch(r){throw console.error("❌ Error getting batch backup data:",r),r}}async getBackupData(e,t){try{const r=`${e}_${t}`,i=Sr(yt,this.collectionName,r),a=await sw(i);if(!a.exists())return null;const o=a.data();return{id:a.id,...o,createdAt:o.createdAt instanceof ci?o.createdAt.toDate():new Date(o.createdAt),updatedAt:o.updatedAt instanceof ci?o.updatedAt.toDate():new Date(o.updatedAt),syncedAt:o.syncedAt instanceof ci?o.syncedAt.toDate():new Date(o.syncedAt)}}catch(r){throw console.error("❌ Error getting backup data:",r),r}}async getAggregatedStats(e,t=30){try{const r=new Date().toISOString().split("T")[0],i=new Date;i.setDate(i.getDate()-t);const a=i.toISOString().split("T")[0],o=await this.getUserData(e,a,r);if(o.length===0)return{totalTime:0,avgDailyTime:0,topSites:[],productivityTrend:0};const s=o.reduce((w,_)=>w+_.totalTime,0),l=s/o.length,c={};o.forEach(w=>{Object.values(w.sites).forEach(_=>{c[_.domain]||(c[_.domain]={totalTime:0,count:0}),c[_.domain].totalTime+=_.timeSpent,c[_.domain].count++})});const u=Object.entries(c).map(([w,_])=>({domain:w,totalTime:_.totalTime,avgDaily:_.totalTime/_.count})).sort((w,_)=>_.totalTime-w.totalTime).slice(0,10),d=Math.floor(o.length/2),h=o.slice(0,d),f=o.slice(d),m=h.length>0?h.reduce((w,_)=>w+_.productivityScore,0)/h.length:0,v=f.length>0?f.reduce((w,_)=>w+_.productivityScore,0)/f.length:0,y=m>0?(v-m)/m*100:0;return{totalTime:s,avgDailyTime:l,topSites:u,productivityTrend:y}}catch(r){throw console.error("❌ Failed to get aggregated stats:",r),r}}async getAllTimeDailyUsage(e){try{const t=fn(wn(yt,this.collectionName),Ot("userId","==",e),Ua("date","desc"));return(await or(t)).docs.map(i=>{var a,o,s;return{id:i.id,...i.data(),createdAt:((a=i.data().createdAt)==null?void 0:a.toDate())||new Date,updatedAt:((o=i.data().updatedAt)==null?void 0:o.toDate())||new Date,syncedAt:((s=i.data().syncedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("❌ Failed to get all time daily usage:",t),t}}}const jc=new set;class Wae{static async getTimeRangeData(e,t,r){try{const i=new Date().toISOString().split("T")[0],a=new Date(t),o=new Date(r);console.log("🔄 HybridDataService: Fetching data for range:",{startDate:t,endDate:r,today:i});const{pastDates:s,currentDate:l,futureDates:c}=this.categorizedDates(t,r,i);console.log("📅 Date categorization:",{pastDates:s.length,currentDate:l?"included":"not included",futureDates:c.length});const u={};if(s.length>0)try{const h=await jc.getBatchBackupData(e,s);Object.entries(h).forEach(([f,m])=>{u[f]=this.convertFirebaseToHybrid(m)}),console.log("✅ Firebase data loaded for",Object.keys(h).length,"dates")}catch(h){console.warn("⚠️ Firebase data fetch failed:",h)}if(l){console.log("🎯 TODAY DETECTED - Attempting to fetch extension data...");try{if(bn.isExtensionInstalled()){console.log("🔌 Extension is installed, fetching today stats...");const h=await bn.getTodayStats();if(console.log("📊 Extension response:",h),h.success!==!1){const f=h.data||h;u[i]=this.convertExtensionToHybrid(f),console.log("✅ Extension data loaded for today:",i,u[i])}else console.warn("⚠️ Extension returned unsuccessful response:",h)}else console.log("⚠️ Extension not available for current date")}catch(h){console.warn("⚠️ Extension data fetch failed:",h);try{const f=await jc.getBackupData(e,i);f&&(u[i]=this.convertFirebaseToHybrid(f),console.log("✅ Fallback to Firebase data for today"))}catch{console.warn("⚠️ Firebase fallback also failed")}}}else console.log("❌ TODAY NOT DETECTED - Extension data will not be fetched for current date");if(c.length>0)try{console.log("⚠️ Future dates detected - checking Firebase for test data:",c);const h=await jc.getBatchBackupData(e,c);c.forEach(f=>{h[f]?(u[f]=this.convertFirebaseToHybrid(h[f]),console.log("✅ Found future test data in Firebase for:",f)):u[f]={totalTime:0,sitesVisited:0,productivityScore:0,sites:{}}})}catch(h){console.warn("⚠️ Failed to query Firebase for future dates:",h),c.forEach(f=>{u[f]={totalTime:0,sitesVisited:0,productivityScore:0,sites:{}}})}this.fillMissingDates(u,t,r);const d=this.aggregateData(u,t,r);return{success:!0,data:u,aggregated:d}}catch(i){return console.error("❌ HybridDataService: Failed to get time range data:",i),{success:!1,data:{},aggregated:{totalTime:0,sitesVisited:0,avgProductivityScore:0,sites:{},dateRange:{startDate:t,endDate:r,totalDays:0,daysCovered:0}}}}}static categorizedDates(e,t,r){const i=new Date(e),a=new Date(t),o=[],s=[];let l=!1;console.log("🔍 Date categorization debug:",{startDate:e,endDate:t,today:r,systemDate:new Date().toISOString().split("T")[0]});const c=new Date(i);for(;c<=a;){const u=c.getFullYear(),d=String(c.getMonth()+1).padStart(2,"0"),h=String(c.getDate()).padStart(2,"0"),f=`${u}-${d}-${h}`;f<r?(o.push(f),console.log(`✅ Added to pastDates: ${f}`)):f===r?(l=!0,console.log(`✅ Set as currentDate: ${f}`)):(s.push(f),console.log(`⚠️ Added to futureDates: ${f}`)),c.setDate(c.getDate()+1)}return console.log("📊 Final categorization:",{pastDates:o,currentDate:l,futureDates:s,todayString:r}),{pastDates:o,currentDate:l,futureDates:s}}static convertFirebaseToHybrid(e){return{totalTime:e.totalTime,sitesVisited:e.sitesVisited,productivityScore:e.productivityScore,sites:Object.entries(e.sites).reduce((t,[r,i])=>(t[r]={timeSpent:i.timeSpent,visits:i.visits},t),{})}}static convertExtensionToHybrid(e){return{totalTime:e.totalTime||0,sitesVisited:e.sitesVisited||0,productivityScore:e.productivityScore||0,sites:e.sites||{}}}static fillMissingDates(e,t,r){const i=new Date(t),a=new Date(r),o=new Date(i);for(;o<=a;){const s=o.getFullYear(),l=String(o.getMonth()+1).padStart(2,"0"),c=String(o.getDate()).padStart(2,"0"),u=`${s}-${l}-${c}`;e[u]||(e[u]={totalTime:0,sitesVisited:0,productivityScore:0,sites:{}}),o.setDate(o.getDate()+1)}}static aggregateData(e,t,r){Object.keys(e).sort();let i=0,a=0,o=0;const s={};Object.values(e).forEach(f=>{i+=f.totalTime,f.totalTime>0&&(a+=f.productivityScore,o++),Object.entries(f.sites).forEach(([m,v])=>{s[m]||(s[m]={timeSpent:0,visits:0}),s[m].timeSpent+=v.timeSpent,s[m].visits+=v.visits})});const l=Object.keys(s).length,c=o>0?a/o:0,u=new Date(t),d=new Date(r),h=Math.ceil((d.getTime()-u.getTime())/(1e3*60*60*24))+1;return{totalTime:i,sitesVisited:l,avgProductivityScore:Math.round(c),sites:s,dateRange:{startDate:t,endDate:r,totalDays:h,daysCovered:o}}}static async getCurrentDayData(){try{if(!bn.isExtensionInstalled())return{success:!1,data:null};const e=await bn.getTodayStats();if(e.success===!1)return{success:!1,data:null};const t=e.data||e;return{success:!0,data:this.convertExtensionToHybrid(t)}}catch(e){return console.error("❌ Failed to get current day data:",e),{success:!1,data:null}}}static convertToWebAppFormat(e){const t=Object.entries(e.sites).map(([r,i],a)=>({id:(a+1).toString(),name:this.getDomainDisplayName(r),url:r,icon:this.getDomainIcon(r),backgroundColor:this.getDomainColor(r),timeSpent:Math.round(i.timeSpent/6e4),sessions:i.visits,percentage:e.totalTime>0?Math.round(i.timeSpent/e.totalTime*100):0}));return{timeMetrics:{onScreenTime:Math.round(e.totalTime/(1e3*60)),workingTime:Math.round(e.totalTime/(1e3*60)),deepFocusTime:Math.round(e.totalTime/(1e3*60)),overrideTime:0},siteUsage:t.sort((r,i)=>i.timeSpent-r.timeSpent),productivityScore:e.productivityScore}}static getDomainDisplayName(e){return{"youtube.com":"YouTube","github.com":"GitHub","stackoverflow.com":"Stack Overflow","figma.com":"Figma","notion.so":"Notion","twitter.com":"Twitter","facebook.com":"Facebook","instagram.com":"Instagram","linkedin.com":"LinkedIn"}[e]||e.replace(/^www\./,"")}static getDomainIcon(e){return{"youtube.com":"ri-youtube-line","github.com":"ri-github-line","stackoverflow.com":"ri-stack-overflow-line","figma.com":"ri-file-text-line","notion.so":"ri-file-list-line","twitter.com":"ri-twitter-line","facebook.com":"ri-facebook-line","instagram.com":"ri-instagram-line","linkedin.com":"ri-linkedin-box-line"}[e]||"ri-global-line"}static getDomainColor(e){return{"youtube.com":"rgba(251,191,114,1)","github.com":"rgba(141,211,199,1)","stackoverflow.com":"rgba(252,141,98,1)","figma.com":"rgba(87,181,231,1)","notion.so":"#E5E7EB","twitter.com":"#1DA1F2","facebook.com":"#4267B2","instagram.com":"#E4405F","linkedin.com":"#0A66C2"}[e]||"#6B7280"}}const Yae={required:["userId","domain","duration"]},qB={duration:5,reason:"manual_override",metadata:{overrideCount:1}};class cet{constructor(){hn(this,"collectionName","overrideSessions")}validateOverrideData(e){var i;const t=[];if(Yae.required.forEach(a=>{e[a]||t.push(`Missing required field: ${a}`)}),e.userId&&typeof e.userId!="string"&&t.push("userId must be a string"),e.domain&&typeof e.domain!="string"&&t.push("domain must be a string"),e.duration&&(typeof e.duration!="number"?t.push("duration must be a number"):(e.duration<1||e.duration>120)&&t.push("duration must be between 1 and 120 minutes")),t.length>0)return{isValid:!1,errors:t};const r={userId:e.userId,domain:e.domain,duration:e.duration||qB.duration,createdAt:jo(),reason:e.reason||qB.reason,metadata:{...qB.metadata,...e.metadata,extensionVersion:((i=e.metadata)==null?void 0:i.extensionVersion)||"1.0.0"}};return e.url&&(r.url=e.url),e.deepFocusSessionId&&(r.deepFocusSessionId=e.deepFocusSessionId),e.deviceInfo&&(r.deviceInfo=e.deviceInfo),{isValid:!0,errors:[],sanitizedData:r}}async createValidatedOverrideSession(e){try{console.log("🔄 Validating override session data:",e);const t=this.validateOverrideData(e);if(!t.isValid)return console.error("❌ Validation failed:",t.errors),{success:!1,errors:t.errors};console.log("✅ Validation passed, creating session:",t.sanitizedData);const r=await _R(wn(yt,this.collectionName),t.sanitizedData);return console.log("✅ Override session created successfully:",{id:r.id,domain:t.sanitizedData.domain,duration:t.sanitizedData.duration+"min",userId:t.sanitizedData.userId,timestamp:new Date().toISOString()}),{success:!0,id:r.id}}catch(t){return console.error("❌ Error creating override session:",t),{success:!1,errors:[t instanceof Error?t.message:"Unknown error"]}}}async setupTestData(e){const t=[{userId:e,domain:"facebook.com",url:"https://facebook.com/feed",duration:5,reason:"manual_override",deviceInfo:{userAgent:"Test Browser",platform:"Web"}},{userId:e,domain:"instagram.com",url:"https://instagram.com/explore",duration:3,reason:"break_time",deviceInfo:{userAgent:"Test Browser",platform:"Web"}},{userId:e,domain:"youtube.com",url:"https://youtube.com/watch",duration:10,reason:"emergency",deviceInfo:{userAgent:"Test Browser",platform:"Web"}}];console.log("🔄 Setting up test override sessions...");for(const r of t){const i=await this.createValidatedOverrideSession(r);i.success?console.log(`✅ Test session created: ${r.domain} (${r.duration}min)`):console.error(`❌ Failed to create test session for ${r.domain}:`,i.errors)}}getSchemaInfo(){return{collectionName:this.collectionName,requiredFields:Yae.required,optionalFields:["url","deepFocusSessionId","reason","deviceInfo","metadata"],indexes:["userId + createdAt (composite)","domain (single)","userId (single)"]}}}const oH=new cet;class uet{constructor(){hn(this,"collectionName","overrideSessions")}async createOverrideSession(e){var r;const t=await oH.createValidatedOverrideSession(e);if(!t.success){const i=`Failed to create override session: ${(r=t.errors)==null?void 0:r.join(", ")}`;throw console.error("❌",i),new Error(i)}return t.id}async getUserOverrides(e,t,r){var i;try{let a=fn(wn(yt,this.collectionName),Ot("userId","==",e),Ua("createdAt","desc"));const s=(await or(a)).docs.map(l=>{var c;return{id:l.id,...l.data(),createdAt:((c=l.data().createdAt)==null?void 0:c.toDate())||new Date}});return t&&r?s.filter(l=>{const c=new Date(l.createdAt);return c>=t&&c<=r}):s}catch(a){if(console.error("Error fetching override sessions:",a),a instanceof Error&&((i=a.message)!=null&&i.includes("index"))){console.log("Falling back to simple query without orderBy...");try{const o=fn(wn(yt,this.collectionName),Ot("userId","==",e)),c=(await or(o)).docs.map(u=>{var d;return{id:u.id,...u.data(),createdAt:((d=u.data().createdAt)==null?void 0:d.toDate())||new Date}}).sort((u,d)=>d.createdAt.getTime()-u.createdAt.getTime());return t&&r?c.filter(u=>{const d=new Date(u.createdAt);return d>=t&&d<=r}):c}catch(o){return console.error("Fallback query also failed:",o),[]}}return[]}}}const ec=new uet;class vl{static async getFaviconUrl(e,t={}){const{size:r=this.DEFAULT_SIZE,retryAttempts:i=2,timeout:a=this.TIMEOUT_MS,fallbackToDefault:o=!0}=t,s=this.cleanDomain(e),l=`${s}:${r}:sharp`;if(this.cache.has(l))return this.cache.get(l);try{const c=r*this.SIZE_MULTIPLIER,u=this.buildGoogleFaviconUrl(s,c);if(await this.validateFaviconUrl(u,a)){const h={url:u,isDefault:!1,source:"google"};return this.cache.set(l,h),h}if(o)return this.getFallbackFavicon(s,r,l);throw new Error("Google favicon service failed and fallback disabled")}catch(c){if(console.warn(`Failed to fetch favicon for ${s}:`,c),o)return this.getFallbackFavicon(s,r,l);throw c}}static async getFavicons(e,t={}){const r=new Map,i=5;for(let a=0;a<e.length;a+=i){const s=e.slice(a,a+i).map(async c=>{try{const u=await this.getFaviconUrl(c,t);return{domain:this.cleanDomain(c),result:u}}catch(u){return console.warn(`Failed to get favicon for ${c}:`,u),{domain:this.cleanDomain(c),result:this.getFallbackFavicon(this.cleanDomain(c),t.size||this.DEFAULT_SIZE)}}});(await Promise.all(s)).forEach(({domain:c,result:u})=>{r.set(c,u)}),a+i<e.length&&await this.delay(100)}return r}static async preloadFavicons(e,t=this.DEFAULT_SIZE){const r=e.map(this.cleanDomain).filter(i=>!this.cache.has(`${i}:${t}:sharp`));r.length>0&&await this.getFavicons(r,{size:t})}static buildGoogleFaviconUrl(e,t){const r=new URLSearchParams({domain:e,sz:t.toString()});return`${this.GOOGLE_FAVICON_BASE}?${r.toString()}`}static async validateFaviconUrl(e,t){return new Promise(r=>{const i=new Image,a=setTimeout(()=>{i.onload=null,i.onerror=null,r(!1)},t);i.onload=()=>{clearTimeout(a),i.width>16||i.height>16?r(!0):r(!1)},i.onerror=()=>{clearTimeout(a),r(!1)},i.src=e})}static getFallbackFavicon(e,t,r){const i=e.charAt(0).toUpperCase(),a=this.getColorForDomain(e),s={url:this.generateLetterAvatar(i,a,t),isDefault:!0,source:"letter"};return r&&this.cache.set(r,s),s}static generateLetterAvatar(e,t,r){const i=document.createElement("canvas");i.width=r,i.height=r;const a=i.getContext("2d");return a.fillStyle=t,a.fillRect(0,0,r,r),a.fillStyle="#ffffff",a.font=`bold ${Math.floor(r*.6)}px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(e,r/2,r/2),i.toDataURL()}static getColorForDomain(e){const t=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#06B6D4","#EC4899","#84CC16","#F97316","#6366F1"];let r=0;for(let i=0;i<e.length;i++)r=e.charCodeAt(i)+((r<<5)-r);return t[Math.abs(r)%t.length]}static cleanDomain(e){return e.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].split(":")[0].toLowerCase()}static delay(e){return new Promise(t=>setTimeout(t,e))}static clearCache(){this.cache.clear()}static getCacheStats(){return{size:this.cache.size,domains:Array.from(this.cache.keys())}}static getDomainIcon(e){const t={"instagram.com":"ri-instagram-line","facebook.com":"ri-facebook-line","youtube.com":"ri-youtube-line","twitter.com":"ri-twitter-line","linkedin.com":"ri-linkedin-line","github.com":"ri-github-line","google.com":"ri-google-line","tiktok.com":"ri-music-line","reddit.com":"ri-reddit-line","pinterest.com":"ri-pinterest-line","snapchat.com":"ri-snapchat-line","whatsapp.com":"ri-whatsapp-line","telegram.org":"ri-telegram-line","discord.com":"ri-discord-line","zoom.us":"ri-video-line","netflix.com":"ri-netflix-line","amazon.com":"ri-amazon-line"};if(t[e])return t[e];for(const[r,i]of Object.entries(t))if(e.includes(r.split(".")[0]))return i;return"ri-global-line"}}hn(vl,"cache",new Map),hn(vl,"DEFAULT_SIZE",32),hn(vl,"GOOGLE_FAVICON_BASE","https://www.google.com/s2/favicons"),hn(vl,"TIMEOUT_MS",5e3),hn(vl,"SIZE_MULTIPLIER",3);vl.getFaviconUrl.bind(vl);vl.preloadFavicons.bind(vl);class det{constructor(){hn(this,"collectionName","userBlockedSites")}async getUserBlockedSites(e){try{const t=Sr(yt,this.collectionName,e),r=await sw(t);return r.exists()?r.data().sites||[]:[]}catch(t){throw console.error("Failed to get blocked sites:",t),t}}async addBlockedSite(e,t){try{const r=await this.getUserBlockedSites(e),a={...{...t,icon:t.icon||vl.getDomainIcon(t.url),backgroundColor:t.backgroundColor||"#6B7280"},id:`site_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},o=[...r,a];await this.updateAllBlockedSites(e,o)}catch(r){throw console.error("Failed to add blocked site:",r),r}}async removeBlockedSite(e,t){try{const i=(await this.getUserBlockedSites(e)).filter(a=>a.id!==t);await this.updateAllBlockedSites(e,i)}catch(r){throw console.error("Failed to remove blocked site:",r),r}}async toggleBlockedSite(e,t){try{const i=(await this.getUserBlockedSites(e)).map(a=>a.id===t?{...a,isActive:!a.isActive}:a);await this.updateAllBlockedSites(e,i)}catch(r){throw console.error("Failed to toggle blocked site:",r),r}}async updateAllBlockedSites(e,t){var r,i;try{const a=Sr(yt,this.collectionName,e),o=await sw(a),s={userId:e,sites:t,metadata:{totalSites:t.length,createdAt:o.exists()?(i=(r=o.data())==null?void 0:r.metadata)==null?void 0:i.createdAt:jo(),updatedAt:jo(),syncedAt:jo(),version:"1.0"}};await dg(a,s,{merge:!0})}catch(a){throw console.error("Failed to update blocked sites:",a),a}}}const GM=new det,het=n=>{if(!n.startDate||!n.endDate)return null;const e=new Date(n.startDate),r=new Date(n.endDate).getTime()-e.getTime(),i=Math.ceil(r/(1e3*60*60*24)),a=new Date(e);a.setDate(a.getDate()-1),a.setHours(23,59,59,999);const o=new Date(a);o.setDate(o.getDate()-i+1),o.setHours(0,0,0,0);let s="previous period";switch(n.rangeType){case"today":s="yesterday";break;case"last 7 days":s="previous week";break;case"last 30 days":s="previous month";break;case"custom":s="previous period";break;default:s="previous period"}return{startDate:o,endDate:a,label:s}},NC=(n,e)=>e===0?n>0?100:null:Math.round((n-e)/e*100),fet=(n,e,t)=>{const r=NC(n,e);return r===null?{percentage:null,direction:"same",label:n>0?"New data":"No comparison data",color:"text-gray-500",icon:"—"}:r>0?{percentage:r,direction:"up",label:`+${r}% from ${t}`,color:"text-green-500",icon:"—"}:r<0?{percentage:r,direction:"down",label:`${r}% from ${t}`,color:"text-red-500",icon:"—"}:{percentage:0,direction:"same",label:`Equal to ${t}`,color:"text-gray-500",icon:"—"}},pet=n=>n!=="all time";let GB="deep-focus-storage-anonymous",Kae=null,WB=new Set;const Xae=async(n,e)=>{if(!WB.has(n)){WB.add(n);try{await e()}finally{WB.delete(n)}}},get=()=>{var n,e;try{const t=localStorage.getItem("user-store");if(t){const r=JSON.parse(t),i=(e=(n=r==null?void 0:r.state)==null?void 0:n.user)==null?void 0:e.uid;i&&i!==Kae&&GB==="deep-focus-storage-anonymous"&&(Kae=i,GB=`deep-focus-storage-${i}`,console.log("🔑 Storage key updated for user:",i))}}catch(t){console.warn("Failed to get user ID for deep focus storage:",t)}return GB},Zae=(n,e,t,r)=>{console.log("🕒 Creating new timers for session:",t);const i=e();i.timer&&(console.log("⚠️ Clearing existing timer"),clearInterval(i.timer)),i.secondTimer&&(console.log("⚠️ Clearing existing second timer"),clearInterval(i.secondTimer));const a=setInterval(()=>{const s=Math.floor((Date.now()-r.getTime())/1e3);n({activeSessionElapsedSeconds:s})},1e3),o=setInterval(async()=>{console.log("⏱️ Timer tick for session:",t);const s=e().activeSessionDuration+1;n({activeSessionDuration:s}),t&&(await $o.incrementSessionDuration(t,1),console.log("⏱️ Deep Focus: +1 minute added to session",t))},6e4);n({timer:o,secondTimer:a}),console.log("✅ New timers created for session:",t)},Qd=yy()(xW((n,e)=>({timeMetrics:{onScreenTime:0,workingTime:0,deepFocusTime:0,overrideTime:0},dailyUsage:[],siteUsage:[],blockedSites:[],isExtensionConnected:!1,isDeepFocusActive:!1,currentSessionId:null,deepFocusSessions:[],totalSessionsCount:0,totalFocusTime:0,unsubscribe:null,hasRecoveredSession:!1,recoveryInProgress:!1,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,timer:null,secondTimer:null,isBackingUp:!1,lastBackupTime:null,backupError:null,isSessionPaused:!1,pausedAt:null,totalPausedTime:0,autoSessionManagement:!0,overrideSessions:[],isReloading:!1,comparisonData:null,isLoadingComparison:!1,comparisonError:null,setReloading:t=>n({isReloading:t}),loadExtensionData:async()=>{try{if(!bn.isExtensionInstalled()){n({isExtensionConnected:!1});return}const t=await bn.getTodayStats();if(t.success===!1)throw new Error(t.error||"Extension returned error");const r=t.data||t,i=bn.mapExtensionDataToWebApp(r);n({timeMetrics:i.timeMetrics,siteUsage:i.siteUsage,isExtensionConnected:!0}),await e().loadAllTimeDailyUsage()}catch(t){console.error("Extension data loading failed:",t),n({isExtensionConnected:!1})}},loadAllTimeExtensionData:async()=>{try{if(!bn.isExtensionInstalled()){n({isExtensionConnected:!1});return}const t=Rn.getState().user;if(!(t!=null&&t.uid)){console.warn("⚠️ User not authenticated - skipping all time extension data load"),n({isExtensionConnected:!1});return}const r=await jc.getAllTimeDailyUsage(t.uid),i=bn.mapArrSiteUsage(r);console.log("khanhnq6",i),n({timeMetrics:i.timeMetrics,siteUsage:i.siteUsage,dailyUsage:i.dailyUsage,isExtensionConnected:!0})}catch(t){console.error("Extension data all time loading failed:",t),n({isExtensionConnected:!1})}},loadAllTimeDailyUsage:async()=>{try{const{useUserStore:t}=await Fr(async()=>{const{useUserStore:s}=await Promise.resolve().then(()=>Ps);return{useUserStore:s}},void 0),r=t.getState().user;if(!(r!=null&&r.uid)){console.warn("⚠️ User not authenticated - skipping daily usage load");return}const i=new Date,a=new Date(i);a.setDate(i.getDate()-30);const o=await e().loadHybridTimeRangeData(a.toISOString().split("T")[0],i.toISOString().split("T")[0]);if(console.log("🔍 Hybrid response structure:",{hasData:!!o.data,dataKeys:o.data?Object.keys(o.data).length:0,hasAggregated:!!o.aggregated,sampleDate:o.data?Object.keys(o.data)[0]:null}),o.data&&Object.keys(o.data).length>0){const s=Object.entries(o.data).map(([l,c])=>({date:l,onScreenTime:Math.round(c.totalTime/6e4),workingTime:Math.round(c.totalTime/6e4*.6),deepFocusTime:0})).sort((l,c)=>l.date.localeCompare(c.date));n({dailyUsage:s}),console.log("✅ Loaded daily usage data for all time:",s.length,"days")}}catch(t){console.error("❌ Failed to load all time daily usage:",t)}},blockSiteInExtension:async t=>{try{bn.isExtensionInstalled()&&await bn.blockSite(t)}catch(r){console.error("Failed to block site in extension:",r)}},unblockSiteInExtension:async t=>{try{bn.isExtensionInstalled()&&await bn.unblockSite(t)}catch(r){console.error("Failed to unblock site in extension:",r)}},toggleBlockedSite:async t=>{const{useUserStore:r}=await Fr(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>Ps);return{useUserStore:a}},void 0),i=r.getState().user;i!=null&&i.uid&&(await GM.toggleBlockedSite(i.uid,t),await e().loadBlockedSites(i.uid))},removeBlockedSite:async t=>{const{useUserStore:r}=await Fr(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>Ps);return{useUserStore:a}},void 0),i=r.getState().user;i!=null&&i.uid&&(await GM.removeBlockedSite(i.uid,t),await e().loadBlockedSites(i.uid))},addBlockedSite:async t=>{const{useUserStore:r}=await Fr(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>Ps);return{useUserStore:a}},void 0),i=r.getState().user;if(i!=null&&i.uid)try{await GM.addBlockedSite(i.uid,t),await e().loadBlockedSites(i.uid)}catch(a){console.error("Error in addBlockedSite:",a)}else console.error("No user logged in, cannot add blocked site")},loadBlockedSites:async t=>{try{const r=await GM.getUserBlockedSites(t);n({blockedSites:r})}catch(r){console.error("Failed to load blocked sites:",r)}},loadFocusStatus:async()=>{try{if(!bn.isExtensionInstalled()||!await bn.testConnection())return;const r=await bn.getFocusStatus(),i=e().isDeepFocusActive;if(i&&!e().activeSessionId&&!e().recoveryInProgress){n({recoveryInProgress:!0});try{const{useUserStore:a}=await Fr(async()=>{const{useUserStore:s}=await Promise.resolve().then(()=>Ps);return{useUserStore:s}},void 0),o=a.getState().user;if(o!=null&&o.uid){console.log("🧹 Cleaning up any orphaned sessions on page load...");const s=await $o.cleanupOrphanedSessions(o.uid);s>0&&(console.log(`✅ Cleaned up ${s} orphaned session(s)`),await e().loadDeepFocusSessions(o.uid)),n({isDeepFocusActive:!1,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,timer:null,secondTimer:null,recoveryInProgress:!1}),console.log("🔄 Reset deep focus state to inactive (no active session)")}}catch(a){console.error("❌ Failed to handle session cleanup:",a),n({recoveryInProgress:!1})}}r.focusMode!==i&&(localStorage.getItem("deep-focus-storage")?(console.log("Prioritizing persisted local state over extension state"),i?await bn.enableFocusMode():await bn.disableFocusMode()):(n({isDeepFocusActive:r.focusMode}),window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:r.focusMode}}))))}catch(t){console.error("Failed to load focus status:",t)}},initializeFocusSync:async()=>{if(!e().recoveryInProgress){n({recoveryInProgress:!0});try{const t=e().isDeepFocusActive;if(!bn.isExtensionInstalled()){console.log("📱 Extension not available, using local state only"),n({recoveryInProgress:!1});return}let r;try{r=await Promise.race([bn.getFocusStatus(),new Promise((i,a)=>setTimeout(()=>a(new Error("Extension status timeout")),3e3))])}catch{console.warn("⚠️ Failed to get extension focus status, using local state"),n({recoveryInProgress:!1});return}if(r.focusMode!==t){const i="lastPriorityLog",a=sessionStorage.getItem(i),o=Date.now();(!a||o-parseInt(a)>1e4)&&(console.log("🔄 Prioritizing persisted local state over extension state"),sessionStorage.setItem(i,o.toString()));try{if(t){await Promise.race([bn.enableFocusMode(),new Promise((l,c)=>setTimeout(()=>c(new Error("Enable focus timeout")),3e3))]);const s=e().blockedSites.filter(l=>l.isActive);for(const l of s)try{await Promise.race([bn.blockSite(l.url),new Promise((c,u)=>setTimeout(()=>u(new Error("Block site timeout")),1e3))])}catch(c){console.warn("⚠️ Failed to block site during sync:",l.url,c)}}else{await Promise.race([bn.disableFocusMode(),new Promise((l,c)=>setTimeout(()=>c(new Error("Disable focus timeout")),3e3))]);const s=e().blockedSites;for(const l of s)try{await Promise.race([bn.unblockSite(l.url),new Promise((c,u)=>setTimeout(()=>u(new Error("Unblock site timeout")),1e3))])}catch(c){console.warn("⚠️ Failed to unblock site during sync:",l.url,c)}}console.log("✅ Extension focus mode synced successfully")}catch(s){console.warn("⚠️ Failed to sync extension focus mode (continuing anyway):",s)}}else console.log("✅ Extension and local focus states already match");window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:t}})),console.log("✅ Focus sync completed")}catch(t){console.error("❌ Focus sync failed:",t)}finally{n({recoveryInProgress:!1})}}},syncFocusStatus:t=>{n({isDeepFocusActive:t})},syncCompleteFocusState:async(t,r=[])=>{console.log("🔄 Syncing complete focus state:",{isActive:t,blockedSites:r.length});try{const{useUserStore:i}=await Fr(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>Ps);return{useUserStore:o}},void 0),a=i.getState().user;if(!(a!=null&&a.uid)){console.warn("⚠️ User not authenticated - skipping focus state sync");return}if(t){const o=e();let s=o.activeSessionId,l=o.activeSessionStartTime||new Date;if(!s)try{s=await $o.startSession(a.uid),l=new Date,console.log("✅ New Deep Focus session started:",s),n({activeSessionId:s,activeSessionStartTime:l,activeSessionDuration:0,activeSessionElapsedSeconds:0}),Zae(n,e,s,l)}catch(u){console.error("❌ Failed to start Deep Focus session:",u)}const c=e().blockedSites.map(u=>({...u,isActive:r.length>0?r.includes(u.url):!0}));if(n({isDeepFocusActive:!0,blockedSites:c}),bn.isExtensionInstalled()){const u=c.filter(d=>d.isActive).map(d=>d.url);if(u.length>0)try{console.log(`📦 Batch blocking ${u.length} sites...`);const d=await bn.blockMultipleSites(u);if(d.success&&d.summary){const{successCount:h,failureCount:f}=d.summary;console.log(`✅ Batch blocking completed: ${h} sites blocked, ${f} failed`),f>0&&console.warn(`⚠️ ${f} sites failed to block, but continuing...`)}else{console.warn("⚠️ Batch blocking failed, falling back to individual blocking");let h=0,f=0;for(const m of u)try{await Promise.race([bn.blockSite(m),new Promise((v,y)=>setTimeout(()=>y(new Error("Block site timeout")),2e3))]),h++}catch(v){f++,f<=3&&console.warn(`⚠️ Failed to block site during fallback: ${m}`,v)}f>3&&console.warn(`⚠️ ${f} additional sites failed to block (suppressed logs)`),console.log(`✅ Fallback blocking completed: ${h} sites blocked, ${f} failed`)}}catch(d){console.warn("⚠️ Both batch and fallback blocking failed:",d)}}console.log("✅ Focus state sync completed")}else{const o=e();if(o.activeSessionId)try{console.log("🛑 Ending active Deep Focus session:",o.activeSessionId),await $o.endSession(o.activeSessionId),console.log("✅ Deep Focus session ended successfully");const{useUserStore:l}=await Fr(async()=>{const{useUserStore:u}=await Promise.resolve().then(()=>Ps);return{useUserStore:u}},void 0),c=l.getState().user;c!=null&&c.uid&&await e().loadDeepFocusSessions(c.uid)}catch(l){console.error("❌ Failed to end Deep Focus session:",l)}o.timer&&clearInterval(o.timer),o.secondTimer&&clearInterval(o.secondTimer);const s=e().blockedSites.map(l=>({...l,isActive:!1}));n({isDeepFocusActive:!1,blockedSites:s,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,isSessionPaused:!1,pausedAt:null,totalPausedTime:0,timer:null,secondTimer:null}),console.log("✅ Focus state disabled - session ended and state cleared")}}catch(i){console.error("❌ Failed to sync complete focus state:",i)}},enableDeepFocus:async(t="extension")=>{const r=e(),i=Rn.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated - cannot enable deep focus");return}if(r.isDeepFocusActive){console.log("🟢 enableDeepFocus ignored – already active for user:",i.uid);return}if(r.activeSessionId){console.log("🟢 enableDeepFocus ignored – session already exists:",r.activeSessionId);return}if(r.recoveryInProgress){console.log("🟢 enableDeepFocus ignored – recovery in progress");return}try{console.log("🧹 Cleaning up any orphaned sessions before creating new session...");const a=await $o.cleanupOrphanedSessions(i.uid);a>0&&console.log(`✅ Cleaned up ${a} orphaned session(s)`)}catch(a){console.warn("⚠️ Failed to cleanup orphaned sessions (continuing anyway):",a)}console.log("🟢 enableDeepFocus called for user:",i.uid,"Current state:",{isDeepFocusActive:r.isDeepFocusActive,extensionConnected:r.isExtensionConnected,activeSessionId:r.activeSessionId});try{let a=null,o=new Date;try{const l=Rn.getState().user;console.log("🔍 User state for session:",l?{uid:l.uid,email:l.email}:"No user"),l!=null&&l.uid?(console.log("📝 Starting Deep Focus session for user:",l.uid),a=await $o.startSession(l.uid,t),o=new Date,console.log("✅ Deep Focus session started:",a),n({activeSessionId:a,activeSessionStartTime:o,activeSessionDuration:0,activeSessionElapsedSeconds:0}),Zae(n,e,a,o)):console.warn("⚠️ No user found, skipping session creation")}catch(l){console.error("❌ Failed to start Deep Focus session:",l)}const s=r.blockedSites.map(l=>({...l,isActive:!0}));n({isDeepFocusActive:!0,currentSessionId:a,blockedSites:s}),bn.isExtensionInstalled()?Xae("enable-focus",async()=>{console.log("📡 Attempting to enable focus mode in extension...");try{await bn.enableFocusMode(),console.log("✅ Extension focus mode enabled");const c=s.filter(u=>u.isActive).map(u=>u.url);if(c.length>0)try{console.log(`📦 Batch blocking ${c.length} sites during enable...`);const u=await bn.blockMultipleSites(c);if(u.success&&u.summary){const{successCount:d,failureCount:h}=u.summary;console.log(`✅ Batch blocking during enable completed: ${d} sites blocked, ${h} failed`)}else console.warn("⚠️ Batch blocking during enable failed, continuing anyway")}catch(u){console.warn("⚠️ Batch blocking during enable failed (continuing anyway):",u)}}catch(l){console.warn("⚠️ Extension communication failed (Deep Focus still enabled locally):",l)}}):console.log("⚠️ Extension not installed, Deep Focus enabled in web app only"),window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:!0,fromExtension:!1}})),console.log("✅ Deep Focus enabled successfully - all sites are now blocked",a?`Session ID: ${a}`:"")}catch(a){throw console.error("❌ Failed to enable Deep Focus:",a),console.error("🔍 Error details:",{name:a instanceof Error?a.name:"Unknown",message:a instanceof Error?a.message:String(a),stack:a instanceof Error?a.stack:"No stack trace"}),a}},disableDeepFocus:async()=>{const t=e(),r=Rn.getState().user;if(!(r!=null&&r.uid)){console.warn("⚠️ User not authenticated - cannot disable deep focus");return}console.log("🔴 disableDeepFocus called for user:",r.uid,"Current state:",{isDeepFocusActive:t.isDeepFocusActive,extensionConnected:t.isExtensionConnected,activeSessionId:t.activeSessionId});try{if(t.activeSessionId)try{await $o.endSession(t.activeSessionId),console.log("✅ Deep Focus session ended:",t.activeSessionId)}catch(a){console.error("❌ Failed to end Deep Focus session:",a)}t.timer&&clearInterval(t.timer),t.secondTimer&&clearInterval(t.secondTimer),n({timer:null,secondTimer:null});const i=t.blockedSites.map(a=>({...a,isActive:!1}));n({isDeepFocusActive:!1,currentSessionId:null,blockedSites:i,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,isSessionPaused:!1,pausedAt:null,totalPausedTime:0}),bn.isExtensionInstalled()&&Xae("disable-focus",async()=>{console.log("📡 Attempting to disable focus mode in extension...");try{await bn.disableFocusMode(),console.log("✅ Extension focus mode disabled");for(const a of i)try{await t.unblockSiteInExtension(a.url)}catch(o){console.warn("⚠️ Failed to unblock site in extension (continuing anyway):",a.url,o)}}catch(a){console.warn("⚠️ Extension communication failed (Deep Focus still disabled locally):",a)}}),window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:!1,fromExtension:!1}})),console.log("✅ Deep Focus disabled successfully - all sites are now unblocked")}catch(i){throw console.error("❌ Failed to disable Deep Focus:",i),console.error("🔍 Error details:",{name:i instanceof Error?i.name:"Unknown",message:i instanceof Error?i.message:String(i),stack:i instanceof Error?i.stack:"No stack trace"}),i}},toggleDeepFocus:async()=>{const t=e();t.isDeepFocusActive?await t.disableDeepFocus():await t.enableDeepFocus()},syncWithExtension:async t=>{try{if(!bn.isExtensionInstalled())return;t?await bn.enableFocusMode():await bn.disableFocusMode()}catch(r){console.error("Failed to sync with extension:",r)}},loadDeepFocusSessions:async(t,r,i)=>{try{console.log("🔍 DeepFocusStore: Loading sessions for userId:",t),console.log("🔍 DeepFocusStore: Date filters:",{startDate:r,endDate:i});const a=await $o.getUserSessions(t,r,i);console.log("📊 DeepFocusStore: Loaded sessions:",a.length,"sessions"),console.log("📊 DeepFocusStore: Session details:",a.map(c=>({id:c.id,status:c.status,duration:c.duration,createdAt:c.createdAt,userId:c.userId})));const o=a.filter(c=>c.status==="completed").length,s=a.filter(c=>c.status==="completed"&&c.duration),l=s.reduce((c,u)=>c+(u.duration||0),0);console.log("📊 DeepFocusStore: Completed sessions count:",o),console.log("📊 DeepFocusStore: Completed with duration:",s.length),console.log("📊 DeepFocusStore: Total time:",l,"minutes"),n({deepFocusSessions:a,totalSessionsCount:o,totalFocusTime:l})}catch(a){console.error("❌ Failed to load Deep Focus sessions:",a)}},subscribeToSessions:t=>{console.log("DeepFocusStore: Subscribing to sessions for userId:",t);const r=$o.subscribeToUserSessions(t,i=>{console.log("DeepFocusStore: Subscription received sessions:",i);const a=i.filter(s=>s.status==="completed").length,o=i.filter(s=>s.status==="completed"&&s.duration).reduce((s,l)=>s+(l.duration||0),0);console.log("DeepFocusStore: Subscription completed count:",a,"Total time:",o),n({deepFocusSessions:i,totalSessionsCount:a,totalFocusTime:o})});n({unsubscribe:r})},unsubscribeFromSessions:()=>{const t=e();t.unsubscribe&&(t.unsubscribe(),n({unsubscribe:null}))},pauseSessionOnInactivity:async t=>{const r=e();if(!(!r.isDeepFocusActive||r.isSessionPaused||!r.autoSessionManagement)){console.log("🛑 Pausing deep focus session due to inactivity:",t,"seconds");try{r.timer&&clearInterval(r.timer),r.secondTimer&&clearInterval(r.secondTimer),n({isSessionPaused:!0,pausedAt:new Date,timer:null,secondTimer:null}),console.log("✅ Deep focus session paused due to inactivity")}catch(i){console.error("❌ Failed to pause deep focus session:",i)}}},resumeSessionOnActivity:async()=>{const t=e();if(!(!t.isDeepFocusActive||!t.isSessionPaused||!t.autoSessionManagement)){console.log("▶️ Resuming deep focus session after activity detected");try{const r=t.pausedAt?Math.floor((Date.now()-t.pausedAt.getTime())/1e3):0,i=t.totalPausedTime+r;let a=null,o=null;t.activeSessionId&&t.activeSessionStartTime&&(o=setInterval(()=>{const s=Math.floor((Date.now()-t.activeSessionStartTime.getTime())/1e3)-e().totalPausedTime;n({activeSessionElapsedSeconds:Math.max(0,s)})},1e3),a=setInterval(async()=>{const s=e().activeSessionDuration+1;n({activeSessionDuration:s}),t.activeSessionId&&(await $o.incrementSessionDuration(t.activeSessionId,1),console.log("⏱️ Deep Focus: +1 minute added to session",t.activeSessionId))},6e4)),n({isSessionPaused:!1,pausedAt:null,totalPausedTime:i,timer:a,secondTimer:o}),console.log("✅ Deep focus session resumed, total paused time:",i,"seconds")}catch(r){console.error("❌ Failed to resume deep focus session:",r)}}},setAutoSessionManagement:t=>{n({autoSessionManagement:t}),console.log("🔧 Auto session management:",t?"enabled":"disabled")},backupTodayData:async()=>{if(!e().isBackingUp)try{n({isBackingUp:!0,backupError:null}),console.log("🔄 Starting backup of today's data...");const{useUserStore:r}=await Fr(async()=>{const{useUserStore:s}=await Promise.resolve().then(()=>Ps);return{useUserStore:s}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated, skipping backup");return}if(!bn.isExtensionInstalled()){console.log("📱 Extension not available, using fallback backup mode");const s=new Date().toISOString().split("T")[0],l={totalTime:0,sitesVisited:0,productivityScore:0,sites:{},version:"1.0.0",source:"fallback"};await jc.backupDayData(i.uid,s,l),n({lastBackupTime:new Date,backupError:"Extension offline - using fallback mode"}),console.log("✅ Fallback backup completed");return}console.log("📡 Getting today's stats from extension...");const a=await Promise.race([bn.getTodayStats(),new Promise((s,l)=>setTimeout(()=>l(new Error("Extension backup timeout")),15e3))]);if(a.success===!1)throw new Error(a.error||"Failed to get extension data");const o=new Date().toISOString().split("T")[0];console.log("💾 Saving backup data to Firebase..."),await jc.backupDayData(i.uid,o,a.data||a),n({lastBackupTime:new Date,backupError:null}),console.log("✅ Successfully backed up today's data")}catch(r){if(console.error("❌ Failed to backup today's data:",r),r instanceof Error&&r.message.includes("timeout")){console.log("🔄 Extension timeout detected, attempting fallback backup...");try{const{useUserStore:i}=await Fr(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>Ps);return{useUserStore:o}},void 0),a=i.getState().user;if(a!=null&&a.uid){const o=new Date().toISOString().split("T")[0],s={totalTime:0,sitesVisited:0,productivityScore:0,sites:{},version:"1.0.0",source:"timeout-fallback"};await jc.backupDayData(a.uid,o,s),n({lastBackupTime:new Date,backupError:"Extension timeout - fallback backup used"}),console.log("✅ Fallback backup after timeout completed");return}}catch(i){console.error("❌ Fallback backup also failed:",i)}}n({backupError:r instanceof Error?r.message:"Backup failed"})}finally{n({isBackingUp:!1})}},performDailyBackup:async()=>{if(!e().isBackingUp)try{n({isBackingUp:!0,backupError:null}),console.log("🔄 Starting daily backup...");const{useUserStore:r}=await Fr(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>Ps);return{useUserStore:a}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated, skipping daily backup");return}await e().backupTodayData(),await jc.cleanupOldData(i.uid,90),n({lastBackupTime:new Date}),console.log("✅ Successfully performed daily backup")}catch(r){console.error("❌ Failed to perform daily backup:",r),n({backupError:r instanceof Error?r.message:"Daily backup failed"})}finally{n({isBackingUp:!1})}},initializeDailyBackup:()=>{const t=async()=>{const{useUserStore:r}=await Fr(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>Ps);return{useUserStore:o}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.log("⏳ Waiting for user authentication before starting backup scheduler..."),setTimeout(t,2e3);return}console.log("✅ User authenticated, starting backup scheduler for:",i.uid),setInterval(()=>{e().backupTodayData()},144e5),(()=>{const o=new Date,s=new Date(o);s.setDate(s.getDate()+1),s.setHours(2,0,0,0);const l=s.getTime()-o.getTime();setTimeout(()=>{e().performDailyBackup(),setInterval(()=>{e().performDailyBackup()},24*60*60*1e3)},l)})(),setTimeout(()=>{e().backupTodayData()},5e3)};t()},restoreFromBackup:async t=>{try{const{useUserStore:r}=await Fr(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>Ps);return{useUserStore:o}},void 0),i=r.getState().user;if(!(i!=null&&i.uid))throw new Error("User not authenticated");const a=await jc.restoreToExtension(i.uid,t);return console.log(`✅ Restored data for ${t}:`,a),a}catch(r){throw console.error(`❌ Failed to restore data for ${t}:`,r),r}},getBackupStatus:async()=>{try{const{useUserStore:t}=await Fr(async()=>{const{useUserStore:i}=await Promise.resolve().then(()=>Ps);return{useUserStore:i}},void 0),r=t.getState().user;return r!=null&&r.uid?await jc.getLastSyncInfo(r.uid):{lastSyncDate:null,totalDays:0}}catch(t){return console.error("❌ Failed to get backup status:",t),{lastSyncDate:null,totalDays:0}}},retryBackup:async()=>{console.log("🔄 Manual backup retry triggered"),bn.getCircuitBreakerStatus().state==="OPEN"&&bn.resetCircuitBreaker(),setTimeout(()=>{e().backupTodayData()},1e3)},getSyncStatus:()=>{const t=e(),r=bn.getCircuitBreakerStatus();return{isBackingUp:t.isBackingUp,lastBackupTime:t.lastBackupTime,backupError:t.backupError,circuitBreaker:r,canRetry:!t.isBackingUp&&r.state!=="OPEN"}},loadHybridTimeRangeData:async(t,r)=>{try{const{useUserStore:i}=await Fr(async()=>{const{useUserStore:l}=await Promise.resolve().then(()=>Ps);return{useUserStore:l}},void 0),a=i.getState().user;if(!(a!=null&&a.uid))throw console.warn("⚠️ User not authenticated - skipping hybrid data load"),new Error("User not authenticated");console.log("🔄 Loading hybrid data for range:",{startDate:t,endDate:r,userId:a.uid});const o=await Wae.getTimeRangeData(a.uid,t,r);if(!o.success)throw new Error("Failed to fetch hybrid data");const s=Wae.convertToWebAppFormat({totalTime:o.aggregated.totalTime,sitesVisited:o.aggregated.sitesVisited,productivityScore:o.aggregated.avgProductivityScore,sites:o.aggregated.sites});return console.log("✅ Hybrid data loaded successfully:",{dateRange:o.aggregated.dateRange,totalSites:Object.keys(o.aggregated.sites).length,totalTime:Math.round(o.aggregated.totalTime/(1e3*60))}),{timeMetrics:s.timeMetrics,siteUsage:s.siteUsage,productivityScore:s.productivityScore,aggregated:o.aggregated,dailyData:o.data}}catch(i){throw console.error("❌ Failed to load hybrid time range data:",i),i}},recordOverrideSession:async(t,r)=>{try{const{useUserStore:i}=await Fr(async()=>{const{useUserStore:l}=await Promise.resolve().then(()=>Ps);return{useUserStore:l}},void 0),a=i.getState().user,o=e();if(!(a!=null&&a.uid)){console.warn("⚠️ User not authenticated - skipping override session recording");return}console.log("🎯 Recording override session:",{domain:t,duration:r,userId:a.uid});const s={id:`temp-${Date.now()}`,userId:a.uid,domain:t,duration:r,deepFocusSessionId:o.activeSessionId||void 0,createdAt:new Date};n(l=>({overrideSessions:[s,...l.overrideSessions]}));try{const l=await ec.createOverrideSession({userId:a.uid,domain:t,duration:r,deepFocusSessionId:o.activeSessionId||void 0});console.log("✅ Override session saved to Firebase:",l),n(c=>({overrideSessions:c.overrideSessions.map(u=>u.id===s.id?{...u,id:l}:u)}))}catch(l){console.warn("⚠️ Firebase save failed, keeping local override:",l)}}catch(i){console.error("Failed to record override session:",i)}},loadOverrideSessions:async(t,r,i)=>{try{if(!t){console.warn("⚠️ No userId provided - skipping override sessions load"),n({overrideSessions:[]});return}const a=await ec.getUserOverrides(t,r,i);n({overrideSessions:a}),console.log("✅ Loaded override sessions:",a.length)}catch(a){console.warn("Could not load override sessions (this is normal if index is still building):",a),n({overrideSessions:[]})}},loadComparisonData:async t=>{try{const{useUserStore:r}=await Fr(async()=>{const{useUserStore:D}=await Promise.resolve().then(()=>Ps);return{useUserStore:D}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated - skipping comparison data load"),n({comparisonData:null,comparisonError:"User not authenticated"});return}if(t.rangeType==="all time"){n({comparisonData:null,comparisonError:null});return}n({isLoadingComparison:!0,comparisonError:null});const a=het(t);if(!a){n({comparisonData:null,isLoadingComparison:!1,comparisonError:"Invalid date range for comparison"});return}console.log("🔍 Loading comparison data:",{current:{start:Ji(t.startDate),end:Ji(t.endDate),type:t.rangeType},comparison:{start:Ji(a.startDate),end:Ji(a.endDate),label:a.label}});const o=Ji(t.startDate),s=Ji(t.endDate),l=await e().loadHybridTimeRangeData(o,s),c=await e().loadWorkSessionsForComparison(i.uid,t.startDate,t.endDate),u=await e().loadDeepFocusSessionsForComparison(i.uid,t.startDate,t.endDate),d=await ec.getUserOverrides(i.uid,t.startDate,t.endDate),h={onScreenTime:l.timeMetrics.onScreenTime,workingTime:c,deepFocusTime:u,overrideTime:d.reduce((D,M)=>D+M.duration,0)},f=Ji(a.startDate),m=Ji(a.endDate),v=await e().loadHybridTimeRangeData(f,m),y=await e().loadWorkSessionsForComparison(i.uid,a.startDate,a.endDate),w=await e().loadDeepFocusSessionsForComparison(i.uid,a.startDate,a.endDate),_=await ec.getUserOverrides(i.uid,a.startDate,a.endDate),S={onScreenTime:v.timeMetrics.onScreenTime,workingTime:y,deepFocusTime:w,overrideTime:_.reduce((D,M)=>D+M.duration,0)},A={onScreenTime:NC(h.onScreenTime,S.onScreenTime),workingTime:NC(h.workingTime,S.workingTime),deepFocusTime:NC(h.deepFocusTime,S.deepFocusTime),overrideTime:NC(h.overrideTime,S.overrideTime)};n({comparisonData:{current:h,previous:S,percentageChanges:A},isLoadingComparison:!1,comparisonError:null}),console.log("✅ Comparison data loaded successfully:",{label:a.label,currentPeriod:{start:o,end:s,metrics:h},previousPeriod:{start:f,end:m,metrics:S},changes:A})}catch(r){console.error("❌ Failed to load comparison data:",r),n({comparisonData:null,isLoadingComparison:!1,comparisonError:r instanceof Error?r.message:"Unknown error"})}},loadWorkSessionsForComparison:async(t,r,i)=>{try{const{useDashboardStore:a}=await Fr(async()=>{const{useDashboardStore:s}=await Promise.resolve().then(()=>iBe);return{useDashboardStore:s}},void 0),{workSessions:o}=a.getState();return o.filter(s=>s.sessionType==="pomodoro"||s.sessionType==="manual").filter(s=>{const l=new Date(s.date);return l>=r&&l<=i}).reduce((s,l)=>s+(l.duration||0),0)}catch(a){return console.warn("Failed to load work sessions for comparison:",a),0}},loadDeepFocusSessionsForComparison:async(t,r,i)=>{try{return(await $o.getUserSessions(t,r,i)).filter(o=>o.status==="completed"&&o.duration).reduce((o,s)=>o+(s.duration||0),0)}catch(a){return console.warn("Failed to load deep focus sessions for comparison:",a),0}}}),{name:get(),partialize:n=>({...n,timer:null,secondTimer:null,isReloading:!1})})),met=Object.freeze(Object.defineProperty({__proto__:null,useDeepFocusStore:Qd},Symbol.toStringTag,{value:"Module"}));let YB=!1,WM=!1;const KB={current:!1},Fx=new Set,YM=new Set,vet=500;let Qae=0;const yet=3,bet=1e3,KM=new Map,l_e=async(n,e,t=yet,r=bet)=>{try{await e(),KM.delete(n)}catch(i){const a=KM.get(n)||0;if(a<t)return console.log(`🔄 Retry attempt ${a+1} for operation: ${n}`),KM.set(n,a+1),await new Promise(o=>setTimeout(o,r)),l_e(n,e,t,r);throw KM.delete(n),i}},c_e=K.createContext(void 0),wet=({children:n})=>{const e=K.useRef(!1),[t,r]=ye.useState(!1),{syncFocusStatus:i,loadFocusStatus:a,isDeepFocusActive:o,enableDeepFocus:s,disableDeepFocus:l,syncCompleteFocusState:c,recordOverrideSession:u,loadOverrideSessions:d}=Qd(),{isInitialized:h,user:f}=Rn();K.useEffect(()=>{if(e.current||YB||WM)return;(async()=>{if(!(!(f!=null&&f.uid)||!h||KB.current)){KB.current=!0,YB=!0,e.current=!0;try{console.log("🚀 CENTRALIZED Deep Focus initialization for session recovery..."),await a(),console.log("✅ Centralized Focus status loaded, checking for active session recovery...");const{deepFocusSessionService:S}=await Fr(async()=>{const{deepFocusSessionService:P}=await Promise.resolve().then(()=>oet);return{deepFocusSessionService:P}},void 0),A=Qd.getState(),C=localStorage.getItem("deep-focus-storage"),D=C?JSON.parse(C):null;if((D==null?void 0:D.isDeepFocusActive)&&!A.activeSessionId&&(console.log("📱 New tab detected via context, syncing deep focus state..."),Qd.setState({isDeepFocusActive:D.isDeepFocusActive,activeSessionId:D.activeSessionId,activeSessionStartTime:new Date(D.activeSessionStartTime),activeSessionDuration:D.activeSessionDuration,activeSessionElapsedSeconds:D.activeSessionElapsedSeconds,isSessionPaused:D.isSessionPaused,pausedAt:D.pausedAt?new Date(D.pausedAt):null,totalPausedTime:D.totalPausedTime})),A.isDeepFocusActive&&!A.activeSessionId&&!A.recoveryInProgress){console.log("🔄 Context: Deep Focus active but no session - cleaning up and resetting state...");const P=await S.cleanupOrphanedSessions(f.uid);P>0&&console.log(`✅ Context: Cleaned up ${P} orphaned session(s)`),Qd.setState({isDeepFocusActive:!1,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,timer:null,secondTimer:null,hasRecoveredSession:!1,recoveryInProgress:!1}),console.log("✅ Context: Reset deep focus state to inactive (no active session)")}WM=!0,r(!0)}catch(S){console.error("❌ Error during centralized deep focus initialization:",S)}finally{YB=!1,KB.current=!1}}})()},[f==null?void 0:f.uid,h,a]),K.useEffect(()=>{var S,A,C;if(!h||!(f!=null&&f.uid))return;const _=async D=>{var M,P;try{const O=D.data||D;if((O==null?void 0:O.type)==="RECORD_OVERRIDE_SESSION"&&((M=O==null?void 0:O.source)!=null&&M.includes("make10000hours")||(P=O==null?void 0:O.source)!=null&&P.includes("extension"))){console.log("🌐 GLOBAL: RECORD_OVERRIDE_SESSION received in DeepFocusContext:",O),console.log("🌐 GLOBAL: Current page:",window.location.pathname),console.log("🌐 GLOBAL: User state:",{user:f==null?void 0:f.uid,isLoggedIn:!!f});const{domain:j,duration:L,userId:B,timestamp:$,extensionTimestamp:Y}=O.payload||{},q=`${j}_${L}_${Y||$||Date.now()}`;if(Fx.has(q)){console.log("🔄 GLOBAL: Skipping duplicate override session message:",q);return}if(Fx.add(q),Fx.size>100){const te=Array.from(Fx).slice(-50);Fx.clear(),te.forEach(re=>Fx.add(re))}const W=B||(f==null?void 0:f.uid);if(console.log("🌐 GLOBAL: Override session data validation:",{domain:j,duration:L,incomingUserId:B,currentUserUid:f==null?void 0:f.uid,effectiveUserId:W,timestamp:$,hasUser:!!f}),!W){console.error("❌ GLOBAL: No user ID available for override session");return}if(!j||!L){console.error("❌ GLOBAL: Missing required override session data:",{domain:j,duration:L});return}try{console.log("📝 GLOBAL: Recording override session from extension:",j,L,"for user:",W),await u(j,L),console.log("✅ GLOBAL: Override session recorded successfully"),window.dispatchEvent(new CustomEvent("overrideSessionRecorded",{detail:{domain:j,duration:L,userId:W,timestamp:Date.now()}}))}catch(X){console.error("❌ GLOBAL: Failed to record override session:",X),console.error("🔍 GLOBAL: Override session error details:",{name:X==null?void 0:X.name,message:X==null?void 0:X.message,stack:X==null?void 0:X.stack,domain:j,duration:L,userId:W})}}}catch(O){console.error("Error in global extension message handler:",O)}};console.log("🌐 GLOBAL: Setting up override session recording listeners"),window.addEventListener("message",_);try{typeof window.chrome<"u"&&((C=(A=(S=window.chrome)==null?void 0:S.runtime)==null?void 0:A.onMessage)!=null&&C.addListener)&&window.chrome.runtime.onMessage.addListener(_)}catch(D){console.warn("Could not set up Chrome extension listener in context:",D)}return()=>{var D,M,P;try{console.log("🌐 GLOBAL: Cleaning up override session recording listeners"),window.removeEventListener("message",_),typeof window.chrome<"u"&&((P=(M=(D=window.chrome)==null?void 0:D.runtime)==null?void 0:M.onMessage)!=null&&P.removeListener)&&window.chrome.runtime.onMessage.removeListener(_)}catch(O){console.warn("Error cleaning up global extension listeners:",O)}}},[f==null?void 0:f.uid,h,u]),K.useEffect(()=>{if(!h||!(f!=null&&f.uid)){console.log("🔄 Waiting for user initialization before setting up message handler...");return}const _=async S=>{var C,D,M;const A=Date.now();try{if(((C=S.data)==null?void 0:C.type)==="EXTENSION_FOCUS_STATE_CHANGED"||((D=S.data)==null?void 0:D.type)==="FOCUS_STATE_CHANGED"){if(A-Qae<vet){console.log("🔄 Skipping message due to debounce");return}Qae=A;const P=`${S.data.extensionId}_${(M=S.data.payload)==null?void 0:M.isActive}_${A}`;if(YM.has(P)){console.log("🔄 Skipping duplicate message:",P);return}YM.add(P);const O=5*60*1e3;YM.forEach(B=>{const[,,$]=B.split("_");A-parseInt($)>O&&YM.delete(B)}),console.log("🔄 Processing focus state change:",S.data);const{isActive:j,blockedSites:L=[]}=S.data.payload;await l_e(`sync_focus_${P}`,async()=>{await c(j,L),window.dispatchEvent(new CustomEvent("focusStateHandled",{detail:{isActive:j,timestamp:A}}))})}}catch(P){console.error("Error handling extension message:",P),window.dispatchEvent(new CustomEvent("focusStateError",{detail:{error:P,timestamp:A}}))}};return window.addEventListener("message",_),()=>{window.removeEventListener("message",_)}},[h,f==null?void 0:f.uid,c]),K.useEffect(()=>{if(!h||!WM)return;let _=0;const S=500,A=O=>{const j=Date.now();if(j-_<S)return;_=j;const{isActive:L}=O.detail;console.log("🔄 Context: Internal focus change event:",L),O.detail.fromExtension||i(L)},C=O=>{console.log("🔄 Context: Extension focus state handled centrally:",O.detail)};let D=document.hidden,M=0;const P=()=>{const O=Date.now();O-M<2e3||(M=O,!document.hidden&&D&&(console.log("📖 Context: Page became visible - checking for extension state updates"),setTimeout(()=>{a()},1e3)),D=document.hidden)};return window.addEventListener("deepFocusChanged",A),window.addEventListener("extensionFocusHandled",C),document.addEventListener("visibilitychange",P),()=>{window.removeEventListener("deepFocusChanged",A),window.removeEventListener("extensionFocusHandled",C),document.removeEventListener("visibilitychange",P)}},[i,a,h,WM,c]);const m=K.useCallback(async _=>{const S=Qd.getState();if(!(f!=null&&f.uid)){console.warn("⚠️ Context: User not authenticated - cannot enable deep focus");return}if(S.isDeepFocusActive){console.log("🟢 Context: enableDeepFocus ignored - already active");return}if(S.activeSessionId){console.log("🟢 Context: enableDeepFocus ignored - session already exists:",S.activeSessionId);return}if(S.recoveryInProgress){console.log("🟢 Context: enableDeepFocus ignored - recovery in progress");return}console.log("🟢 Context: enableDeepFocus called for user:",f.uid);try{await s(_)}catch(A){throw console.error("❌ Context: Failed to enable deep focus:",A),A}},[f==null?void 0:f.uid,s]),v=K.useCallback(async()=>{if(!(f!=null&&f.uid)){console.warn("⚠️ Context: User not authenticated - cannot disable deep focus");return}console.log("🔴 Context: disableDeepFocus called for user:",f.uid);try{await l()}catch(_){throw console.error("❌ Context: Failed to disable deep focus:",_),_}},[f==null?void 0:f.uid,l]),y=K.useCallback(async()=>{o?await v():await m()},[o,m,v]),w={isDeepFocusActive:o,enableDeepFocus:m,disableDeepFocus:v,toggleDeepFocus:y,isInitialized:t};return E.jsx(c_e.Provider,{value:w,children:n})},u_e=()=>{const n=K.useContext(c_e);if(n===void 0)throw new Error("useDeepFocusContext must be used within a DeepFocusProvider");return n},Wj=({size:n="medium",className:e="",showLabel:t=!0,labelPosition:r="right",disabled:i=!1,pageTitle:a,showPageTitle:o=!1,pageTitleClassName:s=""})=>{const{isDeepFocusActive:l,enableDeepFocus:c,disableDeepFocus:u}=u_e(),h={small:{width:"w-[80px]",height:"h-[24px]",textSize:"text-xs",padding:"px-2",toggle:"w-4 h-4",togglePos:"left-[calc(100%-18px)]"},medium:{width:"w-[120px]",height:"h-[33px]",textSize:"text-sm",padding:"pl-[10.5px]",toggle:"w-6 h-6",togglePos:"left-[calc(100%-27px)]"},large:{width:"w-[140px]",height:"h-[40px]",textSize:"text-base",padding:"pl-3",toggle:"w-7 h-7",togglePos:"left-[calc(100%-30px)]"}}[n],f=async v=>{if(!i)try{v.target.checked?await c("web"):await u()}catch(y){console.error("Failed to toggle Deep Focus:",y),setTimeout(()=>{const w=v.target;w&&(w.checked=!v.target.checked)},100)}},m=E.jsx(mi,{text:"Toggle Deep Focus Mode (Shift + D)",placement:"bottom",children:E.jsxs("label",{className:`relative inline-flex items-center cursor-pointer group ${i?"cursor-not-allowed opacity-50":""}`,children:[E.jsx("input",{type:"checkbox",id:"deep-focus-toggle",name:"deep-focus-toggle",className:"sr-only peer",checked:l,onChange:f,disabled:i}),E.jsx("div",{className:`${h.width} ${h.height} flex items-center rounded-full relative transform transition-all duration-500 ease-in-out ${l?`bg-gradient-to-r from-[rgba(187,95,90,0.9)] via-[rgba(236,72,153,0.9)] to-[rgba(251,146,60,0.9)] shadow-[0_0_15px_rgba(236,72,153,0.3)] border border-white/20 justify-start ${h.padding}`:"bg-gray-100/80 border-0 justify-end pr-[10.5px]"}`,style:{transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:E.jsx("span",{className:`${h.textSize} font-medium relative z-10 whitespace-nowrap transform transition-all duration-500 ease-in-out ${l?"text-white font-semibold [text-shadow:0_0_12px_rgba(255,255,255,0.5)]":"text-gray-600 font-semibold"}`,style:{transition:"color 0.5s cubic-bezier(0.4, 0, 0.2, 1), font-weight 0.5s cubic-bezier(0.4, 0, 0.2, 1), text-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:l?"Deep Focus":"Focus Off"})}),E.jsx("div",{className:`absolute ${h.toggle} bg-white rounded-full shadow-lg transform transition-all duration-500 ease-in-out ${l?h.togglePos+" shadow-[0_6px_20px_rgba(187,95,90,0.2)]":"left-1.5 shadow-[0_2px_8px_rgba(0,0,0,0.1)]"}`,style:{transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), left 0.5s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1)"}})]})});return o&&a?E.jsxs("div",{className:`flex items-center ${e}`,children:[E.jsx("div",{className:`text-lg font-semibold transform transition-all duration-500 ease-in-out ${l?"bg-gradient-to-r from-[rgb(187,95,90)] via-[rgb(236,72,153)] to-[rgb(251,146,60)] bg-clip-text text-transparent font-bold":"text-text-primary"} ${s}`,style:{transition:"background 0.5s cubic-bezier(0.4, 0, 0.2, 1), color 0.5s cubic-bezier(0.4, 0, 0.2, 1), font-weight 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:a}),E.jsx("div",{className:"ml-4 flex items-center",children:m})]}):t?E.jsxs("div",{className:`flex items-center ${r==="left"?"flex-row-reverse":"flex-row"} ${e}`,children:[m,t&&E.jsx("span",{className:`${h.textSize} font-medium text-text-primary ${r==="left"?"mr-3":"ml-3"}`,children:"Deep Focus Mode"})]}):E.jsx("div",{className:e,children:m})},d_e=({className:n=""})=>{const e=$g(),t=vs(),{toggleFocusMode:r,isLeftSidebarOpen:i,toggleLeftSidebar:a}=tc(),o=()=>{switch(t.pathname){case"/pomodoro":return"Pomodoro Timer";case"/projects":return"Task Management";case"/dashboard":return"Productivity Insights";case"/calendar":return"Calendar";case"/deep-focus":return"Deep Focus";case"/dashboard/settings":return"Settings";default:return"Make 10000 Hours"}};return E.jsxs("div",{className:`h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-all duration-500 relative ${n}`,children:[E.jsxs("div",{className:"flex items-center",children:[!i&&E.jsx("button",{onClick:a,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:E.jsx(bt,{name:"menu-line",size:20})})}),E.jsx(Wj,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:o()})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx(mi,{text:"Pomodoro Timer",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/pomodoro"?void 0:()=>e("/pomodoro"),"aria-label":t.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"timer-line",size:20})})})}),E.jsx(mi,{text:"Task Management",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/projects"?void 0:()=>e("/projects"),"aria-label":t.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"task-line",size:20})})})}),E.jsx(mi,{text:"Productivity Insights",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/dashboard"?void 0:()=>e("/dashboard"),"aria-label":t.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"dashboard-line",size:20})})})}),E.jsx(mi,{text:"Calendar",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/calendar"?void 0:()=>e("/calendar"),"aria-label":t.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"calendar-line",size:20})})})}),E.jsx(mi,{text:"Deep Focus",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/deep-focus"?void 0:()=>e("/deep-focus"),"aria-label":t.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"brain-line",size:20})})})})]})]})},_et=({className:n=""})=>{const{isFocusMode:e,toggleFocusMode:t}=tc(),r=pi(c=>c.currentTime),i=pi(c=>c.currentTask),{tasks:a,projects:o}=rn(),s=i&&i.projectId?o.find(c=>c.id===i.projectId):null,l=gG(r);return e?E.jsxs("div",{className:`fixed inset-0 bg-black z-50 ${n}`,children:[E.jsx("button",{id:"exit-focus-mode-btn",name:"exit-focus-mode",className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all",onClick:t,"aria-label":"Exit Focus Mode",children:E.jsx("div",{className:"w-6 h-6 flex items-center justify-center text-white",children:E.jsx("i",{className:"ri-fullscreen-exit-line"})})}),E.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[E.jsx("div",{className:"text-[120px] font-bold text-white mb-8 font-mono tracking-wider",children:l}),E.jsx("h2",{className:"text-2xl text-white/90 mb-4",children:i?i.title:"No task selected"}),E.jsxs("div",{className:"flex items-center gap-8 text-lg text-white/70",children:[E.jsx("div",{children:s?`Project: ${s.name}`:"No project selected"}),E.jsx("div",{children:i?`${i.timeSpent}/${i.timeEstimated}m`:"--/--m"})]})]})]}):null},h_e=6048e5,xet=864e5,Jae=Symbol.for("constructDateFrom");function rc(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&Jae in n?n[Jae](e):n instanceof Date?new n.constructor(e):new Date(e)}function Ys(n,e){return rc(e||n,n)}function AW(n,e,t){const r=Ys(n,t==null?void 0:t.in);return isNaN(e)?rc(n,NaN):(e&&r.setDate(r.getDate()+e),r)}function CW(n,e,t){const r=Ys(n,t==null?void 0:t.in);if(isNaN(e))return rc(n,NaN);if(!e)return r;const i=r.getDate(),a=rc(n,r.getTime());a.setMonth(r.getMonth()+e+1,0);const o=a.getDate();return i>=o?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let Tet={};function n2(){return Tet}function Ig(n,e){var s,l,c,u;const t=n2(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Ys(n,e==null?void 0:e.in),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function EN(n,e){return Ig(n,{...e,weekStartsOn:1})}function f_e(n,e){const t=Ys(n,e==null?void 0:e.in),r=t.getFullYear(),i=rc(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=EN(i),o=rc(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=EN(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function eoe(n){const e=Ys(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Yj(n,...e){const t=rc.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function AN(n,e){const t=Ys(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function Eet(n,e,t){const[r,i]=Yj(t==null?void 0:t.in,n,e),a=AN(r),o=AN(i),s=+a-eoe(a),l=+o-eoe(o);return Math.round((s-l)/xet)}function Aet(n,e){const t=f_e(n,e),r=rc(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),EN(r)}function Cet(n,e,t){return AW(n,e*7,t)}function Det(n){return rc(n,Date.now())}function go(n,e,t){const[r,i]=Yj(t==null?void 0:t.in,n,e);return+AN(r)==+AN(i)}function ket(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Iet(n){return!(!ket(n)&&typeof n!="number"||isNaN(+Ys(n)))}function p_e(n,e){const t=Ys(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Met(n,e){const[t,r]=Yj(n,e.start,e.end);return{start:t,end:r}}function CN(n,e){const{start:t,end:r}=Met(e==null?void 0:e.in,n);let i=+t>+r;const a=i?+t:+r,o=i?r:t;o.setHours(0,0,0,0);let s=1;const l=[];for(;+o<=a;)l.push(rc(t,o)),o.setDate(o.getDate()+s),o.setHours(0,0,0,0);return i?l.reverse():l}function g_e(n,e){const t=Ys(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Pet(n,e){const t=Ys(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function DW(n,e){var s,l,c,u;const t=n2(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Ys(n,e==null?void 0:e.in),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const Oet={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ret=(n,e,t)=>{let r;const i=Oet[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function XB(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Net={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Let={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jet={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fet={date:XB({formats:Net,defaultWidth:"full"}),time:XB({formats:Let,defaultWidth:"full"}),dateTime:XB({formats:jet,defaultWidth:"full"})},$et={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Bet=(n,e,t,r)=>$et[n];function VA(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,s=t!=null&&t.width?String(t.width):o;i=n.formattingValues[s]||n.formattingValues[o]}else{const o=n.defaultWidth,s=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[s]||n.values[o]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const Uet={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Vet={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zet={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Het={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qet={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Get={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wet=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Yet={ordinalNumber:Wet,era:VA({values:Uet,defaultWidth:"wide"}),quarter:VA({values:Vet,defaultWidth:"wide",argumentCallback:n=>n-1}),month:VA({values:zet,defaultWidth:"wide"}),day:VA({values:Het,defaultWidth:"wide"}),dayPeriod:VA({values:qet,defaultWidth:"wide",formattingValues:Get,defaultFormattingWidth:"wide"})};function zA(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],s=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(s)?Xet(s,d=>d.test(o)):Ket(s,d=>d.test(o));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Ket(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Xet(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Zet(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let o=n.valueCallback?n.valueCallback(a[0]):a[0];o=t.valueCallback?t.valueCallback(o):o;const s=e.slice(i.length);return{value:o,rest:s}}}const Qet=/^(\d+)(th|st|nd|rd)?/i,Jet=/\d+/i,ett={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ttt={any:[/^b/i,/^(a|c)/i]},ntt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rtt={any:[/1/i,/2/i,/3/i,/4/i]},itt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},att={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ott={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},stt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ltt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ctt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},utt={ordinalNumber:Zet({matchPattern:Qet,parsePattern:Jet,valueCallback:n=>parseInt(n,10)}),era:zA({matchPatterns:ett,defaultMatchWidth:"wide",parsePatterns:ttt,defaultParseWidth:"any"}),quarter:zA({matchPatterns:ntt,defaultMatchWidth:"wide",parsePatterns:rtt,defaultParseWidth:"any",valueCallback:n=>n+1}),month:zA({matchPatterns:itt,defaultMatchWidth:"wide",parsePatterns:att,defaultParseWidth:"any"}),day:zA({matchPatterns:ott,defaultMatchWidth:"wide",parsePatterns:stt,defaultParseWidth:"any"}),dayPeriod:zA({matchPatterns:ltt,defaultMatchWidth:"any",parsePatterns:ctt,defaultParseWidth:"any"})},dtt={code:"en-US",formatDistance:Ret,formatLong:Fet,formatRelative:Bet,localize:Yet,match:utt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function htt(n,e){const t=Ys(n,e==null?void 0:e.in);return Eet(t,Pet(t))+1}function ftt(n,e){const t=Ys(n,e==null?void 0:e.in),r=+EN(t)-+Aet(t);return Math.round(r/h_e)+1}function m_e(n,e){var u,d,h,f;const t=Ys(n,e==null?void 0:e.in),r=t.getFullYear(),i=n2(),a=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((f=(h=i.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=rc((e==null?void 0:e.in)||n,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const s=Ig(o,e),l=rc((e==null?void 0:e.in)||n,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const c=Ig(l,e);return+t>=+s?r+1:+t>=+c?r:r-1}function ptt(n,e){var s,l,c,u;const t=n2(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=m_e(n,e),a=rc((e==null?void 0:e.in)||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Ig(a,e)}function gtt(n,e){const t=Ys(n,e==null?void 0:e.in),r=+Ig(t,e)-+ptt(t,e);return Math.round(r/h_e)+1}function fi(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const uv={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return fi(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):fi(t+1,2)},d(n,e){return fi(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return fi(n.getHours()%12||12,e.length)},H(n,e){return fi(n.getHours(),e.length)},m(n,e){return fi(n.getMinutes(),e.length)},s(n,e){return fi(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return fi(i,e.length)}},$x={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},toe={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return uv.y(n,e)},Y:function(n,e,t,r){const i=m_e(n,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return fi(o,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):fi(a,e.length)},R:function(n,e){const t=f_e(n);return fi(t,e.length)},u:function(n,e){const t=n.getFullYear();return fi(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return fi(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return fi(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return uv.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return fi(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=gtt(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):fi(i,e.length)},I:function(n,e,t){const r=ftt(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):fi(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):uv.d(n,e)},D:function(n,e,t){const r=htt(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):fi(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return fi(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return fi(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return fi(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=$x.noon:r===0?i=$x.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=$x.evening:r>=12?i=$x.afternoon:r>=4?i=$x.morning:i=$x.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return uv.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):uv.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):fi(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):fi(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):uv.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):uv.s(n,e)},S:function(n,e){return uv.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return roe(r);case"XXXX":case"XX":return Db(r);case"XXXXX":case"XXX":default:return Db(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return roe(r);case"xxxx":case"xx":return Db(r);case"xxxxx":case"xxx":default:return Db(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+noe(r,":");case"OOOO":default:return"GMT"+Db(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+noe(r,":");case"zzzz":default:return"GMT"+Db(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return fi(r,e.length)},T:function(n,e,t){return fi(+n,e.length)}};function noe(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+fi(a,2)}function roe(n,e){return n%60===0?(n>0?"-":"+")+fi(Math.abs(n)/60,2):Db(n,e)}function Db(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=fi(Math.trunc(r/60),2),a=fi(r%60,2);return t+i+e+a}const ioe=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},v_e=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},mtt=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return ioe(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",ioe(r,e)).replace("{{time}}",v_e(i,e))},vtt={p:v_e,P:mtt},ytt=/^D+$/,btt=/^Y+$/,wtt=["D","DD","YY","YYYY"];function _tt(n){return ytt.test(n)}function xtt(n){return btt.test(n)}function Stt(n,e,t){const r=Ttt(n,e,t);if(console.warn(r),wtt.includes(n))throw new RangeError(r)}function Ttt(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ett=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Att=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ctt=/^'([^]*?)'?$/,Dtt=/''/g,ktt=/[a-zA-Z]/;function An(n,e,t){var u,d,h,f;const r=n2(),i=r.locale??dtt,a=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,o=r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,s=Ys(n,t==null?void 0:t.in);if(!Iet(s))throw new RangeError("Invalid time value");let l=e.match(Att).map(m=>{const v=m[0];if(v==="p"||v==="P"){const y=vtt[v];return y(m,i.formatLong)}return m}).join("").match(Ett).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const v=m[0];if(v==="'")return{isToken:!1,value:Itt(m)};if(toe[v])return{isToken:!0,value:m};if(v.match(ktt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const c={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const v=m.value;(xtt(v)||_tt(v))&&Stt(v,e,String(n));const y=toe[v[0]];return y(s,v,i.localize,c)}).join("")}function Itt(n){const e=n.match(Ctt);return e?e[1].replace(Dtt,"'"):n}function Mtt(n,e,t){const[r,i]=Yj(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function fw(n,e){return go(rc(n,n),Det(n))}function Ptt(n,e,t){return CW(n,-1,t)}const Ott=({isOpen:n,triggerRef:e,contentRef:t,preferredPlacement:r="bottom",offset:i=4,viewportPadding:a=8,modalThreshold:o=200})=>{const[s,l]=K.useState({top:0,left:0,transformOrigin:"top left",placement:"bottom"}),[c,u]=K.useState(!1),d=K.useRef(s),h=K.useCallback(()=>{if(!e.current||!t.current||!n)return;const f=e.current,m=t.current,v=f.getBoundingClientRect(),y=m.getBoundingClientRect(),w={width:window.innerWidth,height:window.innerHeight,scrollX:window.pageXOffset||document.documentElement.scrollLeft,scrollY:window.pageYOffset||document.documentElement.scrollTop},_=v.top,S=w.height-v.bottom;if(v.left,w.width-v.right,y.height>Math.max(_-a,S-a)&&y.height>o){l({top:Math.max(a,(w.height-y.height)/2)+w.scrollY,left:Math.max(a,(w.width-y.width)/2)+w.scrollX,transformOrigin:"center",placement:"modal"});return}let C,D=r,M="top";const P=S>=y.height+a,O=_>=y.height+a;r==="bottom"&&P?(C=v.bottom+i+w.scrollY,D="bottom"):r==="top"&&O?(C=v.top-y.height-i+w.scrollY,D="top",M="bottom"):P?(C=v.bottom+i+w.scrollY,D="bottom"):O?(C=v.top-y.height-i+w.scrollY,D="top",M="bottom"):S>_?(C=Math.min(v.bottom+i+w.scrollY,w.height-y.height-a+w.scrollY),C+y.height>w.height+w.scrollY-a&&(C=w.height+w.scrollY-y.height-4),D="bottom"):(C=Math.max(a+w.scrollY,v.top-y.height-i+w.scrollY),C<w.scrollY+a&&(C=w.scrollY+4),D="top",M="bottom");let j,L="left";j=v.left+w.scrollX,j+y.width>w.width-a&&(j=w.width-y.width-a+w.scrollX,j<=v.right+w.scrollX&&(j=v.right-y.width+w.scrollX,L="right")),j=Math.max(a+w.scrollX,j);const B={top:C,left:j,transformOrigin:`${M} ${L}`,placement:D};d.current=B,l(B),u(!0)},[n,e,t,r,i,a,o,c]);return K.useEffect(()=>{d.current=s},[s]),K.useEffect(()=>{n&&(u(!1),setTimeout(()=>{h()},0))},[n,h]),K.useEffect(()=>{n||u(!1)},[n]),K.useEffect(()=>{if(!n)return;const f=()=>h(),m=()=>{requestAnimationFrame(f)};return window.addEventListener("resize",m),window.addEventListener("scroll",m,!0),window.addEventListener("orientationchange",m),()=>{window.removeEventListener("resize",m),window.removeEventListener("scroll",m,!0),window.removeEventListener("orientationchange",m)}},[n,h,t]),{...s,isReady:c,recalculate:h}},Rtt=({onTimeSelect:n,showTimezone:e=!1,initialTime:t="09:00 - 10:00",is24Hour:r=!0})=>{const[i,a]=K.useState(()=>t.includes(" - ")?t.split(" - ")[0]:t),[o,s]=K.useState(()=>{if(t.includes(" - "))return t.split(" - ")[1];const[h,f]=t.split(":");return`${((parseInt(h)+1)%24).toString().padStart(2,"0")}:${f}`}),l=h=>{a(h),d(h,o)},c=h=>{s(h),d(i,h)},u=K.useRef(""),d=K.useCallback((h,f)=>{const m=`${h} - ${f}`;n&&m!==u.current&&(u.current=m,n(m))},[n]);return K.useEffect(()=>{if(t.includes(" - ")){const[h,f]=t.split(" - ");(h!==i||f!==o)&&(a(h),s(f),d(h,f))}},[t,d,i,o]),E.jsxs("div",{className:"space-y-3 border-t border-border pt-3",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-xs text-text-secondary",children:"Time format"}),E.jsx("span",{className:"text-xs text-text-secondary",children:r?"24 hour":"12 hour"})]}),e&&E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-xs text-text-secondary",children:"Timezone"}),E.jsx("span",{className:"text-xs text-text-secondary",children:Intl.DateTimeFormat().resolvedOptions().timeZone})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Start time"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"time",value:i,onChange:h=>l(h.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-border rounded-md text-xs text-text-primary bg-background-primary focus:outline-none",onFocus:h=>h.target.style.borderColor="#BB5F5A",onBlur:h=>h.target.style.borderColor="var(--border-color)"}),E.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:"ri-time-line text-xs"})})]})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"End time"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{type:"time",value:o,onChange:h=>c(h.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-border rounded-md text-xs text-text-primary bg-background-primary focus:outline-none",onFocus:h=>h.target.style.borderColor="#BB5F5A",onBlur:h=>h.target.style.borderColor="var(--border-color)"}),E.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:"ri-time-line text-xs"})})]})]})]})]})},Ntt=({selectedDate:n,onDateSelect:e,includeTime:t=!1,onTimeSelect:r,onTimeToggle:i,onConfirm:a,onClear:o,onClose:s,className:l="",minDate:c,maxDate:u,initialMonth:d=new Date,showTimezone:h=!1,initialStartTime:f="09:00",initialEndTime:m="10:00",triggerRef:v,isOpen:y=!0})=>{const[w,_]=K.useState(d),[S,A]=K.useState(t),[C,D]=K.useState("00:00 - 00:00"),M=K.useRef(null),P=Ott({isOpen:y,triggerRef:v||{current:null},contentRef:M,preferredPlacement:"bottom",offset:8,viewportPadding:12,modalThreshold:9999}),O=g_e(w),j=p_e(w),L=Ig(O,{weekStartsOn:0}),B=DW(j,{weekStartsOn:0}),$=CN({start:L,end:B});K.useEffect(()=>{A(t)},[t]),K.useEffect(()=>{const le=setTimeout(()=>{P.recalculate()},100);return()=>clearTimeout(le)},[S,P.recalculate]),K.useEffect(()=>{f&&m&&D(`${f} - ${m}`)},[f,m]),K.useEffect(()=>{if(!y||!s)return;const le=be=>{const he=be.target;M.current&&!M.current.contains(he)&&(v!=null&&v.current)&&!v.current.contains(he)&&s()},ee=be=>{be.key==="Escape"&&s()};return document.addEventListener("mousedown",le,!0),document.addEventListener("keydown",ee),()=>{document.removeEventListener("mousedown",le,!0),document.removeEventListener("keydown",ee)}},[y,s,v]);const Y=()=>_(Ptt(w)),q=()=>_(CW(w,1)),W=le=>{e(le),(le.getMonth()!==w.getMonth()||le.getFullYear()!==w.getFullYear())&&_(le)},X=le=>{A(le),i==null||i(le)},te=le=>{D(le),r==null||r(le)},re=()=>{D("00:00 - 00:00"),o==null||o()},z=()=>{a==null||a()};if(!y)return null;const oe=()=>{const le="bg-background-secondary rounded-lg shadow-lg border border-border w-[300px] fixed transition-all duration-200 ease-out z-50",ee=P.isReady?"opacity-100":"opacity-0 pointer-events-none";switch(P.placement){case"top":return`${le} ${ee} animate-slide-up`;case"bottom":default:return`${le} ${ee} animate-slide-down`}};return E.jsx("div",{ref:M,className:`${oe()} ${l}`,style:{top:`${P.top}px`,left:`${P.left}px`,transformOrigin:P.transformOrigin},"data-datepicker":!0,children:E.jsxs("div",{className:"p-3",children:[E.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E.jsx("button",{className:"p-1.5 hover:bg-background-container rounded-full text-text-secondary hover:text-text-primary transition-colors",onClick:Y,type:"button",children:E.jsx("i",{className:"ri-arrow-left-s-line text-base"})}),E.jsx("h3",{className:"text-sm font-medium text-text-primary",children:An(w,"MMMM yyyy")}),E.jsx("button",{className:"p-1.5 hover:bg-background-container rounded-full text-text-secondary hover:text-text-primary transition-colors",onClick:q,type:"button",children:E.jsx("i",{className:"ri-arrow-right-s-line text-base"})})]}),E.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(le=>E.jsx("div",{className:"h-6 flex items-center justify-center text-xs font-medium text-text-secondary",children:le},le))}),E.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3",children:$.map((le,ee)=>{const be=n&&go(le,n),he=fw(le),pe=c&&le<c||u&&le>u,ct=le.getMonth()===w.getMonth();return E.jsx("button",{onClick:()=>!pe&&W(le),disabled:pe,className:`
                    h-7 w-7 flex items-center justify-center text-xs rounded-full transition-colors
                    ${pe?"text-text-secondary opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-background-container"}
                    ${ct?"text-text-primary":"text-text-secondary opacity-60"}
                    ${be?"text-white font-medium":""}
                    ${!be&&he?"text-[#BB5F5A] font-medium":""}
                  `,style:be?{backgroundColor:"#BB5F5A"}:{},children:An(le,"d")},ee)})}),E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-xs text-text-secondary",children:"Include time"}),E.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[E.jsx("input",{type:"checkbox",checked:S,onChange:le=>X(le.target.checked),className:"sr-only"}),E.jsx("div",{className:`relative w-9 h-5 rounded-full transition-colors ${S?"":"bg-background-container"}`,style:S?{backgroundColor:"#BB5F5A"}:{},children:E.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform ${S?"translate-x-4":"translate-x-0"}`})})]})]}),S&&E.jsx(Rtt,{onTimeSelect:te,showTimezone:h,initialTime:C,is24Hour:!0})]}),E.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border",children:[E.jsx("button",{onClick:re,className:"px-3 py-1.5 text-xs text-text-secondary hover:text-text-primary transition-colors",children:"Clear"}),E.jsx("button",{onClick:z,className:"px-4 py-1.5 text-xs text-white rounded-md transition-colors hover:opacity-90",style:{backgroundColor:"#BB5F5A"},children:"Confirm"})]})]})})},Ltt=K.createContext(void 0),jtt=({children:n})=>{const[e,t]=K.useState(new Date),[r,i]=K.useState(null),[a,o]=K.useState(!1),s=K.useCallback(()=>{t(null),i(null),o(!1)},[]),l=K.useCallback(()=>{if(!e)return"";const u=An(e,"MMM dd, yyyy");return!a||!r?u:`${u}, ${r}`},[e,r,a]),c={selectedDate:e,selectedTime:r,setSelectedDate:t,setSelectedTime:i,clearSelection:s,getFormattedDateTime:l,isTimeIncluded:a,setIsTimeIncluded:o};return E.jsx(Ltt.Provider,{value:c,children:n})},sH=["#81B214","#33B679","#C21505","#176B87","#CB8697","#55B7C0","#B66283","#CC9000","#419197","#B02C00","#FFD700","#FF7F50"],y_e=()=>{const n=Math.floor(Math.random()*sH.length);return sH[n]},Ftt=n=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(n);function $tt(n){const e={"linkedin.com":"#0A66C2","facebook.com":"#1877F2","twitter.com":"#1DA1F2","github.com":"#24292F","youtube.com":"#FF0000","instagram.com":"#E4405F","google.com":"#4285F4","microsoft.com":"#00A4EF","apple.com":"#000000","amazon.com":"#FF9900","make10000hours.com":"#FF6B6B","ycombinator.com":"#FF6600","copilot.microsoft.com":"#0078D4","readdy.ai":"#7C3AED","substack.com":"#FF6719","cursor.com":"#000000","news.ycombinator.com":"#FF6600","console.firebase.google.com":"#FFA000","firebase.google.com":"#FFA000","reddit.com":"#FF4500","netflix.com":"#E50914","spotify.com":"#1ED760","twitch.tv":"#9146FF","pinterest.com":"#E60023","discord.com":"#5865F2","slack.com":"#4A154B","zoom.us":"#2D8CFF","notion.so":"#000000","figma.com":"#F24E1E","dribbble.com":"#EA4C89","behance.net":"#1769FF","medium.com":"#00ab6c","dev.to":"#0A0A0A","stackoverflow.com":"#F58025","gitlab.com":"#FC6D26","bitbucket.org":"#0052CC","dropbox.com":"#0061FF","drive.google.com":"#4285F4","onedrive.live.com":"#0078D4","icloud.com":"#007AFF","trello.com":"#0079BF","asana.com":"#273347","monday.com":"#FF3D71","airtable.com":"#18BFFF","canva.com":"#00C4CC","adobe.com":"#FF0000","stripe.com":"#635BFF","paypal.com":"#00457C","shopify.com":"#7AB55C","wordpress.com":"#21759B","squarespace.com":"#000000","wix.com":"#0C6EBD","webflow.com":"#4353FF","vercel.com":"#000000","netlify.com":"#00C7B7","heroku.com":"#430098","aws.amazon.com":"#FF9900","azure.microsoft.com":"#0078D4","cloud.google.com":"#4285F4","digitalocean.com":"#0080FF","linode.com":"#00A95C","vultr.com":"#007BFC"};if(e[n])return e[n];for(const[t,r]of Object.entries(e))if(n.includes(t.split(".")[0]))return r;return null}function b_e(n,e){const t=$tt(n);if(t)return t;if(e)return e;const r=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#2ba8f0"],i=n.split("").reduce((a,o)=>a+o.charCodeAt(0),0);return r[i%r.length]}function w_e(n){try{return n.includes("://")?new URL(n).hostname:n}catch{return n}}const Zv=({task:n,status:e,initialProjectId:t,initialStartTime:r,initialEndTime:i,isAllDay:a,onCancel:o,onSave:s})=>{var wi;const l=rn(ze=>ze.addTask),c=rn(ze=>ze.updateTask),u=rn(ze=>ze.deleteTask),d=rn(ze=>ze.projects),h=rn(ze=>ze.addProject),{user:f}=Rn(),[m,v]=K.useState((n==null?void 0:n.title)||""),[y,w]=K.useState((n==null?void 0:n.projectId)||""),[_,S]=K.useState(((wi=n==null?void 0:n.timeSpent)==null?void 0:wi.toString())||"0"),[A,C]=K.useState(()=>n!=null&&n.timeEstimated?n.timeEstimated.toString():r&&i?x3e(r,i).toString():""),[D,M]=K.useState((n==null?void 0:n.description)||""),[P,O]=K.useState(!1),[j,L]=K.useState(!1),[B,$]=K.useState(!1),[Y,q]=K.useState(!1),[W,X]=K.useState(!1),[te,re]=K.useState(""),[z,oe]=K.useState(()=>{if(n!=null&&n.scheduledDate)return n.scheduledDate;if(r){const ze=r.getFullYear(),rr=String(r.getMonth()+1).padStart(2,"0"),ji=String(r.getDate()).padStart(2,"0");return`${ze}-${rr}-${ji}`}return n?"":new Date().toISOString().split("T")[0]}),[le,ee]=K.useState(!1),[be,he]=K.useState(()=>a===!0?!1:(n==null?void 0:n.includeTime)!==void 0?n.includeTime:!!(r&&i)),[pe,ct]=K.useState(()=>{if(n!=null&&n.scheduledStartTime)return n.scheduledStartTime;if(r){const ze=String(r.getHours()).padStart(2,"0"),rr=String(r.getMinutes()).padStart(2,"0");return`${ze}:${rr}`}return"09:00"}),[Be,Se]=K.useState(()=>{if(n!=null&&n.scheduledEndTime)return n.scheduledEndTime;if(i){const ze=String(i.getHours()).padStart(2,"0"),rr=String(i.getMinutes()).padStart(2,"0");return`${ze}:${rr}`}return"10:00"}),_e=K.useRef(null),me=K.useRef(null),fe=K.useRef(null),Ge=K.useRef(null),Ve=K.useRef(null),nt=K.useRef(null),we=K.useRef(null),rt=K.useRef(null),on=d.find(ze=>ze.id==="no-project"),Mt=()=>n!=null&&n.projectId?n.projectId:t||localStorage.getItem("lastUsedProjectId")||"no-project";K.useEffect(()=>{if(n!=null&&n.projectId||w(Mt()),!on&&f&&!n&&rn.getState().addProject({name:"No Project",color:"#6B7280"}),_e.current){_e.current.focus();const ze=_e.current.value.length;_e.current.setSelectionRange(ze,ze)}},[]),K.useEffect(()=>{W&&fe.current&&fe.current.focus()},[W]);const kn=()=>{if(me.current&&"showPicker"in me.current&&typeof me.current.showPicker=="function")try{me.current.showPicker()}catch{console.log("showPicker not supported or failed")}},nr=ze=>{ze==="create-new"?(X(!0),w(""),re("")):(X(!1),w(ze),re(""),L(!1))},Le=()=>{X(!1),re(""),w(Mt())},Yt=K.useCallback(ze=>{requestAnimationFrame(()=>{ze.style.height="auto",ze.style.height=`${ze.scrollHeight}px`})},[]);K.useEffect(()=>{_e.current&&Yt(_e.current)},[m,Yt]),K.useEffect(()=>{nt.current&&Yt(nt.current)},[D,Yt]);const xn=async()=>{if(O(!1),L(!1),$(!1),q(!1),!m.trim()){O(!0),_e.current&&_e.current.focus();return}if(W&&!te.trim()){L(!0),fe.current&&fe.current.focus();return}const ze=parseInt(_)||0,rr=parseInt(A)||0;if(ze<0){$(!0),Ve.current&&Ve.current.focus();return}if(rr<0){q(!0),Ge.current&&Ge.current.focus();return}if(!f){console.error("No user found");return}let ji=y;if(W&&te.trim())try{const ge=await h({name:te.trim(),color:y_e()});ji=ge,localStorage.setItem("lastUsedProjectId",ge)}catch(ge){console.error("Error creating project:",ge);return}else ji&&ji!=="no-project"&&localStorage.setItem("lastUsedProjectId",ji);const Ln={title:m.trim(),description:D.trim(),projectId:ji||"no-project",userId:f.uid,completed:(n==null?void 0:n.completed)||!1,status:(n==null?void 0:n.status)||e||"pomodoro",timeSpent:parseInt(_)||0,timeEstimated:parseInt(A)||0};if(z&&z.trim()){Ln.scheduledDate=z.trim(),Ln.includeTime=be,be&&pe&&Be&&(Ln.scheduledStartTime=pe,Ln.scheduledEndTime=Be);const ge=new Date(z.trim());go(ge,new Date)&&(n==null?void 0:n.status)==="todo"&&(Ln.status="pomodoro")}const Fi=(n==null?void 0:n.timeSpent)||0,Co=parseInt(_)||0,ae=n&&Co!==Fi,ce=Co-Fi;if(n){if(c(n.id,Ln),ae&&ce!==0)try{await vo.upsertWorkSession({userId:f.uid,taskId:n.id,projectId:ji||"no-project",date:kO()},ce,"manual")}catch(ge){console.error("Failed to create work session for manual edit:",ge)}}else{console.log("Creating new task with data:",Ln);try{console.log("About to call addTask...");const ge=await l(Ln);console.log("Task created successfully with ID:",ge)}catch(ge){console.error("Error creating task:",ge)}}console.log("About to call callback - onSave available:",!!s),s?(console.log("Calling onSave callback"),s()):(console.log("Calling onCancel callback"),o())},Ut=()=>{n&&window.confirm("Are you sure you want to delete this task? This action cannot be undone.")&&(u(n.id),o())},Ae=()=>{if(n){const ze=n.status==="pomodoro"?"todo":"pomodoro";c(n.id,{...n,status:ze,completed:!1,hideFromPomodoro:ze==="pomodoro"?!1:n.hideFromPomodoro}),o()}},je=K.useCallback(()=>{ee(!le)},[le]),tt=K.useCallback(ze=>{const rr=ze.getFullYear(),ji=String(ze.getMonth()+1).padStart(2,"0"),Ln=String(ze.getDate()).padStart(2,"0");oe(`${rr}-${ji}-${Ln}`)},[]),Et=K.useCallback(ze=>{const[rr,ji]=ze.split(" - ");ct(rr),Se(ji)},[]),pt=K.useCallback(ze=>{he(ze)},[]),Rr=()=>{if(W)return"New Project";const ze=d.find(rr=>rr.id===y);return(ze==null?void 0:ze.name)||"Project"},vn=(ze,rr)=>{if(ze.key==="Enter"&&!ze.shiftKey){if(ze.preventDefault(),n){xn();return}console.log("handleKeyDown called, nextRef:",rr===nt?"descriptionRef":rr===me?"projectSelectRef":"other"),rr.current&&setTimeout(()=>{rr.current&&(rr.current.focus(),console.log("Focused on:",rr.current.tagName),rr===me&&setTimeout(()=>kn(),50))},0)}},Ur=ze=>{if(ze.key==="Enter"&&!ze.shiftKey){if(ze.preventDefault(),n){xn();return}me.current&&(me.current.focus(),setTimeout(()=>kn(),50))}},Li=ze=>{ze.key==="Enter"&&!ze.shiftKey&&(ze.preventDefault(),xn())},un=ze=>{ze.key==="Enter"&&!ze.shiftKey&&(ze.preventDefault(),xn())},dr=ze=>{if(ze.key==="Enter"&&!ze.shiftKey){if(ze.preventDefault(),n){xn();return}Ge.current&&Ge.current.focus()}};return E.jsx(jtt,{children:E.jsx("div",{ref:we,className:"task-card p-4 bg-background-secondary border border-border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 animate-fade-in relative",style:{zIndex:le?1e3:"auto"},children:E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("textarea",{autoFocus:!0,ref:_e,id:"task-title",name:"title",className:`w-full text-lg font-medium text-text-primary px-0 py-0.5 bg-transparent focus:outline-none border-none resize-none overflow-hidden ${P?"ring-2 ring-red-200":""}`,placeholder:"Task name",value:m,onChange:ze=>{v(ze.target.value),O(!1);const rr=ze.target;Yt(rr)},onKeyDown:ze=>vn(ze,nt),rows:1,style:{minHeight:"1.75rem"}}),E.jsx("textarea",{ref:nt,id:"task-description",name:"description",className:"w-full text-sm text-text-secondary px-0 py-1 bg-transparent border-none focus:outline-none resize-none",placeholder:"Description",value:D,onChange:ze=>{M(ze.target.value),Yt(ze.target)},onKeyDown:Ur,style:{height:"auto",minHeight:"1.5rem",marginBottom:"0.5rem"},rows:1}),E.jsx("div",{className:"flex flex-wrap gap-3 mb-2",children:E.jsxs("div",{className:"flex flex-wrap gap-2 min-w-0",children:[E.jsx("div",{className:"relative",children:W?E.jsxs("div",{className:"flex items-center gap-1.5",children:[E.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary",children:[E.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center",children:E.jsx(bt,{name:"folder-line",className:"w-3.5 h-3.5"})}),E.jsx("input",{ref:fe,type:"text",id:"new-project-name",name:"newProjectName",className:`bg-transparent border-none focus:outline-none p-0 text-xs ${j?"ring-2 ring-red-200":""}`,placeholder:"Enter project name",value:te,onChange:ze=>{re(ze.target.value),L(!1)},onKeyDown:ze=>vn(ze,Ge)})]}),E.jsx("button",{className:"p-1 rounded hover:bg-background-primary transition-colors duration-200",onClick:Le,type:"button",children:E.jsx(bt,{name:"close-line",className:"w-3.5 h-3.5 text-text-secondary"})})]}):E.jsxs(E.Fragment,{children:[E.jsxs("select",{ref:me,id:"task-project",name:"projectId",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",value:y,onChange:ze=>nr(ze.target.value),onKeyDown:dr,children:[E.jsx("option",{value:"no-project",children:"No Project"}),E.jsx("option",{value:"create-new",children:"Create new project"}),d.filter(ze=>ze.id!=="no-project").map(ze=>E.jsx("option",{value:ze.id,children:ze.name},ze.id))]}),E.jsxs("button",{type:"button",className:`flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary hover:bg-background-primary min-w-0 ${j?"ring-2 ring-red-200":""}`,onClick:kn,children:[E.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center flex-shrink-0",children:E.jsx(bt,{name:"folder-line",className:"w-3.5 h-3.5"})}),E.jsx("span",{className:"truncate max-w-[8rem]",children:Rr()}),E.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center text-text-secondary flex-shrink-0",children:E.jsx(bt,{name:"arrow-down-s-line",className:"w-3.5 h-3.5"})})]})]})}),E.jsxs("div",{className:"flex flex-col",children:[E.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary flex-shrink-0 ${B||Y?"border-red-500":""}`,children:[E.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center",children:E.jsx(bt,{name:"time-line",className:"w-3.5 h-3.5"})}),n&&E.jsxs(E.Fragment,{children:[E.jsx("input",{ref:Ve,type:"number",id:"time-spent",name:"timeSpent",className:"w-7 text-center bg-transparent border-none focus:outline-none p-0 text-xs",placeholder:"0",min:"0",value:_,onChange:ze=>{S(ze.target.value),$(!1)},onKeyDown:Li}),E.jsx("span",{className:"text-text-secondary",children:"/"})]}),!n&&E.jsx("span",{className:"whitespace-nowrap",children:"Est."}),E.jsx("input",{ref:Ge,type:"number",id:"time-estimated",name:"timeEstimated",className:"w-7 text-center bg-transparent border-none focus:outline-none p-0 text-xs",placeholder:"0",min:"0",value:A,onChange:ze=>{C(ze.target.value),q(!1)},onKeyDown:un}),E.jsx("span",{className:"text-text-secondary whitespace-nowrap",children:"m"})]}),(B||Y)&&E.jsx("div",{className:"text-xs text-red-500 mt-1 px-2.5",children:"Time must be positive!"})]}),E.jsxs("div",{className:"relative",children:[E.jsxs("button",{ref:rt,id:"datePickerBtn",className:"flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary hover:bg-background-primary min-w-0 flex-shrink-0",onClick:je,children:[E.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:E.jsx("i",{className:"ri-calendar-line"})}),E.jsx("span",{className:"whitespace-nowrap",children:z?An(new Date(z),"MMM dd, yyyy")+(be?`, ${pe} - ${Be}`:""):"Add to calendar"})]}),le&&$2e.createPortal(E.jsx(Ntt,{selectedDate:z?new Date(z):void 0,onDateSelect:tt,onTimeSelect:Et,onTimeToggle:pt,onConfirm:()=>ee(!1),onClose:()=>ee(!1),onClear:()=>{oe(""),ct("09:00"),Se("10:00"),he(!1)},includeTime:be,showTimezone:!0,initialStartTime:pe,initialEndTime:Be,triggerRef:rt,isOpen:le}),document.body)]})]})}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"flex items-center gap-6",children:n&&E.jsxs(E.Fragment,{children:[E.jsx("button",{className:"text-[#FF4D4F] hover:text-red-600 text-sm font-medium",onClick:Ut,children:"Delete"}),E.jsx("button",{className:"text-[#4096FF] hover:text-blue-600 text-sm font-medium",onClick:Ae,children:n.status==="pomodoro"?"Work later":"Add to Pomodoro"})]})}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("button",{className:"w-10 h-10 rounded-full hover:bg-background-primary flex items-center justify-center transition-colors duration-200",onClick:o,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx(bt,{name:"close-line",className:"w-5 h-5"})})}),E.jsx("button",{className:"w-10 h-10 rounded-full bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/40 flex items-center justify-center transition-colors duration-200",onClick:xn,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-green-600 dark:text-green-400",children:E.jsx(bt,{name:"check-line",className:"w-5 h-5"})})})]})]})]})},(n==null?void 0:n.id)||"new-task")})},Bk=({id:n,checked:e,onChange:t,disabled:r=!1,className:i=""})=>E.jsx("label",{className:`relative inline-flex items-center cursor-pointer ${r?"cursor-not-allowed":""} ${i}`,children:E.jsx("input",{id:n,type:"checkbox",checked:e,onChange:a=>t(a.target.checked),disabled:r,className:"custom-checkbox"})}),Btt=({task:n,project:e,onEdit:t,className:r=""})=>{const[i,a]=K.useState(!1),o=vs(),{toggleTaskCompletion:s}=rn(),l=pi(w=>w.currentTask),c=pi(w=>w.setCurrentTask),u=(l==null?void 0:l.id)===n.id,d=o.pathname==="/pomodoro"||o.pathname==="/",h=()=>E.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:e.color}}),f=w=>{w.target instanceof HTMLElement&&(w.target.closest('input[type="checkbox"]')||w.target.closest(".edit-task-btn")||w.target.closest(".expand-button"))||n.completed||c(n)},m=async()=>{const w=d?"pomodoro":"default";console.log("TaskItem completion:",{taskId:n.id,taskTitle:n.title,currentPath:o.pathname,isPomodoroPage:d,context:w,isCurrentlyActiveTask:u});const _=await s(n.id,w);w==="pomodoro"&&_?console.log("Next task selected:",_.title):w==="pomodoro"&&!_&&console.log("No next task available")},v=w=>{w.stopPropagation(),t(n.id)},y=w=>{w.stopPropagation(),a(!i)};return E.jsxs("div",{className:`task-card flex items-start p-3 bg-task-todo-bg border 
      ${u?"border-primary":"border-task-todo-border"} 
      ${n.completed?"opacity-70 text-text-secondary":""}
      rounded-md hover:shadow-sm cursor-pointer ${r}`,onClick:f,style:{borderWidth:u?"2px":"1px"},"data-task-id":n.id,"data-status":n.status,children:[E.jsx("div",{className:"mr-3 mt-0.5",children:E.jsx(Bk,{id:`task-checkbox-${n.id}`,checked:n.completed,onChange:m})}),E.jsx("div",{className:"flex-1 min-w-0 text-left",children:E.jsxs("div",{className:"flex items-start justify-between",children:[E.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[E.jsx("h4",{className:`text-sm font-medium text-left whitespace-pre-wrap break-words
              ${n.completed?"text-text-secondary line-through":"text-text-primary"}`,children:n.title}),E.jsxs("div",{className:"flex items-center mt-0.5 text-xs text-left",children:[E.jsxs("div",{className:"flex items-center",children:[h(),E.jsx("span",{className:`${n.completed,"text-text-secondary"}`,children:e.name})]}),E.jsx("span",{className:"mx-2 text-border",children:"•"}),E.jsxs("span",{className:`flex items-center ${n.completed,"text-text-secondary"}`,children:[E.jsx("i",{className:"ri-time-line mr-1"}),n.timeSpent,"/",n.timeEstimated,"m"]})]}),i&&n.description&&n.description.trim()&&E.jsx("div",{className:"task-description mt-2",children:E.jsx("p",{className:"text-sm text-text-secondary mb-2 whitespace-pre-wrap break-words",children:n.description})})]}),n.description&&n.description.trim()&&E.jsx("button",{className:"expand-button p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:y,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:`ri-arrow-${i?"up":"down"}-s-line`})})})]})}),E.jsx("div",{className:"task-menu ml-4 flex items-start",children:E.jsx("button",{className:"edit-task-btn p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:v,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:"ri-edit-line"})})})})]})},Utt=()=>{const{tasks:n,projects:e,editingTaskId:t,setIsAddingTask:r,setEditingTaskId:i,reorderTasks:a}=rn(),{isRunning:o,pause:s,setEnableStartPauseBtn:l,start:c,currentTask:u}=pi(),[d,h]=K.useState(null),[f,m]=K.useState(null),[v,y]=K.useState(!1),[w,_]=K.useState(!1),S=K.useRef(null),A=K.useRef(-1),C=K.useRef(null);K.useEffect(()=>{u&&t===u.id?(l(!1),o&&s()):l(!0)},[t]);const D=(q,W)=>{S.current=W;const X=n.findIndex(te=>te.id===W);A.current=X,q.currentTarget.classList.add("opacity-70","border-dashed")},M=q=>{q.currentTarget.classList.remove("opacity-70","border-dashed"),S.current=null,A.current=-1},P=q=>{q.preventDefault()},O=q=>{q.preventDefault(),q.currentTarget.classList.add("bg-gray-50")},j=q=>{q.currentTarget.classList.remove("bg-gray-50")},L=(q,W)=>{if(q.preventDefault(),q.currentTarget.classList.remove("bg-gray-50"),!S.current||S.current===W)return;const X=n.find(z=>z.id===S.current),te=n.find(z=>z.id===W);if(!X||!te)return;const re=n.findIndex(z=>z.id===W);a(S.current,re)},B=q=>{i(q),r(!1),_(!!o)},$=()=>{r(!1),i(null),w&&(_(!1),c())},Y=[...n].filter(q=>q.hideFromPomodoro?!1:!!(q.status==="pomodoro"||q.completed)).sort((q,W)=>q.order-W.order);return E.jsx("div",{className:"space-y-3",id:"taskListSorted",ref:C,children:Y.map(q=>{const W=e.find(X=>X.id===q.projectId);return t===q.id?E.jsx(Zv,{task:q,onCancel:$},q.id):W?E.jsx("div",{draggable:!0,onDragStart:X=>D(X,q.id),onDragEnd:M,onDragOver:P,onDragEnter:O,onDragLeave:j,onDrop:X=>L(X,q.id),children:E.jsx(Btt,{task:q,project:W,onEdit:B})},q.id):null})})},Vtt=()=>{const{tasks:n}=rn(),e=[...n].filter(l=>l.hideFromPomodoro?!1:!!(l.status==="pomodoro"||l.completed)).sort((l,c)=>l.order-c.order),t=e.reduce((l,c)=>l+(c.timeSpent||0),0),r=e.reduce((l,c)=>l+(c.timeEstimated||0),0),i=e.filter(l=>l.status==="pomodoro"),a=i.reduce((l,c)=>l+(c.timeEstimated||0),0),o=i.reduce((l,c)=>l+(c.timeSpent||0),0),s=Math.max(0,a-o);return E.jsxs("div",{className:"text-sm text-text-secondary",children:[E.jsx("span",{children:"Total time spent: "}),E.jsx("span",{className:"font-medium text-text-primary",children:Kv(t)}),r>0&&E.jsxs("span",{children:[" ","(",Kv(s)," left)"]})]})},__e=({className:n="",compactView:e=!1})=>{const t=$g(),r=rn(w=>w.isAddingTask),i=rn(w=>w.editingTaskId),a=rn(w=>w.showDetailsMenu),o=rn(w=>w.setIsAddingTask),s=rn(w=>w.setEditingTaskId),l=rn(w=>w.setShowDetailsMenu),c=rn(w=>w.handleMoveCompletedDown),u=rn(w=>w.handleArchiveCompleted),d=K.useRef(null),h=K.useRef(null),f=K.useRef(null);K.useEffect(()=>{const w=_=>{!_.target.closest(".details-menu")&&a&&l(!1)};return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[a,l]),K.useEffect(()=>{if(r&&f.current&&h.current){const w=h.current,S=f.current.getBoundingClientRect(),A=w.getBoundingClientRect(),C=S.bottom,D=A.bottom;if(C>D){const M=C-D+20;w.scrollBy({top:M,behavior:"smooth"})}}},[r]);const m=()=>{o(!0),s(null)},v=()=>{o(!1),s(null)},y=()=>{t("/projects"),l(!1)};return E.jsxs("div",{className:`h-full flex flex-col ${n}`,children:[E.jsxs("div",{className:"p-4 border-b border-border",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("h2",{className:"font-semibold text-text-primary text-left",children:"Tasks In Pomodoro"}),E.jsxs("div",{className:"relative details-menu",children:[E.jsx("button",{onClick:w=>{w.stopPropagation(),l(!a)},className:"p-2 text-text-secondary hover:bg-background-primary rounded-md",children:E.jsx("i",{className:"ri-more-2-fill w-5 h-5"})}),a&&E.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-background-secondary border border-border rounded-lg shadow-lg z-10",children:E.jsxs("div",{className:"py-1",children:[E.jsxs("button",{onClick:c,className:"w-full px-4 py-2 text-sm text-text-primary hover:bg-background-primary text-left flex items-center whitespace-nowrap",children:[E.jsx("i",{className:"ri-arrow-down-line w-5 h-5 mr-2 flex-shrink-0"}),"Move down completed tasks"]}),E.jsxs("button",{onClick:u,className:"w-full px-4 py-2 text-sm text-text-primary hover:bg-background-primary text-left flex items-center whitespace-nowrap",children:[E.jsx("i",{className:"ri-archive-line w-5 h-5 mr-2 flex-shrink-0"}),"Archive completed tasks"]}),E.jsxs("button",{onClick:y,className:"w-full px-4 py-2 text-sm text-text-primary hover:bg-background-primary text-left flex items-center whitespace-nowrap",children:[E.jsx("i",{className:"ri-task-line w-5 h-5 mr-2 flex-shrink-0"}),"Task management"]})]})})]})]}),E.jsx(Vtt,{})]}),E.jsx("div",{className:`flex-1 overflow-y-auto scrollbar-thin ${e?"compact-view":""}`,ref:h,children:E.jsx("div",{className:"p-4",children:E.jsxs("div",{className:"space-y-3",id:"taskList",ref:d,children:[E.jsx(Utt,{}),r&&E.jsx("div",{ref:f,children:E.jsx(Zv,{onCancel:v})}),!r&&!i&&E.jsx("button",{onClick:m,className:"w-full p-4 border-2 border-dashed border-border rounded-lg text-text-secondary hover:border-text-secondary hover:text-text-primary transition-colors duration-200 text-left",children:"+ Add new task"})]})})})]})},aoe=({children:n,className:e="",rightSidebarContent:t})=>{const{isRightSidebarOpen:r,isLeftSidebarOpen:i,rightSidebarWidth:a,setRightSidebarWidth:o}=tc(),[s,l]=K.useState(!1),[c,u]=K.useState(a),d=K.useRef(null),h=K.useRef(null),f=vs(),m=()=>f.pathname==="/pomodoro"?E.jsx("div",{className:"p-4 space-y-4",children:E.jsx("div",{className:"bg-background-primary rounded-lg border border-border",children:E.jsxs("div",{className:"p-4",children:[E.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Tasks"}),E.jsx(__e,{})]})})}):null,v=S=>{S.preventDefault(),l(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},y=S=>{var L;if(!s||!d.current||!h.current)return;const A=(L=d.current.parentElement)==null?void 0:L.getBoundingClientRect();if(!A)return;const C=300,D=280,M=Math.floor(A.width*.5),P=A.width-D;let O=S.clientX-A.left;O<C&&(O=C),O>P&&(O=P);let j=A.width-O-1;j>M&&(j=M,O=A.width-j-1),d.current.style.width=`${O}px`,d.current.style.flex="none",h.current.style.width=`${j}px`,u(j),j<400?h.current.classList.add("compact-view"):h.current.classList.remove("compact-view")},w=()=>{l(!1),document.body.style.cursor="",document.body.style.userSelect="",c!==a&&o(c)};ye.useEffect(()=>(s?(window.addEventListener("mousemove",y),window.addEventListener("mouseup",w)):(window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",w)),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",w)}),[s,c]),ye.useEffect(()=>{s||u(a)},[a,s]);const _=t||m();return E.jsxs("div",{className:`main-layout-container flex h-screen overflow-hidden bg-background-primary ${f.pathname==="/pomodoro"?"pomodoro-page-container":""} ${e}`,children:[E.jsx(ET,{className:f.pathname==="/pomodoro"?"pomodoro-sidebar":""}),E.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[E.jsx(d_e,{}),E.jsxs("div",{className:"flex-1 flex overflow-hidden relative",style:{zIndex:1},children:[E.jsx("div",{ref:d,className:"flex-1 flex flex-col items-center justify-center p-6 bg-background-primary relative min-w-[300px] overflow-y-auto",id:"timerSection",style:!i&&!r?{}:{margin:"0 auto",width:r?"100%":"800px",maxWidth:r?"100%":"800px"},children:E.jsx("div",{className:"w-full h-full overflow-y-auto flex flex-col items-center justify-center",children:n||E.jsx(Cge,{})})}),r&&E.jsxs("div",{id:"resizeDivider",className:"w-[1px] bg-border/20 cursor-col-resize hover:bg-primary/20 flex items-center justify-center group",onMouseDown:v,children:[E.jsx("div",{className:"w-4 h-full opacity-0"}),E.jsx(mi,{text:"Hide task list (Cmd + \\)",placement:"bottom",offset:32,children:E.jsx("button",{className:"absolute w-6 h-12 bg-background-secondary border border-border rounded-l-md flex items-center justify-center shadow-sm hover:shadow-md -right-0 top-1/2 transform -translate-y-1/2 transition-all duration-200 hover:bg-background-primary group-hover:border-primary/30 sidebar-edge-toggle",onClick:S=>{S.stopPropagation(),tc.getState().toggleRightSidebar()},"aria-label":"Hide task list (Cmd + \\)",children:E.jsx("div",{className:"flex items-center justify-center",children:E.jsx(bt,{name:"arrow-right-s-line",size:14,className:"text-gray-500 transition-colors group-hover:text-primary"})})})})]}),r&&E.jsx("div",{ref:h,id:"rightSidebar",className:"border-l border-border flex flex-col bg-background-primary min-w-[280px]",style:{width:`${c}px`,flexShrink:0},children:E.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-visible",children:_})}),!r&&E.jsx(mi,{text:"Show task list (Cmd + \\)",placement:"left",offset:24,children:E.jsx("button",{className:"fixed right-0 top-1/2 transform -translate-y-1/2 z-[100] w-6 h-12 bg-background-secondary border border-border border-r-0 rounded-l-md shadow-md hover:shadow-lg transition-all duration-200 hover:bg-background-primary hover:border-primary/30 group sidebar-edge-toggle sidebar-toggle-show",onClick:()=>tc.getState().toggleRightSidebar(),"aria-label":"Show task list (Cmd + \\)",children:E.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary group-hover:text-primary transition-colors",children:E.jsx(bt,{name:"arrow-left-s-line",size:14})})})})]})]}),E.jsx(_et,{})]})};var ZB=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],r1={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Uk={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Yl=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},Mu=function(n){return n===!0?1:0};function ooe(n,e){var t;return function(){var r=this,i=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(r,i)},e)}}var QB=function(n){return n instanceof Array?n:[n]};function ul(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function Qr(n,e,t){var r=window.document.createElement(n);return e=e||"",t=t||"",r.className=e,t!==void 0&&(r.textContent=t),r}function XM(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function x_e(n,e){if(e(n))return n;if(n.parentNode)return x_e(n.parentNode,e)}function ZM(n,e){var t=Qr("div","numInputWrapper"),r=Qr("input","numInput "+n),i=Qr("span","arrowUp"),a=Qr("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),e!==void 0)for(var o in e)r.setAttribute(o,e[o]);return t.appendChild(r),t.appendChild(i),t.appendChild(a),t}function Dc(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var JB=function(){},DN=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},ztt={D:JB,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Mu(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var r=parseInt(e),i=new Date(n.getFullYear(),0,2+(r-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+t.firstDayOfWeek),i},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:JB,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:JB,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},Lb={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},pD={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[pD.w(n,e,t)]},F:function(n,e,t){return DN(pD.n(n,e,t)-1,!1,e)},G:function(n,e,t){return Yl(pD.h(n,e,t))},H:function(n){return Yl(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Mu(n.getHours()>11)]},M:function(n,e){return DN(n.getMonth(),!0,e)},S:function(n){return Yl(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return Yl(n.getFullYear(),4)},d:function(n){return Yl(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Yl(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return Yl(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},S_e=function(n){var e=n.config,t=e===void 0?r1:e,r=n.l10n,i=r===void 0?Uk:r,a=n.isMobile,o=a===void 0?!1:a;return function(s,l,c){var u=c||i;return t.formatDate!==void 0&&!o?t.formatDate(s,l,u):l.split("").map(function(d,h,f){return pD[d]&&f[h-1]!=="\\"?pD[d](s,u,t):d!=="\\"?d:""}).join("")}},lH=function(n){var e=n.config,t=e===void 0?r1:e,r=n.l10n,i=r===void 0?Uk:r;return function(a,o,s,l){if(!(a!==0&&!a)){var c=l||i,u,d=a;if(a instanceof Date)u=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)u=new Date(a);else if(typeof a=="string"){var h=o||(t||r1).dateFormat,f=String(a).trim();if(f==="today")u=new Date,s=!0;else if(t&&t.parseDate)u=t.parseDate(a,h);else if(/Z$/.test(f)||/GMT$/.test(f))u=new Date(a);else{for(var m=void 0,v=[],y=0,w=0,_="";y<h.length;y++){var S=h[y],A=S==="\\",C=h[y-1]==="\\"||A;if(Lb[S]&&!C){_+=Lb[S];var D=new RegExp(_).exec(a);D&&(m=!0)&&v[S!=="Y"?"push":"unshift"]({fn:ztt[S],val:D[++w]})}else A||(_+=".")}u=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),v.forEach(function(M){var P=M.fn,O=M.val;return u=P(u,O,c)||u}),u=m?u:void 0}}if(!(u instanceof Date&&!isNaN(u.getTime()))){t.errorHandler(new Error("Invalid date provided: "+d));return}return s===!0&&u.setHours(0,0,0,0),u}}};function Mc(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var Htt=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},eU=function(n,e,t){return n*3600+e*60+t},qtt=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},Gtt={DAY:864e5};function tU(n){var e=n.defaultHour,t=n.defaultMinute,r=n.defaultSeconds;if(n.minDate!==void 0){var i=n.minDate.getHours(),a=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<i&&(e=i),e===i&&t<a&&(t=a),e===i&&t===a&&r<o&&(r=n.minDate.getSeconds())}if(n.maxDate!==void 0){var s=n.maxDate.getHours(),l=n.maxDate.getMinutes();e=Math.min(e,s),e===s&&(t=Math.min(l,t)),e===s&&t===l&&(r=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var r=function(s){s&&Object.keys(s).forEach(function(l){return n[l]=s[l]})},i=0,a=e;i<a.length;i++){var o=a[i];r(o)}return n});var $s=function(){return $s=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},$s.apply(this,arguments)},soe=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Wtt=300;function Ytt(n,e){var t={config:$s($s({},r1),Ba.defaultConfig),l10n:Uk};t.parseDate=lH({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=v,t._setHoursFromDate=h,t._positionCalendar=Mt,t.changeMonth=oe,t.changeYear=ct,t.clear=le,t.close=ee,t.onMouseOver=fe,t._createElement=Qr,t.createDay=D,t.destroy=be,t.isEnabled=Be,t.jumpToDate=_,t.updateValue=Ln,t.open=Ve,t.redraw=Le,t.set=Ae,t.setDate=tt,t.toggle=Li;function r(){t.utils={getDaysInMonth:function(ae,ce){return ae===void 0&&(ae=t.currentMonth),ce===void 0&&(ce=t.currentYear),ae===1&&(ce%4===0&&ce%100!==0||ce%400===0)?29:t.l10n.daysInMonth[ae]}}}function i(){t.element=t.input=n,t.isOpen=!1,we(),on(),Rr(),pt(),r(),t.isMobile||C(),w(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&h(t.config.noCalendar?t.latestSelectedDateObj:void 0),Ln(!1)),s();var ae=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&ae&&Mt(),un("onReady")}function a(){var ae;return((ae=t.calendarContainer)===null||ae===void 0?void 0:ae.getRootNode()).activeElement||document.activeElement}function o(ae){return ae.bind(t)}function s(){var ae=t.config;ae.weekNumbers===!1&&ae.showMonths===1||ae.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var ce=(t.days.offsetWidth+1)*ae.showMonths;t.daysContainer.style.width=ce+"px",t.calendarContainer.style.width=ce+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function l(ae){if(t.selectedDates.length===0){var ce=t.config.minDate===void 0||Mc(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),ge=tU(t.config);ce.setHours(ge.hours,ge.minutes,ge.seconds,ce.getMilliseconds()),t.selectedDates=[ce],t.latestSelectedDateObj=ce}ae!==void 0&&ae.type!=="blur"&&Co(ae);var Me=t._input.value;d(),Ln(),t._input.value!==Me&&t._debouncedChange()}function c(ae,ce){return ae%12+12*Mu(ce===t.l10n.amPM[1])}function u(ae){switch(ae%24){case 0:case 12:return 12;default:return ae%12}}function d(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var ae=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,ce=(parseInt(t.minuteElement.value,10)||0)%60,ge=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(ae=c(ae,t.amPM.textContent));var Me=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Mc(t.latestSelectedDateObj,t.config.minDate,!0)===0,it=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Mc(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var xt=eU(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Pt=eU(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),gt=eU(ae,ce,ge);if(gt>Pt&&gt<xt){var Nt=qtt(xt);ae=Nt[0],ce=Nt[1],ge=Nt[2]}}else{if(it){var Tt=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;ae=Math.min(ae,Tt.getHours()),ae===Tt.getHours()&&(ce=Math.min(ce,Tt.getMinutes())),ce===Tt.getMinutes()&&(ge=Math.min(ge,Tt.getSeconds()))}if(Me){var qt=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;ae=Math.max(ae,qt.getHours()),ae===qt.getHours()&&ce<qt.getMinutes()&&(ce=qt.getMinutes()),ce===qt.getMinutes()&&(ge=Math.max(ge,qt.getSeconds()))}}f(ae,ce,ge)}}function h(ae){var ce=ae||t.latestSelectedDateObj;ce&&ce instanceof Date&&f(ce.getHours(),ce.getMinutes(),ce.getSeconds())}function f(ae,ce,ge){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(ae%24,ce,ge||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Yl(t.config.time_24hr?ae:(12+ae)%12+12*Mu(ae%12===0)),t.minuteElement.value=Yl(ce),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Mu(ae>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Yl(ge)))}function m(ae){var ce=Dc(ae),ge=parseInt(ce.value)+(ae.delta||0);(ge/1e3>1||ae.key==="Enter"&&!/[^\d]/.test(ge.toString()))&&ct(ge)}function v(ae,ce,ge,Me){if(ce instanceof Array)return ce.forEach(function(it){return v(ae,it,ge,Me)});if(ae instanceof Array)return ae.forEach(function(it){return v(it,ce,ge,Me)});ae.addEventListener(ce,ge,Me),t._handlers.push({remove:function(){return ae.removeEventListener(ce,ge,Me)}})}function y(){un("onChange")}function w(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(ge){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+ge+"]"),function(Me){return v(Me,"click",t[ge])})}),t.isMobile){Ur();return}var ae=ooe(Ge,50);if(t._debouncedChange=ooe(y,Wtt),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&v(t.daysContainer,"mouseover",function(ge){t.config.mode==="range"&&fe(Dc(ge))}),v(t._input,"keydown",me),t.calendarContainer!==void 0&&v(t.calendarContainer,"keydown",me),!t.config.inline&&!t.config.static&&v(window,"resize",ae),window.ontouchstart!==void 0?v(window.document,"touchstart",pe):v(window.document,"mousedown",pe),v(window.document,"focus",pe,{capture:!0}),t.config.clickOpens===!0&&(v(t._input,"focus",t.open),v(t._input,"click",t.open)),t.daysContainer!==void 0&&(v(t.monthNav,"click",Fi),v(t.monthNav,["keyup","increment"],m),v(t.daysContainer,"click",xn)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var ce=function(ge){return Dc(ge).select()};v(t.timeContainer,["increment"],l),v(t.timeContainer,"blur",l,{capture:!0}),v(t.timeContainer,"click",S),v([t.hourElement,t.minuteElement],["focus","click"],ce),t.secondElement!==void 0&&v(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&v(t.amPM,"click",function(ge){l(ge)})}t.config.allowInput&&v(t._input,"blur",_e)}function _(ae,ce){var ge=ae!==void 0?t.parseDate(ae):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),Me=t.currentYear,it=t.currentMonth;try{ge!==void 0&&(t.currentYear=ge.getFullYear(),t.currentMonth=ge.getMonth())}catch(xt){xt.message="Invalid date supplied: "+ge,t.config.errorHandler(xt)}ce&&t.currentYear!==Me&&(un("onYearChange"),$()),ce&&(t.currentYear!==Me||t.currentMonth!==it)&&un("onMonthChange"),t.redraw()}function S(ae){var ce=Dc(ae);~ce.className.indexOf("arrow")&&A(ae,ce.classList.contains("arrowUp")?1:-1)}function A(ae,ce,ge){var Me=ae&&Dc(ae),it=ge||Me&&Me.parentNode&&Me.parentNode.firstChild,xt=dr("increment");xt.delta=ce,it&&it.dispatchEvent(xt)}function C(){var ae=window.document.createDocumentFragment();if(t.calendarContainer=Qr("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(ae.appendChild(W()),t.innerContainer=Qr("div","flatpickr-innerContainer"),t.config.weekNumbers){var ce=z(),ge=ce.weekWrapper,Me=ce.weekNumbers;t.innerContainer.appendChild(ge),t.weekNumbers=Me,t.weekWrapper=ge}t.rContainer=Qr("div","flatpickr-rContainer"),t.rContainer.appendChild(te()),t.daysContainer||(t.daysContainer=Qr("div","flatpickr-days"),t.daysContainer.tabIndex=-1),B(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),ae.appendChild(t.innerContainer)}t.config.enableTime&&ae.appendChild(X()),ul(t.calendarContainer,"rangeMode",t.config.mode==="range"),ul(t.calendarContainer,"animate",t.config.animate===!0),ul(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(ae);var it=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!it&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var xt=Qr("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(xt,t.element),xt.appendChild(t.element),t.altInput&&xt.appendChild(t.altInput),xt.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function D(ae,ce,ge,Me){var it=Be(ce,!0),xt=Qr("span",ae,ce.getDate().toString());return xt.dateObj=ce,xt.$i=Me,xt.setAttribute("aria-label",t.formatDate(ce,t.config.ariaDateFormat)),ae.indexOf("hidden")===-1&&Mc(ce,t.now)===0&&(t.todayDateElem=xt,xt.classList.add("today"),xt.setAttribute("aria-current","date")),it?(xt.tabIndex=-1,wi(ce)&&(xt.classList.add("selected"),t.selectedDateElem=xt,t.config.mode==="range"&&(ul(xt,"startRange",t.selectedDates[0]&&Mc(ce,t.selectedDates[0],!0)===0),ul(xt,"endRange",t.selectedDates[1]&&Mc(ce,t.selectedDates[1],!0)===0),ae==="nextMonthDay"&&xt.classList.add("inRange")))):xt.classList.add("flatpickr-disabled"),t.config.mode==="range"&&ze(ce)&&!wi(ce)&&xt.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&ae!=="prevMonthDay"&&Me%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(ce)+"</span>"),un("onDayCreate",xt),xt}function M(ae){ae.focus(),t.config.mode==="range"&&fe(ae)}function P(ae){for(var ce=ae>0?0:t.config.showMonths-1,ge=ae>0?t.config.showMonths:-1,Me=ce;Me!=ge;Me+=ae)for(var it=t.daysContainer.children[Me],xt=ae>0?0:it.children.length-1,Pt=ae>0?it.children.length:-1,gt=xt;gt!=Pt;gt+=ae){var Nt=it.children[gt];if(Nt.className.indexOf("hidden")===-1&&Be(Nt.dateObj))return Nt}}function O(ae,ce){for(var ge=ae.className.indexOf("Month")===-1?ae.dateObj.getMonth():t.currentMonth,Me=ce>0?t.config.showMonths:-1,it=ce>0?1:-1,xt=ge-t.currentMonth;xt!=Me;xt+=it)for(var Pt=t.daysContainer.children[xt],gt=ge-t.currentMonth===xt?ae.$i+ce:ce<0?Pt.children.length-1:0,Nt=Pt.children.length,Tt=gt;Tt>=0&&Tt<Nt&&Tt!=(ce>0?Nt:-1);Tt+=it){var qt=Pt.children[Tt];if(qt.className.indexOf("hidden")===-1&&Be(qt.dateObj)&&Math.abs(ae.$i-Tt)>=Math.abs(ce))return M(qt)}t.changeMonth(it),j(P(it),0)}function j(ae,ce){var ge=a(),Me=Se(ge||document.body),it=ae!==void 0?ae:Me?ge:t.selectedDateElem!==void 0&&Se(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&Se(t.todayDateElem)?t.todayDateElem:P(ce>0?1:-1);it===void 0?t._input.focus():Me?O(it,ce):M(it)}function L(ae,ce){for(var ge=(new Date(ae,ce,1).getDay()-t.l10n.firstDayOfWeek+7)%7,Me=t.utils.getDaysInMonth((ce-1+12)%12,ae),it=t.utils.getDaysInMonth(ce,ae),xt=window.document.createDocumentFragment(),Pt=t.config.showMonths>1,gt=Pt?"prevMonthDay hidden":"prevMonthDay",Nt=Pt?"nextMonthDay hidden":"nextMonthDay",Tt=Me+1-ge,qt=0;Tt<=Me;Tt++,qt++)xt.appendChild(D("flatpickr-day "+gt,new Date(ae,ce-1,Tt),Tt,qt));for(Tt=1;Tt<=it;Tt++,qt++)xt.appendChild(D("flatpickr-day",new Date(ae,ce,Tt),Tt,qt));for(var Hn=it+1;Hn<=42-ge&&(t.config.showMonths===1||qt%7!==0);Hn++,qt++)xt.appendChild(D("flatpickr-day "+Nt,new Date(ae,ce+1,Hn%it),Hn,qt));var di=Qr("div","dayContainer");return di.appendChild(xt),di}function B(){if(t.daysContainer!==void 0){XM(t.daysContainer),t.weekNumbers&&XM(t.weekNumbers);for(var ae=document.createDocumentFragment(),ce=0;ce<t.config.showMonths;ce++){var ge=new Date(t.currentYear,t.currentMonth,1);ge.setMonth(t.currentMonth+ce),ae.appendChild(L(ge.getFullYear(),ge.getMonth()))}t.daysContainer.appendChild(ae),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&fe()}}function $(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var ae=function(Me){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&Me<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&Me>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var ce=0;ce<12;ce++)if(ae(ce)){var ge=Qr("option","flatpickr-monthDropdown-month");ge.value=new Date(t.currentYear,ce).getMonth().toString(),ge.textContent=DN(ce,t.config.shorthandCurrentMonth,t.l10n),ge.tabIndex=-1,t.currentMonth===ce&&(ge.selected=!0),t.monthsDropdownContainer.appendChild(ge)}}}function Y(){var ae=Qr("div","flatpickr-month"),ce=window.document.createDocumentFragment(),ge;t.config.showMonths>1||t.config.monthSelectorType==="static"?ge=Qr("span","cur-month"):(t.monthsDropdownContainer=Qr("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),v(t.monthsDropdownContainer,"change",function(Pt){var gt=Dc(Pt),Nt=parseInt(gt.value,10);t.changeMonth(Nt-t.currentMonth),un("onMonthChange")}),$(),ge=t.monthsDropdownContainer);var Me=ZM("cur-year",{tabindex:"-1"}),it=Me.getElementsByTagName("input")[0];it.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&it.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(it.setAttribute("max",t.config.maxDate.getFullYear().toString()),it.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var xt=Qr("div","flatpickr-current-month");return xt.appendChild(ge),xt.appendChild(Me),ce.appendChild(xt),ae.appendChild(ce),{container:ae,yearElement:it,monthElement:ge}}function q(){XM(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var ae=t.config.showMonths;ae--;){var ce=Y();t.yearElements.push(ce.yearElement),t.monthElements.push(ce.monthElement),t.monthNav.appendChild(ce.container)}t.monthNav.appendChild(t.nextMonthNav)}function W(){return t.monthNav=Qr("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Qr("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Qr("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,q(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(ae){t.__hidePrevMonthArrow!==ae&&(ul(t.prevMonthNav,"flatpickr-disabled",ae),t.__hidePrevMonthArrow=ae)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(ae){t.__hideNextMonthArrow!==ae&&(ul(t.nextMonthNav,"flatpickr-disabled",ae),t.__hideNextMonthArrow=ae)}}),t.currentYearElement=t.yearElements[0],rr(),t.monthNav}function X(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var ae=tU(t.config);t.timeContainer=Qr("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var ce=Qr("span","flatpickr-time-separator",":"),ge=ZM("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=ge.getElementsByTagName("input")[0];var Me=ZM("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=Me.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Yl(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?ae.hours:u(ae.hours)),t.minuteElement.value=Yl(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():ae.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(ge),t.timeContainer.appendChild(ce),t.timeContainer.appendChild(Me),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var it=ZM("flatpickr-second");t.secondElement=it.getElementsByTagName("input")[0],t.secondElement.value=Yl(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():ae.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Qr("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(it)}return t.config.time_24hr||(t.amPM=Qr("span","flatpickr-am-pm",t.l10n.amPM[Mu((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function te(){t.weekdayContainer?XM(t.weekdayContainer):t.weekdayContainer=Qr("div","flatpickr-weekdays");for(var ae=t.config.showMonths;ae--;){var ce=Qr("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(ce)}return re(),t.weekdayContainer}function re(){if(t.weekdayContainer){var ae=t.l10n.firstDayOfWeek,ce=soe(t.l10n.weekdays.shorthand);ae>0&&ae<ce.length&&(ce=soe(ce.splice(ae,ce.length),ce.splice(0,ae)));for(var ge=t.config.showMonths;ge--;)t.weekdayContainer.children[ge].innerHTML=`
      <span class='flatpickr-weekday'>
        `+ce.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function z(){t.calendarContainer.classList.add("hasWeeks");var ae=Qr("div","flatpickr-weekwrapper");ae.appendChild(Qr("span","flatpickr-weekday",t.l10n.weekAbbreviation));var ce=Qr("div","flatpickr-weeks");return ae.appendChild(ce),{weekWrapper:ae,weekNumbers:ce}}function oe(ae,ce){ce===void 0&&(ce=!0);var ge=ce?ae:ae-t.currentMonth;ge<0&&t._hidePrevMonthArrow===!0||ge>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=ge,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,un("onYearChange"),$()),B(),un("onMonthChange"),rr())}function le(ae,ce){if(ae===void 0&&(ae=!0),ce===void 0&&(ce=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,ce===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var ge=tU(t.config),Me=ge.hours,it=ge.minutes,xt=ge.seconds;f(Me,it,xt)}t.redraw(),ae&&un("onChange")}function ee(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),un("onClose")}function be(){t.config!==void 0&&un("onDestroy");for(var ae=t._handlers.length;ae--;)t._handlers[ae].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var ce=t.calendarContainer.parentNode;if(ce.lastChild&&ce.removeChild(ce.lastChild),ce.parentNode){for(;ce.firstChild;)ce.parentNode.insertBefore(ce.firstChild,ce);ce.parentNode.removeChild(ce)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(ge){try{delete t[ge]}catch{}})}function he(ae){return t.calendarContainer.contains(ae)}function pe(ae){if(t.isOpen&&!t.config.inline){var ce=Dc(ae),ge=he(ce),Me=ce===t.input||ce===t.altInput||t.element.contains(ce)||ae.path&&ae.path.indexOf&&(~ae.path.indexOf(t.input)||~ae.path.indexOf(t.altInput)),it=!Me&&!ge&&!he(ae.relatedTarget),xt=!t.config.ignoredFocusElements.some(function(Pt){return Pt.contains(ce)});it&&xt&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&l(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function ct(ae){if(!(!ae||t.config.minDate&&ae<t.config.minDate.getFullYear()||t.config.maxDate&&ae>t.config.maxDate.getFullYear())){var ce=ae,ge=t.currentYear!==ce;t.currentYear=ce||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),ge&&(t.redraw(),un("onYearChange"),$())}}function Be(ae,ce){var ge;ce===void 0&&(ce=!0);var Me=t.parseDate(ae,void 0,ce);if(t.config.minDate&&Me&&Mc(Me,t.config.minDate,ce!==void 0?ce:!t.minDateHasTime)<0||t.config.maxDate&&Me&&Mc(Me,t.config.maxDate,ce!==void 0?ce:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(Me===void 0)return!1;for(var it=!!t.config.enable,xt=(ge=t.config.enable)!==null&&ge!==void 0?ge:t.config.disable,Pt=0,gt=void 0;Pt<xt.length;Pt++){if(gt=xt[Pt],typeof gt=="function"&&gt(Me))return it;if(gt instanceof Date&&Me!==void 0&&gt.getTime()===Me.getTime())return it;if(typeof gt=="string"){var Nt=t.parseDate(gt,void 0,!0);return Nt&&Nt.getTime()===Me.getTime()?it:!it}else if(typeof gt=="object"&&Me!==void 0&&gt.from&&gt.to&&Me.getTime()>=gt.from.getTime()&&Me.getTime()<=gt.to.getTime())return it}return!it}function Se(ae){return t.daysContainer!==void 0?ae.className.indexOf("hidden")===-1&&ae.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(ae):!1}function _e(ae){var ce=ae.target===t._input,ge=t._input.value.trimEnd()!==ji();ce&&ge&&!(ae.relatedTarget&&he(ae.relatedTarget))&&t.setDate(t._input.value,!0,ae.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function me(ae){var ce=Dc(ae),ge=t.config.wrap?n.contains(ce):ce===t._input,Me=t.config.allowInput,it=t.isOpen&&(!Me||!ge),xt=t.config.inline&&ge&&!Me;if(ae.keyCode===13&&ge){if(Me)return t.setDate(t._input.value,!0,ce===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),ce.blur();t.open()}else if(he(ce)||it||xt){var Pt=!!t.timeContainer&&t.timeContainer.contains(ce);switch(ae.keyCode){case 13:Pt?(ae.preventDefault(),l(),Yt()):xn(ae);break;case 27:ae.preventDefault(),Yt();break;case 8:case 46:ge&&!t.config.allowInput&&(ae.preventDefault(),t.clear());break;case 37:case 39:if(!Pt&&!ge){ae.preventDefault();var gt=a();if(t.daysContainer!==void 0&&(Me===!1||gt&&Se(gt))){var Nt=ae.keyCode===39?1:-1;ae.ctrlKey?(ae.stopPropagation(),oe(Nt),j(P(1),0)):j(void 0,Nt)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:ae.preventDefault();var Tt=ae.keyCode===40?1:-1;t.daysContainer&&ce.$i!==void 0||ce===t.input||ce===t.altInput?ae.ctrlKey?(ae.stopPropagation(),ct(t.currentYear-Tt),j(P(1),0)):Pt||j(void 0,Tt*7):ce===t.currentYearElement?ct(t.currentYear-Tt):t.config.enableTime&&(!Pt&&t.hourElement&&t.hourElement.focus(),l(ae),t._debouncedChange());break;case 9:if(Pt){var qt=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Ce){return Ce}),Hn=qt.indexOf(ce);if(Hn!==-1){var di=qt[Hn+(ae.shiftKey?-1:1)];ae.preventDefault(),(di||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(ce)&&ae.shiftKey&&(ae.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&ce===t.amPM)switch(ae.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],d(),Ln();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],d(),Ln();break}(ge||he(ce))&&un("onKeyDown",ae)}function fe(ae,ce){if(ce===void 0&&(ce="flatpickr-day"),!(t.selectedDates.length!==1||ae&&(!ae.classList.contains(ce)||ae.classList.contains("flatpickr-disabled")))){for(var ge=ae?ae.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),Me=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),it=Math.min(ge,t.selectedDates[0].getTime()),xt=Math.max(ge,t.selectedDates[0].getTime()),Pt=!1,gt=0,Nt=0,Tt=it;Tt<xt;Tt+=Gtt.DAY)Be(new Date(Tt),!0)||(Pt=Pt||Tt>it&&Tt<xt,Tt<Me&&(!gt||Tt>gt)?gt=Tt:Tt>Me&&(!Nt||Tt<Nt)&&(Nt=Tt));var qt=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+ce));qt.forEach(function(Hn){var di=Hn.dateObj,Ce=di.getTime(),Fe=gt>0&&Ce<gt||Nt>0&&Ce>Nt;if(Fe){Hn.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Qe){Hn.classList.remove(Qe)});return}else if(Pt&&!Fe)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Qe){Hn.classList.remove(Qe)}),ae!==void 0&&(ae.classList.add(ge<=t.selectedDates[0].getTime()?"startRange":"endRange"),Me<ge&&Ce===Me?Hn.classList.add("startRange"):Me>ge&&Ce===Me&&Hn.classList.add("endRange"),Ce>=gt&&(Nt===0||Ce<=Nt)&&Htt(Ce,Me,ge)&&Hn.classList.add("inRange"))})}}function Ge(){t.isOpen&&!t.config.static&&!t.config.inline&&Mt()}function Ve(ae,ce){if(ce===void 0&&(ce=t._positionElement),t.isMobile===!0){if(ae){ae.preventDefault();var ge=Dc(ae);ge&&ge.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),un("onOpen");return}else if(t._input.disabled||t.config.inline)return;var Me=t.isOpen;t.isOpen=!0,Me||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),un("onOpen"),Mt(ce)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(ae===void 0||!t.timeContainer.contains(ae.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function nt(ae){return function(ce){var ge=t.config["_"+ae+"Date"]=t.parseDate(ce,t.config.dateFormat),Me=t.config["_"+(ae==="min"?"max":"min")+"Date"];ge!==void 0&&(t[ae==="min"?"minDateHasTime":"maxDateHasTime"]=ge.getHours()>0||ge.getMinutes()>0||ge.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(it){return Be(it)}),!t.selectedDates.length&&ae==="min"&&h(ge),Ln()),t.daysContainer&&(Le(),ge!==void 0?t.currentYearElement[ae]=ge.getFullYear().toString():t.currentYearElement.removeAttribute(ae),t.currentYearElement.disabled=!!Me&&ge!==void 0&&Me.getFullYear()===ge.getFullYear())}}function we(){var ae=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],ce=$s($s({},JSON.parse(JSON.stringify(n.dataset||{}))),e),ge={};t.config.parseDate=ce.parseDate,t.config.formatDate=ce.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(qt){t.config._enable=Et(qt)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(qt){t.config._disable=Et(qt)}});var Me=ce.mode==="time";if(!ce.dateFormat&&(ce.enableTime||Me)){var it=Ba.defaultConfig.dateFormat||r1.dateFormat;ge.dateFormat=ce.noCalendar||Me?"H:i"+(ce.enableSeconds?":S":""):it+" H:i"+(ce.enableSeconds?":S":"")}if(ce.altInput&&(ce.enableTime||Me)&&!ce.altFormat){var xt=Ba.defaultConfig.altFormat||r1.altFormat;ge.altFormat=ce.noCalendar||Me?"h:i"+(ce.enableSeconds?":S K":" K"):xt+(" h:i"+(ce.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:nt("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:nt("max")});var Pt=function(qt){return function(Hn){t.config[qt==="min"?"_minTime":"_maxTime"]=t.parseDate(Hn,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Pt("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Pt("max")}),ce.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,ge,ce);for(var gt=0;gt<ae.length;gt++)t.config[ae[gt]]=t.config[ae[gt]]===!0||t.config[ae[gt]]==="true";ZB.filter(function(qt){return t.config[qt]!==void 0}).forEach(function(qt){t.config[qt]=QB(t.config[qt]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var gt=0;gt<t.config.plugins.length;gt++){var Nt=t.config.plugins[gt](t)||{};for(var Tt in Nt)ZB.indexOf(Tt)>-1?t.config[Tt]=QB(Nt[Tt]).map(o).concat(t.config[Tt]):typeof ce[Tt]>"u"&&(t.config[Tt]=Nt[Tt])}ce.altInputClass||(t.config.altInputClass=rt().className+" "+t.config.altInputClass),un("onParseConfig")}function rt(){return t.config.wrap?n.querySelector("[data-input]"):n}function on(){typeof t.config.locale!="object"&&typeof Ba.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=$s($s({},Ba.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Ba.l10ns[t.config.locale]:void 0),Lb.D="("+t.l10n.weekdays.shorthand.join("|")+")",Lb.l="("+t.l10n.weekdays.longhand.join("|")+")",Lb.M="("+t.l10n.months.shorthand.join("|")+")",Lb.F="("+t.l10n.months.longhand.join("|")+")",Lb.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var ae=$s($s({},e),JSON.parse(JSON.stringify(n.dataset||{})));ae.time_24hr===void 0&&Ba.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=S_e(t),t.parseDate=lH({config:t.config,l10n:t.l10n})}function Mt(ae){if(typeof t.config.position=="function")return void t.config.position(t,ae);if(t.calendarContainer!==void 0){un("onPreCalendarPosition");var ce=ae||t._positionElement,ge=Array.prototype.reduce.call(t.calendarContainer.children,function(jn,ni){return jn+ni.offsetHeight},0),Me=t.calendarContainer.offsetWidth,it=t.config.position.split(" "),xt=it[0],Pt=it.length>1?it[1]:null,gt=ce.getBoundingClientRect(),Nt=window.innerHeight-gt.bottom,Tt=xt==="above"||xt!=="below"&&Nt<ge&&gt.top>ge,qt=window.pageYOffset+gt.top+(Tt?-ge-2:ce.offsetHeight+2);if(ul(t.calendarContainer,"arrowTop",!Tt),ul(t.calendarContainer,"arrowBottom",Tt),!t.config.inline){var Hn=window.pageXOffset+gt.left,di=!1,Ce=!1;Pt==="center"?(Hn-=(Me-gt.width)/2,di=!0):Pt==="right"&&(Hn-=Me-gt.width,Ce=!0),ul(t.calendarContainer,"arrowLeft",!di&&!Ce),ul(t.calendarContainer,"arrowCenter",di),ul(t.calendarContainer,"arrowRight",Ce);var Fe=window.document.body.offsetWidth-(window.pageXOffset+gt.right),Qe=Hn+Me>window.document.body.offsetWidth,vt=Fe+Me>window.document.body.offsetWidth;if(ul(t.calendarContainer,"rightMost",Qe),!t.config.static)if(t.calendarContainer.style.top=qt+"px",!Qe)t.calendarContainer.style.left=Hn+"px",t.calendarContainer.style.right="auto";else if(!vt)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Fe+"px";else{var ot=kn();if(ot===void 0)return;var wt=window.document.body.offsetWidth,mt=Math.max(0,wt/2-Me/2),Kt=".flatpickr-calendar.centerMost:before",Sn=".flatpickr-calendar.centerMost:after",sn=ot.cssRules.length,Xt="{left:"+gt.left+"px;right:auto;}";ul(t.calendarContainer,"rightMost",!1),ul(t.calendarContainer,"centerMost",!0),ot.insertRule(Kt+","+Sn+Xt,sn),t.calendarContainer.style.left=mt+"px",t.calendarContainer.style.right="auto"}}}}function kn(){for(var ae=null,ce=0;ce<document.styleSheets.length;ce++){var ge=document.styleSheets[ce];if(ge.cssRules){try{ge.cssRules}catch{continue}ae=ge;break}}return ae??nr()}function nr(){var ae=document.createElement("style");return document.head.appendChild(ae),ae.sheet}function Le(){t.config.noCalendar||t.isMobile||($(),rr(),B())}function Yt(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function xn(ae){ae.preventDefault(),ae.stopPropagation();var ce=function(qt){return qt.classList&&qt.classList.contains("flatpickr-day")&&!qt.classList.contains("flatpickr-disabled")&&!qt.classList.contains("notAllowed")},ge=x_e(Dc(ae),ce);if(ge!==void 0){var Me=ge,it=t.latestSelectedDateObj=new Date(Me.dateObj.getTime()),xt=(it.getMonth()<t.currentMonth||it.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=Me,t.config.mode==="single")t.selectedDates=[it];else if(t.config.mode==="multiple"){var Pt=wi(it);Pt?t.selectedDates.splice(parseInt(Pt),1):t.selectedDates.push(it)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=it,t.selectedDates.push(it),Mc(it,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(qt,Hn){return qt.getTime()-Hn.getTime()}));if(d(),xt){var gt=t.currentYear!==it.getFullYear();t.currentYear=it.getFullYear(),t.currentMonth=it.getMonth(),gt&&(un("onYearChange"),$()),un("onMonthChange")}if(rr(),B(),Ln(),!xt&&t.config.mode!=="range"&&t.config.showMonths===1?M(Me):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Nt=t.config.mode==="single"&&!t.config.enableTime,Tt=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Nt||Tt)&&Yt()}y()}}var Ut={locale:[on,re],showMonths:[q,s,te],minDate:[_],maxDate:[_],positionElement:[vn],clickOpens:[function(){t.config.clickOpens===!0?(v(t._input,"focus",t.open),v(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function Ae(ae,ce){if(ae!==null&&typeof ae=="object"){Object.assign(t.config,ae);for(var ge in ae)Ut[ge]!==void 0&&Ut[ge].forEach(function(Me){return Me()})}else t.config[ae]=ce,Ut[ae]!==void 0?Ut[ae].forEach(function(Me){return Me()}):ZB.indexOf(ae)>-1&&(t.config[ae]=QB(ce));t.redraw(),Ln(!0)}function je(ae,ce){var ge=[];if(ae instanceof Array)ge=ae.map(function(Me){return t.parseDate(Me,ce)});else if(ae instanceof Date||typeof ae=="number")ge=[t.parseDate(ae,ce)];else if(typeof ae=="string")switch(t.config.mode){case"single":case"time":ge=[t.parseDate(ae,ce)];break;case"multiple":ge=ae.split(t.config.conjunction).map(function(Me){return t.parseDate(Me,ce)});break;case"range":ge=ae.split(t.l10n.rangeSeparator).map(function(Me){return t.parseDate(Me,ce)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(ae)));t.selectedDates=t.config.allowInvalidPreload?ge:ge.filter(function(Me){return Me instanceof Date&&Be(Me,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(Me,it){return Me.getTime()-it.getTime()})}function tt(ae,ce,ge){if(ce===void 0&&(ce=!1),ge===void 0&&(ge=t.config.dateFormat),ae!==0&&!ae||ae instanceof Array&&ae.length===0)return t.clear(ce);je(ae,ge),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),_(void 0,ce),h(),t.selectedDates.length===0&&t.clear(!1),Ln(ce),ce&&un("onChange")}function Et(ae){return ae.slice().map(function(ce){return typeof ce=="string"||typeof ce=="number"||ce instanceof Date?t.parseDate(ce,void 0,!0):ce&&typeof ce=="object"&&ce.from&&ce.to?{from:t.parseDate(ce.from,void 0),to:t.parseDate(ce.to,void 0)}:ce}).filter(function(ce){return ce})}function pt(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var ae=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);ae&&je(ae,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Rr(){if(t.input=rt(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Qr(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),vn()}function vn(){t._positionElement=t.config.positionElement||t._input}function Ur(){var ae=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Qr("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=ae,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=ae==="datetime-local"?"Y-m-d\\TH:i:S":ae==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}v(t.mobileInput,"change",function(ce){t.setDate(Dc(ce).value,!1,t.mobileFormatStr),un("onChange"),un("onClose")})}function Li(ae){if(t.isOpen===!0)return t.close();t.open(ae)}function un(ae,ce){if(t.config!==void 0){var ge=t.config[ae];if(ge!==void 0&&ge.length>0)for(var Me=0;ge[Me]&&Me<ge.length;Me++)ge[Me](t.selectedDates,t.input.value,t,ce);ae==="onChange"&&(t.input.dispatchEvent(dr("change")),t.input.dispatchEvent(dr("input")))}}function dr(ae){var ce=document.createEvent("Event");return ce.initEvent(ae,!0,!0),ce}function wi(ae){for(var ce=0;ce<t.selectedDates.length;ce++){var ge=t.selectedDates[ce];if(ge instanceof Date&&Mc(ge,ae)===0)return""+ce}return!1}function ze(ae){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Mc(ae,t.selectedDates[0])>=0&&Mc(ae,t.selectedDates[1])<=0}function rr(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(ae,ce){var ge=new Date(t.currentYear,t.currentMonth,1);ge.setMonth(t.currentMonth+ce),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[ce].textContent=DN(ge.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=ge.getMonth().toString(),ae.value=ge.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function ji(ae){var ce=ae||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(ge){return t.formatDate(ge,ce)}).filter(function(ge,Me,it){return t.config.mode!=="range"||t.config.enableTime||it.indexOf(ge)===Me}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function Ln(ae){ae===void 0&&(ae=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=ji(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=ji(t.config.altFormat)),ae!==!1&&un("onValueUpdate")}function Fi(ae){var ce=Dc(ae),ge=t.prevMonthNav.contains(ce),Me=t.nextMonthNav.contains(ce);ge||Me?oe(ge?-1:1):t.yearElements.indexOf(ce)>=0?ce.select():ce.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):ce.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function Co(ae){ae.preventDefault();var ce=ae.type==="keydown",ge=Dc(ae),Me=ge;t.amPM!==void 0&&ge===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Mu(t.amPM.textContent===t.l10n.amPM[0])]);var it=parseFloat(Me.getAttribute("min")),xt=parseFloat(Me.getAttribute("max")),Pt=parseFloat(Me.getAttribute("step")),gt=parseInt(Me.value,10),Nt=ae.delta||(ce?ae.which===38?1:-1:0),Tt=gt+Pt*Nt;if(typeof Me.value<"u"&&Me.value.length===2){var qt=Me===t.hourElement,Hn=Me===t.minuteElement;Tt<it?(Tt=xt+Tt+Mu(!qt)+(Mu(qt)&&Mu(!t.amPM)),Hn&&A(void 0,-1,t.hourElement)):Tt>xt&&(Tt=Me===t.hourElement?Tt-xt-Mu(!t.amPM):it,Hn&&A(void 0,1,t.hourElement)),t.amPM&&qt&&(Pt===1?Tt+gt===23:Math.abs(Tt-gt)>Pt)&&(t.amPM.textContent=t.l10n.amPM[Mu(t.amPM.textContent===t.l10n.amPM[0])]),Me.value=Yl(Tt)}}return i(),t}function i1(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),r=[],i=0;i<t.length;i++){var a=t[i];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=Ytt(a,e||{}),r.push(a._flatpickr)}catch(o){console.error(o)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return i1(this,n)},HTMLElement.prototype.flatpickr=function(n){return i1([this],n)});var Ba=function(n,e){return typeof n=="string"?i1(window.document.querySelectorAll(n),e):n instanceof Node?i1([n],e):i1(n,e)};Ba.defaultConfig={};Ba.l10ns={en:$s({},Uk),default:$s({},Uk)};Ba.localize=function(n){Ba.l10ns.default=$s($s({},Ba.l10ns.default),n)};Ba.setDefaults=function(n){Ba.defaultConfig=$s($s({},Ba.defaultConfig),n)};Ba.parseDate=lH({});Ba.formatDate=S_e({});Ba.compareDates=Mc;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return i1(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=Ba);const Ktt=()=>{const n=$g(),e=vs(),[t,r]=K.useState(!1),[i,a]=K.useState(!1),{selectedRange:o,setSelectedRange:s}=qg(),{toggleFocusMode:l,isLeftSidebarOpen:c,toggleLeftSidebar:u}=tc(),d=K.useRef(null),h=K.useRef(null),f=K.useRef(null),[m,v]=K.useState(null),[y,w]=K.useState(null),[_,S]=K.useState(!1);K.useEffect(()=>{const P=O=>{if(d.current&&!d.current.contains(O.target)){if(r(!1),f.current&&f.current.isOpen)return;a(!1)}};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]),K.useEffect(()=>{if(i&&h.current&&!f.current){S(!0);const P=Ba(h.current,{mode:"range",dateFormat:"M d, Y",maxDate:new Date,defaultDate:[m,y].filter(Boolean),onChange:function(O){if(O.length===2)if(Math.ceil((O[1].getTime()-O[0].getTime())/864e5)>365){const L=new Date(O[0]);L.setDate(L.getDate()+364),P.setDate([O[0],L])}else v(O[0]),w(O[1]);else O.length===1&&(v(O[0]),w(null))},onClose:function(){if(_){S(!1);return}}});f.current=P,P.open()}return()=>{!i&&f.current&&(f.current.destroy(),f.current=null)}},[i,_]);const A=P=>P.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),C=P=>{const O=new Date,j=new Date(O.getFullYear(),O.getMonth(),O.getDate()),L=new Date(j);L.setHours(23,59,59,999);const B=new Date(j);B.setHours(0,0,0,0);let $="today";switch(P){case"Today":$="today",s({startDate:B,endDate:L,rangeType:$});break;case"Yesterday":const Y=new Date(j);Y.setDate(j.getDate()-1);const q=new Date(Y);q.setHours(0,0,0,0);const W=new Date(Y);W.setHours(23,59,59,999),$="yesterday",s({startDate:q,endDate:W,rangeType:$});break;case"Last 7 Days":const X=new Date(j);X.setDate(j.getDate()-6),X.setHours(0,0,0,0),$="last 7 days",s({startDate:X,endDate:L,rangeType:$});break;case"Last 30 Days":const te=new Date(j);te.setDate(j.getDate()-29),te.setHours(0,0,0,0),$="last 30 days",s({startDate:te,endDate:L,rangeType:$});break;case"Custom Range":a(!0),r(!1);return;default:$="all time",s({startDate:null,endDate:null,rangeType:$})}r(!1)},D=()=>{if(m&&y){const P=new Date;if(P.setHours(23,59,59,999),m>P||y>P){console.warn("Cannot select future dates for productivity analysis");return}const O=new Date(m);O.setHours(0,0,0,0);const j=new Date(y);j.setHours(23,59,59,999),s({startDate:O,endDate:j,rangeType:"custom"}),a(!1),f.current&&(f.current.destroy(),f.current=null)}},M=()=>{switch(o.rangeType){case"today":return"Today";case"yesterday":return"Yesterday";case"last 7 days":return"Last 7 days";case"last 30 days":return"Last 30 days";case"custom":return o.startDate&&o.endDate?`${A(o.startDate)} - ${A(o.endDate)}`:"Custom Range";default:return"All time"}};return E.jsxs("div",{className:"dashboard-header h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-all duration-500 relative",children:[E.jsxs("div",{className:"flex items-center",children:[!c&&E.jsx("button",{onClick:u,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:E.jsx(bt,{name:"menu-line",size:20})})}),E.jsx(Wj,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:"Productivity Insights"})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsxs("div",{className:"relative",ref:d,children:[E.jsxs("button",{className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container flex items-center space-x-2",onClick:()=>{r(!t),i&&(a(!1),f.current&&(f.current.destroy(),f.current=null))},children:[E.jsx("span",{children:M()}),E.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:E.jsx("i",{className:"ri-arrow-down-s-line"})})]}),t&&E.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-background-secondary rounded-lg shadow-lg border border-border py-2 z-10",children:[E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("Today"),children:"Today"}),E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("Yesterday"),children:"Yesterday"}),E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("Last 7 Days"),children:"Last 7 days"}),E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("Last 30 Days"),children:"Last 30 days"}),E.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container flex items-center justify-between",onClick:()=>C("Custom Range"),children:[E.jsx("span",{children:"Time range"}),E.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:E.jsx("i",{className:"ri-calendar-line"})})]}),E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("All time"),children:"All time"})]}),i&&E.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-background-secondary rounded-lg shadow-lg border border-border p-4 z-10",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Select date range"}),E.jsx("button",{className:"text-text-secondary hover:text-text-primary",onClick:()=>{a(!1),f.current&&(f.current.destroy(),f.current=null)},children:E.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:E.jsx("i",{className:"ri-close-line"})})})]}),E.jsx("div",{children:E.jsx("input",{ref:h,type:"text",className:"w-full px-3 py-1.5 text-sm border border-border rounded-button focus:outline-none focus:border-primary bg-background-primary text-text-primary",placeholder:"Select date range",readOnly:!0})}),E.jsxs("div",{className:"mt-2 text-xs text-text-secondary",children:[m&&!y?"Select end date":m?"":"Select start date",(!m||!y)&&E.jsx("div",{className:"text-text-secondary mt-1",children:"Note: Future dates cannot be selected for productivity analysis"})]}),E.jsx("div",{className:"mt-4 flex justify-end",children:E.jsx("button",{className:"px-4 py-1.5 text-sm font-medium bg-primary border border-primary rounded-button text-white hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",onClick:D,disabled:!m||!y,children:"Apply"})})]})]}),E.jsx(mi,{text:"Pomodoro Timer",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/pomodoro"?void 0:()=>n("/pomodoro"),"aria-label":e.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"timer-line",size:20})})})}),E.jsx(mi,{text:"Task management",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/projects"?void 0:()=>n("/projects"),"aria-label":e.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"task-line",size:20})})})}),E.jsx(mi,{text:"Productivity Insights",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/dashboard"?void 0:()=>n("/dashboard"),"aria-label":e.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"dashboard-line",size:20})})})}),E.jsx(mi,{text:"Calendar",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/calendar"?void 0:()=>n("/calendar"),"aria-label":e.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"calendar-line",size:20})})})}),E.jsx(mi,{text:"Deep Focus",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/deep-focus"?void 0:()=>n("/deep-focus"),"aria-label":e.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"brain-line",size:20})})})})]})]})},Xtt=()=>E.jsxs("div",{className:"dashboard-layout",children:[E.jsx(ET,{}),E.jsxs("main",{className:"dashboard-main",children:[E.jsx(Ktt,{}),E.jsx("div",{className:"dashboard-content",children:E.jsx("div",{className:"max-w-7xl mx-auto",children:E.jsx(Cge,{})})})]})]}),Ztt=({className:n=""})=>{const e=rn(d=>d.tasks),t=rn(d=>d.updateTaskStatus),[r,i]=K.useState([]),a=e.filter(d=>d.status==="pomodoro"),o=e.filter(d=>d.status==="todo"),s=e.filter(d=>d.status==="completed"),l=(d,h)=>{const f=e.find(y=>y.id===d);if(!f)return;const m=f.status;t(d,h);let v="";h==="completed"?v="Task moved to Completed":h==="todo"?v=m==="completed"?"Task moved to To Do List":"Task marked as incomplete":h==="pomodoro"&&(v="Task moved to In Pomodoro"),c(v,d,()=>{t(d,m)})},c=(d,h,f)=>{const m=Date.now().toString();i(v=>[...v,{id:m,message:d,taskId:h,undoAction:f}]),setTimeout(()=>{i(v=>v.filter(y=>y.id!==m))},3e3)},u=d=>{i(h=>h.filter(f=>f.id!==d))};return E.jsxs("div",{className:`grid grid-cols-3 h-full ${n}`,children:[E.jsx(nU,{title:"To Do List",tasks:o,status:"todo",badgeColor:"bg-blue-500",onStatusChange:l}),E.jsx(nU,{title:"In Pomodoro",tasks:a,status:"pomodoro",badgeColor:"bg-red-500",onStatusChange:l}),E.jsx(nU,{title:"Completed",tasks:s,status:"completed",badgeColor:"bg-green-500",onStatusChange:l}),E.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:r.map(d=>E.jsx(nnt,{message:d.message,onClose:()=>u(d.id),onUndo:d.undoAction},d.id))})]})},Qtt=({task:n,onStatusChange:e,onReorder:t,onCrossColumnMove:r})=>{const[i,a]=K.useState(!1),[o,s]=K.useState(!1),[l,c]=K.useState(!1),[u,d]=K.useState(null),h=K.useRef(null),f=rn(L=>L.toggleTaskCompletion),v=rn(L=>L.projects).find(L=>L.id===n.projectId),y=()=>v?E.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:v.color}}):null,w=L=>{L.dataTransfer.setData("text/plain",n.id),L.dataTransfer.setData("application/x-task-status",n.status),h.current&&h.current.classList.add("dragging")},_=()=>{h.current&&h.current.classList.remove("dragging"),c(!1),d(null)},S=L=>{var $;L.preventDefault(),L.stopPropagation();const B=($=h.current)==null?void 0:$.getBoundingClientRect();if(B){const Y=L.clientY-B.top,q=B.height,W=Y<q/2;d(W?"top":"bottom"),c(!0)}},A=L=>{L.preventDefault(),L.stopPropagation(),c(!0)},C=L=>{var $;L.preventDefault(),L.stopPropagation();const B=($=h.current)==null?void 0:$.getBoundingClientRect();if(B){const Y=L.clientX,q=L.clientY;(Y<B.left||Y>B.right||q<B.top||q>B.bottom)&&(c(!1),d(null))}},D=L=>{L.preventDefault(),L.stopPropagation(),c(!1),d(null);const B=L.dataTransfer.getData("text/plain"),$=L.dataTransfer.getData("application/x-task-status");B&&B!==n.id&&($===n.status&&t?t(B,n.id,u==="bottom"):$!==n.status&&r&&r(B,n.id,n.status,u==="bottom"))},M=()=>{f(n.id)},P=L=>{L.stopPropagation(),a(!0)},O=L=>{L.stopPropagation(),s(!o)},j=()=>{if(n.completed)return"bg-task-completed-bg border-task-completed-border";switch(n.status){case"todo":return"bg-task-todo-bg border-task-todo-border";case"pomodoro":return"bg-task-pomodoro-bg border-task-pomodoro-border";case"completed":return"bg-task-completed-bg border-task-completed-border";default:return"bg-background-secondary border-border"}};return i?E.jsx(Zv,{task:n,onCancel:()=>a(!1)}):E.jsxs("div",{className:"relative",children:[l&&u==="top"&&E.jsx("div",{className:"absolute -top-1 left-0 right-0 h-0.5 border-t-2 border-dashed border-red-500 z-10"}),l&&u==="bottom"&&E.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-0.5 border-b-2 border-dashed border-red-500 z-10"}),E.jsxs("div",{ref:h,className:`task-card flex items-start p-3 border ${j()}
        ${n.completed?"opacity-70 text-text-secondary":""}
        ${l?"drag-over":""}
        rounded-md hover:shadow-sm cursor-pointer transition-all duration-200`,draggable:!0,onDragStart:w,onDragEnd:_,onDragOver:S,onDragEnter:A,onDragLeave:C,onDrop:D,"data-task-id":n.id,"data-status":n.status,children:[E.jsx("div",{className:"mr-3 mt-0.5",children:E.jsx(Bk,{id:`task-checkbox-${n.id}`,checked:n.completed,onChange:M})}),E.jsx("div",{className:"flex-1 min-w-0 text-left",children:E.jsxs("div",{className:"flex items-start justify-between",children:[E.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[E.jsx("h4",{className:`text-sm font-medium text-left whitespace-pre-wrap break-words
              ${n.completed?"text-text-secondary line-through":"text-text-primary"}`,children:n.title}),E.jsxs("div",{className:"flex items-center mt-0.5 text-xs text-left",children:[E.jsxs("div",{className:"flex items-center",children:[y(),E.jsx("span",{className:`${n.completed,"text-text-secondary"}`,children:(v==null?void 0:v.name)||"Unknown project"})]}),E.jsx("span",{className:"mx-2 text-border",children:"•"}),E.jsxs("span",{className:`flex items-center ${n.completed,"text-text-secondary"}`,children:[E.jsx("i",{className:"ri-time-line mr-1"}),n.timeSpent,"/",n.timeEstimated,"m"]})]}),o&&n.description&&E.jsx("div",{className:"task-description mt-2",children:E.jsx("p",{className:"text-sm text-text-secondary mb-2 whitespace-pre-wrap break-words",children:n.description})})]}),n.description&&E.jsx("button",{className:"expand-button p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:O,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:`ri-arrow-${o?"up":"down"}-s-line`})})})]})}),E.jsx("div",{className:"task-menu ml-4 flex items-start",children:E.jsx("button",{className:"edit-task-btn p-1 rounded-full hover:bg-background-primary flex-shrink-0",onClick:P,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:"ri-edit-line"})})})})]})]})},Jtt=({title:n,tasks:e,status:t,badgeColor:r,onStatusChange:i})=>{const[a,o]=K.useState(!1),s=rn(d=>d.reorderTasks),l=rn(d=>d.moveTaskToStatusAndPosition),c=(d,h,f=!1)=>{const m=e.find(S=>S.id===d),v=e.find(S=>S.id===h);if(!m||!v||m.status!==v.status)return;const w=rn.getState().tasks.findIndex(S=>S.id===h),_=f?w+1:w;s(d,_)},u=async(d,h,f,m=!1)=>{const y=rn.getState().tasks.findIndex(_=>_.id===h),w=m?y+1:y;l(d,f,w)};return E.jsxs("div",{className:"status-section flex flex-col",children:[E.jsx("div",{className:"status-section-header px-4 py-3 border-b border-border sticky top-0 bg-background-primary z-5",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("span",{className:`status-badge ${t==="pomodoro"?"pomodoro-badge":t==="todo"?"todo-badge":t==="completed"?"completed-badge":""}`}),E.jsx("h3",{className:"font-medium text-text-primary",children:n}),E.jsx("span",{className:"ml-2 text-xs font-medium text-text-secondary bg-background-primary px-2 py-0.5 rounded-full",children:e.length})]}),E.jsx("button",{className:"p-1 rounded-full hover:bg-background-container",onClick:()=>o(!0),children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx(bt,{name:"add-line"})})})]})}),E.jsxs("div",{className:"task-list-container py-3 pl-3 pr-3 space-y-2 overflow-y-auto flex-1",children:[a&&E.jsx(Zv,{status:t,onCancel:()=>o(!1)}),e.map(d=>E.jsx(Qtt,{task:d,onStatusChange:i,onReorder:c,onCrossColumnMove:u},d.id))]})]})},ent=({message:n,onClose:e,onUndo:t,duration:r=3e3})=>{const[i,a]=K.useState(!0),[o,s]=K.useState(!1);K.useEffect(()=>{const u=setTimeout(()=>{l()},r);return()=>clearTimeout(u)},[r]);const l=()=>{o||(s(!0),setTimeout(()=>{a(!1),e()},300))},c=()=>{t&&t(),l()};return i?E.jsxs("div",{className:`flex items-center p-4 mb-3 min-w-[300px] bg-white shadow-lg rounded-lg border border-gray-200 transform transition-all duration-300 ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}`,style:{animation:o?"none":"slideIn 0.3s forwards"},children:[E.jsx("div",{className:"flex-1 mr-4",children:E.jsx("p",{className:"text-sm text-gray-900",children:n})}),t&&E.jsx("button",{className:"px-3 py-1 text-xs font-medium rounded-lg text-primary hover:bg-primary/10 transition-colors duration-200",onClick:c,children:"Undo"})]}):null},tnt=Ztt,nU=Jtt,nnt=ent,loe=({task:n,projectId:e,projectColor:t="#4f46e5",isNewTask:r=!1,onCancel:i,onReorder:a,onCrossProjectMove:o})=>{rn(X=>X.updateTask);const s=rn(X=>X.toggleTaskCompletion),l=rn(X=>X.projects),[c,u]=K.useState(!1),[d,h]=K.useState(r),[f,m]=K.useState(!1),[v,y]=K.useState(!1),[w,_]=K.useState(null),S=K.useRef(null),A=n?l.find(X=>X.id===n.projectId):null,C=()=>!n||!A?null:E.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:A.color}}),D=()=>{n&&s(n.id)},M=X=>{X.stopPropagation(),h(!0)},P=X=>{X.stopPropagation(),u(!c)},O=()=>{h(!1),r&&i&&i()},j=()=>{if(!n)return"bg-background-secondary border-border";if(n.completed)return"bg-task-completed-bg border-task-completed-border";switch(n.status){case"todo":return"bg-task-todo-bg border-task-todo-border";case"pomodoro":return"bg-task-pomodoro-bg border-task-pomodoro-border";case"completed":return"bg-task-completed-bg border-task-completed-border";default:return"bg-background-secondary border-border"}},L=X=>{n&&(X.dataTransfer.setData("text/plain",n.id),X.dataTransfer.setData("application/x-task-project",n.projectId),S.current&&S.current.classList.add("dragging"))},B=()=>{S.current&&S.current.classList.remove("dragging"),y(!1),_(null)},$=X=>{var re;X.preventDefault(),X.stopPropagation();const te=(re=S.current)==null?void 0:re.getBoundingClientRect();if(te){const z=X.clientY-te.top,oe=te.height,le=z<oe/2;_(le?"top":"bottom"),y(!0)}},Y=X=>{X.preventDefault(),X.stopPropagation(),y(!0)},q=X=>{var re;X.preventDefault(),X.stopPropagation();const te=(re=S.current)==null?void 0:re.getBoundingClientRect();if(te){const z=X.clientX,oe=X.clientY;(z<te.left||z>te.right||oe<te.top||oe>te.bottom)&&(y(!1),_(null))}},W=X=>{X.preventDefault(),X.stopPropagation(),y(!1),_(null);const te=X.dataTransfer.getData("text/plain"),re=X.dataTransfer.getData("application/x-task-project");te&&te!==(n==null?void 0:n.id)&&n&&(re===n.projectId&&a?a(te,n.id,w==="bottom"):re!==n.projectId&&o&&o(te,n.id,n.projectId,w==="bottom"))};return d||r?E.jsx(Zv,{task:n,status:(n==null?void 0:n.status)||"todo",initialProjectId:r?e:void 0,onCancel:O}):n?E.jsxs("div",{className:"relative",children:[v&&w==="top"&&E.jsx("div",{className:"absolute -top-1 left-0 right-0 h-0.5 border-t-2 border-dashed border-red-500 z-10"}),v&&w==="bottom"&&E.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-0.5 border-b-2 border-dashed border-red-500 z-10"}),E.jsxs("div",{ref:S,className:`task-card flex items-start p-3 border ${j()}
        ${n.completed?"opacity-70 text-text-secondary":""}
        ${v?"drag-over":""}
        rounded-md hover:shadow-sm cursor-pointer transition-all duration-200`,draggable:!0,onDragStart:L,onDragEnd:B,onDragOver:$,onDragEnter:Y,onDragLeave:q,onDrop:W,"data-task-id":n.id,"data-status":n.status,children:[E.jsx("div",{className:"mr-3 mt-0.5",children:E.jsx(Bk,{id:`task-checkbox-${n.id}`,checked:n.completed,onChange:D})}),E.jsx("div",{className:"flex-1 min-w-0 text-left",children:E.jsxs("div",{className:"flex items-start justify-between",children:[E.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[E.jsx("h4",{className:`text-sm font-medium text-left whitespace-pre-wrap break-words
              ${n.completed?"text-text-secondary line-through":"text-text-primary"}`,children:n.title}),E.jsxs("div",{className:"flex items-center mt-0.5 text-xs text-left",children:[E.jsxs("div",{className:"flex items-center",children:[C(),E.jsx("span",{className:`${n.completed,"text-text-secondary"}`,children:(A==null?void 0:A.name)||"Unknown project"})]}),E.jsx("span",{className:"mx-2 text-border",children:"•"}),E.jsxs("span",{className:`flex items-center ${n.completed,"text-text-secondary"}`,children:[E.jsx("i",{className:"ri-time-line mr-1"}),n.timeSpent,"/",n.timeEstimated,"m"]})]}),c&&n.description&&n.description.trim()&&E.jsx("div",{className:"task-description mt-2",children:E.jsx("p",{className:"text-sm text-text-secondary mb-2 whitespace-pre-wrap break-words",children:n.description})})]}),n.description&&n.description.trim()&&E.jsx("button",{className:"expand-button p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:P,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:`ri-arrow-${c?"up":"down"}-s-line`})})})]})}),E.jsx("div",{className:"task-menu ml-4 flex items-start",children:E.jsx("button",{className:"edit-task-btn p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:M,children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx("i",{className:"ri-edit-line"})})})})]})]}):null},rnt=({isOpen:n,onClose:e,currentColor:t,onColorChange:r,onSave:i})=>{const[a,o]=K.useState(t),[s,l]=K.useState(!0),c=K.useRef(null),u=K.useRef(null),d=sH;K.useEffect(()=>{o(t),l(!0)},[t]),K.useEffect(()=>{n&&u.current&&(u.current.focus(),u.current.select())},[n]),K.useEffect(()=>{if(!n)return;const w=S=>{c.current&&!c.current.contains(S.target)&&e()},_=S=>{S.key==="Escape"&&e()};return document.addEventListener("mousedown",w),document.addEventListener("keydown",_),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",_)}},[n,e]);const h=Ftt,f=w=>{o(w);const _=h(w);l(_),_&&r(w)},m=w=>{o(w),l(!0),r(w)},v=()=>{s&&i()},y=w=>{w.key==="Enter"&&s&&v()};return n?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",children:E.jsxs("div",{ref:c,className:"bg-background-secondary rounded-lg shadow-lg p-6 w-96 max-w-[90vw]",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Change Project Color"}),E.jsx("button",{onClick:e,className:"p-1 rounded-md hover:bg-background-container transition-colors duration-200",children:E.jsx(bt,{name:"close-line",size:20,className:"text-text-secondary"})})]}),E.jsxs("div",{className:"mb-6",children:[E.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"Current Color"}),E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"w-8 h-8 rounded-md border border-border",style:{backgroundColor:a}}),E.jsx("span",{className:"text-sm font-medium text-text-primary",children:a})]})]}),E.jsxs("div",{className:"mb-6",children:[E.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Hex Color Code"}),E.jsx("input",{ref:u,type:"text",value:a,onChange:w=>f(w.target.value),onKeyPress:y,placeholder:"#BB5F5A",className:`w-full px-3 py-2 border rounded-md text-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary bg-background-primary text-text-primary ${s?"border-border focus:border-primary":"border-red-300 focus:border-red-500 focus:ring-red-500"}`}),!s&&E.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Please enter a valid hex color (e.g., #BB5F5A)"})]}),E.jsxs("div",{className:"mb-6",children:[E.jsx("div",{className:"text-sm font-medium text-text-primary mb-3",children:"Preset Colors"}),E.jsx("div",{className:"grid grid-cols-6 gap-2",children:d.map(w=>E.jsx("button",{onClick:()=>m(w),className:`w-8 h-8 rounded-md border-2 transition-all duration-200 hover:scale-110 ${a===w?"border-text-secondary ring-2 ring-primary ring-offset-1":"border-border hover:border-text-secondary"}`,style:{backgroundColor:w},title:w},w))})]}),E.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[E.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-text-secondary hover:text-text-primary transition-colors duration-200",children:"Cancel"}),E.jsx("button",{onClick:v,disabled:!s,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 ${s?"bg-primary text-white hover:bg-primary/90":"bg-background-container text-text-secondary cursor-not-allowed"}`,children:"Save Color"})]})]})}):null},coe=({project:n,isNewProject:e=!1,onCancel:t})=>{const r=rn(Le=>Le.tasks),i=rn(Le=>Le.addProject),a=rn(Le=>Le.deleteProject),o=rn(Le=>Le.updateProject),s=rn(Le=>Le.updateTask),l=rn(Le=>Le.reorderTasks);rn(Le=>Le.moveTaskToStatusAndPosition);const[c,u]=K.useState((n==null?void 0:n.name)||""),[d,h]=K.useState(()=>{if(!n)return null;const Le=localStorage.getItem(`projectFilter_${n.id}`);return Le==="pomodoro"||Le==="todo"||Le==="completed"?Le:null}),[f,m]=K.useState(!1),[v,y]=K.useState(!1),[w,_]=K.useState(!1),[S,A]=K.useState(!1),[C,D]=K.useState((n==null?void 0:n.color)||"#BB5F5A"),[M,P]=K.useState(!1),[O,j]=K.useState((n==null?void 0:n.name)||""),[L,B]=K.useState(null);ye.useEffect(()=>{n&&(d===null?localStorage.removeItem(`projectFilter_${n.id}`):localStorage.setItem(`projectFilter_${n.id}`,d))},[d,n]);const $=(Le,Yt,xn=!1)=>{if(!n)return;const Ae=rn.getState().tasks.findIndex(tt=>tt.id===Yt),je=xn?Ae+1:Ae;l(Le,je)},Y=async(Le,Yt,xn,Ut=!1)=>{if(!n)return;const Ae=rn.getState().tasks,je=Ae.findIndex(vn=>vn.id===Yt),tt=Ut?je+1:je;let Et,pt;if(d)Et=d,pt=d==="completed";else{const vn=Ae.find(Ur=>Ur.id===Le);Et=vn==null?void 0:vn.status,pt=vn==null?void 0:vn.completed}if(Ae.find(vn=>vn.id===Le)){const vn={projectId:xn,...Et&&{status:Et},...pt!==void 0&&{completed:pt}};await s(Le,vn),setTimeout(()=>{l(Le,tt)},50)}};ye.useEffect(()=>{n!=null&&n.color&&D(n.color)},[n==null?void 0:n.color]),ye.useEffect(()=>{n!=null&&n.name&&j(n.name)},[n==null?void 0:n.name]);const q=n?r.filter(Le=>Le.projectId===n.id):[],W=q.filter(Le=>d===null?!0:d==="pomodoro"?Le.status==="pomodoro":d==="todo"?!Le.completed&&Le.status==="todo":d==="completed"?Le.completed:!0).sort((Le,Yt)=>{if(d===null){const xn={todo:1,pomodoro:2,completed:3},Ut=Le.completed?"completed":Le.status,Ae=xn[Ut]||4,je=Yt.completed?"completed":Yt.status,tt=xn[je]||4;return Ae-tt}return 0}),X=q.length,te=q.filter(Le=>Le.completed).length,re=X>0?Math.round(te/X*100):0,z=q.filter(Le=>Le.status==="pomodoro").length,oe=q.filter(Le=>!Le.completed&&Le.status==="todo").length,le=q.filter(Le=>Le.completed).length,ee=()=>{c.trim()&&(i({name:c.trim(),color:y_e()}),t&&t())},be=Le=>{Le.key==="Enter"&&ee()},he=()=>{m(!0)},pe=()=>{m(!1)},ct=()=>{y(!v)},Be=async()=>{if(!n)return;const Yt=r.filter(Ut=>Ut.projectId===n.id).length;let xn=`Are you sure you want to delete the project "${n.name}"?`;if(Yt>0&&(xn+=`

This will also permanently delete ${Yt} task${Yt===1?"":"s"} in this project.`),xn+=`

This action cannot be undone.`,window.confirm(xn))try{await a(n.id),_(!1)}catch(Ut){console.error("Failed to delete project:",Ut),alert("Failed to delete project. Please try again.")}},Se=()=>{D((n==null?void 0:n.color)||"#BB5F5A"),A(!0),_(!1)},_e=Le=>{D(Le)},me=async()=>{if(n)try{await o(n.id,{color:C}),console.log(`Project color updated to ${C}`),A(!1)}catch(Le){console.error("Error updating project color:",Le),alert("Failed to update project color. Please try again.")}},fe=()=>{D((n==null?void 0:n.color)||"#BB5F5A"),A(!1)},Ge=()=>{j((n==null?void 0:n.name)||""),P(!0),_(!1)},Ve=async()=>{if(!n||!O.trim()){j((n==null?void 0:n.name)||""),P(!1);return}try{await o(n.id,{name:O.trim()}),console.log(`Project name updated to ${O.trim()}`),P(!1)}catch(Le){console.error("Error updating project name:",Le),alert("Failed to update project name. Please try again."),j((n==null?void 0:n.name)||""),P(!1)}},nt=()=>{j((n==null?void 0:n.name)||""),P(!1)},we=Le=>{Le.key==="Enter"?Ve():Le.key==="Escape"&&nt()};ye.useEffect(()=>{const Le=Yt=>{!Yt.target.closest(".project-dropdown")&&w&&_(!1)};return document.addEventListener("click",Le),()=>document.removeEventListener("click",Le)},[w]);const rt=(Le,Yt)=>{Le.preventDefault(),Le.stopPropagation(),Le.dataTransfer.dropEffect="move",L!==Yt&&B(Yt)},on=Le=>{Le.preventDefault(),Le.stopPropagation(),B(null)},Mt=(Le,Yt)=>{Le.preventDefault(),Le.stopPropagation(),B(null);const xn=Le.dataTransfer.getData("text/plain"),Ut=Le.dataTransfer.getData("application/x-task-project");if(xn&&n){const je=rn.getState().tasks.find(tt=>tt.id===xn);if(je){const tt=Ut!==n.id?n.id:je.projectId;je.completed&&Yt!=="completed"?s(xn,{projectId:tt,status:Yt,completed:!1}):s(xn,{projectId:tt,status:Yt,completed:Yt==="completed"});const Et=Le.currentTarget;Et.classList.add("drop-success"),setTimeout(()=>{Et.classList.remove("drop-success")},500)}}},kn=Le=>{Le.preventDefault(),Le.dataTransfer.dropEffect="move"},nr=Le=>{Le.preventDefault();try{const Yt=JSON.parse(Le.dataTransfer.getData("application/json"));Yt.id&&n&&s(Yt.id,{projectId:n.id})}catch(Yt){console.error("Error handling drop on task list:",Yt)}};return e?E.jsx("div",{className:"project-container bg-background-primary border border-border rounded-lg shadow-sm w-[600px] min-w-[600px] animate-fade-in",children:E.jsxs("div",{className:"project-header flex items-center justify-between px-4 py-3 bg-background-container rounded-t-lg",children:[E.jsxs("div",{className:"flex items-center flex-1 mr-4",children:[E.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-2 text-text-secondary",children:E.jsx(bt,{name:"arrow-down-s-line"})}),E.jsx("input",{type:"text",className:"flex-1 font-medium text-text-primary bg-transparent border-none focus:ring-2 focus:ring-primary rounded-md px-3 py-1.5",placeholder:"Enter project name",value:c,onChange:Le=>u(Le.target.value),onKeyPress:be,autoFocus:!0})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:"text-xs text-text-secondary mr-2",children:"Progress:"}),E.jsx("div",{className:"w-32 h-2 bg-progress-bg rounded-full",children:E.jsx("div",{className:"h-2 bg-primary rounded-full",style:{width:"0%"}})}),E.jsx("div",{className:"ml-2 text-xs font-medium text-text-primary",children:"0%"})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("button",{onClick:ee,className:"p-1.5 rounded-md bg-primary/10 hover:bg-primary/20 transition-colors duration-200",title:"Save project",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-primary",children:E.jsx(bt,{name:"check-line"})})}),E.jsx("button",{onClick:t,className:"p-1.5 rounded-md hover:bg-background-container transition-colors duration-200",title:"Cancel",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx(bt,{name:"close-line"})})})]})]})]})}):n?E.jsxs("div",{className:"project-container bg-background-primary border border-border rounded-lg shadow-sm w-[600px] min-w-[600px]",children:[E.jsxs("div",{className:`project-header flex items-center justify-between px-4 py-3 bg-background-container rounded-t-lg ${M?"cursor-default":"cursor-pointer"}`,onClick:M?void 0:ct,children:[E.jsxs("div",{className:"flex items-center flex-1",children:[E.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-2 text-text-secondary",children:E.jsx(bt,{name:v?"arrow-right-s-line":"arrow-down-s-line"})}),M?E.jsxs("div",{className:"flex items-center flex-1 mr-4",children:[E.jsx("input",{type:"text",className:"flex-1 font-medium text-text-primary bg-transparent border border-red-300 focus:border-red-500 focus:outline-none rounded-md px-3 py-1.5",value:O,onChange:Le=>j(Le.target.value),onKeyDown:we,autoFocus:!0}),E.jsx("button",{onClick:Ve,className:"p-1.5 ml-2 rounded-md hover:bg-background-container transition-colors duration-200",title:"Save",children:E.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-green-600",children:E.jsx(bt,{name:"check-line"})})}),E.jsx("button",{onClick:nt,className:"p-1.5 rounded-md hover:bg-background-container transition-colors duration-200",title:"Cancel",children:E.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary",children:E.jsx(bt,{name:"close-line"})})})]}):E.jsx("h3",{className:"font-medium text-text-primary",children:n.name})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:"text-xs text-text-secondary mr-2",children:"Progress:"}),E.jsx("div",{className:"w-32 h-2 bg-progress-bg rounded-full",children:E.jsx("div",{className:"h-2 rounded-full progress-bar-animation",style:{width:`${re}%`,backgroundColor:n.color||"#BB5F5A"}})}),E.jsxs("div",{className:"ml-2 text-xs font-medium text-text-primary",children:[re,"%"]})]}),E.jsxs("div",{className:"project-menu relative project-dropdown",children:[E.jsx("button",{className:"p-1 rounded-full hover:bg-background-container",onClick:Le=>{Le.stopPropagation(),_(!w)},children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:E.jsx(bt,{name:"more-2-fill"})})}),w&&E.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-background-secondary border border-border rounded-lg shadow-lg z-10 overflow-hidden",children:E.jsxs("div",{className:"py-1 px-2",children:[E.jsxs("button",{onClick:Le=>{Le.stopPropagation(),Se()},className:"w-full px-3 py-2 text-sm text-text-primary hover:bg-background-container text-left flex items-center transition-colors duration-200 rounded-md",children:[E.jsx(bt,{name:"palette-line",size:16,className:"mr-2"}),"Update color"]}),E.jsxs("button",{onClick:Le=>{Le.stopPropagation(),Ge()},className:"w-full px-3 py-2 text-sm text-text-primary hover:bg-background-container text-left flex items-center transition-colors duration-200 rounded-md",children:[E.jsx(bt,{name:"edit-line",size:16,className:"mr-2"}),"Edit project name"]}),E.jsxs("button",{onClick:Le=>{Le.stopPropagation(),Be()},className:"w-full px-3 py-2 text-sm text-red-600 hover:bg-red-500/10 text-left flex items-center transition-colors duration-200 rounded-md",children:[E.jsx(bt,{name:"delete-bin-line",size:16,className:"mr-2"}),"Delete project"]})]})})]})]})]}),!v&&E.jsxs("div",{className:"project-tasks px-4 py-2",children:[E.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[E.jsxs("div",{className:"flex items-center space-x-3 task-filters",children:[E.jsxs("button",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${d==="todo"?"bg-primary/10 text-primary hover:bg-primary/20":"text-text-secondary hover:bg-background-container"} ${L==="todo"?"drag-over":""}`,onClick:()=>h(d==="todo"?null:"todo"),onDragOver:Le=>rt(Le,"todo"),onDragLeave:on,onDrop:Le=>Mt(Le,"todo"),style:{position:"relative",padding:L==="todo"?"4px 12px":""},children:[E.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:E.jsx(bt,{name:"list-check"})}),"To Do List (",oe,")"]}),E.jsxs("button",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${d==="pomodoro"?"bg-primary/10 text-primary hover:bg-primary/20":"text-text-secondary hover:bg-background-container"} ${L==="pomodoro"?"drag-over":""}`,onClick:()=>h(d==="pomodoro"?null:"pomodoro"),onDragOver:Le=>rt(Le,"pomodoro"),onDragLeave:on,onDrop:Le=>Mt(Le,"pomodoro"),style:{position:"relative",padding:L==="pomodoro"?"4px 12px":""},children:[E.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:E.jsx(bt,{name:"timer-line"})}),"In Pomodoro (",z,")"]}),E.jsxs("button",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${d==="completed"?"bg-primary/10 text-primary hover:bg-primary/20":"text-text-secondary hover:bg-background-container"} ${L==="completed"?"drag-over":""}`,onClick:()=>h(d==="completed"?null:"completed"),onDragOver:Le=>rt(Le,"completed"),onDragLeave:on,onDrop:Le=>Mt(Le,"completed"),style:{position:"relative",padding:L==="completed"?"4px 12px":""},children:[E.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:E.jsx(bt,{name:"check-line"})}),"Completed (",le,")"]})]}),E.jsxs("button",{onClick:he,className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-md text-primary hover:bg-primary/10 whitespace-nowrap",children:[E.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:E.jsx(bt,{name:"add-line"})}),"Add Task"]})]}),E.jsxs("div",{className:"task-list py-2 space-y-2",onDragOver:kn,onDrop:nr,children:[W.map(Le=>E.jsx(loe,{task:Le,projectColor:n.color,onReorder:$,onCrossProjectMove:Y},Le.id)),f&&E.jsx(loe,{isNewTask:!0,projectId:n.id,onCancel:pe}),W.length===0&&!f&&E.jsx("div",{className:"p-4 text-center text-text-secondary text-sm italic",onDragOver:kn,onDrop:nr,children:"No tasks found in this category"})]})]}),E.jsx(rnt,{isOpen:S,onClose:fe,currentColor:(n==null?void 0:n.color)||"#BB5F5A",onColorChange:_e,onSave:me})]}):null},int=({className:n=""})=>{const e=rn(l=>l.projects),t=rn(l=>l.tasks),[r,i]=K.useState(!1),a=[...e].sort((l,c)=>{const u=t.filter(h=>h.projectId===l.id).length;return t.filter(h=>h.projectId===c.id).length-u}),o=()=>{i(!0)},s=()=>{i(!1)};return E.jsxs("div",{className:`px-6 py-4 flex space-x-6 overflow-x-auto min-h-[calc(100vh-8.5rem)] items-start ${n}`,children:[a.map(l=>E.jsx(coe,{project:l},l.id)),r?E.jsx(coe,{isNewProject:!0,onCancel:s}):E.jsx("div",{className:"flex items-start min-w-[300px]",children:E.jsxs("button",{onClick:o,className:"inline-flex items-center px-4 py-2 border border-dashed border-border text-sm font-medium rounded-lg text-text-secondary bg-background-primary hover:bg-background-container whitespace-nowrap h-[120px] w-full justify-center",children:[E.jsx(bt,{name:"add-line",className:"mr-2"}),"Add New Project"]})})]})},ant=()=>{const n=$g(),e=vs(),{isLeftSidebarOpen:t,toggleLeftSidebar:r}=tc(),[i,a]=K.useState(()=>localStorage.getItem("taskManagementViewType")||"status"),[o,s]=K.useState(!1);rn(d=>d.projects),rn(d=>d.tasks),K.useEffect(()=>{localStorage.setItem("taskManagementViewType",i)},[i]),K.useEffect(()=>(console.log("ProjectsPage mounted/updated, viewType:",i),()=>{console.log("ProjectsPage unmounting")}),[]),K.useEffect(()=>{console.log("ViewType changed to:",i)},[i]);const l=d=>{o||d.target.closest("[data-task-id]")},c=()=>{s(!0)},u=()=>{s(!1)};return E.jsxs("div",{className:"projects-content-container h-full flex flex-col bg-background-primary",onClick:l,onDragStart:c,onDragEnd:u,children:[E.jsxs("div",{className:"projects-header h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-all duration-500 relative",children:[E.jsxs("div",{className:"flex items-center",children:[!t&&E.jsx("button",{onClick:r,className:"p-2 mr-2 rounded-md hover:bg-background-secondary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:E.jsx(bt,{name:"menu-line",size:20})})}),E.jsx(Wj,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:"Task Management"})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsxs("div",{className:"inline-flex rounded-full bg-background-container p-1",children:[E.jsxs("button",{type:"button",className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${i==="status"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>a("status"),children:[E.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1.5",children:E.jsx(bt,{name:"checkbox-multiple-line"})}),"By Status"]}),E.jsxs("button",{type:"button",className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${i==="project"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>a("project"),children:[E.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1.5",children:E.jsx(bt,{name:"layout-grid-line"})}),"By Project"]})]}),E.jsx(mi,{text:"Pomodoro Timer",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/pomodoro"?void 0:()=>n("/pomodoro"),"aria-label":e.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"timer-line",size:20})})})}),E.jsx(mi,{text:"Task management",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/projects"?void 0:()=>n("/projects"),"aria-label":e.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"task-line",size:20})})})}),E.jsx(mi,{text:"Productivity Insights",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/dashboard"?void 0:()=>n("/dashboard"),"aria-label":e.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"dashboard-line",size:20})})})}),E.jsx(mi,{text:"Calendar",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/calendar"?void 0:()=>n("/calendar"),"aria-label":e.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"calendar-line",size:20})})})}),E.jsx(mi,{text:"Deep Focus",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/deep-focus"?void 0:()=>n("/deep-focus"),"aria-label":e.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"brain-line",size:20})})})})]})]}),E.jsx("div",{className:"projects-scrollable-content flex-1 overflow-y-auto",children:i==="status"?E.jsx(tnt,{}):E.jsx("div",{className:"py-6",children:E.jsx(int,{})})})]})},ont=({children:n})=>E.jsxs("div",{className:"projects-page-container flex h-screen overflow-hidden",children:[E.jsx(ET,{}),E.jsx("main",{className:"projects-main-container flex-1 flex flex-col overflow-hidden",children:n})]}),snt=({message:n,duration:e=3e3,onUndo:t,onClose:r})=>{const[i,a]=K.useState(!1);if(!n||n.trim()==="")return null;K.useEffect(()=>{const l=setTimeout(()=>{o()},e);return()=>clearTimeout(l)},[e]);const o=()=>{a(!0),setTimeout(()=>{r&&r()},300)},s=()=>{t&&t(),o()};return E.jsxs("div",{className:`toast fixed bottom-4 right-4 z-50 flex items-center p-4 mb-3 min-w-[300px] bg-white shadow-lg rounded-lg border border-gray-200 ${i?"hiding":""}`,children:[E.jsx("div",{className:"flex-1 mr-4",children:E.jsx("p",{className:"text-sm text-gray-900",children:n})}),t&&E.jsx("button",{className:"undo-button px-3 py-1 text-xs font-medium rounded-md text-primary hover:bg-indigo-50",onClick:s,children:"Undo"})]})},lnt=({className:n=""})=>{const[e,t]=K.useState([]),r=a=>{const o=Date.now().toString();return t(s=>[...s,{...a,id:o}]),o},i=a=>{t(o=>o.filter(s=>s.id!==a))};return K.useEffect(()=>(typeof window<"u"&&(window.showToast=r),()=>{typeof window<"u"&&delete window.showToast}),[]),e.length===0?null:E.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${n}`,children:e.map(a=>E.jsx(snt,{message:a.message,duration:a.duration,onUndo:a.onUndo,onClose:()=>i(a.id)},a.id))})},cnt=()=>{Object.keys(localStorage).filter(t=>t.startsWith("deep-focus-storage-")&&!t.includes("anonymous")).forEach(t=>{try{localStorage.removeItem(t)}catch(r){console.warn("Failed to clear old deep focus storage:",r)}})};let uoe=null;const unt=()=>{const{user:n}=Rn();return K.useEffect(()=>{const e=async()=>{var i,a;if(!(n!=null&&n.uid)){console.log("🔄 No user authenticated, skipping extension sync");return}const r={userId:n.uid,userEmail:n.email||"",displayName:n.displayName||""};console.log("🔍 DEBUG: Starting user sync with extension for user:",n.uid);try{if(uoe!==n.uid&&(cnt(),uoe=n.uid),window.postMessage({type:"SET_USER_ID",payload:r,source:"make10000hours"},"*"),console.log("📤 DEBUG: Sent SET_USER_ID via window.postMessage for user:",n.uid),typeof window.chrome<"u"&&((a=(i=window.chrome)==null?void 0:i.runtime)!=null&&a.sendMessage))try{console.log("ℹ️ Chrome extension API available, but using window.postMessage bridge for security")}catch(o){console.warn("⚠️ Chrome API sync failed:",o)}else console.log("ℹ️ Chrome extension API not available, using window.postMessage only")}catch(o){console.warn("⚠️ Failed to sync user with extension:",o),console.warn("🔍 DEBUG: User sync error details:",{name:o==null?void 0:o.name,message:o==null?void 0:o.message,userId:n.uid})}};e();const t=setInterval(e,3e4);return()=>{clearInterval(t)}},[n==null?void 0:n.uid,n==null?void 0:n.email,n==null?void 0:n.displayName]),{user:n}},cH="RFC3986",uH={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},dnt="RFC1738",hnt=Array.isArray,Zh=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),rU=1024,fnt=(n,e,t,r,i)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(s){return"%26%23"+parseInt(s.slice(2),16)+"%3B"});let o="";for(let s=0;s<a.length;s+=rU){const l=a.length>=rU?a.slice(s,s+rU):a,c=[];for(let u=0;u<l.length;++u){let d=l.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===dnt&&(d===40||d===41)){c[c.length]=l.charAt(u);continue}if(d<128){c[c.length]=Zh[d];continue}if(d<2048){c[c.length]=Zh[192|d>>6]+Zh[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=Zh[224|d>>12]+Zh[128|d>>6&63]+Zh[128|d&63];continue}u+=1,d=65536+((d&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=Zh[240|d>>18]+Zh[128|d>>12&63]+Zh[128|d>>6&63]+Zh[128|d&63]}o+=c.join("")}return o};function pnt(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function doe(n,e){if(hnt(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const gnt=Object.prototype.hasOwnProperty,T_e={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},sf=Array.isArray,mnt=Array.prototype.push,E_e=function(n,e){mnt.apply(n,sf(e)?e:[e])},vnt=Date.prototype.toISOString,po={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:fnt,encodeValuesOnly:!1,format:cH,formatter:uH[cH],indices:!1,serializeDate(n){return vnt.call(n)},skipNulls:!1,strictNullHandling:!1};function ynt(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const iU={};function A_e(n,e,t,r,i,a,o,s,l,c,u,d,h,f,m,v,y,w){let _=n,S=w,A=0,C=!1;for(;(S=S.get(iU))!==void 0&&!C;){const j=S.get(n);if(A+=1,typeof j<"u"){if(j===A)throw new RangeError("Cyclic object value");C=!0}typeof S.get(iU)>"u"&&(A=0)}if(typeof c=="function"?_=c(e,_):_ instanceof Date?_=h==null?void 0:h(_):t==="comma"&&sf(_)&&(_=doe(_,function(j){return j instanceof Date?h==null?void 0:h(j):j})),_===null){if(a)return l&&!v?l(e,po.encoder,y,"key",f):e;_=""}if(ynt(_)||pnt(_)){if(l){const j=v?e:l(e,po.encoder,y,"key",f);return[(m==null?void 0:m(j))+"="+(m==null?void 0:m(l(_,po.encoder,y,"value",f)))]}return[(m==null?void 0:m(e))+"="+(m==null?void 0:m(String(_)))]}const D=[];if(typeof _>"u")return D;let M;if(t==="comma"&&sf(_))v&&l&&(_=doe(_,l)),M=[{value:_.length>0?_.join(",")||null:void 0}];else if(sf(c))M=c;else{const j=Object.keys(_);M=u?j.sort(u):j}const P=s?String(e).replace(/\./g,"%2E"):String(e),O=r&&sf(_)&&_.length===1?P+"[]":P;if(i&&sf(_)&&_.length===0)return O+"[]";for(let j=0;j<M.length;++j){const L=M[j],B=typeof L=="object"&&typeof L.value<"u"?L.value:_[L];if(o&&B===null)continue;const $=d&&s?L.replace(/\./g,"%2E"):L,Y=sf(_)?typeof t=="function"?t(O,$):O:O+(d?"."+$:"["+$+"]");w.set(n,A);const q=new WeakMap;q.set(iU,w),E_e(D,A_e(B,Y,t,r,i,a,o,s,t==="comma"&&v&&sf(_)?null:l,c,u,d,h,f,m,v,y,q))}return D}function bnt(n=po){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||po.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=cH;if(typeof n.format<"u"){if(!gnt.call(uH,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=uH[t];let i=po.filter;(typeof n.filter=="function"||sf(n.filter))&&(i=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in T_e?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=po.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:po.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:po.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:po.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:po.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?po.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:po.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:po.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:po.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:po.encodeValuesOnly,filter:i,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:po.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:po.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:po.strictNullHandling}}function wnt(n,e={}){let t=n;const r=bnt(e);let i,a;typeof r.filter=="function"?(a=r.filter,t=a("",t)):sf(r.filter)&&(a=r.filter,i=a);const o=[];if(typeof t!="object"||t===null)return"";const s=T_e[r.arrayFormat],l=s==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);const c=new WeakMap;for(let h=0;h<i.length;++h){const f=i[h];r.skipNulls&&t[f]===null||E_e(o,A_e(t[f],f,s,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const u=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}const DS="4.104.0";let hoe=!1,gD,C_e,D_e,dH,k_e,I_e,M_e,P_e,O_e;function _nt(n,e={auto:!1}){if(hoe)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(gD)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${gD}'\``);hoe=e.auto,gD=n.kind,C_e=n.fetch,D_e=n.FormData,dH=n.File,k_e=n.ReadableStream,I_e=n.getMultipartRequestOptions,M_e=n.getDefaultAgent,P_e=n.fileFromPath,O_e=n.isFsReadStream}class xnt{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Snt({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,i,a;try{t=fetch,r=Request,i=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:i,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,s)=>({...s,body:new xnt(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const R_e=()=>{gD||_nt(Snt(),{auto:!0})};R_e();class Cn extends Error{}class ps extends Cn{constructor(e,t,r,i){super(`${ps.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,r){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new Kj({message:r,cause:fH(t)});const a=t==null?void 0:t.error;return e===400?new N_e(e,a,r,i):e===401?new L_e(e,a,r,i):e===403?new j_e(e,a,r,i):e===404?new F_e(e,a,r,i):e===409?new $_e(e,a,r,i):e===422?new B_e(e,a,r,i):e===429?new U_e(e,a,r,i):e>=500?new V_e(e,a,r,i):new ps(e,a,r,i)}}class zu extends ps{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Kj extends ps{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class kW extends Kj{constructor({message:e}={}){super({message:e??"Request timed out."})}}class N_e extends ps{}class L_e extends ps{}class j_e extends ps{}class F_e extends ps{}class $_e extends ps{}class B_e extends ps{}class U_e extends ps{}class V_e extends ps{}class z_e extends Cn{constructor(){super("Could not parse response content as the length limit was reached")}}class H_e extends Cn{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var QM=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},J0=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Pc;class Xj{constructor(){Pc.set(this,void 0),this.buffer=new Uint8Array,QM(this,Pc,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const i=[];let a;for(;(a=Tnt(this.buffer,J0(this,Pc,"f")))!=null;){if(a.carriage&&J0(this,Pc,"f")==null){QM(this,Pc,a.index,"f");continue}if(J0(this,Pc,"f")!=null&&(a.index!==J0(this,Pc,"f")+1||a.carriage)){i.push(this.decodeText(this.buffer.slice(0,J0(this,Pc,"f")-1))),this.buffer=this.buffer.slice(J0(this,Pc,"f")),QM(this,Pc,null,"f");continue}const o=J0(this,Pc,"f")!==null?a.preceding-1:a.preceding,s=this.decodeText(this.buffer.slice(0,o));i.push(s),this.buffer=this.buffer.slice(a.index),QM(this,Pc,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Cn(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Cn(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Cn("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Pc=new WeakMap;Xj.NEWLINE_CHARS=new Set([`
`,"\r"]);Xj.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Tnt(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Ent(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}function q_e(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class yf{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of Ant(e,t))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let s;try{s=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(s&&s.error)throw new ps(void 0,s.error,void 0,Q_e(e.headers));yield s}else{let s;try{s=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new ps(void 0,s.error,s.message,void 0);yield{event:o.event,data:s}}}a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||t.abort()}}return new yf(i,t)}static fromReadableStream(e,t){let r=!1;async function*i(){const o=new Xj,s=q_e(e);for await(const l of s)for(const c of o.decode(l))yield c;for(const l of o.flush())yield l}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const s of i())o||s&&(yield JSON.parse(s));o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||t.abort()}}return new yf(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const o=r.next();e.push(o),t.push(o)}return a.shift()}});return[new yf(()=>i(e),this.controller),new yf(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new k_e({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await t.next();if(o)return i.close();const s=r.encode(JSON.stringify(a)+`
`);i.enqueue(s)}catch(a){i.error(a)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}}async function*Ant(n,e){if(!n.body)throw e.abort(),new Cn("Attempted to iterate over a response with no body");const t=new Dnt,r=new Xj,i=q_e(n.body);for await(const a of Cnt(i))for(const o of r.decode(a)){const s=t.decode(o);s&&(yield s)}for(const a of r.flush()){const o=t.decode(a);o&&(yield o)}}async function*Cnt(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let a;for(;(a=Ent(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class Dnt{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=knt(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function knt(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const G_e=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",W_e=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Zj(n),Zj=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Int=n=>W_e(n)||G_e(n)||O_e(n);async function Y_e(n,e,t){var i;if(n=await n,W_e(n))return n;if(G_e(n)){const a=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=Zj(a)?[await a.arrayBuffer()]:[a];return new dH(o,e,t)}const r=await Mnt(n);if(e||(e=Ont(n)??"unknown_file"),!(t!=null&&t.type)){const a=(i=r[0])==null?void 0:i.type;typeof a=="string"&&(t={...t,type:a})}return new dH(r,e,t)}async function Mnt(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(Zj(n))e.push(await n.arrayBuffer());else if(Rnt(n))for await(const r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${Pnt(n)}`);return e}function Pnt(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function Ont(n){var e;return aU(n.name)||aU(n.filename)||((e=aU(n.path))==null?void 0:e.split(/[\\/]/).pop())}const aU=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},Rnt=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",foe=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",Nw=async n=>{const e=await Nnt(n.body);return I_e(e,n)},Nnt=async n=>{const e=new D_e;return await Promise.all(Object.entries(n||{}).map(([t,r])=>hH(e,t,r))),e},hH=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(Int(t)){const r=await Y_e(t);n.append(e,r)}else if(Array.isArray(t))await Promise.all(t.map(r=>hH(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,i])=>hH(n,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var a1={},Lnt=function(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},jnt=function(n,e,t,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},JM;R_e();async function K_e(n){var o;const{response:e}=n;if(n.options.stream)return Qv("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):yf.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type"),r=(o=t==null?void 0:t.split(";")[0])==null?void 0:o.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const s=await e.json();return Qv("response",e.status,e.url,e.headers,s),X_e(s,e)}const a=await e.text();return Qv("response",e.status,e.url,e.headers,a),a}function X_e(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Qj extends Promise{constructor(e,t=K_e){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Qj(this.responsePromise,async t=>X_e(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Fnt{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:i,fetch:a}){this.baseURL=e,this.maxRetries=oU("maxRetries",t),this.timeout=oU("timeout",r),this.httpAgent=i,this.fetch=a??C_e}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...znt(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Wnt()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async i=>{const a=i&&Zj(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:t,...i,body:a}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var v;const r={...e},{method:i,path:a,query:o,headers:s={}}=r,l=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:foe(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,c=this.calculateContentLength(l),u=this.buildURL(a,o);"timeout"in r&&oU("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const d=r.httpAgent??this.httpAgent??M_e(u),h=r.timeout+1e3;typeof((v=d==null?void 0:d.options)==null?void 0:v.timeout)=="number"&&h>(d.options.timeout??0)&&(d.options.timeout=h),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:r,headers:s,contentLength:c,retryCount:t});return{req:{method:i,...l&&{body:l},headers:f,...d&&{agent:d},signal:r.signal??null},url:u,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:i}){const a={};r&&(a["content-length"]=r);const o=this.defaultHeaders(e);return voe(a,o),voe(a,t),foe(e.body)&&gD!=="node"&&delete a["content-type"],tP(o,"x-stainless-retry-count")===void 0&&tP(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(i)),tP(o,"x-stainless-timeout")===void 0&&tP(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,i){return ps.generate(e,t,r,i)}request(e,t=null){return new Qj(this.makeRequest(e,t))}async makeRequest(e,t){var d,h;const r=await e,i=r.maxRetries??this.maxRetries;t==null&&(t=i),await this.prepareOptions(r);const{req:a,url:o,timeout:s}=this.buildRequest(r,{retryCount:i-t});if(await this.prepareRequest(a,{url:o,options:r}),Qv("request",o,r,a.headers),(d=r.signal)!=null&&d.aborted)throw new zu;const l=new AbortController,c=await this.fetchWithTimeout(o,a,s,l).catch(fH);if(c instanceof Error){if((h=r.signal)!=null&&h.aborted)throw new zu;if(t)return this.retryRequest(r,t);throw c.name==="AbortError"?new kW:new Kj({cause:c})}const u=Q_e(c.headers);if(!c.ok){if(t&&this.shouldRetry(c)){const _=`retrying, ${t} attempts remaining`;return Qv(`response (error; ${_})`,c.status,o,u),this.retryRequest(r,t,u)}const f=await c.text().catch(_=>fH(_).message),m=Hnt(f),v=m?void 0:f;throw Qv(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,o,u,v),this.makeStatusError(c.status,m,v,u)}return{response:c,options:r,controller:l}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new $nt(this,r,e)}buildURL(e,t){const r=Gnt(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return J_e(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new Cn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,i){const{signal:a,...o}=t||{};a&&a.addEventListener("abort",()=>i.abort());const s=setTimeout(()=>i.abort(),r),l={signal:i.signal,...o};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(s)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let i;const a=r==null?void 0:r["retry-after-ms"];if(a){const s=parseFloat(a);Number.isNaN(s)||(i=s)}const o=r==null?void 0:r["retry-after"];if(o&&!i){const s=parseFloat(o);Number.isNaN(s)?i=Date.parse(o)-Date.now():i=s*1e3}if(!(i&&0<=i&&i<60*1e3)){const s=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,s)}return await r2(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,o=Math.min(.5*Math.pow(2,a),8),s=1-Math.random()*.25;return o*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${DS}`}}class Z_e{constructor(e,t,r,i){JM.set(this,void 0),Lnt(this,JM,e),this.options=i,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Cn("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[i,a]of r)e.url.searchParams.set(i,a);t.query=void 0,t.path=e.url.toString()}return await jnt(this,JM,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(JM=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class $nt extends Qj{constructor(e,t,r){super(t,async i=>new r(e,i.response,await K_e(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const Q_e=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),Bnt={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},wa=n=>typeof n=="object"&&n!==null&&!J_e(n)&&Object.keys(n).every(e=>exe(Bnt,e)),Unt=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":DS,"X-Stainless-OS":goe(Deno.build.os),"X-Stainless-Arch":poe(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":DS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":DS,"X-Stainless-OS":goe(process.platform),"X-Stainless-Arch":poe(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=Vnt();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":DS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":DS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Vnt(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${a}.${o}`}}}return null}const poe=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",goe=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let moe;const znt=()=>moe??(moe=Unt()),Hnt=n=>{try{return JSON.parse(n)}catch{return}},qnt=/^[a-z][a-z0-9+.-]*:/i,Gnt=n=>qnt.test(n),r2=n=>new Promise(e=>setTimeout(e,n)),oU=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Cn(`${n} must be an integer`);if(e<0)throw new Cn(`${n} must be a positive integer`);return e},fH=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},eP=n=>{var e,t,r,i;if(typeof process<"u")return((e=a1==null?void 0:a1[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(r=(t=Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:i.trim()};function J_e(n){if(!n)return!0;for(const e in n)return!1;return!0}function exe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function voe(n,e){for(const t in e){if(!exe(e,t))continue;const r=t.toLowerCase();if(!r)continue;const i=e[t];i===null?delete n[r]:i!==void 0&&(n[r]=i)}}const yoe=new Set(["authorization","api-key"]);function Qv(n,...e){if(typeof process<"u"&&(a1==null?void 0:a1.DEBUG)==="true"){const t=e.map(r=>{if(!r)return r;if(r.headers){const a={...r,headers:{...r.headers}};for(const o in r.headers)yoe.has(o.toLowerCase())&&(a.headers[o]="REDACTED");return a}let i=null;for(const a in r)yoe.has(a.toLowerCase())&&(i??(i={...r}),i[a]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${n}`,...t)}}const Wnt=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),Ynt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Knt=n=>typeof(n==null?void 0:n.get)=="function",tP=(n,e)=>{var r;const t=e.toLowerCase();if(Knt(n)){const i=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,o,s)=>o+s.toUpperCase());for(const a of[e,t,e.toUpperCase(),i]){const o=n.get(a);if(o)return o}}for(const[i,a]of Object.entries(n))if(i.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},Xnt=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function sU(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class Jj extends Z_e{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Ao extends Z_e{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const t=(r=e[e.length-1])==null?void 0:r.id;return t?{params:{after:t}}:null}}class Pn{constructor(e){this._client=e}}let txe=class extends Pn{list(e,t={},r){return wa(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,Znt,{query:t,...r})}},e5=class extends Pn{constructor(){super(...arguments),this.messages=new txe(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return wa(e)?this.list({},e):this._client.getAPIList("/chat/completions",t5,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class t5 extends Ao{}class Znt extends Ao{}e5.ChatCompletionsPage=t5;e5.Messages=txe;let n5=class extends Pn{constructor(){super(...arguments),this.completions=new e5(this._client)}};n5.Completions=e5;n5.ChatCompletionsPage=t5;class nxe extends Pn{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class rxe extends Pn{create(e,t){return this._client.post("/audio/transcriptions",Nw({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class ixe extends Pn{create(e,t){return this._client.post("/audio/translations",Nw({body:e,...t,__metadata:{model:e.model}}))}}class i2 extends Pn{constructor(){super(...arguments),this.transcriptions=new rxe(this._client),this.translations=new ixe(this._client),this.speech=new nxe(this._client)}}i2.Transcriptions=rxe;i2.Translations=ixe;i2.Speech=nxe;class IW extends Pn{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return wa(e)?this.list({},e):this._client.getAPIList("/batches",MW,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class MW extends Ao{}IW.BatchesPage=MW;var Ud=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},ma=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},pH,OO,RO,LC,jC,NO,FC,Xp,$C,kN,IN,kS,axe;class PW{constructor(){pH.add(this),this.controller=new AbortController,OO.set(this,void 0),RO.set(this,()=>{}),LC.set(this,()=>{}),jC.set(this,void 0),NO.set(this,()=>{}),FC.set(this,()=>{}),Xp.set(this,{}),$C.set(this,!1),kN.set(this,!1),IN.set(this,!1),kS.set(this,!1),Ud(this,OO,new Promise((e,t)=>{Ud(this,RO,e,"f"),Ud(this,LC,t,"f")}),"f"),Ud(this,jC,new Promise((e,t)=>{Ud(this,NO,e,"f"),Ud(this,FC,t,"f")}),"f"),ma(this,OO,"f").catch(()=>{}),ma(this,jC,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ma(this,pH,"m",axe).bind(this))},0)}_connected(){this.ended||(ma(this,RO,"f").call(this),this._emit("connect"))}get ended(){return ma(this,$C,"f")}get errored(){return ma(this,kN,"f")}get aborted(){return ma(this,IN,"f")}abort(){this.controller.abort()}on(e,t){return(ma(this,Xp,"f")[e]||(ma(this,Xp,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=ma(this,Xp,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===t);return i>=0&&r.splice(i,1),this}once(e,t){return(ma(this,Xp,"f")[e]||(ma(this,Xp,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{Ud(this,kS,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){Ud(this,kS,!0,"f"),await ma(this,jC,"f")}_emit(e,...t){if(ma(this,$C,"f"))return;e==="end"&&(Ud(this,$C,!0,"f"),ma(this,NO,"f").call(this));const r=ma(this,Xp,"f")[e];if(r&&(ma(this,Xp,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!ma(this,kS,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ma(this,LC,"f").call(this,i),ma(this,FC,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!ma(this,kS,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ma(this,LC,"f").call(this,i),ma(this,FC,"f").call(this,i),this._emit("end")}}_emitFinal(){}}OO=new WeakMap,RO=new WeakMap,LC=new WeakMap,jC=new WeakMap,NO=new WeakMap,FC=new WeakMap,Xp=new WeakMap,$C=new WeakMap,kN=new WeakMap,IN=new WeakMap,kS=new WeakMap,pH=new WeakSet,axe=function(e){if(Ud(this,kN,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new zu),e instanceof zu)return Ud(this,IN,!0,"f"),this._emit("abort",e);if(e instanceof Cn)return this._emit("error",e);if(e instanceof Error){const t=new Cn(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Cn(String(e)))};var nn=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},kc=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},as,gH,lf,LO,qd,Zb,BS,jb,MN,Rc,jO,FO,mD,BC,UC,boe,woe,_oe,xoe,Soe,Toe,Eoe;class eh extends PW{constructor(){super(...arguments),as.add(this),gH.set(this,[]),lf.set(this,{}),LO.set(this,{}),qd.set(this,void 0),Zb.set(this,void 0),BS.set(this,void 0),jb.set(this,void 0),MN.set(this,void 0),Rc.set(this,void 0),jO.set(this,void 0),FO.set(this,void 0),mD.set(this,void 0)}[(gH=new WeakMap,lf=new WeakMap,LO=new WeakMap,qd=new WeakMap,Zb=new WeakMap,BS=new WeakMap,jb=new WeakMap,MN=new WeakMap,Rc=new WeakMap,jO=new WeakMap,FO=new WeakMap,mD=new WeakMap,as=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new eh;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=yf.fromReadableStream(e,this.controller);for await(const o of i)nn(this,as,"m",BC).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new zu;return this._addRun(nn(this,as,"m",UC).call(this))}toReadableStream(){return new yf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,i,a){const o=new eh;return o._run(()=>o._runToolAssistantStream(e,t,r,i,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,r,i,a){var c;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const s={...i,stream:!0},l=await e.submitToolOutputs(t,r,s,{...a,signal:this.controller.signal});this._connected();for await(const u of l)nn(this,as,"m",BC).call(this,u);if((c=l.controller.signal)!=null&&c.aborted)throw new zu;return this._addRun(nn(this,as,"m",UC).call(this))}static createThreadAssistantStream(e,t,r){const i=new eh;return i._run(()=>i._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,r,i){const a=new eh;return a._run(()=>a._runAssistantStream(e,t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return nn(this,jO,"f")}currentRun(){return nn(this,FO,"f")}currentMessageSnapshot(){return nn(this,qd,"f")}currentRunStepSnapshot(){return nn(this,mD,"f")}async finalRunSteps(){return await this.done(),Object.values(nn(this,lf,"f"))}async finalMessages(){return await this.done(),Object.values(nn(this,LO,"f"))}async finalRun(){if(await this.done(),!nn(this,Zb,"f"))throw Error("Final run was not received.");return nn(this,Zb,"f")}async _createThreadAssistantStream(e,t,r){var s;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},o=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const l of o)nn(this,as,"m",BC).call(this,l);if((s=o.controller.signal)!=null&&s.aborted)throw new zu;return this._addRun(nn(this,as,"m",UC).call(this))}async _createAssistantStream(e,t,r,i){var l;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},s=await e.create(t,o,{...i,signal:this.controller.signal});this._connected();for await(const c of s)nn(this,as,"m",BC).call(this,c);if((l=s.controller.signal)!=null&&l.aborted)throw new zu;return this._addRun(nn(this,as,"m",UC).call(this))}static accumulateDelta(e,t){for(const[r,i]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let a=e[r];if(a==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof a=="string"&&typeof i=="string")a+=i;else if(typeof a=="number"&&typeof i=="number")a+=i;else if(sU(a)&&sU(i))a=this.accumulateDelta(a,i);else if(Array.isArray(a)&&Array.isArray(i)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...i);continue}for(const o of i){if(!sU(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const s=o.index;if(s==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof s!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${s}`);const l=a[s];l==null?a.push(o):a[s]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,i){return await this._createAssistantStream(t,e,r,i)}async _runToolAssistantStream(e,t,r,i,a){return await this._createToolAssistantStream(r,e,t,i,a)}}BC=function(e){if(!this.ended)switch(kc(this,jO,e,"f"),nn(this,as,"m",_oe).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":nn(this,as,"m",Eoe).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":nn(this,as,"m",woe).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":nn(this,as,"m",boe).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},UC=function(){if(this.ended)throw new Cn("stream has ended, this shouldn't happen");if(!nn(this,Zb,"f"))throw Error("Final run has not been received");return nn(this,Zb,"f")},boe=function(e){const[t,r]=nn(this,as,"m",Soe).call(this,e,nn(this,qd,"f"));kc(this,qd,t,"f"),nn(this,LO,"f")[t.id]=t;for(const i of r){const a=t.content[i.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let a=i.text,o=t.content[i.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=nn(this,BS,"f")){if(nn(this,jb,"f"))switch(nn(this,jb,"f").type){case"text":this._emit("textDone",nn(this,jb,"f").text,nn(this,qd,"f"));break;case"image_file":this._emit("imageFileDone",nn(this,jb,"f").image_file,nn(this,qd,"f"));break}kc(this,BS,i.index,"f")}kc(this,jb,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(nn(this,BS,"f")!==void 0){const i=e.data.content[nn(this,BS,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,nn(this,qd,"f"));break;case"text":this._emit("textDone",i.text,nn(this,qd,"f"));break}}nn(this,qd,"f")&&this._emit("messageDone",e.data),kc(this,qd,void 0,"f")}},woe=function(e){const t=nn(this,as,"m",xoe).call(this,e);switch(kc(this,mD,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==nn(this,MN,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(nn(this,Rc,"f")&&this._emit("toolCallDone",nn(this,Rc,"f")),kc(this,MN,a.index,"f"),kc(this,Rc,t.step_details.tool_calls[a.index],"f"),nn(this,Rc,"f")&&this._emit("toolCallCreated",nn(this,Rc,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":kc(this,mD,void 0,"f"),e.data.step_details.type=="tool_calls"&&nn(this,Rc,"f")&&(this._emit("toolCallDone",nn(this,Rc,"f")),kc(this,Rc,void 0,"f")),this._emit("runStepDone",e.data,t);break}},_oe=function(e){nn(this,gH,"f").push(e),this._emit("event",e)},xoe=function(e){switch(e.event){case"thread.run.step.created":return nn(this,lf,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=nn(this,lf,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=eh.accumulateDelta(t,r.delta);nn(this,lf,"f")[e.data.id]=i}return nn(this,lf,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":nn(this,lf,"f")[e.data.id]=e.data;break}if(nn(this,lf,"f")[e.data.id])return nn(this,lf,"f")[e.data.id];throw new Error("No snapshot available")},Soe=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const a of i.delta.content)if(a.index in t.content){let o=t.content[a.index];t.content[a.index]=nn(this,as,"m",Toe).call(this,a,o)}else t.content[a.index]=a,r.push(a);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Toe=function(e,t){return eh.accumulateDelta(t,e)},Eoe=function(e){switch(kc(this,FO,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":kc(this,Zb,e.data,"f"),nn(this,Rc,"f")&&(this._emit("toolCallDone",nn(this,Rc,"f")),kc(this,Rc,void 0,"f"));break}};class OW extends Pn{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return wa(e)?this.list({},e):this._client.getAPIList("/assistants",RW,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class RW extends Ao{}OW.AssistantsPage=RW;function Aoe(n){return typeof n.parse=="function"}const o1=n=>(n==null?void 0:n.role)==="assistant",oxe=n=>(n==null?void 0:n.role)==="function",sxe=n=>(n==null?void 0:n.role)==="tool";function NW(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function a2(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function Qnt(n,e){return!e||!lxe(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:LW(n,e)}function LW(n,e){const t=n.choices.map(r=>{var i;if(r.finish_reason==="length")throw new z_e;if(r.finish_reason==="content_filter")throw new H_e;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(a=>ert(e,a)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Jnt(e,r.message.content):null}}});return{...n,choices:t}}function Jnt(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function ert(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:a2(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function trt(n,e){var r;if(!n)return!1;const t=(r=n.tools)==null?void 0:r.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return a2(t)||(t==null?void 0:t.function.strict)||!1}function lxe(n){var e;return NW(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>a2(t)||t.type==="function"&&t.function.strict===!0))??!1}function nrt(n){for(const e of n??[]){if(e.type!=="function")throw new Cn(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Cn(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Hl=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ls,mH,PN,vH,yH,bH,cxe,wH;const Coe=10;class uxe extends PW{constructor(){super(...arguments),Ls.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(oxe(e)||sxe(e))&&e.content)this._emit("functionCallResult",e.content);else if(o1(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(o1(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Cn("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Hl(this,Ls,"m",mH).call(this)}async finalMessage(){return await this.done(),Hl(this,Ls,"m",PN).call(this)}async finalFunctionCall(){return await this.done(),Hl(this,Ls,"m",vH).call(this)}async finalFunctionCallResult(){return await this.done(),Hl(this,Ls,"m",yH).call(this)}async totalUsage(){return await this.done(),Hl(this,Ls,"m",bH).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Hl(this,Ls,"m",PN).call(this);t&&this._emit("finalMessage",t);const r=Hl(this,Ls,"m",mH).call(this);r&&this._emit("finalContent",r);const i=Hl(this,Ls,"m",vH).call(this);i&&this._emit("finalFunctionCall",i);const a=Hl(this,Ls,"m",yH).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Hl(this,Ls,"m",bH).call(this))}async _createChatCompletion(e,t,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Hl(this,Ls,"m",cxe).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(LW(a,t))}async _runChatCompletion(e,t,r){for(const i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){var h;const i="function",{function_call:a="auto",stream:o,...s}=t,l=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:c=Coe}=r||{},u={};for(const f of t.functions)u[f.name||f.function.name]=f;const d=t.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<c;++f){const v=(h=(await this._createChatCompletion(e,{...s,function_call:a,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:h.message;if(!v)throw new Cn("missing message in ChatCompletion response");if(!v.function_call)return;const{name:y,arguments:w}=v.function_call,_=u[y];if(_){if(l&&l!==y){const D=`Invalid function_call: ${JSON.stringify(y)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:y,content:D});continue}}else{const D=`Invalid function_call: ${JSON.stringify(y)}. Available options are: ${d.map(M=>JSON.stringify(M.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:y,content:D});continue}let S;try{S=Aoe(_)?await _.parse(w):w}catch(D){this._addMessage({role:i,name:y,content:D instanceof Error?D.message:String(D)});continue}const A=await _.function(S,this),C=Hl(this,Ls,"m",wH).call(this,A);if(this._addMessage({role:i,name:y,content:C}),l)return}}async _runTools(e,t,r){var f,m,v;const i="tool",{tool_choice:a="auto",stream:o,...s}=t,l=typeof a!="string"&&((f=a==null?void 0:a.function)==null?void 0:f.name),{maxChatCompletions:c=Coe}=r||{},u=t.tools.map(y=>{if(a2(y)){if(!y.$callback)throw new Cn("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),d={};for(const y of u)y.type==="function"&&(d[y.function.name||y.function.function.name]=y.function);const h="tools"in t?u.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of t.messages)this._addMessage(y,!1);for(let y=0;y<c;++y){const _=(m=(await this._createChatCompletion(e,{...s,tool_choice:a,tools:h,messages:[...this.messages]},r)).choices[0])==null?void 0:m.message;if(!_)throw new Cn("missing message in ChatCompletion response");if(!((v=_.tool_calls)!=null&&v.length))return;for(const S of _.tool_calls){if(S.type!=="function")continue;const A=S.id,{name:C,arguments:D}=S.function,M=d[C];if(M){if(l&&l!==C){const L=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:A,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(d).map(B=>JSON.stringify(B)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:A,content:L});continue}let P;try{P=Aoe(M)?await M.parse(D):D}catch(L){const B=L instanceof Error?L.message:String(L);this._addMessage({role:i,tool_call_id:A,content:B});continue}const O=await M.function(P,this),j=Hl(this,Ls,"m",wH).call(this,O);if(this._addMessage({role:i,tool_call_id:A,content:j}),l)return}}}}Ls=new WeakSet,mH=function(){return Hl(this,Ls,"m",PN).call(this).content??null},PN=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(o1(t)){const{function_call:r,...i}=t,a={...i,content:t.content??null,refusal:t.refusal??null};return r&&(a.function_call=r),a}}throw new Cn("stream ended without producing a ChatCompletionMessage with role=assistant")},vH=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(o1(i)&&(i!=null&&i.function_call))return i.function_call;if(o1(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(t=i.tool_calls.at(-1))==null?void 0:t.function}},yH=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(oxe(t)&&t.content!=null||sxe(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},bH=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},cxe=function(e){if(e.n!=null&&e.n>1)throw new Cn("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},wH=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Vk extends uxe{static runFunctions(e,t,r){const i=new Vk,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,a)),i}static runTools(e,t,r){const i=new Vk,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,a)),i}_addMessage(e,t=!0){super._addMessage(e,t),o1(e)&&e.content&&this._emit("content",e.content)}}const dxe=1,hxe=2,fxe=4,pxe=8,gxe=16,mxe=32,vxe=64,yxe=128,bxe=256,wxe=yxe|bxe,_xe=gxe|mxe|wxe|vxe,xxe=dxe|hxe|_xe,Sxe=fxe|pxe,rrt=xxe|Sxe,Lo={STR:dxe,NUM:hxe,ARR:fxe,OBJ:pxe,NULL:gxe,BOOL:mxe,NAN:vxe,INFINITY:yxe,MINUS_INFINITY:bxe,INF:wxe,SPECIAL:_xe,ATOM:xxe,COLLECTION:Sxe,ALL:rrt};class irt extends Error{}class art extends Error{}function ort(n,e=Lo.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return srt(n.trim(),e)}const srt=(n,e)=>{const t=n.length;let r=0;const i=h=>{throw new irt(`${h} at position ${r}`)},a=h=>{throw new art(`${h} at position ${r}`)},o=()=>(d(),r>=t&&i("Unexpected end of input"),n[r]==='"'?s():n[r]==="{"?l():n[r]==="["?c():n.substring(r,r+4)==="null"||Lo.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||Lo.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||Lo.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||Lo.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||Lo.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||Lo.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):u()),s=()=>{const h=r;let f=!1;for(r++;r<t&&(n[r]!=='"'||f&&n[r-1]==="\\");)f=n[r]==="\\"?!f:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(h,++r-Number(f)))}catch(m){a(String(m))}else if(Lo.STR&e)try{return JSON.parse(n.substring(h,r-Number(f))+'"')}catch{return JSON.parse(n.substring(h,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const h={};try{for(;n[r]!=="}";){if(d(),r>=t&&Lo.OBJ&e)return h;const f=s();d(),r++;try{const m=o();Object.defineProperty(h,f,{value:m,writable:!0,enumerable:!0,configurable:!0})}catch(m){if(Lo.OBJ&e)return h;throw m}d(),n[r]===","&&r++}}catch{if(Lo.OBJ&e)return h;i("Expected '}' at end of object")}return r++,h},c=()=>{r++;const h=[];try{for(;n[r]!=="]";)h.push(o()),d(),n[r]===","&&r++}catch{if(Lo.ARR&e)return h;i("Expected ']' at end of array")}return r++,h},u=()=>{if(r===0){n==="-"&&Lo.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(f){if(Lo.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(f))}}const h=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(Lo.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(h,r))}catch{n.substring(h,r)==="-"&&Lo.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(h,n.lastIndexOf("e")))}catch(m){a(String(m))}}},d=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return o()},Doe=n=>ort(n,Lo.ALL^Lo.NUM);var Bx=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Ci=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},ho,Hp,Ux,dv,lU,nP,cU,uU,dU,rP,hU,koe;class zk extends uxe{constructor(e){super(),ho.add(this),Hp.set(this,void 0),Ux.set(this,void 0),dv.set(this,void 0),Bx(this,Hp,e,"f"),Bx(this,Ux,[],"f")}get currentChatCompletionSnapshot(){return Ci(this,dv,"f")}static fromReadableStream(e){const t=new zk(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const i=new zk(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ci(this,ho,"m",lU).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const s of a)Ci(this,ho,"m",cU).call(this,s);if((o=a.controller.signal)!=null&&o.aborted)throw new zu;return this._addChatCompletion(Ci(this,ho,"m",rP).call(this))}async _fromReadableStream(e,t){var o;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Ci(this,ho,"m",lU).call(this),this._connected();const i=yf.fromReadableStream(e,this.controller);let a;for await(const s of i)a&&a!==s.id&&this._addChatCompletion(Ci(this,ho,"m",rP).call(this)),Ci(this,ho,"m",cU).call(this,s),a=s.id;if((o=i.controller.signal)!=null&&o.aborted)throw new zu;return this._addChatCompletion(Ci(this,ho,"m",rP).call(this))}[(Hp=new WeakMap,Ux=new WeakMap,dv=new WeakMap,ho=new WeakSet,lU=function(){this.ended||Bx(this,dv,void 0,"f")},nP=function(t){let r=Ci(this,Ux,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Ci(this,Ux,"f")[t.index]=r,r)},cU=function(t){var i,a,o,s,l,c,u,d,h,f,m,v,y,w,_;if(this.ended)return;const r=Ci(this,ho,"m",koe).call(this,t);this._emit("chunk",t,r);for(const S of t.choices){const A=r.choices[S.index];S.delta.content!=null&&((i=A.message)==null?void 0:i.role)==="assistant"&&((a=A.message)!=null&&a.content)&&(this._emit("content",S.delta.content,A.message.content),this._emit("content.delta",{delta:S.delta.content,snapshot:A.message.content,parsed:A.message.parsed})),S.delta.refusal!=null&&((o=A.message)==null?void 0:o.role)==="assistant"&&((s=A.message)!=null&&s.refusal)&&this._emit("refusal.delta",{delta:S.delta.refusal,snapshot:A.message.refusal}),((l=S.logprobs)==null?void 0:l.content)!=null&&((c=A.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=S.logprobs)==null?void 0:u.content,snapshot:((d=A.logprobs)==null?void 0:d.content)??[]}),((h=S.logprobs)==null?void 0:h.refusal)!=null&&((f=A.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(m=S.logprobs)==null?void 0:m.refusal,snapshot:((v=A.logprobs)==null?void 0:v.refusal)??[]});const C=Ci(this,ho,"m",nP).call(this,A);A.finish_reason&&(Ci(this,ho,"m",dU).call(this,A),C.current_tool_call_index!=null&&Ci(this,ho,"m",uU).call(this,A,C.current_tool_call_index));for(const D of S.delta.tool_calls??[])C.current_tool_call_index!==D.index&&(Ci(this,ho,"m",dU).call(this,A),C.current_tool_call_index!=null&&Ci(this,ho,"m",uU).call(this,A,C.current_tool_call_index)),C.current_tool_call_index=D.index;for(const D of S.delta.tool_calls??[]){const M=(y=A.message.tool_calls)==null?void 0:y[D.index];M!=null&&M.type&&((M==null?void 0:M.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(w=M.function)==null?void 0:w.name,index:D.index,arguments:M.function.arguments,parsed_arguments:M.function.parsed_arguments,arguments_delta:((_=D.function)==null?void 0:_.arguments)??""}):(M==null||M.type,void 0))}}},uU=function(t,r){var o,s,l;if(Ci(this,ho,"m",nP).call(this,t).done_tool_calls.has(r))return;const a=(o=t.message.tool_calls)==null?void 0:o[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(s=Ci(this,Hp,"f"))==null?void 0:s.tools)==null?void 0:l.find(u=>u.type==="function"&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:a2(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},dU=function(t){var i,a;const r=Ci(this,ho,"m",nP).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const o=Ci(this,ho,"m",hU).call(this);this._emit("content.done",{content:t.message.content,parsed:o?o.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(i=t.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},rP=function(){if(this.ended)throw new Cn("stream has ended, this shouldn't happen");const t=Ci(this,dv,"f");if(!t)throw new Cn("request ended without sending any chunks");return Bx(this,dv,void 0,"f"),Bx(this,Ux,[],"f"),lrt(t,Ci(this,Hp,"f"))},hU=function(){var r;const t=(r=Ci(this,Hp,"f"))==null?void 0:r.response_format;return NW(t)?t:null},koe=function(t){var r,i,a,o;let s=Ci(this,dv,"f");const{choices:l,...c}=t;s?Object.assign(s,c):s=Bx(this,dv,{...c,choices:[]},"f");for(const{delta:u,finish_reason:d,index:h,logprobs:f=null,...m}of t.choices){let v=s.choices[h];if(v||(v=s.choices[h]={finish_reason:d,index:h,message:{},logprobs:f,...m}),f)if(!v.logprobs)v.logprobs=Object.assign({},f);else{const{content:D,refusal:M,...P}=f;Object.assign(v.logprobs,P),D&&((r=v.logprobs).content??(r.content=[]),v.logprobs.content.push(...D)),M&&((i=v.logprobs).refusal??(i.refusal=[]),v.logprobs.refusal.push(...M))}if(d&&(v.finish_reason=d,Ci(this,Hp,"f")&&lxe(Ci(this,Hp,"f")))){if(d==="length")throw new z_e;if(d==="content_filter")throw new H_e}if(Object.assign(v,m),!u)continue;const{content:y,refusal:w,function_call:_,role:S,tool_calls:A,...C}=u;if(Object.assign(v.message,C),w&&(v.message.refusal=(v.message.refusal||"")+w),S&&(v.message.role=S),_&&(v.message.function_call?(_.name&&(v.message.function_call.name=_.name),_.arguments&&((a=v.message.function_call).arguments??(a.arguments=""),v.message.function_call.arguments+=_.arguments)):v.message.function_call=_),y&&(v.message.content=(v.message.content||"")+y,!v.message.refusal&&Ci(this,ho,"m",hU).call(this)&&(v.message.parsed=Doe(v.message.content))),A){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:D,id:M,type:P,function:O,...j}of A){const L=(o=v.message.tool_calls)[D]??(o[D]={});Object.assign(L,j),M&&(L.id=M),P&&(L.type=P),O&&(L.function??(L.function={name:O.name??"",arguments:""})),O!=null&&O.name&&(L.function.name=O.name),O!=null&&O.arguments&&(L.function.arguments+=O.arguments,trt(Ci(this,Hp,"f"),L)&&(L.function.parsed_arguments=Doe(L.function.arguments)))}}}return s},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new yf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function lrt(n,e){const{id:t,choices:r,created:i,model:a,system_fingerprint:o,...s}=n,l={...s,id:t,choices:r.map(({message:c,finish_reason:u,index:d,logprobs:h,...f})=>{if(!u)throw new Cn(`missing finish_reason for choice ${d}`);const{content:m=null,function_call:v,tool_calls:y,...w}=c,_=c.role;if(!_)throw new Cn(`missing role for choice ${d}`);if(v){const{arguments:S,name:A}=v;if(S==null)throw new Cn(`missing function_call.arguments for choice ${d}`);if(!A)throw new Cn(`missing function_call.name for choice ${d}`);return{...f,message:{content:m,function_call:{arguments:S,name:A},role:_,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}return y?{...f,index:d,finish_reason:u,logprobs:h,message:{...w,role:_,content:m,refusal:c.refusal??null,tool_calls:y.map((S,A)=>{const{function:C,type:D,id:M,...P}=S,{arguments:O,name:j,...L}=C||{};if(M==null)throw new Cn(`missing choices[${d}].tool_calls[${A}].id
${iP(n)}`);if(D==null)throw new Cn(`missing choices[${d}].tool_calls[${A}].type
${iP(n)}`);if(j==null)throw new Cn(`missing choices[${d}].tool_calls[${A}].function.name
${iP(n)}`);if(O==null)throw new Cn(`missing choices[${d}].tool_calls[${A}].function.arguments
${iP(n)}`);return{...P,id:M,type:D,function:{...L,name:j,arguments:O}}})}}:{...f,message:{...w,content:m,role:_,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}),created:i,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Qnt(l,e)}function iP(n){return JSON.stringify(n)}class s1 extends zk{static fromReadableStream(e){const t=new s1(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const i=new s1(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,a)),i}static runTools(e,t,r){const i=new s1(t),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,a)),i}}let Txe=class extends Pn{parse(e,t){return nrt(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>LW(r,e))}runFunctions(e,t){return e.stream?s1.runFunctions(this._client,e,t):Vk.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?s1.runTools(this._client,e,t):Vk.runTools(this._client,e,t)}stream(e,t){return zk.createChatCompletion(this._client,e,t)}};class _H extends Pn{constructor(){super(...arguments),this.completions=new Txe(this._client)}}(function(n){n.Completions=Txe})(_H||(_H={}));class Exe extends Pn{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Axe extends Pn{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class r5 extends Pn{constructor(){super(...arguments),this.sessions=new Exe(this._client),this.transcriptionSessions=new Axe(this._client)}}r5.Sessions=Exe;r5.TranscriptionSessions=Axe;class jW extends Pn{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return wa(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,FW,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class FW extends Ao{}jW.MessagesPage=FW;class $W extends Pn{retrieve(e,t,r,i={},a){return wa(i)?this.retrieve(e,t,r,{},i):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,r={},i){return wa(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,BW,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class BW extends Ao{}$W.RunStepsPage=BW;let o2=class extends Pn{constructor(){super(...arguments),this.steps=new $W(this._client)}create(e,t,r){const{include:i,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return wa(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,UW,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}createAndStream(e,t,r){return eh.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(s=c)}}await r2(s);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return eh.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,i){const a=await this.submitToolOutputs(e,t,r,i);return await this.poll(e,a.id,i)}submitToolOutputsStream(e,t,r,i){return eh.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,i)}};class UW extends Ao{}o2.RunsPage=UW;o2.Steps=$W;o2.RunStepsPage=BW;class AT extends Pn{constructor(){super(...arguments),this.runs=new o2(this._client),this.messages=new jW(this._client)}create(e={},t){return wa(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return eh.createThreadAssistantStream(e,this._client.beta.threads,t)}}AT.Runs=o2;AT.RunsPage=UW;AT.Messages=jW;AT.MessagesPage=FW;class CT extends Pn{constructor(){super(...arguments),this.realtime=new r5(this._client),this.chat=new _H(this._client),this.assistants=new OW(this._client),this.threads=new AT(this._client)}}CT.Realtime=r5;CT.Assistants=OW;CT.AssistantsPage=RW;CT.Threads=AT;class Cxe extends Pn{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class Dxe extends Pn{retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let i5=class extends Pn{constructor(){super(...arguments),this.content=new Dxe(this._client)}create(e,t,r){return this._client.post(`/containers/${e}/files`,Nw({body:t,...r}))}retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}`,r)}list(e,t={},r){return wa(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,VW,{query:t,...r})}del(e,t,r){return this._client.delete(`/containers/${e}/files/${t}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class VW extends Ao{}i5.FileListResponsesPage=VW;i5.Content=Dxe;class s2 extends Pn{constructor(){super(...arguments),this.files=new i5(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return wa(e)?this.list({},e):this._client.getAPIList("/containers",zW,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class zW extends Ao{}s2.ContainerListResponsesPage=zW;s2.Files=i5;s2.FileListResponsesPage=VW;class kxe extends Pn{create(e,t){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Qv("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return r?a:(Qv("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(o=>(o&&o.data&&o.data.forEach(s=>{const l=s.embedding;s.embedding=Xnt(l)}),o)))}}class HW extends Pn{retrieve(e,t,r,i){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,i)}list(e,t,r={},i){return wa(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,qW,{query:r,...i})}}class qW extends Ao{}HW.OutputItemListResponsesPage=qW;class l2 extends Pn{constructor(){super(...arguments),this.outputItems=new HW(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return wa(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,GW,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class GW extends Ao{}l2.RunListResponsesPage=GW;l2.OutputItems=HW;l2.OutputItemListResponsesPage=qW;class c2 extends Pn{constructor(){super(...arguments),this.runs=new l2(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return wa(e)?this.list({},e):this._client.getAPIList("/evals",WW,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class WW extends Ao{}c2.EvalListResponsesPage=WW;c2.Runs=l2;c2.RunListResponsesPage=GW;let YW=class extends Pn{create(e,t){return this._client.post("/files",Nw({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return wa(e)?this.list({},e):this._client.getAPIList("/files",KW,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await r2(t),o=await this.retrieve(e),Date.now()-a>r)throw new kW({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class KW extends Ao{}YW.FileObjectsPage=KW;class Ixe extends Pn{}let Mxe=class extends Pn{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class XW extends Pn{constructor(){super(...arguments),this.graders=new Mxe(this._client)}}XW.Graders=Mxe;class ZW extends Pn{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,QW,{body:t,method:"post",...r})}retrieve(e,t={},r){return wa(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,r)}}class QW extends Jj{}ZW.PermissionCreateResponsesPage=QW;let a5=class extends Pn{constructor(){super(...arguments),this.permissions=new ZW(this._client)}};a5.Permissions=ZW;a5.PermissionCreateResponsesPage=QW;class JW extends Pn{list(e,t={},r){return wa(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,eY,{query:t,...r})}}class eY extends Ao{}JW.FineTuningJobCheckpointsPage=eY;class DT extends Pn{constructor(){super(...arguments),this.checkpoints=new JW(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return wa(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",tY,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return wa(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,nY,{query:t,...r})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class tY extends Ao{}class nY extends Ao{}DT.FineTuningJobsPage=tY;DT.FineTuningJobEventsPage=nY;DT.Checkpoints=JW;DT.FineTuningJobCheckpointsPage=eY;class Dy extends Pn{constructor(){super(...arguments),this.methods=new Ixe(this._client),this.jobs=new DT(this._client),this.checkpoints=new a5(this._client),this.alpha=new XW(this._client)}}Dy.Methods=Ixe;Dy.Jobs=DT;Dy.FineTuningJobsPage=tY;Dy.FineTuningJobEventsPage=nY;Dy.Checkpoints=a5;Dy.Alpha=XW;class Pxe extends Pn{}class rY extends Pn{constructor(){super(...arguments),this.graderModels=new Pxe(this._client)}}rY.GraderModels=Pxe;class Oxe extends Pn{createVariation(e,t){return this._client.post("/images/variations",Nw({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Nw({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class iY extends Pn{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",aY,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class aY extends Jj{}iY.ModelsPage=aY;class Rxe extends Pn{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function crt(n,e){return!e||!drt(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:Nxe(n,e)}function Nxe(n,e){const t=n.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:prt(e,i)};if(i.type==="message"){const a=i.content.map(o=>o.type==="output_text"?{...o,parsed:urt(e,o.text)}:o);return{...i,content:a}}return i}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||Lxe(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const a of i.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function urt(n,e){var t,r,i,a;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=n.text)==null?void 0:i.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function drt(n){var e;return!!NW((e=n.text)==null?void 0:e.format)}function hrt(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function frt(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function prt(n,e){const t=frt(n.tools??[],e.name);return{...e,...e,parsed_arguments:hrt(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function Lxe(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}class jxe extends Pn{list(e,t={},r){return wa(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,mrt,{query:t,...r})}}var Vx=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},hv=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},zx,aP,fv,oP,Ioe,Moe,Poe,Ooe;class oY extends PW{constructor(e){super(),zx.add(this),aP.set(this,void 0),fv.set(this,void 0),oP.set(this,void 0),Vx(this,aP,e,"f")}static createResponse(e,t,r){const i=new oY(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,t,r){var s;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),hv(this,zx,"m",Ioe).call(this);let a,o=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of a)hv(this,zx,"m",Moe).call(this,l,o);if((s=a.controller.signal)!=null&&s.aborted)throw new zu;return hv(this,zx,"m",Poe).call(this)}[(aP=new WeakMap,fv=new WeakMap,oP=new WeakMap,zx=new WeakSet,Ioe=function(){this.ended||Vx(this,fv,void 0,"f")},Moe=function(t,r){if(this.ended)return;const i=(o,s)=>{(r==null||s.sequence_number>r)&&this._emit(o,s)},a=hv(this,zx,"m",Ooe).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{const o=a.output[t.output_index];if(!o)throw new Cn(`missing output at index ${t.output_index}`);if(o.type==="message"){const s=o.content[t.content_index];if(!s)throw new Cn(`missing content at index ${t.content_index}`);if(s.type!=="output_text")throw new Cn(`expected content to be 'output_text', got ${s.type}`);i("response.output_text.delta",{...t,snapshot:s.text})}break}case"response.function_call_arguments.delta":{const o=a.output[t.output_index];if(!o)throw new Cn(`missing output at index ${t.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...t,snapshot:o.arguments});break}default:i(t.type,t);break}},Poe=function(){if(this.ended)throw new Cn("stream has ended, this shouldn't happen");const t=hv(this,fv,"f");if(!t)throw new Cn("request ended without sending any events");Vx(this,fv,void 0,"f");const r=grt(t,hv(this,aP,"f"));return Vx(this,oP,r,"f"),r},Ooe=function(t){let r=hv(this,fv,"f");if(!r){if(t.type!=="response.created")throw new Cn(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=Vx(this,fv,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const i=r.output[t.output_index];if(!i)throw new Cn(`missing output at index ${t.output_index}`);i.type==="message"&&i.content.push(t.part);break}case"response.output_text.delta":{const i=r.output[t.output_index];if(!i)throw new Cn(`missing output at index ${t.output_index}`);if(i.type==="message"){const a=i.content[t.content_index];if(!a)throw new Cn(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new Cn(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const i=r.output[t.output_index];if(!i)throw new Cn(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.completed":{Vx(this,fv,t.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=hv(this,oP,"f");if(!e)throw new Cn("stream ended without producing a ChatCompletion");return e}}function grt(n,e){return crt(n,e)}class sY extends Pn{constructor(){super(...arguments),this.inputItems=new jxe(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Lxe(r),r))}retrieve(e,t={},r){return this._client.get(`/responses/${e}`,{query:t,...r,stream:(t==null?void 0:t.stream)??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>Nxe(r,e))}stream(e,t){return oY.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class mrt extends Ao{}sY.InputItems=jxe;class Fxe extends Pn{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,Nw({body:t,...r}))}}class lY extends Pn{constructor(){super(...arguments),this.parts=new Fxe(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}lY.Parts=Fxe;const vrt=async n=>{const e=await Promise.allSettled(n),t=e.filter(i=>i.status==="rejected");if(t.length){for(const i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class o5 extends Pn{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return wa(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,s5,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...r,headers:i}).withResponse(),o=a.data;switch(o.status){case"in_progress":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(s=c)}}await r2(s);break;case"failed":case"completed":return o}}}async upload(e,t,r){const i=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,t,r){const i=await this.upload(e,t,r);return await this.poll(e,i.id,r)}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,cY,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class s5 extends Ao{}class cY extends Jj{}o5.VectorStoreFilesPage=s5;o5.FileContentResponsesPage=cY;class $xe extends Pn{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t);return await this.poll(e,i.id,r)}listFiles(e,t,r={},i){return wa(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,s5,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...r,headers:i}).withResponse();switch(a.status){case"in_progress":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(s=c)}}await r2(s);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(a,t.length),s=this._client,l=t.values(),c=[...r];async function u(h){for(let f of h){const m=await s.files.create({file:f,purpose:"assistants"},i);c.push(m.id)}}const d=Array(o).fill(l).map(u);return await vrt(d),await this.createAndPoll(e,{file_ids:c})}}class ky extends Pn{constructor(){super(...arguments),this.files=new o5(this._client),this.fileBatches=new $xe(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return wa(e)?this.list({},e):this._client.getAPIList("/vector_stores",uY,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,dY,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class uY extends Ao{}class dY extends Jj{}ky.VectorStoresPage=uY;ky.VectorStoreSearchResponsesPage=dY;ky.Files=o5;ky.VectorStoreFilesPage=s5;ky.FileContentResponsesPage=cY;ky.FileBatches=$xe;var Bxe;class zn extends Fnt{constructor({baseURL:e=eP("OPENAI_BASE_URL"),apiKey:t=eP("OPENAI_API_KEY"),organization:r=eP("OPENAI_ORG_ID")??null,project:i=eP("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new Cn("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:r,project:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&Ynt())throw new Cn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new Cxe(this),this.chat=new n5(this),this.embeddings=new kxe(this),this.files=new YW(this),this.images=new Oxe(this),this.audio=new i2(this),this.moderations=new Rxe(this),this.models=new iY(this),this.fineTuning=new Dy(this),this.graders=new rY(this),this.vectorStores=new ky(this),this.beta=new CT(this),this.batches=new IW(this),this.uploads=new lY(this),this.responses=new sY(this),this.evals=new c2(this),this.containers=new s2(this),this._options=o,this.apiKey=t,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return wnt(e,{arrayFormat:"brackets"})}}Bxe=zn;zn.OpenAI=Bxe;zn.DEFAULT_TIMEOUT=6e5;zn.OpenAIError=Cn;zn.APIError=ps;zn.APIConnectionError=Kj;zn.APIConnectionTimeoutError=kW;zn.APIUserAbortError=zu;zn.NotFoundError=F_e;zn.ConflictError=$_e;zn.RateLimitError=U_e;zn.BadRequestError=N_e;zn.AuthenticationError=L_e;zn.InternalServerError=V_e;zn.PermissionDeniedError=j_e;zn.UnprocessableEntityError=B_e;zn.toFile=Y_e;zn.fileFromPath=P_e;zn.Completions=Cxe;zn.Chat=n5;zn.ChatCompletionsPage=t5;zn.Embeddings=kxe;zn.Files=YW;zn.FileObjectsPage=KW;zn.Images=Oxe;zn.Audio=i2;zn.Moderations=Rxe;zn.Models=iY;zn.ModelsPage=aY;zn.FineTuning=Dy;zn.Graders=rY;zn.VectorStores=ky;zn.VectorStoresPage=uY;zn.VectorStoreSearchResponsesPage=dY;zn.Beta=CT;zn.Batches=IW;zn.BatchesPage=MW;zn.Uploads=lY;zn.Responses=sY;zn.Evals=c2;zn.EvalListResponsesPage=WW;zn.Containers=s2;zn.ContainerListResponsesPage=zW;const xH=void 0;let Vd=xH,Tv=null;const SH=n=>new zn({apiKey:n,dangerouslyAllowBrowser:!0});Vd&&(Tv=SH(Vd));const fU="text-embedding-3-small",Roe="gpt-4o-mini",Noe=4e3,pU=1536;class $r{static initialize(e){this.client=new zn({apiKey:e})}static async createChatCompletion(e){var t,r;if(!this.client)throw new Error("OpenAI client not initialized. Call initialize() first.");try{return((r=(t=(await this.client.chat.completions.create({model:"gpt-4",messages:e,temperature:.7,max_tokens:500})).choices[0])==null?void 0:t.message)==null?void 0:r.content)||""}catch(i){throw console.error("Error calling OpenAI:",i),i}}static setApiKey(e){if(!e||!e.startsWith("sk-"))throw new Error("Invalid OpenAI API key format");Vd=e,Tv=SH(e),console.log("✅ OpenAI API key updated successfully")}static getApiKeyStatus(){const e=!!Vd,t=Vd!==xH,r=Vd?`${Vd.substring(0,11)}...${Vd.slice(-4)}`:"No key set";return{hasKey:e,isCustomKey:t,keyPreview:r}}static resetToDefaultKey(){Vd=xH,Vd?(Tv=SH(Vd),console.log("🔄 Reset to default OpenAI API key")):(Tv=null,console.warn("⚠️ No default API key available"))}static async testApiKey(){try{return Tv?(await Tv.embeddings.create({model:fU,input:"test",dimensions:pU}),{success:!0}):{success:!1,error:"No API key configured"}}catch(e){return console.error("API key test failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}static ensureOpenAI(){if(!Tv)throw new Error("OpenAI not initialized. Please set an API key first.");return Tv}static async generateEmbedding(e){try{return(await this.ensureOpenAI().embeddings.create({model:fU,input:e.content,dimensions:pU})).data[0].embedding}catch(t){throw console.error("Error generating embedding:",t),(t==null?void 0:t.status)===401?new Error("Invalid OpenAI API key. Please check your API key."):new Error("Failed to generate embedding")}}static async batchGenerateEmbeddings(e){try{const t=this.ensureOpenAI(),r=e.map(a=>a.content);return(await t.embeddings.create({model:fU,input:r,dimensions:pU})).data.map(a=>a.embedding)}catch(t){throw console.error("Error generating batch embeddings:",t),(t==null?void 0:t.status)===401?new Error("Invalid OpenAI API key. Please check your API key."):new Error("Failed to generate batch embeddings")}}static async generateChatResponse(e){var a,o,s;const t=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),r=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),i=[{role:"system",content:`You are an AI assistant that provides direct, focused responses.

CURRENT DATE & TIME: ${t} at ${r}

CRITICAL FORMATTING REQUIREMENTS:
• Start with emoji header: 🎯 **Key Insights**
• **Bold** project names like **Make10000hours**
• Use \`backticks\` for metrics like \`2h 15m\` or \`66%\`
• Simple hierarchy: **Section** then bullet points
• Max 4 sections, 3 items each
• End with clear action

EXAMPLE:
🎯 **Key Insights**

**Priority Tasks**
• **Make10000hours** project needs \`2h 15m\` more work
• Calendar improvements \`66%\` complete

**Progress**
• \`20 tasks\` completed this week
• Strong productivity momentum

**Next Action**
• Focus on morning sessions

Context: ${e.context}`},...(e.conversationHistory||[]).map(l=>({role:l.role,content:l.content})),{role:"user",content:e.query}];try{const l=this.ensureOpenAI();console.log("OpenAI generateChatResponse called with:",{queryLength:e.query.length,contextLength:e.context.length,hasHistory:!!((a=e.conversationHistory)!=null&&a.length)});const c=2;let u=0,d=null;for(;u<=c;)try{const f=((s=(o=(await l.chat.completions.create({model:Roe,messages:i,max_tokens:Noe,temperature:.7,stream:!1,presence_penalty:.1,frequency_penalty:.1})).choices[0])==null?void 0:o.message)==null?void 0:s.content)||"Sorry, I could not generate a response.";return this.cleanResponse(f)}catch(h){if(d=h,(h==null?void 0:h.status)===429&&(u++,u<=c)){await new Promise(f=>setTimeout(f,1e3*u));continue}throw h}throw d||new Error("Failed to generate response after retries")}catch(l){throw console.error("Error generating chat response:",l),console.error("OpenAI Error details:",{message:l instanceof Error?l.message:"Unknown error",name:l instanceof Error?l.name:void 0,status:l==null?void 0:l.status,type:l==null?void 0:l.type}),(l==null?void 0:l.status)===401?new Error("Invalid OpenAI API key. Please check your API key in settings."):new Error(`Failed to generate chat response: ${l instanceof Error?l.message:"Unknown error"}`)}}static async generateStreamingChatResponse(e,t){var r,i;try{const a=this.ensureOpenAI(),o=new Date,s=o.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),l=o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),c=[{role:"system",content:`You are a helpful AI assistant that provides direct, focused answers.

CURRENT DATE & TIME: ${s} at ${l}

CRITICAL FORMATTING REQUIREMENTS:
• Start with emoji header: 🎯 **Key Insights**
• **Bold** project names like **Make10000hours**
• Use \`backticks\` for metrics like \`2h 15m\` or \`66%\`
• Simple hierarchy: **Section** then bullet points
• Max 4 sections, 3 items each
• End with clear action

EXAMPLE:
🎯 **Key Insights**

**Priority Tasks**
• **Make10000hours** project needs \`2h 15m\` more work
• Calendar improvements \`66%\` complete

**Progress**
• \`20 tasks\` completed this week
• Strong productivity momentum

**Next Action**
• Focus on morning sessions

Context: ${e.context}`}];e.conversationHistory&&c.push(...e.conversationHistory),c.push({role:"user",content:e.query});const u=await a.chat.completions.create({model:Roe,messages:c,max_tokens:Noe,temperature:.7,stream:!0});let d="";for await(const h of u){const f=((i=(r=h.choices[0])==null?void 0:r.delta)==null?void 0:i.content)||"";f&&(d+=f,t(f))}d&&this.cleanResponse(d)!==d&&t(`

[Response cleaned]`)}catch(a){throw console.error("Error generating streaming chat response:",a),(a==null?void 0:a.status)===401?new Error("Invalid OpenAI API key. Please check your API key in settings."):new Error("Failed to generate streaming chat response")}}static cleanResponse(e){return e.trim()}static estimateTokens(e){return Math.ceil(e.length/4)}static estimateCost(e,t=!1){return t?e/1e3*2e-5:e/1e3*15e-5}}hn($r,"client");const yrt=()=>{const[n,e]=K.useState(""),[t,r]=K.useState(!1),[i,a]=K.useState(!1),[o,s]=K.useState(null),[l,c]=K.useState({hasKey:!1,isCustomKey:!1,keyPreview:"No key set"});K.useEffect(()=>{const f=$r.getApiKeyStatus();c(f)},[]);const u=async()=>{if(!n||!n.trim()){s({success:!1,error:"Please enter an API key"});return}try{a(!0),s(null),$r.setApiKey(n.trim());const f=await $r.testApiKey();if(s(f),f.success){const m=$r.getApiKeyStatus();c(m),e("")}}catch(f){s({success:!1,error:f instanceof Error?f.message:"Failed to set API key"})}finally{a(!1)}},d=()=>{$r.resetToDefaultKey();const f=$r.getApiKeyStatus();c(f),s(null),e("")},h=async()=>{a(!0),s(null);try{const f=await $r.testApiKey();s(f)}catch(f){s({success:!1,error:f instanceof Error?f.message:"Test failed"})}finally{a(!1)}};return E.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[E.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[E.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:E.jsx(UQ,{className:"w-5 h-5 text-blue-600"})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"OpenAI Configuration"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Configure your OpenAI API key for AI assistant functionality"})]})]}),E.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h4",{className:"font-medium text-gray-900",children:"Current API Key Status"}),E.jsx("p",{className:"text-sm text-gray-600",children:l.keyPreview}),E.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[l.hasKey?E.jsx(MO,{className:"w-4 h-4 text-green-500"}):E.jsx(IR,{className:"w-4 h-4 text-red-500"}),E.jsx("span",{className:"text-sm text-gray-600",children:l.hasKey?l.isCustomKey?"Custom key active":"Default key active":"No key configured"})]})]}),l.hasKey&&E.jsxs("button",{onClick:h,disabled:i,className:"flex items-center space-x-2 px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:[i?E.jsx(zQ,{className:"w-4 h-4 animate-spin"}):E.jsx(MO,{className:"w-4 h-4"}),E.jsx("span",{children:"Test Key"})]})]})}),o&&E.jsxs("div",{className:`mb-4 p-3 rounded-lg ${o.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[o.success?E.jsx(MO,{className:"w-4 h-4 text-green-600"}):E.jsx(IR,{className:"w-4 h-4 text-red-600"}),E.jsx("span",{className:`text-sm font-medium ${o.success?"text-green-800":"text-red-800"}`,children:o.success?"API key is working correctly!":"API key test failed"})]}),o.error&&E.jsx("p",{className:"text-sm text-red-600 mt-1",children:o.error})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"openai-key",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom OpenAI API Key"}),E.jsxs("div",{className:"relative",children:[E.jsx("input",{id:"openai-key",type:t?"text":"password",value:n,onChange:f=>e(f.target.value),placeholder:"sk-...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-20"}),E.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center space-x-2 pr-3",children:E.jsx("button",{type:"button",onClick:()=>r(!t),className:"text-gray-400 hover:text-gray-600",children:t?E.jsx(m4e,{className:"w-4 h-4"}):E.jsx(y4e,{className:"w-4 h-4"})})})]}),E.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Get your API key from"," ",E.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"OpenAI Platform"})]})]}),E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsxs("button",{onClick:u,disabled:i||!n.trim(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[i?E.jsx(zQ,{className:"w-4 h-4 animate-spin"}):E.jsx(UQ,{className:"w-4 h-4"}),E.jsx("span",{children:"Set & Test Key"})]}),l.isCustomKey&&E.jsx("button",{onClick:d,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Reset to Default"})]})]}),E.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[E.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Usage Information"}),E.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[E.jsx("li",{children:"• Used for generating AI responses and embeddings"}),E.jsx("li",{children:"• Estimated cost: ~$0.17 per 1000 interactions"}),E.jsx("li",{children:"• Your API key is stored locally and never shared"}),E.jsx("li",{children:"• Set a custom key to use your own OpenAI credits"})]})]})]})},brt=()=>{const{user:n,updateUserData:e}=Rn(),[t,r]=K.useState(tD),[i,a]=K.useState(!1),[o,s]=K.useState(null);K.useEffect(()=>{n&&r(n.settings)},[n]);const l=(h,f)=>{r(m=>({...m,timer:{...m.timer,[h]:f}}))},c=(h,f)=>{r(m=>({...m,[h]:f}))},u=async()=>{if(n){a(!0),s(null);try{await e({uid:n.uid,userName:n.userName,settings:t}),s({type:"success",text:"Settings saved successfully!"})}catch(h){console.error("Error saving settings:",h),s({type:"error",text:"Failed to save settings. Please try again."})}finally{a(!1)}}},d=()=>{n!=null&&n.settings&&(r(n.settings),s(null))};return n?E.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6",children:[E.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Settings"}),o&&E.jsx("div",{className:`mb-6 p-4 rounded-lg ${o.type==="success"?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:o.text}),E.jsxs("div",{className:"space-y-8",children:[E.jsxs("section",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[E.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Timer Settings"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pomodoro Duration (minutes)"}),E.jsx("input",{id:"pomodoroDuration",type:"number",min:"1",max:"60",value:t.timer.pomodoro,onChange:h=>l("pomodoro",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Short Break Duration (minutes)"}),E.jsx("input",{id:"shortBreakDuration",type:"number",min:"1",max:"30",value:t.timer.shortBreak,onChange:h=>l("shortBreak",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Long Break Duration (minutes)"}),E.jsx("input",{id:"longBreakDuration",type:"number",min:"1",max:"60",value:t.timer.longBreak,onChange:h=>l("longBreak",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Long Break Interval (pomodoros)"}),E.jsx("input",{id:"longBreakInterval",type:"number",min:"2",max:"10",value:t.timer.longBreakInterval,onChange:h=>l("longBreakInterval",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),E.jsxs("div",{className:"mt-6 space-y-4",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:"autoStartBreaks",checked:t.timer.autoStartBreaks,onChange:h=>l("autoStartBreaks",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),E.jsx("label",{htmlFor:"autoStartBreaks",className:"ml-2 text-sm text-gray-700",children:"Auto-start breaks"})]}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:"autoStartPomodoros",checked:t.timer.autoStartPomodoros,onChange:h=>l("autoStartPomodoros",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),E.jsx("label",{htmlFor:"autoStartPomodoros",className:"ml-2 text-sm text-gray-700",children:"Auto-start pomodoros"})]})]})]}),E.jsxs("section",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[E.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Appearance"}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:"darkMode",checked:t.darkMode,onChange:h=>c("darkMode",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),E.jsx("label",{htmlFor:"darkMode",className:"ml-2 text-sm text-gray-700",children:"Enable dark mode"})]}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:"compactTaskView",checked:t.compactTaskView,onChange:h=>c("compactTaskView",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),E.jsx("label",{htmlFor:"compactTaskView",className:"ml-2 text-sm text-gray-700",children:"Compact task view"})]})]})]}),E.jsx(yrt,{})]}),E.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[E.jsx("button",{onClick:d,disabled:i,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:"Reset"}),E.jsx("button",{onClick:u,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:i?"Saving...":"Save Settings"})]})]}):E.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6",children:[E.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Settings"}),E.jsx("p",{className:"text-gray-600",children:"Please sign in to access your settings."})]})},Uxe=()=>(console.log("🔍 Verifying Google Analytics Setup..."),ka?(console.log("✅ Firebase Analytics is initialized"),console.log("📊 Measurement ID: G-X6YHGN5WRS"),v3e("analytics_verification",{timestamp:new Date().toISOString(),verification_step:"setup_complete"}),Bye("verification_test","Analytics Verification Page"),console.log("✅ Test events sent successfully!"),console.log("📈 Check Firebase Console in 24-48 hours for data"),console.log("🔗 https://console.firebase.google.com/project/make10000hours/analytics"),!0):(console.error("❌ Firebase Analytics is not initialized"),console.log("🔧 Check environment variables:"),console.log("   - VITE_FIREBASE_API_KEY"),console.log("   - VITE_FIREBASE_APP_ID"),!1));typeof window<"u"&&(window.verifyAnalytics=Uxe);const Vxe=K.createContext({dragDropManager:void 0});function Eu(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Loe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),joe=function(){return Math.random().toString(36).substring(7).split("").join(".")},Foe={INIT:"@@redux/INIT"+joe(),REPLACE:"@@redux/REPLACE"+joe()};function wrt(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function zxe(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Eu(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Eu(1));return t(zxe)(n,e)}if(typeof n!="function")throw new Error(Eu(2));var i=n,a=e,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(Eu(3));return a}function d(v){if(typeof v!="function")throw new Error(Eu(4));if(l)throw new Error(Eu(5));var y=!0;return c(),s.push(v),function(){if(y){if(l)throw new Error(Eu(6));y=!1,c();var _=s.indexOf(v);s.splice(_,1),o=null}}}function h(v){if(!wrt(v))throw new Error(Eu(7));if(typeof v.type>"u")throw new Error(Eu(8));if(l)throw new Error(Eu(9));try{l=!0,a=i(a,v)}finally{l=!1}for(var y=o=s,w=0;w<y.length;w++){var _=y[w];_()}return v}function f(v){if(typeof v!="function")throw new Error(Eu(10));i=v,h({type:Foe.REPLACE})}function m(){var v,y=d;return v={subscribe:function(_){if(typeof _!="object"||_===null)throw new Error(Eu(11));function S(){_.next&&_.next(u())}S();var A=y(S);return{unsubscribe:A}}},v[Loe]=function(){return this},v}return h({type:Foe.INIT}),r={dispatch:h,subscribe:d,getState:u,replaceReducer:f},r[Loe]=m,r}function Jn(n,e,...t){if(_rt()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return t[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function _rt(){return typeof process<"u"&&!0}function xrt(n,e,t){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:t||null,n)}function Srt(n,e){return n.filter(t=>t!==e)}function Hxe(n){return typeof n=="object"}function Trt(n,e){const t=new Map,r=a=>{t.set(a,t.has(a)?t.get(a)+1:1)};n.forEach(r),e.forEach(r);const i=[];return t.forEach((a,o)=>{a===1&&i.push(o)}),i}function Ert(n,e){return n.filter(t=>e.indexOf(t)>-1)}const hY="dnd-core/INIT_COORDS",l5="dnd-core/BEGIN_DRAG",fY="dnd-core/PUBLISH_DRAG_SOURCE",c5="dnd-core/HOVER",u5="dnd-core/DROP",d5="dnd-core/END_DRAG";function $oe(n,e){return{type:hY,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const Art={type:hY,payload:{clientOffset:null,sourceClientOffset:null}};function Crt(n){return function(t=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:a,getSourceClientOffset:o}=r,s=n.getMonitor(),l=n.getRegistry();n.dispatch($oe(a)),Drt(t,s,l);const c=Mrt(t,s);if(c==null){n.dispatch(Art);return}let u=null;if(a){if(!o)throw new Error("getSourceClientOffset must be defined");krt(o),u=o(c)}n.dispatch($oe(a,u));const h=l.getSource(c).beginDrag(s,c);if(h==null)return;Irt(h),l.pinSource(c);const f=l.getSourceType(c);return{type:l5,payload:{itemType:f,item:h,sourceId:c,clientOffset:a||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}function Drt(n,e,t){Jn(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(r){Jn(t.getSource(r),"Expected sourceIds to be registered.")})}function krt(n){Jn(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Irt(n){Jn(Hxe(n),"Item must be an object.")}function Mrt(n,e){let t=null;for(let r=n.length-1;r>=0;r--)if(e.canDragSource(n[r])){t=n[r];break}return t}function Prt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ort(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Prt(n,i,t[i])})}return n}function Rrt(n){return function(t={}){const r=n.getMonitor(),i=n.getRegistry();Nrt(r),Frt(r).forEach((o,s)=>{const l=Lrt(o,s,i,r),c={type:u5,payload:{dropResult:Ort({},t,l)}};n.dispatch(c)})}}function Nrt(n){Jn(n.isDragging(),"Cannot call drop while not dragging."),Jn(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function Lrt(n,e,t,r){const i=t.getTarget(n);let a=i?i.drop(r,n):void 0;return jrt(a),typeof a>"u"&&(a=e===0?{}:r.getDropResult()),a}function jrt(n){Jn(typeof n>"u"||Hxe(n),"Drop result must either be an object or undefined.")}function Frt(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function $rt(n){return function(){const t=n.getMonitor(),r=n.getRegistry();Brt(t);const i=t.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(t,i),r.unpinSource()),{type:d5}}}function Brt(n){Jn(n.isDragging(),"Cannot call endDrag while not dragging.")}function TH(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function Urt(n){return function(t,{clientOffset:r}={}){Vrt(t);const i=t.slice(0),a=n.getMonitor(),o=n.getRegistry(),s=a.getItemType();return Hrt(i,o,s),zrt(i,a,o),qrt(i,a,o),{type:c5,payload:{targetIds:i,clientOffset:r||null}}}}function Vrt(n){Jn(Array.isArray(n),"Expected targetIds to be an array.")}function zrt(n,e,t){Jn(e.isDragging(),"Cannot call hover while not dragging."),Jn(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<n.length;r++){const i=n[r];Jn(n.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const a=t.getTarget(i);Jn(a,"Expected targetIds to be registered.")}}function Hrt(n,e,t){for(let r=n.length-1;r>=0;r--){const i=n[r],a=e.getTargetType(i);TH(a,t)||n.splice(r,1)}}function qrt(n,e,t){n.forEach(function(r){t.getTarget(r).hover(e,r)})}function Grt(n){return function(){if(n.getMonitor().isDragging())return{type:fY}}}function Wrt(n){return{beginDrag:Crt(n),publishDragSource:Grt(n),hover:Urt(n),drop:Rrt(n),endDrag:$rt(n)}}class Yrt{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function r(a){return(...o)=>{const s=a.apply(e,o);typeof s<"u"&&t(s)}}const i=Wrt(this);return Object.keys(i).reduce((a,o)=>{const s=i[o];return a[o]=r(s),a},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function Krt(n,e){return{x:n.x+e.x,y:n.y+e.y}}function qxe(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Xrt(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:r}=n;return!e||!t||!r?null:qxe(Krt(e,r),t)}function Zrt(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:qxe(e,t)}const vD=[],pY=[];vD.__IS_NONE__=!0;pY.__IS_ALL__=!0;function Qrt(n,e){return n===vD?!1:n===pY||typeof e>"u"?!0:Ert(e,n).length>0}class Jrt{subscribeToStateChange(e,t={}){const{handlerIds:r}=t;Jn(typeof e=="function","listener must be a function."),Jn(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const a=()=>{const o=this.store.getState(),s=o.stateId;try{s===i||s===i+1&&!Qrt(o.dirtyHandlerIds,r)||e()}finally{i=s}};return this.store.subscribe(a)}subscribeToOffsetChange(e){Jn(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==t&&(t=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return Jn(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(Jn(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return TH(r,i)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(Jn(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!TH(i,a))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(e);return r?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Xrt(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Zrt(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const Boe=typeof global<"u"?global:self,Gxe=Boe.MutationObserver||Boe.WebKitMutationObserver;function Wxe(n){return function(){const t=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(t),clearInterval(r),n()}}}function eit(n){let e=1;const t=new Gxe(n),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const tit=typeof Gxe=="function"?eit:Wxe;class nit{enqueueTask(e){const{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=tit(this.flush),this.requestErrorThrow=Wxe(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class rit{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class iit{create(e){const t=this.freeTasks,r=t.length?t.pop():new rit(this.onError,i=>t[t.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const Yxe=new nit,ait=new iit(Yxe.registerPendingError);function oit(n){Yxe.enqueueTask(ait.create(n))}const gY="dnd-core/ADD_SOURCE",mY="dnd-core/ADD_TARGET",vY="dnd-core/REMOVE_SOURCE",h5="dnd-core/REMOVE_TARGET";function sit(n){return{type:gY,payload:{sourceId:n}}}function lit(n){return{type:mY,payload:{targetId:n}}}function cit(n){return{type:vY,payload:{sourceId:n}}}function uit(n){return{type:h5,payload:{targetId:n}}}function dit(n){Jn(typeof n.canDrag=="function","Expected canDrag to be a function."),Jn(typeof n.beginDrag=="function","Expected beginDrag to be a function."),Jn(typeof n.endDrag=="function","Expected endDrag to be a function.")}function hit(n){Jn(typeof n.canDrop=="function","Expected canDrop to be a function."),Jn(typeof n.hover=="function","Expected hover to be a function."),Jn(typeof n.drop=="function","Expected beginDrag to be a function.")}function EH(n,e){if(e&&Array.isArray(n)){n.forEach(t=>EH(t,!1));return}Jn(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Lu;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(Lu||(Lu={}));let fit=0;function pit(){return fit++}function git(n){const e=pit().toString();switch(n){case Lu.SOURCE:return`S${e}`;case Lu.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function Uoe(n){switch(n[0]){case"S":return Lu.SOURCE;case"T":return Lu.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function Voe(n,e){const t=n.entries();let r=!1;do{const{done:i,value:[,a]}=t.next();if(a===e)return!0;r=!!i}while(!r);return!1}class mit{addSource(e,t){EH(e),dit(t);const r=this.addHandler(Lu.SOURCE,e,t);return this.store.dispatch(sit(r)),r}addTarget(e,t){EH(e,!0),hit(t);const r=this.addHandler(Lu.TARGET,e,t);return this.store.dispatch(lit(r)),r}containsHandler(e){return Voe(this.dragSources,e)||Voe(this.dropTargets,e)}getSource(e,t=!1){return Jn(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Jn(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Jn(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Jn(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Uoe(e)===Lu.SOURCE}isTargetId(e){return Uoe(e)===Lu.TARGET}removeSource(e){Jn(this.getSource(e),"Expected an existing source."),this.store.dispatch(cit(e)),oit(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Jn(this.getTarget(e),"Expected an existing target."),this.store.dispatch(uit(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);Jn(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){Jn(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const i=git(e);return this.types.set(i,t),e===Lu.SOURCE?this.dragSources.set(i,r):e===Lu.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const vit=(n,e)=>n===e;function yit(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function bit(n,e,t=vit){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!t(n[r],e[r]))return!1;return!0}function wit(n=vD,e){switch(e.type){case c5:break;case gY:case mY:case h5:case vY:return vD;case l5:case fY:case d5:case u5:default:return pY}const{targetIds:t=[],prevTargetIds:r=[]}=e.payload,i=Trt(t,r);if(!(i.length>0||!bit(t,r)))return vD;const o=r[r.length-1],s=t[t.length-1];return o!==s&&(o&&i.push(o),s&&i.push(s)),i}function _it(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xit(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){_it(n,i,t[i])})}return n}const zoe={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Sit(n=zoe,e){const{payload:t}=e;switch(e.type){case hY:case l5:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case c5:return yit(n.clientOffset,t.clientOffset)?n:xit({},n,{clientOffset:t.clientOffset});case d5:case u5:return zoe;default:return n}}function Tit(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Tit(n,i,t[i])})}return n}const Eit={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Ait(n=Eit,e){const{payload:t}=e;switch(e.type){case l5:return Hx({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case fY:return Hx({},n,{isSourcePublic:!0});case c5:return Hx({},n,{targetIds:t.targetIds});case h5:return n.targetIds.indexOf(t.targetId)===-1?n:Hx({},n,{targetIds:Srt(n.targetIds,t.targetId)});case u5:return Hx({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case d5:return Hx({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function Cit(n=0,e){switch(e.type){case gY:case mY:return n+1;case vY:case h5:return n-1;default:return n}}function Dit(n=0){return n+1}function kit(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Iit(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){kit(n,i,t[i])})}return n}function Mit(n={},e){return{dirtyHandlerIds:wit(n.dirtyHandlerIds,{type:e.type,payload:Iit({},e.payload,{prevTargetIds:xrt(n,"dragOperation.targetIds",[])})}),dragOffset:Sit(n.dragOffset,e),refCount:Cit(n.refCount,e),dragOperation:Ait(n.dragOperation,e),stateId:Dit(n.stateId)}}function Pit(n,e=void 0,t={},r=!1){const i=Oit(r),a=new Jrt(i,new mit(i)),o=new Yrt(i,a),s=n(o,e,t);return o.receiveBackend(s),o}function Oit(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return zxe(Mit,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Rit(n,e){if(n==null)return{};var t=Nit(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Nit(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}let Hoe=0;const $O=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Lit=K.memo(function(e){var{children:t}=e,r=Rit(e,["children"]);const[i,a]=jit(r);return K.useEffect(()=>{if(a){const o=Kxe();return++Hoe,()=>{--Hoe===0&&(o[$O]=null)}}},[]),E.jsx(Vxe.Provider,{value:i,children:t})});function jit(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=Fit(n.backend,n.context,n.options,n.debugMode),t=!n.context;return[e,t]}function Fit(n,e=Kxe(),t,r){const i=e;return i[$O]||(i[$O]={dragDropManager:Pit(n,e,t,r)}),i[$O]}function Kxe(){return typeof global<"u"?global:window}var gU,qoe;function $it(){return qoe||(qoe=1,gU=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),gU}var Bit=$it();const Uit=Br(Bit),Lw=typeof window<"u"?K.useLayoutEffect:K.useEffect;function Vit(n,e,t){const[r,i]=K.useState(()=>e(n)),a=K.useCallback(()=>{const o=e(n);Uit(r,o)||(i(o),t&&t())},[r,n,t]);return Lw(a),[r,a]}function zit(n,e,t){const[r,i]=Vit(n,e,t);return Lw(function(){const o=n.getHandlerId();if(o!=null)return n.subscribeToStateChange(i,{handlerIds:[o]})},[n,i]),r}function Xxe(n,e,t){return zit(e,n||(()=>({})),()=>t.reconnect())}function Zxe(n,e){const t=[];return typeof n!="function"&&t.push(n),K.useMemo(()=>typeof n=="function"?n():n,t)}function Hit(n){return K.useMemo(()=>n.hooks.dragSource(),[n])}function qit(n){return K.useMemo(()=>n.hooks.dragPreview(),[n])}let mU=!1,vU=!1;class Git{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Jn(!mU,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return mU=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{mU=!1}}isDragging(){if(!this.sourceId)return!1;Jn(!vU,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return vU=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{vU=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let yU=!1;class Wit{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;Jn(!yU,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return yU=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{yU=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Yit(n,e,t){const r=t.getRegistry(),i=r.addTarget(n,e);return[i,()=>r.removeTarget(i)]}function Kit(n,e,t){const r=t.getRegistry(),i=r.addSource(n,e);return[i,()=>r.removeSource(i)]}function AH(n,e,t,r){let i;if(i!==void 0)return!!i;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const a=Object.keys(n),o=Object.keys(e);if(a.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<a.length;l++){const c=a[l];if(!s(c))return!1;const u=n[c],d=e[c];if(i=void 0,i===!1||i===void 0&&u!==d)return!1}return!0}function CH(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Xit(n){if(typeof n.type=="string")return;const e=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Zit(n){return(e=null,t=null)=>{if(!K.isValidElement(e)){const a=e;return n(a,t),a}const r=e;return Xit(r),Qit(r,t?a=>n(a,t):n)}}function Qxe(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{const i=Zit(r);e[t]=()=>i}}),e}function Goe(n,e){typeof n=="function"?n(e):n.current=e}function Qit(n,e){const t=n.ref;return Jn(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?K.cloneElement(n,{ref:r=>{Goe(t,r),Goe(e,r)}}):K.cloneElement(n,{ref:e})}class Jit{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!AH(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!AH(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Qxe({dragSource:(t,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,CH(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,CH(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class eat{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!AH(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Qxe({dropTarget:(t,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,CH(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function kT(){const{dragDropManager:n}=K.useContext(Vxe);return Jn(n!=null,"Expected drag drop context"),n}function tat(n,e){const t=kT(),r=K.useMemo(()=>new Jit(t.getBackend()),[t]);return Lw(()=>(r.dragSourceOptions=n||null,r.reconnect(),()=>r.disconnectDragSource()),[r,n]),Lw(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function nat(){const n=kT();return K.useMemo(()=>new Git(n),[n])}class rat{beginDrag(){const e=this.spec,t=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(t):r={},r??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const r=this.spec,i=this.monitor,{isDragging:a}=r;return a?a(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,r=this.connector,{end:i}=e;i&&i(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function iat(n,e,t){const r=K.useMemo(()=>new rat(n,e,t),[e,t]);return K.useEffect(()=>{r.spec=n},[n]),r}function aat(n){return K.useMemo(()=>{const e=n.type;return Jn(e!=null,"spec.type must be defined"),e},[n])}function oat(n,e,t){const r=kT(),i=iat(n,e,t),a=aat(n);Lw(function(){if(a!=null){const[s,l]=Kit(a,i,r);return e.receiveHandlerId(s),t.receiveHandlerId(s),l}},[r,e,t,i,a])}function sat(n,e){const t=Zxe(n);Jn(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=nat(),i=tat(t.options,t.previewOptions);return oat(t,r,i),[Xxe(t.collect,r,i),Hit(i),qit(i)]}function lat(n){return K.useMemo(()=>n.hooks.dropTarget(),[n])}function cat(n){const e=kT(),t=K.useMemo(()=>new eat(e.getBackend()),[e]);return Lw(()=>(t.dropTargetOptions=n||null,t.reconnect(),()=>t.disconnectDropTarget()),[n]),t}function uat(){const n=kT();return K.useMemo(()=>new Wit(n),[n])}function dat(n){const{accept:e}=n;return K.useMemo(()=>(Jn(n.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class hat{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function fat(n,e){const t=K.useMemo(()=>new hat(n,e),[e]);return K.useEffect(()=>{t.spec=n},[n]),t}function pat(n,e,t){const r=kT(),i=fat(n,e),a=dat(n);Lw(function(){const[s,l]=Yit(a,i,r);return e.receiveHandlerId(s),t.receiveHandlerId(s),l},[r,e,i,t,a.map(o=>o.toString()).join("|")])}function gat(n,e){const t=Zxe(n),r=uat(),i=cat(t.options);return pat(t,r,i),[Xxe(t.collect,r,i),lat(i)]}function Jxe(n){let e=null;return()=>(e==null&&(e=n()),e)}function mat(n,e){return n.filter(t=>t!==e)}function vat(n,e){const t=new Set,r=a=>t.add(a);n.forEach(r),e.forEach(r);const i=[];return t.forEach(a=>i.push(a)),i}class yat{enter(e){const t=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=vat(this.entered.filter(r),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=mat(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class bat{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(t[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const eSe="__NATIVE_FILE__",tSe="__NATIVE_URL__",nSe="__NATIVE_TEXT__",rSe="__NATIVE_HTML__",Woe=Object.freeze(Object.defineProperty({__proto__:null,FILE:eSe,HTML:rSe,TEXT:nSe,URL:tSe},Symbol.toStringTag,{value:"Module"}));function bU(n,e,t){const r=e.reduce((i,a)=>i||n.getData(a),"");return r??t}const DH={[eSe]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[rSe]:{exposeProperties:{html:(n,e)=>bU(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[tSe]:{exposeProperties:{urls:(n,e)=>bU(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[nSe]:{exposeProperties:{text:(n,e)=>bU(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function wat(n,e){const t=DH[n];if(!t)throw new Error(`native type ${n} has no configuration`);const r=new bat(t);return r.loadDataTransfer(e),r}function wU(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(DH).filter(t=>{const r=DH[t];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const _at=Jxe(()=>/firefox/i.test(navigator.userAgent)),iSe=Jxe(()=>!!window.safari);class Yoe{interpolate(e){const{xs:t,ys:r,c1s:i,c2s:a,c3s:o}=this;let s=t.length-1;if(e===t[s])return r[s];let l=0,c=o.length-1,u;for(;l<=c;){u=Math.floor(.5*(l+c));const f=t[u];if(f<e)l=u+1;else if(f>e)c=u-1;else return r[u]}s=Math.max(0,c);const d=e-t[s],h=d*d;return r[s]+i[s]*d+a[s]*h+o[s]*d*h}constructor(e,t){const{length:r}=e,i=[];for(let f=0;f<r;f++)i.push(f);i.sort((f,m)=>e[f]<e[m]?-1:1);const a=[],o=[];let s,l;for(let f=0;f<r-1;f++)s=e[f+1]-e[f],l=t[f+1]-t[f],a.push(s),o.push(l/s);const c=[o[0]];for(let f=0;f<a.length-1;f++){const m=o[f],v=o[f+1];if(m*v<=0)c.push(0);else{s=a[f];const y=a[f+1],w=s+y;c.push(3*w/((w+y)/m+(w+s)/v))}}c.push(o[o.length-1]);const u=[],d=[];let h;for(let f=0;f<c.length-1;f++){h=o[f];const m=c[f],v=1/a[f],y=m+c[f+1]-h-h;u.push((h-m-y)*v),d.push(y*v*v)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=u,this.c3s=d}}const xat=1;function aSe(n){const e=n.nodeType===xat?n:n.parentElement;if(!e)return null;const{top:t,left:r}=e.getBoundingClientRect();return{x:r,y:t}}function sP(n){return{x:n.clientX,y:n.clientY}}function Sat(n){var e;return n.nodeName==="IMG"&&(_at()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function Tat(n,e,t,r){let i=n?e.width:t,a=n?e.height:r;return iSe()&&n&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function Eat(n,e,t,r,i){const a=Sat(e),s=aSe(a?n:e),l={x:t.x-s.x,y:t.y-s.y},{offsetWidth:c,offsetHeight:u}=n,{anchorX:d,anchorY:h}=r,{dragPreviewWidth:f,dragPreviewHeight:m}=Tat(a,e,c,u),v=()=>{let D=new Yoe([0,.5,1],[l.y,l.y/u*m,l.y+m-u]).interpolate(h);return iSe()&&a&&(D+=(window.devicePixelRatio-1)*m),D},y=()=>new Yoe([0,.5,1],[l.x,l.x/c*f,l.x+f-c]).interpolate(d),{offsetX:w,offsetY:_}=i,S=w===0||w,A=_===0||_;return{x:S?w:y(),y:A?_:v()}}class Aat{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function Cat(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Koe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Cat(n,i,t[i])})}return n}class Dat{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),a=o=>this.handleSelectStart(o);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",a),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),a=o=>this.handleDrop(o,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",a),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Koe({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return Koe({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Woe).some(t=>Woe[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=wat(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&aSe(a)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:a}=this;this.dragStartSourceIds=null;const o=sP(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=i,l=wU(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const u=this.monitor.getSourceId(),d=this.sourceNodes.get(u),h=this.sourcePreviewNodes.get(u)||d;if(h){const{anchorX:f,anchorY:m,offsetX:v,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),S=Eat(d,h,o,{anchorX:f,anchorY:m},{offsetX:v,offsetY:y});s.setDragImage(h,S.x,S.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(s&&!s.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:s}=i,l=wU(s);l&&this.beginDragNativeItem(l,s)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:a}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,a.length>0&&this.actions.hover(a,{clientOffset:sP(i)}),a.some(s=>this.monitor.canDropOnTarget(s))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:a}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=sP(i),this.scheduleHover(a),(a||[]).some(s=>this.monitor.canDropOnTarget(s))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var a;i.preventDefault(),(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else wU(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:a}=this;this.dropTargetIds=[],this.actions.hover(a,{clientOffset:sP(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))},this.options=new Aat(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new yat(this.isNodeInDocument)}}const kat=function(e,t,r){return new Dat(e,t,r)},Iat=(n,e)=>{if(!n.scheduledDate)return null;const t=`task-${n.id}`,r=n.title,i=n.description,a=(e==null?void 0:e.name)||"No Project",o=(e==null?void 0:e.color)||"#6B7280",s=new Date(n.scheduledDate),l=n.completed||n.status==="completed";if(!n.includeTime||!n.scheduledStartTime||!n.scheduledEndTime)return{id:t,title:r,description:i,project:a,color:o,start:s,end:s,isAllDay:!0,taskId:n.id,isTask:!0,isDraggable:!0,isCompleted:l,completedAt:l?n.updatedAt:void 0};const[c,u]=n.scheduledStartTime.split(":").map(Number),[d,h]=n.scheduledEndTime.split(":").map(Number),f=new Date(s);f.setHours(c,u,0,0);const m=new Date(s);return m.setHours(d,h,0,0),m<f&&m.setDate(m.getDate()+1),{id:t,title:r,description:i,project:a,color:o,start:f,end:m,isAllDay:!1,taskId:n.id,isTask:!0,isDraggable:!0,isCompleted:l,completedAt:l?n.updatedAt:void 0}},Mat=(n,e)=>{const t=[],r=new Map;return e.forEach(i=>{r.set(i.id,i)}),n.forEach(i=>{const a=r.get(i.projectId),o=Iat(i,a);o&&t.push(o)}),t},Pat=(n,e,t)=>{const r=Mat(e,t);return[...n,...r]},oSe=(n,e)=>{const t=n.end.getTime()-n.start.getTime();if(e.isAllDay){const o=new Date(e.targetDate);o.setHours(0,0,0,0);const s=new Date(o);return{start:o,end:s}}let r;e.targetTime?(r=new Date(e.targetDate),r.setHours(e.targetTime.hour,e.targetTime.minute,0,0)):(r=new Date(e.targetDate),r.setHours(n.start.getHours(),n.start.getMinutes(),0,0));let i=t;n.isAllDay&&t===0?i=60*60*1e3:t===0&&(i=30*60*1e3);const a=new Date(r.getTime()+i);return{start:r,end:a}},Oat=(n,e,t)=>{if(go(n.start,e.targetDate)&&!e.targetTime&&n.isAllDay===(e.isAllDay||!1))return!1;const{start:r,end:i}=oSe(n,e);return e.isAllDay?!0:t.filter(s=>s.id!==n.id&&go(s.start,r)).filter(s=>!s.isAllDay&&(r>=s.start&&r<s.end||i>s.start&&i<=s.end||r<=s.start&&i>=s.end)).length===0},Rat=n=>An(n,"HH:mm"),Nat=n=>{const t=(n.end.getTime()-n.start.getTime())/(1e3*60);return t===0?30:Math.max(t,30)},X1=({event:n,style:e,onClick:t,children:r,className:i="",sourceView:a="week",onResize:o,onResizeMove:s})=>{const l=ye.useRef(!1),c=K.useRef(!1),u=K.useRef(null),d=K.useRef(0),h=K.useRef(null),[f,m]=K.useState(!1),[v,y]=K.useState(!1),[w,_]=K.useState(-1),[S,A]=K.useState(null),C=K.useRef(-1),{tasks:D}=rn();ye.useEffect(()=>{C.current=w},[w]),ye.useEffect(()=>{const X=re=>{re.altKey&&(l.current=!0)},te=re=>{re.altKey||(l.current=!1)};return window.addEventListener("keydown",X),window.addEventListener("keyup",te),()=>{window.removeEventListener("keydown",X),window.removeEventListener("keyup",te)}},[]);const[{isDragging:M},P]=sat({type:"event",item:()=>{const X=Nat(n),te=n.end.getTime()-n.start.getTime(),re=l.current;return te===0&&console.log("Creating drag item for zero-duration event:",{eventId:n.id,actualDuration:te,displayDurationMinutes:X,start:n.start,end:n.end}),re&&console.log("🔄 Alt+Drag detected - will duplicate task:",n.title,"in view:",a,"isAllDay:",n.isAllDay),{type:"event",event:n,sourceDate:n.start,sourceView:a,displayDurationMinutes:X,isDuplicate:re}},collect:X=>({isDragging:X.isDragging()}),canDrag:()=>n.isDraggable!==!1&&!c.current}),O=(X,te,re)=>re?0:Math.ceil((te+X)/5)*5,j=(X,te)=>{if(X.stopPropagation(),n.isAllDay||n.isDraggable===!1)return;const re=D.findIndex(z=>z.id===n.taskId);re!==-1&&(_(re),C.current=re,c.current=!0,u.current=te,d.current=X.clientY,h.current={...n},document.addEventListener("mousemove",L),document.addEventListener("mouseup",B))},L=X=>{if(!c.current||!u.current||!h.current)return;const te=X.clientY-d.current;let re=new Date;if(u.current==="top"){re=new Date(h.current.start);const z=O(re.getMinutes(),te,n.isAllDay);re.setMinutes(z),re<h.current.end&&(s==null||s(C.current,"top",re))}else{re=new Date(h.current.end);const z=O(re.getMinutes(),te,n.isAllDay);re.setMinutes(z),re>h.current.start&&(s==null||s(C.current,"bottom",re))}},B=X=>{if(!c.current||!u.current||!h.current)return;const te=X.clientY-d.current;let re=new Date;if(u.current==="top"){re=new Date(h.current.start);const z=O(re.getMinutes(),te,n.isAllDay);re.setMinutes(z),re<h.current.end&&(o==null||o(n,"top",re))}else{re=new Date(h.current.end);const z=O(re.getMinutes(),te,n.isAllDay);re.setMinutes(z),re>h.current.start&&(o==null||o(n,"bottom",re)),A(setTimeout(()=>{A(null)},200))}c.current=!1,u.current=null,h.current=null,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",B)},$=X=>{X.stopPropagation(),!c.current&&!S&&(t==null||t(n))},Y=X=>{X.altKey&&(l.current=!0)},q=r||E.jsxs("div",{className:"text-xs text-white font-medium truncate px-2 py-1",children:[!n.isAllDay&&E.jsx("div",{className:"text-[10px] opacity-80",children:Rat(n.start)}),E.jsx("div",{className:"truncate",children:n.title})]}),W=!n.isAllDay&&n.isDraggable!==!1&&o;return E.jsxs("div",{ref:n.isDraggable!==!1?P:null,className:`
        task-item relative rounded cursor-pointer transition-all duration-200
        ${M?"opacity-60 dragging shadow-lg":"hover:shadow-md"}
        ${n.isDraggable!==!1?"cursor-grab active:cursor-grabbing":"cursor-pointer"}
        ${i}
      `,style:{backgroundColor:n.color,border:M?`2px solid ${n.color}`:"none",...e},onClick:$,onMouseDown:Y,children:[W&&E.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 cursor-ns-resize z-10",onMouseDown:X=>j(X,"top"),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:f&&E.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-6 h-1 bg-white rounded-full opacity-70"})}),q,W&&E.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 cursor-ns-resize z-10",onMouseDown:X=>j(X,"bottom"),onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:v&&E.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-6 h-1 bg-white rounded-full opacity-70"})}),M&&E.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-10 rounded border border-white border-opacity-30"})]})},Hk=({date:n,hour:e,minute:t=0,isAllDay:r=!1,onDrop:i,children:a,className:o="",style:s})=>{const[{isOver:l,canDrop:c,draggedItem:u},d]=gat({accept:"event",drop:m=>{const v={targetDate:n,targetTime:e!==void 0?{hour:e,minute:t}:void 0,isAllDay:r};return i(m,v),v},collect:m=>({isOver:m.isOver(),canDrop:m.canDrop(),draggedItem:m.getItem()})}),h=()=>{if(!u||r)return"auto";const m=u.displayDurationMinutes,y=m/60*60,w=`${Math.max(y,30)}px`;return m===30&&console.log("Zero-duration event detected:",{originalStart:u.event.start,originalEnd:u.event.end,displayDurationMinutes:m,calculatedHeight:w}),w},f=()=>u&&u.event.color||"#3B82F6";return E.jsxs("div",{ref:d,className:`drop-zone ${o} transition-all duration-200 relative`,style:s,children:[a,l&&E.jsx("div",{className:`absolute pointer-events-none rounded-md transition-all duration-200 drop-indicator ${c?"valid":"invalid"}`,style:{top:0,left:0,right:0,height:h(),border:`1px solid ${c?f():"#EF4444"}`,backgroundColor:c?`${f()}15`:"#FEF2F2",borderStyle:"solid",boxSizing:"border-box","--drop-color":f(),"--drop-bg-color":`${f()}15`}})]})},Xoe=Array.from({length:24},(n,e)=>e),qp=60,Lat=64,jat=({currentDate:n,events:e,onEventClick:t,onTimeSlotClick:r,onAllDayClick:i,onMouseDown:a,onDragCreate:o,onEventDrop:s,onEventResize:l,onEventResizeMove:c,clearDragIndicator:u})=>{const{projects:d}=rn(),h=Ig(n,{weekStartsOn:1}),f=Array.from({length:7},(q,W)=>AW(h,W)),[m,v]=K.useState({isDragging:!1,startElement:null,startY:0,startTime:null,dayIndex:0}),[y,w]=K.useState({visible:!1,top:0,height:0,startTime:null,endTime:null,dayIndex:0}),_=K.useRef(null),S=K.useRef(null),A=K.useCallback(()=>{const q=localStorage.getItem("lastUsedProjectId")||"no-project",W=d.find(X=>X.id===q);return(W==null?void 0:W.color)||"#EF4444"},[d]),C=q=>e.filter(W=>go(W.start,q)&&!W.isAllDay),D=q=>e.filter(W=>go(W.start,q)&&W.isAllDay),M=()=>Math.max(...f.map(q=>D(q).length),1),P=()=>{const q=M();return Math.max(40,q*26+12)},O=q=>{const W=q.start.getHours()+q.start.getMinutes()/60,te=q.end.getHours()+q.end.getMinutes()/60-W,re=te===0?30:Math.max(te*qp,30);return{position:"absolute",top:`${W*qp+2}px`,height:`${re-4}px`,left:"4px",right:"4px",backgroundColor:q.color,zIndex:10}},j=K.useCallback((q,W,X)=>{const te=parseInt(q.getAttribute("data-hour")||"0"),re=q.getBoundingClientRect(),z=Math.floor(W/re.height*60),oe=Math.round(z/15)*15,le=te*60+oe,ee=new Date(f[X]);return ee.setHours(Math.floor(le/60),le%60,0,0),ee},[f]),L=K.useCallback(q=>{if(q.target!==q.currentTarget)return;const W=q.currentTarget,X=parseInt(W.getAttribute("data-day")||"0"),te=W.getBoundingClientRect(),re=q.clientY-te.top,z=j(W,re,X);v({isDragging:!0,startElement:W,startY:re,startTime:z,dayIndex:X}),w({visible:!0,top:re+parseInt(W.getAttribute("data-hour")||"0")*qp+80+P(),height:1,startTime:z,endTime:z,dayIndex:X}),q.preventDefault()},[j]),B=K.useCallback(q=>{var ee;if(!m.isDragging||!m.startElement||!_.current)return;const X=_.current.querySelectorAll(".day-column")[m.dayIndex];if(!X)return;const te=(ee=X.querySelector('[data-hour="0"]'))==null?void 0:ee.parentElement;if(!te)return;const re=te.getBoundingClientRect(),z=q.clientY-re.top,oe=Math.floor(z/qp),le=X.querySelector(`[data-hour="${oe}"]`);if(le){const be=le.getBoundingClientRect(),he=q.clientY-be.top,pe=j(le,he,m.dayIndex),ct=m.startY+parseInt(m.startElement.getAttribute("data-hour")||"0")*qp,Be=z,Se=Math.min(ct,Be),_e=Math.abs(Be-ct);w(me=>({...me,top:Se+80+P(),height:Math.max(_e,30),endTime:pe>m.startTime?pe:m.startTime,startTime:pe>m.startTime?m.startTime:pe}))}},[m,j]),$=K.useCallback(q=>{if(!m.isDragging||!y.startTime||!y.endTime){v({isDragging:!1,startElement:null,startY:0,startTime:null,dayIndex:0}),w(X=>({...X,visible:!1}));return}y.endTime.getTime()-y.startTime.getTime()>=15*60*1e3&&(o==null||o(y.startTime,y.endTime)),v({isDragging:!1,startElement:null,startY:0,startTime:null,dayIndex:0})},[m,y,o]);ye.useEffect(()=>{if(m.isDragging)return document.addEventListener("mousemove",B),document.addEventListener("mouseup",$),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",$)}},[m.isDragging,B,$]);const Y=(q,W)=>!q||!W?"":`${An(q,"HH:mm")} - ${An(W,"HH:mm")}`;return ye.useEffect(()=>{u&&w({visible:!1,top:0,height:0,startTime:null,endTime:null,dayIndex:0})},[u]),E.jsx("div",{className:"calendar-week-container flex flex-col h-full bg-background-primary dark:bg-[#141414]",children:E.jsxs("div",{className:"grid grid-cols-8 flex-1",style:{gridTemplateColumns:`${Lat}px repeat(7, minmax(0, 1fr))`},children:[E.jsxs("div",{className:"calendar-week-header col-span-8 grid grid-cols-subgrid bg-background-primary dark:bg-[#141414] border-b border-border sticky top-0 z-30",style:{height:"80px"},children:[E.jsx("div",{className:"border-r border-border flex items-center justify-center text-xs text-text-secondary bg-background-primary dark:bg-[#141414]",children:"GMT+07"}),f.map((q,W)=>E.jsxs("div",{className:`calendar-week-day-header flex flex-col items-center justify-center py-3 bg-background-primary dark:bg-[#141414] min-w-0 ${W<6?"border-r border-border":""} ${fw(q)?"bg-primary bg-opacity-5":""}`,children:[E.jsx("div",{className:"text-xs text-text-secondary font-medium mb-1",children:An(q,"EEE").toUpperCase()}),E.jsx("div",{className:`text-lg font-medium ${fw(q)?"text-primary bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center":"text-text-primary"}`,children:An(q,"d")})]},W))]}),E.jsxs("div",{className:"calendar-week-allday col-span-8 grid grid-cols-subgrid bg-background-primary dark:bg-[#141414] border-b border-border sticky z-30",style:{height:`${P()}px`,top:"80px"},children:[E.jsx("div",{className:"border-r border-b border-border flex items-center justify-center text-xs text-text-secondary bg-background-primary dark:bg-[#141414]",children:"All day"}),f.map((q,W)=>E.jsx("div",{className:`relative min-w-0 ${W<6?"border-r border-border":""}`,children:E.jsx(Hk,{date:q,isAllDay:!0,onDrop:s,className:"h-full cursor-pointer hover:bg-background-container transition-colors relative",children:E.jsx("div",{className:"w-full h-full flex flex-col items-center justify-start px-1 pt-1 pb-2 overflow-hidden",onClick:X=>{X.target===X.currentTarget&&(i==null||i(q))},children:D(q).map((X,te)=>E.jsx("div",{className:"flex-shrink-0 relative w-full",style:{height:"24px",marginBottom:"2px",minWidth:0},children:E.jsx(X1,{event:X,onClick:t,sourceView:"week",className:`absolute inset-0 px-2 py-1 text-xs rounded truncate flex items-center ${X.isTask?"border-l-2 border-white border-opacity-50":""} ${X.isCompleted?"calendar-event-completed":""}`,style:{backgroundColor:X.color,position:"relative",width:"100%",height:"100%"},children:E.jsx("div",{className:"flex items-center text-white w-full",children:E.jsx("span",{className:`truncate ${X.isCompleted?"line-through":""}`,children:X.title})})})},X.id))})})},W))]}),E.jsxs("div",{className:"calendar-scrollable col-span-8 grid grid-cols-subgrid overflow-auto bg-background-primary dark:bg-[#141414]",ref:S,children:[E.jsx("div",{className:"calendar-week-time-column bg-background-primary dark:bg-[#141414] border-r border-border",children:Xoe.map(q=>E.jsx("div",{className:"h-[60px] border-b border-border flex items-start justify-center pt-1",children:E.jsx("span",{className:"text-xs text-text-secondary",children:An(new Date().setHours(q,0),"HH:mm")})},q))}),E.jsx("div",{className:"contents",ref:_,children:f.map((q,W)=>E.jsxs("div",{className:`calendar-week-day-column relative day-column min-w-0 ${W<6?"border-r border-border":""}`,children:[Xoe.map(X=>E.jsx(Hk,{date:q,hour:X,onDrop:s,className:"h-[60px] border-b border-border cursor-cell hover:bg-background-container hover:bg-opacity-50 relative",children:E.jsx("div",{className:"w-full h-full","data-day":W,"data-hour":X,onMouseDown:L,onClick:te=>{if(te.target===te.currentTarget&&!m.isDragging){const re=new Date(q);re.setHours(X,0,0,0);const z=new Date(re),oe=new Date(re);oe.setHours(oe.getHours()+1),w({visible:!0,top:X*qp+80+P(),height:qp,startTime:z,endTime:oe,dayIndex:W}),r==null||r(re)}}})},X)),y.visible&&y.dayIndex===W&&E.jsx("div",{className:"absolute rounded pointer-events-none z-20 pl-0.5 pr-1 py-1",style:{top:`${y.top-80-P()+2}px`,height:`${y.height-4}px`,left:"4px",right:"4px",backgroundColor:A(),opacity:.7},children:E.jsx("div",{className:"text-xs text-white font-medium",children:Y(y.startTime,y.endTime)})}),C(q).map(X=>E.jsx(X1,{event:X,onClick:t,sourceView:"week",onResize:l,onResizeMove:c,className:`rounded absolute ${X.isTask?"border-l-4":""} ${X.isCompleted?"calendar-event-completed":""}`,style:{...O(X),borderLeftColor:X.isTask?X.color:void 0},children:E.jsxs("div",{className:"pl-0.5 pr-1 py-1",children:[E.jsx("div",{className:`task-item-title ${X.isCompleted?"line-through":""}`,children:X.title}),E.jsxs("div",{className:"task-item-time",children:[An(X.start,"HH:mm")," - ",An(X.end,"HH:mm")]}),!X.isTask&&X.description&&E.jsx("div",{className:`text-xs opacity-75 mt-1 truncate text-white ${X.isCompleted?"text-gray-400":""}`,children:X.description})]})},X.id)),fw(q)&&E.jsx("div",{className:"current-time-indicator absolute",style:{top:`${new Date().getHours()*qp+new Date().getMinutes()/60*qp}px`,left:0,right:0,zIndex:15}})]},W))})]})]})})},Zoe=Array.from({length:24},(n,e)=>e),Gp=60,Fat=({currentDate:n,events:e,onEventClick:t,onTimeSlotClick:r,onAllDayClick:i,onDragCreate:a,onEventDrop:o,clearDragIndicator:s})=>{const{projects:l}=rn(),[c,u]=K.useState({isDragging:!1,startElement:null,startY:0,startTime:null}),[d,h]=K.useState({visible:!1,top:0,height:0,startTime:null,endTime:null}),f=K.useRef(null),m=K.useCallback(()=>{const P=localStorage.getItem("lastUsedProjectId")||"no-project",O=l.find(j=>j.id===P);return(O==null?void 0:O.color)||"#EF4444"},[l]),v=()=>e.filter(P=>go(P.start,n)&&!P.isAllDay),y=()=>e.filter(P=>go(P.start,n)&&P.isAllDay),w=()=>{const P=y().length;return Math.max(40,P*26+12)},_=P=>{const O=P.start.getHours()+P.start.getMinutes()/60,L=P.end.getHours()+P.end.getMinutes()/60-O,B=L===0?30:Math.max(L*Gp,30);return{position:"absolute",top:`${O*Gp+2}px`,height:`${B-4}px`,left:"4px",right:"4px",backgroundColor:P.color,zIndex:10}},S=K.useCallback((P,O)=>{const j=parseInt(P.getAttribute("data-hour")||"0"),L=P.getBoundingClientRect(),B=Math.floor(O/L.height*60),$=Math.round(B/15)*15,Y=j*60+$,q=new Date(n);return q.setHours(Math.floor(Y/60),Y%60,0,0),q},[n]),A=K.useCallback(P=>{if(P.target!==P.currentTarget)return;const O=P.currentTarget,j=O.getBoundingClientRect(),L=P.clientY-j.top,B=S(O,L);u({isDragging:!0,startElement:O,startY:L,startTime:B}),h({visible:!0,top:L+parseInt(O.getAttribute("data-hour")||"0")*Gp,height:1,startTime:B,endTime:B}),P.preventDefault()},[S]),C=K.useCallback(P=>{if(!c.isDragging||!c.startElement||!f.current)return;const O=f.current.getBoundingClientRect(),j=P.clientY-O.top,L=Math.floor(j/Gp),B=f.current.querySelector(`[data-hour="${L}"]`);if(B){const $=B.getBoundingClientRect(),Y=P.clientY-$.top,q=S(B,Y),W=c.startY+parseInt(c.startElement.getAttribute("data-hour")||"0")*Gp,X=j,te=Math.min(W,X),re=Math.abs(X-W);h(z=>({...z,top:te,height:Math.max(re,30),endTime:q>c.startTime?q:c.startTime,startTime:q>c.startTime?c.startTime:q}))}},[c,S]),D=K.useCallback(P=>{if(!c.isDragging||!d.startTime||!d.endTime){u({isDragging:!1,startElement:null,startY:0,startTime:null}),h(j=>({...j,visible:!1}));return}d.endTime.getTime()-d.startTime.getTime()>=15*60*1e3&&(a==null||a(d.startTime,d.endTime)),u({isDragging:!1,startElement:null,startY:0,startTime:null})},[c,d,a]);ye.useEffect(()=>{if(c.isDragging)return document.addEventListener("mousemove",C),document.addEventListener("mouseup",D),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",D)}},[c.isDragging,C,D]);const M=(P,O)=>!P||!O?"":`${An(P,"HH:mm")} - ${An(O,"HH:mm")}`;return ye.useEffect(()=>{s&&h({visible:!1,top:0,height:0,startTime:null,endTime:null})},[s]),E.jsx("div",{className:"flex flex-col h-full",children:E.jsxs("div",{className:"flex flex-col h-full",style:{"--scrollbar-width":"15px"},children:[E.jsx("div",{className:"bg-background-primary dark:bg-[#141414] sticky top-0 z-20 border-b border-border",children:E.jsxs("div",{className:"grid",style:{gridTemplateColumns:"64px 1fr",paddingRight:"var(--scrollbar-width)"},children:[E.jsx("div",{className:"flex items-center justify-center text-xs text-text-secondary py-3 border-r border-border",children:"GMT+07"}),E.jsxs("div",{className:"flex flex-col items-center justify-center py-3",children:[E.jsx("div",{className:"text-xs text-text-secondary font-medium mb-1",children:An(n,"EEE").toUpperCase()}),E.jsx("div",{className:`text-lg font-medium ${fw(n)?"text-primary bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center":"text-text-primary"}`,children:An(n,"d")})]})]})}),E.jsx("div",{className:"bg-background-primary dark:bg-[#141414] border-b border-border",children:E.jsxs("div",{className:"grid",style:{gridTemplateColumns:"64px 1fr",paddingRight:"var(--scrollbar-width)"},children:[E.jsx("div",{className:"flex items-center justify-center text-xs text-text-secondary border-r border-border",style:{height:`${w()}px`},children:"All day"}),E.jsx(Hk,{date:n,isAllDay:!0,onDrop:o,className:"cursor-pointer hover:bg-background-container transition-colors relative",style:{height:`${w()}px`},children:E.jsx("div",{className:"w-full h-full flex flex-col items-center justify-start px-1 pt-1 pb-2 overflow-hidden",onClick:P=>{P.target===P.currentTarget&&(i==null||i(n))},children:y().map((P,O)=>E.jsx("div",{className:"flex-shrink-0 relative w-full",style:{height:"24px",marginBottom:"2px",minWidth:0},children:E.jsx(X1,{event:P,onClick:t,sourceView:"day",className:`absolute inset-0 px-2 py-1 text-xs rounded truncate flex items-center ${P.isTask?"border-l-2 border-white border-opacity-50":""} ${P.isCompleted?"calendar-event-completed":""}`,style:{backgroundColor:P.color,position:"relative",width:"100%",height:"100%"},children:E.jsx("div",{className:"flex items-center text-white w-full",children:E.jsx("span",{className:`truncate ${P.isCompleted?"line-through":""}`,children:P.title})})})},P.id))})})]})}),E.jsx("div",{className:"flex-1 overflow-auto relative bg-background-primary dark:bg-[#141414]",children:E.jsxs("div",{className:"grid min-h-[1440px]",style:{gridTemplateColumns:"64px 1fr"},children:[E.jsx("div",{className:"bg-background-primary dark:bg-[#141414] border-r border-border",children:Zoe.map(P=>E.jsx("div",{className:"h-[60px] border-b border-border flex items-start justify-center pt-1",children:E.jsx("span",{className:"text-xs text-text-secondary",children:An(new Date().setHours(P,0),"HH:mm")})},P))}),E.jsxs("div",{className:"relative",ref:f,children:[Zoe.map(P=>E.jsx(Hk,{date:n,hour:P,onDrop:o,className:"h-[60px] border-b border-border cursor-cell hover:bg-background-container hover:bg-opacity-50 relative",children:E.jsx("div",{className:"w-full h-full","data-day":0,"data-hour":P,onMouseDown:A,onClick:O=>{if(O.target===O.currentTarget&&!c.isDragging){const j=new Date(n);j.setHours(P,0,0,0);const L=new Date(j),B=new Date(j);B.setHours(B.getHours()+1),h({visible:!0,top:P*Gp,height:Gp,startTime:L,endTime:B}),r==null||r(j)}}})},P)),d.visible&&E.jsx("div",{className:"absolute rounded pointer-events-none z-20 pl-0.5 pr-1 py-1",style:{top:`${d.top+2}px`,height:`${d.height-4}px`,left:"4px",right:"4px",backgroundColor:m(),opacity:.7},children:E.jsx("div",{className:"text-xs text-white font-medium",children:M(d.startTime,d.endTime)})}),v().map(P=>E.jsx(X1,{event:P,onClick:t,sourceView:"day",className:`rounded absolute ${P.isTask?"border-l-4":""} ${P.isCompleted?"calendar-event-completed":""}`,style:{..._(P),borderLeftColor:P.isTask?P.color:void 0},children:E.jsxs("div",{className:"pl-0.5 pr-1 py-1",children:[E.jsx("div",{className:`task-item-title ${P.isCompleted?"line-through":""}`,children:P.title}),E.jsxs("div",{className:"task-item-time",children:[An(P.start,"HH:mm")," - ",An(P.end,"HH:mm")]}),!P.isTask&&P.description&&E.jsx("div",{className:`text-xs opacity-75 mt-1 truncate text-white ${P.isCompleted?"text-gray-400":""}`,children:P.description})]})},P.id)),fw(n)&&E.jsx("div",{className:"current-time-indicator absolute",style:{top:`${new Date().getHours()*Gp+new Date().getMinutes()/60*Gp}px`,left:0,right:0,zIndex:15}})]})]})})]})})},$at=({currentDate:n,events:e,onEventClick:t,onDateClick:r,onEventDrop:i,onDayViewClick:a})=>{const o=()=>{const h=Ig(g_e(n),{weekStartsOn:1}),f=DW(p_e(n),{weekStartsOn:1});return CN({start:h,end:f})},s=h=>e.filter(f=>go(f.start,h)).sort((f,m)=>f.isAllDay&&!m.isAllDay?-1:!f.isAllDay&&m.isAllDay?1:f.start.getTime()-m.start.getTime()),l=o(),c=Math.ceil(l.length/7),u=c===6,d=u?140:"auto";return E.jsxs("div",{className:"w-full bg-background-primary h-full flex flex-col",children:[E.jsx("div",{className:"grid grid-cols-7 border-b border-border bg-background-primary sticky top-0 z-10",children:["MON","TUE","WED","THU","FRI","SAT","SUN"].map(h=>E.jsx("div",{className:"py-2 text-center text-sm font-medium text-text-secondary",children:h},h))}),E.jsx("div",{className:`flex-1 ${u?"overflow-auto":"overflow-hidden"}`,children:E.jsx("div",{className:"grid grid-cols-7 border-l border-t border-border",style:{gridTemplateRows:u?`repeat(${c}, ${d}px)`:`repeat(${c}, minmax(140px, 1fr))`,minHeight:u?`${c*140}px`:"100%"},children:l.map((h,f)=>{const m=s(h),v=Mtt(h,n),y=fw(h),w=m.filter(S=>S.isAllDay),_=m.filter(S=>!S.isAllDay);return E.jsx(Hk,{date:h,isAllDay:!0,onDrop:i,className:`
                border-b border-r border-border p-1 cursor-pointer transition-colors
                ${v?y?"bg-primary/5 text-text-primary":"bg-background-primary text-text-primary hover:bg-background-container/50":"bg-background-secondary/30 text-text-secondary"}
              `,children:E.jsxs("div",{className:"w-full h-full flex flex-col min-h-0",onClick:()=>r==null?void 0:r(h),children:[E.jsx("div",{className:"text-sm mb-1 flex-shrink-0",children:y?E.jsx("div",{className:"text-white bg-primary rounded-full w-6 h-6 flex items-center justify-center font-medium",children:An(h,"d")}):E.jsx("div",{className:`font-medium ${v?"text-text-primary":"text-text-secondary/70"}`,children:An(h,"d")})}),E.jsx("div",{className:"flex-1 min-h-0",children:(()=>{const A=[],C=w.length+_.length,D=w.slice(0,4);A.push(...D);const M=4-A.length;if(M>0){const O=_.slice(0,M);A.push(...O)}const P=C-A.length;return E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"flex flex-col gap-[2px]",children:A.map((O,j)=>O.isAllDay?E.jsx(X1,{event:O,onClick:t,sourceView:"month",className:`month-view-event block w-full cursor-grab rounded text-xs px-2 py-1 h-5 flex items-center ${v?O.isCompleted?"calendar-event-completed":"":"opacity-60"}`,style:{backgroundColor:O.color},children:E.jsx("div",{className:`font-medium truncate leading-tight w-full text-white ${O.isCompleted?"line-through":""}`,title:O.title,children:O.title})},O.id):E.jsx(X1,{event:O,onClick:t,sourceView:"month",className:`month-view-event block hover:bg-background-container rounded px-1 py-0.5 min-h-[16px] text-xs ${v?O.isCompleted?"calendar-event-completed":"":"opacity-60"}`,style:{backgroundColor:"transparent"},children:E.jsxs("div",{className:`flex items-center w-full leading-tight ${v?"text-text-primary":"text-text-secondary"}`,children:[E.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full mr-1 flex-shrink-0",style:{backgroundColor:O.color}}),E.jsxs("span",{className:`truncate ${O.isCompleted?"line-through":""}`,children:[An(O.start,"h:mm a")," ",O.title]})]})},O.id))}),P>0&&E.jsxs("div",{className:`text-xs font-medium cursor-pointer hover:text-primary hover:bg-background-container px-1 py-0.5 rounded min-h-[16px] flex items-center mt-1 ${v?"text-text-secondary":"text-text-secondary/70 opacity-60"}`,onClick:O=>{O.stopPropagation(),a==null||a(h)},children:["+",P," more"]})]})})()})]})},f)})})})]})};let Qoe=0;const Bat=2e3;let Joe=!1;const Uat=()=>{const n=Qd(i=>i.loadExtensionData),e=Qd(i=>i.initializeFocusSync),t=K.useCallback(async()=>{const i=Date.now();if(!(i-Qoe<Bat)){Qoe=i;try{await n()}catch{}}},[n]);return K.useEffect(()=>{(async()=>{Joe||(Joe=!0,console.log("🚀 Initializing extension sync..."),await t(),setTimeout(async()=>{try{await e()}catch{}},100))})()},[]),K.useEffect(()=>{const i=setInterval(t,3e5);return()=>clearInterval(i)},[t]),{refreshData:K.useCallback(()=>{t()},[t])}},Vat=()=>{const[n,e]=K.useState(new Date),[t,r]=K.useState("week"),[i,a]=K.useState([]),[o,s]=K.useState(null),[l,c]=K.useState(!1),[u,d]=K.useState(null),[h,f]=K.useState(!1),[m,v]=K.useState(null),[y,w]=K.useState(!1),[_,S]=K.useState([]),[A,C]=K.useState([]),{tasks:D,projects:M,addTask:P,updateTask:O,setEditingTaskId:j,deleteTask:L,updateTaskLocally:B}=rn(),{user:$}=Rn(),Y=K.useMemo(()=>Pat(i,D,M),[i,D,M]),q=$g(),W=vs(),{isLeftSidebarOpen:X,toggleLeftSidebar:te}=tc();Uat(),K.useEffect(()=>{const me=new URLSearchParams(W.search).get("view");me&&["day","week","month"].includes(me)&&r(me)},[W.search]);const re=K.useCallback(()=>{if(console.log("↩️ performUndo called, undo stack length:",_.length),_.length===0){console.log("❌ Undo stack is empty");return}const _e=_[_.length-1],{taskId:me,beforeState:fe,afterState:Ge}=_e;console.log("🔄 Undoing action for task:",me,"to state:",fe);const Ve={...fe,scheduledDate:fe.scheduledDate===null?void 0:fe.scheduledDate,scheduledStartTime:fe.scheduledStartTime===null?void 0:fe.scheduledStartTime,scheduledEndTime:fe.scheduledEndTime===null?void 0:fe.scheduledEndTime};Ge.isNewlyCreated?L(me).then(()=>{C(nt=>[...nt,_e]),S(nt=>nt.slice(0,-1))}).catch(nt=>{console.error("Failed to undo task creation:",nt)}):O(me,Ve).then(()=>{C(nt=>[...nt,_e]),S(nt=>nt.slice(0,-1))}).catch(nt=>{console.error("Failed to undo task change:",nt)})},[_,O]),z=K.useCallback(()=>{if(A.length===0)return;const _e=A[A.length-1],{taskId:me,afterState:fe}=_e,Ge={...fe,scheduledDate:fe.scheduledDate===null?void 0:fe.scheduledDate,scheduledStartTime:fe.scheduledStartTime===null?void 0:fe.scheduledStartTime,scheduledEndTime:fe.scheduledEndTime===null?void 0:fe.scheduledEndTime};O(me,Ge).then(()=>{S(Ve=>[...Ve,_e]),C(Ve=>Ve.slice(0,-1))}).catch(Ve=>{console.error("Failed to redo task change:",Ve)})},[A,O]);K.useEffect(()=>{const _e=me=>{const fe=me.target;if(!(o||l||h||fe.tagName==="INPUT"||fe.tagName==="TEXTAREA"||fe.isContentEditable)){if(me.metaKey&&me.key.toLowerCase()==="z"){console.log("⌨️ Command+Z detected, shiftKey:",me.shiftKey),me.preventDefault(),me.shiftKey?(console.log("🔄 Calling performRedo"),z()):(console.log("↩️ Calling performUndo"),re());return}switch(me.key.toLowerCase()){case"q":me.preventDefault(),oe("prev");break;case"e":me.preventDefault(),oe("next");break;case"arrowleft":me.preventDefault(),oe("prev");break;case"arrowright":me.preventDefault(),oe("next");break}}};return document.addEventListener("keydown",_e),()=>{document.removeEventListener("keydown",_e)}},[o,l,h,t,n,re,z]);const oe=_e=>{if(_e==="today"){e(new Date);return}const me=_e==="next"?1:-1;switch(t){case"month":e(CW(n,me));break;case"week":e(Cet(n,me));break;case"day":e(AW(n,me));break}},le=_e=>{c(!1),d(null),f(!1),v(null),w(!0),setTimeout(()=>w(!1),100),_e.isTask&&_e.taskId?(s(_e.taskId),j(_e.taskId)):(s("new"),j("new"))},ee=_e=>{s(null),j(null),c(!1),d(null),w(!0),setTimeout(()=>w(!1),100);const me=new Date(_e),fe=new Date(_e);fe.setHours(fe.getHours()+1);const Ve=go(me,new Date)?"pomodoro":"todo";v({startTime:me,endTime:fe,status:Ve,isAllDay:!1}),f(!0)},be=_e=>{s(null),j(null),c(!1),d(null),w(!0),setTimeout(()=>w(!1),100);const me=new Date(_e);me.setHours(0,0,0,0);const fe=new Date(_e);fe.setHours(0,0,0,0);const Ve=go(me,new Date)?"pomodoro":"todo";v({startTime:me,endTime:fe,status:Ve,isAllDay:!0}),f(!0)},he=_e=>{be(_e)},pe=K.useCallback((_e,me)=>{if(!(_e.isDuplicate===!0)&&!Oat(_e.event,me,Y))return;const Ge=t==="month"?_e.event.isAllDay:me.isAllDay||!1,{start:Ve,end:nt}=oSe(_e.event,{...me,isAllDay:Ge}),we={..._e.event,start:Ve,end:nt,isAllDay:Ge};if(_e.event.isTask&&_e.event.taskId){const rt=D.find(on=>on.id===_e.event.taskId);if(rt){if(_e.isDuplicate){console.log("🔄 Duplicating task:",rt.title);const Ut={title:rt.title,description:rt.description||"",status:rt.status,projectId:rt.projectId,userId:($==null?void 0:$.uid)||rt.userId,timeEstimated:rt.timeEstimated,scheduledDate:`${Ve.getFullYear()}-${String(Ve.getMonth()+1).padStart(2,"0")}-${String(Ve.getDate()).padStart(2,"0")}`,includeTime:!Ge,completed:!1,timeSpent:0};Ge||(Ut.scheduledStartTime=Ve.toTimeString().substring(0,5),Ut.scheduledEndTime=nt.toTimeString().substring(0,5)),go(Ve,new Date)&&rt.status==="todo"&&(Ut.status="pomodoro"),go(_e.event.start,new Date)&&!go(Ve,new Date)&&(t==="week"||t==="month")&&rt.status==="pomodoro"&&(Ut.status="todo"),P(Ut).then(Et=>{console.log("✅ Task duplicated successfully with ID:",Et);const pt={taskId:Et,beforeState:{scheduledDate:null,scheduledStartTime:null,scheduledEndTime:null,includeTime:!1,status:"todo"},afterState:{scheduledDate:Ut.scheduledDate||null,scheduledStartTime:Ut.scheduledStartTime||null,scheduledEndTime:Ut.scheduledEndTime||null,includeTime:!!Ut.includeTime,status:Ut.status,isNewlyCreated:!0}};console.log("🔄 Adding duplication action to undo stack:",pt),S(Rr=>{const vn=[...Rr,pt];return console.log("📚 Undo stack updated after duplication, length:",vn.length),vn}),C([])}).catch(Et=>{console.error("❌ Failed to duplicate task:",Et)});return}const on={scheduledDate:rt.scheduledDate||null,scheduledStartTime:rt.scheduledStartTime||null,scheduledEndTime:rt.scheduledEndTime||null,includeTime:rt.includeTime||!1,status:rt.status},Mt={scheduledDate:`${Ve.getFullYear()}-${String(Ve.getMonth()+1).padStart(2,"0")}-${String(Ve.getDate()).padStart(2,"0")}`,includeTime:!Ge};Ge?(Mt.scheduledStartTime=null,Mt.scheduledEndTime=null):(Mt.scheduledStartTime=Ve.toTimeString().substring(0,5),Mt.scheduledEndTime=nt.toTimeString().substring(0,5)),go(Ve,new Date)&&rt.status==="todo"&&(Mt.status="pomodoro"),go(_e.event.start,new Date)&&!go(Ve,new Date)&&(t==="week"||t==="month")&&rt.status==="pomodoro"&&(Mt.status="todo");const Yt={scheduledDate:Mt.scheduledDate,scheduledStartTime:Mt.scheduledStartTime,scheduledEndTime:Mt.scheduledEndTime,includeTime:Mt.includeTime,status:Mt.status||rt.status},xn={taskId:rt.id,beforeState:on,afterState:Yt};console.log("🔄 Adding action to undo stack:",xn),S(Ut=>{const Ae=[...Ut,xn];return console.log("📚 Undo stack updated, length:",Ae.length),Ae}),C([]),O(rt.id,Mt).catch(Ut=>{console.error("Failed to update task scheduling:",Ut),S(Ae=>Ae.slice(0,-1))})}}else a(i.map(rt=>rt.id===_e.event.id?we:rt))},[Y,i,D,t]),ct=K.useCallback((_e,me)=>{s(null),j(null),f(!1),v(null);const Ge=go(_e,new Date)?"pomodoro":"todo";d({startTime:_e,endTime:me,status:Ge}),c(!0)},[]),Be=K.useCallback((_e,me,fe)=>{if(!_e.isTask||!_e.taskId){a(i.map(Mt=>{if(Mt.id===_e.id){const kn={...Mt};return me==="top"?kn.start=fe:kn.end=fe,kn}return Mt}));return}const Ge=D.find(Mt=>Mt.id===_e.taskId);if(!Ge)return;const Ve={scheduledDate:Ge.scheduledDate||null,scheduledStartTime:Ge.scheduledStartTime||null,scheduledEndTime:Ge.scheduledEndTime||null,includeTime:Ge.includeTime||!1,status:Ge.status},nt={},we=fe.toTimeString().substring(0,5);me==="top"?nt.scheduledStartTime=we:nt.scheduledEndTime=we;const rt={...Ve,scheduledStartTime:me==="top"?we:Ve.scheduledStartTime,scheduledEndTime:me==="bottom"?we:Ve.scheduledEndTime},on={taskId:Ge.id,beforeState:Ve,afterState:rt};S(Mt=>[...Mt,on]),C([]),O(Ge.id,nt).catch(Mt=>{console.error("Failed to resize task:",Mt),S(kn=>kn.slice(0,-1))})},[i,D,O]),Se=(_e,me,fe)=>{if(!D[_e])return;const Ve={};me==="top"?Ve.scheduledStartTime=fe.toTimeString().substring(0,5):Ve.scheduledEndTime=fe.toTimeString().substring(0,5),B(_e,Ve)};return E.jsx(Lit,{backend:kat,children:E.jsxs("div",{className:"calendar-main-container flex flex-col h-full bg-background-primary dark:bg-[#141414]",children:[E.jsxs("div",{className:"calendar-header h-16 border-b border-border px-4 flex items-center justify-between bg-background-secondary",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[!X&&E.jsx("button",{onClick:te,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:E.jsx(bt,{name:"menu-line",size:20})})}),E.jsxs("div",{className:"flex items-center",children:[E.jsx("button",{onClick:()=>oe("prev"),className:"p-1.5 rounded-full hover:bg-background-container text-text-secondary hover:text-text-primary",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx("i",{className:"ri-arrow-left-s-line"})})}),E.jsx("button",{onClick:()=>oe("next"),className:"p-1.5 rounded-full hover:bg-background-container text-text-secondary hover:text-text-primary",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx("i",{className:"ri-arrow-right-s-line"})})})]}),E.jsx(Wj,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:An(n,"MMMM yyyy")})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("button",{onClick:()=>oe("today"),className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container",children:"Today"}),E.jsxs("div",{className:"inline-flex rounded-full bg-background-container p-1",children:[E.jsx("button",{type:"button",onClick:()=>r("day"),className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${t==="day"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Day"}),E.jsx("button",{type:"button",onClick:()=>r("week"),className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${t==="week"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Week"}),E.jsx("button",{type:"button",onClick:()=>r("month"),className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${t==="month"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Month"})]}),E.jsx(mi,{text:"Pomodoro Timer",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/pomodoro"?void 0:()=>q("/pomodoro"),"aria-label":W.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"timer-line",size:20})})})}),E.jsx(mi,{text:"Task management",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/projects"?void 0:()=>q("/projects"),"aria-label":W.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"task-line",size:20})})})}),E.jsx(mi,{text:"Productivity Insights",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/dashboard"?void 0:()=>q("/dashboard"),"aria-label":W.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"dashboard-line",size:20})})})}),E.jsx(mi,{text:"Calendar",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/calendar"?void 0:()=>q("/calendar"),"aria-label":W.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"calendar-line",size:20})})})}),E.jsx(mi,{text:"Deep Focus",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/deep-focus"?void 0:()=>q("/deep-focus"),"aria-label":W.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"brain-line",size:20})})})})]})]}),E.jsxs("div",{className:"flex-1 overflow-auto custom-scrollbar",children:[t==="week"&&E.jsx(jat,{currentDate:n,events:Y,onEventClick:le,onTimeSlotClick:ee,onAllDayClick:be,onDragCreate:ct,onEventDrop:pe,onEventResize:Be,onEventResizeMove:Se,clearDragIndicator:y}),t==="day"&&E.jsx(Fat,{currentDate:n,events:Y,onEventClick:le,onTimeSlotClick:ee,onAllDayClick:be,onDragCreate:ct,onEventDrop:pe,clearDragIndicator:y}),t==="month"&&E.jsx($at,{currentDate:n,events:Y,onEventClick:le,onDateClick:he,onEventDrop:pe,onDayViewClick:_e=>{e(_e),r("day")}})]}),o&&E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:E.jsx(Zv,{task:o==="new"?void 0:D.find(_e=>_e.id===o),onCancel:()=>{s(null),j(null),w(!0),setTimeout(()=>w(!1),100)},onSave:()=>{s(null),j(null),w(!0),setTimeout(()=>w(!1),100)}})})}),l&&u&&E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsx("div",{className:"bg-background-secondary rounded-lg shadow-xl max-w-md w-full mx-4",children:E.jsx(Zv,{initialStartTime:u.startTime,initialEndTime:u.endTime,status:u.status,onCancel:()=>{c(!1),d(null),w(!0),setTimeout(()=>w(!1),100)},onSave:()=>{c(!1),d(null),w(!0),setTimeout(()=>w(!1),100)}})})}),h&&m&&E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsx("div",{className:"bg-background-secondary rounded-lg shadow-xl max-w-md w-full mx-4",children:E.jsx(Zv,{initialStartTime:m.startTime,initialEndTime:m.endTime,status:m.status,isAllDay:m.isAllDay,onCancel:()=>{f(!1),v(null)},onSave:()=>{f(!1),v(null)}})})})]})})},zat=()=>{const{isLeftSidebarOpen:n}=tc();return K.useEffect(()=>{console.log("🔧 Calendar: Sidebar state changed",{isLeftSidebarOpen:n,timestamp:new Date().toISOString()}),requestAnimationFrame(()=>{const e=document.getElementById("sidebar");e&&(console.log("🔧 Calendar: Sidebar element found",{currentWidth:e.style.width,className:e.className,isOpen:n}),e.style.display="flex",n?(e.style.width="16rem",e.classList.remove("w-0"),e.classList.add("w-64")):(e.style.width="0px",e.classList.remove("w-64"),e.classList.add("w-0")))})},[n]),E.jsxs("div",{className:"calendar-page-container flex h-screen overflow-hidden bg-background-primary dark:bg-[#141414]",children:[E.jsx(ET,{}),E.jsx("div",{className:"flex-1 overflow-hidden",children:E.jsx(Vat,{})})]})},Hat={config:{deepFocus:!1,timerSync:!1,dataSync:!1,userSync:!1},getConfig(){return this.config},setConfig(n,e){this.config[n]=e},log(n,...e){this.config[n]&&console.log(`[${n}]`,...e)}},sSe={clearAllStorage:()=>{console.log("🧹 Clearing all localStorage..."),localStorage.clear(),console.log("✅ localStorage cleared. Please refresh the page.")},clearDeepFocusStorage:()=>{console.log("🧹 Clearing deep focus storage..."),localStorage.removeItem("deep-focus-storage"),console.log("✅ Deep focus storage cleared. Please refresh the page.")},viewStorage:()=>{console.log("📊 Current localStorage data:");for(let n=0;n<localStorage.length;n++){const e=localStorage.key(n);if(e)try{const t=localStorage.getItem(e),r=JSON.parse(t||"{}");console.log(`${e}:`,r)}catch{console.log(`${e} (raw):`,localStorage.getItem(e))}}},logCurrentState:(n,e)=>{var t,r;console.log("🔍 Deep Focus Debug State:",{totalSessions:n.length,completedSessions:n.filter(i=>i.status==="completed").length,sessionsWithDuration:n.filter(i=>i.status==="completed"&&i.duration).length,selectedRange:e.rangeType,dateRange:{start:(t=e.startDate)==null?void 0:t.toISOString(),end:(r=e.endDate)==null?void 0:r.toISOString()},totalTime:n.filter(i=>i.status==="completed"&&i.duration).reduce((i,a)=>i+(a.duration||0),0),sessions:n.map(i=>({id:i.id,status:i.status,duration:i.duration,createdAt:i.createdAt}))})}};typeof window<"u"&&(window.debugDeepFocus=sSe,window.debugLogger=Hat);async function qat(n){console.log("🧪 Testing Override Schema Setup"),console.log("================================");const e=oH.getSchemaInfo();console.log("📋 Schema Information:"),console.log("Collection:",e.collectionName),console.log("Required fields:",e.requiredFields),console.log("Optional fields:",e.optionalFields),console.log("Indexes:",e.indexes),console.log(""),console.log("✅ Testing valid data validation...");const t={userId:n,domain:"facebook.com",duration:5,url:"https://facebook.com/feed",reason:"manual_override"};try{const i=await ec.createOverrideSession(t);console.log("✅ Valid data test passed. Session ID:",i)}catch(i){console.error("❌ Valid data test failed:",i)}console.log("❌ Testing invalid data validation...");const r={userId:"",domain:"fb",duration:150};try{await ec.createOverrideSession(r),console.error("❌ Invalid data test failed - should have thrown error")}catch(i){console.log("✅ Invalid data correctly rejected:",i instanceof Error?i.message:i)}console.log("📊 Creating test data...");try{await oH.setupTestData(n),console.log("✅ Test data created successfully")}catch(i){console.error("❌ Failed to create test data:",i)}console.log("📖 Testing data retrieval...");try{const i=await ec.getUserOverrides(n);console.log("✅ Retrieved sessions:",i.length),i.length>0&&console.log("📋 Sample session:",{id:i[0].id,domain:i[0].domain,duration:i[0].duration+"min",reason:i[0].reason,createdAt:i[0].createdAt.toISOString()})}catch(i){console.error("❌ Data retrieval test failed:",i)}console.log(""),console.log("🏁 Override Schema Test Complete")}async function Gat(n){console.log("📅 Testing Date Range Filtering"),console.log("===============================");const e=new Date,t=new Date(e);t.setDate(t.getDate()-1);const r=new Date(e);r.setDate(r.getDate()+1);try{const i=await ec.getUserOverrides(n);console.log("📊 Total sessions:",i.length);const a=await ec.getUserOverrides(n,new Date(e.getFullYear(),e.getMonth(),e.getDate()),new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59));console.log("📅 Today's sessions:",a.length);const o=a.reduce((s,l)=>s+l.duration,0);console.log("⏱️ Total override time today:",o+" minutes")}catch(i){console.error("❌ Date range filtering test failed:",i)}}typeof window<"u"&&(window.testOverrideSchema=qat,window.testDateRangeFiltering=Gat);async function lSe(n){console.log("🧪 Quick Override Test"),console.log("=====================");try{console.log("📝 Creating simple override session...");const e=await ec.createOverrideSession({userId:n,domain:"test.com",duration:5,reason:"manual_override"});console.log("✅ Simple session created:",e),console.log("📝 Creating detailed override session...");const t=await ec.createOverrideSession({userId:n,domain:"example.com",url:"https://example.com/page",duration:3,reason:"break_time"});console.log("✅ Detailed session created:",t),console.log("📖 Retrieving user override sessions...");const r=await ec.getUserOverrides(n);console.log("✅ Retrieved sessions:",r.length),r.forEach((a,o)=>{console.log(`📋 Session ${o+1}:`,{domain:a.domain,duration:a.duration+"min",reason:a.reason,createdAt:a.createdAt.toISOString()})});const i=r.reduce((a,o)=>a+o.duration,0);return console.log("⏱️ Total override time:",i+" minutes"),console.log("🎉 Quick test completed successfully!"),{success:!0,totalSessions:r.length,totalMinutes:i}}catch(e){return console.error("❌ Quick test failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}typeof window<"u"&&(window.quickOverrideTest=lSe);const Wat={async testCreateSession(){const{user:n}=Rn.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in for test");return}const e={userId:n.uid,domain:"test-domain.com",duration:5,reason:"manual_override",timestamp:new Date};console.log("🔍 DEBUG: Testing override session creation with:",e);try{const t=await ec.createOverrideSession(e);return console.log("✅ Test override session created successfully:",t),t}catch(t){throw console.error("❌ Test override session failed:",t),t}},testExtensionMessage(){const{user:n}=Rn.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in for test");return}const e={domain:"extension-test.com",duration:5,userId:n.uid,timestamp:Date.now()};console.log("🔍 DEBUG: Testing extension message with:",e),window.postMessage({type:"RECORD_OVERRIDE_SESSION",payload:e,source:"make10000hours"},"*"),console.log("📤 Test extension message sent")},testUserSync(){var t,r;const{user:n}=Rn.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in for sync test");return}const e={userId:n.uid,userEmail:n.email||"",displayName:n.displayName||""};console.log("🔍 DEBUG: Testing user sync with:",e),window.postMessage({type:"SET_USER_ID",payload:e,source:"make10000hours"},"*"),typeof window.chrome<"u"&&((r=(t=window.chrome)==null?void 0:t.runtime)!=null&&r.sendMessage)&&(console.log("ℹ️ Chrome extension API available, but using window.postMessage bridge for security"),console.log("ℹ️ Direct chrome.runtime.sendMessage from web pages requires extension ID")),console.log("📤 Test user sync messages sent")},async getOverrideSessions(){const{user:n}=Rn.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in");return}try{const e=await ec.getUserOverrides(n.uid);return console.log("📋 Current override sessions:",e),e}catch(e){throw console.error("❌ Failed to get override sessions:",e),e}}};window.debugOverrideSession=Wat;const Yat={async testExtensionDetection(){var n;console.log("🔍 Testing extension detection..."),console.log("Extension installed:",bn.isExtensionInstalled()),console.log("Chrome runtime available:",typeof((n=window.chrome)==null?void 0:n.runtime)<"u")},async testPostMessageCommunication(){console.log("📡 Testing postMessage communication...");try{const n=await bn.testConnection();return console.log("PostMessage test result:",n),n}catch(n){return console.error("PostMessage test failed:",n),!1}},async testChromeRuntimeCommunication(){var n;if(console.log("🔗 Testing chrome.runtime communication..."),typeof((n=window.chrome)==null?void 0:n.runtime)>"u")return console.log("❌ Chrome runtime not available"),!1;try{const e=await window.chrome.runtime.sendMessage({type:"PING"});return console.log("Chrome runtime test result:",e),!0}catch(e){return console.error("Chrome runtime test failed:",e),!1}},async testConnection(){console.log("🧪 Running comprehensive connection test...");const n={extensionDetection:bn.isExtensionInstalled(),postMessage:!1,chromeRuntime:!1,overall:!1};try{n.postMessage=await this.testPostMessageCommunication()}catch(e){console.error("PostMessage test error:",e)}try{n.chromeRuntime=await this.testChromeRuntimeCommunication()}catch(e){console.error("Chrome runtime test error:",e)}try{n.overall=await bn.testConnection()}catch(e){console.error("Overall connection test error:",e)}return console.log("📊 Connection test results:",n),n},async ping(){console.log("🏓 Sending ping to extension..."),window.postMessage({type:"EXTENSION_PING",messageId:Math.random().toString(36),source:"make10000hours-webapp-debug"},"*");const n=e=>{var t;((t=e.data)==null?void 0:t.type)==="EXTENSION_PONG"&&(console.log("🏓 Received pong from extension:",e.data),window.removeEventListener("message",n))};window.addEventListener("message",n),setTimeout(()=>{window.removeEventListener("message",n),console.log("⏰ Ping timeout - no response from extension")},5e3)},checkExtensionStatusInUI(){const n=document.querySelectorAll('[class*="Extension"]');console.log("🖥️ Extension status elements found:",n.length),n.forEach((e,t)=>{console.log(`Element ${t}:`,e.textContent,e.className)})},async runFullDiagnostic(){console.log("🔧 Running full extension diagnostic..."),console.log("====================================="),await this.testExtensionDetection(),console.log("-------------------------------------");const n=await this.testConnection();console.log("-------------------------------------"),await this.ping(),console.log("-------------------------------------"),this.checkExtensionStatusInUI(),console.log("====================================="),console.log("📋 Diagnostic Summary:"),console.log("- Extension installed:",bn.isExtensionInstalled()),console.log("- PostMessage working:",n.postMessage),console.log("- Chrome runtime working:",n.chromeRuntime),console.log("- Overall connection:",n.overall),n.overall||(console.log(""),console.log("💡 Troubleshooting tips:"),console.log("1. Make sure the Focus Time Tracker extension is installed and enabled"),console.log("2. Refresh the page and try again"),console.log("3. Check if the extension is working on other websites"),console.log("4. Try reloading the extension in chrome://extensions/"))}};window.debugExtensionCommunication=Yat;console.log("🔧 Extension communication debugger loaded. Use debugExtensionCommunication.runFullDiagnostic() to test.");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kH=function(n,e){return kH=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},kH(n,e)};function Te(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");kH(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Kat=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),Xat=function(){function n(){this.browser=new Kat,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),Nn=new Xat;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Nn.wxa=!0,Nn.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Nn.worker=!0:!Nn.hasGlobalWindow||"Deno"in window?(Nn.node=!0,Nn.svgSupported=!0):Zat(navigator.userAgent,Nn);function Zat(n,e){var t=e.browser,r=n.match(/Firefox\/([\d.]+)/),i=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),a=n.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(n);r&&(t.firefox=!0,t.version=r[1]),i&&(t.ie=!0,t.version=i[1]),a&&(t.edge=!0,t.version=a[1],t.newEdge=+a[1].split(".")[0]>18),o&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in s||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}var yY=12,cSe="sans-serif",uy=yY+"px "+cSe,Qat=20,Jat=100,eot="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function tot(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var r=String.fromCharCode(t+32),i=(n.charCodeAt(t)-Qat)/Jat;e[r]=i}return e}var not=tot(eot),dy={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,r){if(!n){var i=dy.createCanvas();n=i&&i.getContext("2d")}if(n)return e!==r&&(e=n.font=r||uy),n.measureText(t);t=t||"",r=r||uy;var a=/((?:\d+)?\.?\d*)px/.exec(r),o=a&&+a[1]||yY,s=0;if(r.indexOf("mono")>=0)s=o*t.length;else for(var l=0;l<t.length;l++){var c=not[t[l]];s+=c==null?o:c*o}return{width:s}}}(),loadImage:function(n,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=n,r}},uSe=Rf(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),dSe=Rf(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),IT=Object.prototype.toString,f5=Array.prototype,rot=f5.forEach,iot=f5.filter,bY=f5.slice,aot=f5.map,ese=(function(){}).constructor,lP=ese?ese.prototype:null,wY="__proto__",oot=2311;function hSe(){return oot++}function _Y(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function Bt(n){if(n==null||typeof n!="object")return n;var e=n,t=IT.call(n);if(t==="[object Array]"){if(!yD(n)){e=[];for(var r=0,i=n.length;r<i;r++)e[r]=Bt(n[r])}}else if(dSe[t]){if(!yD(n)){var a=n.constructor;if(a.from)e=a.from(n);else{e=new a(n.length);for(var r=0,i=n.length;r<i;r++)e[r]=n[r]}}}else if(!uSe[t]&&!yD(n)&&!Z1(n)){e={};for(var o in n)n.hasOwnProperty(o)&&o!==wY&&(e[o]=Bt(n[o]))}return e}function an(n,e,t){if(!jt(e)||!jt(n))return t?Bt(e):n;for(var r in e)if(e.hasOwnProperty(r)&&r!==wY){var i=n[r],a=e[r];jt(a)&&jt(i)&&!$e(a)&&!$e(i)&&!Z1(a)&&!Z1(i)&&!tse(a)&&!tse(i)&&!yD(a)&&!yD(i)?an(i,a,t):(t||!(r in n))&&(n[r]=Bt(e[r]))}return n}function xY(n,e){for(var t=n[0],r=1,i=n.length;r<i;r++)t=an(t,n[r],e);return t}function Pe(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==wY&&(n[t]=e[t]);return n}function Rt(n,e,t){for(var r=Vn(e),i=0,a=r.length;i<a;i++){var o=r[i];(t?e[o]!=null:n[o]==null)&&(n[o]=e[o])}return n}function _n(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t}return-1}function sot(n,e){var t=n.prototype;function r(){}r.prototype=e.prototype,n.prototype=new r;for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i]);n.prototype.constructor=n,n.superClass=e}function Ha(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}else Rt(n,e,t)}function Gs(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function Z(n,e,t){if(n&&e)if(n.forEach&&n.forEach===rot)n.forEach(e,t);else if(n.length===+n.length)for(var r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);else for(var a in n)n.hasOwnProperty(a)&&e.call(t,n[a],a,n)}function Ue(n,e,t){if(!n)return[];if(!e)return SY(n);if(n.map&&n.map===aot)return n.map(e,t);for(var r=[],i=0,a=n.length;i<a;i++)r.push(e.call(t,n[i],i,n));return r}function Rf(n,e,t,r){if(n&&e){for(var i=0,a=n.length;i<a;i++)t=e.call(r,t,n[i],i,n);return t}}function Cr(n,e,t){if(!n)return[];if(!e)return SY(n);if(n.filter&&n.filter===iot)return n.filter(e,t);for(var r=[],i=0,a=n.length;i<a;i++)e.call(t,n[i],i,n)&&r.push(n[i]);return r}function lot(n,e,t){if(n&&e){for(var r=0,i=n.length;r<i;r++)if(e.call(t,n[r],r,n))return n[r]}}function Vn(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function cot(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return n.apply(e,t.concat(bY.call(arguments)))}}var dt=lP&&kt(lP.bind)?lP.call.bind(lP.bind):cot;function en(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(bY.call(arguments)))}}function $e(n){return Array.isArray?Array.isArray(n):IT.call(n)==="[object Array]"}function kt(n){return typeof n=="function"}function st(n){return typeof n=="string"}function IH(n){return IT.call(n)==="[object String]"}function ur(n){return typeof n=="number"}function jt(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function tse(n){return!!uSe[IT.call(n)]}function ic(n){return!!dSe[IT.call(n)]}function Z1(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function p5(n){return n.colorStops!=null}function uot(n){return n.image!=null}function dot(n){return IT.call(n)==="[object RegExp]"}function qk(n){return n!==n}function Ho(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n.length;t<r;t++)if(n[t]!=null)return n[t]}function Zt(n,e){return n??e}function Cf(n,e,t){return n??e??t}function SY(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return bY.apply(n,e)}function TY(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function Tl(n,e){if(!n)throw new Error(e)}function th(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var fSe="__ec_primitive__";function ON(n){n[fSe]=!0}function yD(n){return n[fSe]}var hot=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return Vn(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},n}(),pSe=typeof Map=="function";function fot(){return pSe?new Map:new hot}var pot=function(){function n(e){var t=$e(e);this.data=fot();var r=this;e instanceof n?e.each(i):e&&Z(e,i);function i(a,o){t?r.set(a,o):r.set(o,a)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(r,i){e.call(t,r,i)})},n.prototype.keys=function(){var e=this.data.keys();return pSe?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function _t(n){return new pot(n)}function Gk(n,e){for(var t=new n.constructor(n.length+e.length),r=0;r<n.length;r++)t[r]=n[r];for(var i=n.length,r=0;r<e.length;r++)t[r+i]=e[r];return t}function g5(n,e){var t;if(Object.create)t=Object.create(n);else{var r=function(){};r.prototype=n,t=new r}return e&&Pe(t,e),t}function gSe(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function ft(n,e){return n.hasOwnProperty(e)}function Ca(){}var BO=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var MH=function(n,e){return MH=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},MH(n,e)};function ki(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");MH(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Qw(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function fl(n,e){return n[0]=e[0],n[1]=e[1],n}function vg(n){return[n[0],n[1]]}function got(n,e,t){return n[0]=e,n[1]=t,n}function nse(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function PH(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n}function Qb(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function OH(n){return Math.sqrt(mot(n))}function mot(n){return n[0]*n[0]+n[1]*n[1]}function UO(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function MT(n,e){var t=OH(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function RH(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var jv=RH;function vot(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var pw=vot;function VO(n,e,t,r){return n[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n}function hs(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n}function Fv(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function $v(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var qx=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),yot=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new qx(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,i=e.offsetY,a=r-this._x,o=i-this._y;this._x=r,this._y=i,t.drift(a,o,e),this.handler.dispatchToElement(new qx(t,e),"drag",e.event);var s=this.handler.findHover(r,i,t).target,l=this._dropTarget;this._dropTarget=s,t!==s&&(l&&s!==l&&this.handler.dispatchToElement(new qx(l,e),"dragleave",e.event),s&&s!==l&&this.handler.dispatchToElement(new qx(s,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new qx(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new qx(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}(),ed=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof t=="function"&&(i=r,r=t,t=null),!r||!e)return this;var o=this._$eventProcessor;t!=null&&o&&o.normalizeQuery&&(t=o.normalizeQuery(t)),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return this;var l={h:r,query:t,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},c=a[e].length-1,u=a[e][c];return u&&u.callAtLast?a[e].splice(c,0,l):a[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var i=[],a=0,o=r[e].length;a<o;a++)r[e][a].h!==t&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=i.length,l=0;l<s;l++){var c=i[l];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(o){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,t[0]);break;case 2:c.h.call(c.ctx,t[0],t[1]);break;default:c.h.apply(c.ctx,t);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=t[o-1],l=i.length,c=0;c<l;c++){var u=i[c];if(!(a&&a.filter&&u.query!=null&&!a.filter(e,u.query)))switch(o){case 0:u.h.call(s);break;case 1:u.h.call(s,t[0]);break;case 2:u.h.call(s,t[0],t[1]);break;default:u.h.apply(s,t.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n}(),bot=Math.log(2);function NH(n,e,t,r,i,a){var o=r+"-"+i,s=n.length;if(a.hasOwnProperty(o))return a[o];if(e===1){var l=Math.round(Math.log((1<<s)-1&~i)/bot);return n[t][l]}for(var c=r|1<<t,u=t+1;r&1<<u;)u++;for(var d=0,h=0,f=0;h<s;h++){var m=1<<h;m&i||(d+=(f%2?-1:1)*n[t][h]*NH(n,e-1,u,c,i|m,a),f++)}return a[o]=d,d}function rse(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],r={},i=NH(t,8,0,0,0,r);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*NH(t,7,o===0?1:0,1<<o,1<<s,r)/i*e[o];return function(l,c,u){var d=c*a[6]+u*a[7]+1;l[0]=(c*a[0]+u*a[1]+a[2])/d,l[1]=(c*a[3]+u*a[4]+a[5])/d}}}var ise="___zrEVENTSAVED",_U=[];function wot(n,e,t,r,i){return LH(_U,e,r,i,!0)&&LH(n,t,_U[0],_U[1])}function LH(n,e,t,r,i){if(e.getBoundingClientRect&&Nn.domSupported&&!mSe(e)){var a=e[ise]||(e[ise]={}),o=_ot(e,a),s=xot(o,a,i);if(s)return s(n,t,r),!0}return!1}function _ot(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,c=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[c]+":0",r[1-l]+":auto",i[1-c]+":auto",""].join("!important;"),n.appendChild(o),t.push(o)}return t}function xot(n,e,t){for(var r=t?"invTrans":"trans",i=e[r],a=e.srcCoords,o=[],s=[],l=!0,c=0;c<4;c++){var u=n[c].getBoundingClientRect(),d=2*c,h=u.left,f=u.top;o.push(h,f),l=l&&a&&h===a[d]&&f===a[d+1],s.push(n[c].offsetLeft,n[c].offsetTop)}return l&&i?i:(e.srcCoords=o,e[r]=t?rse(s,o):rse(o,s))}function mSe(n){return n.nodeName.toUpperCase()==="CANVAS"}var Sot=/([&<>"'])/g,Tot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ml(n){return n==null?"":(n+"").replace(Sot,function(e,t){return Tot[t]})}var Eot=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xU=[],Aot=Nn.browser.firefox&&+Nn.browser.version.split(".")[0]<39;function jH(n,e,t,r){return t=t||{},r?ase(n,e,t):Aot&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):ase(n,e,t),t}function ase(n,e,t){if(Nn.domSupported&&n.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(mSe(n)){var a=n.getBoundingClientRect();t.zrX=r-a.left,t.zrY=i-a.top;return}else if(LH(xU,n,r,i)){t.zrX=xU[0],t.zrY=xU[1];return}}t.zrX=t.zrY=0}function EY(n){return n||window.event}function Pu(n,e,t){if(e=EY(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var o=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&jH(n,o,e,t)}else{jH(n,e,e,t);var a=Cot(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&Eot.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function Cot(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,r=n.deltaY;if(t==null||r==null)return e;var i=Math.abs(r!==0?r:t),a=r>0?-1:r<0?1:t>0?-1:1;return 3*i*a}function FH(n,e,t,r){n.addEventListener(e,t,r)}function Dot(n,e,t,r){n.removeEventListener(e,t,r)}var Mg=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function ose(n){return n.which===2||n.which===3}var kot=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:t,event:e},o=0,s=i.length;o<s;o++){var l=i[o],c=jH(r,l,{});a.points.push([c.zrX,c.zrY]),a.touches.push(l)}this._track.push(a)}},n.prototype._recognize=function(e){for(var t in SU)if(SU.hasOwnProperty(t)){var r=SU[t](this._track,e);if(r)return r}},n}();function sse(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function Iot(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var SU={pinch:function(n,e){var t=n.length;if(t){var r=(n[t-1]||{}).points,i=(n[t-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=sse(r)/sse(i);!isFinite(a)&&(a=1),e.pinchScale=a;var o=Iot(r);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:n[0].target,event:e}}}}};function Gc(){return[1,0,0,1,0,0]}function m5(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function AY(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function yg(n,e,t){var r=e[0]*t[0]+e[2]*t[1],i=e[1]*t[0]+e[3]*t[1],a=e[0]*t[2]+e[2]*t[3],o=e[1]*t[2]+e[3]*t[3],s=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=r,n[1]=i,n[2]=a,n[3]=o,n[4]=s,n[5]=l,n}function Nf(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function Jw(n,e,t,r){r===void 0&&(r=[0,0]);var i=e[0],a=e[2],o=e[4],s=e[1],l=e[3],c=e[5],u=Math.sin(t),d=Math.cos(t);return n[0]=i*d+s*u,n[1]=-i*u+s*d,n[2]=a*d+l*u,n[3]=-a*u+d*l,n[4]=d*(o-r[0])+u*(c-r[1])+r[0],n[5]=d*(c-r[1])-u*(o-r[0])+r[1],n}function CY(n,e,t){var r=t[0],i=t[1];return n[0]=e[0]*r,n[1]=e[1]*i,n[2]=e[2]*r,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*i,n}function PT(n,e){var t=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],l=t*o-a*r;return l?(l=1/l,n[0]=o*l,n[1]=-a*l,n[2]=-r*l,n[3]=t*l,n[4]=(r*s-o*i)*l,n[5]=(a*i-t*s)*l,n):null}function Mot(n){var e=Gc();return AY(e,n),e}var ln=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,r){e.x=t,e.y=r},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},n.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},n.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},n.scaleAndAdd=function(e,t,r,i){e.x=t.x+r.x*i,e.y=t.y+r.y*i},n.lerp=function(e,t,r,i){var a=1-i;e.x=a*t.x+i*r.x,e.y=a*t.y+i*r.y},n}(),cP=Math.min,uP=Math.max,eb=new ln,tb=new ln,nb=new ln,rb=new ln,HA=new ln,qA=new ln,pn=function(){function n(e,t,r,i){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i),this.x=e,this.y=t,this.width=r,this.height=i}return n.prototype.union=function(e){var t=cP(e.x,this.x),r=cP(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=uP(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=uP(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,i=e.height/t.height,a=Gc();return Nf(a,a,[-t.x,-t.y]),CY(a,a,[r,i]),Nf(a,a,[e.x,e.y]),a},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var r=this,i=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,l=e.x,c=e.x+e.width,u=e.y,d=e.y+e.height,h=!(a<l||c<i||s<u||d<o);if(t){var f=1/0,m=0,v=Math.abs(a-l),y=Math.abs(c-i),w=Math.abs(s-u),_=Math.abs(d-o),S=Math.min(v,y),A=Math.min(w,_);a<l||c<i?S>m&&(m=S,v<y?ln.set(qA,-v,0):ln.set(qA,y,0)):S<f&&(f=S,v<y?ln.set(HA,v,0):ln.set(HA,-y,0)),s<u||d<o?A>m&&(m=A,w<_?ln.set(qA,0,-w):ln.set(qA,0,_)):S<f&&(f=S,w<_?ln.set(HA,0,w):ln.set(HA,0,-_))}return t&&ln.copy(t,h?HA:qA),h},n.prototype.contain=function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,r){if(!r){e!==t&&n.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],o=r[4],s=r[5];e.x=t.x*i+o,e.y=t.y*a+s,e.width=t.width*i,e.height=t.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}eb.x=nb.x=t.x,eb.y=rb.y=t.y,tb.x=rb.x=t.x+t.width,tb.y=nb.y=t.y+t.height,eb.transform(r),rb.transform(r),tb.transform(r),nb.transform(r),e.x=cP(eb.x,tb.x,nb.x,rb.x),e.y=cP(eb.y,tb.y,nb.y,rb.y);var l=uP(eb.x,tb.x,nb.x,rb.x),c=uP(eb.y,tb.y,nb.y,rb.y);e.width=l-e.x,e.height=c-e.y},n}(),vSe="silent";function Pot(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:Oot}}function Oot(){Mg(this.event)}var Rot=function(n){ki(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(ed),GA=function(){function n(e,t){this.x=e,this.y=t}return n}(),Not=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],TU=new pn(0,0,0,0),ySe=function(n){ki(e,n);function e(t,r,i,a,o){var s=n.call(this)||this;return s._hovered=new GA(0,0),s.storage=t,s.painter=r,s.painterRoot=a,s._pointerSize=o,i=i||new Rot,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new yot(s),s}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(Z(Not,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,i=t.zrY,a=bSe(this,r,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new GA(r,i):this.findHover(r,i),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),s&&c!==s&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(l,"mousemove",t),c&&c!==s&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new GA(0,0)},e.prototype.dispatch=function(t,r){var i=this[t];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,i){t=t||{};var a=t.target;if(!(a&&a.silent)){for(var o="on"+r,s=Pot(r,t,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(r,s)}))}},e.prototype.findHover=function(t,r,i){var a=this.storage.getDisplayList(),o=new GA(t,r);if(lse(a,o,t,r,i),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,c=l/2,u=new pn(t-c,r-c,l,l),d=a.length-1;d>=0;d--){var h=a[d];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(TU.copy(h.getBoundingRect()),h.transform&&TU.applyTransform(h.transform),TU.intersect(u)&&s.push(h))}if(s.length)for(var f=4,m=Math.PI/12,v=Math.PI*2,y=0;y<c;y+=f)for(var w=0;w<v;w+=m){var _=t+y*Math.cos(w),S=r+y*Math.sin(w);if(lse(s,o,_,S,i),o.target)return o}}return o},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new kot);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var o=a.type;t.gestureEvent=o;var s=new GA;s.target=a.target,this.dispatchToElement(s,o,a.event)}},e}(ed);Z(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){ySe.prototype[n]=function(e){var t=e.zrX,r=e.zrY,i=bSe(this,t,r),a,o;if((n!=="mouseup"||!i)&&(a=this.findHover(t,r),o=a.target),n==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(n==="mouseup")this._upEl=o;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||jv(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,n,e)}});function Lot(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var r=n,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(e,t))return!1}r.silent&&(i=!0);var s=r.__hostTarget;r=s||r.parent}return i?vSe:!0}return!1}function lse(n,e,t,r,i){for(var a=n.length-1;a>=0;a--){var o=n[a],s=void 0;if(o!==i&&!o.ignore&&(s=Lot(o,t,r))&&(!e.topTarget&&(e.topTarget=o),s!==vSe)){e.target=o;break}}}function bSe(n,e,t){var r=n.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var wSe=32,WA=7;function jot(n){for(var e=0;n>=wSe;)e|=n&1,n>>=1;return n+e}function cse(n,e,t,r){var i=e+1;if(i===t)return 1;if(r(n[i++],n[e])<0){for(;i<t&&r(n[i],n[i-1])<0;)i++;Fot(n,e,i)}else for(;i<t&&r(n[i],n[i-1])>=0;)i++;return i-e}function Fot(n,e,t){for(t--;e<t;){var r=n[e];n[e++]=n[t],n[t--]=r}}function use(n,e,t,r,i){for(r===e&&r++;r<t;r++){for(var a=n[r],o=e,s=r,l;o<s;)l=o+s>>>1,i(a,n[l])<0?s=l:o=l+1;var c=r-o;switch(c){case 3:n[o+3]=n[o+2];case 2:n[o+2]=n[o+1];case 1:n[o+1]=n[o];break;default:for(;c>0;)n[o+c]=n[o+c-1],c--}n[o]=a}}function EU(n,e,t,r,i,a){var o=0,s=0,l=1;if(a(n,e[t+i])>0){for(s=r-i;l<s&&a(n,e[t+i+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&a(n,e[t+i-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=i-l,l=i-c}for(o++;o<l;){var u=o+(l-o>>>1);a(n,e[t+u])>0?o=u+1:l=u}return l}function AU(n,e,t,r,i,a){var o=0,s=0,l=1;if(a(n,e[t+i])<0){for(s=i+1;l<s&&a(n,e[t+i-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=i-l,l=i-c}else{for(s=r-i;l<s&&a(n,e[t+i+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var u=o+(l-o>>>1);a(n,e[t+u])<0?l=u:o=u+1}return l}function $ot(n,e){var t=WA,r,i,a=0,o=[];r=[],i=[];function s(f,m){r[a]=f,i[a]=m,a+=1}function l(){for(;a>1;){var f=a-2;if(f>=1&&i[f-1]<=i[f]+i[f+1]||f>=2&&i[f-2]<=i[f]+i[f-1])i[f-1]<i[f+1]&&f--;else if(i[f]>i[f+1])break;u(f)}}function c(){for(;a>1;){var f=a-2;f>0&&i[f-1]<i[f+1]&&f--,u(f)}}function u(f){var m=r[f],v=i[f],y=r[f+1],w=i[f+1];i[f]=v+w,f===a-3&&(r[f+1]=r[f+2],i[f+1]=i[f+2]),a--;var _=AU(n[y],n,m,v,0,e);m+=_,v-=_,v!==0&&(w=EU(n[m+v-1],n,y,w,w-1,e),w!==0&&(v<=w?d(m,v,y,w):h(m,v,y,w)))}function d(f,m,v,y){var w=0;for(w=0;w<m;w++)o[w]=n[f+w];var _=0,S=v,A=f;if(n[A++]=n[S++],--y===0){for(w=0;w<m;w++)n[A+w]=o[_+w];return}if(m===1){for(w=0;w<y;w++)n[A+w]=n[S+w];n[A+y]=o[_];return}for(var C=t,D,M,P;;){D=0,M=0,P=!1;do if(e(n[S],o[_])<0){if(n[A++]=n[S++],M++,D=0,--y===0){P=!0;break}}else if(n[A++]=o[_++],D++,M=0,--m===1){P=!0;break}while((D|M)<C);if(P)break;do{if(D=AU(n[S],o,_,m,0,e),D!==0){for(w=0;w<D;w++)n[A+w]=o[_+w];if(A+=D,_+=D,m-=D,m<=1){P=!0;break}}if(n[A++]=n[S++],--y===0){P=!0;break}if(M=EU(o[_],n,S,y,0,e),M!==0){for(w=0;w<M;w++)n[A+w]=n[S+w];if(A+=M,S+=M,y-=M,y===0){P=!0;break}}if(n[A++]=o[_++],--m===1){P=!0;break}C--}while(D>=WA||M>=WA);if(P)break;C<0&&(C=0),C+=2}if(t=C,t<1&&(t=1),m===1){for(w=0;w<y;w++)n[A+w]=n[S+w];n[A+y]=o[_]}else{if(m===0)throw new Error;for(w=0;w<m;w++)n[A+w]=o[_+w]}}function h(f,m,v,y){var w=0;for(w=0;w<y;w++)o[w]=n[v+w];var _=f+m-1,S=y-1,A=v+y-1,C=0,D=0;if(n[A--]=n[_--],--m===0){for(C=A-(y-1),w=0;w<y;w++)n[C+w]=o[w];return}if(y===1){for(A-=m,_-=m,D=A+1,C=_+1,w=m-1;w>=0;w--)n[D+w]=n[C+w];n[A]=o[S];return}for(var M=t;;){var P=0,O=0,j=!1;do if(e(o[S],n[_])<0){if(n[A--]=n[_--],P++,O=0,--m===0){j=!0;break}}else if(n[A--]=o[S--],O++,P=0,--y===1){j=!0;break}while((P|O)<M);if(j)break;do{if(P=m-AU(o[S],n,f,m,m-1,e),P!==0){for(A-=P,_-=P,m-=P,D=A+1,C=_+1,w=P-1;w>=0;w--)n[D+w]=n[C+w];if(m===0){j=!0;break}}if(n[A--]=o[S--],--y===1){j=!0;break}if(O=y-EU(n[_],o,0,y,y-1,e),O!==0){for(A-=O,S-=O,y-=O,D=A+1,C=S+1,w=0;w<O;w++)n[D+w]=o[C+w];if(y<=1){j=!0;break}}if(n[A--]=n[_--],--m===0){j=!0;break}M--}while(P>=WA||O>=WA);if(j)break;M<0&&(M=0),M+=2}if(t=M,t<1&&(t=1),y===1){for(A-=m,_-=m,D=A+1,C=_+1,w=m-1;w>=0;w--)n[D+w]=n[C+w];n[A]=o[S]}else{if(y===0)throw new Error;for(C=A-(y-1),w=0;w<y;w++)n[C+w]=o[w]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:s}}function zO(n,e,t,r){t||(t=0),r||(r=n.length);var i=r-t;if(!(i<2)){var a=0;if(i<wSe){a=cse(n,t,r,e),use(n,t,r,t+a,e);return}var o=$ot(n,e),s=jot(i);do{if(a=cse(n,t,r,e),a<s){var l=i;l>s&&(l=s),use(n,t,t+l,t+a,e),a=l}o.pushRun(t,a),o.mergeRuns(),i-=a,t+=a}while(i!==0);o.forceMergeRuns()}}var Bc=1,VC=2,IS=4,dse=!1;function CU(){dse||(dse=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function hse(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var Bot=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=hse}return n.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,i=0,a=t.length;i<a;i++)this._updateAndAddDisplayable(t[i],null,e);r.length=this._displayListLen,zO(r,hse)},n.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)t=null;else if(i){t?t=t.slice():t=[];for(var a=i,o=e;a;)a.parent=o,a.updateTransform(),t.push(a),o=a,a=a.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),l=0;l<s.length;l++){var c=s[l];e.__dirty&&(c.__dirty|=Bc),this._updateAndAddDisplayable(c,t,r)}e.__dirty=0}else{var u=e;t&&t.length?u.__clipPaths=t:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(CU(),u.z=0),isNaN(u.z2)&&(CU(),u.z2=0),isNaN(u.zlevel)&&(CU(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var d=e.getDecalElement&&e.getDecalElement();d&&this._updateAndAddDisplayable(d,t,r);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,t,r);var f=e.getTextContent();f&&this._updateAndAddDisplayable(f,t,r)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var i=_n(this._roots,e);i>=0&&this._roots.splice(i,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}(),RN;RN=Nn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};var bD={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)))},elasticOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/r)+1)},elasticInOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-bD.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?bD.bounceIn(n*2)*.5:bD.bounceOut(n*2-1)*.5+.5}},dP=Math.pow,Jv=Math.sqrt,NN=1e-8,_Se=1e-4,fse=Jv(3),hP=1/3,ff=Qw(),ju=Qw(),l1=Qw();function Bv(n){return n>-NN&&n<NN}function xSe(n){return n>NN||n<-NN}function mo(n,e,t,r,i){var a=1-i;return a*a*(a*n+3*i*e)+i*i*(i*r+3*a*t)}function pse(n,e,t,r,i){var a=1-i;return 3*(((e-n)*a+2*(t-e)*i)*a+(r-t)*i*i)}function LN(n,e,t,r,i,a){var o=r+3*(e-t)-n,s=3*(t-e*2+n),l=3*(e-n),c=n-i,u=s*s-3*o*l,d=s*l-9*o*c,h=l*l-3*s*c,f=0;if(Bv(u)&&Bv(d))if(Bv(s))a[0]=0;else{var m=-l/s;m>=0&&m<=1&&(a[f++]=m)}else{var v=d*d-4*u*h;if(Bv(v)){var y=d/u,m=-s/o+y,w=-y/2;m>=0&&m<=1&&(a[f++]=m),w>=0&&w<=1&&(a[f++]=w)}else if(v>0){var _=Jv(v),S=u*s+1.5*o*(-d+_),A=u*s+1.5*o*(-d-_);S<0?S=-dP(-S,hP):S=dP(S,hP),A<0?A=-dP(-A,hP):A=dP(A,hP);var m=(-s-(S+A))/(3*o);m>=0&&m<=1&&(a[f++]=m)}else{var C=(2*u*s-3*o*d)/(2*Jv(u*u*u)),D=Math.acos(C)/3,M=Jv(u),P=Math.cos(D),m=(-s-2*M*P)/(3*o),w=(-s+M*(P+fse*Math.sin(D)))/(3*o),O=(-s+M*(P-fse*Math.sin(D)))/(3*o);m>=0&&m<=1&&(a[f++]=m),w>=0&&w<=1&&(a[f++]=w),O>=0&&O<=1&&(a[f++]=O)}}return f}function SSe(n,e,t,r,i){var a=6*t-12*e+6*n,o=9*e+3*r-3*n-9*t,s=3*e-3*n,l=0;if(Bv(o)){if(xSe(a)){var c=-s/a;c>=0&&c<=1&&(i[l++]=c)}}else{var u=a*a-4*o*s;if(Bv(u))i[0]=-a/(2*o);else if(u>0){var d=Jv(u),c=(-a+d)/(2*o),h=(-a-d)/(2*o);c>=0&&c<=1&&(i[l++]=c),h>=0&&h<=1&&(i[l++]=h)}}return l}function hy(n,e,t,r,i,a){var o=(e-n)*i+n,s=(t-e)*i+e,l=(r-t)*i+t,c=(s-o)*i+o,u=(l-s)*i+s,d=(u-c)*i+c;a[0]=n,a[1]=o,a[2]=c,a[3]=d,a[4]=d,a[5]=u,a[6]=l,a[7]=r}function TSe(n,e,t,r,i,a,o,s,l,c,u){var d,h=.005,f=1/0,m,v,y,w;ff[0]=l,ff[1]=c;for(var _=0;_<1;_+=.05)ju[0]=mo(n,t,i,o,_),ju[1]=mo(e,r,a,s,_),y=pw(ff,ju),y<f&&(d=_,f=y);f=1/0;for(var S=0;S<32&&!(h<_Se);S++)m=d-h,v=d+h,ju[0]=mo(n,t,i,o,m),ju[1]=mo(e,r,a,s,m),y=pw(ju,ff),m>=0&&y<f?(d=m,f=y):(l1[0]=mo(n,t,i,o,v),l1[1]=mo(e,r,a,s,v),w=pw(l1,ff),v<=1&&w<f?(d=v,f=w):h*=.5);return u&&(u[0]=mo(n,t,i,o,d),u[1]=mo(e,r,a,s,d)),Jv(f)}function Uot(n,e,t,r,i,a,o,s,l){for(var c=n,u=e,d=0,h=1/l,f=1;f<=l;f++){var m=f*h,v=mo(n,t,i,o,m),y=mo(e,r,a,s,m),w=v-c,_=y-u;d+=Math.sqrt(w*w+_*_),c=v,u=y}return d}function Vo(n,e,t,r){var i=1-r;return i*(i*n+2*r*e)+r*r*t}function $H(n,e,t,r){return 2*((1-r)*(e-n)+r*(t-e))}function Vot(n,e,t,r,i){var a=n-2*e+t,o=2*(e-n),s=n-r,l=0;if(Bv(a)){if(xSe(o)){var c=-s/o;c>=0&&c<=1&&(i[l++]=c)}}else{var u=o*o-4*a*s;if(Bv(u)){var c=-o/(2*a);c>=0&&c<=1&&(i[l++]=c)}else if(u>0){var d=Jv(u),c=(-o+d)/(2*a),h=(-o-d)/(2*a);c>=0&&c<=1&&(i[l++]=c),h>=0&&h<=1&&(i[l++]=h)}}return l}function ESe(n,e,t){var r=n+t-2*e;return r===0?.5:(n-e)/r}function Wk(n,e,t,r,i){var a=(e-n)*r+n,o=(t-e)*r+e,s=(o-a)*r+a;i[0]=n,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=t}function ASe(n,e,t,r,i,a,o,s,l){var c,u=.005,d=1/0;ff[0]=o,ff[1]=s;for(var h=0;h<1;h+=.05){ju[0]=Vo(n,t,i,h),ju[1]=Vo(e,r,a,h);var f=pw(ff,ju);f<d&&(c=h,d=f)}d=1/0;for(var m=0;m<32&&!(u<_Se);m++){var v=c-u,y=c+u;ju[0]=Vo(n,t,i,v),ju[1]=Vo(e,r,a,v);var f=pw(ju,ff);if(v>=0&&f<d)c=v,d=f;else{l1[0]=Vo(n,t,i,y),l1[1]=Vo(e,r,a,y);var w=pw(l1,ff);y<=1&&w<d?(c=y,d=w):u*=.5}}return l&&(l[0]=Vo(n,t,i,c),l[1]=Vo(e,r,a,c)),Jv(d)}function zot(n,e,t,r,i,a,o){for(var s=n,l=e,c=0,u=1/o,d=1;d<=o;d++){var h=d*u,f=Vo(n,t,i,h),m=Vo(e,r,a,h),v=f-s,y=m-l;c+=Math.sqrt(v*v+y*y),s=f,l=m}return c}var Hot=/cubic-bezier\(([0-9,\.e ]+)\)/;function DY(n){var e=n&&Hot.exec(n);if(e){var t=e[1].split(","),r=+th(t[0]),i=+th(t[1]),a=+th(t[2]),o=+th(t[3]);if(isNaN(r+i+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:LN(0,r,a,1,l,s)&&mo(0,i,o,1,s[0])}}}var qot=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Ca,this.ondestroy=e.ondestroy||Ca,this.onrestart=e.onrestart||Ca,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=kt(e)?e:bD[e]||DY(e)},n}(),CSe=function(){function n(e){this.value=e}return n}(),Got=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new CSe(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),u2=function(){function n(e){this._list=new Got,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var r=this._list,i=this._map,a=null;if(i[e]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=t:s=new CSe(t),s.key=e,r.insertEntry(s),i[e]=s}return a},n.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}(),gse={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ih(n){return n=Math.round(n),n<0?0:n>255?255:n}function Wot(n){return n=Math.round(n),n<0?0:n>360?360:n}function Yk(n){return n<0?0:n>1?1:n}function DU(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?ih(parseFloat(e)/100*255):ih(parseInt(e,10))}function gw(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?Yk(parseFloat(e)/100):Yk(parseFloat(e))}function kU(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function Uv(n,e,t){return n+(e-n)*t}function Iu(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function BH(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var DSe=new u2(20),fP=null;function Gx(n,e){fP&&BH(fP,e),fP=DSe.put(n,fP||e.slice())}function Wc(n,e){if(n){e=e||[];var t=DSe.get(n);if(t)return BH(e,t);n=n+"";var r=n.replace(/ /g,"").toLowerCase();if(r in gse)return BH(e,gse[r]),Gx(n,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){Iu(e,0,0,0,1);return}return Iu(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),Gx(n,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){Iu(e,0,0,0,1);return}return Iu(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),Gx(n,e),e}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===i){var l=r.substr(0,o),c=r.substr(o+1,s-(o+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?Iu(e,+c[0],+c[1],+c[2],1):Iu(e,0,0,0,1);u=gw(c.pop());case"rgb":if(c.length>=3)return Iu(e,DU(c[0]),DU(c[1]),DU(c[2]),c.length===3?u:gw(c[3])),Gx(n,e),e;Iu(e,0,0,0,1);return;case"hsla":if(c.length!==4){Iu(e,0,0,0,1);return}return c[3]=gw(c[3]),UH(c,e),Gx(n,e),e;case"hsl":if(c.length!==3){Iu(e,0,0,0,1);return}return UH(c,e),Gx(n,e),e;default:return}}Iu(e,0,0,0,1)}}function UH(n,e){var t=(parseFloat(n[0])%360+360)%360/360,r=gw(n[1]),i=gw(n[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return e=e||[],Iu(e,ih(kU(o,a,t+1/3)*255),ih(kU(o,a,t)*255),ih(kU(o,a,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function Yot(n){if(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=a-i,s=(a+i)/2,l,c;if(o===0)l=0,c=0;else{s<.5?c=o/(a+i):c=o/(2-a-i);var u=((a-e)/6+o/2)/o,d=((a-t)/6+o/2)/o,h=((a-r)/6+o/2)/o;e===a?l=h-d:t===a?l=1/3+u-h:r===a&&(l=2/3+d-u),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,c,s];return n[3]!=null&&f.push(n[3]),f}}function VH(n,e){var t=Wc(n);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return bg(t,t.length===4?"rgba":"rgb")}}function IU(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){t=t||[];var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=e[i],s=e[a],l=r-i;return t[0]=ih(Uv(o[0],s[0],l)),t[1]=ih(Uv(o[1],s[1],l)),t[2]=ih(Uv(o[2],s[2],l)),t[3]=Yk(Uv(o[3],s[3],l)),t}}function Kot(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=Wc(e[i]),s=Wc(e[a]),l=r-i,c=bg([ih(Uv(o[0],s[0],l)),ih(Uv(o[1],s[1],l)),ih(Uv(o[2],s[2],l)),Yk(Uv(o[3],s[3],l))],"rgba");return t?{color:c,leftIndex:i,rightIndex:a,value:r}:c}}function wD(n,e,t,r){var i=Wc(n);if(n)return i=Yot(i),e!=null&&(i[0]=Wot(e)),t!=null&&(i[1]=gw(t)),r!=null&&(i[2]=gw(r)),bg(UH(i),"rgba")}function jN(n,e){var t=Wc(n);if(t&&e!=null)return t[3]=Yk(e),bg(t,"rgba")}function bg(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function FN(n,e){var t=Wc(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var mse=new u2(100);function zH(n){if(st(n)){var e=mse.get(n);return e||(e=VH(n,-.1),mse.put(n,e)),e}else if(p5(n)){var t=Pe({},n);return t.colorStops=Ue(n.colorStops,function(r){return{offset:r.offset,color:VH(r.color,-.1)}}),t}return n}var $N=Math.round;function Kk(n){var e;if(!n||n==="transparent")n="none";else if(typeof n=="string"&&n.indexOf("rgba")>-1){var t=Wc(n);t&&(n="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:n,opacity:e??1}}var vse=1e-4;function Vv(n){return n<vse&&n>-vse}function pP(n){return $N(n*1e3)/1e3}function HH(n){return $N(n*1e4)/1e4}function Xot(n){return"matrix("+pP(n[0])+","+pP(n[1])+","+pP(n[2])+","+pP(n[3])+","+HH(n[4])+","+HH(n[5])+")"}var Zot={left:"start",right:"end",center:"middle",middle:"middle"};function Qot(n,e,t){return t==="top"?n+=e/2:t==="bottom"&&(n-=e/2),n}function Jot(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)}function est(n){var e=n.style,t=n.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function kSe(n){return n&&!!n.image}function tst(n){return n&&!!n.svgElement}function kY(n){return kSe(n)||tst(n)}function ISe(n){return n.type==="linear"}function MSe(n){return n.type==="radial"}function PSe(n){return n&&(n.type==="linear"||n.type==="radial")}function v5(n){return"url(#"+n+")"}function OSe(n){var e=n.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function RSe(n){var e=n.x||0,t=n.y||0,r=(n.rotation||0)*BO,i=Zt(n.scaleX,1),a=Zt(n.scaleY,1),o=n.skewX||0,s=n.skewY||0,l=[];return(e||t)&&l.push("translate("+e+"px,"+t+"px)"),r&&l.push("rotate("+r+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(o||s)&&l.push("skew("+$N(o*BO)+"deg, "+$N(s*BO)+"deg)"),l.join(" ")}var nst=function(){return Nn.hasGlobalWindow&&kt(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}}(),qH=Array.prototype.slice;function Qp(n,e,t){return(e-n)*t+n}function MU(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=Qp(e[a],t[a],r);return n}function rst(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=Qp(e[o][s],t[o][s],r)}return n}function gP(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=e[a]+t[a]*r;return n}function yse(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=e[o][s]+t[o][s]*r}return n}function ist(n,e){for(var t=n.length,r=e.length,i=t>r?e:n,a=Math.min(t,r),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(t,r);s++)i.push({offset:o.offset,color:o.color.slice()})}function ast(n,e,t){var r=n,i=e;if(!(!r.push||!i.push)){var a=r.length,o=i.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var l=a;l<o;l++)r.push(t===1?i[l]:qH.call(i[l]))}for(var c=r[0]&&r[0].length,l=0;l<r.length;l++)if(t===1)isNaN(r[l])&&(r[l]=i[l]);else for(var u=0;u<c;u++)isNaN(r[l][u])&&(r[l][u]=i[l][u])}}function _D(n){if(Gs(n)){var e=n.length;if(Gs(n[0])){for(var t=[],r=0;r<e;r++)t.push(qH.call(n[r]));return t}return qH.call(n)}return n}function HO(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function ost(n){return Gs(n&&n[0])?2:1}var mP=0,qO=1,NSe=2,zC=3,GH=4,WH=5,bse=6;function wse(n){return n===GH||n===WH}function vP(n){return n===qO||n===NSe}var YA=[0,0,0,0],sst=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=bse,l=t;if(Gs(t)){var c=ost(t);s=c,(c===1&&!ur(t[0])||c===2&&!ur(t[0][0]))&&(o=!0)}else if(ur(t)&&!qk(t))s=mP;else if(st(t))if(!isNaN(+t))s=mP;else{var u=Wc(t);u&&(l=u,s=zC)}else if(p5(t)){var d=Pe({},l);d.colorStops=Ue(t.colorStops,function(f){return{offset:f.offset,color:Wc(f.color)}}),ISe(t)?s=GH:MSe(t)&&(s=WH),l=d}a===0?this.valType=s:(s!==this.valType||s===bse)&&(o=!0),this.discrete=this.discrete||o;var h={time:e,value:l,rawValue:t,percent:0};return r&&(h.easing=r,h.easingFunc=kt(r)?r:bD[r]||DY(r)),i.push(h),h},n.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(v,y){return v.time-y.time});for(var i=this.valType,a=r.length,o=r[a-1],s=this.discrete,l=vP(i),c=wse(i),u=0;u<a;u++){var d=r[u],h=d.value,f=o.value;d.percent=d.time/e,s||(l&&u!==a-1?ast(h,f,i):c&&ist(h.colorStops,f.colorStops))}if(!s&&i!==WH&&t&&this.needsAnimate()&&t.needsAnimate()&&i===t.valType&&!t._finished){this._additiveTrack=t;for(var m=r[0].value,u=0;u<a;u++)i===mP?r[u].additiveValue=r[u].value-m:i===zC?r[u].additiveValue=gP([],r[u].value,m,-1):vP(i)&&(r[u].additiveValue=i===qO?gP([],r[u].value,m,-1):yse([],r[u].value,m,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,c=a===zC,u,d=this._lastFr,h=Math.min,f,m;if(s===1)f=m=o[0];else{if(t<0)u=0;else if(t<this._lastFrP){var v=h(d+1,s-1);for(u=v;u>=0&&!(o[u].percent<=t);u--);u=h(u,s-2)}else{for(u=d;u<s&&!(o[u].percent>t);u++);u=h(u-1,s-2)}m=o[u+1],f=o[u]}if(f&&m){this._lastFr=u,this._lastFrP=t;var y=m.percent-f.percent,w=y===0?1:h((t-f.percent)/y,1);m.easingFunc&&(w=m.easingFunc(w));var _=r?this._additiveValue:c?YA:e[l];if((vP(a)||c)&&!_&&(_=this._additiveValue=[]),this.discrete)e[l]=w<1?f.rawValue:m.rawValue;else if(vP(a))a===qO?MU(_,f[i],m[i],w):rst(_,f[i],m[i],w);else if(wse(a)){var S=f[i],A=m[i],C=a===GH;e[l]={type:C?"linear":"radial",x:Qp(S.x,A.x,w),y:Qp(S.y,A.y,w),colorStops:Ue(S.colorStops,function(M,P){var O=A.colorStops[P];return{offset:Qp(M.offset,O.offset,w),color:HO(MU([],M.color,O.color,w))}}),global:A.global},C?(e[l].x2=Qp(S.x2,A.x2,w),e[l].y2=Qp(S.y2,A.y2,w)):e[l].r=Qp(S.r,A.r,w)}else if(c)MU(_,f[i],m[i],w),r||(e[l]=HO(_));else{var D=Qp(f[i],m[i],w);r?this._additiveValue=D:e[l]=D}r&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,i=this._additiveValue;t===mP?e[r]=e[r]+i:t===zC?(Wc(e[r],YA),gP(YA,YA,i,1),e[r]=HO(YA)):t===qO?gP(e[r],e[r],i,1):t===NSe&&yse(e[r],e[r],i,1)},n}(),IY=function(){function n(e,t,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&i){_Y("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,Vn(t),r)},n.prototype.whenWithKeys=function(e,t,r,i){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],l=a[s];if(!l){l=a[s]=new sst(s);var c=void 0,u=this._getAdditiveTrack(s);if(u){var d=u.keyframes,h=d[d.length-1];c=h&&h.value,u.valType===zC&&c&&(c=HO(c))}else c=this._target[s];if(c==null)continue;e>0&&l.addKeyframe(0,_D(c),i),this._trackKeys.push(s)}l.addKeyframe(e,_D(t[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(t=a)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),c=s.keyframes,u=c.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var d=c[u-1];d&&(t._target[s.propName]=d.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var h=new qot({life:i,loop:this._loop,delay:this._delay||0,onframe:function(f){t._started=2;var m=t._additiveAnimators;if(m){for(var v=!1,y=0;y<m.length;y++)if(m[y]._clip){v=!0;break}v||(t._additiveAnimators=null)}for(var y=0;y<r.length;y++)r[y].step(t._target,f);var w=t._onframeCbs;if(w)for(var y=0;y<w.length;y++)w[y](t._target,f)},ondestroy:function(){t._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),e&&h.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return Ue(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var o=r[e[a]];o&&!o.isFinished()&&(t?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},n.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var i=0;i<t.length;i++){var a=t[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[r?0:s.length-1];l&&(e[a]=_D(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||Vn(e);for(var r=0;r<t.length;r++){var i=t[r],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},n}();function US(){return new Date().getTime()}var lst=function(n){ki(e,n);function e(t){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,i=t.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=US()-this._pausedTime,i=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,t||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(RN(r),!t._paused&&t.update())}RN(r)},e.prototype.start=function(){this._running||(this._time=US(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=US(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=US()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var i=new IY(t,r.loop);return this.addAnimator(i),i},e}(ed),cst=300,PU=Nn.domSupported,OU=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=Ue(n,function(i){var a=i.replace("mouse","pointer");return t.hasOwnProperty(a)?a:i});return{mouse:n,touch:e,pointer:r}}(),_se={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},xse=!1;function YH(n){var e=n.pointerType;return e==="pen"||e==="touch"}function ust(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function RU(n){n&&(n.zrByTouch=!0)}function dst(n,e){return Pu(n.dom,new hst(n,e),!0)}function LSe(n,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return r}var hst=function(){function n(e,t){this.stopPropagation=Ca,this.stopImmediatePropagation=Ca,this.preventDefault=Ca,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),zd={mousedown:function(n){n=Pu(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=Pu(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=Pu(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=Pu(this.dom,n);var e=n.toElement||n.relatedTarget;LSe(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){xse=!0,n=Pu(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){xse||(n=Pu(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=Pu(this.dom,n),RU(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),zd.mousemove.call(this,n),zd.mousedown.call(this,n)},touchmove:function(n){n=Pu(this.dom,n),RU(n),this.handler.processGesture(n,"change"),zd.mousemove.call(this,n)},touchend:function(n){n=Pu(this.dom,n),RU(n),this.handler.processGesture(n,"end"),zd.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<cst&&zd.click.call(this,n)},pointerdown:function(n){zd.mousedown.call(this,n)},pointermove:function(n){YH(n)||zd.mousemove.call(this,n)},pointerup:function(n){zd.mouseup.call(this,n)},pointerout:function(n){YH(n)||zd.mouseout.call(this,n)}};Z(["click","dblclick","contextmenu"],function(n){zd[n]=function(e){e=Pu(this.dom,e),this.trigger(n,e)}});var KH={pointermove:function(n){YH(n)||KH.mousemove.call(this,n)},pointerup:function(n){KH.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function fst(n,e){var t=e.domHandlers;Nn.pointerEventsSupported?Z(OU.pointer,function(r){GO(e,r,function(i){t[r].call(n,i)})}):(Nn.touchEventsSupported&&Z(OU.touch,function(r){GO(e,r,function(i){t[r].call(n,i),ust(e)})}),Z(OU.mouse,function(r){GO(e,r,function(i){i=EY(i),e.touching||t[r].call(n,i)})}))}function pst(n,e){Nn.pointerEventsSupported?Z(_se.pointer,t):Nn.touchEventsSupported||Z(_se.mouse,t);function t(r){function i(a){a=EY(a),LSe(n,a.target)||(a=dst(n,a),e.domHandlers[r].call(n,a))}GO(e,r,i,{capture:!0})}}function GO(n,e,t,r){n.mounted[e]=t,n.listenerOpts[e]=r,FH(n.domTarget,e,t,r)}function NU(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&Dot(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var Sse=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),gst=function(n){ki(e,n);function e(t,r){var i=n.call(this)||this;return i.__pointerCapturing=!1,i.dom=t,i.painterRoot=r,i._localHandlerScope=new Sse(t,zd),PU&&(i._globalHandlerScope=new Sse(document,KH)),fst(i,i._localHandlerScope),i}return e.prototype.dispose=function(){NU(this._localHandlerScope),PU&&NU(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,PU&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?pst(this,r):NU(r)}},e}(ed),jSe=1;Nn.hasGlobalWindow&&(jSe=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var BN=jSe,XH=.4,ZH="#333",QH="#ccc",mst="#eee",Tse=m5,Ese=5e-5;function ib(n){return n>Ese||n<-Ese}var ab=[],Wx=[],LU=Gc(),jU=Math.abs,sg=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return ib(this.rotation)||ib(this.x)||ib(this.y)||ib(this.scaleX-1)||ib(this.scaleY-1)||ib(this.skewX)||ib(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(Tse(r),this.invTransform=null);return}r=r||Gc(),t?this.getLocalTransform(r):Tse(r),e&&(t?yg(r,e,r):AY(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(ab);var r=ab[0]<0?-1:1,i=ab[1]<0?-1:1,a=((ab[0]-r)*t+r)/ab[0]||0,o=((ab[1]-i)*t+i)/ab[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||Gc(),PT(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),t=Math.sqrt(t),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||Gc(),yg(Wx,e.invTransform,t),t=Wx);var r=this.originX,i=this.originY;(r||i)&&(LU[4]=r,LU[5]=i,yg(Wx,t,LU),Wx[4]-=r,Wx[5]-=i,t=Wx),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&hs(r,r,i),r},n.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&hs(r,r,i),r},n.prototype.getLineScale=function(){var e=this.transform;return e&&jU(e[0]-1)>1e-10&&jU(e[3]-1)>1e-10?Math.sqrt(jU(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){FSe(this,e)},n.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,o=e.scaleY,s=e.anchorX,l=e.anchorY,c=e.rotation||0,u=e.x,d=e.y,h=e.skewX?Math.tan(e.skewX):0,f=e.skewY?Math.tan(-e.skewY):0;if(r||i||s||l){var m=r+s,v=i+l;t[4]=-m*a-h*v*o,t[5]=-v*o-f*m*a}else t[4]=t[5]=0;return t[0]=a,t[3]=o,t[1]=f*a,t[2]=h*o,c&&Jw(t,t,c),t[4]+=r+u,t[5]+=i+d,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),Lf=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function FSe(n,e){for(var t=0;t<Lf.length;t++){var r=Lf[t];n[r]=e[r]}}var Ase={};function Yc(n,e){e=e||uy;var t=Ase[e];t||(t=Ase[e]=new u2(500));var r=t.get(n);return r==null&&(r=dy.measureText(n,e).width,t.put(n,r)),r}function Cse(n,e,t,r){var i=Yc(n,e),a=y5(e),o=HC(0,i,t),s=MS(0,a,r),l=new pn(o,s,i,a);return l}function d2(n,e,t,r){var i=((n||"")+"").split(`
`),a=i.length;if(a===1)return Cse(i[0],e,t,r);for(var o=new pn(0,0,0,0),s=0;s<i.length;s++){var l=Cse(i[s],e,t,r);s===0?o.copy(l):o.union(l)}return o}function HC(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function MS(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function y5(n){return Yc("国",n)}function ch(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function UN(n,e,t){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=t.height,o=t.width,s=a/2,l=t.x,c=t.y,u="left",d="top";if(r instanceof Array)l+=ch(r[0],t.width),c+=ch(r[1],t.height),u=null,d=null;else switch(r){case"left":l-=i,c+=s,u="right",d="middle";break;case"right":l+=i+o,c+=s,d="middle";break;case"top":l+=o/2,c-=i,u="center",d="bottom";break;case"bottom":l+=o/2,c+=a+i,u="center";break;case"inside":l+=o/2,c+=s,u="center",d="middle";break;case"insideLeft":l+=i,c+=s,d="middle";break;case"insideRight":l+=o-i,c+=s,u="right",d="middle";break;case"insideTop":l+=o/2,c+=i,u="center";break;case"insideBottom":l+=o/2,c+=a-i,u="center",d="bottom";break;case"insideTopLeft":l+=i,c+=i;break;case"insideTopRight":l+=o-i,c+=i,u="right";break;case"insideBottomLeft":l+=i,c+=a-i,d="bottom";break;case"insideBottomRight":l+=o-i,c+=a-i,u="right",d="bottom";break}return n=n||{},n.x=l,n.y=c,n.align=u,n.verticalAlign=d,n}var FU="__zr_normal__",$U=Lf.concat(["ignore"]),vst=Rf(Lf,function(n,e){return n[e]=!0,n},{ignore:!1}),Yx={},yst=new pn(0,0,0,0),b5=function(){function n(e){this.id=hSe(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=t.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=i?this:null;var c=!1;if(a.copyTransform(t),r.position!=null){var u=yst;r.layoutRect?u.copy(r.layoutRect):u.copy(this.getBoundingRect()),i||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Yx,r,u):UN(Yx,r,u),a.x=Yx.x,a.y=Yx.y,o=Yx.align,s=Yx.verticalAlign;var d=r.origin;if(d&&r.rotation!=null){var h=void 0,f=void 0;d==="center"?(h=u.width*.5,f=u.height*.5):(h=ch(d[0],u.width),f=ch(d[1],u.height)),c=!0,a.originX=-a.x+h+(i?0:u.x),a.originY=-a.y+f+(i?0:u.y)}}r.rotation!=null&&(a.rotation=r.rotation);var m=r.offset;m&&(a.x+=m[0],a.y+=m[1],c||(a.originX=-m[0],a.originY=-m[1]));var v=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,y=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),w=void 0,_=void 0,S=void 0;v&&this.canBeInsideText()?(w=r.insideFill,_=r.insideStroke,(w==null||w==="auto")&&(w=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(w),S=!0)):(w=r.outsideFill,_=r.outsideStroke,(w==null||w==="auto")&&(w=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(w),S=!0)),w=w||"#000",(w!==y.fill||_!==y.stroke||S!==y.autoStroke||o!==y.align||s!==y.verticalAlign)&&(l=!0,y.fill=w,y.stroke=_,y.autoStroke=S,y.align=o,y.verticalAlign=s,t.setDefaultTextStyle(y)),t.__dirty|=Bc,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?QH:ZH},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&Wc(t);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*i+(a?0:255)*(1-i);return r[3]=1,bg(r,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},Pe(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(jt(e))for(var r=e,i=Vn(r),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,e[o])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==FU)){var o=i.targetName,s=o?t[o]:t;i.saveTo(s)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,$U)},n.prototype._savePrimaryToNormal=function(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in t)&&(t[a]=this[a])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(FU,!1,e)},n.prototype.useState=function(e,t,r,i){var a=e===FU,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(_n(s,e)>=0&&(t||s.length===1))){var c;if(this.stateProxy&&!a&&(c=this.stateProxy(e)),c||(c=this.states&&this.states[e]),!c&&!a){_Y("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||i);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,c,this._normalState,t,!r&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,h=this._textGuide;return d&&d.useState(e,t,r,u),h&&h.useState(e,t,r,u),a?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Bc),c}}},n.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,o=e.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(e[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var c=e[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,e)),u||(u=this.states[c]),u&&i.push(u)}var d=i[o-1],h=!!(d&&d.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(i),m=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(e.join(","),f,this._normalState,!1,!t&&!this.__inHover&&m&&m.duration>0,m);var v=this._textContent,y=this._textGuide;v&&v.useStates(e,t,h),y&&y.useStates(e,t,h),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Bc)}},n.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=_n(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},n.prototype.replaceState=function(e,t,r){var i=this.currentStates.slice(),a=_n(i,e),o=_n(i,t)>=0;a>=0?o?i.splice(a,1):i[a]=t:r&&!o&&i.push(t),this.useStates(i)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},r,i=0;i<e.length;i++){var a=e[i];Pe(t,a),a.textConfig&&(r=r||{},Pe(r,a.textConfig))}return r&&(t.textConfig=r),t},n.prototype._applyStateObj=function(e,t,r,i,a,o){var s=!(t&&i);t&&t.textConfig?(this.textConfig=Pe({},i?this.textConfig:r.textConfig),Pe(this.textConfig,t.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},c=!1,u=0;u<$U.length;u++){var d=$U[u],h=a&&vst[d];t&&t[d]!=null?h?(c=!0,l[d]=t[d]):this[d]=t[d]:s&&r[d]!=null&&(h?(c=!0,l[d]=r[d]):this[d]=r[d])}if(!a)for(var u=0;u<this.animators.length;u++){var f=this.animators[u],m=f.targetName;f.getLoop()||f.__changeFinalValue(m?(t||r)[m]:t||r)}c&&this._transitionState(e,l,o)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new sg,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Pe(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=Bc;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,r){var i=e?this[e]:this,a=new IY(i,t,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},n.prototype.addAnimator=function(e,t){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(t)}).done(function(){var a=i.animators,o=_n(a,e);o>=0&&a.splice(o,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var r=this.animators,i=r.length,a=[],o=0;o<i;o++){var s=r[o];!e||e===s.scope?s.stop(t):a.push(s)}return this.animators=a,this},n.prototype.animateTo=function(e,t,r){BU(this,e,t,r)},n.prototype.animateFrom=function(e,t,r){BU(this,e,t,r,!0)},n.prototype._transitionState=function(e,t,r,i){for(var a=BU(this,t,r,i),o=0;o<a.length;o++)a[o].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Bc;function t(r,i,a,o){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[a]=l[0],this[o]=l[1],this[i]=l,s(this,l)}});function s(l,c){Object.defineProperty(c,0,{get:function(){return l[a]},set:function(u){l[a]=u}}),Object.defineProperty(c,1,{get:function(){return l[o]},set:function(u){l[o]=u}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();Ha(b5,ed);Ha(b5,sg);function BU(n,e,t,r,i){t=t||{};var a=[];$Se(n,"",n,e,t,r,a,i);var o=a.length,s=!1,l=t.done,c=t.aborted,u=function(){s=!0,o--,o<=0&&(s?l&&l():c&&c())},d=function(){o--,o<=0&&(s?l&&l():c&&c())};o||l&&l(),a.length>0&&t.during&&a[0].during(function(m,v){t.during(v)});for(var h=0;h<a.length;h++){var f=a[h];u&&f.done(u),d&&f.aborted(d),t.force&&f.duration(t.duration),f.start(t.easing)}return a}function UU(n,e,t){for(var r=0;r<t;r++)n[r]=e[r]}function bst(n){return Gs(n[0])}function wst(n,e,t){if(Gs(e[t]))if(Gs(n[t])||(n[t]=[]),ic(e[t])){var r=e[t].length;n[t].length!==r&&(n[t]=new e[t].constructor(r),UU(n[t],e[t],r))}else{var i=e[t],a=n[t],o=i.length;if(bst(i))for(var s=i[0].length,l=0;l<o;l++)a[l]?UU(a[l],i[l],s):a[l]=Array.prototype.slice.call(i[l]);else UU(a,i,o);a.length=i.length}else n[t]=e[t]}function _st(n,e){return n===e||Gs(n)&&Gs(e)&&xst(n,e)}function xst(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function $Se(n,e,t,r,i,a,o,s){for(var l=Vn(r),c=i.duration,u=i.delay,d=i.additive,h=i.setToFinal,f=!jt(a),m=n.animators,v=[],y=0;y<l.length;y++){var w=l[y],_=r[w];if(_!=null&&t[w]!=null&&(f||a[w]))if(jt(_)&&!Gs(_)&&!p5(_)){if(e){s||(t[w]=_,n.updateDuringAnimation(e));continue}$Se(n,w,t[w],_,i,a&&a[w],o,s)}else v.push(w);else s||(t[w]=_,n.updateDuringAnimation(e),v.push(w))}var S=v.length;if(!d&&S)for(var A=0;A<m.length;A++){var C=m[A];if(C.targetName===e){var D=C.stopTracks(v);if(D){var M=_n(m,C);m.splice(M,1)}}}if(i.force||(v=Cr(v,function(L){return!_st(r[L],t[L])}),S=v.length),S>0||i.force&&!o.length){var P=void 0,O=void 0,j=void 0;if(s){O={},h&&(P={});for(var A=0;A<S;A++){var w=v[A];O[w]=t[w],h?P[w]=r[w]:t[w]=r[w]}}else if(h){j={};for(var A=0;A<S;A++){var w=v[A];j[w]=_D(t[w]),wst(t,r,w)}}var C=new IY(t,!1,!1,d?Cr(m,function(B){return B.targetName===e}):null);C.targetName=e,i.scope&&(C.scope=i.scope),h&&P&&C.whenWithKeys(0,P,v),j&&C.whenWithKeys(0,j,v),C.whenWithKeys(c??500,s?O:r,v).delay(u||0),n.addAnimator(C,e),o.push(C)}}var zt=function(n){ki(e,n);function e(t){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===t)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var i=_n(this._children,t);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(t,r){var i=this._children,a=i[r];if(t&&t!==this&&t.parent!==this&&t!==a){i[r]=t,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,i=this._children,a=_n(i,t);return a<0?this:(i.splice(a,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,i=0;i<t.length;i++){var a=t[i];r&&a.removeSelfFromZr(r),a.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];t.call(r,o,a)}return this},e.prototype.traverse=function(t,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=t.call(r,a);a.isGroup&&!o&&a.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new pn(0,0,0,0),i=t||this._children,a=[],o=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(a);u?(pn.applyTransform(r,c,u),o=o||r.clone(),o.union(r)):(o=o||c.clone(),o.union(c))}}return o||r},e}(b5);zt.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var WO={},BSe={};function Sst(n){delete BSe[n]}function Tst(n){if(!n)return!1;if(typeof n=="string")return FN(n,1)<XH;if(n.colorStops){for(var e=n.colorStops,t=0,r=e.length,i=0;i<r;i++)t+=FN(e[i].color,1);return t/=r,t<XH}return!1}var Est=function(){function n(e,t,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var a=new Bot,o=r.renderer||"canvas";WO[o]||(o=Vn(WO)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new WO[o](t,a,r,e),l=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var c=!Nn.node&&!Nn.worker&&!l?new gst(s.getViewportRoot(),s.root):null,u=r.useCoarsePointer,d=u==null||u==="auto"?Nn.touchEventsSupported:!!u,h=44,f;d&&(f=Zt(r.pointerSize,h)),this.handler=new ySe(a,s,c,s.root,f),this.animation=new lst({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},n.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=Tst(e))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(e){var t,r=US();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var i=US();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},n.prototype.on=function(e,t,r){return this._disposed||this.handler.on(e,t,r),this},n.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},n.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},n.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof zt&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,Sst(this.id))},n}();function Dse(n,e){var t=new Est(hSe(),n,e);return BSe[t.id]=t,t}function Ast(n,e){WO[n]=e}var JH;function Cst(n){if(typeof JH=="function")return JH(n)}function Dst(n){JH=n}var kse=1e-4,USe=20;function kst(n){return n.replace(/^\s+|\s+$/g,"")}function kr(n,e,t,r){var i=e[0],a=e[1],o=t[0],s=t[1],l=a-i,c=s-o;if(l===0)return c===0?o:(o+s)/2;if(r)if(l>0){if(n<=i)return o;if(n>=a)return s}else{if(n>=i)return o;if(n<=a)return s}else{if(n===i)return o;if(n===a)return s}return(n-i)/l*c+o}function Je(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return st(n)?kst(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function va(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),USe),n=(+n).toFixed(e),t?n:+n}function Hu(n){return n.sort(function(e,t){return e-t}),n}function bf(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return Ist(n)}function Ist(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,i=t>0?t:e.length,a=e.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-r)}function VSe(n,e){var t=Math.log,r=Math.LN10,i=Math.floor(t(n[1]-n[0])/r),a=Math.round(t(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function Mst(n,e){var t=Rf(n,function(f,m){return f+(isNaN(m)?0:m)},0);if(t===0)return[];for(var r=Math.pow(10,e),i=Ue(n,function(f){return(isNaN(f)?0:f)/t*r*100}),a=r*100,o=Ue(i,function(f){return Math.floor(f)}),s=Rf(o,function(f,m){return f+m},0),l=Ue(i,function(f,m){return f-o[m]});s<a;){for(var c=Number.NEGATIVE_INFINITY,u=null,d=0,h=l.length;d<h;++d)l[d]>c&&(c=l[d],u=d);++o[u],l[u]=0,++s}return Ue(o,function(f){return f/r})}function Pst(n,e){var t=Math.max(bf(n),bf(e)),r=n+e;return t>USe?r:va(r,t)}var Ise=9007199254740991;function zSe(n){var e=Math.PI*2;return(n%e+e)%e}function Xk(n){return n>-kse&&n<kse}var Ost=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function jf(n){if(n instanceof Date)return n;if(st(n)){var e=Ost.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function Rst(n){return Math.pow(10,MY(n))}function MY(n){if(n===0)return 0;var e=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,e)>=10&&e++,e}function HSe(n,e){var t=MY(n),r=Math.pow(10,t),i=n/r,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,n=a*r,t>=-20?+n.toFixed(t<0?-t:0):n}function VU(n,e){var t=(n.length-1)*e+1,r=Math.floor(t),i=+n[r-1],a=t-r;return a?i+a*(n[r]-i):i}function Mse(n){n.sort(function(l,c){return s(l,c,0)?-1:1});for(var e=-1/0,t=1,r=0;r<n.length;){for(var i=n[r].interval,a=n[r].close,o=0;o<2;o++)i[o]<=e&&(i[o]=e,a[o]=o?1:1-t),e=i[o],t=a[o];i[0]===i[1]&&a[0]*a[1]!==1?n.splice(r,1):r++}return n;function s(l,c,u){return l.interval[u]<c.interval[u]||l.interval[u]===c.interval[u]&&(l.close[u]-c.close[u]===(u?-1:1)||!u&&s(l,c,1))}}function Pg(n){var e=parseFloat(n);return e==n&&(e!==0||!st(n)||n.indexOf("x")<=0)?e:NaN}function qSe(n){return!isNaN(Pg(n))}function GSe(){return Math.round(Math.random()*9)}function WSe(n,e){return e===0?n:WSe(e,n%e)}function Pse(n,e){return n==null?e:e==null?n:n*e/WSe(n,e)}function Er(n){throw new Error(n)}function Ose(n,e,t){return(e-n)*t+n}var YSe="series\0",KSe="\0_ec_\0";function Wr(n){return n instanceof Array?n:n==null?[]:[n]}function jw(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var r=0,i=t.length;r<i;r++){var a=t[r];!n.emphasis[e].hasOwnProperty(a)&&n[e].hasOwnProperty(a)&&(n.emphasis[e][a]=n[e][a])}}}var Rse=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function OT(n){return jt(n)&&!$e(n)&&!(n instanceof Date)?n.value:n}function Nst(n){return jt(n)&&!(n instanceof Array)}function XSe(n,e,t){var r=t==="normalMerge",i=t==="replaceMerge",a=t==="replaceAll";n=n||[],e=(e||[]).slice();var o=_t();Z(e,function(l,c){if(!jt(l)){e[c]=null;return}});var s=Lst(n,o,t);return(r||i)&&jst(s,n,o,e),r&&Fst(s,e),r||i?$st(s,e,i):a&&Bst(s,e),Ust(s),s}function Lst(n,e,t){var r=[];if(t==="replaceAll")return r;for(var i=0;i<n.length;i++){var a=n[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:t==="replaceMerge"||Zk(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function jst(n,e,t,r){Z(r,function(i,a){if(!(!i||i.id==null)){var o=xD(i.id),s=t.get(o);if(s!=null){var l=n[s];Tl(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=e[s],r[a]=null}}})}function Fst(n,e){Z(e,function(t,r){if(!(!t||t.name==null))for(var i=0;i<n.length;i++){var a=n[i].existing;if(!n[i].newOption&&a&&(a.id==null||t.id==null)&&!Zk(t)&&!Zk(a)&&ZSe("name",a,t)){n[i].newOption=t,e[r]=null;return}}})}function $st(n,e,t){Z(e,function(r){if(r){for(var i,a=0;(i=n[a])&&(i.newOption||Zk(i.existing)||i.existing&&r.id!=null&&!ZSe("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=t):n.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),a++}})}function Bst(n,e){Z(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function Ust(n){var e=_t();Z(n,function(t){var r=t.existing;r&&e.set(r.id,t)}),Z(n,function(t){var r=t.newOption;Tl(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),Z(n,function(t,r){var i=t.existing,a=t.newOption,o=t.keyInfo;if(jt(a)){if(o.name=a.name!=null?xD(a.name):i?i.name:YSe+r,i)o.id=xD(i.id);else if(a.id!=null)o.id=xD(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(e.get(o.id))}e.set(o.id,t)}})}function ZSe(n,e,t){var r=ro(e[n],null),i=ro(t[n],null);return r!=null&&i!=null&&r===i}function xD(n){return ro(n,"")}function ro(n,e){return n==null?e:st(n)?n:ur(n)||IH(n)?n+"":e}function PY(n){var e=n.name;return!!(e&&e.indexOf(YSe))}function Zk(n){return n&&n.id!=null&&xD(n.id).indexOf(KSe)===0}function Vst(n){return KSe+n}function zst(n,e,t){Z(n,function(r){var i=r.newOption;jt(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=Hst(e,i,r.existing,t))})}function Hst(n,e,t,r){var i=e.type?e.type:t?t.subType:r.determineSubType(n,e);return i}function qst(n,e){var t={},r={};return i(n||[],t),i(e||[],r,t),[a(t),a(r)];function i(o,s,l){for(var c=0,u=o.length;c<u;c++){var d=ro(o[c].seriesId,null);if(d==null)return;for(var h=Wr(o[c].dataIndex),f=l&&l[d],m=0,v=h.length;m<v;m++){var y=h[m];f&&f[y]?f[y]=null:(s[d]||(s[d]={}))[y]=1}}}function a(o,s){var l=[];for(var c in o)if(o.hasOwnProperty(c)&&o[c]!=null)if(s)l.push(+c);else{var u=a(o[c],!0);u.length&&l.push({seriesId:c,dataIndex:u})}return l}}function Fw(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return $e(e.dataIndex)?Ue(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return $e(e.name)?Ue(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function tr(){var n="__ec_inner_"+Gst++;return function(e){return e[n]||(e[n]={})}}var Gst=GSe();function SD(n,e,t){var r=OY(e,t),i=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,l=t?t.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(c,u){var d=h2(n,u,c,{useDefault:l===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});s[u+"Models"]=d.models,s[u+"Model"]=d.models[0]}),s}function OY(n,e){var t;if(st(n)){var r={};r[n+"Index"]=0,t=r}else t=n;var i=_t(),a={},o=!1;return Z(t,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],d=(c[2]||"").toLowerCase();if(!(!u||!d||e&&e.includeMainTypes&&_n(e.includeMainTypes,u)<0)){o=o||!!u;var h=i.get(u)||i.set(u,{});h[d]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var Va={useDefault:!0,enableAll:!1,enableNone:!1},Wst={useDefault:!1,enableAll:!0,enableNone:!0};function h2(n,e,t,r){r=r||Va;var i=t.index,a=t.id,o=t.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=n.getComponent(e))?[l]:[],s}return i==="none"||i===!1?(Tl(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Tl(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=n.queryComponents({mainType:e,index:i,id:a,name:o}),s)}function QSe(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function Yst(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function Kst(n){return n==="auto"?Nn.domSupported?"html":"richText":n||"html"}function e8(n,e){var t=_t(),r=[];return Z(n,function(i){var a=e(i);(t.get(a)||(r.push(a),t.set(a,[]))).push(i)}),{keys:r,buckets:t}}function JSe(n,e,t,r,i){var a=e==null||e==="auto";if(r==null)return r;if(ur(r)){var o=Ose(t||0,r,i);return va(o,a?Math.max(bf(t||0),bf(r)):e)}else{if(st(r))return i<1?t:r;for(var s=[],l=t,c=r,u=Math.max(l?l.length:0,c.length),d=0;d<u;++d){var h=n.getDimensionInfo(d);if(h&&h.type==="ordinal")s[d]=(i<1&&l?l:c)[d];else{var f=l&&l[d]?l[d]:0,m=c[d],o=Ose(f,m,i);s[d]=va(o,a?Math.max(bf(f),bf(m)):e)}}return s}}var Xst=".",ob="___EC__COMPONENT__CONTAINER___",e1e="___EC__EXTENDED_CLASS___";function wf(n){var e={main:"",sub:""};if(n){var t=n.split(Xst);e.main=t[0]||"",e.sub=t[1]||""}return e}function Zst(n){Tl(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function Qst(n){return!!(n&&n[e1e])}function RY(n,e){n.$constructor=n,n.extend=function(t){var r=this,i;return Jst(r)?i=function(a){Te(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(i=function(){(t.$constructor||r).apply(this,arguments)},sot(i,this)),Pe(i.prototype,t),i[e1e]=!0,i.extend=this.extend,i.superCall=nlt,i.superApply=rlt,i.superClass=r,i}}function Jst(n){return kt(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function t1e(n,e){n.extend=e.extend}var elt=Math.round(Math.random()*10);function tlt(n){var e=["__\0is_clz",elt++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function nlt(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(n,t)}function rlt(n,e,t){return this.superClass.prototype[e].apply(n,t)}function w5(n){var e={};n.registerClass=function(r){var i=r.type||r.prototype.type;if(i){Zst(i),r.prototype.type=i;var a=wf(i);if(!a.sub)e[a.main]=r;else if(a.sub!==ob){var o=t(a);o[a.sub]=r}}return r},n.getClass=function(r,i,a){var o=e[r];if(o&&o[ob]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return o},n.getClassesByMainType=function(r){var i=wf(r),a=[],o=e[i.main];return o&&o[ob]?Z(o,function(s,l){l!==ob&&a.push(s)}):a.push(o),a},n.hasClass=function(r){var i=wf(r);return!!e[i.main]},n.getAllClassMainTypes=function(){var r=[];return Z(e,function(i,a){r.push(a)}),r},n.hasSubTypes=function(r){var i=wf(r),a=e[i.main];return a&&a[ob]};function t(r){var i=e[r.main];return(!i||!i[ob])&&(i=e[r.main]={},i[ob]=!0),i}}function $w(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(r,i,a){for(var o={},s=0;s<n.length;s++){var l=n[s][1];if(!(i&&_n(i,l)>=0||a&&_n(a,l)<0)){var c=r.getShallow(l,e);c!=null&&(o[n[s][0]]=c)}}return o}}var ilt=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],alt=$w(ilt),olt=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return alt(this,e,t)},n}(),t8=new u2(50);function slt(n){if(typeof n=="string"){var e=t8.get(n);return e&&e.image}else return n}function NY(n,e,t,r,i){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var a=t8.get(n),o={hostEl:t,cb:r,cbPayload:i};return a?(e=a.image,!_5(e)&&a.pending.push(o)):(e=dy.loadImage(n,Nse,Nse),e.__zrImageSrc=n,t8.put(n,e.__cachedImgObj={image:e,pending:[o]})),e}else return n;else return e}function Nse(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function _5(n){return n&&n.width&&n.height}var zU=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function llt(n,e,t,r,i,a){if(!t){n.text="",n.isTruncated=!1;return}var o=(e+"").split(`
`);a=n1e(t,r,i,a);for(var s=!1,l={},c=0,u=o.length;c<u;c++)r1e(l,o[c],a),o[c]=l.textLine,s=s||l.isTruncated;n.text=o.join(`
`),n.isTruncated=s}function n1e(n,e,t,r){r=r||{};var i=Pe({},r);i.font=e,t=Zt(t,"..."),i.maxIterations=Zt(r.maxIterations,2);var a=i.minChar=Zt(r.minChar,0);i.cnCharWidth=Yc("国",e);var o=i.ascCharWidth=Yc("a",e);i.placeholder=Zt(r.placeholder,"");for(var s=n=Math.max(0,n-1),l=0;l<a&&s>=o;l++)s-=o;var c=Yc(t,e);return c>s&&(t="",c=0),s=n-c,i.ellipsis=t,i.ellipsisWidth=c,i.contentWidth=s,i.containerWidth=n,i}function r1e(n,e,t){var r=t.containerWidth,i=t.font,a=t.contentWidth;if(!r){n.textLine="",n.isTruncated=!1;return}var o=Yc(e,i);if(o<=r){n.textLine=e,n.isTruncated=!1;return}for(var s=0;;s++){if(o<=a||s>=t.maxIterations){e+=t.ellipsis;break}var l=s===0?clt(e,a,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*a/o):0;e=e.substr(0,l),o=Yc(e,i)}e===""&&(e=t.placeholder),n.textLine=e,n.isTruncated=!0}function clt(n,e,t,r){for(var i=0,a=0,o=n.length;a<o&&i<e;a++){var s=n.charCodeAt(a);i+=0<=s&&s<=127?t:r}return a}function ult(n,e){n!=null&&(n+="");var t=e.overflow,r=e.padding,i=e.font,a=t==="truncate",o=y5(i),s=Zt(e.lineHeight,o),l=!!e.backgroundColor,c=e.lineOverflow==="truncate",u=!1,d=e.width,h;d!=null&&(t==="break"||t==="breakAll")?h=n?i1e(n,e.font,d,t==="breakAll",0).lines:[]:h=n?n.split(`
`):[];var f=h.length*s,m=Zt(e.height,f);if(f>m&&c){var v=Math.floor(m/s);u=u||h.length>v,h=h.slice(0,v)}if(n&&a&&d!=null)for(var y=n1e(d,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),w={},_=0;_<h.length;_++)r1e(w,h[_],y),h[_]=w.textLine,u=u||w.isTruncated;for(var S=m,A=0,_=0;_<h.length;_++)A=Math.max(Yc(h[_],i),A);d==null&&(d=A);var C=A;return r&&(S+=r[0]+r[2],C+=r[1]+r[3],d+=r[1]+r[3]),l&&(C=d),{lines:h,height:m,outerWidth:C,outerHeight:S,lineHeight:s,calculatedLineHeight:o,contentWidth:A,contentHeight:f,width:d,isTruncated:u}}var dlt=function(){function n(){}return n}(),Lse=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),hlt=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return n}();function flt(n,e){var t=new hlt;if(n!=null&&(n+=""),!n)return t;for(var r=e.width,i=e.height,a=e.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=zU.lastIndex=0,l;(l=zU.exec(n))!=null;){var c=l.index;c>s&&HU(t,n.substring(s,c),e,o),HU(t,l[2],e,o,l[1]),s=zU.lastIndex}s<n.length&&HU(t,n.substring(s,n.length),e,o);var u=[],d=0,h=0,f=e.padding,m=a==="truncate",v=e.lineOverflow==="truncate",y={};function w(z,oe,le){z.width=oe,z.lineHeight=le,d+=le,h=Math.max(h,oe)}e:for(var _=0;_<t.lines.length;_++){for(var S=t.lines[_],A=0,C=0,D=0;D<S.tokens.length;D++){var M=S.tokens[D],P=M.styleName&&e.rich[M.styleName]||{},O=M.textPadding=P.padding,j=O?O[1]+O[3]:0,L=M.font=P.font||e.font;M.contentHeight=y5(L);var B=Zt(P.height,M.contentHeight);if(M.innerHeight=B,O&&(B+=O[0]+O[2]),M.height=B,M.lineHeight=Cf(P.lineHeight,e.lineHeight,B),M.align=P&&P.align||e.align,M.verticalAlign=P&&P.verticalAlign||"middle",v&&i!=null&&d+M.lineHeight>i){var $=t.lines.length;D>0?(S.tokens=S.tokens.slice(0,D),w(S,C,A),t.lines=t.lines.slice(0,_+1)):t.lines=t.lines.slice(0,_),t.isTruncated=t.isTruncated||t.lines.length<$;break e}var Y=P.width,q=Y==null||Y==="auto";if(typeof Y=="string"&&Y.charAt(Y.length-1)==="%")M.percentWidth=Y,u.push(M),M.contentWidth=Yc(M.text,L);else{if(q){var W=P.backgroundColor,X=W&&W.image;X&&(X=slt(X),_5(X)&&(M.width=Math.max(M.width,X.width*B/X.height)))}var te=m&&r!=null?r-C:null;te!=null&&te<M.width?!q||te<j?(M.text="",M.width=M.contentWidth=0):(llt(y,M.text,te-j,L,e.ellipsis,{minChar:e.truncateMinChar}),M.text=y.text,t.isTruncated=t.isTruncated||y.isTruncated,M.width=M.contentWidth=Yc(M.text,L)):M.contentWidth=Yc(M.text,L)}M.width+=j,C+=M.width,P&&(A=Math.max(A,M.lineHeight))}w(S,C,A)}t.outerWidth=t.width=Zt(r,h),t.outerHeight=t.height=Zt(i,d),t.contentHeight=d,t.contentWidth=h,f&&(t.outerWidth+=f[1]+f[3],t.outerHeight+=f[0]+f[2]);for(var _=0;_<u.length;_++){var M=u[_],re=M.percentWidth;M.width=parseInt(re,10)/100*t.width}return t}function HU(n,e,t,r,i){var a=e==="",o=i&&t.rich[i]||{},s=n.lines,l=o.font||t.font,c=!1,u,d;if(r){var h=o.padding,f=h?h[1]+h[3]:0;if(o.width!=null&&o.width!=="auto"){var m=ch(o.width,r.width)+f;s.length>0&&m+r.accumWidth>r.width&&(u=e.split(`
`),c=!0),r.accumWidth=m}else{var v=i1e(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=v.accumWidth+f,d=v.linesWidths,u=v.lines}}else u=e.split(`
`);for(var y=0;y<u.length;y++){var w=u[y],_=new dlt;if(_.styleName=i,_.text=w,_.isLineHolder=!w&&!a,typeof o.width=="number"?_.width=o.width:_.width=d?d[y]:Yc(w,l),!y&&!c){var S=(s[s.length-1]||(s[0]=new Lse)).tokens,A=S.length;A===1&&S[0].isLineHolder?S[0]=_:(w||!A||a)&&S.push(_)}else s.push(new Lse([_]))}}function plt(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var glt=Rf(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function mlt(n){return plt(n)?!!glt[n]:!0}function i1e(n,e,t,r,i){for(var a=[],o=[],s="",l="",c=0,u=0,d=0;d<n.length;d++){var h=n.charAt(d);if(h===`
`){l&&(s+=l,u+=c),a.push(s),o.push(u),s="",l="",c=0,u=0;continue}var f=Yc(h,e),m=r?!1:!mlt(h);if(a.length?u+f>t:i+u+f>t){u?(s||l)&&(m?(s||(s=l,l="",c=0,u=c),a.push(s),o.push(u-c),l+=h,c+=f,s="",u=c):(l&&(s+=l,l="",c=0),a.push(s),o.push(u),s=h,u=f)):m?(a.push(l),o.push(c),l=h,c=f):(a.push(h),o.push(f));continue}u+=f,m?(l+=h,c+=f):(l&&(s+=l,l="",c=0),s+=h)}return!a.length&&!s&&(s=n,l="",c=0),l&&(s+=l),s&&(a.push(s),o.push(u)),a.length===1&&(u+=i),{accumWidth:u,lines:a,linesWidths:o}}var n8="__zr_style_"+Math.round(Math.random()*10),mw={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},x5={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};mw[n8]=!0;var jse=["z","z2","invisible"],vlt=["invisible"],Qu=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var r=Vn(t),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(t[a]):n.prototype.attrKV.call(this,a,t[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&ylt(this,t,r)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new pn(0,0,0,0)),r?pn.applyTransform(t,i,r):t.copy(i),(o||s||l)&&(t.width+=o*2+Math.abs(s),t.height+=o*2+Math.abs(l),t.x=Math.min(t.x,t.x+s-o),t.y=Math.min(t.y,t.y+l-o));var c=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-c),t.y=Math.floor(t.y-c),t.width=Math.ceil(t.width+1+c*2),t.height=Math.ceil(t.height+1+c*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new pn(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?n.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:Pe(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=VC,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&VC)},e.prototype.styleUpdated=function(){this.__dirty&=~VC},e.prototype.createStyle=function(t){return g5(mw,t)},e.prototype.useStyle=function(t){t[n8]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[n8]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,jse)},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var l=!(r&&a),c;if(r&&r.style?o?a?c=r.style:(c=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(c,r.style)):(c=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(c,r.style)):l&&(c=i.style),c)if(o){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var d=Vn(u),h=0;h<d.length;h++){var f=d[h];f in c&&(c[f]=c[f],this.style[f]=u[f])}for(var m=Vn(c),h=0;h<m.length;h++){var f=m[h];this.style[f]=this.style[f]}this._transitionState(t,{style:c},s,this.getAnimationStyleProps())}else this.useStyle(c);for(var v=this.__inHover?vlt:jse,h=0;h<v.length;h++){var f=v[h];r&&r[f]!=null?this[f]=r[f]:l&&i[f]!=null&&(this[f]=i[f])}},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(t,r){return Pe(t,r),t},e.prototype.getAnimationStyleProps=function(){return x5},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Bc|VC}(),e}(b5),qU=new pn(0,0,0,0),GU=new pn(0,0,0,0);function ylt(n,e,t){return qU.copy(n.getBoundingRect()),n.transform&&qU.applyTransform(n.transform),GU.width=e,GU.height=t,!qU.intersect(GU)}var Kl=Math.min,Xl=Math.max,WU=Math.sin,YU=Math.cos,sb=Math.PI*2,yP=Qw(),bP=Qw(),wP=Qw();function S5(n,e,t){if(n.length!==0){for(var r=n[0],i=r[0],a=r[0],o=r[1],s=r[1],l=1;l<n.length;l++)r=n[l],i=Kl(i,r[0]),a=Xl(a,r[0]),o=Kl(o,r[1]),s=Xl(s,r[1]);e[0]=i,e[1]=o,t[0]=a,t[1]=s}}function Fse(n,e,t,r,i,a){i[0]=Kl(n,t),i[1]=Kl(e,r),a[0]=Xl(n,t),a[1]=Xl(e,r)}var $se=[],Bse=[];function blt(n,e,t,r,i,a,o,s,l,c){var u=SSe,d=mo,h=u(n,t,i,o,$se);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var f=0;f<h;f++){var m=d(n,t,i,o,$se[f]);l[0]=Kl(m,l[0]),c[0]=Xl(m,c[0])}h=u(e,r,a,s,Bse);for(var f=0;f<h;f++){var v=d(e,r,a,s,Bse[f]);l[1]=Kl(v,l[1]),c[1]=Xl(v,c[1])}l[0]=Kl(n,l[0]),c[0]=Xl(n,c[0]),l[0]=Kl(o,l[0]),c[0]=Xl(o,c[0]),l[1]=Kl(e,l[1]),c[1]=Xl(e,c[1]),l[1]=Kl(s,l[1]),c[1]=Xl(s,c[1])}function wlt(n,e,t,r,i,a,o,s){var l=ESe,c=Vo,u=Xl(Kl(l(n,t,i),1),0),d=Xl(Kl(l(e,r,a),1),0),h=c(n,t,i,u),f=c(e,r,a,d);o[0]=Kl(n,i,h),o[1]=Kl(e,a,f),s[0]=Xl(n,i,h),s[1]=Xl(e,a,f)}function _lt(n,e,t,r,i,a,o,s,l){var c=Fv,u=$v,d=Math.abs(i-a);if(d%sb<1e-4&&d>1e-4){s[0]=n-t,s[1]=e-r,l[0]=n+t,l[1]=e+r;return}if(yP[0]=YU(i)*t+n,yP[1]=WU(i)*r+e,bP[0]=YU(a)*t+n,bP[1]=WU(a)*r+e,c(s,yP,bP),u(l,yP,bP),i=i%sb,i<0&&(i=i+sb),a=a%sb,a<0&&(a=a+sb),i>a&&!o?a+=sb:i<a&&o&&(i+=sb),o){var h=a;a=i,i=h}for(var f=0;f<a;f+=Math.PI/2)f>i&&(wP[0]=YU(f)*t+n,wP[1]=WU(f)*r+e,c(s,wP,s),u(l,wP,l))}var li={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},lb=[],cb=[],Qh=[],pv=[],Jh=[],ef=[],KU=Math.min,XU=Math.max,ub=Math.cos,db=Math.sin,Wp=Math.abs,r8=Math.PI,Ev=r8*2,ZU=typeof Float32Array<"u",KA=[];function QU(n){var e=Math.round(n/r8*1e8)/1e8;return e%2*r8}function LY(n,e){var t=QU(n[0]);t<0&&(t+=Ev);var r=t-n[0],i=n[1];i+=r,!e&&i-t>=Ev?i=t+Ev:e&&t-i>=Ev?i=t-Ev:!e&&t>i?i=t+(Ev-QU(t-i)):e&&t<i&&(i=t-(Ev-QU(i-t))),n[0]=t,n[1]=i}var Ff=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=Wp(r/BN/e)||0,this._uy=Wp(r/BN/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(li.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var r=Wp(e-this._xi),i=Wp(t-this._yi),a=r>this._ux||i>this._uy;if(this.addData(li.L,e,t),this._ctx&&a&&this._ctx.lineTo(e,t),a)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var o=r*r+i*i;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=o)}return this},n.prototype.bezierCurveTo=function(e,t,r,i,a,o){return this._drawPendingPt(),this.addData(li.C,e,t,r,i,a,o),this._ctx&&this._ctx.bezierCurveTo(e,t,r,i,a,o),this._xi=a,this._yi=o,this},n.prototype.quadraticCurveTo=function(e,t,r,i){return this._drawPendingPt(),this.addData(li.Q,e,t,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,i),this._xi=r,this._yi=i,this},n.prototype.arc=function(e,t,r,i,a,o){this._drawPendingPt(),KA[0]=i,KA[1]=a,LY(KA,o),i=KA[0],a=KA[1];var s=a-i;return this.addData(li.A,e,t,r,r,i,s,0,o?0:1),this._ctx&&this._ctx.arc(e,t,r,i,a,o),this._xi=ub(a)*r+e,this._yi=db(a)*r+t,this},n.prototype.arcTo=function(e,t,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,i,a),this},n.prototype.rect=function(e,t,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,i),this.addData(li.R,e,t,r,i),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(li.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&ZU&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,r=0,i=this._len,a=0;a<t;a++)r+=e[a].len();ZU&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<t;a++)for(var o=e[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},n.prototype.addData=function(e,t,r,i,a,o,s,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var d=0;d<arguments.length;d++)u[this._len++]=arguments[d]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,ZU&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){Qh[0]=Qh[1]=Jh[0]=Jh[1]=Number.MAX_VALUE,pv[0]=pv[1]=ef[0]=ef[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,i=0,a=0,o;for(o=0;o<this._len;){var s=e[o++],l=o===1;switch(l&&(t=e[o],r=e[o+1],i=t,a=r),s){case li.M:t=i=e[o++],r=a=e[o++],Jh[0]=i,Jh[1]=a,ef[0]=i,ef[1]=a;break;case li.L:Fse(t,r,e[o],e[o+1],Jh,ef),t=e[o++],r=e[o++];break;case li.C:blt(t,r,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],Jh,ef),t=e[o++],r=e[o++];break;case li.Q:wlt(t,r,e[o++],e[o++],e[o],e[o+1],Jh,ef),t=e[o++],r=e[o++];break;case li.A:var c=e[o++],u=e[o++],d=e[o++],h=e[o++],f=e[o++],m=e[o++]+f;o+=1;var v=!e[o++];l&&(i=ub(f)*d+c,a=db(f)*h+u),_lt(c,u,d,h,f,m,v,Jh,ef),t=ub(m)*d+c,r=db(m)*h+u;break;case li.R:i=t=e[o++],a=r=e[o++];var y=e[o++],w=e[o++];Fse(i,a,i+y,a+w,Jh,ef);break;case li.Z:t=i,r=a;break}Fv(Qh,Qh,Jh),$v(pv,pv,ef)}return o===0&&(Qh[0]=Qh[1]=pv[0]=pv[1]=0),new pn(Qh[0],Qh[1],pv[0]-Qh[0],pv[1]-Qh[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,i=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,d=0,h=0;h<t;){var f=e[h++],m=h===1;m&&(a=e[h],o=e[h+1],s=a,l=o);var v=-1;switch(f){case li.M:a=s=e[h++],o=l=e[h++];break;case li.L:{var y=e[h++],w=e[h++],_=y-a,S=w-o;(Wp(_)>r||Wp(S)>i||h===t-1)&&(v=Math.sqrt(_*_+S*S),a=y,o=w);break}case li.C:{var A=e[h++],C=e[h++],y=e[h++],w=e[h++],D=e[h++],M=e[h++];v=Uot(a,o,A,C,y,w,D,M,10),a=D,o=M;break}case li.Q:{var A=e[h++],C=e[h++],y=e[h++],w=e[h++];v=zot(a,o,A,C,y,w,10),a=y,o=w;break}case li.A:var P=e[h++],O=e[h++],j=e[h++],L=e[h++],B=e[h++],$=e[h++],Y=$+B;h+=1,m&&(s=ub(B)*j+P,l=db(B)*L+O),v=XU(j,L)*KU(Ev,Math.abs($)),a=ub(Y)*j+P,o=db(Y)*L+O;break;case li.R:{s=a=e[h++],l=o=e[h++];var q=e[h++],W=e[h++];v=q*2+W*2;break}case li.Z:{var _=s-a,S=l-o;v=Math.sqrt(_*_+S*S),a=s,o=l;break}}v>=0&&(c[d++]=v,u+=v)}return this._pathLen=u,u},n.prototype.rebuildPath=function(e,t){var r=this.data,i=this._ux,a=this._uy,o=this._len,s,l,c,u,d,h,f=t<1,m,v,y=0,w=0,_,S=0,A,C;if(!(f&&(this._pathSegLen||this._calculateLength(),m=this._pathSegLen,v=this._pathLen,_=t*v,!_)))e:for(var D=0;D<o;){var M=r[D++],P=D===1;switch(P&&(c=r[D],u=r[D+1],s=c,l=u),M!==li.L&&S>0&&(e.lineTo(A,C),S=0),M){case li.M:s=c=r[D++],l=u=r[D++],e.moveTo(c,u);break;case li.L:{d=r[D++],h=r[D++];var O=Wp(d-c),j=Wp(h-u);if(O>i||j>a){if(f){var L=m[w++];if(y+L>_){var B=(_-y)/L;e.lineTo(c*(1-B)+d*B,u*(1-B)+h*B);break e}y+=L}e.lineTo(d,h),c=d,u=h,S=0}else{var $=O*O+j*j;$>S&&(A=d,C=h,S=$)}break}case li.C:{var Y=r[D++],q=r[D++],W=r[D++],X=r[D++],te=r[D++],re=r[D++];if(f){var L=m[w++];if(y+L>_){var B=(_-y)/L;hy(c,Y,W,te,B,lb),hy(u,q,X,re,B,cb),e.bezierCurveTo(lb[1],cb[1],lb[2],cb[2],lb[3],cb[3]);break e}y+=L}e.bezierCurveTo(Y,q,W,X,te,re),c=te,u=re;break}case li.Q:{var Y=r[D++],q=r[D++],W=r[D++],X=r[D++];if(f){var L=m[w++];if(y+L>_){var B=(_-y)/L;Wk(c,Y,W,B,lb),Wk(u,q,X,B,cb),e.quadraticCurveTo(lb[1],cb[1],lb[2],cb[2]);break e}y+=L}e.quadraticCurveTo(Y,q,W,X),c=W,u=X;break}case li.A:var z=r[D++],oe=r[D++],le=r[D++],ee=r[D++],be=r[D++],he=r[D++],pe=r[D++],ct=!r[D++],Be=le>ee?le:ee,Se=Wp(le-ee)>.001,_e=be+he,me=!1;if(f){var L=m[w++];y+L>_&&(_e=be+he*(_-y)/L,me=!0),y+=L}if(Se&&e.ellipse?e.ellipse(z,oe,le,ee,pe,be,_e,ct):e.arc(z,oe,Be,be,_e,ct),me)break e;P&&(s=ub(be)*le+z,l=db(be)*ee+oe),c=ub(_e)*le+z,u=db(_e)*ee+oe;break;case li.R:s=c=r[D],l=u=r[D+1],d=r[D++],h=r[D++];var fe=r[D++],Ge=r[D++];if(f){var L=m[w++];if(y+L>_){var Ve=_-y;e.moveTo(d,h),e.lineTo(d+KU(Ve,fe),h),Ve-=fe,Ve>0&&e.lineTo(d+fe,h+KU(Ve,Ge)),Ve-=Ge,Ve>0&&e.lineTo(d+XU(fe-Ve,0),h+Ge),Ve-=fe,Ve>0&&e.lineTo(d,h+XU(Ge-Ve,0));break e}y+=L}e.rect(d,h,fe,Ge);break;case li.Z:if(f){var L=m[w++];if(y+L>_){var B=(_-y)/L;e.lineTo(c*(1-B)+s*B,u*(1-B)+l*B);break e}y+=L}e.closePath(),c=s,u=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=li,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();function kv(n,e,t,r,i,a,o){if(i===0)return!1;var s=i,l=0,c=n;if(o>e+s&&o>r+s||o<e-s&&o<r-s||a>n+s&&a>t+s||a<n-s&&a<t-s)return!1;if(n!==t)l=(e-r)/(n-t),c=(n*r-t*e)/(n-t);else return Math.abs(a-n)<=s/2;var u=l*a-o+c,d=u*u/(l*l+1);return d<=s/2*s/2}function xlt(n,e,t,r,i,a,o,s,l,c,u){if(l===0)return!1;var d=l;if(u>e+d&&u>r+d&&u>a+d&&u>s+d||u<e-d&&u<r-d&&u<a-d&&u<s-d||c>n+d&&c>t+d&&c>i+d&&c>o+d||c<n-d&&c<t-d&&c<i-d&&c<o-d)return!1;var h=TSe(n,e,t,r,i,a,o,s,c,u,null);return h<=d/2}function a1e(n,e,t,r,i,a,o,s,l){if(o===0)return!1;var c=o;if(l>e+c&&l>r+c&&l>a+c||l<e-c&&l<r-c&&l<a-c||s>n+c&&s>t+c&&s>i+c||s<n-c&&s<t-c&&s<i-c)return!1;var u=ASe(n,e,t,r,i,a,s,l,null);return u<=c/2}var Use=Math.PI*2;function zc(n){return n%=Use,n<0&&(n+=Use),n}var XA=Math.PI*2;function Slt(n,e,t,r,i,a,o,s,l){if(o===0)return!1;var c=o;s-=n,l-=e;var u=Math.sqrt(s*s+l*l);if(u-c>t||u+c<t)return!1;if(Math.abs(r-i)%XA<1e-4)return!0;if(a){var d=r;r=zc(i),i=zc(d)}else r=zc(r),i=zc(i);r>i&&(i+=XA);var h=Math.atan2(l,s);return h<0&&(h+=XA),h>=r&&h<=i||h+XA>=r&&h+XA<=i}function Jp(n,e,t,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var o=(a-e)/(r-e),s=r<e?1:-1;(o===1||o===0)&&(s=r<e?.5:-.5);var l=o*(t-n)+n;return l===i?1/0:l>i?s:0}var gv=Ff.CMD,hb=Math.PI*2,Tlt=1e-4;function Elt(n,e){return Math.abs(n-e)<Tlt}var pl=[-1,-1,-1],Ru=[-1,-1];function Alt(){var n=Ru[0];Ru[0]=Ru[1],Ru[1]=n}function Clt(n,e,t,r,i,a,o,s,l,c){if(c>e&&c>r&&c>a&&c>s||c<e&&c<r&&c<a&&c<s)return 0;var u=LN(e,r,a,s,c,pl);if(u===0)return 0;for(var d=0,h=-1,f=void 0,m=void 0,v=0;v<u;v++){var y=pl[v],w=y===0||y===1?.5:1,_=mo(n,t,i,o,y);_<l||(h<0&&(h=SSe(e,r,a,s,Ru),Ru[1]<Ru[0]&&h>1&&Alt(),f=mo(e,r,a,s,Ru[0]),h>1&&(m=mo(e,r,a,s,Ru[1]))),h===2?y<Ru[0]?d+=f<e?w:-w:y<Ru[1]?d+=m<f?w:-w:d+=s<m?w:-w:y<Ru[0]?d+=f<e?w:-w:d+=s<f?w:-w)}return d}function Dlt(n,e,t,r,i,a,o,s){if(s>e&&s>r&&s>a||s<e&&s<r&&s<a)return 0;var l=Vot(e,r,a,s,pl);if(l===0)return 0;var c=ESe(e,r,a);if(c>=0&&c<=1){for(var u=0,d=Vo(e,r,a,c),h=0;h<l;h++){var f=pl[h]===0||pl[h]===1?.5:1,m=Vo(n,t,i,pl[h]);m<o||(pl[h]<c?u+=d<e?f:-f:u+=a<d?f:-f)}return u}else{var f=pl[0]===0||pl[0]===1?.5:1,m=Vo(n,t,i,pl[0]);return m<o?0:a<e?f:-f}}function klt(n,e,t,r,i,a,o,s){if(s-=e,s>t||s<-t)return 0;var l=Math.sqrt(t*t-s*s);pl[0]=-l,pl[1]=l;var c=Math.abs(r-i);if(c<1e-4)return 0;if(c>=hb-1e-4){r=0,i=hb;var u=a?1:-1;return o>=pl[0]+n&&o<=pl[1]+n?u:0}if(r>i){var d=r;r=i,i=d}r<0&&(r+=hb,i+=hb);for(var h=0,f=0;f<2;f++){var m=pl[f];if(m+n>o){var v=Math.atan2(s,m),u=a?1:-1;v<0&&(v=hb+v),(v>=r&&v<=i||v+hb>=r&&v+hb<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(u=-u),h+=u)}}return h}function o1e(n,e,t,r,i){for(var a=n.data,o=n.len(),s=0,l=0,c=0,u=0,d=0,h,f,m=0;m<o;){var v=a[m++],y=m===1;switch(v===gv.M&&m>1&&(t||(s+=Jp(l,c,u,d,r,i))),y&&(l=a[m],c=a[m+1],u=l,d=c),v){case gv.M:u=a[m++],d=a[m++],l=u,c=d;break;case gv.L:if(t){if(kv(l,c,a[m],a[m+1],e,r,i))return!0}else s+=Jp(l,c,a[m],a[m+1],r,i)||0;l=a[m++],c=a[m++];break;case gv.C:if(t){if(xlt(l,c,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],e,r,i))return!0}else s+=Clt(l,c,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],r,i)||0;l=a[m++],c=a[m++];break;case gv.Q:if(t){if(a1e(l,c,a[m++],a[m++],a[m],a[m+1],e,r,i))return!0}else s+=Dlt(l,c,a[m++],a[m++],a[m],a[m+1],r,i)||0;l=a[m++],c=a[m++];break;case gv.A:var w=a[m++],_=a[m++],S=a[m++],A=a[m++],C=a[m++],D=a[m++];m+=1;var M=!!(1-a[m++]);h=Math.cos(C)*S+w,f=Math.sin(C)*A+_,y?(u=h,d=f):s+=Jp(l,c,h,f,r,i);var P=(r-w)*A/S+w;if(t){if(Slt(w,_,A,C,C+D,M,e,P,i))return!0}else s+=klt(w,_,A,C,C+D,M,P,i);l=Math.cos(C+D)*S+w,c=Math.sin(C+D)*A+_;break;case gv.R:u=l=a[m++],d=c=a[m++];var O=a[m++],j=a[m++];if(h=u+O,f=d+j,t){if(kv(u,d,h,d,e,r,i)||kv(h,d,h,f,e,r,i)||kv(h,f,u,f,e,r,i)||kv(u,f,u,d,e,r,i))return!0}else s+=Jp(h,d,h,f,r,i),s+=Jp(u,f,u,d,r,i);break;case gv.Z:if(t){if(kv(l,c,u,d,e,r,i))return!0}else s+=Jp(l,c,u,d,r,i);l=u,c=d;break}}return!t&&!Elt(c,d)&&(s+=Jp(l,c,u,d,r,i)||0),s!==0}function Ilt(n,e,t){return o1e(n,0,!1,e,t)}function Mlt(n,e,t,r){return o1e(n,e,!0,t,r)}var VN=Rt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},mw),Plt={style:Rt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},x5.style)},JU=Lf.concat(["invisible","culling","z","z2","zlevel","parent"]),Mn=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){t.buildPath(l,t.shape)}),i.silent=!0;var a=i.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<JU.length;++s)i[JU[s]]=this[JU[s]];i.__dirty|=Bc}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=Vn(t);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var o=r[a],s=t[o];o==="style"?this.style?Pe(this.style,s):this.useStyle(s):o==="shape"?Pe(this.shape,s):n.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(st(t)){var r=FN(t,0);return r>.5?ZH:r>.2?mst:QH}else if(t)return QH}return ZH},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(st(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=FN(t,0)<XH;if(a===o)return r}},e.prototype.buildPath=function(t,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~IS},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new Ff(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,i=!t;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&IS)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),t=o.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){s.copy(t);var l=r.strokeNoScale?this.getLineScale():1,c=r.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(s.width+=c/l,s.height+=c/l,s.x-=c/l/2,s.y-=c/l/2)}return s}return t},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect(),o=this.style;if(t=i[0],r=i[1],a.contain(t,r)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,c=o.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),Mlt(s,l/c,t,r)))return!0}if(this.hasFill())return Ilt(s,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=IS,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):n.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var i=this.shape;return i||(i=this.shape={}),typeof t=="string"?i[t]=r:Pe(i,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&IS)},e.prototype.createStyle=function(t){return g5(VN,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=Pe({},this.shape))},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var l=!(r&&a),c;if(r&&r.shape?o?a?c=r.shape:(c=Pe({},i.shape),Pe(c,r.shape)):(c=Pe({},a?this.shape:i.shape),Pe(c,r.shape)):l&&(c=i.shape),c)if(o){this.shape=Pe({},this.shape);for(var u={},d=Vn(c),h=0;h<d.length;h++){var f=d[h];typeof c[f]=="object"?this.shape[f]=c[f]:u[f]=c[f]}this._transitionState(t,{shape:u},s)}else this.shape=c,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return Plt},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=function(a){ki(o,a);function o(s){var l=a.call(this,s)||this;return t.init&&t.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return Bt(t.style)},o.prototype.getDefaultShape=function(){return Bt(t.shape)},o}(e);for(var i in t)typeof t[i]=="function"&&(r.prototype[i]=t[i]);return r},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Bc|VC|IS}(),e}(Qu),Olt=Rt({strokeFirst:!0,font:uy,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},VN),Q1=function(n){ki(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return r!=null&&r!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return g5(Olt,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var r=t.text;r!=null?r+="":r="";var i=d2(r,t.font,t.textAlign,t.textBaseline);if(i.x+=t.x||0,i.y+=t.y||0,this.hasStroke()){var a=t.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(Qu);Q1.prototype.type="tspan";var Rlt=Rt({x:0,y:0},mw),Nlt={style:Rt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},x5.style)};function Llt(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var Yo=function(n){ki(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return g5(Rlt,t)},e.prototype._getSize=function(t){var r=this.style,i=r[t];if(i!=null)return i;var a=Llt(r.image)?r.image:this.__image;if(!a)return 0;var o=t==="width"?"height":"width",s=r[o];return s==null?a[t]:a[t]/a[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return Nlt},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new pn(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(Qu);Yo.prototype.type="image";function jlt(n,e){var t=e.x,r=e.y,i=e.width,a=e.height,o=e.r,s,l,c,u;i<0&&(t=t+i,i=-i),a<0&&(r=r+a,a=-a),typeof o=="number"?s=l=c=u=o:o instanceof Array?o.length===1?s=l=c=u=o[0]:o.length===2?(s=c=o[0],l=u=o[1]):o.length===3?(s=o[0],l=u=o[1],c=o[2]):(s=o[0],l=o[1],c=o[2],u=o[3]):s=l=c=u=0;var d;s+l>i&&(d=s+l,s*=i/d,l*=i/d),c+u>i&&(d=c+u,c*=i/d,u*=i/d),l+c>a&&(d=l+c,l*=a/d,c*=a/d),s+u>a&&(d=s+u,s*=a/d,u*=a/d),n.moveTo(t+s,r),n.lineTo(t+i-l,r),l!==0&&n.arc(t+i-l,r+l,l,-Math.PI/2,0),n.lineTo(t+i,r+a-c),c!==0&&n.arc(t+i-c,r+a-c,c,0,Math.PI/2),n.lineTo(t+u,r+a),u!==0&&n.arc(t+u,r+a-u,u,Math.PI/2,Math.PI),n.lineTo(t,r+s),s!==0&&n.arc(t+s,r+s,s,Math.PI,Math.PI*1.5)}var VS=Math.round;function s1e(n,e,t){if(e){var r=e.x1,i=e.x2,a=e.y1,o=e.y2;n.x1=r,n.x2=i,n.y1=a,n.y2=o;var s=t&&t.lineWidth;return s&&(VS(r*2)===VS(i*2)&&(n.x1=n.x2=Jb(r,s,!0)),VS(a*2)===VS(o*2)&&(n.y1=n.y2=Jb(a,s,!0))),n}}function l1e(n,e,t){if(e){var r=e.x,i=e.y,a=e.width,o=e.height;n.x=r,n.y=i,n.width=a,n.height=o;var s=t&&t.lineWidth;return s&&(n.x=Jb(r,s,!0),n.y=Jb(i,s,!0),n.width=Math.max(Jb(r+a,s,!1)-n.x,a===0?0:1),n.height=Math.max(Jb(i+o,s,!1)-n.y,o===0?0:1)),n}}function Jb(n,e,t){if(!e)return n;var r=VS(n*2);return(r+VS(e))%2===0?r/2:(r+(t?1:-1))/2}var Flt=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),$lt={},er=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Flt},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var l=l1e($lt,r,this.style);i=l.x,a=l.y,o=l.width,s=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,o=r.width,s=r.height;r.r?jlt(t,r):t.rect(i,a,o,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Mn);er.prototype.type="rect";var Vse={fill:"#000"},zse=2,Blt={style:Rt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},x5.style)},sr=function(n){ki(e,n);function e(t){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=Vse,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,zlt(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new pn(0,0,0,0),r=this._children,i=[],a=null,o=0;o<r.length;o++){var s=r[o],l=s.getBoundingRect(),c=s.getLocalTransform(i);c?(t.copy(l),t.applyTransform(c),a=a||t.clone(),a.union(t)):(a=a||l.clone(),a.union(l))}this._rect=a||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||Vse},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var i=r.rich,a=t.rich||i&&{};return Pe(t,r),i&&a?(this._mergeRich(a,i),t.rich=a):a&&(t.rich=a),t},e.prototype._mergeRich=function(t,r){for(var i=Vn(r),a=0;a<i.length;a++){var o=i[a];t[o]=t[o]||{},Pe(t[o],r[o])}},e.prototype.getAnimationStyleProps=function(){return Blt},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||uy,i=t.padding,a=Xse(t),o=ult(a,t),s=e6(t),l=!!t.backgroundColor,c=o.outerHeight,u=o.outerWidth,d=o.contentWidth,h=o.lines,f=o.lineHeight,m=this._defaultStyle;this.isTruncated=!!o.isTruncated;var v=t.x||0,y=t.y||0,w=t.align||m.align||"left",_=t.verticalAlign||m.verticalAlign||"top",S=v,A=MS(y,o.contentHeight,_);if(s||i){var C=HC(v,u,w),D=MS(y,c,_);s&&this._renderBackground(t,t,C,D,u,c)}A+=f/2,i&&(S=Kse(v,w,i),_==="top"?A+=i[0]:_==="bottom"&&(A-=i[2]));for(var M=0,P=!1,O=Yse("fill"in t?t.fill:(P=!0,m.fill)),j=Wse("stroke"in t?t.stroke:!l&&(!m.autoStroke||P)?(M=zse,m.stroke):null),L=t.textShadowBlur>0,B=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),$=o.calculatedLineHeight,Y=0;Y<h.length;Y++){var q=this._getOrCreateChild(Q1),W=q.createStyle();q.useStyle(W),W.text=h[Y],W.x=S,W.y=A,W.textAlign=w,W.textBaseline="middle",W.opacity=t.opacity,W.strokeFirst=!0,L&&(W.shadowBlur=t.textShadowBlur||0,W.shadowColor=t.textShadowColor||"transparent",W.shadowOffsetX=t.textShadowOffsetX||0,W.shadowOffsetY=t.textShadowOffsetY||0),W.stroke=j,W.fill=O,j&&(W.lineWidth=t.lineWidth||M,W.lineDash=t.lineDash,W.lineDashOffset=t.lineDashOffset||0),W.font=r,qse(W,t),A+=f,B&&q.setBoundingRect(new pn(HC(W.x,d,W.textAlign),MS(W.y,$,W.textBaseline),d,$))}},e.prototype._updateRichTexts=function(){var t=this.style,r=Xse(t),i=flt(r,t),a=i.width,o=i.outerWidth,s=i.outerHeight,l=t.padding,c=t.x||0,u=t.y||0,d=this._defaultStyle,h=t.align||d.align,f=t.verticalAlign||d.verticalAlign;this.isTruncated=!!i.isTruncated;var m=HC(c,o,h),v=MS(u,s,f),y=m,w=v;l&&(y+=l[3],w+=l[0]);var _=y+a;e6(t)&&this._renderBackground(t,t,m,v,o,s);for(var S=!!t.backgroundColor,A=0;A<i.lines.length;A++){for(var C=i.lines[A],D=C.tokens,M=D.length,P=C.lineHeight,O=C.width,j=0,L=y,B=_,$=M-1,Y=void 0;j<M&&(Y=D[j],!Y.align||Y.align==="left");)this._placeToken(Y,t,P,w,L,"left",S),O-=Y.width,L+=Y.width,j++;for(;$>=0&&(Y=D[$],Y.align==="right");)this._placeToken(Y,t,P,w,B,"right",S),O-=Y.width,B-=Y.width,$--;for(L+=(a-(L-y)-(_-B)-O)/2;j<=$;)Y=D[j],this._placeToken(Y,t,P,w,L+Y.width/2,"center",S),L+=Y.width,j++;w+=P}},e.prototype._placeToken=function(t,r,i,a,o,s,l){var c=r.rich[t.styleName]||{};c.text=t.text;var u=t.verticalAlign,d=a+i/2;u==="top"?d=a+t.height/2:u==="bottom"&&(d=a+i-t.height/2);var h=!t.isLineHolder&&e6(c);h&&this._renderBackground(c,r,s==="right"?o-t.width:s==="center"?o-t.width/2:o,d-t.height/2,t.width,t.height);var f=!!c.backgroundColor,m=t.textPadding;m&&(o=Kse(o,s,m),d-=t.height/2-m[0]-t.innerHeight/2);var v=this._getOrCreateChild(Q1),y=v.createStyle();v.useStyle(y);var w=this._defaultStyle,_=!1,S=0,A=Yse("fill"in c?c.fill:"fill"in r?r.fill:(_=!0,w.fill)),C=Wse("stroke"in c?c.stroke:"stroke"in r?r.stroke:!f&&!l&&(!w.autoStroke||_)?(S=zse,w.stroke):null),D=c.textShadowBlur>0||r.textShadowBlur>0;y.text=t.text,y.x=o,y.y=d,D&&(y.shadowBlur=c.textShadowBlur||r.textShadowBlur||0,y.shadowColor=c.textShadowColor||r.textShadowColor||"transparent",y.shadowOffsetX=c.textShadowOffsetX||r.textShadowOffsetX||0,y.shadowOffsetY=c.textShadowOffsetY||r.textShadowOffsetY||0),y.textAlign=s,y.textBaseline="middle",y.font=t.font||uy,y.opacity=Cf(c.opacity,r.opacity,1),qse(y,c),C&&(y.lineWidth=Cf(c.lineWidth,r.lineWidth,S),y.lineDash=Zt(c.lineDash,r.lineDash),y.lineDashOffset=r.lineDashOffset||0,y.stroke=C),A&&(y.fill=A);var M=t.contentWidth,P=t.contentHeight;v.setBoundingRect(new pn(HC(y.x,M,y.textAlign),MS(y.y,P,y.textBaseline),M,P))},e.prototype._renderBackground=function(t,r,i,a,o,s){var l=t.backgroundColor,c=t.borderWidth,u=t.borderColor,d=l&&l.image,h=l&&!d,f=t.borderRadius,m=this,v,y;if(h||t.lineHeight||c&&u){v=this._getOrCreateChild(er),v.useStyle(v.createStyle()),v.style.fill=null;var w=v.shape;w.x=i,w.y=a,w.width=o,w.height=s,w.r=f,v.dirtyShape()}if(h){var _=v.style;_.fill=l||null,_.fillOpacity=Zt(t.fillOpacity,1)}else if(d){y=this._getOrCreateChild(Yo),y.onload=function(){m.dirtyStyle()};var S=y.style;S.image=l.image,S.x=i,S.y=a,S.width=o,S.height=s}if(c&&u){var _=v.style;_.lineWidth=c,_.stroke=u,_.strokeOpacity=Zt(t.strokeOpacity,1),_.lineDash=t.borderDash,_.lineDashOffset=t.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var A=(v||y).style;A.shadowBlur=t.shadowBlur||0,A.shadowColor=t.shadowColor||"transparent",A.shadowOffsetX=t.shadowOffsetX||0,A.shadowOffsetY=t.shadowOffsetY||0,A.opacity=Cf(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return u1e(t)&&(r=[t.fontStyle,t.fontWeight,c1e(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&th(r)||t.textFont||t.font},e}(Qu),Ult={left:!0,right:1,center:1},Vlt={top:1,bottom:1,middle:1},Hse=["fontStyle","fontWeight","fontSize","fontFamily"];function c1e(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?yY+"px":n+"px"}function qse(n,e){for(var t=0;t<Hse.length;t++){var r=Hse[t],i=e[r];i!=null&&(n[r]=i)}}function u1e(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function zlt(n){return Gse(n),Z(n.rich,Gse),n}function Gse(n){if(n){n.font=sr.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||Ult[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||Vlt[t]?t:"top";var r=n.padding;r&&(n.padding=TY(n.padding))}}function Wse(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function Yse(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function Kse(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function Xse(n){var e=n.text;return e!=null&&(e+=""),e}function e6(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var Wt=tr(),i8=function(n,e,t,r){if(r){var i=Wt(r);i.dataIndex=t,i.dataType=e,i.seriesIndex=n,i.ssrType="chart",r.type==="group"&&r.traverse(function(a){var o=Wt(a);o.seriesIndex=n,o.dataIndex=t,o.dataType=e,o.ssrType="chart"})}},Zse=1,Qse={},d1e=tr(),jY=tr(),FY=0,f2=1,T5=2,El=["emphasis","blur","select"],Qk=["normal","emphasis","blur","select"],RT=10,Hlt=9,vw="highlight",YO="downplay",TD="select",KO="unselect",ED="toggleSelect";function Kx(n){return n!=null&&n!=="none"}function E5(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function h1e(n){E5(n,"emphasis",T5)}function f1e(n){n.hoverState===T5&&E5(n,"normal",FY)}function $Y(n){E5(n,"blur",f2)}function p1e(n){n.hoverState===f2&&E5(n,"normal",FY)}function qlt(n){n.selected=!0}function Glt(n){n.selected=!1}function Jse(n,e,t){e(n,t)}function Kg(n,e,t){Jse(n,e,t),n.isGroup&&n.traverse(function(r){Jse(r,e,t)})}function zN(n,e){switch(e){case"emphasis":n.hoverState=T5;break;case"normal":n.hoverState=FY;break;case"blur":n.hoverState=f2;break;case"select":n.selected=!0}}function Wlt(n,e,t,r){for(var i=n.style,a={},o=0;o<e.length;o++){var s=e[o],l=i[s];a[s]=l??(r&&r[s])}for(var o=0;o<n.animators.length;o++){var c=n.animators[o];c.__fromStateTransition&&c.__fromStateTransition.indexOf(t)<0&&c.targetName==="style"&&c.saveTo(a,e)}return a}function Ylt(n,e,t,r){var i=t&&_n(t,"select")>=0,a=!1;if(n instanceof Mn){var o=d1e(n),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(Kx(s)||Kx(l)){r=r||{};var c=r.style||{};c.fill==="inherit"?(a=!0,r=Pe({},r),c=Pe({},c),c.fill=s):!Kx(c.fill)&&Kx(s)?(a=!0,r=Pe({},r),c=Pe({},c),c.fill=zH(s)):!Kx(c.stroke)&&Kx(l)&&(a||(r=Pe({},r),c=Pe({},c)),c.stroke=zH(l)),r.style=c}}if(r&&r.z2==null){a||(r=Pe({},r));var u=n.z2EmphasisLift;r.z2=n.z2+(u??RT)}return r}function Klt(n,e,t){if(t&&t.z2==null){t=Pe({},t);var r=n.z2SelectLift;t.z2=n.z2+(r??Hlt)}return t}function Xlt(n,e,t){var r=_n(n.currentStates,e)>=0,i=n.style.opacity,a=r?null:Wlt(n,["opacity"],e,{opacity:1});t=t||{};var o=t.style||{};return o.opacity==null&&(t=Pe({},t),o=Pe({opacity:r?i:a.opacity*.1},o),t.style=o),t}function t6(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return Ylt(this,n,e,t);if(n==="blur")return Xlt(this,n,t);if(n==="select")return Klt(this,n,t)}return t}function Bw(n){n.stateProxy=t6;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=t6),t&&(t.stateProxy=t6)}function ele(n,e){!y1e(n,e)&&!n.__highByOuter&&Kg(n,h1e)}function tle(n,e){!y1e(n,e)&&!n.__highByOuter&&Kg(n,f1e)}function Og(n,e){n.__highByOuter|=1<<(e||0),Kg(n,h1e)}function Rg(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&Kg(n,f1e)}function g1e(n){Kg(n,$Y)}function BY(n){Kg(n,p1e)}function m1e(n){Kg(n,qlt)}function v1e(n){Kg(n,Glt)}function y1e(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function b1e(n){var e=n.getModel(),t=[],r=[];e.eachComponent(function(i,a){var o=jY(a),s=i==="series",l=s?n.getViewOfSeriesModel(a):n.getViewOfComponentModel(a);!s&&r.push(l),o.isBlured&&(l.group.traverse(function(c){p1e(c)}),s&&t.push(a)),o.isBlured=!1}),Z(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(t,!1,e)})}function a8(n,e,t,r){var i=r.getModel();t=t||"coordinateSystem";function a(c,u){for(var d=0;d<u.length;d++){var h=c.getItemGraphicEl(u[d]);h&&BY(h)}}if(n!=null&&!(!e||e==="none")){var o=i.getSeriesByIndex(n),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(c){var u=o===c,d=c.coordinateSystem;d&&d.master&&(d=d.master);var h=d&&s?d===s:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!h||e==="series"&&u)){var f=r.getViewOfSeriesModel(c);if(f.group.traverse(function(y){y.__highByOuter&&u&&e==="self"||$Y(y)}),Gs(e))a(c.getData(),e);else if(jt(e))for(var m=Vn(e),v=0;v<m.length;v++)a(c.getData(m[v]),e[m[v]]);l.push(c),jY(c).isBlured=!0}}),i.eachComponent(function(c,u){if(c!=="series"){var d=r.getViewOfComponentModel(u);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,i)}})}}function o8(n,e,t){if(!(n==null||e==null)){var r=t.getModel().getComponent(n,e);if(r){jY(r).isBlured=!0;var i=t.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){$Y(a)})}}}function Zlt(n,e,t){var r=n.seriesIndex,i=n.getData(e.dataType);if(i){var a=Fw(i,e);a=($e(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var c=Wt(o);a8(r,c.focus,c.blurScope,t)}else{var u=n.get(["emphasis","focus"]),d=n.get(["emphasis","blurScope"]);u!=null&&a8(r,u,d,t)}}}function UY(n,e,t,r){var i={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return i;var a=r.getModel().getComponent(n,e);if(!a)return i;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(t),l,c=0;c<s.length;c++)if(Wt(s[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function Qlt(n,e,t){var r=Wt(n),i=UY(r.componentMainType,r.componentIndex,r.componentHighDownName,t),a=i.dispatchers,o=i.focusSelf;a?(o&&o8(r.componentMainType,r.componentIndex,t),Z(a,function(s){return ele(s,e)})):(a8(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&o8(r.componentMainType,r.componentIndex,t),ele(n,e))}function Jlt(n,e,t){b1e(t);var r=Wt(n),i=UY(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;i?Z(i,function(a){return tle(a,e)}):tle(n,e)}function ect(n,e,t){if(l8(e)){var r=e.dataType,i=n.getData(r),a=Fw(i,e);$e(a)||(a=[a]),n[e.type===ED?"toggleSelect":e.type===TD?"select":"unselect"](a,r)}}function nle(n){var e=n.getAllData();Z(e,function(t){var r=t.data,i=t.type;r.eachItemGraphicEl(function(a,o){n.isSelected(o,i)?m1e(a):v1e(a)})})}function tct(n){var e=[];return n.eachSeries(function(t){var r=t.getAllData();Z(r,function(i){i.data;var a=i.type,o=t.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:t.seriesIndex};a!=null&&(s.dataType=a),e.push(s)}})}),e}function yw(n,e,t){ew(n,!0),Kg(n,Bw),s8(n,e,t)}function nct(n){ew(n,!1)}function na(n,e,t,r){r?nct(n):yw(n,e,t)}function s8(n,e,t){var r=Wt(n);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var rle=["emphasis","blur","select"],rct={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function gs(n,e,t,r){t=t||"itemStyle";for(var i=0;i<rle.length;i++){var a=rle[i],o=e.getModel([a,t]),s=n.ensureState(a);s.style=r?r(o):o[rct[t]]()}}function ew(n,e){var t=e===!1,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function Jk(n){return!!(n&&n.__highDownDispatcher)}function ict(n,e,t){var r=Wt(n);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=t}function act(n){var e=Qse[n];return e==null&&Zse<=32&&(e=Qse[n]=Zse++),e}function l8(n){var e=n.type;return e===TD||e===KO||e===ED}function ile(n){var e=n.type;return e===vw||e===YO}function oct(n){var e=d1e(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var Xx=Ff.CMD,sct=[[],[],[]],ale=Math.sqrt,lct=Math.atan2;function w1e(n,e){if(e){var t=n.data,r=n.len(),i,a,o,s,l,c,u=Xx.M,d=Xx.C,h=Xx.L,f=Xx.R,m=Xx.A,v=Xx.Q;for(o=0,s=0;o<r;){switch(i=t[o++],s=o,a=0,i){case u:a=1;break;case h:a=1;break;case d:a=3;break;case v:a=2;break;case m:var y=e[4],w=e[5],_=ale(e[0]*e[0]+e[1]*e[1]),S=ale(e[2]*e[2]+e[3]*e[3]),A=lct(-e[1]/S,e[0]/_);t[o]*=_,t[o++]+=y,t[o]*=S,t[o++]+=w,t[o++]*=_,t[o++]*=S,t[o++]+=A,t[o++]+=A,o+=2,s=o;break;case f:c[0]=t[o++],c[1]=t[o++],hs(c,c,e),t[s++]=c[0],t[s++]=c[1],c[0]+=t[o++],c[1]+=t[o++],hs(c,c,e),t[s++]=c[0],t[s++]=c[1]}for(l=0;l<a;l++){var C=sct[l];C[0]=t[o++],C[1]=t[o++],hs(C,C,e),t[s++]=C[0],t[s++]=C[1]}}n.increaseVersion()}}var n6=Math.sqrt,_P=Math.sin,xP=Math.cos,ZA=Math.PI;function ole(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function c8(n,e){return(n[0]*e[0]+n[1]*e[1])/(ole(n)*ole(e))}function sle(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(c8(n,e))}function lle(n,e,t,r,i,a,o,s,l,c,u){var d=l*(ZA/180),h=xP(d)*(n-t)/2+_P(d)*(e-r)/2,f=-1*_P(d)*(n-t)/2+xP(d)*(e-r)/2,m=h*h/(o*o)+f*f/(s*s);m>1&&(o*=n6(m),s*=n6(m));var v=(i===a?-1:1)*n6((o*o*(s*s)-o*o*(f*f)-s*s*(h*h))/(o*o*(f*f)+s*s*(h*h)))||0,y=v*o*f/s,w=v*-s*h/o,_=(n+t)/2+xP(d)*y-_P(d)*w,S=(e+r)/2+_P(d)*y+xP(d)*w,A=sle([1,0],[(h-y)/o,(f-w)/s]),C=[(h-y)/o,(f-w)/s],D=[(-1*h-y)/o,(-1*f-w)/s],M=sle(C,D);if(c8(C,D)<=-1&&(M=ZA),c8(C,D)>=1&&(M=0),M<0){var P=Math.round(M/ZA*1e6)/1e6;M=ZA*2+P%2*ZA}u.addData(c,_,S,o,s,A,M,d,a)}var cct=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,uct=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function dct(n){var e=new Ff;if(!n)return e;var t=0,r=0,i=t,a=r,o,s=Ff.CMD,l=n.match(cct);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],d=u.charAt(0),h=void 0,f=u.match(uct)||[],m=f.length,v=0;v<m;v++)f[v]=parseFloat(f[v]);for(var y=0;y<m;){var w=void 0,_=void 0,S=void 0,A=void 0,C=void 0,D=void 0,M=void 0,P=t,O=r,j=void 0,L=void 0;switch(d){case"l":t+=f[y++],r+=f[y++],h=s.L,e.addData(h,t,r);break;case"L":t=f[y++],r=f[y++],h=s.L,e.addData(h,t,r);break;case"m":t+=f[y++],r+=f[y++],h=s.M,e.addData(h,t,r),i=t,a=r,d="l";break;case"M":t=f[y++],r=f[y++],h=s.M,e.addData(h,t,r),i=t,a=r,d="L";break;case"h":t+=f[y++],h=s.L,e.addData(h,t,r);break;case"H":t=f[y++],h=s.L,e.addData(h,t,r);break;case"v":r+=f[y++],h=s.L,e.addData(h,t,r);break;case"V":r=f[y++],h=s.L,e.addData(h,t,r);break;case"C":h=s.C,e.addData(h,f[y++],f[y++],f[y++],f[y++],f[y++],f[y++]),t=f[y-2],r=f[y-1];break;case"c":h=s.C,e.addData(h,f[y++]+t,f[y++]+r,f[y++]+t,f[y++]+r,f[y++]+t,f[y++]+r),t+=f[y-2],r+=f[y-1];break;case"S":w=t,_=r,j=e.len(),L=e.data,o===s.C&&(w+=t-L[j-4],_+=r-L[j-3]),h=s.C,P=f[y++],O=f[y++],t=f[y++],r=f[y++],e.addData(h,w,_,P,O,t,r);break;case"s":w=t,_=r,j=e.len(),L=e.data,o===s.C&&(w+=t-L[j-4],_+=r-L[j-3]),h=s.C,P=t+f[y++],O=r+f[y++],t+=f[y++],r+=f[y++],e.addData(h,w,_,P,O,t,r);break;case"Q":P=f[y++],O=f[y++],t=f[y++],r=f[y++],h=s.Q,e.addData(h,P,O,t,r);break;case"q":P=f[y++]+t,O=f[y++]+r,t+=f[y++],r+=f[y++],h=s.Q,e.addData(h,P,O,t,r);break;case"T":w=t,_=r,j=e.len(),L=e.data,o===s.Q&&(w+=t-L[j-4],_+=r-L[j-3]),t=f[y++],r=f[y++],h=s.Q,e.addData(h,w,_,t,r);break;case"t":w=t,_=r,j=e.len(),L=e.data,o===s.Q&&(w+=t-L[j-4],_+=r-L[j-3]),t+=f[y++],r+=f[y++],h=s.Q,e.addData(h,w,_,t,r);break;case"A":S=f[y++],A=f[y++],C=f[y++],D=f[y++],M=f[y++],P=t,O=r,t=f[y++],r=f[y++],h=s.A,lle(P,O,t,r,D,M,S,A,C,h,e);break;case"a":S=f[y++],A=f[y++],C=f[y++],D=f[y++],M=f[y++],P=t,O=r,t+=f[y++],r+=f[y++],h=s.A,lle(P,O,t,r,D,M,S,A,C,h,e);break}}(d==="z"||d==="Z")&&(h=s.Z,e.addData(h),t=i,r=a),o=h}return e.toStatic(),e}var _1e=function(n){ki(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(Mn);function x1e(n){return n.setData!=null}function S1e(n,e){var t=dct(n),r=Pe({},e);return r.buildPath=function(i){if(x1e(i)){i.setData(t.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;t.rebuildPath(a,1)}},r.applyTransform=function(i){w1e(t,i),this.dirtyShape()},r}function T1e(n,e){return new _1e(S1e(n,e))}function hct(n,e){var t=S1e(n,e),r=function(i){ki(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=t.applyTransform,s.buildPath=t.buildPath,s}return a}(_1e);return r}function fct(n,e){for(var t=[],r=n.length,i=0;i<r;i++){var a=n[i];t.push(a.getUpdatedPathProxy(!0))}var o=new Mn(e);return o.createPathProxy(),o.buildPath=function(s){if(x1e(s)){s.appendPath(t);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function VY(n,e){e=e||{};var t=new Mn;return n.shape&&t.setShape(n.shape),t.setStyle(n.style),e.bakeTransform?w1e(t.path,n.getComputedTransform()):e.toLocal?t.setLocalTransform(n.getComputedTransform()):t.copyTransform(n),t.buildPath=n.buildPath,t.applyTransform=t.applyTransform,t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel,t}var pct=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),Xg=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new pct},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(Mn);Xg.prototype.type="circle";var gct=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),A5=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new gct},e.prototype.buildPath=function(t,r){var i=.5522848,a=r.cx,o=r.cy,s=r.rx,l=r.ry,c=s*i,u=l*i;t.moveTo(a-s,o),t.bezierCurveTo(a-s,o-u,a-c,o-l,a,o-l),t.bezierCurveTo(a+c,o-l,a+s,o-u,a+s,o),t.bezierCurveTo(a+s,o+u,a+c,o+l,a,o+l),t.bezierCurveTo(a-c,o+l,a-s,o+u,a-s,o),t.closePath()},e}(Mn);A5.prototype.type="ellipse";var E1e=Math.PI,r6=E1e*2,fb=Math.sin,Zx=Math.cos,mct=Math.acos,Os=Math.atan2,cle=Math.abs,AD=Math.sqrt,qC=Math.max,tf=Math.min,$d=1e-4;function vct(n,e,t,r,i,a,o,s){var l=t-n,c=r-e,u=o-i,d=s-a,h=d*l-u*c;if(!(h*h<$d))return h=(u*(e-a)-d*(n-i))/h,[n+h*l,e+h*c]}function SP(n,e,t,r,i,a,o){var s=n-t,l=e-r,c=(o?a:-a)/AD(s*s+l*l),u=c*l,d=-c*s,h=n+u,f=e+d,m=t+u,v=r+d,y=(h+m)/2,w=(f+v)/2,_=m-h,S=v-f,A=_*_+S*S,C=i-a,D=h*v-m*f,M=(S<0?-1:1)*AD(qC(0,C*C*A-D*D)),P=(D*S-_*M)/A,O=(-D*_-S*M)/A,j=(D*S+_*M)/A,L=(-D*_+S*M)/A,B=P-y,$=O-w,Y=j-y,q=L-w;return B*B+$*$>Y*Y+q*q&&(P=j,O=L),{cx:P,cy:O,x0:-u,y0:-d,x1:P*(i/C-1),y1:O*(i/C-1)}}function yct(n){var e;if($e(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function bct(n,e){var t,r=qC(e.r,0),i=qC(e.r0||0,0),a=r>0,o=i>0;if(!(!a&&!o)){if(a||(r=i,i=0),i>r){var s=r;r=i,i=s}var l=e.startAngle,c=e.endAngle;if(!(isNaN(l)||isNaN(c))){var u=e.cx,d=e.cy,h=!!e.clockwise,f=cle(c-l),m=f>r6&&f%r6;if(m>$d&&(f=m),!(r>$d))n.moveTo(u,d);else if(f>r6-$d)n.moveTo(u+r*Zx(l),d+r*fb(l)),n.arc(u,d,r,l,c,!h),i>$d&&(n.moveTo(u+i*Zx(c),d+i*fb(c)),n.arc(u,d,i,c,l,h));else{var v=void 0,y=void 0,w=void 0,_=void 0,S=void 0,A=void 0,C=void 0,D=void 0,M=void 0,P=void 0,O=void 0,j=void 0,L=void 0,B=void 0,$=void 0,Y=void 0,q=r*Zx(l),W=r*fb(l),X=i*Zx(c),te=i*fb(c),re=f>$d;if(re){var z=e.cornerRadius;z&&(t=yct(z),v=t[0],y=t[1],w=t[2],_=t[3]);var oe=cle(r-i)/2;if(S=tf(oe,w),A=tf(oe,_),C=tf(oe,v),D=tf(oe,y),O=M=qC(S,A),j=P=qC(C,D),(M>$d||P>$d)&&(L=r*Zx(c),B=r*fb(c),$=i*Zx(l),Y=i*fb(l),f<E1e)){var le=vct(q,W,$,Y,L,B,X,te);if(le){var ee=q-le[0],be=W-le[1],he=L-le[0],pe=B-le[1],ct=1/fb(mct((ee*he+be*pe)/(AD(ee*ee+be*be)*AD(he*he+pe*pe)))/2),Be=AD(le[0]*le[0]+le[1]*le[1]);O=tf(M,(r-Be)/(ct+1)),j=tf(P,(i-Be)/(ct-1))}}}if(!re)n.moveTo(u+q,d+W);else if(O>$d){var Se=tf(w,O),_e=tf(_,O),me=SP($,Y,q,W,r,Se,h),fe=SP(L,B,X,te,r,_e,h);n.moveTo(u+me.cx+me.x0,d+me.cy+me.y0),O<M&&Se===_e?n.arc(u+me.cx,d+me.cy,O,Os(me.y0,me.x0),Os(fe.y0,fe.x0),!h):(Se>0&&n.arc(u+me.cx,d+me.cy,Se,Os(me.y0,me.x0),Os(me.y1,me.x1),!h),n.arc(u,d,r,Os(me.cy+me.y1,me.cx+me.x1),Os(fe.cy+fe.y1,fe.cx+fe.x1),!h),_e>0&&n.arc(u+fe.cx,d+fe.cy,_e,Os(fe.y1,fe.x1),Os(fe.y0,fe.x0),!h))}else n.moveTo(u+q,d+W),n.arc(u,d,r,l,c,!h);if(!(i>$d)||!re)n.lineTo(u+X,d+te);else if(j>$d){var Se=tf(v,j),_e=tf(y,j),me=SP(X,te,L,B,i,-_e,h),fe=SP(q,W,$,Y,i,-Se,h);n.lineTo(u+me.cx+me.x0,d+me.cy+me.y0),j<P&&Se===_e?n.arc(u+me.cx,d+me.cy,j,Os(me.y0,me.x0),Os(fe.y0,fe.x0),!h):(_e>0&&n.arc(u+me.cx,d+me.cy,_e,Os(me.y0,me.x0),Os(me.y1,me.x1),!h),n.arc(u,d,i,Os(me.cy+me.y1,me.cx+me.x1),Os(fe.cy+fe.y1,fe.cx+fe.x1),h),Se>0&&n.arc(u+fe.cx,d+fe.cy,Se,Os(fe.y1,fe.x1),Os(fe.y0,fe.x0),!h))}else n.lineTo(u+X,d+te),n.arc(u,d,i,c,l,h)}n.closePath()}}}var wct=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),Al=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new wct},e.prototype.buildPath=function(t,r){bct(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Mn);Al.prototype.type="sector";var _ct=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),p2=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new _ct},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.PI*2;t.moveTo(i+r.r,a),t.arc(i,a,r.r,0,o,!1),t.moveTo(i+r.r0,a),t.arc(i,a,r.r0,0,o,!0)},e}(Mn);p2.prototype.type="ring";function xct(n,e,t,r){var i=[],a=[],o=[],s=[],l,c,u,d;if(r){u=[1/0,1/0],d=[-1/0,-1/0];for(var h=0,f=n.length;h<f;h++)Fv(u,u,n[h]),$v(d,d,n[h]);Fv(u,u,r[0]),$v(d,d,r[1])}for(var h=0,f=n.length;h<f;h++){var m=n[h];if(t)l=n[h?h-1:f-1],c=n[(h+1)%f];else if(h===0||h===f-1){i.push(vg(n[h]));continue}else l=n[h-1],c=n[h+1];Qb(a,c,l),UO(a,a,e);var v=RH(m,l),y=RH(m,c),w=v+y;w!==0&&(v/=w,y/=w),UO(o,a,-v),UO(s,a,y);var _=nse([],m,o),S=nse([],m,s);r&&($v(_,_,u),Fv(_,_,d),$v(S,S,u),Fv(S,S,d)),i.push(_),i.push(S)}return t&&i.push(i.shift()),i}function A1e(n,e,t){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=xct(i,r,t,e.smoothConstraint);n.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(t?o:o-1);s++){var l=a[s*2],c=a[s*2+1],u=i[(s+1)%o];n.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{n.moveTo(i[0][0],i[0][1]);for(var s=1,d=i.length;s<d;s++)n.lineTo(i[s][0],i[s][1])}t&&n.closePath()}}var Sct=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),Cl=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Sct},e.prototype.buildPath=function(t,r){A1e(t,r,!0)},e}(Mn);Cl.prototype.type="polygon";var Tct=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),Dl=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Tct},e.prototype.buildPath=function(t,r){A1e(t,r,!1)},e}(Mn);Dl.prototype.type="polyline";var Ect={},Act=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),bo=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Act},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var l=s1e(Ect,r,this.style);i=l.x1,a=l.y1,o=l.x2,s=l.y2}else i=r.x1,a=r.y1,o=r.x2,s=r.y2;var c=r.percent;c!==0&&(t.moveTo(i,a),c<1&&(o=i*(1-c)+o*c,s=a*(1-c)+s*c),t.lineTo(o,s))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e}(Mn);bo.prototype.type="line";var Ul=[],Cct=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function ule(n,e,t){var r=n.cpx2,i=n.cpy2;return r!=null||i!=null?[(t?pse:mo)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?pse:mo)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?$H:Vo)(n.x1,n.cpx1,n.x2,e),(t?$H:Vo)(n.y1,n.cpy1,n.y2,e)]}var g2=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Cct},e.prototype.buildPath=function(t,r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.cpx1,c=r.cpy1,u=r.cpx2,d=r.cpy2,h=r.percent;h!==0&&(t.moveTo(i,a),u==null||d==null?(h<1&&(Wk(i,l,o,h,Ul),l=Ul[1],o=Ul[2],Wk(a,c,s,h,Ul),c=Ul[1],s=Ul[2]),t.quadraticCurveTo(l,c,o,s)):(h<1&&(hy(i,l,u,o,h,Ul),l=Ul[1],u=Ul[2],o=Ul[3],hy(a,c,d,s,h,Ul),c=Ul[1],d=Ul[2],s=Ul[3]),t.bezierCurveTo(l,c,u,d,o,s)))},e.prototype.pointAt=function(t){return ule(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=ule(this.shape,t,!0);return MT(r,r)},e}(Mn);g2.prototype.type="bezier-curve";var Dct=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),C5=function(n){ki(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Dct},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,c=r.clockwise,u=Math.cos(s),d=Math.sin(s);t.moveTo(u*o+i,d*o+a),t.arc(i,a,o,s,l,!c)},e}(Mn);C5.prototype.type="arc";var zY=function(n){ki(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),i=0;i<t.length;i++)r=r||t[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(r[0],r[1],t[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(t,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Mn.prototype.getBoundingRect.call(this)},e}(Mn),C1e=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}(),m2=function(n){ki(e,n);function e(t,r,i,a,o,s){var l=n.call(this,o)||this;return l.x=t??0,l.y=r??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return e}(C1e),D1e=function(n){ki(e,n);function e(t,r,i,a,o){var s=n.call(this,a)||this;return s.x=t??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return e}(C1e),pb=[0,0],gb=[0,0],TP=new ln,EP=new ln,HN=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new ln;for(var r=0;r<2;r++)this._axes[r]=new ln;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var r=this._corners,i=this._axes,a=e.x,o=e.y,s=a+e.width,l=o+e.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,l),r[3].set(a,l),t)for(var c=0;c<4;c++)r[c].transform(t);ln.sub(i[0],r[1],r[0]),ln.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var c=0;c<2;c++)this._origin[c]=i[c].dot(r[0])},n.prototype.intersect=function(e,t){var r=!0,i=!t;return TP.set(1/0,1/0),EP.set(0,0),!this._intersectCheckOneSide(this,e,TP,EP,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,TP,EP,i,-1)&&(r=!1,i)||i||ln.copy(t,r?TP:EP),r},n.prototype._intersectCheckOneSide=function(e,t,r,i,a,o){for(var s=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,pb),this._getProjMinMaxOnAxis(l,t._corners,gb),pb[1]<gb[0]||pb[0]>gb[1]){if(s=!1,a)return s;var u=Math.abs(gb[0]-pb[1]),d=Math.abs(pb[0]-gb[1]);Math.min(u,d)>i.len()&&(u<d?ln.scale(i,c,-u*o):ln.scale(i,c,d*o))}else if(r){var u=Math.abs(gb[0]-pb[1]),d=Math.abs(pb[0]-gb[1]);Math.min(u,d)<r.len()&&(u<d?ln.scale(r,c,u*o):ln.scale(r,c,-d*o))}}return s},n.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var i=this._axes[e],a=this._origin,o=t[0].dot(i)+a[e],s=o,l=o,c=1;c<t.length;c++){var u=t[c].dot(i)+a[e];s=Math.min(u,s),l=Math.max(u,l)}r[0]=s,r[1]=l},n}(),kct=[],Ict=function(n){ki(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new pn(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(kct)),t.union(a)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(t,r))return!0}return!1},e}(Qu),k1e=tr();function NT(n,e,t,r,i){var a;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();a=o&&o.animation}var s=e&&e.isAnimationEnabled(),l=n==="update";if(s){var c=void 0,u=void 0,d=void 0;r?(c=Zt(r.duration,200),u=Zt(r.easing,"cubicOut"),d=0):(c=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),d=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(c=a.duration),a.easing!=null&&(u=a.easing),a.delay!=null&&(d=a.delay)),kt(d)&&(d=d(t,i)),kt(c)&&(c=c(t));var h={duration:c||0,delay:d,easing:u};return h}else return null}function HY(n,e,t,r,i,a,o){var s=!1,l;kt(i)?(o=a,a=i,i=null):jt(i)&&(a=i.cb,o=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var c=n==="leave";c||e.stopAnimation("leave");var u=NT(n,r,i,c?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(u&&u.duration>0){var d=u.duration,h=u.delay,f=u.easing,m={duration:d,delay:h||0,easing:f,done:a,force:!!a||!!o,setToFinal:!c,scope:n,during:o};s?e.animateFrom(t,m):e.animateTo(t,m)}else e.stopAnimation(),!s&&e.attr(t),o&&o(1),a&&a()}function fr(n,e,t,r,i,a){HY("update",n,e,t,r,i,a)}function Ni(n,e,t,r,i,a){HY("enter",n,e,t,r,i,a)}function c1(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function fy(n,e,t,r,i,a){c1(n)||HY("leave",n,e,t,r,i,a)}function dle(n,e,t,r){n.removeTextContent(),n.removeTextGuideLine(),fy(n,{style:{opacity:0}},e,t,r)}function eI(n,e,t){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(i){i.isGroup||dle(i,e,t,r)}):dle(n,e,t,r)}function uh(n){k1e(n).oldStyle=n.style}function Mct(n){return k1e(n).oldStyle}var qN=Math.max,GN=Math.min,u8={};function Pct(n){return Mn.extend(n)}var Oct=hct;function Rct(n,e){return Oct(n,e)}function hh(n,e){u8[n]=e}function qY(n){if(u8.hasOwnProperty(n))return u8[n]}function D5(n,e,t,r){var i=T1e(n,e);return t&&(r==="center"&&(t=M1e(t,i.getBoundingRect())),P1e(i,t)),i}function I1e(n,e,t){var r=new Yo({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(t==="center"){var a={width:i.width,height:i.height};r.setStyle(M1e(e,a))}}});return r}function M1e(n,e){var t=e.width/e.height,r=n.height*t,i;r<=n.width?i=n.height:(r=n.width,i=r/t);var a=n.x+n.width/2,o=n.y+n.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var Bu=fct;function P1e(n,e){if(n.applyTransform){var t=n.getBoundingRect(),r=t.calculateTransform(e);n.applyTransform(r)}}function J1(n,e){return s1e(n,n,{lineWidth:e}),n}function Nct(n){return l1e(n.shape,n.shape,n.style),n}var XO=Jb;function bw(n,e){for(var t=m5([]);n&&n!==e;)yg(t,n.getLocalTransform(),t),n=n.parent;return t}function ah(n,e,t){return e&&!Gs(e)&&(e=sg.getLocalTransform(e)),t&&(e=PT([],e)),hs([],n,e)}function k5(n,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[n==="left"?-r:n==="right"?r:0,n==="top"?-i:n==="bottom"?i:0];return a=ah(a,e,t),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function hle(n){return!n.isGroup}function Lct(n){return n.shape!=null}function v2(n,e,t){if(!n||!e)return;function r(o){var s={};return o.traverse(function(l){hle(l)&&l.anid&&(s[l.anid]=l)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return Lct(o)&&(s.shape=Pe({},o.shape)),s}var a=r(n);e.traverse(function(o){if(hle(o)&&o.anid){var s=a[o.anid];if(s){var l=i(o);o.attr(i(s)),fr(o,l,t,Wt(o).dataIndex)}}})}function O1e(n,e){return Ue(n,function(t){var r=t[0];r=qN(r,e.x),r=GN(r,e.x+e.width);var i=t[1];return i=qN(i,e.y),i=GN(i,e.y+e.height),[r,i]})}function jct(n,e){var t=qN(n.x,e.x),r=GN(n.x+n.width,e.x+e.width),i=qN(n.y,e.y),a=GN(n.y+n.height,e.y+e.height);if(r>=t&&a>=i)return{x:t,y:i,width:r-t,height:a-i}}function y2(n,e,t){var r=Pe({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(i.image=n.slice(8),Rt(i,t),new Yo(r)):D5(n.replace("path://",""),r,t,"center")}function GC(n,e,t,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(R1e(n,e,t,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function R1e(n,e,t,r,i,a,o,s){var l=t-n,c=r-e,u=o-i,d=s-a,h=i6(u,d,l,c);if(Fct(h))return!1;var f=n-i,m=e-a,v=i6(f,m,l,c)/h;if(v<0||v>1)return!1;var y=i6(f,m,u,d)/h;return!(y<0||y>1)}function i6(n,e,t,r){return n*r-t*e}function Fct(n){return n<=1e-6&&n>=-1e-6}function e_(n){var e=n.itemTooltipOption,t=n.componentModel,r=n.itemName,i=st(e)?{formatter:e}:e,a=t.mainType,o=t.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var l=n.formatterParamsExtra;l&&Z(Vn(l),function(u){ft(s,u)||(s[u]=l[u],s.$vars.push(u))});var c=Wt(n.el);c.componentMainType=a,c.componentIndex=o,c.tooltipConfig={name:r,option:Rt({content:r,encodeHTMLContent:!0,formatterParams:s},i)}}function fle(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function Iy(n,e){if(n)if($e(n))for(var t=0;t<n.length;t++)fle(n[t],e);else fle(n,e)}hh("circle",Xg);hh("ellipse",A5);hh("sector",Al);hh("ring",p2);hh("polygon",Cl);hh("polyline",Dl);hh("rect",er);hh("line",bo);hh("bezierCurve",g2);hh("arc",C5);const t_=Object.freeze(Object.defineProperty({__proto__:null,Arc:C5,BezierCurve:g2,BoundingRect:pn,Circle:Xg,CompoundPath:zY,Ellipse:A5,Group:zt,Image:Yo,IncrementalDisplayable:Ict,Line:bo,LinearGradient:m2,OrientedBoundingRect:HN,Path:Mn,Point:ln,Polygon:Cl,Polyline:Dl,RadialGradient:D1e,Rect:er,Ring:p2,Sector:Al,Text:sr,applyTransform:ah,clipPointsByRect:O1e,clipRectByRect:jct,createIcon:y2,extendPath:Rct,extendShape:Pct,getShapeClass:qY,getTransform:bw,groupTransition:v2,initProps:Ni,isElementRemoved:c1,lineLineIntersect:R1e,linePolygonIntersect:GC,makeImage:I1e,makePath:D5,mergePath:Bu,registerShape:hh,removeElement:fy,removeElementWithFadeOut:eI,resizePath:P1e,setTooltipConfig:e_,subPixelOptimize:XO,subPixelOptimizeLine:J1,subPixelOptimizeRect:Nct,transformDirection:k5,traverseElements:Iy,updateProps:fr},Symbol.toStringTag,{value:"Module"}));var I5={};function N1e(n,e){for(var t=0;t<El.length;t++){var r=El[t],i=e[r],a=n.ensureState(r);a.style=a.style||{},a.style.text=i}var o=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(o,!0)}function d8(n,e,t){var r=n.labelFetcher,i=n.labelDataIndex,a=n.labelDimIndex,o=e.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),t!=null?{interpolatedValue:t}:null)),s==null&&(s=kt(n.defaultText)?n.defaultText(i,n,t):n.defaultText);for(var l={normal:s},c=0;c<El.length;c++){var u=El[c],d=e[u];l[u]=Zt(r?r.getFormattedLabel(i,u,null,a,d&&d.get("formatter")):null,s)}return l}function ms(n,e,t,r){t=t||I5;for(var i=n instanceof sr,a=!1,o=0;o<Qk.length;o++){var s=e[Qk[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=i?n:n.getTextContent();if(a){i||(l||(l=new sr,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var c=d8(t,e),u=e.normal,d=!!u.getShallow("show"),h=vi(u,r&&r.normal,t,!1,!i);h.text=c.normal,i||n.setTextConfig(WN(u,t,!1));for(var o=0;o<El.length;o++){var f=El[o],s=e[f];if(s){var m=l.ensureState(f),v=!!Zt(s.getShallow("show"),d);if(v!==d&&(m.ignore=!v),m.style=vi(s,r&&r[f],t,!0,!i),m.style.text=c[f],!i){var y=n.ensureState(f);y.textConfig=WN(s,t,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!d,l.useStyle(h),l.dirty(),t.enableTextSetter&&(LT(l).setLabelText=function(w){var _=d8(t,e,w);N1e(l,_)})}else l&&(l.ignore=!0);n.dirty()}function So(n,e){e=e||"label";for(var t={normal:n.getModel(e)},r=0;r<El.length;r++){var i=El[r];t[i]=n.getModel([i,e])}return t}function vi(n,e,t,r,i){var a={};return $ct(a,n,t,r,i),e&&Pe(a,e),a}function WN(n,e,t){e=e||{};var r={},i,a=n.getShallow("rotate"),o=Zt(n.getShallow("distance"),t?null:5),s=n.getShallow("offset");return i=n.getShallow("position")||(t?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",r}function $ct(n,e,t,r,i){t=t||I5;var a=e.ecModel,o=a&&a.option.textStyle,s=Bct(e),l;if(s){l={};for(var c in s)if(s.hasOwnProperty(c)){var u=e.getModel(["rich",c]);vle(l[c]={},u,o,t,r,i,!1,!0)}}l&&(n.rich=l);var d=e.get("overflow");d&&(n.overflow=d);var h=e.get("minMargin");h!=null&&(n.margin=h),vle(n,e,o,t,r,i,!0,!1)}function Bct(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||I5).rich;if(t){e=e||{};for(var r=Vn(t),i=0;i<r.length;i++){var a=r[i];e[a]=1}}n=n.parentModel}return e}var ple=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],gle=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],mle=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function vle(n,e,t,r,i,a,o,s){t=!i&&t||I5;var l=r&&r.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),d=Zt(e.getShallow("opacity"),t.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),a||(c=c||t.color,u=u||t.textBorderColor),c!=null&&(n.fill=c),u!=null&&(n.stroke=u);var h=Zt(e.getShallow("textBorderWidth"),t.textBorderWidth);h!=null&&(n.lineWidth=h);var f=Zt(e.getShallow("textBorderType"),t.textBorderType);f!=null&&(n.lineDash=f);var m=Zt(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);m!=null&&(n.lineDashOffset=m),!i&&d==null&&!s&&(d=r&&r.defaultOpacity),d!=null&&(n.opacity=d),!i&&!a&&n.fill==null&&r.inheritColor&&(n.fill=r.inheritColor);for(var v=0;v<ple.length;v++){var y=ple[v],w=Zt(e.getShallow(y),t[y]);w!=null&&(n[y]=w)}for(var v=0;v<gle.length;v++){var y=gle[v],w=e.getShallow(y);w!=null&&(n[y]=w)}if(n.verticalAlign==null){var _=e.getShallow("baseline");_!=null&&(n.verticalAlign=_)}if(!o||!r.disableBox){for(var v=0;v<mle.length;v++){var y=mle[v],w=e.getShallow(y);w!=null&&(n[y]=w)}var S=e.getShallow("borderType");S!=null&&(n.borderDash=S),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function GY(n,e){var t=e&&e.getModel("textStyle");return th([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var LT=tr();function L1e(n,e,t,r){if(n){var i=LT(n);i.prevValue=i.value,i.value=t;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=e)}}function j1e(n,e,t,r,i){var a=LT(n);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Zt(a.interpolatedValue,a.prevValue),l=a.value;function c(u){var d=JSe(t,a.precision,s,l,u);a.interpolatedValue=u===1?null:d;var h=d8({labelDataIndex:e,labelFetcher:i,defaultText:o?o(d):d+""},a.statesModels,d);N1e(n,h)}n.percent=0,(a.prevValue==null?Ni:fr)(n,{percent:1},r,e,null,c)}var Uct=["textStyle","color"],a6=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],o6=new sr,Vct=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Uct):null)},n.prototype.getFont=function(){return GY({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<a6.length;r++)t[a6[r]]=this.getShallow(a6[r]);return o6.useStyle(t),o6.update(),o6.getBoundingRect()},n}(),F1e=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],zct=$w(F1e),Hct=function(){function n(){}return n.prototype.getLineStyle=function(e){return zct(this,e)},n}(),$1e=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],qct=$w($1e),Gct=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return qct(this,e,t)},n}(),Ir=function(){function n(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return n.prototype.init=function(e,t,r){},n.prototype.mergeOption=function(e,t){an(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var r=this.option,i=r==null?r:r[e];if(i==null&&!t){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},n.prototype.getModel=function(e,t){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new n(a,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(Bt(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!Nn.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},n}();RY(Ir);tlt(Ir);Ha(Ir,Hct);Ha(Ir,Gct);Ha(Ir,olt);Ha(Ir,Vct);var Wct=Math.round(Math.random()*10);function jT(n){return[n||"",Wct++].join("_")}function Yct(n){var e={};n.registerSubTypeDefaulter=function(t,r){var i=wf(t);e[i.main]=r},n.determineSubType=function(t,r){var i=r.type;if(!i){var a=wf(t).main;n.hasSubTypes(t)&&e[a]&&(i=e[a](r))}return i}}function Kct(n,e){n.topologicalTravel=function(a,o,s,l){if(!a.length)return;var c=t(o),u=c.graph,d=c.noEntryList,h={};for(Z(a,function(_){h[_]=!0});d.length;){var f=d.pop(),m=u[f],v=!!h[f];v&&(s.call(l,f,m.originalDeps.slice()),delete h[f]),Z(m.successor,v?w:y)}Z(h,function(){var _="";throw new Error(_)});function y(_){u[_].entryCount--,u[_].entryCount===0&&d.push(_)}function w(_){h[_]=!0,y(_)}};function t(a){var o={},s=[];return Z(a,function(l){var c=r(o,l),u=c.originalDeps=e(l),d=i(u,a);c.entryCount=d.length,c.entryCount===0&&s.push(l),Z(d,function(h){_n(c.predecessor,h)<0&&c.predecessor.push(h);var f=r(o,h);_n(f.successor,h)<0&&f.successor.push(l)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return Z(a,function(l){_n(o,l)>=0&&s.push(l)}),s}}function My(n,e){return an(an({},n,!0),e,!0)}const Xct={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Zct={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var YN="ZH",WY="EN",u1=WY,ZO={},YY={},B1e=Nn.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||u1).toUpperCase();return n.indexOf(YN)>-1?YN:u1}():u1;function U1e(n,e){n=n.toUpperCase(),YY[n]=new Ir(e),ZO[n]=e}function Qct(n){if(st(n)){var e=ZO[n.toUpperCase()]||{};return n===YN||n===WY?Bt(e):an(Bt(e),Bt(ZO[u1]),!1)}else return an(Bt(n),Bt(ZO[u1]),!1)}function h8(n){return YY[n]}function Jct(){return YY[u1]}U1e(WY,Xct);U1e(YN,Zct);var KY=1e3,XY=KY*60,CD=XY*60,Uu=CD*24,yle=Uu*365,WC={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},AP="{yyyy}-{MM}-{dd}",ble={year:"{yyyy}",month:"{yyyy}-{MM}",day:AP,hour:AP+" "+WC.hour,minute:AP+" "+WC.minute,second:AP+" "+WC.second,millisecond:WC.none},s6=["year","month","day","hour","minute","second","millisecond"],V1e=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function mv(n,e){return n+="","0000".substr(0,e-n.length)+n}function d1(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function eut(n){return n===d1(n)}function tut(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function M5(n,e,t,r){var i=jf(n),a=i[ZY(t)](),o=i[h1(t)]()+1,s=Math.floor((o-1)/3)+1,l=i[P5(t)](),c=i["get"+(t?"UTC":"")+"Day"](),u=i[tI(t)](),d=(u-1)%12+1,h=i[O5(t)](),f=i[R5(t)](),m=i[N5(t)](),v=u>=12?"pm":"am",y=v.toUpperCase(),w=r instanceof Ir?r:h8(r||B1e)||Jct(),_=w.getModel("time"),S=_.get("month"),A=_.get("monthAbbr"),C=_.get("dayOfWeek"),D=_.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,v+"").replace(/{A}/g,y+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,mv(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,S[o-1]).replace(/{MMM}/g,A[o-1]).replace(/{MM}/g,mv(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,mv(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,C[c]).replace(/{ee}/g,D[c]).replace(/{e}/g,c+"").replace(/{HH}/g,mv(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,mv(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,mv(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,mv(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,mv(m,3)).replace(/{S}/g,m+"")}function nut(n,e,t,r,i){var a=null;if(st(t))a=t;else if(kt(t))a=t(n.value,e,{level:n.level});else{var o=Pe({},WC);if(n.level>0)for(var s=0;s<s6.length;++s)o[s6[s]]="{primary|"+o[s6[s]]+"}";var l=t?t.inherit===!1?t:Rt(t,o):o,c=z1e(n.value,i);if(l[c])a=l[c];else if(l.inherit){for(var u=V1e.indexOf(c),s=u-1;s>=0;--s)if(l[c]){a=l[c];break}a=a||o.none}if($e(a)){var d=n.level==null?0:n.level>=0?n.level:a.length+n.level;d=Math.min(d,a.length-1),a=a[d]}}return M5(new Date(n.value),a,i,r)}function z1e(n,e){var t=jf(n),r=t[h1(e)]()+1,i=t[P5(e)](),a=t[tI(e)](),o=t[O5(e)](),s=t[R5(e)](),l=t[N5(e)](),c=l===0,u=c&&s===0,d=u&&o===0,h=d&&a===0,f=h&&i===1,m=f&&r===1;return m?"year":f?"month":h?"day":d?"hour":u?"minute":c?"second":"millisecond"}function wle(n,e,t){var r=ur(n)?jf(n):n;switch(e=e||z1e(n,t),e){case"year":return r[ZY(t)]();case"half-year":return r[h1(t)]()>=6?1:0;case"quarter":return Math.floor((r[h1(t)]()+1)/4);case"month":return r[h1(t)]();case"day":return r[P5(t)]();case"half-day":return r[tI(t)]()/24;case"hour":return r[tI(t)]();case"minute":return r[O5(t)]();case"second":return r[R5(t)]();case"millisecond":return r[N5(t)]()}}function ZY(n){return n?"getUTCFullYear":"getFullYear"}function h1(n){return n?"getUTCMonth":"getMonth"}function P5(n){return n?"getUTCDate":"getDate"}function tI(n){return n?"getUTCHours":"getHours"}function O5(n){return n?"getUTCMinutes":"getMinutes"}function R5(n){return n?"getUTCSeconds":"getSeconds"}function N5(n){return n?"getUTCMilliseconds":"getMilliseconds"}function rut(n){return n?"setUTCFullYear":"setFullYear"}function H1e(n){return n?"setUTCMonth":"setMonth"}function q1e(n){return n?"setUTCDate":"setDate"}function G1e(n){return n?"setUTCHours":"setHours"}function W1e(n){return n?"setUTCMinutes":"setMinutes"}function Y1e(n){return n?"setUTCSeconds":"setSeconds"}function K1e(n){return n?"setUTCMilliseconds":"setMilliseconds"}function X1e(n){if(!qSe(n))return st(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function Z1e(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var FT=TY;function f8(n,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(u){return u&&th(u)?u:"-"}function a(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var o=e==="time",s=n instanceof Date;if(o||s){var l=o?jf(n):n;if(isNaN(+l)){if(s)return"-"}else return M5(l,r,t)}if(e==="ordinal")return IH(n)?i(n):ur(n)&&a(n)?n+"":"-";var c=Pg(n);return a(c)?X1e(c):IH(n)?i(n):typeof n=="boolean"?n+"":"-"}var _le=["a","b","c","d","e","f","g"],l6=function(n,e){return"{"+n+(e??"")+"}"};function Q1e(n,e,t){$e(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var o=_le[a];n=n.replace(l6(o),l6(o,0))}for(var s=0;s<r;s++)for(var l=0;l<i.length;l++){var c=e[s][i[l]];n=n.replace(l6(_le[l],s),t?ml(c):c)}return n}function iut(n,e,t){return Z(e,function(r,i){n=n.replace("{"+i+"}",r)}),n}function aut(n,e){var t=st(n)?{color:n,extraCssText:e}:n||{},r=t.color,i=t.type;e=t.extraCssText;var a=t.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ml(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ml(r)+";"+(e||"")+'"></span>';var o=t.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function Uw(n,e){return e=e||"transparent",st(n)?n:jt(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function KN(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var QO=Z,J1e=["left","right","top","bottom","width","height"],tw=[["width","left","right"],["height","top","bottom"]];function QY(n,e,t,r,i){var a=0,o=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(l,c){var u=l.getBoundingRect(),d=e.childAt(c+1),h=d&&d.getBoundingRect(),f,m;if(n==="horizontal"){var v=u.width+(h?-h.x+u.x:0);f=a+v,f>r||l.newline?(a=0,f=v,o+=s+t,s=u.height):s=Math.max(s,u.height)}else{var y=u.height+(h?-h.y+u.y:0);m=o+y,m>i||l.newline?(a+=s+t,o=0,m=y,s=u.width):s=Math.max(s,u.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),n==="horizontal"?a=f+t:o=m+t)})}var ww=QY;en(QY,"vertical");en(QY,"horizontal");function out(n,e,t){var r=e.width,i=e.height,a=Je(n.left,r),o=Je(n.top,i),s=Je(n.right,r),l=Je(n.bottom,i);return(isNaN(a)||isNaN(parseFloat(n.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(n.right)))&&(s=r),(isNaN(o)||isNaN(parseFloat(n.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(n.bottom)))&&(l=i),t=FT(t||0),{width:Math.max(s-a-t[1]-t[3],0),height:Math.max(l-o-t[0]-t[2],0)}}function oo(n,e,t){t=FT(t||0);var r=e.width,i=e.height,a=Je(n.left,r),o=Je(n.top,i),s=Je(n.right,r),l=Je(n.bottom,i),c=Je(n.width,r),u=Je(n.height,i),d=t[2]+t[0],h=t[1]+t[3],f=n.aspect;switch(isNaN(c)&&(c=r-s-h-a),isNaN(u)&&(u=i-l-d-o),f!=null&&(isNaN(c)&&isNaN(u)&&(f>r/i?c=r*.8:u=i*.8),isNaN(c)&&(c=f*u),isNaN(u)&&(u=c/f)),isNaN(a)&&(a=r-s-c-h),isNaN(o)&&(o=i-l-u-d),n.left||n.right){case"center":a=r/2-c/2-t[3];break;case"right":a=r-c-h;break}switch(n.top||n.bottom){case"middle":case"center":o=i/2-u/2-t[0];break;case"bottom":o=i-u-d;break}a=a||0,o=o||0,isNaN(c)&&(c=r-h-a-(s||0)),isNaN(u)&&(u=i-d-o-(l||0));var m=new pn(a+t[3],o+t[0],c,u);return m.margin=t,m}function L5(n,e,t,r,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||n,a.x=n.x,a.y=n.y,!o&&!s)return!1;var c;if(l==="raw")c=n.type==="group"?new pn(0,0,+e.width||0,+e.height||0):n.getBoundingRect();else if(c=n.getBoundingRect(),n.needLocalTransform()){var u=n.getLocalTransform();c=c.clone(),c.applyTransform(u)}var d=oo(Rt({width:c.width,height:c.height},e),t,r),h=o?d.x-c.x:0,f=s?d.y-c.y:0;return l==="raw"?(a.x=h,a.y=f):(a.x+=h,a.y+=f),a===n&&n.markRedraw(),!0}function sut(n,e){return n[tw[e][0]]!=null||n[tw[e][1]]!=null&&n[tw[e][2]]!=null}function nI(n){var e=n.layoutMode||n.constructor.layoutMode;return jt(e)?e:e?{type:e}:null}function py(n,e,t){var r=t&&t.ignoreSize;!$e(r)&&(r=[r,r]);var i=o(tw[0],0),a=o(tw[1],1);c(tw[0],n,i),c(tw[1],n,a);function o(u,d){var h={},f=0,m={},v=0,y=2;if(QO(u,function(S){m[S]=n[S]}),QO(u,function(S){s(e,S)&&(h[S]=m[S]=e[S]),l(h,S)&&f++,l(m,S)&&v++}),r[d])return l(e,u[1])?m[u[2]]=null:l(e,u[2])&&(m[u[1]]=null),m;if(v===y||!f)return m;if(f>=y)return h;for(var w=0;w<u.length;w++){var _=u[w];if(!s(h,_)&&s(n,_)){h[_]=n[_];break}}return h}function s(u,d){return u.hasOwnProperty(d)}function l(u,d){return u[d]!=null&&u[d]!=="auto"}function c(u,d,h){QO(u,function(f){d[f]=h[f]})}}function $T(n){return eTe({},n)}function eTe(n,e){return e&&n&&QO(J1e,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var lut=tr(),Un=function(n){Te(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.uid=jT("ec_cpt_model"),a}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=nI(this),a=i?$T(t):{},o=r.getTheme();an(t,o.get(this.mainType)),an(t,this.getDefaultOption()),i&&py(t,a,i)},e.prototype.mergeOption=function(t,r){an(this.option,t,!0);var i=nI(this);i&&py(this.option,t,i)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!Qst(t))return t.defaultOption;var r=lut(this);if(!r.defaultOption){for(var i=[],a=t;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},l=i.length-1;l>=0;l--)s=an(s,i[l],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var i=t+"Index",a=t+"Id";return h2(this.ecModel,t,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(Ir);t1e(Un,Ir);w5(Un);Yct(Un);Kct(Un,cut);function cut(n){var e=[];return Z(Un.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=Ue(e,function(t){return wf(t).main}),n!=="dataset"&&_n(e,"dataset")<=0&&e.unshift("dataset"),e}var tTe="";typeof navigator<"u"&&(tTe=navigator.platform||"");var Qx="rgba(0, 0, 0, 0.2)";const uut={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Qx,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Qx,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Qx,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Qx,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Qx,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Qx,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:tTe.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var nTe=_t(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),td="original",Ws="arrayRows",nd="objectRows",Hf="keyedColumns",ey="typedArray",rTe="unknown",Df="column",BT="row",is={Must:1,Might:2,Not:3},iTe=tr();function dut(n){iTe(n).datasetMap=_t()}function aTe(n,e,t){var r={},i=eK(e);if(!i||!n)return r;var a=[],o=[],s=e.ecModel,l=iTe(s).datasetMap,c=i.uid+"_"+t.seriesLayoutBy,u,d;n=n.slice(),Z(n,function(v,y){var w=jt(v)?v:n[y]={name:v};w.type==="ordinal"&&u==null&&(u=y,d=m(w)),r[w.name]=[]});var h=l.get(c)||l.set(c,{categoryWayDim:d,valueWayDim:0});Z(n,function(v,y){var w=v.name,_=m(v);if(u==null){var S=h.valueWayDim;f(r[w],S,_),f(o,S,_),h.valueWayDim+=_}else if(u===y)f(r[w],0,_),f(a,0,_);else{var S=h.categoryWayDim;f(r[w],S,_),f(o,S,_),h.categoryWayDim+=_}});function f(v,y,w){for(var _=0;_<w;_++)v.push(y+_)}function m(v){var y=v.dimsDef;return y?y.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function JY(n,e,t){var r={},i=eK(n);if(!i)return r;var a=e.sourceFormat,o=e.dimensionsDefine,s;(a===nd||a===Hf)&&Z(o,function(u,d){(jt(u)?u.name:u)==="name"&&(s=d)});var l=function(){for(var u={},d={},h=[],f=0,m=Math.min(5,t);f<m;f++){var v=sTe(e.data,a,e.seriesLayoutBy,o,e.startIndex,f);h.push(v);var y=v===is.Not;if(y&&u.v==null&&f!==s&&(u.v=f),(u.n==null||u.n===u.v||!y&&h[u.n]===is.Not)&&(u.n=f),w(u)&&h[u.n]!==is.Not)return u;y||(v===is.Might&&d.v==null&&f!==s&&(d.v=f),(d.n==null||d.n===d.v)&&(d.n=f))}function w(_){return _.v!=null&&_.n!=null}return w(u)?u:w(d)?d:null}();if(l){r.value=[l.v];var c=s??l.n;r.itemName=[c],r.seriesName=[c]}return r}function eK(n){var e=n.get("data",!0);if(!e)return h2(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},Va).models[0]}function hut(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:h2(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},Va).models}function oTe(n,e){return sTe(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function sTe(n,e,t,r,i,a){var o,s=5;if(ic(n))return is.Not;var l,c;if(r){var u=r[a];jt(u)?(l=u.name,c=u.type):st(u)&&(l=u)}if(c!=null)return c==="ordinal"?is.Must:is.Not;if(e===Ws){var d=n;if(t===BT){for(var h=d[a],f=0;f<(h||[]).length&&f<s;f++)if((o=A(h[i+f]))!=null)return o}else for(var f=0;f<d.length&&f<s;f++){var m=d[i+f];if(m&&(o=A(m[a]))!=null)return o}}else if(e===nd){var v=n;if(!l)return is.Not;for(var f=0;f<v.length&&f<s;f++){var y=v[f];if(y&&(o=A(y[l]))!=null)return o}}else if(e===Hf){var w=n;if(!l)return is.Not;var h=w[l];if(!h||ic(h))return is.Not;for(var f=0;f<h.length&&f<s;f++)if((o=A(h[f]))!=null)return o}else if(e===td)for(var _=n,f=0;f<_.length&&f<s;f++){var y=_[f],S=OT(y);if(!$e(S))return is.Not;if((o=A(S[a]))!=null)return o}function A(C){var D=st(C);if(C!=null&&Number.isFinite(Number(C))&&C!=="")return D?is.Might:is.Not;if(D&&C!=="-")return is.Must}return is.Not}var p8=_t();function fut(n,e){Tl(p8.get(n)==null&&e),p8.set(n,e)}function put(n,e,t){var r=p8.get(e);if(!r)return t;var i=r(n);return i?t.concat(i):t}var xle=tr(),gut=tr(),tK=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,r){var i=Wr(this.get("color",!0)),a=this.get("colorLayer",!0);return lTe(this,xle,i,a,e,t,r)},n.prototype.clearColorPalette=function(){vut(this,xle)},n}();function g8(n,e,t,r){var i=Wr(n.get(["aria","decal","decals"]));return lTe(n,gut,i,null,e,t,r)}function mut(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r].length>e)return n[r];return n[t-1]}function lTe(n,e,t,r,i,a,o){a=a||n;var s=e(a),l=s.paletteIdx||0,c=s.paletteNameMap=s.paletteNameMap||{};if(c.hasOwnProperty(i))return c[i];var u=o==null||!r?t:mut(r,o);if(u=u||t,!(!u||!u.length)){var d=u[l];return i&&(c[i]=d),s.paletteIdx=(l+1)%u.length,d}}function vut(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var CP,QA,Sle,Tle="\0_ec_inner",yut=1,nK=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,r,i,a,o,s){a=a||{},this.option=null,this._theme=new Ir(a),this._locale=new Ir(o),this._optionManager=s},e.prototype.setOption=function(t,r,i){var a=Cle(r);this._optionManager.setOption(t,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(t,r){return this._resetOption(t,Cle(r))},e.prototype._resetOption=function(t,r){var i=!1,a=this._optionManager;if(!t||t==="recreate"){var o=a.mountOption(t==="recreate");!this.option||t==="recreate"?Sle(this,o):(this.restoreData(),this._mergeOption(o,r)),i=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!t||t==="recreate"||t==="media"){var l=a.getMediaOption(this);l.length&&Z(l,function(c){i=!0,this._mergeOption(c,r)},this)}return i},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=_t(),c=r&&r.replaceMergeMainTypeMap;dut(this),Z(t,function(d,h){d!=null&&(Un.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?Bt(d):an(i[h],d,!0))}),c&&c.each(function(d,h){Un.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Un.topologicalTravel(s,Un.getAllClassMainTypes(),u,this);function u(d){var h=put(this,d,Wr(t[d])),f=a.get(d),m=f?c&&c.get(d)?"replaceMerge":"normalMerge":"replaceAll",v=XSe(f,h,m);zst(v,d,Un),i[d]=null,a.set(d,null),o.set(d,0);var y=[],w=[],_=0,S;Z(v,function(A,C){var D=A.existing,M=A.newOption;if(!M)D&&(D.mergeOption({},this),D.optionUpdated({},!1));else{var P=d==="series",O=Un.getClass(d,A.keyInfo.subType,!P);if(!O)return;if(d==="tooltip"){if(S)return;S=!0}if(D&&D.constructor===O)D.name=A.keyInfo.name,D.mergeOption(M,this),D.optionUpdated(M,!1);else{var j=Pe({componentIndex:C},A.keyInfo);D=new O(M,this,this,j),Pe(D,j),A.brandNew&&(D.__requireNewView=!0),D.init(M,this,this),D.optionUpdated(null,!0)}}D?(y.push(D.option),w.push(D),_++):(y.push(void 0),w.push(void 0))},this),i[d]=y,a.set(d,w),o.set(d,_),d==="series"&&CP(this)}this._seriesIndices||CP(this)},e.prototype.getOption=function(){var t=Bt(this.option);return Z(t,function(r,i){if(Un.hasClass(i)){for(var a=Wr(r),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!Zk(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,t[i]=a}}),delete t[Tle],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var i=this._componentsMap.get(t);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var i=t.index,a=t.id,o=t.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return i!=null?(l=[],Z(Wr(i),function(c){s[c]&&l.push(s[c])})):a!=null?l=Ele("id",a,s):o!=null?l=Ele("name",o,s):l=Cr(s,function(c){return!!c}),Ale(l,t)},e.prototype.findComponents=function(t){var r=t.query,i=t.mainType,a=s(r),o=a?this.queryComponents(a):Cr(this._componentsMap.get(i),function(c){return!!c});return l(Ale(o,t));function s(c){var u=i+"Index",d=i+"Id",h=i+"Name";return c&&(c[u]!=null||c[d]!=null||c[h]!=null)?{mainType:i,index:c[u],id:c[d],name:c[h]}:null}function l(c){return t.filter?Cr(c,t.filter):c}},e.prototype.eachComponent=function(t,r,i){var a=this._componentsMap;if(kt(t)){var o=r,s=t;a.each(function(d,h){for(var f=0;d&&f<d.length;f++){var m=d[f];m&&s.call(o,h,m,m.componentIndex)}})}else for(var l=st(t)?a.get(t):jt(t)?this.findComponents(t):null,c=0;l&&c<l.length;c++){var u=l[c];u&&r.call(i,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=ro(t,null);return Cr(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return Cr(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return Cr(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){QA(this),Z(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];t.call(r,a,i)},this)},e.prototype.eachRawSeries=function(t,r){Z(this._componentsMap.get("series"),function(i){i&&t.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,i){QA(this),Z(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===t&&r.call(i,o,a)},this)},e.prototype.eachRawSeriesByType=function(t,r,i){return Z(this.getSeriesByType(t),r,i)},e.prototype.isSeriesFiltered=function(t){return QA(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){QA(this);var i=[];Z(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];t.call(r,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=_t(i)},e.prototype.restoreData=function(t){CP(this);var r=this._componentsMap,i=[];r.each(function(a,o){Un.hasClass(o)&&i.push(o)}),Un.topologicalTravel(i,Un.getAllClassMainTypes(),function(a){Z(r.get(a),function(o){o&&(a!=="series"||!but(o,t))&&o.restoreData()})})},e.internalField=function(){CP=function(t){var r=t._seriesIndices=[];Z(t._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),t._seriesIndicesMap=_t(r)},QA=function(t){},Sle=function(t,r){t.option={},t.option[Tle]=yut,t._componentsMap=_t({series:[]}),t._componentsCount=_t();var i=r.aria;jt(i)&&i.enabled==null&&(i.enabled=!0),wut(r,t._theme.option),an(r,uut,!1),t._mergeOption(r,null)}}(),e}(Ir);function but(n,e){if(e){var t=e.seriesIndex,r=e.seriesId,i=e.seriesName;return t!=null&&n.componentIndex!==t||r!=null&&n.id!==r||i!=null&&n.name!==i}}function wut(n,e){var t=n.color&&!n.colorLayer;Z(e,function(r,i){i==="colorLayer"&&t||Un.hasClass(i)||(typeof r=="object"?n[i]=n[i]?an(n[i],r,!1):Bt(r):n[i]==null&&(n[i]=r))})}function Ele(n,e,t){if($e(e)){var r=_t();return Z(e,function(a){if(a!=null){var o=ro(a,null);o!=null&&r.set(a,!0)}}),Cr(t,function(a){return a&&r.get(a[n])})}else{var i=ro(e,null);return Cr(t,function(a){return a&&i!=null&&a[n]===i})}}function Ale(n,e){return e.hasOwnProperty("subType")?Cr(n,function(t){return t&&t.subType===e.subType}):n}function Cle(n){var e=_t();return n&&Z(Wr(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}Ha(nK,tK);var _ut=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],cTe=function(){function n(e){Z(_ut,function(t){this[t]=dt(e[t],e)},this)}return n}(),c6={},b2=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var r=[];Z(c6,function(i,a){var o=i.create(e,t);r=r.concat(o||[])}),this._coordinateSystems=r},n.prototype.update=function(e,t){Z(this._coordinateSystems,function(r){r.update&&r.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){c6[e]=t},n.get=function(e){return c6[e]},n}(),xut=/^(min|max)?(.+)$/,Sut=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,r){e&&(Z(Wr(e.series),function(o){o&&o.data&&ic(o.data)&&ON(o.data)}),Z(Wr(e.dataset),function(o){o&&o.source&&ic(o.source)&&ON(o.source)})),e=Bt(e);var i=this._optionBackup,a=Tut(e,t,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Bt(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(t=Bt(r[i.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var l=0,c=i.length;l<c;l++)Eut(i[l].query,t,r)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!Cut(o,this._currentMediaIndices)&&(s=Ue(o,function(u){return Bt(u===-1?a.option:i[u].option)})),this._currentMediaIndices=o,s},n}();function Tut(n,e,t){var r=[],i,a,o=n.baseOption,s=n.timeline,l=n.options,c=n.media,u=!!n.media,d=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((d||u)&&(n.options=n.media=null),a=n),u&&$e(c)&&Z(c,function(f){f&&f.option&&(f.query?r.push(f):i||(i=f))}),h(a),Z(l,function(f){return h(f)}),Z(r,function(f){return h(f.option)});function h(f){Z(e,function(m){m(f,t)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function Eut(n,e,t){var r={width:e,height:t,aspectratio:e/t},i=!0;return Z(n,function(a,o){var s=o.match(xut);if(!(!s||!s[1]||!s[2])){var l=s[1],c=s[2].toLowerCase();Aut(r[c],a,l)||(i=!1)}}),i}function Aut(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function Cut(n,e){return n.join(",")===e.join(",")}var Ld=Z,rI=jt,Dle=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function u6(n){var e=n&&n.itemStyle;if(e)for(var t=0,r=Dle.length;t<r;t++){var i=Dle[t],a=e.normal,o=e.emphasis;a&&a[i]&&(n[i]=n[i]||{},n[i].normal?an(n[i].normal,a[i]):n[i].normal=a[i],a[i]=null),o&&o[i]&&(n[i]=n[i]||{},n[i].emphasis?an(n[i].emphasis,o[i]):n[i].emphasis=o[i],o[i]=null)}}function Bs(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var r=n[e].normal,i=n[e].emphasis;r&&(t?(n[e].normal=n[e].emphasis=null,Rt(n[e],r)):n[e]=r),i&&(n.emphasis=n.emphasis||{},n.emphasis[e]=i,i.focus&&(n.emphasis.focus=i.focus),i.blurScope&&(n.emphasis.blurScope=i.blurScope))}}function YC(n){Bs(n,"itemStyle"),Bs(n,"lineStyle"),Bs(n,"areaStyle"),Bs(n,"label"),Bs(n,"labelLine"),Bs(n,"upperLabel"),Bs(n,"edgeLabel")}function Fa(n,e){var t=rI(n)&&n[e],r=rI(t)&&t.textStyle;if(r)for(var i=0,a=Rse.length;i<a;i++){var o=Rse[i];r.hasOwnProperty(o)&&(t[o]=r[o])}}function Ou(n){n&&(YC(n),Fa(n,"label"),n.emphasis&&Fa(n.emphasis,"label"))}function Dut(n){if(rI(n)){u6(n),YC(n),Fa(n,"label"),Fa(n,"upperLabel"),Fa(n,"edgeLabel"),n.emphasis&&(Fa(n.emphasis,"label"),Fa(n.emphasis,"upperLabel"),Fa(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(u6(e),Ou(e));var t=n.markLine;t&&(u6(t),Ou(t));var r=n.markArea;r&&Ou(r);var i=n.data;if(n.type==="graph"){i=i||n.nodes;var a=n.links||n.edges;if(a&&!ic(a))for(var o=0;o<a.length;o++)Ou(a[o]);Z(n.categories,function(c){YC(c)})}if(i&&!ic(i))for(var o=0;o<i.length;o++)Ou(i[o]);if(e=n.markPoint,e&&e.data)for(var s=e.data,o=0;o<s.length;o++)Ou(s[o]);if(t=n.markLine,t&&t.data)for(var l=t.data,o=0;o<l.length;o++)$e(l[o])?(Ou(l[o][0]),Ou(l[o][1])):Ou(l[o]);n.type==="gauge"?(Fa(n,"axisLabel"),Fa(n,"title"),Fa(n,"detail")):n.type==="treemap"?(Bs(n.breadcrumb,"itemStyle"),Z(n.levels,function(c){YC(c)})):n.type==="tree"&&YC(n.leaves)}}function Yp(n){return $e(n)?n:n?[n]:[]}function kle(n){return($e(n)?n[0]:n)||{}}function kut(n,e){Ld(Yp(n.series),function(r){rI(r)&&Dut(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),Ld(t,function(r){Ld(Yp(n[r]),function(i){i&&(Fa(i,"axisLabel"),Fa(i.axisPointer,"label"))})}),Ld(Yp(n.parallel),function(r){var i=r&&r.parallelAxisDefault;Fa(i,"axisLabel"),Fa(i&&i.axisPointer,"label")}),Ld(Yp(n.calendar),function(r){Bs(r,"itemStyle"),Fa(r,"dayLabel"),Fa(r,"monthLabel"),Fa(r,"yearLabel")}),Ld(Yp(n.radar),function(r){Fa(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Ld(Yp(n.geo),function(r){rI(r)&&(Ou(r),Ld(Yp(r.regions),function(i){Ou(i)}))}),Ld(Yp(n.timeline),function(r){Ou(r),Bs(r,"label"),Bs(r,"itemStyle"),Bs(r,"controlStyle",!0);var i=r.data;$e(i)&&Z(i,function(a){jt(a)&&(Bs(a,"label"),Bs(a,"itemStyle"))})}),Ld(Yp(n.toolbox),function(r){Bs(r,"iconStyle"),Ld(r.feature,function(i){Bs(i,"iconStyle")})}),Fa(kle(n.axisPointer),"label"),Fa(kle(n.tooltip).axisPointer,"label")}function Iut(n,e){for(var t=e.split(","),r=n,i=0;i<t.length&&(r=r&&r[t[i]],r!=null);i++);return r}function Mut(n,e,t,r){for(var i=e.split(","),a=n,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];a[i[s]]==null&&(a[i[s]]=t)}function Ile(n){n&&Z(Put,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var Put=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Out=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],d6=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function JA(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<d6.length;t++){var r=d6[t][1],i=d6[t][0];e[r]!=null&&(e[i]=e[r])}}function Mle(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function Ple(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function Rut(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function uTe(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&uTe(n[t].children,e)}function dTe(n,e){kut(n,e),n.series=Wr(n.series),Z(n.series,function(t){if(jt(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),Mle(t.label);var i=t.data;if(i&&!ic(i))for(var a=0;a<i.length;a++)Mle(i[a]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var o=Iut(t,"pointer.color");o!=null&&Mut(t,"itemStyle.color",o)}else if(r==="bar"){JA(t),JA(t.backgroundStyle),JA(t.emphasis);var i=t.data;if(i&&!ic(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(JA(i[a]),JA(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var s=t.highlightPolicy;s&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=s)),Ple(t),uTe(t.data,Ple)}else r==="graph"||r==="sankey"?Rut(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Rt(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),Ile(t)}}),n.dataRange&&(n.visualMap=n.dataRange),Z(Out,function(t){var r=n[t];r&&($e(r)||(r=[r]),Z(r,function(i){Ile(i)}))})}function Nut(n){var e=_t();n.eachSeries(function(t){var r=t.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=t.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:t};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),e.each(Lut)}function Lut(n){Z(n,function(e,t){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(c,u,d){var h=o.get(e.stackedDimension,d);if(isNaN(h))return i;var f,m;s?m=o.getRawIndex(d):f=o.get(e.stackedByDimension,d);for(var v=NaN,y=t-1;y>=0;y--){var w=n[y];if(s||(m=w.data.rawIndexOf(w.stackedByDimension,f)),m>=0){var _=w.data.getByRawIndex(w.stackResultDimension,m);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&h>=0&&_>0||l==="samesign"&&h<=0&&_<0){h=Pst(h,_),v=_;break}}}return r[0]=h,r[1]=v,r})})}var j5=function(){function n(e){this.data=e.data||(e.sourceFormat===Hf?{}:[]),this.sourceFormat=e.sourceFormat||rTe,this.seriesLayoutBy=e.seriesLayoutBy||Df,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var i=t[r];i.type==null&&oTe(this,r)===is.Must&&(i.type="ordinal")}}return n}();function rK(n){return n instanceof j5}function m8(n,e,t){t=t||hTe(n);var r=e.seriesLayoutBy,i=Fut(n,t,r,e.sourceHeader,e.dimensions),a=new j5({data:n,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Bt(e)});return a}function iK(n){return new j5({data:n,sourceFormat:ic(n)?ey:td})}function jut(n){return new j5({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Bt(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function hTe(n){var e=rTe;if(ic(n))e=ey;else if($e(n)){n.length===0&&(e=Ws);for(var t=0,r=n.length;t<r;t++){var i=n[t];if(i!=null){if($e(i)||ic(i)){e=Ws;break}else if(jt(i)){e=nd;break}}}}else if(jt(n)){for(var a in n)if(ft(n,a)&&Gs(n[a])){e=Hf;break}}return e}function Fut(n,e,t,r,i){var a,o;if(!n)return{dimensionsDefine:Ole(i),startIndex:o,dimensionsDetectedCount:a};if(e===Ws){var s=n;r==="auto"||r==null?Rle(function(c){c!=null&&c!=="-"&&(st(c)?o==null&&(o=1):o=0)},t,s,10):o=ur(r)?r:r?1:0,!i&&o===1&&(i=[],Rle(function(c,u){i[u]=c!=null?c+"":""},t,s,1/0)),a=i?i.length:t===BT?s.length:s[0]?s[0].length:null}else if(e===nd)i||(i=$ut(n));else if(e===Hf)i||(i=[],Z(n,function(c,u){i.push(u)}));else if(e===td){var l=OT(n[0]);a=$e(l)&&l.length||1}return{startIndex:o,dimensionsDefine:Ole(i),dimensionsDetectedCount:a}}function $ut(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return Vn(t)}function Ole(n){if(n){var e=_t();return Ue(n,function(t,r){t=jt(t)?t:{name:t};var i={name:t.name,displayName:t.displayName,type:t.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function Rle(n,e,t,r){if(e===BT)for(var i=0;i<t.length&&i<r;i++)n(t[i]?t[i][0]:null,i);else for(var a=t[0]||[],i=0;i<a.length&&i<r;i++)n(a[i],i)}function fTe(n){var e=n.sourceFormat;return e===nd||e===Hf}var mb,vb,yb,Nle,Lle,pTe=function(){function n(e,t){var r=rK(e)?e:iK(e);this._source=r;var i=this._data=r.data;r.sourceFormat===ey&&(this._offset=0,this._dimSize=t,this._data=i),Lle(this,i,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;Lle=function(o,s,l){var c=l.sourceFormat,u=l.seriesLayoutBy,d=l.startIndex,h=l.dimensionsDefine,f=Nle[aK(c,u)];if(Pe(o,f),c===ey)o.getItem=t,o.count=i,o.fillStorage=r;else{var m=gTe(c,u);o.getItem=dt(m,null,s,d,h);var v=mTe(c,u);o.count=dt(v,null,s,d,h)}};var t=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,c=this._dimSize,u=c*o,d=0;d<c;d++)s[d]=l[u+d];return s},r=function(o,s,l,c){for(var u=this._data,d=this._dimSize,h=0;h<d;h++){for(var f=c[h],m=f[0]==null?1/0:f[0],v=f[1]==null?-1/0:f[1],y=s-o,w=l[h],_=0;_<y;_++){var S=u[_*d+h];w[o+_]=S,S<m&&(m=S),S>v&&(v=S)}f[0]=m,f[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};Nle=(e={},e[Ws+"_"+Df]={pure:!0,appendData:a},e[Ws+"_"+BT]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[nd]={pure:!0,appendData:a},e[Hf]={pure:!0,appendData:function(o){var s=this._data;Z(o,function(l,c){for(var u=s[c]||(s[c]=[]),d=0;d<(l||[]).length;d++)u.push(l[d])})}},e[td]={appendData:a},e[ey]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),n}(),jle=function(n,e,t,r){return n[r]},But=(mb={},mb[Ws+"_"+Df]=function(n,e,t,r){return n[r+e]},mb[Ws+"_"+BT]=function(n,e,t,r,i){r+=e;for(var a=i||[],o=n,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[r]:null}return a},mb[nd]=jle,mb[Hf]=function(n,e,t,r,i){for(var a=i||[],o=0;o<t.length;o++){var s=t[o].name,l=n[s];a[o]=l?l[r]:null}return a},mb[td]=jle,mb);function gTe(n,e){var t=But[aK(n,e)];return t}var Fle=function(n,e,t){return n.length},Uut=(vb={},vb[Ws+"_"+Df]=function(n,e,t){return Math.max(0,n.length-e)},vb[Ws+"_"+BT]=function(n,e,t){var r=n[0];return r?Math.max(0,r.length-e):0},vb[nd]=Fle,vb[Hf]=function(n,e,t){var r=t[0].name,i=n[r];return i?i.length:0},vb[td]=Fle,vb);function mTe(n,e){var t=Uut[aK(n,e)];return t}var h6=function(n,e,t){return n[e]},Vut=(yb={},yb[Ws]=h6,yb[nd]=function(n,e,t){return n[t]},yb[Hf]=h6,yb[td]=function(n,e,t){var r=OT(n);return r instanceof Array?r[e]:r},yb[ey]=h6,yb);function vTe(n){var e=Vut[n];return e}function aK(n,e){return n===Ws?n+"_"+e:n}function eT(n,e,t){if(n){var r=n.getRawDataItem(e);if(r!=null){var i=n.getStore(),a=i.getSource().sourceFormat;if(t!=null){var o=n.getDimensionIndex(t),s=i.getDimensionProperty(o);return vTe(a)(r,o,s)}else{var l=r;return a===td&&(l=OT(r)),l}}}}var zut=/\{@(.+?)\}/g,F5=function(){function n(){}return n.prototype.getDataParams=function(e,t){var r=this.getData(t),i=this.getRawValue(e,t),a=r.getRawIndex(e),o=r.getName(e),s=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),c=l&&l[r.getItemVisual(e,"drawType")||"fill"],u=l&&l.stroke,d=this.mainType,h=d==="series",f=r.userOutput&&r.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:a,data:s,dataType:t,value:i,color:c,borderColor:u,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,r,i,a,o){t=t||"normal";var s=this.getData(r),l=this.getDataParams(e,r);if(o&&(l.value=o.interpolatedValue),i!=null&&$e(l.value)&&(l.value=l.value[i]),!a){var c=s.getItemModel(e);a=c.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(kt(a))return l.status=t,l.dimensionIndex=i,a(l);if(st(a)){var u=Q1e(a,l);return u.replace(zut,function(d,h){var f=h.length,m=h;m.charAt(0)==="["&&m.charAt(f-1)==="]"&&(m=+m.slice(1,f-1));var v=eT(s,e,m);if(o&&$e(o.interpolatedValue)){var y=s.getDimensionIndex(m);y>=0&&(v=o.interpolatedValue[y])}return v!=null?v+"":""})}},n.prototype.getRawValue=function(e,t){return eT(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,r){},n}();function $le(n){var e,t;return jt(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function DD(n){return new Hut(n)}var Hut=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var i=this.context;i.data=i.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=u(this._modBy),s=this._modDataCount||0,l=u(e&&e.modBy),c=e&&e.modDataCount||0;(o!==l||s!==c)&&(a="reset");function u(_){return!(_>=1)&&(_=1),_}var d;(this._dirty||a==="reset")&&(this._dirty=!1,d=this._doReset(r)),this._modBy=l,this._modDataCount=c;var h=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,m=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!r&&(d||f<m)){var v=this._progress;if($e(v))for(var y=0;y<v.length;y++)this._doProgress(v[y],f,m,l,c);else this._doProgress(v,f,m,l,c)}this._dueIndex=m;var w=this._settedOutputEnd!=null?this._settedOutputEnd:m;this._outputDueEnd=w}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,r,i,a){Ble.reset(t,r,i,a),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:Ble.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),$e(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),Ble=function(){var n,e,t,r,i,a={reset:function(l,c,u,d){e=l,n=c,t=u,r=d,i=Math.ceil(r/t),a.next=t>1&&r>0?s:o}};return a;function o(){return e<n?e++:null}function s(){var l=e%i*t+Math.ceil(e/i),c=e>=n?null:l<r?l:e;return e++,c}}();function ty(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!ur(n)&&n!=null&&n!=="-"&&(n=+jf(n)),n==null||n===""?NaN:Number(n))}var qut=_t({number:function(n){return parseFloat(n)},time:function(n){return+jf(n)},trim:function(n){return st(n)?th(n):n}});function yTe(n){return qut.get(n)}var bTe={lt:function(n,e){return n<e},lte:function(n,e){return n<=e},gt:function(n,e){return n>e},gte:function(n,e){return n>=e}},Gut=function(){function n(e,t){if(!ur(t)){var r="";Er(r)}this._opFn=bTe[e],this._rvalFloat=Pg(t)}return n.prototype.evaluate=function(e){return ur(e)?this._opFn(e,this._rvalFloat):this._opFn(Pg(e),this._rvalFloat)},n}(),wTe=function(){function n(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var r=ur(e)?e:Pg(e),i=ur(t)?t:Pg(t),a=isNaN(r),o=isNaN(i);if(a&&(r=this._incomparable),o&&(i=this._incomparable),a&&o){var s=st(e),l=st(t);s&&(r=l?e:0),l&&(i=s?t:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},n}(),Wut=function(){function n(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=Pg(t)}return n.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(t=Pg(e)===this._rvalFloat)}return this._isEQ?t:!t},n}();function Yut(n,e){return n==="eq"||n==="ne"?new Wut(n==="eq",e):ft(bTe,n)?new Gut(n,e):null}var Kut=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return ty(e,t)},n}();function Xut(n,e){var t=new Kut,r=n.data,i=t.sourceFormat=n.sourceFormat,a=n.startIndex,o="";n.seriesLayoutBy!==Df&&Er(o);var s=[],l={},c=n.dimensionsDefine;if(c)Z(c,function(v,y){var w=v.name,_={index:y,name:w,displayName:v.displayName};if(s.push(_),w!=null){var S="";ft(l,w)&&Er(S),l[w]=_}});else for(var u=0;u<n.dimensionsDetectedCount;u++)s.push({index:u});var d=gTe(i,Df);e.__isBuiltIn&&(t.getRawDataItem=function(v){return d(r,a,s,v)},t.getRawData=dt(Zut,null,n)),t.cloneRawData=dt(Qut,null,n);var h=mTe(i,Df);t.count=dt(h,null,r,a,s);var f=vTe(i);t.retrieveValue=function(v,y){var w=d(r,a,s,v);return m(w,y)};var m=t.retrieveValueFromItem=function(v,y){if(v!=null){var w=s[y];if(w)return f(v,y,w.name)}};return t.getDimensionInfo=dt(Jut,null,s,l),t.cloneAllDimensionInfo=dt(edt,null,s),t}function Zut(n){var e=n.sourceFormat;if(!oK(e)){var t="";Er(t)}return n.data}function Qut(n){var e=n.sourceFormat,t=n.data;if(!oK(e)){var r="";Er(r)}if(e===Ws){for(var i=[],a=0,o=t.length;a<o;a++)i.push(t[a].slice());return i}else if(e===nd){for(var i=[],a=0,o=t.length;a<o;a++)i.push(Pe({},t[a]));return i}}function Jut(n,e,t){if(t!=null){if(ur(t)||!isNaN(t)&&!ft(e,t))return n[t];if(ft(e,t))return e[t]}}function edt(n){return Bt(n)}var _Te=_t();function tdt(n){n=Bt(n);var e=n.type,t="";e||Er(t);var r=e.split(":");r.length!==2&&Er(t);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),n.__isBuiltIn=i,_Te.set(e,n)}function ndt(n,e,t){var r=Wr(n),i=r.length,a="";i||Er(a);for(var o=0,s=i;o<s;o++){var l=r[o];e=rdt(l,e),o!==s-1&&(e.length=Math.max(e.length,1))}return e}function rdt(n,e,t,r){var i="";e.length||Er(i),jt(n)||Er(i);var a=n.type,o=_Te.get(a);o||Er(i);var s=Ue(e,function(c){return Xut(c,o)}),l=Wr(o.transform({upstream:s[0],upstreamList:s,config:Bt(n.config)}));return Ue(l,function(c,u){var d="";jt(c)||Er(d),c.data||Er(d);var h=hTe(c.data);oK(h)||Er(d);var f,m=e[0];if(m&&u===0&&!c.dimensions){var v=m.startIndex;v&&(c.data=m.data.slice(0,v).concat(c.data)),f={seriesLayoutBy:Df,sourceHeader:v,dimensions:m.metaRawOption.dimensions}}else f={seriesLayoutBy:Df,sourceHeader:0,dimensions:c.dimensions};return m8(c.data,f,null)})}function oK(n){return n===Ws||n===nd}var $5="undefined",idt=typeof Uint32Array===$5?Array:Uint32Array,adt=typeof Uint16Array===$5?Array:Uint16Array,xTe=typeof Int32Array===$5?Array:Int32Array,Ule=typeof Float64Array===$5?Array:Float64Array,STe={float:Ule,int:xTe,ordinal:Array,number:Array,time:Ule},f6;function Jx(n){return n>65535?idt:adt}function eS(){return[1/0,-1/0]}function odt(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function Vle(n,e,t,r,i){var a=STe[t||"float"];if(i){var o=n[e],s=o&&o.length;if(s!==r){for(var l=new a(r),c=0;c<s;c++)l[c]=o[c];n[e]=l}}else n[e]=new a(r)}var v8=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=_t()}return n.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=f6[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],fTe(i),this._dimensions=Ue(t,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===t)return a}else a=i.length;return i[a]={type:t},r.set(e,a),this._chunks[a]=new STe[t||"float"](this._rawCount),this._rawExtent[a]=eS(),a},n.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,o=i.ordinalOffset||0,s=r.length;o===0&&(a[e]=eS());for(var l=a[e],c=o;c<s;c++){var u=r[c]=t.parseAndCollect(r[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}i.ordinalMeta=t,i.ordinalOffset=s,i.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var i=t.count();return t.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},n.prototype.appendValues=function(e,t){for(var r=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t||0),c=0;c<a;c++){var u=i[c];Vle(r,c,u.type,l,!0)}for(var d=[],h=s;h<l;h++)for(var f=h-s,m=0;m<a;m++){var u=i[m],v=f6.arrayRows.call(this,e[f]||d,u.property,f,m);r[m][h]=v;var y=o[m];v<y[0]&&(y[0]=v),v>y[1]&&(y[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},n.prototype._initDataFromProvider=function(e,t,r){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,c=Ue(o,function(_){return _.property}),u=0;u<s;u++){var d=o[u];l[u]||(l[u]=eS()),Vle(a,u,d.type,t,r)}if(i.fillStorage)i.fillStorage(e,t,a,l);else for(var h=[],f=e;f<t;f++){h=i.getItem(f,h);for(var m=0;m<s;m++){var v=a[m],y=this._dimValueGetter(h,c[m],f,m);v[f]=y;var w=l[m];y<w[0]&&(w[0]=y),y>w[1]&&(w[1]=y)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var r=[],i=[];if(t==null){t=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,o=i.length;a<o;a++)r.push(this.get(i[a],t));return r},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var i=0,a=this.count();i<a;i++){var o=this.get(e,i);isNaN(o)||(r+=o)}return r},n.prototype.getMedian=function(e){var t=[];this.each([e],function(a){isNaN(a)||t.push(a)});var r=t.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(t[o]<e)i=o+1;else if(t[o]>e)a=o-1;else return o}return-1},n.prototype.indicesOfNearest=function(e,t,r){var i=this._chunks,a=i[e],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,l=-1,c=0,u=0,d=this.count();u<d;u++){var h=this.getRawIndex(u),f=t-a[h],m=Math.abs(f);m<=r&&((m<s||m===s&&f>=0&&l<0)&&(s=m,l=f,c=0),f===l&&(o[c++]=u))}return o.length=c,o},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=t[a]}else e=new r(t.buffer,0,i)}else{var r=Jx(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=Jx(r._rawCount),o=new a(i),s=[],l=e.length,c=0,u=e[0],d=r._chunks,h=0;h<i;h++){var f=void 0,m=r.getRawIndex(h);if(l===0)f=t(h);else if(l===1){var v=d[u][m];f=t(v,h)}else{for(var y=0;y<l;y++)s[y]=d[e[y]][m];s[y]=h,f=t.apply(null,s)}f&&(o[c++]=m)}return c<i&&(r._indices=o),r._count=c,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var i=Vn(e),a=i.length;if(!a)return this;var o=t.count(),s=Jx(t._rawCount),l=new s(o),c=0,u=i[0],d=e[u][0],h=e[u][1],f=t._chunks,m=!1;if(!t._indices){var v=0;if(a===1){for(var y=f[i[0]],w=0;w<r;w++){var _=y[w];(_>=d&&_<=h||isNaN(_))&&(l[c++]=v),v++}m=!0}else if(a===2){for(var y=f[i[0]],S=f[i[1]],A=e[i[1]][0],C=e[i[1]][1],w=0;w<r;w++){var _=y[w],D=S[w];(_>=d&&_<=h||isNaN(_))&&(D>=A&&D<=C||isNaN(D))&&(l[c++]=v),v++}m=!0}}if(!m)if(a===1)for(var w=0;w<o;w++){var M=t.getRawIndex(w),_=f[i[0]][M];(_>=d&&_<=h||isNaN(_))&&(l[c++]=M)}else for(var w=0;w<o;w++){for(var P=!0,M=t.getRawIndex(w),O=0;O<a;O++){var j=i[O],_=f[j][M];(_<e[j][0]||_>e[j][1])&&(P=!1)}P&&(l[c++]=t.getRawIndex(w))}return c<o&&(t._indices=l),t._count=c,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,r){for(var i=e._chunks,a=[],o=t.length,s=e.count(),l=[],c=e._rawExtent,u=0;u<t.length;u++)c[t[u]]=eS();for(var d=0;d<s;d++){for(var h=e.getRawIndex(d),f=0;f<o;f++)l[f]=i[t[f]][h];l[o]=d;var m=r&&r.apply(null,l);if(m!=null){typeof m!="object"&&(a[0]=m,m=a);for(var u=0;u<m.length;u++){var v=t[u],y=m[u],w=c[v],_=i[v];_&&(_[h]=y),y<w[0]&&(w[0]=y),y>w[1]&&(w[1]=y)}}}},n.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),i=r._chunks,a=i[e],o=this.count(),s=0,l=Math.floor(1/t),c=this.getRawIndex(0),u,d,h,f=new(Jx(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));f[s++]=c;for(var m=1;m<o-1;m+=l){for(var v=Math.min(m+l,o-1),y=Math.min(m+l*2,o),w=(y+v)/2,_=0,S=v;S<y;S++){var A=this.getRawIndex(S),C=a[A];isNaN(C)||(_+=C)}_/=y-v;var D=m,M=Math.min(m+l,o),P=m-1,O=a[c];u=-1,h=D;for(var j=-1,L=0,S=D;S<M;S++){var A=this.getRawIndex(S),C=a[A];if(isNaN(C)){L++,j<0&&(j=A);continue}d=Math.abs((P-w)*(C-O)-(P-S)*(_-O)),d>u&&(u=d,h=A)}L>0&&L<M-D&&(f[s++]=Math.min(j,h),h=Math.max(j,h)),f[s++]=h,c=h}return f[s++]=this.getRawIndex(o-1),r._count=s,r._indices=f,r.getRawIndex=this._getRawIdx,r},n.prototype.minmaxDownSample=function(e,t){for(var r=this.clone([e],!0),i=r._chunks,a=Math.floor(1/t),o=i[e],s=this.count(),l=new(Jx(this._rawCount))(Math.ceil(s/a)*2),c=0,u=0;u<s;u+=a){var d=u,h=o[this.getRawIndex(d)],f=u,m=o[this.getRawIndex(f)],v=a;u+a>s&&(v=s-u);for(var y=0;y<v;y++){var w=this.getRawIndex(u+y),_=o[w];_<h&&(h=_,d=u+y),_>m&&(m=_,f=u+y)}var S=this.getRawIndex(d),A=this.getRawIndex(f);d<f?(l[c++]=S,l[c++]=A):(l[c++]=A,l[c++]=S)}return r._count=c,r._indices=l,r._updateGetRawIdx(),r},n.prototype.downSample=function(e,t,r,i){for(var a=this.clone([e],!0),o=a._chunks,s=[],l=Math.floor(1/t),c=o[e],u=this.count(),d=a._rawExtent[e]=eS(),h=new(Jx(this._rawCount))(Math.ceil(u/l)),f=0,m=0;m<u;m+=l){l>u-m&&(l=u-m,s.length=l);for(var v=0;v<l;v++){var y=this.getRawIndex(m+v);s[v]=c[y]}var w=r(s),_=this.getRawIndex(Math.min(m+i(s,w)||0,u-1));c[_]=w,w<d[0]&&(d[0]=w),w>d[1]&&(d[1]=w),h[f++]=_}return a._count=f,a._indices=h,a._updateGetRawIdx(),a},n.prototype.each=function(e,t){if(this._count)for(var r=e.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:t(a);break;case 1:t(i[e[0]][s],a);break;case 2:t(i[e[0]][s],i[e[1]][s],a);break;default:for(var l=0,c=[];l<r;l++)c[l]=i[e[l]][s];c[l]=a,t.apply(null,c)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],r=eS();if(!t)return r;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=r;for(var s=o[0],l=o[1],c=0;c<i;c++){var u=this.getRawIndex(c),d=t[u];d<s&&(s=d),d>l&&(l=d)}return o=[s,l],this._extent[e]=o,o},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][t]);return r},n.prototype.clone=function(e,t){var r=new n,i=this._chunks,a=e&&Rf(e,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<i.length;o++)r._chunks[o]=a[o]?odt(i[o]):i[o];else r._chunks=i;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Bt(this._extent),e._rawExtent=Bt(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var i=0;i<r;i++)t[i]=this._indices[i]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,r,i,a){return ty(t[a],this._dimensions[a])}f6={arrayRows:e,objectRows:function(t,r,i,a){return ty(t[r],this._dimensions[a])},keyedColumns:e,original:function(t,r,i,a){var o=t&&(t.value==null?t:t.value);return ty(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(t,r,i,a){return t[a]}}}(),n}(),TTe=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,i,a;if(DP(e)){var o=e,s=void 0,l=void 0,c=void 0;if(r){var u=t[0];u.prepareSource(),c=u.getSource(),s=c.data,l=c.sourceFormat,a=[u._getVersionSign()]}else s=o.get("data",!0),l=ic(s)?ey:td,a=[];var d=this._getSourceMetaRawOption()||{},h=c&&c.metaRawOption||{},f=Zt(d.seriesLayoutBy,h.seriesLayoutBy)||null,m=Zt(d.sourceHeader,h.sourceHeader),v=Zt(d.dimensions,h.dimensions),y=f!==h.seriesLayoutBy||!!m!=!!h.sourceHeader||v;i=y?[m8(s,{seriesLayoutBy:f,sourceHeader:m,dimensions:v},l)]:[]}else{var w=e;if(r){var _=this._applyTransform(t);i=_.sourceList,a=_.upstreamSignList}else{var S=w.get("source",!0);i=[m8(S,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},n.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),i=t.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&Hle(a)}var o,s=[],l=[];return Z(e,function(c){c.prepareSource();var u=c.getSource(i||0),d="";i!=null&&!u&&Hle(d),s.push(u),l.push(c._getVersionSign())}),r?o=ndt(r,s,{datasetIndex:t.componentIndex}):i!=null&&(o=[jut(s[0])]),{sourceList:o,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,r){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[r];if(!s){var l=this._getUpstreamSourceManagers()[0];DP(this._sourceHost)&&l?s=l._innerGetDataStore(e,t,r):(s=new v8,s.initData(new pTe(t,e.length),e)),o[r]=s}return s},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(DP(e)){var t=eK(e);return t?[t.getSourceManager()]:[]}else return Ue(hut(e),function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,i;if(DP(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;t=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:i}},n}();function zle(n){var e=n.option.transform;e&&ON(n.option.transform)}function DP(n){return n.mainType==="series"}function Hle(n){throw new Error(n)}var sdt="line-height:1";function ETe(n){var e=n.lineHeight;return e==null?sdt:"line-height:"+ml(e+"")+"px"}function ATe(n,e){var t=n.color||"#6e7079",r=n.fontSize||12,i=n.fontWeight||"400",a=n.color||"#464646",o=n.fontSize||14,s=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+ml(r+"")+"px;color:"+ml(t)+";font-weight:"+ml(i+""),valueStyle:"font-size:"+ml(o+"")+"px;color:"+ml(a)+";font-weight:"+ml(s+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var ldt=[0,10,20,30],cdt=["",`
`,`

`,`


`];function To(n,e){return e.type=n,e}function y8(n){return n.type==="section"}function CTe(n){return y8(n)?udt:ddt}function DTe(n){if(y8(n)){var e=0,t=n.blocks.length,r=t>1||t>0&&!n.noHeader;return Z(n.blocks,function(i){var a=DTe(i);a>=e&&(e=a+ +(r&&(!a||y8(i)&&!i.noHeader)))}),e}return 0}function udt(n,e,t,r){var i=e.noHeader,a=hdt(DTe(e)),o=[],s=e.blocks||[];Tl(!s||$e(s)),s=s||[];var l=n.orderMode;if(e.sortBlocks&&l){s=s.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(ft(c,l)){var u=new wTe(c[l],null);s.sort(function(v,y){return u.evaluate(v.sortParam,y.sortParam)})}else l==="seriesDesc"&&s.reverse()}Z(s,function(v,y){var w=e.valueFormatter,_=CTe(v)(w?Pe(Pe({},n),{valueFormatter:w}):n,v,y>0?a.html:0,r);_!=null&&o.push(_)});var d=n.renderMode==="richText"?o.join(a.richText):b8(r,o.join(""),i?t:a.html);if(i)return d;var h=f8(e.header,"ordinal",n.useUTC),f=ATe(r,n.renderMode).nameStyle,m=ETe(r);return n.renderMode==="richText"?kTe(n,h,f)+a.richText+d:b8(r,'<div style="'+f+";"+m+';">'+ml(h)+"</div>"+d,t)}function ddt(n,e,t,r){var i=n.renderMode,a=e.noName,o=e.noValue,s=!e.markerType,l=e.name,c=n.useUTC,u=e.valueFormatter||n.valueFormatter||function(A){return A=$e(A)?A:[A],Ue(A,function(C,D){return f8(C,$e(f)?f[D]:f,c)})};if(!(a&&o)){var d=s?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),h=a?"":f8(l,"ordinal",c),f=e.valueType,m=o?[]:u(e.value,e.dataIndex),v=!s||!a,y=!s&&a,w=ATe(r,i),_=w.nameStyle,S=w.valueStyle;return i==="richText"?(s?"":d)+(a?"":kTe(n,h,_))+(o?"":gdt(n,m,v,y,S)):b8(r,(s?"":d)+(a?"":fdt(h,!s,_))+(o?"":pdt(m,v,y,S)),t)}}function qle(n,e,t,r,i,a){if(n){var o=CTe(n),s={useUTC:i,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:n.valueFormatter};return o(s,n,0,a)}}function hdt(n){return{html:ldt[n],richText:cdt[n]}}function b8(n,e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0",a=ETe(n);return'<div style="'+i+";"+a+';">'+e+r+"</div>"}function fdt(n,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+ml(n)+"</span>"}function pdt(n,e,t,r){var i=t?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return n=$e(n)?n:[n],'<span style="'+a+";"+r+'">'+Ue(n,function(o){return ml(o)}).join("&nbsp;&nbsp;")+"</span>"}function kTe(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function gdt(n,e,t,r,i){var a=[i],o=r?10:20;return t&&a.push({padding:[0,0,0,o],align:"right"}),n.markupStyleCreator.wrapRichTextStyle($e(e)?e.join("  "):e,a)}function ITe(n,e){var t=n.getData().getItemVisual(e,"style"),r=t[n.visualDrawType];return Uw(r)}function MTe(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var p6=function(){function n(){this.richTextStyles={},this._nextStyleNameId=GSe()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,r){var i=r==="richText"?this._generateStyleName():null,a=aut({color:t,type:e,renderMode:r,markerId:i});return st(a)?a:(this.richTextStyles[i]=a.style,a.content)},n.prototype.wrapRichTextStyle=function(e,t){var r={};$e(t)?Z(t,function(a){return Pe(r,a)}):Pe(r,t);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},n}();function PTe(n){var e=n.series,t=n.dataIndex,r=n.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=e.getRawValue(t),l=$e(s),c=ITe(e,t),u,d,h,f;if(o>1||l&&!o){var m=mdt(s,e,t,a,c);u=m.inlineValues,d=m.inlineValueTypes,h=m.blocks,f=m.inlineValues[0]}else if(o){var v=i.getDimensionInfo(a[0]);f=u=eT(i,t,a[0]),d=v.type}else f=u=l?s[0]:s;var y=PY(e),w=y&&e.name||"",_=i.getName(t),S=r?w:_;return To("section",{header:w,noHeader:r||!y,sortParam:f,blocks:[To("nameValue",{markerType:"item",markerColor:c,name:S,noName:!th(S),value:u,valueType:d,dataIndex:t})].concat(h||[])})}function mdt(n,e,t,r,i){var a=e.getData(),o=Rf(n,function(d,h,f){var m=a.getDimensionInfo(f);return d=d||m&&m.tooltip!==!1&&m.displayName!=null},!1),s=[],l=[],c=[];r.length?Z(r,function(d){u(eT(a,t,d),d)}):Z(n,u);function u(d,h){var f=a.getDimensionInfo(h);!f||f.otherDims.tooltip===!1||(o?c.push(To("nameValue",{markerType:"subItem",markerColor:i,name:f.displayName,value:d,valueType:f.type})):(s.push(d),l.push(f.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:c}}var vv=tr();function kP(n,e){return n.getName(e)||n.getId(e)}var JO="__universalTransitionEnabled",bi=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,i){this.seriesIndex=this.componentIndex,this.dataTask=DD({count:ydt,reset:bdt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i);var a=vv(this).sourceManager=new TTe(this);a.prepareSource();var o=this.getInitialData(t,i);Wle(o,this),this.dataTask.context.data=o,vv(this).dataBeforeProcessed=o,Gle(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=nI(this),a=i?$T(t):{},o=this.subType;Un.hasClass(o)&&(o+="Series"),an(t,r.getTheme().get(this.subType)),an(t,this.getDefaultOption()),jw(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&py(t,a,i)},e.prototype.mergeOption=function(t,r){t=an(this.option,t,!0),this.fillDataTextStyle(t.data);var i=nI(this);i&&py(this.option,t,i);var a=vv(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(t,r);Wle(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,vv(this).dataBeforeProcessed=o,Gle(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(t){if(t&&!ic(t))for(var r=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&jw(t[i],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=w8(this);if(r){var i=r.context.data;return t==null||!i.getLinkedData?i:i.getLinkedData(t)}else return vv(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=w8(this);if(r){var i=r.context;i.outputData=t,r!==this.dataTask&&(i.data=t)}vv(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return _t(t)},e.prototype.getSourceManager=function(){return vv(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return vv(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,r,i){return PTe({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(Nn.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,i){var a=this.ecModel,o=tK.prototype.getColorFromPalette.call(this,t,r,i);return o||(o=a.getColorFromPalette(t,r,i)),o},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<t.length;s++){var l=t[s],c=kP(o,l);i[c]=!1,this._selectedDataIndicesMap[c]=-1}}},e.prototype.toggleSelect=function(t,r){for(var i=[],a=0;a<t.length;a++)i[0]=t[a],this.isSelected(t[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=Vn(t),i=[],a=0;a<r.length;a++){var o=t[r[a]];o>=0&&i.push(o)}return i},e.prototype.isSelected=function(t,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[kP(a,t)])&&!a.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[JO])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var i,a,o=this.option,s=o.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){jt(o.selectedMap)||(o.selectedMap={});for(var c=o.selectedMap,u=0;u<l;u++){var d=r[u],h=kP(t,d);c[h]=!0,this._selectedDataIndicesMap[h]=t.getRawIndex(d)}}else if(s==="single"||s===!0){var f=r[l-1],h=kP(t,f);o.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(a={},a[h]=t.getRawIndex(f),a)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(i){var a=t.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return Un.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(Un);Ha(bi,F5);Ha(bi,tK);t1e(bi,Un);function Gle(n){var e=n.name;PY(n)||(n.name=vdt(n)||e)}function vdt(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return Z(t,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function ydt(n){return n.model.getRawData().count()}function bdt(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),wdt}function wdt(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Wle(n,e){Z(Gk(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,en(_dt,e))})}function _dt(n,e){var t=w8(n);return t&&t.setOutputEnd((e||this).count()),e}function w8(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var r=t.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(n.uid))}return r}}var Yi=function(){function n(){this.group=new zt,this.uid=jT("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){},n.prototype.updateLayout=function(e,t,r,i){},n.prototype.updateVisual=function(e,t,r,i){},n.prototype.toggleBlurSeries=function(e,t,r){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();RY(Yi);w5(Yi);function UT(){var n=tr();return function(e){var t=n(e),r=e.pipelineContext,i=!!t.large,a=!!t.progressiveRender,o=t.large=!!(r&&r.large),s=t.progressiveRender=!!(r&&r.progressiveRender);return(i!==o||a!==s)&&"reset"}}var OTe=tr(),xdt=UT(),ti=function(){function n(){this.group=new zt,this.uid=jT("viewChart"),this.renderTask=DD({plan:Sdt,reset:Tdt}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.highlight=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&Kle(a,i,"emphasis")},n.prototype.downplay=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&Kle(a,i,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateLayout=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateVisual=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.eachRendered=function(e){Iy(this.group,e)},n.markUpdateMethod=function(e,t){OTe(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function Yle(n,e,t){n&&Jk(n)&&(e==="emphasis"?Og:Rg)(n,t)}function Kle(n,e,t){var r=Fw(n,e),i=e&&e.highlightKey!=null?act(e.highlightKey):null;r!=null?Z(Wr(r),function(a){Yle(n.getItemGraphicEl(a),t,i)}):n.eachItemGraphicEl(function(a){Yle(a,t,i)})}RY(ti);w5(ti);function Sdt(n){return xdt(n.model)}function Tdt(n){var e=n.model,t=n.ecModel,r=n.api,i=n.payload,a=e.pipelineContext.progressiveRender,o=n.view,s=i&&OTe(i).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](e,t,r,i),Edt[l]}var Edt={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},XN="\0__throttleOriginMethod",Xle="\0__throttleRate",Zle="\0__throttleType";function sK(n,e,t){var r,i=0,a=0,o=null,s,l,c,u;e=e||0;function d(){a=new Date().getTime(),o=null,n.apply(l,c||[])}var h=function(){for(var f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];r=new Date().getTime(),l=this,c=f;var v=u||e,y=u||t;u=null,s=r-(y?i:a)-v,clearTimeout(o),y?o=setTimeout(d,v):s>=0?d():o=setTimeout(d,-s),i=r};return h.clear=function(){o&&(clearTimeout(o),o=null)},h.debounceNextCall=function(f){u=f},h}function VT(n,e,t,r){var i=n[e];if(i){var a=i[XN]||i,o=i[Zle],s=i[Xle];if(s!==t||o!==r){if(t==null||!r)return n[e]=a;i=n[e]=sK(a,t,r==="debounce"),i[XN]=a,i[Zle]=r,i[Xle]=t}return i}}function iI(n,e){var t=n[e];t&&t[XN]&&(t.clear&&t.clear(),n[e]=t[XN])}var Qle=tr(),Jle={itemStyle:$w($1e,!0),lineStyle:$w(F1e,!0)},Adt={lineStyle:"stroke",itemStyle:"fill"};function RTe(n,e){var t=n.visualStyleMapper||Jle[e];return t||(console.warn("Unknown style type '"+e+"'."),Jle.itemStyle)}function NTe(n,e){var t=n.visualDrawType||Adt[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var Cdt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=n.getModel(r),a=RTe(n,r),o=a(i),s=i.getShallow("decal");s&&(t.setVisual("decal",s),s.dirty=!0);var l=NTe(n,r),c=o[l],u=kt(c)?c:null,d=o.fill==="auto"||o.stroke==="auto";if(!o[l]||u||d){var h=n.getColorFromPalette(n.name,null,e.getSeriesCount());o[l]||(o[l]=h,t.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||kt(o.fill)?h:o.fill,o.stroke=o.stroke==="auto"||kt(o.stroke)?h:o.stroke}if(t.setVisual("style",o),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(f,m){var v=n.getDataParams(m),y=Pe({},o);y[l]=u(v),f.setItemVisual(m,"style",y)}}}},eC=new Ir,Ddt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=RTe(n,r),a=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[r]){eC.option=l[r];var c=i(eC),u=o.ensureUniqueItemVisual(s,"style");Pe(u,c),eC.option.decal&&(o.setItemVisual(s,"decal",eC.option.decal),eC.option.decal.dirty=!0),a in c&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},kdt={performRawSeries:!0,overallReset:function(n){var e=_t();n.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),Qle(t).scope=a}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var r=t.getRawData(),i={},a=t.getData(),o=Qle(t).scope,s=t.visualStyleAccessPath||"itemStyle",l=NTe(t,s);a.each(function(c){var u=a.getRawIndex(c);i[u]=c}),r.each(function(c){var u=i[c],d=a.getItemVisual(u,"colorFromPalette");if(d){var h=a.ensureUniqueItemVisual(u,"style"),f=r.getName(c)||c+"",m=r.count();h[l]=t.getColorFromPalette(f,o,m)}})}})}},IP=Math.PI;function Idt(n,e){e=e||{},Rt(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new zt,r=new er({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var i=new sr({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new er({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(a);var o;return e.showSpinner&&(o=new C5({shape:{startAngle:-IP/2,endAngle:-IP/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:IP*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:IP*3/2}).delay(300).start("circularInOut"),t.add(o)),t.resize=function(){var s=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,c=(n.getWidth()-l*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:l),u=n.getHeight()/2;e.showSpinner&&o.setShape({cx:c,cy:u}),a.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var LTe=function(){function n(e,t,r,i){this._stageTaskMap=_t(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!t&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),o=r.progressiveEnabled&&t.incrementalPrepareRender&&a>=r.threshold,s=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:o,modDataCount:l,large:s}},n.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=_t();e.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;r.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),t._pipe(i,i.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;Z(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),o="";Tl(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,t,r),i.overallReset&&this._createOverallStageTask(i,a,t,r)},this)},n.prototype.prepareView=function(e,t,r,i){var a=e.renderTask,o=a.context;o.model=t,o.ecModel=r,o.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(t,a)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},n.prototype._performStageTasks=function(e,t,r,i){i=i||{};var a=!1,o=this;Z(e,function(l,c){if(!(i.visualType&&i.visualType!==l.visualType)){var u=o._stageTaskMap.get(l.uid),d=u.seriesTaskMap,h=u.overallTask;if(h){var f,m=h.agentStubMap;m.each(function(y){s(i,y)&&(y.dirty(),f=!0)}),f&&h.dirty(),o.updatePayload(h,r);var v=o.getPerformArgs(h,i.block);m.each(function(y){y.perform(v)}),h.perform(v)&&(a=!0)}else d&&d.each(function(y,w){s(i,y)&&y.dirty();var _=o.getPerformArgs(y,i.block);_.skip=!l.performRawSeries&&t.isSeriesFiltered(y.context.model),o.updatePayload(y,r),y.perform(_)&&(a=!0)})}});function s(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=a||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,r,i){var a=this,o=t.seriesTaskMap,s=t.seriesTaskMap=_t(),l=e.seriesType,c=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(u):l?r.eachRawSeriesByType(l,u):c&&c(r,i).each(u);function u(d){var h=d.uid,f=s.set(h,o&&o.get(h)||DD({plan:Ndt,reset:Ldt,count:Fdt}));f.context={model:d,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(d,f)}},n.prototype._createOverallStageTask=function(e,t,r,i){var a=this,o=t.overallTask=t.overallTask||DD({reset:Mdt});o.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=_t(),c=e.seriesType,u=e.getTargetSeries,d=!0,h=!1,f="";Tl(!e.createOnAllSeries,f),c?r.eachRawSeriesByType(c,m):u?u(r,i).each(m):(d=!1,Z(r.getSeries(),m));function m(v){var y=v.uid,w=l.set(y,s&&s.get(y)||(h=!0,DD({reset:Pdt,onDirty:Rdt})));w.context={model:v,overallProgress:d},w.agent=o,w.__block=d,a._pipe(v,w)}h&&o.dirty()},n.prototype._pipe=function(e,t){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=t),i.tail&&i.tail.pipe(t),i.tail=t,t.__idxInPipeline=i.count++,t.__pipeline=i},n.wrapStageHandler=function(e,t){return kt(e)&&(e={overallReset:e,seriesType:$dt(e)}),e.uid=jT("stageHandler"),t&&(e.visualType=t),e},n}();function Mdt(n){n.overallReset(n.ecModel,n.api,n.payload)}function Pdt(n){return n.overallProgress&&Odt}function Odt(){this.agent.dirty(),this.getDownstream().dirty()}function Rdt(){this.agent&&this.agent.dirty()}function Ndt(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function Ldt(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=Wr(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?Ue(e,function(t,r){return jTe(r)}):jdt}var jdt=jTe(0);function jTe(n){return function(e,t){var r=t.data,i=t.resetDefines[n];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function Fdt(n){return n.data.count()}function $dt(n){ZN=null;try{n(aI,FTe)}catch{}return ZN}var aI={},FTe={},ZN;$Te(aI,nK);$Te(FTe,cTe);aI.eachSeriesByType=aI.eachRawSeriesByType=function(n){ZN=n};aI.eachComponent=function(n){n.mainType==="series"&&n.subType&&(ZN=n.subType)};function $Te(n,e){for(var t in e.prototype)n[t]=Ca}var ece=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Bdt={color:ece,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],ece]};var Ns="#B9B8CE",tce="#100C2A",MP=function(){return{axisLine:{lineStyle:{color:Ns}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},nce=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],BTe={darkMode:!0,color:nce,backgroundColor:tce,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Ns},pageTextStyle:{color:Ns}},textStyle:{color:Ns},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Ns}},dataZoom:{borderColor:"#71708A",textStyle:{color:Ns},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Ns}},timeline:{lineStyle:{color:Ns},label:{color:Ns},controlStyle:{color:Ns,borderColor:Ns}},calendar:{itemStyle:{color:tce},dayLabel:{color:Ns},monthLabel:{color:Ns},yearLabel:{color:Ns}},timeAxis:MP(),logAxis:MP(),valueAxis:MP(),categoryAxis:MP(),line:{symbol:"circle"},graph:{color:nce},gauge:{title:{color:Ns},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Ns},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};BTe.categoryAxis.splitLine.show=!1;var Udt=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},r={},i={};if(st(e)){var a=wf(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};Z(e,function(l,c){for(var u=!1,d=0;d<o.length;d++){var h=o[d],f=c.lastIndexOf(h);if(f>0&&f===c.length-h.length){var m=c.slice(0,f);m!=="data"&&(t.mainType=m,t[h.toLowerCase()]=l,u=!0)}}s.hasOwnProperty(c)&&(r[c]=l,u=!0),u||(i[c]=l)})}return{cptQuery:t,dataQuery:r,otherQuery:i}},n.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var l=t.cptQuery,c=t.dataQuery;return u(l,o,"mainType")&&u(l,o,"subType")&&u(l,o,"index","componentIndex")&&u(l,o,"name")&&u(l,o,"id")&&u(c,a,"name")&&u(c,a,"dataIndex")&&u(c,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,i,a));function u(d,h,f,m){return d[f]==null||h[m||f]===d[f]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),_8=["symbol","symbolSize","symbolRotate","symbolOffset"],rce=_8.concat(["symbolKeepAspect"]),Vdt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var r={},i={},a=!1,o=0;o<_8.length;o++){var s=_8[o],l=n.get(s);kt(l)?(a=!0,i[s]=l):r[s]=l}if(r.symbol=r.symbol||n.defaultSymbol,t.setVisual(Pe({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),e.isSeriesFiltered(n))return;var c=Vn(i);function u(d,h){for(var f=n.getRawValue(h),m=n.getDataParams(h),v=0;v<c.length;v++){var y=c[v];d.setItemVisual(h,y,i[y](f,m))}}return{dataEach:a?u:null}}},zdt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function r(i,a){for(var o=i.getItemModel(a),s=0;s<rce.length;s++){var l=rce[s],c=o.getShallow(l,!0);c!=null&&i.setItemVisual(a,l,c)}}return{dataEach:t.hasItemOption?r:null}}};function lK(n,e,t){switch(t){case"color":var r=n.getItemVisual(e,"style");return r[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function w2(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function UTe(n,e,t,r){switch(t){case"color":var i=n.ensureUniqueItemVisual(e,"style");i[n.getVisual("drawType")]=r,n.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(e,t,r);break}}function VTe(n,e){function t(r,i){var a=[];return r.eachComponent({mainType:"series",subType:n,query:i},function(o){a.push(o.seriesIndex)}),a}Z([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,o){i=Pe({},i),o.dispatchAction(Pe(i,{type:r[1],seriesIndex:t(a,i)}))})})}function tS(n,e,t,r,i){var a=n+e;t.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,c=i.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===s){var d=o.getData(),h=Fw(d,i.fromActionPayload);t.trigger(a,{type:a,seriesId:o.id,name:$e(h)?d.getName(h[0]):d.getName(h),selected:st(l)?l:Pe({},l)})}})}function Hdt(n,e,t){n.on("selectchanged",function(r){var i=t.getModel();r.isFromClick?(tS("map","selectchanged",e,i,r),tS("pie","selectchanged",e,i,r)):r.fromAction==="select"?(tS("map","selected",e,i,r),tS("pie","selected",e,i,r)):r.fromAction==="unselect"&&(tS("map","unselected",e,i,r),tS("pie","unselected",e,i,r))})}function nw(n,e,t){for(var r;n&&!(e(n)&&(r=n,t));)n=n.__hostTarget||n.parent;return r}var qdt=Math.round(Math.random()*9),Gdt=typeof Object.defineProperty=="function",Wdt=function(){function n(){this._id="__ec_inner_"+qdt++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var r=this._guard(e);return Gdt?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}(),Ydt=Mn.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r+a),n.lineTo(t-i,r+a),n.closePath()}}),Kdt=Mn.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r),n.lineTo(t,r+a),n.lineTo(t-i,r),n.closePath()}}),Xdt=Mn.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),o=i/2,s=o*o/(a-o),l=r-a+o+s,c=Math.asin(s/o),u=Math.cos(c)*o,d=Math.sin(c),h=Math.cos(c),f=o*.6,m=o*.7;n.moveTo(t-u,l+s),n.arc(t,l,o,Math.PI-c,Math.PI*2+c),n.bezierCurveTo(t+u-d*f,l+s+h*f,t,r-m,t,r),n.bezierCurveTo(t,r-m,t-u+d*f,l+s+h*f,t-u,l+s),n.closePath()}}),Zdt=Mn.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,r=e.width,i=e.x,a=e.y,o=r/3*2;n.moveTo(i,a),n.lineTo(i+o,a+t),n.lineTo(i,a+t/4*3),n.lineTo(i-o,a+t),n.lineTo(i,a),n.closePath()}}),Qdt={line:bo,rect:er,roundRect:er,square:er,circle:Xg,diamond:Kdt,pin:Xdt,arrow:Zdt,triangle:Ydt},Jdt={line:function(n,e,t,r,i){i.x1=n,i.y1=e+r/2,i.x2=n+t,i.y2=e+r/2},rect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r},roundRect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r,i.r=Math.min(t,r)/4},square:function(n,e,t,r,i){var a=Math.min(t,r);i.x=n,i.y=e,i.width=a,i.height=a},circle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.r=Math.min(t,r)/2},diamond:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r},pin:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},arrow:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},triangle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r}},QN={};Z(Qdt,function(n,e){QN[e]=new n});var eht=Mn.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var r=UN(n,e,t),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(n,e,t){var r=e.symbolType;if(r!=="none"){var i=QN[r];i||(r="rect",i=QN[r]),Jdt[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(n,i.shape,t)}}});function tht(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function za(n,e,t,r,i,a,o){var s=n.indexOf("empty")===0;s&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=I1e(n.slice(8),new pn(e,t,r,i),o?"center":"cover"):n.indexOf("path://")===0?l=D5(n.slice(7),{},new pn(e,t,r,i),o?"center":"cover"):l=new eht({shape:{symbolType:n,x:e,y:t,width:r,height:i}}),l.__isEmptyBrush=s,l.setColor=tht,a&&l.setColor(a),l}function zT(n){return $e(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function n_(n,e){if(n!=null)return $e(n)||(n=[n,n]),[Je(n[0],e[0])||0,Je(Zt(n[1],n[0]),e[1])||0]}function rw(n){return isFinite(n)}function nht(n,e,t){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,i=i*t.width+t.x,a=a*t.height+t.y,o=o*t.height+t.y),r=rw(r)?r:0,i=rw(i)?i:1,a=rw(a)?a:0,o=rw(o)?o:0;var s=n.createLinearGradient(r,a,i,o);return s}function rht(n,e,t){var r=t.width,i=t.height,a=Math.min(r,i),o=e.x==null?.5:e.x,s=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(o=o*r+t.x,s=s*i+t.y,l=l*a),o=rw(o)?o:.5,s=rw(s)?s:.5,l=l>=0&&rw(l)?l:.5;var c=n.createRadialGradient(o,s,0,o,s,l);return c}function x8(n,e,t){for(var r=e.type==="radial"?rht(n,e,t):nht(n,e,t),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function iht(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function PP(n){return parseInt(n,10)}function zS(n,e,t){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var s=document.defaultView.getComputedStyle(n);return(n[i]||PP(s[r])||PP(n.style[r]))-(PP(s[a])||0)-(PP(s[o])||0)|0}function aht(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:ur(n)?[n]:$e(n)?n:null}function cK(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&aht(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var i=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;i&&i!==1&&(t=Ue(t,function(a){return a/i}),r/=i)}return[t,r]}var oht=new Ff(!0);function JN(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function ice(n){return typeof n=="string"&&n!=="none"}function eL(n){var e=n.fill;return e!=null&&e!=="none"}function ace(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function oce(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function S8(n,e,t){var r=NY(e.image,e.__image,t);if(_5(r)){var i=n.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*BO),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function sht(n,e,t,r){var i,a=JN(t),o=eL(t),s=t.strokePercent,l=s<1,c=!e.path;(!e.silent||l)&&c&&e.createPathProxy();var u=e.path||oht,d=e.__dirty;if(!r){var h=t.fill,f=t.stroke,m=o&&!!h.colorStops,v=a&&!!f.colorStops,y=o&&!!h.image,w=a&&!!f.image,_=void 0,S=void 0,A=void 0,C=void 0,D=void 0;(m||v)&&(D=e.getBoundingRect()),m&&(_=d?x8(n,h,D):e.__canvasFillGradient,e.__canvasFillGradient=_),v&&(S=d?x8(n,f,D):e.__canvasStrokeGradient,e.__canvasStrokeGradient=S),y&&(A=d||!e.__canvasFillPattern?S8(n,h,e):e.__canvasFillPattern,e.__canvasFillPattern=A),w&&(C=d||!e.__canvasStrokePattern?S8(n,f,e):e.__canvasStrokePattern,e.__canvasStrokePattern=A),m?n.fillStyle=_:y&&(A?n.fillStyle=A:o=!1),v?n.strokeStyle=S:w&&(C?n.strokeStyle=C:a=!1)}var M=e.getGlobalScale();u.setScale(M[0],M[1],e.segmentIgnoreThreshold);var P,O;n.setLineDash&&t.lineDash&&(i=cK(e),P=i[0],O=i[1]);var j=!0;(c||d&IS)&&(u.setDPR(n.dpr),l?u.setContext(null):(u.setContext(n),j=!1),u.reset(),e.buildPath(u,e.shape,r),u.toStatic(),e.pathUpdated()),j&&u.rebuildPath(n,l?s:1),P&&(n.setLineDash(P),n.lineDashOffset=O),r||(t.strokeFirst?(a&&oce(n,t),o&&ace(n,t)):(o&&ace(n,t),a&&oce(n,t))),P&&n.setLineDash([])}function lht(n,e,t){var r=e.__image=NY(t.image,e.__image,e,e.onload);if(!(!r||!_5(r))){var i=t.x||0,a=t.y||0,o=e.getWidth(),s=e.getHeight(),l=r.width/r.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=r.width,s=r.height),t.sWidth&&t.sHeight){var c=t.sx||0,u=t.sy||0;n.drawImage(r,c,u,t.sWidth,t.sHeight,i,a,o,s)}else if(t.sx&&t.sy){var c=t.sx,u=t.sy,d=o-c,h=s-u;n.drawImage(r,c,u,d,h,i,a,o,s)}else n.drawImage(r,i,a,o,s)}}function cht(n,e,t){var r,i=t.text;if(i!=null&&(i+=""),i){n.font=t.font||uy,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var a=void 0,o=void 0;n.setLineDash&&t.lineDash&&(r=cK(e),a=r[0],o=r[1]),a&&(n.setLineDash(a),n.lineDashOffset=o),t.strokeFirst?(JN(t)&&n.strokeText(i,t.x,t.y),eL(t)&&n.fillText(i,t.x,t.y)):(eL(t)&&n.fillText(i,t.x,t.y),JN(t)&&n.strokeText(i,t.x,t.y)),a&&n.setLineDash([])}}var sce=["shadowBlur","shadowOffsetX","shadowOffsetY"],lce=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function zTe(n,e,t,r,i){var a=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){Ql(n,i),a=!0;var o=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(o)?mw.opacity:o}(r||e.blend!==t.blend)&&(a||(Ql(n,i),a=!0),n.globalCompositeOperation=e.blend||mw.blend);for(var s=0;s<sce.length;s++){var l=sce[s];(r||e[l]!==t[l])&&(a||(Ql(n,i),a=!0),n[l]=n.dpr*(e[l]||0))}return(r||e.shadowColor!==t.shadowColor)&&(a||(Ql(n,i),a=!0),n.shadowColor=e.shadowColor||mw.shadowColor),a}function cce(n,e,t,r,i){var a=oI(e,i.inHover),o=r?null:t&&oI(t,i.inHover)||{};if(a===o)return!1;var s=zTe(n,a,o,r,i);if((r||a.fill!==o.fill)&&(s||(Ql(n,i),s=!0),ice(a.fill)&&(n.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||(Ql(n,i),s=!0),ice(a.stroke)&&(n.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||(Ql(n,i),s=!0),n.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,c=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==c&&(s||(Ql(n,i),s=!0),n.lineWidth=c)}for(var u=0;u<lce.length;u++){var d=lce[u],h=d[0];(r||a[h]!==o[h])&&(s||(Ql(n,i),s=!0),n[h]=a[h]||d[1])}return s}function uht(n,e,t,r,i){return zTe(n,oI(e,i.inHover),t&&oI(t,i.inHover),r,i)}function HTe(n,e){var t=e.transform,r=n.dpr||1;t?n.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):n.setTransform(r,0,0,r,0,0)}function dht(n,e,t){for(var r=!1,i=0;i<n.length;i++){var a=n[i];r=r||a.isZeroArea(),HTe(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}t.allClipped=r}function hht(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var uce=1,dce=2,hce=3,fce=4;function fht(n){var e=eL(n),t=JN(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function Ql(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function oI(n,e){return e&&n.__hoverStyle||n.style}function qTe(n,e){iw(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function iw(n,e,t,r){var i=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Bc,e.__isRendered=!1;return}var a=e.__clipPaths,o=t.prevElClipPaths,s=!1,l=!1;if((!o||iht(a,o))&&(o&&o.length&&(Ql(n,t),n.restore(),l=s=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),a&&a.length&&(Ql(n,t),n.save(),dht(a,n,t),s=!0),t.prevElClipPaths=a),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var c=t.prevEl;c||(l=s=!0);var u=e instanceof Mn&&e.autoBatch&&fht(e.style);s||hht(i,c.transform)?(Ql(n,t),HTe(n,e)):u||Ql(n,t);var d=oI(e,t.inHover);e instanceof Mn?(t.lastDrawType!==uce&&(l=!0,t.lastDrawType=uce),cce(n,e,c,l,t),(!u||!t.batchFill&&!t.batchStroke)&&n.beginPath(),sht(n,e,d,u),u&&(t.batchFill=d.fill||"",t.batchStroke=d.stroke||"")):e instanceof Q1?(t.lastDrawType!==hce&&(l=!0,t.lastDrawType=hce),cce(n,e,c,l,t),cht(n,e,d)):e instanceof Yo?(t.lastDrawType!==dce&&(l=!0,t.lastDrawType=dce),uht(n,e,c,l,t),lht(n,e,d)):e.getTemporalDisplayables&&(t.lastDrawType!==fce&&(l=!0,t.lastDrawType=fce),pht(n,e,t)),u&&r&&Ql(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function pht(n,e,t){var r=e.getDisplayables(),i=e.getTemporalDisplayables();n.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},o,s;for(o=e.getCursor(),s=r.length;o<s;o++){var l=r[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),iw(n,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var c=0,u=i.length;c<u;c++){var l=i[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),iw(n,l,a,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var g6=new Wdt,pce=new u2(100),gce=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function tT(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";n.dirty&&g6.delete(n);var a=g6.get(n);if(a)return a;var o=Rt(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/t,g6.set(n,s),n.dirty=!1,s;function l(c){for(var u=[t],d=!0,h=0;h<gce.length;++h){var f=o[gce[h]];if(f!=null&&!$e(f)&&!st(f)&&!ur(f)&&typeof f!="boolean"){d=!1;break}u.push(f)}var m;if(d){m=u.join(",")+(i?"-svg":"");var v=pce.get(m);v&&(i?c.svgElement=v:c.image=v)}var y=WTe(o.dashArrayX),w=ght(o.dashArrayY),_=GTe(o.symbol),S=mht(y),A=YTe(w),C=!i&&dy.createCanvas(),D=i&&{tag:"g",attrs:{},key:"dcl",children:[]},M=O(),P;C&&(C.width=M.width*t,C.height=M.height*t,P=C.getContext("2d")),j(),d&&pce.put(m,C||D),c.image=C,c.svgElement=D,c.svgWidth=M.width,c.svgHeight=M.height;function O(){for(var L=1,B=0,$=S.length;B<$;++B)L=Pse(L,S[B]);for(var Y=1,B=0,$=_.length;B<$;++B)Y=Pse(Y,_[B].length);L*=Y;var q=A*S.length*_.length;return{width:Math.max(1,Math.min(L,o.maxTileWidth)),height:Math.max(1,Math.min(q,o.maxTileHeight))}}function j(){P&&(P.clearRect(0,0,C.width,C.height),o.backgroundColor&&(P.fillStyle=o.backgroundColor,P.fillRect(0,0,C.width,C.height)));for(var L=0,B=0;B<w.length;++B)L+=w[B];if(L<=0)return;for(var $=-A,Y=0,q=0,W=0;$<M.height;){if(Y%2===0){for(var X=q/2%_.length,te=0,re=0,z=0;te<M.width*2;){for(var oe=0,B=0;B<y[W].length;++B)oe+=y[W][B];if(oe<=0)break;if(re%2===0){var le=(1-o.symbolSize)*.5,ee=te+y[W][re]*le,be=$+w[Y]*le,he=y[W][re]*o.symbolSize,pe=w[Y]*o.symbolSize,ct=z/2%_[X].length;Be(ee,be,he,pe,_[X][ct])}te+=y[W][re],++z,++re,re===y[W].length&&(re=0)}++W,W===y.length&&(W=0)}$+=w[Y],++q,++Y,Y===w.length&&(Y=0)}function Be(Se,_e,me,fe,Ge){var Ve=i?1:t,nt=za(Ge,Se*Ve,_e*Ve,me*Ve,fe*Ve,o.color,o.symbolKeepAspect);if(i){var we=r.painter.renderOneToVNode(nt);we&&D.children.push(we)}else qTe(P,nt)}}}}function GTe(n){if(!n||n.length===0)return[["rect"]];if(st(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!st(n[t])){e=!1;break}if(e)return GTe([n]);for(var r=[],t=0;t<n.length;++t)st(n[t])?r.push([n[t]]):r.push(n[t]);return r}function WTe(n){if(!n||n.length===0)return[[0,0]];if(ur(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,r=0;r<n.length;++r)if(!ur(n[r])){t=!1;break}if(t)return WTe([n]);for(var i=[],r=0;r<n.length;++r)if(ur(n[r])){var e=Math.ceil(n[r]);i.push([e,e])}else{var e=Ue(n[r],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function ght(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(ur(n)){var e=Math.ceil(n);return[e,e]}var t=Ue(n,function(r){return Math.ceil(r)});return n.length%2?t.concat(t):t}function mht(n){return Ue(n,function(e){return YTe(e)})}function YTe(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function vht(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var l=r.ensureUniqueItemVisual(o,"style");l.decal=tT(s,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=tT(i,e)}}})}var Hd=new ed,KTe={};function yht(n,e){KTe[n]=e}function bht(n){return KTe[n]}var wht=1,_ht=800,xht=900,Sht=1e3,Tht=2e3,Eht=5e3,XTe=1e3,Aht=1100,uK=2e3,ZTe=3e3,Cht=4e3,B5=4500,Dht=4600,kht=5e3,Iht=6e3,QTe=7e3,Mht={PROCESSOR:{FILTER:Sht,SERIES_FILTER:_ht,STATISTIC:Eht},VISUAL:{LAYOUT:XTe,PROGRESSIVE_LAYOUT:Aht,GLOBAL:uK,CHART:ZTe,POST_CHART_LAYOUT:Dht,COMPONENT:Cht,BRUSH:kht,CHART_ITEM:B5,ARIA:Iht,DECAL:QTe}},Rs="__flagInMainProcess",Vl="__pendingUpdate",m6="__needsUpdateStatus",mce=/^[a-zA-Z0-9_]+$/,v6="__connectUpdateStatus",vce=0,Pht=1,Oht=2;function JTe(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return tEe(this,n,e)}}function eEe(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tEe(this,n,e)}}function tEe(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),ed.prototype[e].apply(n,t)}var nEe=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(ed),rEe=nEe.prototype;rEe.on=eEe("on");rEe.off=eEe("off");var nS,y6,OP,yv,b6,w6,_6,tC,nC,yce,bce,x6,wce,RP,_ce,iEe,Au,xce,aEe=function(n){Te(e,n);function e(t,r,i){var a=n.call(this,new Udt)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},st(r)&&(r=oEe[r]),a._dom=t;var o="canvas",s="auto",l=!1;i.ssr&&Dst(function(h){var f=Wt(h),m=f.dataIndex;if(m!=null){var v=_t();return v.set("series_index",f.seriesIndex),v.set("data_index",m),f.ssrType&&v.set("ssr_type",f.ssrType),v}});var c=a._zr=Dse(t,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Zt(i.useDirtyRect,l),useCoarsePointer:Zt(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=sK(dt(c.flush,c),17),r=Bt(r),r&&dTe(r,!0),a._theme=r,a._locale=Qct(i.locale||B1e),a._coordSysMgr=new b2;var u=a._api=_ce(a);function d(h,f){return h.__prio-f.__prio}return zO(nL,d),zO(T8,d),a._scheduler=new LTe(a,u,T8,nL),a._messageCenter=new nEe,a._initEvents(),a.resize=dt(a.resize,a),c.animation.on("frame",a._onframe,a),yce(c,a),bce(c,a),ON(a),a}return e.prototype._onframe=function(){if(!this._disposed){xce(this);var t=this._scheduler;if(this[Vl]){var r=this[Vl].silent;this[Rs]=!0;try{nS(this),yv.update.call(this,null,this[Vl].updateParams)}catch(l){throw this[Rs]=!1,this[Vl]=null,l}this._zr.flush(),this[Rs]=!1,this[Vl]=null,tC.call(this,r),nC.call(this,r)}else if(t.unfinished){var i=wht,a=this._model,o=this._api;t.unfinished=!1;do{var s=+new Date;t.performSeriesTasks(a),t.performDataProcessorTasks(a),w6(this,a),t.performVisualTasks(a),RP(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,i){if(!this[Rs]){if(this._disposed){this.id;return}var a,o,s;if(jt(r)&&(i=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[Rs]=!0,!this._model||r){var l=new Sut(this._api),c=this._theme,u=this._model=new nK;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(t,{replaceMerge:o},E8);var d={seriesTransition:s,optionChanged:!0};if(i)this[Vl]={silent:a,updateParams:d},this[Rs]=!1,this.getZr().wakeUp();else{try{nS(this),yv.update.call(this,null,d)}catch(h){throw this[Vl]=null,this[Rs]=!1,h}this._ssr||this._zr.flush(),this[Vl]=null,this[Rs]=!1,tC.call(this,a),nC.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Nn.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(Nn.svgSupported){var t=this._zr,r=t.storage.getDisplayList();return Z(r,function(i){i.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,i=this._model,a=[],o=this;Z(r,function(l){i.eachComponent({mainType:l},function(c){var u=o._componentsMap[c.__viewId];u.group.ignore||(a.push(u),u.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Z(a,function(l){l.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(Sce[i]){var l=s,c=s,u=-s,d=-s,h=[],f=t&&t.pixelRatio||this.getDevicePixelRatio();Z(ID,function(S,A){if(S.group===i){var C=r?S.getZr().painter.getSvgDom().innerHTML:S.renderToCanvas(Bt(t)),D=S.getDom().getBoundingClientRect();l=a(D.left,l),c=a(D.top,c),u=o(D.right,u),d=o(D.bottom,d),h.push({dom:C,left:D.left,top:D.top})}}),l*=f,c*=f,u*=f,d*=f;var m=u-l,v=d-c,y=dy.createCanvas(),w=Dse(y,{renderer:r?"svg":"canvas"});if(w.resize({width:m,height:v}),r){var _="";return Z(h,function(S){var A=S.left-l,C=S.top-c;_+='<g transform="translate('+A+","+C+')">'+S.dom+"</g>"}),w.painter.getSvgRoot().innerHTML=_,t.connectedBackgroundColor&&w.painter.setBackgroundColor(t.connectedBackgroundColor),w.refreshImmediately(),w.painter.toDataURL()}else return t.connectedBackgroundColor&&w.add(new er({shape:{x:0,y:0,width:m,height:v},style:{fill:t.connectedBackgroundColor}})),Z(h,function(S){var A=new Yo({style:{x:S.left*f-l,y:S.top*f-c,image:S.dom}});w.add(A)}),w.refreshImmediately(),y.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r){return b6(this,"convertToPixel",t,r)},e.prototype.convertFromPixel=function(t,r){return b6(this,"convertFromPixel",t,r)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var i=this._model,a,o=SD(i,t);return Z(o,function(s,l){l.indexOf("Models")>=0&&Z(s,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)a=a||!!u.containPoint(r);else if(l==="seriesModels"){var d=this._chartsMap[c.__viewId];d&&d.containPoint&&(a=a||d.containPoint(r,c))}},this)},this),!!a},e.prototype.getVisual=function(t,r){var i=this._model,a=SD(i,t,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?lK(s,l,r):w2(s,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;Z(Rht,function(r){var i=function(a){var o=t.getModel(),s=a.target,l,c=r==="globalout";if(c?l={}:s&&nw(s,function(m){var v=Wt(m);if(v&&v.dataIndex!=null){var y=v.dataModel||o.getSeriesByIndex(v.seriesIndex);return l=y&&y.getDataParams(v.dataIndex,v.dataType,s)||{},!0}else if(v.eventData)return l=Pe({},v.eventData),!0},!0),l){var u=l.componentType,d=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",d=l.seriesIndex);var h=u&&d!=null&&o.getComponent(u,d),f=h&&t[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=a,l.type=r,t._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:f},t.trigger(r,l)}};i.zrEventfulCallAtLast=!0,t._zr.on(r,i,t)}),Z(kD,function(r,i){t._messageCenter.on(i,function(a){this.trigger(i,a)},t)}),Z(["selectchanged"],function(r){t._messageCenter.on(r,function(i){this.trigger(r,i)},t)}),Hdt(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&QSe(this.getDom(),hK,"");var r=this,i=r._api,a=r._model;Z(r._componentsViews,function(o){o.dispose(a,i)}),Z(r._chartsViews,function(o){o.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete ID[r.id]},e.prototype.resize=function(t){if(!this[Rs]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=t&&t.silent;this[Vl]&&(a==null&&(a=this[Vl].silent),i=!0,this[Vl]=null),this[Rs]=!0;try{i&&nS(this),yv.update.call(this,{type:"resize",animation:Pe({duration:0},t&&t.animation)})}catch(o){throw this[Rs]=!1,o}this[Rs]=!1,tC.call(this,a),nC.call(this,a)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(jt(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!A8[t]){var i=A8[t](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=Pe({},t);return r.type=kD[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(jt(r)||(r={silent:!!r}),!!tL[t.type]&&this._model){if(this[Rs]){this._pendingActions.push(t);return}var i=r.silent;_6.call(this,t,i);var a=r.flush;a?this._zr.flush():a!==!1&&Nn.browser.weChat&&this._throttledZrFlush(),tC.call(this,i),nC.call(this,i)}},e.prototype.updateLabelLayout=function(){Hd.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){nS=function(d){var h=d._scheduler;h.restorePipelines(d._model),h.prepareStageTasks(),y6(d,!0),y6(d,!1),h.plan()},y6=function(d,h){for(var f=d._model,m=d._scheduler,v=h?d._componentsViews:d._chartsViews,y=h?d._componentsMap:d._chartsMap,w=d._zr,_=d._api,S=0;S<v.length;S++)v[S].__alive=!1;h?f.eachComponent(function(D,M){D!=="series"&&A(M)}):f.eachSeries(A);function A(D){var M=D.__requireNewView;D.__requireNewView=!1;var P="_ec_"+D.id+"_"+D.type,O=!M&&y[P];if(!O){var j=wf(D.type),L=h?Yi.getClass(j.main,j.sub):ti.getClass(j.sub);O=new L,O.init(f,_),y[P]=O,v.push(O),w.add(O.group)}D.__viewId=O.__id=P,O.__alive=!0,O.__model=D,O.group.__ecComponentInfo={mainType:D.mainType,index:D.componentIndex},!h&&m.prepareView(O,D,f,_)}for(var S=0;S<v.length;){var C=v[S];C.__alive?S++:(!h&&C.renderTask.dispose(),w.remove(C.group),C.dispose(f,_),v.splice(S,1),y[C.__id]===C&&delete y[C.__id],C.__id=C.group.__ecComponentInfo=null)}},OP=function(d,h,f,m,v){var y=d._model;if(y.setUpdatePayload(f),!m){Z([].concat(d._componentsViews).concat(d._chartsViews),C);return}var w={};w[m+"Id"]=f[m+"Id"],w[m+"Index"]=f[m+"Index"],w[m+"Name"]=f[m+"Name"];var _={mainType:m,query:w};v&&(_.subType=v);var S=f.excludeSeriesId,A;S!=null&&(A=_t(),Z(Wr(S),function(D){var M=ro(D,null);M!=null&&A.set(M,!0)})),y&&y.eachComponent(_,function(D){var M=A&&A.get(D.id)!=null;if(!M)if(ile(f))if(D instanceof bi)f.type===vw&&!f.notBlur&&!D.get(["emphasis","disabled"])&&Zlt(D,f,d._api);else{var P=UY(D.mainType,D.componentIndex,f.name,d._api),O=P.focusSelf,j=P.dispatchers;f.type===vw&&O&&!f.notBlur&&o8(D.mainType,D.componentIndex,d._api),j&&Z(j,function(L){f.type===vw?Og(L):Rg(L)})}else l8(f)&&D instanceof bi&&(ect(D,f,d._api),nle(D),Au(d))},d),y&&y.eachComponent(_,function(D){var M=A&&A.get(D.id)!=null;M||C(d[m==="series"?"_chartsMap":"_componentsMap"][D.__viewId])},d);function C(D){D&&D.__alive&&D[h]&&D[h](D.__model,y,d._api,f)}},yv={prepareAndUpdate:function(d){nS(this),yv.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,h){var f=this._model,m=this._api,v=this._zr,y=this._coordSysMgr,w=this._scheduler;if(f){f.setUpdatePayload(d),w.restoreData(f,d),w.performSeriesTasks(f),y.create(f,m),w.performDataProcessorTasks(f,d),w6(this,f),y.update(f,m),t(f),w.performVisualTasks(f,d),x6(this,f,m,d,h);var _=f.get("backgroundColor")||"transparent",S=f.get("darkMode");v.setBackgroundColor(_),S!=null&&S!=="auto"&&v.setDarkMode(S),Hd.trigger("afterupdate",f,m)}},updateTransform:function(d){var h=this,f=this._model,m=this._api;if(f){f.setUpdatePayload(d);var v=[];f.eachComponent(function(w,_){if(w!=="series"){var S=h.getViewOfComponentModel(_);if(S&&S.__alive)if(S.updateTransform){var A=S.updateTransform(_,f,m,d);A&&A.update&&v.push(S)}else v.push(S)}});var y=_t();f.eachSeries(function(w){var _=h._chartsMap[w.__viewId];if(_.updateTransform){var S=_.updateTransform(w,f,m,d);S&&S.update&&y.set(w.uid,1)}else y.set(w.uid,1)}),t(f),this._scheduler.performVisualTasks(f,d,{setDirty:!0,dirtyMap:y}),RP(this,f,m,d,{},y),Hd.trigger("afterupdate",f,m)}},updateView:function(d){var h=this._model;h&&(h.setUpdatePayload(d),ti.markUpdateMethod(d,"updateView"),t(h),this._scheduler.performVisualTasks(h,d,{setDirty:!0}),x6(this,h,this._api,d,{}),Hd.trigger("afterupdate",h,this._api))},updateVisual:function(d){var h=this,f=this._model;f&&(f.setUpdatePayload(d),f.eachSeries(function(m){m.getData().clearAllVisual()}),ti.markUpdateMethod(d,"updateVisual"),t(f),this._scheduler.performVisualTasks(f,d,{visualType:"visual",setDirty:!0}),f.eachComponent(function(m,v){if(m!=="series"){var y=h.getViewOfComponentModel(v);y&&y.__alive&&y.updateVisual(v,f,h._api,d)}}),f.eachSeries(function(m){var v=h._chartsMap[m.__viewId];v.updateVisual(m,f,h._api,d)}),Hd.trigger("afterupdate",f,this._api))},updateLayout:function(d){yv.update.call(this,d)}},b6=function(d,h,f,m){if(d._disposed){d.id;return}for(var v=d._model,y=d._coordSysMgr.getCoordinateSystems(),w,_=SD(v,f),S=0;S<y.length;S++){var A=y[S];if(A[h]&&(w=A[h](v,_,m))!=null)return w}},w6=function(d,h){var f=d._chartsMap,m=d._scheduler;h.eachSeries(function(v){m.updateStreamModes(v,f[v.__viewId])})},_6=function(d,h){var f=this,m=this.getModel(),v=d.type,y=d.escapeConnect,w=tL[v],_=w.actionInfo,S=(_.update||"update").split(":"),A=S.pop(),C=S[0]!=null&&wf(S[0]);this[Rs]=!0;var D=[d],M=!1;d.batch&&(M=!0,D=Ue(d.batch,function(Y){return Y=Rt(Pe({},Y),d),Y.batch=null,Y}));var P=[],O,j=l8(d),L=ile(d);if(L&&b1e(this._api),Z(D,function(Y){if(O=w.action(Y,f._model,f._api),O=O||Pe({},Y),O.type=_.event||O.type,P.push(O),L){var q=OY(d),W=q.queryOptionMap,X=q.mainTypeSpecified,te=X?W.keys()[0]:"series";OP(f,A,Y,te),Au(f)}else j?(OP(f,A,Y,"series"),Au(f)):C&&OP(f,A,Y,C.main,C.sub)}),A!=="none"&&!L&&!j&&!C)try{this[Vl]?(nS(this),yv.update.call(this,d),this[Vl]=null):yv[A].call(this,d)}catch(Y){throw this[Rs]=!1,Y}if(M?O={type:_.event||v,escapeConnect:y,batch:P}:O=P[0],this[Rs]=!1,!h){var B=this._messageCenter;if(B.trigger(O.type,O),j){var $={type:"selectchanged",escapeConnect:y,selected:tct(m),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};B.trigger($.type,$)}}},tC=function(d){for(var h=this._pendingActions;h.length;){var f=h.shift();_6.call(this,f,d)}},nC=function(d){!d&&this.trigger("updated")},yce=function(d,h){d.on("rendered",function(f){h.trigger("rendered",f),d.animation.isFinished()&&!h[Vl]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},bce=function(d,h){d.on("mouseover",function(f){var m=f.target,v=nw(m,Jk);v&&(Qlt(v,f,h._api),Au(h))}).on("mouseout",function(f){var m=f.target,v=nw(m,Jk);v&&(Jlt(v,f,h._api),Au(h))}).on("click",function(f){var m=f.target,v=nw(m,function(_){return Wt(_).dataIndex!=null},!0);if(v){var y=v.selected?"unselect":"select",w=Wt(v);h._api.dispatchAction({type:y,dataType:w.dataType,dataIndexInside:w.dataIndex,seriesIndex:w.seriesIndex,isFromClick:!0})}})};function t(d){d.clearColorPalette(),d.eachSeries(function(h){h.clearColorPalette()})}function r(d){var h=[],f=[],m=!1;if(d.eachComponent(function(_,S){var A=S.get("zlevel")||0,C=S.get("z")||0,D=S.getZLevelKey();m=m||!!D,(_==="series"?f:h).push({zlevel:A,z:C,idx:S.componentIndex,type:_,key:D})}),m){var v=h.concat(f),y,w;zO(v,function(_,S){return _.zlevel===S.zlevel?_.z-S.z:_.zlevel-S.zlevel}),Z(v,function(_){var S=d.getComponent(_.type,_.idx),A=_.zlevel,C=_.key;y!=null&&(A=Math.max(y,A)),C?(A===y&&C!==w&&A++,w=C):w&&(A===y&&A++,w=""),y=A,S.setZLevel(A)})}}x6=function(d,h,f,m,v){r(h),wce(d,h,f,m,v),Z(d._chartsViews,function(y){y.__alive=!1}),RP(d,h,f,m,v),Z(d._chartsViews,function(y){y.__alive||y.remove(h,f)})},wce=function(d,h,f,m,v,y){Z(y||d._componentsViews,function(w){var _=w.__model;c(_,w),w.render(_,h,f,m),s(_,w),u(_,w)})},RP=function(d,h,f,m,v,y){var w=d._scheduler;v=Pe(v||{},{updatedSeries:h.getSeries()}),Hd.trigger("series:beforeupdate",h,f,v);var _=!1;h.eachSeries(function(S){var A=d._chartsMap[S.__viewId];A.__alive=!0;var C=A.renderTask;w.updatePayload(C,m),c(S,A),y&&y.get(S.uid)&&C.dirty(),C.perform(w.getPerformArgs(C))&&(_=!0),A.group.silent=!!S.get("silent"),o(S,A),nle(S)}),w.unfinished=_||w.unfinished,Hd.trigger("series:layoutlabels",h,f,v),Hd.trigger("series:transition",h,f,v),h.eachSeries(function(S){var A=d._chartsMap[S.__viewId];s(S,A),u(S,A)}),a(d,h),Hd.trigger("series:afterupdate",h,f,v)},Au=function(d){d[m6]=!0,d.getZr().wakeUp()},xce=function(d){d[m6]&&(d.getZr().storage.traverse(function(h){c1(h)||i(h)}),d[m6]=!1)};function i(d){for(var h=[],f=d.currentStates,m=0;m<f.length;m++){var v=f[m];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}d.selected&&d.states.select&&h.push("select"),d.hoverState===T5&&d.states.emphasis?h.push("emphasis"):d.hoverState===f2&&d.states.blur&&h.push("blur"),d.useStates(h)}function a(d,h){var f=d._zr,m=f.storage,v=0;m.traverse(function(y){y.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Nn.node&&!Nn.worker&&h.eachSeries(function(y){if(!y.preventUsingHoverLayer){var w=d._chartsMap[y.__viewId];w.__alive&&w.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function o(d,h){var f=d.get("blendMode")||null;h.eachRendered(function(m){m.isGroup||(m.style.blend=f)})}function s(d,h){if(!d.preventAutoZ){var f=d.get("z")||0,m=d.get("zlevel")||0;h.eachRendered(function(v){return l(v,f,m,-1/0),!0})}}function l(d,h,f,m){var v=d.getTextContent(),y=d.getTextGuideLine(),w=d.isGroup;if(w)for(var _=d.childrenRef(),S=0;S<_.length;S++)m=Math.max(l(_[S],h,f,m),m);else d.z=h,d.zlevel=f,m=Math.max(d.z2,m);if(v&&(v.z=h,v.zlevel=f,isFinite(m)&&(v.z2=m+2)),y){var A=d.textGuideLineConfig;y.z=h,y.zlevel=f,isFinite(m)&&(y.z2=m+(A&&A.showAbove?1:-1))}return m}function c(d,h){h.eachRendered(function(f){if(!c1(f)){var m=f.getTextContent(),v=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function u(d,h){var f=d.getModel("stateAnimation"),m=d.isAnimationEnabled(),v=f.get("duration"),y=v>0?{duration:v,delay:f.get("delay"),easing:f.get("easing")}:null;h.eachRendered(function(w){if(w.states&&w.states.emphasis){if(c1(w))return;if(w instanceof Mn&&oct(w),w.__dirty){var _=w.prevStates;_&&w.useStates(_)}if(m){w.stateTransition=y;var S=w.getTextContent(),A=w.getTextGuideLine();S&&(S.stateTransition=y),A&&(A.stateTransition=y)}w.__dirty&&i(w)}})}_ce=function(d){return new(function(h){Te(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(m){for(;m;){var v=m.__ecComponentInfo;if(v!=null)return d._model.getComponent(v.mainType,v.index);m=m.parent}},f.prototype.enterEmphasis=function(m,v){Og(m,v),Au(d)},f.prototype.leaveEmphasis=function(m,v){Rg(m,v),Au(d)},f.prototype.enterBlur=function(m){g1e(m),Au(d)},f.prototype.leaveBlur=function(m){BY(m),Au(d)},f.prototype.enterSelect=function(m){m1e(m),Au(d)},f.prototype.leaveSelect=function(m){v1e(m),Au(d)},f.prototype.getModel=function(){return d.getModel()},f.prototype.getViewOfComponentModel=function(m){return d.getViewOfComponentModel(m)},f.prototype.getViewOfSeriesModel=function(m){return d.getViewOfSeriesModel(m)},f}(cTe))(d)},iEe=function(d){function h(f,m){for(var v=0;v<f.length;v++){var y=f[v];y[v6]=m}}Z(kD,function(f,m){d._messageCenter.on(m,function(v){if(Sce[d.group]&&d[v6]!==vce){if(v&&v.escapeConnect)return;var y=d.makeActionFromEvent(v),w=[];Z(ID,function(_){_!==d&&_.group===d.group&&w.push(_)}),h(w,vce),Z(w,function(_){_[v6]!==Pht&&_.dispatchAction(y)}),h(w,Oht)}})})}}(),e}(ed),dK=aEe.prototype;dK.on=JTe("on");dK.off=JTe("off");dK.one=function(n,e,t){var r=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];e&&e.apply&&e.apply(this,a),r.off(n,i)}this.on.call(this,n,i,t)};var Rht=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var tL={},kD={},T8=[],E8=[],nL=[],oEe={},A8={},ID={},Sce={},Nht=+new Date-0,hK="_echarts_instance_";function sEe(n,e,t){{var r=Lht(n);if(r)return r}var i=new aEe(n,e,t);return i.id="ec_"+Nht++,ID[i.id]=i,QSe(n,hK,i.id),iEe(i),Hd.trigger("afterinit",i),i}function Lht(n){return ID[Yst(n,hK)]}function lEe(n,e){oEe[n]=e}function cEe(n){_n(E8,n)<0&&E8.push(n)}function uEe(n,e){pK(T8,n,e,Tht)}function jht(n){fK("afterinit",n)}function Fht(n){fK("afterupdate",n)}function fK(n,e){Hd.on(n,e)}function qf(n,e,t){kt(e)&&(t=e,e="");var r=jt(n)?n.type:[n,n={event:e}][0];n.event=(n.event||r).toLowerCase(),e=n.event,!kD[e]&&(Tl(mce.test(r)&&mce.test(e)),tL[r]||(tL[r]={action:t,actionInfo:n}),kD[e]=r)}function $ht(n,e){b2.register(n,e)}function Bht(n,e){pK(nL,n,e,XTe,"layout")}function r_(n,e){pK(nL,n,e,ZTe,"visual")}var Tce=[];function pK(n,e,t,r,i){if((kt(e)||jt(e))&&(t=e,e=r),!(_n(Tce,t)>=0)){Tce.push(t);var a=LTe.wrapStageHandler(t,i);a.__prio=e,a.__raw=t,n.push(a)}}function dEe(n,e){A8[n]=e}function Uht(n,e,t){var r=bht("registerMap");r&&r(n,e,t)}var Vht=tdt;r_(uK,Cdt);r_(B5,Ddt);r_(B5,kdt);r_(uK,Vdt);r_(B5,zdt);r_(QTe,vht);cEe(dTe);uEe(xht,Nut);dEe("default",Idt);qf({type:vw,event:vw,update:vw},Ca);qf({type:YO,event:YO,update:YO},Ca);qf({type:TD,event:TD,update:TD},Ca);qf({type:KO,event:KO,update:KO},Ca);qf({type:ED,event:ED,update:ED},Ca);lEe("light",Bdt);lEe("dark",BTe);var Ece=[],zht={registerPreprocessor:cEe,registerProcessor:uEe,registerPostInit:jht,registerPostUpdate:Fht,registerUpdateLifecycle:fK,registerAction:qf,registerCoordinateSystem:$ht,registerLayout:Bht,registerVisual:r_,registerTransform:Vht,registerLoading:dEe,registerMap:Uht,registerImpl:yht,PRIORITY:Mht,ComponentModel:Un,ComponentView:Yi,SeriesModel:bi,ChartView:ti,registerComponentModel:function(n){Un.registerClass(n)},registerComponentView:function(n){Yi.registerClass(n)},registerSeriesModel:function(n){bi.registerClass(n)},registerChartView:function(n){ti.registerClass(n)},registerSubTypeDefaulter:function(n,e){Un.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){Ast(n,e)}};function Dn(n){if($e(n)){Z(n,function(e){Dn(e)});return}_n(Ece,n)>=0||(Ece.push(n),kt(n)&&(n={install:n}),n.install(zht))}function rC(n){return n==null?0:n.length||1}function Ace(n){return n}var Ng=function(){function n(e,t,r,i,a,o){this._old=e,this._new=t,this._oldKeyGetter=r||Ace,this._newKeyGetter=i||Ace,this.context=a,this._diffModeMultiple=o==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),a=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=i[o],l=r[s],c=rC(l);if(c>1){var u=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(u,o)}else c===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},a=[],o=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(t,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],c=r[l],u=i[l],d=rC(c),h=rC(u);if(d>1&&h===1)this._updateManyToOne&&this._updateManyToOne(u,c),i[l]=null;else if(d===1&&h>1)this._updateOneToMany&&this._updateOneToMany(u,c),i[l]=null;else if(d===1&&h===1)this._update&&this._update(u,c),i[l]=null;else if(d>1&&h>1)this._updateManyToMany&&this._updateManyToMany(u,c),i[l]=null;else if(d>1)for(var f=0;f<d;f++)this._remove&&this._remove(c[f]);else this._remove&&this._remove(c)}this._performRestAdd(o,i)},n.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=t[i],o=rC(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);t[i]=null}},n.prototype._initIndexMap=function(e,t,r,i){for(var a=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[i](e[o],o);if(a||(r[o]=s),!!t){var l=t[s],c=rC(l);c===0?(t[s]=o,a&&r.push(s)):c===1?t[s]=[l,o]:l.push(o)}}},n}(),Hht=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function qht(n,e){var t={},r=t.encode={},i=_t(),a=[],o=[],s={};Z(n.dimensions,function(h){var f=n.getDimensionInfo(h),m=f.coordDim;if(m){var v=f.coordDimIndex;S6(r,m)[v]=h,f.isExtraCoord||(i.set(m,1),Ght(f.type)&&(a[0]=h),S6(s,m)[v]=n.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(h)}nTe.each(function(y,w){var _=S6(r,w),S=f.otherDims[w];S!=null&&S!==!1&&(_[S]=f.name)})});var l=[],c={};i.each(function(h,f){var m=r[f];c[f]=m[0],l=l.concat(m)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=Ue(l,function(h){return n.getDimensionInfo(h).storeDimIndex}),t.encodeFirstDimNotExtra=c;var u=r.label;u&&u.length&&(a=u.slice());var d=r.tooltip;return d&&d.length?o=d.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,t.userOutput=new Hht(s,e),t}function S6(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function rL(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function Ght(n){return!(n==="ordinal"||n==="time")}var eR=function(){function n(e){this.otherDims={},e!=null&&Pe(this,e)}return n}(),Wht=tr(),Yht={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},hEe=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=gEe(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return Zt(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=fTe(this.source),r=!mEe(e),i="",a=[],o=0,s=0;o<e;o++){var l=void 0,c=void 0,u=void 0,d=this.dimensions[s];if(d&&d.storeDimIndex===o)l=t?d.name:null,c=d.type,u=d.ordinalMeta,s++;else{var h=this.getSourceDimension(o);h&&(l=t?h.name:null,c=h.type)}a.push({property:l,type:c,ordinalMeta:u}),t&&l!=null&&(!d||!d.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Yht[c]||"f",u&&(i+=u.uid),i+="$"}var f=this.source,m=[f.seriesLayoutBy,f.startIndex,i].join("$$");return{dimensions:a,hash:m}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===t)a.isCalculationCoord||(i=a.name),r++;else{var o=this.getSourceDimension(t);o&&(i=o.name)}e.push(i)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function fEe(n){return n instanceof hEe}function pEe(n){for(var e=_t(),t=0;t<(n||[]).length;t++){var r=n[t],i=jt(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,t)}return e}function gEe(n){var e=Wht(n);return e.dimNameMap||(e.dimNameMap=pEe(n.dimensionsDefine))}function mEe(n){return n>30}var iC=jt,bv=Ue,Kht=typeof Int32Array>"u"?Array:Int32Array,Xht="e\0\0",Cce=-1,Zht=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Qht=["_approximateExtent"],Dce,NP,aC,oC,T6,sC,E6,xl=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,i=!1;fEe(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},o=[],s={},l=!1,c={},u=0;u<r.length;u++){var d=r[u],h=st(d)?new eR({name:d}):d instanceof eR?d:new eR(d),f=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=f,h.coordDimIndex=0);var m=h.otherDims=h.otherDims||{};o.push(f),a[f]=h,c[f]!=null&&(l=!0),h.createInvertedIndices&&(s[f]=[]),m.itemName===0&&(this._nameDimIdx=u),m.itemId===0&&(this._idDimIdx=u),i&&(h.storeDimIndex=u)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=_t();Z(o,function(y){v.set(a[y].storeDimIndex,y)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var i=this._schema.getSourceDimension(t);if(i)return i.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(ur(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,r){var i=this,a;if(e instanceof v8&&(a=e),!a){var o=this.dimensions,s=rK(e)||Gs(e)?new pTe(e,o.length):e;a=new v8;var l=bv(o,function(c){return{type:i._dimInfos[c].type,property:c}});a.initData(s,l,r)}this._store=a,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=qht(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t&&t.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var s=i;s<a;s++){var l=s-i;this._nameList[s]=t[l],o&&E6(this,s)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var i=this._dimInfos[t[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==ey&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===td;if(l&&!i.pure)for(var c=[],u=e;u<t;u++){var d=i.getItem(u,c);if(!this.hasItemOption&&Nst(d)&&(this.hasItemOption=!0),d){var h=d.name;a[u]==null&&h!=null&&(a[u]=ro(h,null));var f=d.id;o[u]==null&&f!=null&&(o[u]=ro(f,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)E6(this,u);Dce(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){iC(e)?Pe(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=aC(this,this._nameDimIdx,t)),r==null&&(r=""),r},n.prototype._getCategory=function(e,t){var r=this._store.get(e,t),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},n.prototype.getId=function(e){return NP(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var r=this,i=this._store;return $e(e)?i.getValues(bv(e,function(a){return r._getStoreDimIndex(a)}),t):i.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],i=r&&r[t];return i==null||isNaN(i)?Cce:i},n.prototype.indicesOfNearest=function(e,t,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,r)},n.prototype.each=function(e,t,r){kt(e)&&(r=t,t=e,e=[]);var i=r||this,a=bv(oC(e),this._getStoreDimIndex,this);this._store.each(a,i?dt(t,i):t)},n.prototype.filterSelf=function(e,t,r){kt(e)&&(r=t,t=e,e=[]);var i=r||this,a=bv(oC(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?dt(t,i):t),this},n.prototype.selectRange=function(e){var t=this,r={},i=Vn(e);return Z(i,function(a){var o=t._getStoreDimIndex(a);r[o]=e[a]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(e,t,r){kt(e)&&(r=t,t=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(t&&t.apply(this,arguments))},r),i},n.prototype.map=function(e,t,r,i){var a=r||i||this,o=bv(oC(e),this._getStoreDimIndex,this),s=sC(this);return s._store=this._store.map(o,a?dt(t,a):t),s},n.prototype.modify=function(e,t,r,i){var a=r||i||this,o=bv(oC(e),this._getStoreDimIndex,this);this._store.modify(o,a?dt(t,a):t)},n.prototype.downSample=function(e,t,r,i){var a=sC(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),t,r,i),a},n.prototype.minmaxDownSample=function(e,t){var r=sC(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),r},n.prototype.lttbDownSample=function(e,t){var r=sC(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new Ir(r,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new Ng(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return NP(e,r)},function(r){return NP(t,r)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},iC(e)?Pe(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return i??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[t];return a==null&&(a=this.getVisual(t),$e(a)?a=a.slice():iC(a)&&(a=Pe({},a)),i[t]=a),a},n.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,iC(t)?Pe(i,t):i[t]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){iC(e)?Pe(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?Pe(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;i8(r,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){Z(this._graphicEls,function(r,i){r&&e&&e.call(t,r,i)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:bv(this.dimensions,this._getDimInfo,this),this.hostModel)),T6(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var r=this[e];kt(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return t.apply(this,[i].concat(SY(arguments)))})},n.internalField=function(){Dce=function(e){var t=e._invertedIndicesMap;Z(t,function(r,i){var a=e._dimInfos[i],o=a.ordinalMeta,s=e._store;if(o){r=t[i]=new Kht(o.categories.length);for(var l=0;l<r.length;l++)r[l]=Cce;for(var l=0;l<s.count();l++)r[s.get(a.storeDimIndex,l)]=l}})},aC=function(e,t,r){return ro(e._getCategory(t,r),null)},NP=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=aC(e,e._idDimIdx,t)),r==null&&(r=Xht+t),r},oC=function(e){return $e(e)||(e=e!=null?[e]:[]),e},sC=function(e){var t=new n(e._schema?e._schema:bv(e.dimensions,e._getDimInfo,e),e.hostModel);return T6(t,e),t},T6=function(e,t){Z(Zht.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,Z(Qht,function(r){e[r]=Bt(t[r])}),e._calculationInfo=Pe({},t._calculationInfo)},E6=function(e,t){var r=e._nameList,i=e._idList,a=e._nameDimIdx,o=e._idDimIdx,s=r[t],l=i[t];if(s==null&&a!=null&&(r[t]=s=aC(e,a,t)),l==null&&o!=null&&(i[t]=l=aC(e,o,t)),l==null&&s!=null){var c=e._nameRepeatCount,u=c[s]=(c[s]||0)+1;l=s,u>1&&(l+="__ec__"+u),i[t]=l}}}(),n}();function _2(n,e){rK(n)||(n=iK(n)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||n.dimensionsDefine||[],i=_t(),a=[],o=eft(n,t,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&mEe(o),l=r===n.dimensionsDefine,c=l?gEe(n):pEe(r),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(n,o));for(var d=_t(u),h=new xTe(o),f=0;f<h.length;f++)h[f]=-1;function m(O){var j=h[O];if(j<0){var L=r[O],B=jt(L)?L:{name:L},$=new eR,Y=B.name;Y!=null&&c.get(Y)!=null&&($.name=$.displayName=Y),B.type!=null&&($.type=B.type),B.displayName!=null&&($.displayName=B.displayName);var q=a.length;return h[O]=q,$.storeDimIndex=O,a.push($),$}return a[j]}if(!s)for(var f=0;f<o;f++)m(f);d.each(function(O,j){var L=Wr(O).slice();if(L.length===1&&!st(L[0])&&L[0]<0){d.set(j,!1);return}var B=d.set(j,[]);Z(L,function($,Y){var q=st($)?c.get($):$;q!=null&&q<o&&(B[Y]=q,y(m(q),j,Y))})});var v=0;Z(t,function(O){var j,L,B,$;if(st(O))j=O,$={};else{$=O,j=$.name;var Y=$.ordinalMeta;$.ordinalMeta=null,$=Pe({},$),$.ordinalMeta=Y,L=$.dimsDef,B=$.otherDims,$.name=$.coordDim=$.coordDimIndex=$.dimsDef=$.otherDims=null}var q=d.get(j);if(q!==!1){if(q=Wr(q),!q.length)for(var W=0;W<(L&&L.length||1);W++){for(;v<o&&m(v).coordDim!=null;)v++;v<o&&q.push(v++)}Z(q,function(X,te){var re=m(X);if(l&&$.type!=null&&(re.type=$.type),y(Rt(re,$),j,te),re.name==null&&L){var z=L[te];!jt(z)&&(z={name:z}),re.name=re.displayName=z.name,re.defaultTooltip=z.defaultTooltip}B&&Rt(re.otherDims,B)})}});function y(O,j,L){nTe.get(j)!=null?O.otherDims[j]=L:(O.coordDim=j,O.coordDimIndex=L,i.set(j,!0))}var w=e.generateCoord,_=e.generateCoordCount,S=_!=null;_=w?_||1:0;var A=w||"value";function C(O){O.name==null&&(O.name=O.coordDim)}if(s)Z(a,function(O){C(O)}),a.sort(function(O,j){return O.storeDimIndex-j.storeDimIndex});else for(var D=0;D<o;D++){var M=m(D),P=M.coordDim;P==null&&(M.coordDim=tft(A,i,S),M.coordDimIndex=0,(!w||_<=0)&&(M.isExtraCoord=!0),_--),C(M),M.type==null&&(oTe(n,D)===is.Must||M.isExtraCoord&&(M.otherDims.itemName!=null||M.otherDims.seriesName!=null))&&(M.type="ordinal")}return Jht(a),new hEe({source:n,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function Jht(n){for(var e=_t(),t=0;t<n.length;t++){var r=n[t],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function eft(n,e,t,r){var i=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,r||0);return Z(e,function(a){var o;jt(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function tft(n,e,t){if(t||e.hasKey(n)){for(var r=0;e.hasKey(n+r);)r++;n+=r}return e.set(n,!0),n}var nft=function(){function n(e){this.coordSysDims=[],this.axisMap=_t(),this.categoryAxisMap=_t(),this.coordSysName=e}return n}();function rft(n){var e=n.get("coordinateSystem"),t=new nft(e),r=ift[e];if(r)return r(n,t,t.axisMap,t.categoryAxisMap),t}var ift={cartesian2d:function(n,e,t,r){var i=n.getReferringComponents("xAxis",Va).models[0],a=n.getReferringComponents("yAxis",Va).models[0];e.coordSysDims=["x","y"],t.set("x",i),t.set("y",a),rS(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),rS(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(n,e,t,r){var i=n.getReferringComponents("singleAxis",Va).models[0];e.coordSysDims=["single"],t.set("single",i),rS(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(n,e,t,r){var i=n.getReferringComponents("polar",Va).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",a),t.set("angle",o),rS(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),rS(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(n,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(n,e,t,r){var i=n.ecModel,a=i.getComponent("parallel",n.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();Z(a.parallelAxisIndex,function(s,l){var c=i.getComponent("parallelAxis",s),u=o[l];t.set(u,c),rS(c)&&(r.set(u,c),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function rS(n){return n.get("type")==="category"}function aft(n,e,t){t=t||{};var r=t.byIndex,i=t.stackedCoordDimension,a,o,s;oft(e)?a=e:(o=e.schema,a=o.dimensions,s=e.store);var l=!!(n&&n.get("stack")),c,u,d,h;if(Z(a,function(_,S){st(_)&&(a[S]=_={name:_}),l&&!_.isExtraCoord&&(!r&&!c&&_.ordinalMeta&&(c=_),!u&&_.type!=="ordinal"&&_.type!=="time"&&(!i||i===_.coordDim)&&(u=_))}),u&&!r&&!c&&(r=!0),u){d="__\0ecstackresult_"+n.id,h="__\0ecstackedover_"+n.id,c&&(c.createInvertedIndices=!0);var f=u.coordDim,m=u.type,v=0;Z(a,function(_){_.coordDim===f&&v++});var y={name:d,coordDim:f,coordDimIndex:v,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},w={name:h,coordDim:h,coordDimIndex:v+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(y.storeDimIndex=s.ensureCalculationDimension(h,m),w.storeDimIndex=s.ensureCalculationDimension(d,m)),o.appendCalculationDimension(y),o.appendCalculationDimension(w)):(a.push(y),a.push(w))}return{stackedDimension:u&&u.name,stackedByDimension:c&&c.name,isStackedByIndex:r,stackedOverDimension:h,stackResultDimension:d}}function oft(n){return!fEe(n.schema)}function gy(n,e){return!!e&&e===n.getCalculationInfo("stackedDimension")}function vEe(n,e){return gy(n,e)?n.getCalculationInfo("stackResultDimension"):e}function sft(n,e){var t=n.get("coordinateSystem"),r=b2.get(t),i;return e&&e.coordSysDims&&(i=Ue(e.coordSysDims,function(a){var o={name:a},s=e.axisMap.get(a);if(s){var l=s.get("type");o.type=rL(l)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function lft(n,e,t){var r,i;return t&&Z(n,function(a,o){var s=a.coordDim,l=t.categoryAxisMap.get(s);l&&(r==null&&(r=o),a.ordinalMeta=l.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(n[r].otherDims.itemName=0),r}function Zg(n,e,t){t=t||{};var r=e.getSourceManager(),i,a=!1;n?(a=!0,i=iK(n)):(i=r.getSource(),a=i.sourceFormat===td);var o=rft(e),s=sft(e,o),l=t.useEncodeDefaulter,c=kt(l)?l:l?en(aTe,s,e):null,u={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!a},d=_2(i,u),h=lft(d.dimensions,t.createInvertedIndices,o),f=a?null:r.getSharedDataStore(d),m=aft(e,{schema:d,store:f}),v=new xl(d,e);v.setCalculationInfo(m);var y=h!=null&&cft(i)?function(w,_,S,A){return A===h?S:this.defaultDimValueGetter(w,_,S,A)}:null;return v.hasItemOption=!1,v.initData(a?i:f,null,y),v}function cft(n){if(n.sourceFormat===td){var e=uft(n.data||[]);return!$e(OT(e))}}function uft(n){for(var e=0;e<n.length&&n[e]==null;)e++;return n[e]}var Gf=function(){function n(e){this._setting=e||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(e){return this._setting[e]},n.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},n.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t)},n.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(e){this._isBlank=e},n}();w5(Gf);var dft=0,C8=function(){function n(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++dft}return n.createByAxisModel=function(e){var t=e.option,r=t.data,i=r&&Ue(r,hft);return new n({categories:i,needCollect:!i,deduplication:t.dedplication!==!1})},n.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},n.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!st(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var i=this._getOrCreateMap();return t=i.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,i.set(e,t)):t=NaN),t},n.prototype._getOrCreateMap=function(){return this._map||(this._map=_t(this.categories))},n}();function hft(n){return jt(n)&&n.value!=null?n.value:n+""}function D8(n){return n.type==="interval"||n.type==="log"}function fft(n,e,t,r){var i={},a=n[1]-n[0],o=i.interval=HSe(a/e);t!=null&&o<t&&(o=i.interval=t),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=yEe(o),l=i.niceTickExtent=[va(Math.ceil(n[0]/o)*o,s),va(Math.floor(n[1]/o)*o,s)];return pft(l,n),i}function A6(n){var e=Math.pow(10,MY(n)),t=n/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,va(t*e)}function yEe(n){return bf(n)+2}function kce(n,e,t){n[e]=Math.max(Math.min(n[e],t[1]),t[0])}function pft(n,e){!isFinite(n[0])&&(n[0]=e[0]),!isFinite(n[1])&&(n[1]=e[1]),kce(n,0,e),kce(n,1,e),n[0]>n[1]&&(n[0]=n[1])}function U5(n,e){return n>=e[0]&&n<=e[1]}function V5(n,e){return e[1]===e[0]?.5:(n-e[0])/(e[1]-e[0])}function z5(n,e){return n*(e[1]-e[0])+e[0]}var H5=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new C8({})),$e(i)&&(i=new C8({categories:Ue(i,function(a){return jt(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:st(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),U5(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),V5(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(z5(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,i=r[0];i<=r[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var c=r[o];i[o]=c,a[c]=o}for(var u=0;o<s;++o){for(;a[u]!=null;)u++;i.push(u),a[u]=o}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(Gf);Gf.registerClass(H5);var bb=va,Lg=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return U5(t,this._extent)},e.prototype.normalize=function(t){return V5(t,this._extent)},e.prototype.scale=function(t){return z5(t,this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(r)||(i[1]=parseFloat(r))},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=yEe(t)},e.prototype.getTicks=function(t){var r=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;i[0]<a[0]&&(t?s.push({value:bb(a[0]-r,o)}):s.push({value:i[0]}));for(var c=a[0];c<=a[1]&&(s.push({value:c}),c=bb(c+r,o),c!==s[s.length-1].value);)if(s.length>l)return[];var u=s.length?s[s.length-1].value:a[1];return i[1]>u&&(t?s.push({value:bb(u+r,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],c=0,u=[],d=s.value-l.value,h=d/t;c<t-1;){var f=bb(l.value+(c+1)*h);f>a[0]&&f<a[1]&&u.push(f),c++}i.push(u)}return i},e.prototype.getLabel=function(t,r){if(t==null)return"";var i=r&&r.precision;i==null?i=bf(t.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=bb(t.value,i,!0);return X1e(a)},e.prototype.calcNiceTicks=function(t,r,i){t=t||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=fft(a,t,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);t.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(r[0]=bb(Math.floor(r[0]/o)*o)),t.fixMax||(r[1]=bb(Math.ceil(r[1]/o)*o))},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e}(Gf);Gf.registerClass(Lg);var bEe=typeof Float32Array<"u",gft=bEe?Float32Array:Array;function _f(n){return $e(n)?bEe?new Float32Array(n):n:new gft(n)}var k8="__ec_stack_";function wEe(n){return n.get("stack")||k8+n.seriesIndex}function gK(n){return n.dim+n.index}function mft(n){var e=[],t=n.axis,r="axis0";if(t.type==="category"){for(var i=t.getBandWidth(),a=0;a<n.count;a++)e.push(Rt({bandWidth:i,axisKey:r,stackId:k8+a},n));for(var o=SEe(e),s=[],a=0;a<n.count;a++){var l=o[r][k8+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function _Ee(n,e){var t=[];return e.eachSeriesByType(n,function(r){AEe(r)&&t.push(r)}),t}function vft(n){var e={};Z(n,function(l){var c=l.coordinateSystem,u=c.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var d=l.getData(),h=u.dim+"_"+u.index,f=d.getDimensionIndex(d.mapDimension(u.dim)),m=d.getStore(),v=0,y=m.count();v<y;++v){var w=m.get(f,v);e[h]?e[h].push(w):e[h]=[w]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(l,c){return l-c});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}t[r]=a}}return t}function xEe(n){var e=vft(n),t=[];return Z(n,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,c=e[l],u=Math.abs(o[1]-o[0]),d=a.scale.getExtent(),h=Math.abs(d[1]-d[0]);s=c?u/h*c:u}else{var f=r.getData();s=Math.abs(o[1]-o[0])/f.count()}var m=Je(r.get("barWidth"),s),v=Je(r.get("barMaxWidth"),s),y=Je(r.get("barMinWidth")||(CEe(r)?.5:1),s),w=r.get("barGap"),_=r.get("barCategoryGap");t.push({bandWidth:s,barWidth:m,barMaxWidth:v,barMinWidth:y,barGap:w,barCategoryGap:_,axisKey:gK(a),stackId:wEe(r)})}),SEe(t)}function SEe(n){var e={};Z(n,function(r,i){var a=r.axisKey,o=r.bandWidth,s=e[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;e[a]=s;var c=r.stackId;l[c]||s.autoWidthCount++,l[c]=l[c]||{width:0,maxWidth:0};var u=r.barWidth;u&&!l[c].width&&(l[c].width=u,u=Math.min(s.remainedWidth,u),s.remainedWidth-=u);var d=r.barMaxWidth;d&&(l[c].maxWidth=d);var h=r.barMinWidth;h&&(l[c].minWidth=h);var f=r.barGap;f!=null&&(s.gap=f);var m=r.barCategoryGap;m!=null&&(s.categoryGap=m)});var t={};return Z(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=Vn(a).length;s=Math.max(35-l*4,15)+"%"}var c=Je(s,o),u=Je(r.gap,1),d=r.remainedWidth,h=r.autoWidthCount,f=(d-c)/(h+(h-1)*u);f=Math.max(f,0),Z(a,function(w){var _=w.maxWidth,S=w.minWidth;if(w.width){var A=w.width;_&&(A=Math.min(A,_)),S&&(A=Math.max(A,S)),w.width=A,d-=A+u*A,h--}else{var A=f;_&&_<A&&(A=Math.min(_,d)),S&&S>A&&(A=S),A!==f&&(w.width=A,d-=A+u*A,h--)}}),f=(d-c)/(h+(h-1)*u),f=Math.max(f,0);var m=0,v;Z(a,function(w,_){w.width||(w.width=f),v=w,m+=w.width*(1+u)}),v&&(m-=v.width*u);var y=-m/2;Z(a,function(w,_){t[i][_]=t[i][_]||{bandWidth:o,offset:y,width:w.width},y+=w.width*(1+u)})}),t}function yft(n,e,t){if(n&&e){var r=n[gK(e)];return r}}function TEe(n,e){var t=_Ee(n,e),r=xEe(t);Z(t,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=wEe(i),c=r[gK(s)][l],u=c.offset,d=c.width;a.setLayout({bandWidth:c.bandWidth,offset:u,size:d})})}function EEe(n){return{seriesType:n,plan:UT(),reset:function(e){if(AEe(e)){var t=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),o=t.getDimensionIndex(t.mapDimension(a.dim)),s=t.getDimensionIndex(t.mapDimension(i.dim)),l=e.get("showBackground",!0),c=t.mapDimension(a.dim),u=t.getCalculationInfo("stackResultDimension"),d=gy(t,c)&&!!t.getCalculationInfo("stackedOnSeries"),h=a.isHorizontal(),f=bft(i,a),m=CEe(e),v=e.get("barMinHeight")||0,y=u&&t.getDimensionIndex(u),w=t.getLayout("size"),_=t.getLayout("offset");return{progress:function(S,A){for(var C=S.count,D=m&&_f(C*3),M=m&&l&&_f(C*3),P=m&&_f(C),O=r.master.getRect(),j=h?O.width:O.height,L,B=A.getStore(),$=0;(L=S.next())!=null;){var Y=B.get(d?y:o,L),q=B.get(s,L),W=f,X=void 0;d&&(X=+Y-B.get(o,L));var te=void 0,re=void 0,z=void 0,oe=void 0;if(h){var le=r.dataToPoint([Y,q]);if(d){var ee=r.dataToPoint([X,q]);W=ee[0]}te=W,re=le[1]+_,z=le[0]-W,oe=w,Math.abs(z)<v&&(z=(z<0?-1:1)*v)}else{var le=r.dataToPoint([q,Y]);if(d){var ee=r.dataToPoint([q,X]);W=ee[1]}te=le[0]+_,re=W,z=w,oe=le[1]-W,Math.abs(oe)<v&&(oe=(oe<=0?-1:1)*v)}m?(D[$]=te,D[$+1]=re,D[$+2]=h?z:oe,M&&(M[$]=h?O.x:te,M[$+1]=h?re:O.y,M[$+2]=j),P[L]=L):A.setItemLayout(L,{x:te,y:re,width:z,height:oe}),$+=3}m&&A.setLayout({largePoints:D,largeDataIndices:P,largeBackgroundPoints:M,valueAxisHorizontal:h})}}}}}}function AEe(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function CEe(n){return n.pipelineContext&&n.pipelineContext.large}function bft(n,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var wft=function(n,e,t,r){for(;t<r;){var i=t+r>>>1;n[i][1]<e?t=i+1:r=i}return t},mK=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return M5(t.value,ble[tut(d1(this._minLevelUnit))]||ble.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return nut(t,r,i,o,a)},e.prototype.getTicks=function(){var t=this._interval,r=this._extent,i=[];if(!t)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=Cft(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1]&&(r[0]-=Uu,r[1]+=Uu),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-Uu}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,i){t=t||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=LP.length,l=Math.min(wft(LP,this._approxInterval,0,s),s-1);this._interval=LP[l][1],this._minLevelUnit=LP[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return ur(t)?t:+jf(t)},e.prototype.contain=function(t){return U5(this.parse(t),this._extent)},e.prototype.normalize=function(t){return V5(this.parse(t),this._extent)},e.prototype.scale=function(t){return z5(t,this._extent)},e.type="time",e}(Lg),LP=[["second",KY],["minute",XY],["hour",CD],["quarter-day",CD*6],["half-day",CD*12],["day",Uu*1.2],["half-week",Uu*3.5],["week",Uu*7],["month",Uu*31],["quarter",Uu*95],["half-year",yle/2],["year",yle]];function _ft(n,e,t,r){var i=jf(e),a=jf(t),o=function(m){return wle(i,m,r)===wle(a,m,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},c=function(){return l()&&o("day")},u=function(){return c()&&o("hour")},d=function(){return u()&&o("minute")},h=function(){return d()&&o("second")},f=function(){return h()&&o("millisecond")};switch(n){case"year":return s();case"month":return l();case"day":return c();case"hour":return u();case"minute":return d();case"second":return h();case"millisecond":return f()}}function xft(n,e){return n/=Uu,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function Sft(n){var e=30*Uu;return n/=e,n>6?6:n>3?3:n>2?2:1}function Tft(n){return n/=CD,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function Ice(n,e){return n/=e?XY:KY,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function Eft(n){return HSe(n)}function Aft(n,e,t){var r=new Date(n);switch(d1(e)){case"year":case"month":r[H1e(t)](0);case"day":r[q1e(t)](1);case"hour":r[G1e(t)](0);case"minute":r[W1e(t)](0);case"second":r[Y1e(t)](0),r[K1e(t)](0)}return r.getTime()}function Cft(n,e,t,r){var i=1e4,a=V1e,o=0;function s(j,L,B,$,Y,q,W){for(var X=new Date(L),te=L,re=X[$]();te<B&&te<=r[1];)W.push({value:te}),re+=j,X[Y](re),te=X.getTime();W.push({value:te,notAdd:!0})}function l(j,L,B){var $=[],Y=!L.length;if(!_ft(d1(j),r[0],r[1],t)){Y&&(L=[{value:Aft(new Date(r[0]),j,t)},{value:r[1]}]);for(var q=0;q<L.length-1;q++){var W=L[q].value,X=L[q+1].value;if(W!==X){var te=void 0,re=void 0,z=void 0,oe=!1;switch(j){case"year":te=Math.max(1,Math.round(e/Uu/365)),re=ZY(t),z=rut(t);break;case"half-year":case"quarter":case"month":te=Sft(e),re=h1(t),z=H1e(t);break;case"week":case"half-week":case"day":te=xft(e),re=P5(t),z=q1e(t),oe=!0;break;case"half-day":case"quarter-day":case"hour":te=Tft(e),re=tI(t),z=G1e(t);break;case"minute":te=Ice(e,!0),re=O5(t),z=W1e(t);break;case"second":te=Ice(e,!1),re=R5(t),z=Y1e(t);break;case"millisecond":te=Eft(e),re=N5(t),z=K1e(t);break}s(te,W,X,re,z,oe,$),j==="year"&&B.length>1&&q===0&&B.unshift({value:B[0].value-te})}}for(var q=0;q<$.length;q++)B.push($[q]);return $}}for(var c=[],u=[],d=0,h=0,f=0;f<a.length&&o++<i;++f){var m=d1(a[f]);if(eut(a[f])){l(a[f],c[c.length-1]||[],u);var v=a[f+1]?d1(a[f+1]):null;if(m!==v){if(u.length){h=d,u.sort(function(j,L){return j.value-L.value});for(var y=[],w=0;w<u.length;++w){var _=u[w].value;(w===0||u[w-1].value!==_)&&(y.push(u[w]),_>=r[0]&&_<=r[1]&&d++)}var S=(r[1]-r[0])/e;if(d>S*1.5&&h>S/1.5||(c.push(y),d>S||n===a[f]))break}u=[]}}}for(var A=Cr(Ue(c,function(j){return Cr(j,function(L){return L.value>=r[0]&&L.value<=r[1]&&!L.notAdd})}),function(j){return j.length>0}),C=[],D=A.length-1,f=0;f<A.length;++f)for(var M=A[f],P=0;P<M.length;++P)C.push({value:M[P].value,level:D-f});C.sort(function(j,L){return j.value-L.value});for(var O=[],f=0;f<C.length;++f)(f===0||C[f].value!==C[f-1].value)&&O.push(C[f]);return O}Gf.registerClass(mK);var Mce=Gf.prototype,MD=Lg.prototype,Dft=va,kft=Math.floor,Ift=Math.ceil,jP=Math.pow,jd=Math.log,vK=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Lg,t._interval=0,t}return e.prototype.getTicks=function(t){var r=this._originalScale,i=this._extent,a=r.getExtent(),o=MD.getTicks.call(this,t);return Ue(o,function(s){var l=s.value,c=va(jP(this.base,l));return c=l===i[0]&&this._fixMin?FP(c,a[0]):c,c=l===i[1]&&this._fixMax?FP(c,a[1]):c,{value:c}},this)},e.prototype.setExtent=function(t,r){var i=jd(this.base);t=jd(Math.max(0,t))/i,r=jd(Math.max(0,r))/i,MD.setExtent.call(this,t,r)},e.prototype.getExtent=function(){var t=this.base,r=Mce.getExtent.call(this);r[0]=jP(t,r[0]),r[1]=jP(t,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=FP(r[0],a[0])),this._fixMax&&(r[1]=FP(r[1],a[1])),r},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var r=this.base;t[0]=jd(t[0])/jd(r),t[1]=jd(t[1])/jd(r),Mce.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=Rst(i),o=t/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[va(Ift(r[0]/a)*a),va(kft(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){MD.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=jd(t)/jd(this.base),U5(t,this._extent)},e.prototype.normalize=function(t){return t=jd(t)/jd(this.base),V5(t,this._extent)},e.prototype.scale=function(t){return t=z5(t,this._extent),jP(this.base,t)},e.type="log",e}(Gf),DEe=vK.prototype;DEe.getMinorTicks=MD.getMinorTicks;DEe.getLabel=MD.getLabel;function FP(n,e){return Dft(n,bf(e))}Gf.registerClass(vK);var Mft=function(){function n(e,t,r){this._prepareParams(e,t,r)}return n.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var a=t.get("min",!0);a==null&&(a=t.get("startValue",!0));var o=this._modelMinRaw=a;kt(o)?this._modelMinNum=$P(e,o({min:r[0],max:r[1]})):o!=="dataMin"&&(this._modelMinNum=$P(e,o));var s=this._modelMaxRaw=t.get("max",!0);if(kt(s)?this._modelMaxNum=$P(e,s({min:r[0],max:r[1]})):s!=="dataMax"&&(this._modelMaxNum=$P(e,s)),i)this._axisDataLen=t.getCategories().length;else{var l=t.get("boundaryGap"),c=$e(l)?l:[l||0,l||0];typeof c[0]=="boolean"||typeof c[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ch(c[0],1),ch(c[1],1)]}},n.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=e?null:r-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,c=s!=null,u=l!=null;s==null&&(s=e?i?0:NaN:t-a[0]*o),l==null&&(l=e?i?i-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var d=qk(s)||qk(l)||e&&!i;this._needCrossZero&&(s>0&&l>0&&!c&&(s=0),s<0&&l<0&&!u&&(l=0));var h=this._determinedMin,f=this._determinedMax;return h!=null&&(s=h,c=!0),f!=null&&(l=f,u=!0),{min:s,max:l,minFixed:c,maxFixed:u,isBlank:d}},n.prototype.modifyDataMinMax=function(e,t){this[Oft[e]]=t},n.prototype.setDeterminedMinMax=function(e,t){var r=Pft[e];this[r]=t},n.prototype.freeze=function(){this.frozen=!0},n}(),Pft={min:"_determinedMin",max:"_determinedMax"},Oft={min:"_dataMin",max:"_dataMax"};function kEe(n,e,t){var r=n.rawExtentInfo;return r||(r=new Mft(n,e,t),n.rawExtentInfo=r,r)}function $P(n,e){return e==null?null:qk(e)?NaN:n.parse(e)}function IEe(n,e){var t=n.type,r=kEe(n,e,n.getExtent()).calculate();n.setBlank(r.isBlank);var i=r.min,a=r.max,o=e.ecModel;if(o&&t==="time"){var s=_Ee("bar",o),l=!1;if(Z(s,function(d){l=l||d.getBaseAxis()===e.axis}),l){var c=xEe(s),u=Rft(i,a,e,c);i=u.min,a=u.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function Rft(n,e,t,r){var i=t.axis.getExtent(),a=Math.abs(i[1]-i[0]),o=yft(r,t.axis);if(o===void 0)return{min:n,max:e};var s=1/0;Z(o,function(f){s=Math.min(f.offset,s)});var l=-1/0;Z(o,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var c=s+l,u=e-n,d=1-(s+l)/a,h=u/d-u;return e+=h*(l/c),n-=h*(s/c),{min:n,max:e}}function nT(n,e){var t=e,r=IEe(n,t),i=r.extent,a=t.get("splitNumber");n instanceof vK&&(n.base=t.get("logBase"));var o=n.type,s=t.get("interval"),l=o==="interval"||o==="time";n.setExtent(i[0],i[1]),n.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),s!=null&&n.setInterval&&n.setInterval(s)}function q5(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new H5({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new mK({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(Gf.getClass(e)||Lg)}}function Nft(n){var e=n.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function HT(n){var e=n.getLabelModel().get("formatter"),t=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(r){return function(i,a){return n.scale.getFormattedLabel(i,a,r)}}(e):st(e)?function(r){return function(i){var a=n.scale.getLabel(i),o=r.replace("{value}",a??"");return o}}(e):kt(e)?function(r){return function(i,a){return t!=null&&(a=i.value-t),r(yK(n,i),a,i.level!=null?{level:i.level}:null)}}(e):function(r){return n.scale.getLabel(r)}}function yK(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function Lft(n){var e=n.model,t=n.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var r,i,a=t.getExtent();t instanceof H5?i=t.count():(r=t.getTicks(),i=r.length);var o=n.getLabelModel(),s=HT(n),l,c=1;i>40&&(c=Math.ceil(i/40));for(var u=0;u<i;u+=c){var d=r?r[u]:{value:a[0]+u},h=s(d,u),f=o.getTextRect(h),m=jft(f,o.get("rotate")||0);l?l.union(m):l=m}return l}}function jft(n,e){var t=e*Math.PI/180,r=n.width,i=n.height,a=r*Math.abs(Math.cos(t))+Math.abs(i*Math.sin(t)),o=r*Math.abs(Math.sin(t))+Math.abs(i*Math.cos(t)),s=new pn(n.x,n.y,a,o);return s}function bK(n){var e=n.get("interval");return e??"auto"}function MEe(n){return n.type==="category"&&bK(n.getLabelModel())===0}function iL(n,e){var t={};return Z(n.mapDimensionsAll(e),function(r){t[vEe(n,r)]=!0}),Vn(t)}function Fft(n,e,t){e&&Z(iL(e,t),function(r){var i=e.getApproximateExtent(r);i[0]<n[0]&&(n[0]=i[0]),i[1]>n[1]&&(n[1]=i[1])})}var x2=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},n.prototype.getCoordSysModel=function(){},n}(),$ft=1e-8;function Pce(n,e){return Math.abs(n-e)<$ft}function Fb(n,e,t){var r=0,i=n[0];if(!i)return!1;for(var a=1;a<n.length;a++){var o=n[a];r+=Jp(i[0],i[1],o[0],o[1],e,t),i=o}var s=n[0];return(!Pce(i[0],s[0])||!Pce(i[1],s[1]))&&(r+=Jp(i[0],i[1],s[0],s[1],e,t)),r!==0}var Bft=[];function C6(n,e){for(var t=0;t<n.length;t++)hs(n[t],n[t],e)}function Oce(n,e,t,r){for(var i=0;i<n.length;i++){var a=n[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(Fv(e,e,a),$v(t,t,a))}}function Uft(n){for(var e=0,t=0,r=0,i=n.length,a=n[i-1][0],o=n[i-1][1],s=0;s<i;s++){var l=n[s][0],c=n[s][1],u=a*c-l*o;e+=u,t+=(a+l)*u,r+=(o+c)*u,a=l,o=c}return e?[t/e/3,r/e/3,e]:[n[0][0]||0,n[0][1]||0]}var PEe=function(){function n(e){this.name=e}return n.prototype.setCenter=function(e){this._center=e},n.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},n}(),Rce=function(){function n(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return n}(),Nce=function(){function n(e){this.type="linestring",this.points=e}return n}(),OEe=function(n){Te(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.type="geoJSON",a.geometries=r,a._center=i&&[i[0],i[1]],a}return e.prototype.calcCenter=function(){for(var t=this.geometries,r,i=0,a=0;a<t.length;a++){var o=t[a],s=o.exterior,l=s&&s.length;l>i&&(r=o,i=l)}if(r)return Uft(r.exterior);var c=this.getBoundingRect();return[c.x+c.width/2,c.y+c.height/2]},e.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return Z(o,function(s){s.type==="polygon"?Oce(s.exterior,i,a,t):Z(s.points,function(l){Oce(l,i,a,t)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),r=new pn(i[0],i[1],a[0]-i[0],a[1]-i[1]),t||(this._rect=r),r},e.prototype.contain=function(t){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(t[0],t[1]))return!1;e:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var l=s.exterior,c=s.interiors;if(Fb(l,t[0],t[1])){for(var u=0;u<(c?c.length:0);u++)if(Fb(c[u],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var l=new pn(t,r,i,a),c=o.calculateTransform(l),u=this.geometries,d=0;d<u.length;d++){var h=u[d];h.type==="polygon"?(C6(h.exterior,c),Z(h.interiors,function(f){C6(f,c)})):Z(h.points,function(f){C6(f,c)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var r=new e(t,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(PEe),Vft=function(n){Te(e,n);function e(t,r){var i=n.call(this,t)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],a=m5(Bft),o=t;o&&!o.isGeoSVGGraphicRoot;)yg(a,o.getLocalTransform(),a),o=o.parent;return PT(a,a),hs(i,i,a),i},e}(PEe);function zft(n){if(!n.UTF8Encoding)return n;var e=n,t=e.UTF8Scale;t==null&&(t=1024);var r=e.features;return Z(r,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=REe(s,o,t);break;case"Polygon":D6(s,o,t);break;case"MultiLineString":D6(s,o,t);break;case"MultiPolygon":Z(s,function(l,c){return D6(l,o[c],t)})}}),e.UTF8Encoding=!1,e}function D6(n,e,t){for(var r=0;r<n.length;r++)n[r]=REe(n[r],e[r],t)}function REe(n,e,t){for(var r=[],i=e[0],a=e[1],o=0;o<n.length;o+=2){var s=n.charCodeAt(o)-64,l=n.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=i,l+=a,i=s,a=l,r.push([s/t,l/t])}return r}function Hft(n,e){return n=zft(n),Ue(Cr(n.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var r=t.properties,i=t.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new Rce(o[0],o.slice(1)));break;case"MultiPolygon":Z(i.coordinates,function(l){l[0]&&a.push(new Rce(l[0],l.slice(1)))});break;case"LineString":a.push(new Nce([i.coordinates]));break;case"MultiLineString":a.push(new Nce(i.coordinates))}var s=new OEe(r[e||"name"],a,r.cp);return s.properties=r,s})}var sI=tr();function NEe(n,e){var t=Ue(e,function(r){return n.scale.parse(r)});return n.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function qft(n){var e=n.getLabelModel().get("customValues");if(e){var t=HT(n),r=n.scale.getExtent(),i=NEe(n,e),a=Cr(i,function(o){return o>=r[0]&&o<=r[1]});return{labels:Ue(a,function(o){var s={value:o};return{formattedLabel:t(s),rawLabel:n.scale.getLabel(s),tickValue:o}})}}return n.type==="category"?Wft(n):Kft(n)}function Gft(n,e){var t=n.getTickModel().get("customValues");if(t){var r=n.scale.getExtent(),i=NEe(n,t);return{ticks:Cr(i,function(a){return a>=r[0]&&a<=r[1]})}}return n.type==="category"?Yft(n,e):{ticks:Ue(n.scale.getTicks(),function(a){return a.value})}}function Wft(n){var e=n.getLabelModel(),t=LEe(n,e);return!e.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function LEe(n,e){var t=jEe(n,"labels"),r=bK(e),i=FEe(t,r);if(i)return i;var a,o;return kt(r)?a=UEe(n,r):(o=r==="auto"?Xft(n):r,a=BEe(n,o)),$Ee(t,r,{labels:a,labelCategoryInterval:o})}function Yft(n,e){var t=jEe(n,"ticks"),r=bK(e),i=FEe(t,r);if(i)return i;var a,o;if((!e.get("show")||n.scale.isBlank())&&(a=[]),kt(r))a=UEe(n,r,!0);else if(r==="auto"){var s=LEe(n,n.getLabelModel());o=s.labelCategoryInterval,a=Ue(s.labels,function(l){return l.tickValue})}else o=r,a=BEe(n,o,!0);return $Ee(t,r,{ticks:a,tickCategoryInterval:o})}function Kft(n){var e=n.scale.getTicks(),t=HT(n);return{labels:Ue(e,function(r,i){return{level:r.level,formattedLabel:t(r,i),rawLabel:n.scale.getLabel(r),tickValue:r.value}})}}function jEe(n,e){return sI(n)[e]||(sI(n)[e]=[])}function FEe(n,e){for(var t=0;t<n.length;t++)if(n[t].key===e)return n[t].value}function $Ee(n,e,t){return n.push({key:e,value:t}),t}function Xft(n){var e=sI(n).autoInterval;return e??(sI(n).autoInterval=n.calculateCategoryInterval())}function Zft(n){var e=Qft(n),t=HT(n),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=n.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],c=n.dataToCoord(l+1)-n.dataToCoord(l),u=Math.abs(c*Math.cos(r)),d=Math.abs(c*Math.sin(r)),h=0,f=0;l<=a[1];l+=s){var m=0,v=0,y=d2(t({value:l}),e.font,"center","top");m=y.width*1.3,v=y.height*1.3,h=Math.max(h,m,7),f=Math.max(f,v,7)}var w=h/u,_=f/d;isNaN(w)&&(w=1/0),isNaN(_)&&(_=1/0);var S=Math.max(0,Math.floor(Math.min(w,_))),A=sI(n.model),C=n.getExtent(),D=A.lastAutoInterval,M=A.lastTickCount;return D!=null&&M!=null&&Math.abs(D-S)<=1&&Math.abs(M-o)<=1&&D>S&&A.axisExtent0===C[0]&&A.axisExtent1===C[1]?S=D:(A.lastTickCount=o,A.lastAutoInterval=S,A.axisExtent0=C[0],A.axisExtent1=C[1]),S}function Qft(n){var e=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function BEe(n,e,t){var r=HT(n),i=n.scale,a=i.getExtent(),o=n.getLabelModel(),s=[],l=Math.max((e||0)+1,1),c=a[0],u=i.count();c!==0&&l>1&&u/l>2&&(c=Math.round(Math.ceil(c/l)*l));var d=MEe(n),h=o.get("showMinLabel")||d,f=o.get("showMaxLabel")||d;h&&c!==a[0]&&v(a[0]);for(var m=c;m<=a[1];m+=l)v(m);f&&m-l!==a[1]&&v(a[1]);function v(y){var w={value:y};s.push(t?y:{formattedLabel:r(w),rawLabel:i.getLabel(w),tickValue:y})}return s}function UEe(n,e,t){var r=n.scale,i=HT(n),a=[];return Z(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;e(o.value,s)&&a.push(t?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),a}var Lce=[0,1],fh=function(){function n(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return n.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return e>=r&&e<=i},n.prototype.containData=function(e){return this.scale.contain(e)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(e){return VSe(e||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},n.prototype.dataToCoord=function(e,t){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(r=r.slice(),jce(r,i.count())),kr(e,Lce,r,t)},n.prototype.coordToData=function(e,t){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),jce(r,i.count()));var a=kr(e,r,Lce,t);return this.scale.scale(a)},n.prototype.pointToData=function(e,t){},n.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=Gft(this,t),i=r.ticks,a=Ue(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return Jft(this,a,o,e.clamp),a},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),i=Ue(r,function(a){return Ue(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},n.prototype.getViewLabels=function(){return qft(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},n.prototype.calculateCategoryInterval=function(){return Zft(this)},n}();function jce(n,e){var t=n[1]-n[0],r=e,i=t/r/2;n[0]+=i,n[1]-=i}function Jft(n,e,t,r){var i=e.length;if(!n.onBand||t||!i)return;var a=n.getExtent(),o,s;if(i===1)e[0].coord=a[0],o=e[1]={coord:a[1],tickValue:e[0].tickValue};else{var l=e[i-1].tickValue-e[0].tickValue,c=(e[i-1].coord-e[0].coord)/l;Z(e,function(f){f.coord-=c/2});var u=n.scale.getExtent();s=1+u[1]-e[i-1].tickValue,o={coord:e[i-1].coord+c*s,tickValue:u[1]+1},e.push(o)}var d=a[0]>a[1];h(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&h(a[0],e[0].coord)&&e.unshift({coord:a[0]}),h(a[1],o.coord)&&(r?o.coord=a[1]:e.pop()),r&&h(o.coord,a[1])&&e.push({coord:a[1]});function h(f,m){return f=va(f),m=va(m),d?f>m:f<m}}var lC=Math.PI*2,wb=Ff.CMD,ept=["top","right","bottom","left"];function tpt(n,e,t,r,i){var a=t.width,o=t.height;switch(n){case"top":r.set(t.x+a/2,t.y-e),i.set(0,-1);break;case"bottom":r.set(t.x+a/2,t.y+o+e),i.set(0,1);break;case"left":r.set(t.x-e,t.y+o/2),i.set(-1,0);break;case"right":r.set(t.x+a+e,t.y+o/2),i.set(1,0);break}}function npt(n,e,t,r,i,a,o,s,l){o-=n,s-=e;var c=Math.sqrt(o*o+s*s);o/=c,s/=c;var u=o*t+n,d=s*t+e;if(Math.abs(r-i)%lC<1e-4)return l[0]=u,l[1]=d,c-t;if(a){var h=r;r=zc(i),i=zc(h)}else r=zc(r),i=zc(i);r>i&&(i+=lC);var f=Math.atan2(s,o);if(f<0&&(f+=lC),f>=r&&f<=i||f+lC>=r&&f+lC<=i)return l[0]=u,l[1]=d,c-t;var m=t*Math.cos(r)+n,v=t*Math.sin(r)+e,y=t*Math.cos(i)+n,w=t*Math.sin(i)+e,_=(m-o)*(m-o)+(v-s)*(v-s),S=(y-o)*(y-o)+(w-s)*(w-s);return _<S?(l[0]=m,l[1]=v,Math.sqrt(_)):(l[0]=y,l[1]=w,Math.sqrt(S))}function aL(n,e,t,r,i,a,o,s){var l=i-n,c=a-e,u=t-n,d=r-e,h=Math.sqrt(u*u+d*d);u/=h,d/=h;var f=l*u+c*d,m=f/h;s&&(m=Math.min(Math.max(m,0),1)),m*=h;var v=o[0]=n+m*u,y=o[1]=e+m*d;return Math.sqrt((v-i)*(v-i)+(y-a)*(y-a))}function VEe(n,e,t,r,i,a,o){t<0&&(n=n+t,t=-t),r<0&&(e=e+r,r=-r);var s=n+t,l=e+r,c=o[0]=Math.min(Math.max(i,n),s),u=o[1]=Math.min(Math.max(a,e),l);return Math.sqrt((c-i)*(c-i)+(u-a)*(u-a))}var Gd=[];function rpt(n,e,t){var r=VEe(e.x,e.y,e.width,e.height,n.x,n.y,Gd);return t.set(Gd[0],Gd[1]),r}function ipt(n,e,t){for(var r=0,i=0,a=0,o=0,s,l,c=1/0,u=e.data,d=n.x,h=n.y,f=0;f<u.length;){var m=u[f++];f===1&&(r=u[f],i=u[f+1],a=r,o=i);var v=c;switch(m){case wb.M:a=u[f++],o=u[f++],r=a,i=o;break;case wb.L:v=aL(r,i,u[f],u[f+1],d,h,Gd,!0),r=u[f++],i=u[f++];break;case wb.C:v=TSe(r,i,u[f++],u[f++],u[f++],u[f++],u[f],u[f+1],d,h,Gd),r=u[f++],i=u[f++];break;case wb.Q:v=ASe(r,i,u[f++],u[f++],u[f],u[f+1],d,h,Gd),r=u[f++],i=u[f++];break;case wb.A:var y=u[f++],w=u[f++],_=u[f++],S=u[f++],A=u[f++],C=u[f++];f+=1;var D=!!(1-u[f++]);s=Math.cos(A)*_+y,l=Math.sin(A)*S+w,f<=1&&(a=s,o=l);var M=(d-y)*S/_+y;v=npt(y,w,S,A,A+C,D,M,h,Gd),r=Math.cos(A+C)*_+y,i=Math.sin(A+C)*S+w;break;case wb.R:a=r=u[f++],o=i=u[f++];var P=u[f++],O=u[f++];v=VEe(a,o,P,O,d,h,Gd);break;case wb.Z:v=aL(r,i,a,o,d,h,Gd,!0),r=a,i=o;break}v<c&&(c=v,t.set(Gd[0],Gd[1]))}return c}var nh=new ln,gi=new ln,Ta=new ln,xf=new ln,pf=new ln;function Fce(n,e){if(n){var t=n.getTextGuideLine(),r=n.getTextContent();if(r&&t){var i=n.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=i.candidates||ept,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var l=1/0,c=i.anchor,u=n.getComputedTransform(),d=u&&PT([],u),h=e.get("length2")||0;c&&Ta.copy(c);for(var f=0;f<o.length;f++){var m=o[f];tpt(m,0,s,nh,xf),ln.scaleAndAdd(gi,nh,xf,h),gi.transform(d);var v=n.getBoundingRect(),y=c?c.distance(gi):n instanceof Mn?ipt(gi,n.path,Ta):rpt(gi,v,Ta);y<l&&(l=y,gi.transform(u),Ta.transform(u),Ta.toArray(a[0]),gi.toArray(a[1]),nh.toArray(a[2]))}zEe(a,e.get("minTurnAngle")),t.setShape({points:a})}}}var oL=[],gl=new ln;function zEe(n,e){if(e<=180&&e>0){e=e/180*Math.PI,nh.fromArray(n[0]),gi.fromArray(n[1]),Ta.fromArray(n[2]),ln.sub(xf,nh,gi),ln.sub(pf,Ta,gi);var t=xf.len(),r=pf.len();if(!(t<.001||r<.001)){xf.scale(1/t),pf.scale(1/r);var i=xf.dot(pf),a=Math.cos(e);if(a<i){var o=aL(gi.x,gi.y,Ta.x,Ta.y,nh.x,nh.y,oL,!1);gl.fromArray(oL),gl.scaleAndAdd(pf,o/Math.tan(Math.PI-e));var s=Ta.x!==gi.x?(gl.x-gi.x)/(Ta.x-gi.x):(gl.y-gi.y)/(Ta.y-gi.y);if(isNaN(s))return;s<0?ln.copy(gl,gi):s>1&&ln.copy(gl,Ta),gl.toArray(n[1])}}}}function apt(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,nh.fromArray(n[0]),gi.fromArray(n[1]),Ta.fromArray(n[2]),ln.sub(xf,gi,nh),ln.sub(pf,Ta,gi);var r=xf.len(),i=pf.len();if(!(r<.001||i<.001)){xf.scale(1/r),pf.scale(1/i);var a=xf.dot(e),o=Math.cos(t);if(a<o){var s=aL(gi.x,gi.y,Ta.x,Ta.y,nh.x,nh.y,oL,!1);gl.fromArray(oL);var l=Math.PI/2,c=Math.acos(pf.dot(e)),u=l+c-t;if(u>=l)ln.copy(gl,Ta);else{gl.scaleAndAdd(pf,s/Math.tan(Math.PI/2-u));var d=Ta.x!==gi.x?(gl.x-gi.x)/(Ta.x-gi.x):(gl.y-gi.y)/(Ta.y-gi.y);if(isNaN(d))return;d<0?ln.copy(gl,gi):d>1&&ln.copy(gl,Ta)}gl.toArray(n[1])}}}}function k6(n,e,t,r){var i=t==="normal",a=i?n:n.ensureState(t);a.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?n.useStyle(s):a.style=s}function opt(n,e){var t=e.smooth,r=e.points;if(r)if(n.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var i=jv(r[0],r[1]),a=jv(r[1],r[2]);if(!i||!a){n.lineTo(r[1][0],r[1][1]),n.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*t,s=VO([],r[1],r[0],o/i),l=VO([],r[1],r[2],o/a),c=VO([],s,l,.5);n.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)n.lineTo(r[u][0],r[u][1])}function wK(n,e,t){var r=n.getTextGuideLine(),i=n.getTextContent();if(!i){r&&n.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=i.ignore,l=0;l<Qk.length;l++){var c=Qk[l],u=e[c],d=c==="normal";if(u){var h=u.get("show"),f=d?s:Zt(i.states[c]&&i.states[c].ignore,s);if(f||!Zt(h,o)){var m=d?r:r&&r.states[c];m&&(m.ignore=!0),r&&k6(r,!0,c,u);continue}r||(r=new Dl,n.setTextGuideLine(r),!d&&(s||!o)&&k6(r,!0,"normal",e.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),k6(r,!1,c,u)}}if(r){Rt(r.style,t),r.style.fill=null;var v=a.get("showAbove"),y=n.textGuideLineConfig=n.textGuideLineConfig||{};y.showAbove=v||!1,r.buildPath=opt}}function _K(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},r=0;r<El.length;r++){var i=El[r];t[i]=n.getModel([i,e])}return t}function HEe(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,c=o.clone();c.applyTransform(a),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=s?new HN(o,a):null;e.push({label:i,labelLine:r.labelLine,rect:c,localRect:o,obb:u,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return e}function qEe(n,e,t,r,i,a){var o=n.length;if(o<2)return;n.sort(function(D,M){return D.rect[e]-M.rect[e]});for(var s=0,l,c=!1,u=0;u<o;u++){var d=n[u],h=d.rect;l=h[e]-s,l<0&&(h[e]-=l,d.label[e]-=l,c=!0),s=h[e]+h[t]}var f=n[0],m=n[o-1],v,y;w(),v<0&&A(-v,.8),y<0&&A(y,.8),w(),_(v,y,1),_(y,v,-1),w(),v<0&&C(-v),y<0&&C(y);function w(){v=f.rect[e]-r,y=i-m.rect[e]-m.rect[t]}function _(D,M,P){if(D<0){var O=Math.min(M,-D);if(O>0){S(O*P,0,o);var j=O+D;j<0&&A(-j*P,1)}else A(-D*P,1)}}function S(D,M,P){D!==0&&(c=!0);for(var O=M;O<P;O++){var j=n[O],L=j.rect;L[e]+=D,j.label[e]+=D}}function A(D,M){for(var P=[],O=0,j=1;j<o;j++){var L=n[j-1].rect,B=Math.max(n[j].rect[e]-L[e]-L[t],0);P.push(B),O+=B}if(O){var $=Math.min(Math.abs(D)/O,M);if(D>0)for(var j=0;j<o-1;j++){var Y=P[j]*$;S(Y,0,j+1)}else for(var j=o-1;j>0;j--){var Y=P[j-1]*$;S(-Y,j,o)}}}function C(D){var M=D<0?-1:1;D=Math.abs(D);for(var P=Math.ceil(D/(o-1)),O=0;O<o-1;O++)if(M>0?S(P,0,O+1):S(-P,o-O-1,o),D-=P,D<=0)return}return c}function spt(n,e,t,r){return qEe(n,"x","width",e,t)}function GEe(n,e,t,r){return qEe(n,"y","height",e,t)}function WEe(n){var e=[];n.sort(function(v,y){return y.priority-v.priority});var t=new pn(0,0,0,0);function r(v){if(!v.ignore){var y=v.ensureState("emphasis");y.ignore==null&&(y.ignore=!1)}v.ignore=!0}for(var i=0;i<n.length;i++){var a=n[i],o=a.axisAligned,s=a.localRect,l=a.transform,c=a.label,u=a.labelLine;t.copy(a.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var d=a.obb,h=!1,f=0;f<e.length;f++){var m=e[f];if(t.intersect(m.rect)){if(o&&m.axisAligned){h=!0;break}if(m.obb||(m.obb=new HN(m.localRect,m.transform)),d||(d=new HN(s,l)),d.intersect(m.obb)){h=!0;break}}}h?(r(c),u&&r(u)):(c.attr("ignore",a.defaultAttr.ignore),u&&u.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function lpt(n){if(n){for(var e=[],t=0;t<n.length;t++)e.push(n[t].slice());return e}}function cpt(n,e){var t=n.label,r=e&&e.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:lpt(r&&r.shape.points)}}var $ce=["align","verticalAlign","width","height","fontSize"],dl=new sg,I6=tr(),upt=tr();function BP(n,e,t){for(var r=0;r<t.length;r++){var i=t[r];e[i]!=null&&(n[i]=e[i])}}var UP=["x","y","rotation"],dpt=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(e,t,r,i,a){var o=i.style,s=i.__hostTarget,l=s.textConfig||{},c=i.getComputedTransform(),u=i.getBoundingRect().plain();pn.applyTransform(u,u,c),c?dl.setLocalTransform(c):(dl.x=dl.y=dl.rotation=dl.originX=dl.originY=0,dl.scaleX=dl.scaleY=1),dl.rotation=zc(dl.rotation);var d=i.__hostTarget,h;if(d){h=d.getBoundingRect().plain();var f=d.getComputedTransform();pn.applyTransform(h,h,f)}var m=h&&d.getTextGuideLine();this._labelList.push({label:i,labelLine:m,seriesModel:r,dataIndex:e,dataType:t,layoutOption:a,computedLayoutOption:null,rect:u,hostRect:h,priority:h?h.width*h.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:m&&m.ignore,x:dl.x,y:dl.y,scaleX:dl.scaleX,scaleY:dl.scaleY,rotation:dl.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},n.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,i=r.get("labelLayout");(kt(i)||Vn(i).length)&&e.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=Wt(a);o&&!o.disableLabelLayout&&t._addLabel(s.dataIndex,s.dataType,r,o,i)})},n.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function i(S,A){return function(){Fce(S,A)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,c=o.defaultAttr,u=void 0;kt(o.layoutOption)?u=o.layoutOption(cpt(o,l)):u=o.layoutOption,u=u||{},o.computedLayoutOption=u;var d=Math.PI/180;l&&l.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:c.attachedPos,rotation:u.rotate!=null?u.rotate*d:c.attachedRot,offset:[u.dx||0,u.dy||0]});var h=!1;if(u.x!=null?(s.x=Je(u.x,t),s.setStyle("x",0),h=!0):(s.x=c.x,s.setStyle("x",c.style.x)),u.y!=null?(s.y=Je(u.y,r),s.setStyle("y",0),h=!0):(s.y=c.y,s.setStyle("y",c.style.y)),u.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:u.labelLinePoints}),h=!1)}var m=I6(s);m.needsUpdateLabelLine=h,s.rotation=u.rotate!=null?u.rotate*d:c.rotation,s.scaleX=c.scaleX,s.scaleY=c.scaleY;for(var v=0;v<$ce.length;v++){var y=$ce[v];s.setStyle(y,u[y]!=null?u[y]:c.style[y])}if(u.draggable){if(s.draggable=!0,s.cursor="move",l){var w=o.seriesModel;if(o.dataIndex!=null){var _=o.seriesModel.getData(o.dataType);w=_.getItemModel(o.dataIndex)}s.on("drag",i(l,w.getModel("labelLine")))}}else s.off("drag"),s.cursor=c.cursor}},n.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),i=HEe(this._labelList),a=Cr(i,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=Cr(i,function(l){return l.layoutOption.moveOverlap==="shiftY"});spt(a,0,t),GEe(o,0,r);var s=Cr(i,function(l){return l.layoutOption.hideOverlap});WEe(s)},n.prototype.processLabelsOverall=function(){var e=this;Z(this._chartViewList,function(t){var r=t.__model,i=t.ignoreLabelLineUpdate,a=r.isAnimationEnabled();t.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!i,l=o.getTextContent();!s&&l&&(s=I6(l).needsUpdateLabelLine),s&&e._updateLabelLine(o,r),a&&e._animateLabels(o,r)})})},n.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),i=Wt(e),a=i.dataIndex;if(r&&a!=null){var o=t.getData(i.dataType),s=o.getItemModel(a),l={},c=o.getItemVisual(a,"style");if(c){var u=o.getVisual("drawType");l.stroke=c[u]}var d=s.getModel("labelLine");wK(e,_K(s),l),Fce(e,d)}},n.prototype._animateLabels=function(e,t){var r=e.getTextContent(),i=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!c1(e))){var a=I6(r),o=a.oldLayout,s=Wt(e),l=s.dataIndex,c={x:r.x,y:r.y,rotation:r.rotation},u=t.getData(s.dataType);if(o){r.attr(o);var h=e.prevStates;h&&(_n(h,"select")>=0&&r.attr(a.oldLayoutSelect),_n(h,"emphasis")>=0&&r.attr(a.oldLayoutEmphasis)),fr(r,c,t,l)}else if(r.attr(c),!LT(r).valueAnimation){var d=Zt(r.style.opacity,1);r.style.opacity=0,Ni(r,{style:{opacity:d}},t,l)}if(a.oldLayout=c,r.states.select){var f=a.oldLayoutSelect={};BP(f,c,UP),BP(f,r.states.select,UP)}if(r.states.emphasis){var m=a.oldLayoutEmphasis={};BP(m,c,UP),BP(m,r.states.emphasis,UP)}j1e(r,l,u,t,t)}if(i&&!i.ignore&&!i.invisible){var a=upt(i),o=a.oldLayout,v={points:i.shape.points};o?(i.attr({shape:o}),fr(i,{shape:v},t)):(i.setShape(v),i.style.strokePercent=0,Ni(i,{style:{strokePercent:1}},t)),a.oldLayout=v}},n}(),M6=tr();function hpt(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var i=M6(t).labelManager;i||(i=M6(t).labelManager=new dpt),i.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var i=M6(t).labelManager;r.updatedSeries.forEach(function(a){i.addLabelsOfSeries(t.getViewOfSeriesModel(a))}),i.updateLayoutConfig(t),i.layout(t),i.processLabelsOverall()})}var P6=Math.sin,O6=Math.cos,YEe=Math.PI,_b=Math.PI*2,fpt=180/YEe,KEe=function(){function n(){}return n.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},n.prototype.moveTo=function(e,t){this._add("M",e,t)},n.prototype.lineTo=function(e,t){this._add("L",e,t)},n.prototype.bezierCurveTo=function(e,t,r,i,a,o){this._add("C",e,t,r,i,a,o)},n.prototype.quadraticCurveTo=function(e,t,r,i){this._add("Q",e,t,r,i)},n.prototype.arc=function(e,t,r,i,a,o){this.ellipse(e,t,r,r,0,i,a,o)},n.prototype.ellipse=function(e,t,r,i,a,o,s,l){var c=s-o,u=!l,d=Math.abs(c),h=Vv(d-_b)||(u?c>=_b:-c>=_b),f=c>0?c%_b:c%_b+_b,m=!1;h?m=!0:Vv(d)?m=!1:m=f>=YEe==!!u;var v=e+r*O6(o),y=t+i*P6(o);this._start&&this._add("M",v,y);var w=Math.round(a*fpt);if(h){var _=1/this._p,S=(u?1:-1)*(_b-_);this._add("A",r,i,w,1,+u,e+r*O6(o+S),t+i*P6(o+S)),_>.01&&this._add("A",r,i,w,0,+u,v,y)}else{var A=e+r*O6(s),C=t+i*P6(s);this._add("A",r,i,w,+m,+u,A,C)}},n.prototype.rect=function(e,t,r,i){this._add("M",e,t),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(e,t,r,i,a,o,s,l,c){for(var u=[],d=this._p,h=1;h<arguments.length;h++){var f=arguments[h];if(isNaN(f)){this._invalid=!0;return}u.push(Math.round(f*d)/d)}this._d.push(e+u.join(" ")),this._start=e==="Z"},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n}(),xK="none",ppt=Math.round;function gpt(n){var e=n.fill;return e!=null&&e!==xK}function mpt(n){var e=n.stroke;return e!=null&&e!==xK}var I8=["lineCap","miterLimit","lineJoin"],vpt=Ue(I8,function(n){return"stroke-"+n.toLowerCase()});function ypt(n,e,t,r){var i=e.opacity==null?1:e.opacity;if(t instanceof Yo){n("opacity",i);return}if(gpt(e)){var a=Kk(e.fill);n("fill",a.color);var o=e.fillOpacity!=null?e.fillOpacity*a.opacity*i:a.opacity*i;o<1&&n("fill-opacity",o)}else n("fill",xK);if(mpt(e)){var s=Kk(e.stroke);n("stroke",s.color);var l=e.strokeNoScale?t.getLineScale():1,c=l?(e.lineWidth||0)/l:0,u=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*i:s.opacity*i,d=e.strokeFirst;if(c!==1&&n("stroke-width",c),d&&n("paint-order",d?"stroke":"fill"),u<1&&n("stroke-opacity",u),e.lineDash){var h=cK(t),f=h[0],m=h[1];f&&(m=ppt(m||0),n("stroke-dasharray",f.join(",")),(m||r)&&n("stroke-dashoffset",m))}for(var v=0;v<I8.length;v++){var y=I8[v];if(e[y]!==VN[y]){var w=e[y]||VN[y];w&&n(vpt[v],w)}}}}var XEe="http://www.w3.org/2000/svg",ZEe="http://www.w3.org/1999/xlink",bpt="http://www.w3.org/2000/xmlns/",wpt="http://www.w3.org/XML/1998/namespace",Bce="ecmeta_";function QEe(n){return document.createElementNS(XEe,n)}function wo(n,e,t,r,i){return{tag:n,attrs:t||{},children:r,text:i,key:e}}function _pt(n,e){var t=[];if(e)for(var r in e){var i=e[r],a=r;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),t.push(a))}return"<"+n+" "+t.join(" ")+">"}function xpt(n){return"</"+n+">"}function SK(n,e){e=e||{};var t=e.newline?`
`:"";function r(i){var a=i.children,o=i.tag,s=i.attrs,l=i.text;return _pt(o,s)+(o!=="style"?ml(l):l||"")+(a?""+t+Ue(a,function(c){return r(c)}).join(t)+t:"")+xpt(o)}return r(n)}function Spt(n,e,t){t=t||{};var r=t.newline?`
`:"",i=" {"+r,a=r+"}",o=Ue(Vn(n),function(l){return l+i+Ue(Vn(n[l]),function(c){return c+":"+n[l][c]+";"}).join(r)+a}).join(r),s=Ue(Vn(e),function(l){return"@keyframes "+l+i+Ue(Vn(e[l]),function(c){return c+i+Ue(Vn(e[l][c]),function(u){var d=e[l][c][u];return u==="d"&&(d='path("'+d+'")'),u+":"+d+";"}).join(r)+a}).join(r)+a}).join(r);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(r)}function M8(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Uce(n,e,t,r){return wo("svg","root",{width:n,height:e,xmlns:XEe,"xmlns:xlink":ZEe,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+n+" "+e:!1},t)}var Tpt=0;function JEe(){return Tpt++}var Vce={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},kb="transform-origin";function Ept(n,e,t){var r=Pe({},n.shape);Pe(r,e),n.buildPath(t,r);var i=new KEe;return i.reset(OSe(n)),t.rebuildPath(i,1),i.generateStr(),i.getStr()}function Apt(n,e){var t=e.originX,r=e.originY;(t||r)&&(n[kb]=t+"px "+r+"px")}var Cpt={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function eAe(n,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=n,t}function Dpt(n,e,t){var r=n.shape.paths,i={},a,o;if(Z(r,function(l){var c=M8(t.zrId);c.animation=!0,G5(l,{},c,!0);var u=c.cssAnims,d=c.cssNodes,h=Vn(u),f=h.length;if(f){o=h[f-1];var m=u[o];for(var v in m){var y=m[v];i[v]=i[v]||{d:""},i[v].d+=y.d||""}for(var w in d){var _=d[w].animation;_.indexOf(o)>=0&&(a=_)}}}),!!a){e.d=!1;var s=eAe(i,t);return a.replace(o,s)}}function zce(n){return st(n)?Vce[n]?"cubic-bezier("+Vce[n]+")":DY(n)?n:"":""}function G5(n,e,t,r){var i=n.animators,a=i.length,o=[];if(n instanceof zY){var s=Dpt(n,e,t);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},c=0;c<a;c++){var u=i[c],d=[u.getMaxTime()/1e3+"s"],h=zce(u.getClip().easing),f=u.getDelay();h?d.push(h):d.push("linear"),f&&d.push(f/1e3+"s"),u.getLoop()&&d.push("infinite");var m=d.join(" ");l[m]=l[m]||[m,[]],l[m][1].push(u)}function v(_){var S=_[1],A=S.length,C={},D={},M={},P="animation-timing-function";function O(Be,Se,_e){for(var me=Be.getTracks(),fe=Be.getMaxTime(),Ge=0;Ge<me.length;Ge++){var Ve=me[Ge];if(Ve.needsAnimate()){var nt=Ve.keyframes,we=Ve.propName;if(_e&&(we=_e(we)),we)for(var rt=0;rt<nt.length;rt++){var on=nt[rt],Mt=Math.round(on.time/fe*100)+"%",kn=zce(on.easing),nr=on.rawValue;(st(nr)||ur(nr))&&(Se[Mt]=Se[Mt]||{},Se[Mt][we]=on.rawValue,kn&&(Se[Mt][P]=kn))}}}}for(var j=0;j<A;j++){var L=S[j],B=L.targetName;B?B==="shape"&&O(L,D):!r&&O(L,C)}for(var $ in C){var Y={};FSe(Y,n),Pe(Y,C[$]);var q=RSe(Y),W=C[$][P];M[$]=q?{transform:q}:{},Apt(M[$],Y),W&&(M[$][P]=W)}var X,te=!0;for(var $ in D){M[$]=M[$]||{};var re=!X,W=D[$][P];re&&(X=new Ff);var z=X.len();X.reset(),M[$].d=Ept(n,D[$],X);var oe=X.len();if(!re&&z!==oe){te=!1;break}W&&(M[$][P]=W)}if(!te)for(var $ in M)delete M[$].d;if(!r)for(var j=0;j<A;j++){var L=S[j],B=L.targetName;B==="style"&&O(L,M,function(me){return Cpt[me]})}for(var le=Vn(M),ee=!0,be,j=1;j<le.length;j++){var he=le[j-1],pe=le[j];if(M[he][kb]!==M[pe][kb]){ee=!1;break}be=M[he][kb]}if(ee&&be){for(var $ in M)M[$][kb]&&delete M[$][kb];e[kb]=be}if(Cr(le,function(Be){return Vn(M[Be]).length>0}).length){var ct=eAe(M,t);return ct+" "+_[0]+" both"}}for(var y in l){var s=v(l[y]);s&&o.push(s)}if(o.length){var w=t.zrId+"-cls-"+JEe();t.cssNodes["."+w]={animation:o.join(",")},e.class=w}}function kpt(n,e,t){if(!n.ignore)if(n.isSilent()){var r={"pointer-events":"none"};Hce(r,e,t)}else{var i=n.states.emphasis&&n.states.emphasis.style?n.states.emphasis.style:{},a=i.fill;if(!a){var o=n.style&&n.style.fill,s=n.states.select&&n.states.select.style&&n.states.select.style.fill,l=n.currentStates.indexOf("select")>=0&&s||o;l&&(a=zH(l))}var c=i.lineWidth;if(c){var u=!i.strokeNoScale&&n.transform?n.transform[0]:1;c=c/u}var r={cursor:"pointer"};a&&(r.fill=a),i.stroke&&(r.stroke=i.stroke),c&&(r["stroke-width"]=c),Hce(r,e,t)}}function Hce(n,e,t,r){var i=JSON.stringify(n),a=t.cssStyleCache[i];a||(a=t.zrId+"-cls-"+JEe(),t.cssStyleCache[i]=a,t.cssNodes["."+a+":hover"]=n),e.class=e.class?e.class+" "+a:a}var lI=Math.round;function tAe(n){return n&&st(n.src)}function nAe(n){return n&&kt(n.toDataURL)}function TK(n,e,t,r){ypt(function(i,a){var o=i==="fill"||i==="stroke";o&&PSe(a)?iAe(e,n,i,r):o&&kY(a)?aAe(t,n,i,r):n[i]=a,o&&r.ssr&&a==="none"&&(n["pointer-events"]="visible")},e,t,!1),Lpt(t,n,r)}function EK(n,e){var t=Cst(e);t&&(t.each(function(r,i){r!=null&&(n[(Bce+i).toLowerCase()]=r+"")}),e.isSilent()&&(n[Bce+"silent"]="true"))}function qce(n){return Vv(n[0]-1)&&Vv(n[1])&&Vv(n[2])&&Vv(n[3]-1)}function Ipt(n){return Vv(n[4])&&Vv(n[5])}function AK(n,e,t){if(e&&!(Ipt(e)&&qce(e))){var r=1e4;n.transform=qce(e)?"translate("+lI(e[4]*r)/r+" "+lI(e[5]*r)/r+")":Xot(e)}}function Gce(n,e,t){for(var r=n.points,i=[],a=0;a<r.length;a++)i.push(lI(r[a][0]*t)/t),i.push(lI(r[a][1]*t)/t);e.points=i.join(" ")}function Wce(n){return!n.smooth}function Mpt(n){var e=Ue(n,function(t){return typeof t=="string"?[t,t]:t});return function(t,r,i){for(var a=0;a<e.length;a++){var o=e[a],s=t[o[0]];s!=null&&(r[o[1]]=lI(s*i)/i)}}}var Ppt={circle:[Mpt(["cx","cy","r"])],polyline:[Gce,Wce],polygon:[Gce,Wce]};function Opt(n){for(var e=n.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function rAe(n,e){var t=n.style,r=n.shape,i=Ppt[n.type],a={},o=e.animation,s="path",l=n.style.strokePercent,c=e.compress&&OSe(n)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(o&&Opt(n))&&!(l<1)){s=n.type;var u=Math.pow(10,c);i[0](r,a,u)}else{var d=!n.path||n.shapeChanged();n.path||n.createPathProxy();var h=n.path;d&&(h.beginPath(),n.buildPath(h,n.shape),n.pathUpdated());var f=h.getVersion(),m=n,v=m.__svgPathBuilder;(m.__svgPathVersion!==f||!v||l!==m.__svgPathStrokePercent)&&(v||(v=m.__svgPathBuilder=new KEe),v.reset(c),h.rebuildPath(v,l),v.generateStr(),m.__svgPathVersion=f,m.__svgPathStrokePercent=l),a.d=v.getStr()}return AK(a,n.transform),TK(a,t,n,e),EK(a,n),e.animation&&G5(n,a,e),e.emphasis&&kpt(n,a,e),wo(s,n.id+"",a)}function Rpt(n,e){var t=n.style,r=t.image;if(r&&!st(r)&&(tAe(r)?r=r.src:nAe(r)&&(r=r.toDataURL())),!!r){var i=t.x||0,a=t.y||0,o=t.width,s=t.height,l={href:r,width:o,height:s};return i&&(l.x=i),a&&(l.y=a),AK(l,n.transform),TK(l,t,n,e),EK(l,n),e.animation&&G5(n,l,e),wo("image",n.id+"",l)}}function Npt(n,e){var t=n.style,r=t.text;if(r!=null&&(r+=""),!(!r||isNaN(t.x)||isNaN(t.y))){var i=t.font||uy,a=t.x||0,o=Qot(t.y||0,y5(i),t.textBaseline),s=Zot[t.textAlign]||t.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(u1e(t)){var c="",u=t.fontStyle,d=c1e(t.fontSize);if(!parseFloat(d))return;var h=t.fontFamily||cSe,f=t.fontWeight;c+="font-size:"+d+";font-family:"+h+";",u&&u!=="normal"&&(c+="font-style:"+u+";"),f&&f!=="normal"&&(c+="font-weight:"+f+";"),l.style=c}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),AK(l,n.transform),TK(l,t,n,e),EK(l,n),e.animation&&G5(n,l,e),wo("text",n.id+"",l,void 0,r)}}function Yce(n,e){if(n instanceof Mn)return rAe(n,e);if(n instanceof Yo)return Rpt(n,e);if(n instanceof Q1)return Npt(n,e)}function Lpt(n,e,t){var r=n.style;if(Jot(r)){var i=est(n),a=t.shadowCache,o=a[i];if(!o){var s=n.getGlobalScale(),l=s[0],c=s[1];if(!l||!c)return;var u=r.shadowOffsetX||0,d=r.shadowOffsetY||0,h=r.shadowBlur,f=Kk(r.shadowColor),m=f.opacity,v=f.color,y=h/2/l,w=h/2/c,_=y+" "+w;o=t.zrId+"-s"+t.shadowIdx++,t.defs[o]=wo("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[wo("feDropShadow","",{dx:u/l,dy:d/c,stdDeviation:_,"flood-color":v,"flood-opacity":m})]),a[i]=o}e.filter=v5(o)}}function iAe(n,e,t,r){var i=n[t],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(ISe(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(MSe(i))a="radialGradient",o.cx=Zt(i.x,.5),o.cy=Zt(i.y,.5),o.r=Zt(i.r,.5);else return;for(var s=i.colorStops,l=[],c=0,u=s.length;c<u;++c){var d=HH(s[c].offset)*100+"%",h=s[c].color,f=Kk(h),m=f.color,v=f.opacity,y={offset:d};y["stop-color"]=m,v<1&&(y["stop-opacity"]=v),l.push(wo("stop",c+"",y))}var w=wo(a,"",o,l),_=SK(w),S=r.gradientCache,A=S[_];A||(A=r.zrId+"-g"+r.gradientIdx++,S[_]=A,o.id=A,r.defs[A]=wo(a,A,o,l)),e[t]=v5(A)}function aAe(n,e,t,r){var i=n.style[t],a=n.getBoundingRect(),o={},s=i.repeat,l=s==="no-repeat",c=s==="repeat-x",u=s==="repeat-y",d;if(kSe(i)){var h=i.imageWidth,f=i.imageHeight,m=void 0,v=i.image;if(st(v)?m=v:tAe(v)?m=v.src:nAe(v)&&(m=v.toDataURL()),typeof Image>"u"){var y="Image width/height must been given explictly in svg-ssr renderer.";Tl(h,y),Tl(f,y)}else if(h==null||f==null){var w=function(j,L){if(j){var B=j.elm,$=h||L.width,Y=f||L.height;j.tag==="pattern"&&(c?(Y=1,$/=a.width):u&&($=1,Y/=a.height)),j.attrs.width=$,j.attrs.height=Y,B&&(B.setAttribute("width",$),B.setAttribute("height",Y))}},_=NY(m,null,n,function(j){l||w(D,j),w(d,j)});_&&_.width&&_.height&&(h=h||_.width,f=f||_.height)}d=wo("image","img",{href:m,width:h,height:f}),o.width=h,o.height=f}else i.svgElement&&(d=Bt(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(d){var S,A;l?S=A=1:c?(A=1,S=o.width/a.width):u?(S=1,A=o.height/a.height):o.patternUnits="userSpaceOnUse",S!=null&&!isNaN(S)&&(o.width=S),A!=null&&!isNaN(A)&&(o.height=A);var C=RSe(i);C&&(o.patternTransform=C);var D=wo("pattern","",o,[d]),M=SK(D),P=r.patternCache,O=P[M];O||(O=r.zrId+"-p"+r.patternIdx++,P[M]=O,o.id=O,D=r.defs[O]=wo("pattern",O,o,[d])),e[t]=v5(O)}}function jpt(n,e,t){var r=t.clipPathCache,i=t.defs,a=r[n.id];if(!a){a=t.zrId+"-c"+t.clipPathIdx++;var o={id:a};r[n.id]=a,i[a]=wo("clipPath",a,o,[rAe(n,t)])}e["clip-path"]=v5(a)}function Kce(n){return document.createTextNode(n)}function $b(n,e,t){n.insertBefore(e,t)}function Xce(n,e){n.removeChild(e)}function Zce(n,e){n.appendChild(e)}function oAe(n){return n.parentNode}function sAe(n){return n.nextSibling}function R6(n,e){n.textContent=e}var Qce=58,Fpt=120,$pt=wo("","");function P8(n){return n===void 0}function cf(n){return n!==void 0}function Bpt(n,e,t){for(var r={},i=e;i<=t;++i){var a=n[i].key;a!==void 0&&(r[a]=i)}return r}function KC(n,e){var t=n.key===e.key,r=n.tag===e.tag;return r&&t}function cI(n){var e,t=n.children,r=n.tag;if(cf(r)){var i=n.elm=QEe(r);if(CK($pt,n),$e(t))for(e=0;e<t.length;++e){var a=t[e];a!=null&&Zce(i,cI(a))}else cf(n.text)&&!jt(n.text)&&Zce(i,Kce(n.text))}else n.elm=Kce(n.text);return n.elm}function lAe(n,e,t,r,i){for(;r<=i;++r){var a=t[r];a!=null&&$b(n,cI(a),e)}}function sL(n,e,t,r){for(;t<=r;++t){var i=e[t];if(i!=null)if(cf(i.tag)){var a=oAe(i.elm);Xce(a,i.elm)}else Xce(n,i.elm)}}function CK(n,e){var t,r=e.elm,i=n&&n.attrs||{},a=e.attrs||{};if(i!==a){for(t in a){var o=a[t],s=i[t];s!==o&&(o===!0?r.setAttribute(t,""):o===!1?r.removeAttribute(t):t==="style"?r.style.cssText=o:t.charCodeAt(0)!==Fpt?r.setAttribute(t,o):t==="xmlns:xlink"||t==="xmlns"?r.setAttributeNS(bpt,t,o):t.charCodeAt(3)===Qce?r.setAttributeNS(wpt,t,o):t.charCodeAt(5)===Qce?r.setAttributeNS(ZEe,t,o):r.setAttribute(t,o))}for(t in i)t in a||r.removeAttribute(t)}}function Upt(n,e,t){for(var r=0,i=0,a=e.length-1,o=e[0],s=e[a],l=t.length-1,c=t[0],u=t[l],d,h,f,m;r<=a&&i<=l;)o==null?o=e[++r]:s==null?s=e[--a]:c==null?c=t[++i]:u==null?u=t[--l]:KC(o,c)?(PS(o,c),o=e[++r],c=t[++i]):KC(s,u)?(PS(s,u),s=e[--a],u=t[--l]):KC(o,u)?(PS(o,u),$b(n,o.elm,sAe(s.elm)),o=e[++r],u=t[--l]):KC(s,c)?(PS(s,c),$b(n,s.elm,o.elm),s=e[--a],c=t[++i]):(P8(d)&&(d=Bpt(e,r,a)),h=d[c.key],P8(h)?$b(n,cI(c),o.elm):(f=e[h],f.tag!==c.tag?$b(n,cI(c),o.elm):(PS(f,c),e[h]=void 0,$b(n,f.elm,o.elm))),c=t[++i]);(r<=a||i<=l)&&(r>a?(m=t[l+1]==null?null:t[l+1].elm,lAe(n,m,t,i,l)):sL(n,e,r,a))}function PS(n,e){var t=e.elm=n.elm,r=n.children,i=e.children;n!==e&&(CK(n,e),P8(e.text)?cf(r)&&cf(i)?r!==i&&Upt(t,r,i):cf(i)?(cf(n.text)&&R6(t,""),lAe(t,null,i,0,i.length-1)):cf(r)?sL(t,r,0,r.length-1):cf(n.text)&&R6(t,""):n.text!==e.text&&(cf(r)&&sL(t,r,0,r.length-1),R6(t,e.text)))}function Vpt(n,e){if(KC(n,e))PS(n,e);else{var t=n.elm,r=oAe(t);cI(e),r!==null&&($b(r,e.elm,sAe(t)),sL(r,[n],0,0))}return e}var zpt=0,Hpt=function(){function n(e,t,r){if(this.type="svg",this.refreshHover=Jce(),this.configLayer=Jce(),this.storage=t,this._opts=r=Pe({},r),this.root=e,this._id="zr"+zpt++,this._oldVNode=Uce(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=QEe("svg");CK(null,this._oldVNode),i.appendChild(a),e.appendChild(i)}this.resize(r.width,r.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",Vpt(this._oldVNode,e),this._oldVNode=e}},n.prototype.renderOneToVNode=function(e){return Yce(e,M8(this._id))},n.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),r=this._width,i=this._height,a=M8(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress,a.emphasis=e.emphasis,a.ssr=this._opts.ssr;var o=[],s=this._bgVNode=qpt(r,i,this._backgroundColor,a);s&&o.push(s);var l=e.compress?null:this._mainVNode=wo("g","main",{},[]);this._paintList(t,a,l?l.children:o),l&&o.push(l);var c=Ue(Vn(a.defs),function(h){return a.defs[h]});if(c.length&&o.push(wo("defs","defs",{},c)),e.animation){var u=Spt(a.cssNodes,a.cssAnims,{newline:!0});if(u){var d=wo("style","stl",{},[],u);o.push(d)}}return Uce(r,i,o,e.useViewBox)},n.prototype.renderToString=function(e){return e=e||{},SK(this.renderToVNode({animation:Zt(e.cssAnimation,!0),emphasis:Zt(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Zt(e.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(e,t,r){for(var i=e.length,a=[],o=0,s,l,c=0,u=0;u<i;u++){var d=e[u];if(!d.invisible){var h=d.__clipPaths,f=h&&h.length||0,m=l&&l.length||0,v=void 0;for(v=Math.max(f-1,m-1);v>=0&&!(h&&l&&h[v]===l[v]);v--);for(var y=m-1;y>v;y--)o--,s=a[o-1];for(var w=v+1;w<f;w++){var _={};jpt(h[w],_,t);var S=wo("g","clip-g-"+c++,_,[]);(s?s.children:r).push(S),a[o++]=S,s=S}l=h;var A=Yce(d,t);A&&(s?s.children:r).push(A)}}},n.prototype.resize=function(e,t){var r=this._opts,i=this.root,a=this._viewport;if(e!=null&&(r.width=e),t!=null&&(r.height=t),i&&a&&(a.style.display="none",e=zS(i,0,r),t=zS(i,1,r),a.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,a){var o=a.style;o.width=e+"px",o.height=t+"px"}if(kY(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",t));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",t))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(e){var t=this.renderToString(),r="data:image/svg+xml;";return e?(t=nst(t),t&&r+"base64,"+t):r+"charset=UTF-8,"+encodeURIComponent(t)},n}();function Jce(n){return function(){}}function qpt(n,e,t,r){var i;if(t&&t!=="none")if(i=wo("rect","bg",{width:n,height:e,x:"0",y:"0"}),PSe(t))iAe({fill:t},i.attrs,"fill",r);else if(kY(t))aAe({style:{fill:t},dirty:Ca,getBoundingRect:function(){return{width:n,height:e}}},i.attrs,"fill",r);else{var a=Kk(t),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}function Gpt(n){n.registerPainter("svg",Hpt)}function eue(n,e,t){var r=dy.createCanvas(),i=e.getWidth(),a=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",n)),r.width=i*t,r.height=a*t,r}var N6=function(n){ki(e,n);function e(t,r,i){var a=n.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||BN,typeof t=="string"?o=eue(t,r,i):jt(t)&&(o=t,t=o.id),a.id=t,a.dom=o;var s=o.style;return s&&(gSe(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=eue("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,c=new pn(0,0,0,0);function u(_){if(!(!_.isFinite()||_.isZero()))if(o.length===0){var S=new pn(0,0,0,0);S.copy(_),o.push(S)}else{for(var A=!1,C=1/0,D=0,M=0;M<o.length;++M){var P=o[M];if(P.intersect(_)){var O=new pn(0,0,0,0);O.copy(P),O.union(_),o[M]=O,A=!0;break}else if(l){c.copy(_),c.union(P);var j=_.width*_.height,L=P.width*P.height,B=c.width*c.height,$=B-j-L;$<C&&(C=$,D=M)}}if(l&&(o[D].union(_),A=!0),!A){var S=new pn(0,0,0,0);S.copy(_),o.push(S)}l||(l=o.length>=s)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var h=t[d];if(h){var f=h.shouldBePainted(i,a,!0,!0),m=h.__isRendered&&(h.__dirty&Bc||!f)?h.getPrevPaintRect():null;m&&u(m);var v=f&&(h.__dirty&Bc||!h.__isRendered)?h.getPaintRect():null;v&&u(v)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var h=r[d],f=h&&h.shouldBePainted(i,a,!0,!0);if(h&&(!f||!h.__zr)&&h.__isRendered){var m=h.getPrevPaintRect();m&&u(m)}}var y;do{y=!1;for(var d=0;d<o.length;){if(o[d].isZero()){o.splice(d,1);continue}for(var w=d+1;w<o.length;)o[d].intersect(o[w])?(y=!0,o[d].union(o[w]),o.splice(w,1)):w++;d++}}while(y);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=t+"px",o.height=r+"px"),a.width=t*i,a.height=r*i,s&&(s.width=t*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,r,i){var a=this.dom,o=this.ctx,s=a.width,l=a.height;r=r||this.clearColor;var c=this.motionBlur&&!t,u=this.lastFrameAlpha,d=this.dpr,h=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/d,l/d));var f=this.domBack;function m(v,y,w,_){if(o.clearRect(v,y,w,_),r&&r!=="transparent"){var S=void 0;if(p5(r)){var A=r.global||r.__width===w&&r.__height===_;S=A&&r.__canvasGradient||x8(o,r,{x:0,y:0,width:w,height:_}),r.__canvasGradient=S,r.__width=w,r.__height=_}else uot(r)&&(r.scaleX=r.scaleX||d,r.scaleY=r.scaleY||d,S=S8(o,r,{dirty:function(){h.setUnpainted(),h.painter.refresh()}}));o.save(),o.fillStyle=S||r,o.fillRect(v,y,w,_),o.restore()}c&&(o.save(),o.globalAlpha=u,o.drawImage(f,v,y,w,_),o.restore())}!i||c?m(0,0,s,l):i.length&&Z(i,function(v){m(v.x*d,v.y*d,v.width*d,v.height*d)})},e}(ed),tue=1e5,xb=314159,VP=.01,Wpt=.001;function Ypt(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function Kpt(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var Xpt=function(){function n(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=Pe({},r||{}),this.dpr=r.devicePixelRatio||BN,this._singleCanvas=a,this.root=e;var o=e.style;o&&(gSe(e),e.innerHTML=""),this.storage=t;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var u=e,d=u.width,h=u.height;r.width!=null&&(d=r.width),r.height!=null&&(h=r.height),this.dpr=r.devicePixelRatio||1,u.width=d*this.dpr,u.height=h*this.dpr,this._width=d,this._height=h;var f=new N6(u,this,this.dpr);f.__builtin__=!0,f.initContext(),l[xb]=f,f.zlevel=xb,s.push(xb),this._domRoot=e}else{this._width=zS(e,0,r),this._height=zS(e,1,r);var c=this._domRoot=Kpt(this._width,this._height);e.appendChild(c)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<t;o++){var s=e[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(tue)),a||(a=r.ctx,a.save()),iw(a,s,i,o===t-1))}a&&a.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(tue)},n.prototype.paintOne=function(e,t){qTe(e,t)},n.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,t,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;RN(function(){l._paintList(e,t,r,i)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(xb).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)})},n.prototype._doPaintList=function(e,t,r){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||r)&&a.push(c)}for(var u=!0,d=!1,h=function(v){var y=a[v],w=y.ctx,_=o&&y.createRepaintRects(e,t,f._width,f._height),S=r?y.__startIndex:y.__drawIndex,A=!r&&y.incremental&&Date.now,C=A&&Date.now(),D=y.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(y.__startIndex===y.__endIndex)y.clear(!1,D,_);else if(S===y.__startIndex){var M=e[S];(!M.incremental||!M.notClear||r)&&y.clear(!1,D,_)}S===-1&&(console.error("For some unknown reason. drawIndex is -1"),S=y.__startIndex);var P,O=function($){var Y={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(P=S;P<y.__endIndex;P++){var q=e[P];if(q.__inHover&&(d=!0),i._doPaintEl(q,y,o,$,Y,P===y.__endIndex-1),A){var W=Date.now()-C;if(W>15)break}}Y.prevElClipPaths&&w.restore()};if(_)if(_.length===0)P=y.__endIndex;else for(var j=f.dpr,L=0;L<_.length;++L){var B=_[L];w.save(),w.beginPath(),w.rect(B.x*j,B.y*j,B.width*j,B.height*j),w.clip(),O(B),w.restore()}else w.save(),O(),w.restore();y.__drawIndex=P,y.__drawIndex<y.__endIndex&&(u=!1)},f=this,m=0;m<a.length;m++)h(m);return Nn.wxa&&Z(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:u,needsRefreshHover:d}},n.prototype._doPaintEl=function(e,t,r,i,a,o){var s=t.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(iw(s,e,a,o),e.setPrevPaintRect(l))}else iw(s,e,a,o)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=xb);var r=this._layers[e];return r||(r=new N6("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?an(r,this._layerConfig[e],!0):this._layerConfig[e-VP]&&an(r,this._layerConfig[e-VP],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},n.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,l=-1;if(!r[e]&&Ypt(t)){if(a>0&&e>i[0]){for(l=0;l<a-1&&!(i[l]<e&&i[l+1]>e);l++);s=r[i[l]]}if(i.splice(l+1,0,e),r[e]=t,!t.virtual)if(s){var c=s.dom;c.nextSibling?o.insertBefore(t.dom,c.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},n.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(t,this._layers[a],a)}},n.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__&&e.call(t,o,a)}},n.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__||e.call(t,o,a)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(d,h){d.__dirty=d.__used=!1});function t(d){a&&(a.__endIndex!==d&&(a.__dirty=!0),a.__endIndex=d)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<e.length;l++){var i=e[l],c=i.zlevel,u=void 0;s!==c&&(s=c,o=0),i.incremental?(u=this.getLayer(c+Wpt,this._needsManuallyCompositing),u.incremental=!0,o=1):u=this.getLayer(c+(o>0?VP:0),this._needsManuallyCompositing),u.__builtin__||_Y("ZLevel "+c+" has been used by unkown layer "+u.id),u!==a&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,t(l),a=u),i.__dirty&Bc&&!i.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(d,h){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,Z(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?an(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+VP){var o=this._layers[a];an(o,r[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(_n(r,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),t!=null&&(i.height=t),e=zS(a,0,i),t=zS(a,1,i),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(xb).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[xb].dom;var t=new N6("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,a=t.dom.height;this.eachLayer(function(d){d.__builtin__?r.drawImage(d.dom,0,0,i,a):d.renderToCanvas&&(r.save(),d.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,c=s.length;l<c;l++){var u=s[l];iw(r,u,o,l===c-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();function Zpt(n){n.registerPainter("canvas",Xpt)}var Qpt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return Zg(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new zt,i=za("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(i),i.setStyle(t.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=t.itemHeight*.8,c=za(s,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);r.add(c),c.setStyle(t.itemStyle);var u=t.iconRotate==="inherit"?o:t.iconRotate||0;return c.rotation=u*Math.PI/180,c.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(bi);function rT(n,e){var t=n.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var i=eT(n,e,t[0]);return i!=null?i+"":null}else if(r){for(var a=[],o=0;o<t.length;o++)a.push(eT(n,e,t[o]));return a.join(" ")}}function cAe(n,e){var t=n.mapDimensionsAll("defaultedLabel");if(!$e(e))return e+"";for(var r=[],i=0;i<t.length;i++){var a=n.getDimensionIndex(t[i]);a>=0&&r.push(e[a])}return r.join(" ")}var S2=function(n){Te(e,n);function e(t,r,i,a){var o=n.call(this)||this;return o.updateData(t,r,i,a),o}return e.prototype._createSymbol=function(t,r,i,a,o){this.removeAll();var s=za(t,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=Jpt,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Og(this.childAt(0))},e.prototype.downplay=function(){Rg(this.childAt(0))},e.prototype.setZ=function(t,r){var i=this.childAt(0);i.zlevel=t,i.z=r},e.prototype.setDraggable=function(t,r){var i=this.childAt(0);i.draggable=t,i.cursor=!r&&t?"move":i.cursor},e.prototype.updateData=function(t,r,i,a){this.silent=!1;var o=t.getItemVisual(r,"symbol")||"circle",s=t.hostModel,l=e.getSymbolSize(t,r),c=o!==this._symbolType,u=a&&a.disableAnimation;if(c){var d=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,t,r,l,d)}else{var h=this.childAt(0);h.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};u?h.attr(f):fr(h,f,s,r),uh(h)}if(this._updateCommon(t,r,l,i,a),c){var h=this.childAt(0);if(!u){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Ni(h,f,s,r)}}u&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,i,a,o){var s=this.childAt(0),l=t.hostModel,c,u,d,h,f,m,v,y,w;if(a&&(c=a.emphasisItemStyle,u=a.blurItemStyle,d=a.selectItemStyle,h=a.focus,f=a.blurScope,v=a.labelStatesModels,y=a.hoverScale,w=a.cursorStyle,m=a.emphasisDisabled),!a||t.hasItemOption){var _=a&&a.itemModel?a.itemModel:t.getItemModel(r),S=_.getModel("emphasis");c=S.getModel("itemStyle").getItemStyle(),d=_.getModel(["select","itemStyle"]).getItemStyle(),u=_.getModel(["blur","itemStyle"]).getItemStyle(),h=S.get("focus"),f=S.get("blurScope"),m=S.get("disabled"),v=So(_),y=S.getShallow("scale"),w=_.getShallow("cursor")}var A=t.getItemVisual(r,"symbolRotate");s.attr("rotation",(A||0)*Math.PI/180||0);var C=n_(t.getItemVisual(r,"symbolOffset"),i);C&&(s.x=C[0],s.y=C[1]),w&&s.attr("cursor",w);var D=t.getItemVisual(r,"style"),M=D.fill;if(s instanceof Yo){var P=s.style;s.useStyle(Pe({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},D))}else s.__isEmptyBrush?s.useStyle(Pe({},D)):s.useStyle(D),s.style.decal=null,s.setColor(M,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var O=t.getItemVisual(r,"liftZ"),j=this._z2;O!=null?j==null&&(this._z2=s.z2,s.z2+=O):j!=null&&(s.z2=j,this._z2=null);var L=o&&o.useNameLabel;ms(s,v,{labelFetcher:l,labelDataIndex:r,defaultText:B,inheritColor:M,defaultOpacity:D.opacity});function B(q){return L?t.getName(q):rT(t,q)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var $=s.ensureState("emphasis");$.style=c,s.ensureState("select").style=d,s.ensureState("blur").style=u;var Y=y==null||y===!0?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;$.scaleX=this._sizeX*Y,$.scaleY=this._sizeY*Y,this.setSymbolScale(1),na(this,h,f,m)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,i){var a=this.childAt(0),o=Wt(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&fy(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();fy(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:t,removeOpt:s})},e.getSymbolSize=function(t,r){return zT(t.getItemVisual(r,"symbolSize"))},e}(zt);function Jpt(n,e){this.parent.drift(n,e)}function L6(n,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&n.getItemVisual(t,"symbol")!=="none"}function nue(n){return n!=null&&!jt(n)&&(n={isIgnore:n}),n||{}}function rue(n){var e=n.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:So(e),cursorStyle:e.get("cursor")}}var T2=function(){function n(e){this.group=new zt,this._SymbolCtor=e||S2}return n.prototype.updateData=function(e,t){this._progressiveEls=null,t=nue(t);var r=this.group,i=e.hostModel,a=this._data,o=this._SymbolCtor,s=t.disableAnimation,l=rue(e),c={disableAnimation:s},u=t.getSymbolPoint||function(d){return e.getItemLayout(d)};a||r.removeAll(),e.diff(a).add(function(d){var h=u(d);if(L6(e,h,d,t)){var f=new o(e,d,l,c);f.setPosition(h),e.setItemGraphicEl(d,f),r.add(f)}}).update(function(d,h){var f=a.getItemGraphicEl(h),m=u(d);if(!L6(e,m,d,t)){r.remove(f);return}var v=e.getItemVisual(d,"symbol")||"circle",y=f&&f.getSymbolType&&f.getSymbolType();if(!f||y&&y!==v)r.remove(f),f=new o(e,d,l,c),f.setPosition(m);else{f.updateData(e,d,l,c);var w={x:m[0],y:m[1]};s?f.attr(w):fr(f,w,i)}r.add(f),e.setItemGraphicEl(d,f)}).remove(function(d){var h=a.getItemGraphicEl(d);h&&h.fadeOut(function(){r.remove(h)},i)}).execute(),this._getSymbolPoint=u,this._data=e},n.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,i){var a=e._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=rue(e),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=nue(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var o=t.getItemLayout(a);if(L6(t,o,a,r)){var s=new this._SymbolCtor(t,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),t.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},n.prototype.eachRendered=function(e){Iy(this._progressiveEls||this.group,e)},n.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},r.hostModel)}):t.removeAll()},n}();function uAe(n,e,t){var r=n.getBaseAxis(),i=n.getOtherAxis(r),a=egt(i,t),o=r.dim,s=i.dim,l=e.mapDimension(s),c=e.mapDimension(o),u=s==="x"||s==="radius"?1:0,d=Ue(n.dimensions,function(m){return e.mapDimension(m)}),h=!1,f=e.getCalculationInfo("stackResultDimension");return gy(e,d[0])&&(h=!0,d[0]=f),gy(e,d[1])&&(h=!0,d[1]=f),{dataDimsForPoint:d,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!h,valueDim:l,baseDim:c,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function egt(n,e){var t=0,r=n.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:ur(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function dAe(n,e,t,r){var i=NaN;n.stacked&&(i=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=n.valueStart);var a=n.baseDataOffset,o=[];return o[a]=t.get(n.baseDim,r),o[1-a]=i,e.dataToPoint(o)}function tgt(n,e){var t=[];return e.diff(n).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,i){t.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function ngt(n,e,t,r,i,a,o,s){for(var l=tgt(n,e),c=[],u=[],d=[],h=[],f=[],m=[],v=[],y=uAe(i,e,o),w=n.getLayout("points")||[],_=e.getLayout("points")||[],S=0;S<l.length;S++){var A=l[S],C=!0,D=void 0,M=void 0;switch(A.cmd){case"=":D=A.idx*2,M=A.idx1*2;var P=w[D],O=w[D+1],j=_[M],L=_[M+1];(isNaN(P)||isNaN(O))&&(P=j,O=L),c.push(P,O),u.push(j,L),d.push(t[D],t[D+1]),h.push(r[M],r[M+1]),v.push(e.getRawIndex(A.idx1));break;case"+":var B=A.idx,$=y.dataDimsForPoint,Y=i.dataToPoint([e.get($[0],B),e.get($[1],B)]);M=B*2,c.push(Y[0],Y[1]),u.push(_[M],_[M+1]);var q=dAe(y,i,e,B);d.push(q[0],q[1]),h.push(r[M],r[M+1]),v.push(e.getRawIndex(B));break;case"-":C=!1}C&&(f.push(A),m.push(m.length))}m.sort(function(he,pe){return v[he]-v[pe]});for(var W=c.length,X=_f(W),te=_f(W),re=_f(W),z=_f(W),oe=[],S=0;S<m.length;S++){var le=m[S],ee=S*2,be=le*2;X[ee]=c[be],X[ee+1]=c[be+1],te[ee]=u[be],te[ee+1]=u[be+1],re[ee]=d[be],re[ee+1]=d[be+1],z[ee]=h[be],z[ee+1]=h[be+1],oe[S]=f[le]}return{current:X,next:te,stackedOnCurrent:re,stackedOnNext:z,status:oe}}var wv=Math.min,_v=Math.max;function _w(n,e){return isNaN(n)||isNaN(e)}function O8(n,e,t,r,i,a,o,s,l){for(var c,u,d,h,f,m,v=t,y=0;y<r;y++){var w=e[v*2],_=e[v*2+1];if(v>=i||v<0)break;if(_w(w,_)){if(l){v+=a;continue}break}if(v===t)n[a>0?"moveTo":"lineTo"](w,_),d=w,h=_;else{var S=w-c,A=_-u;if(S*S+A*A<.5){v+=a;continue}if(o>0){for(var C=v+a,D=e[C*2],M=e[C*2+1];D===w&&M===_&&y<r;)y++,C+=a,v+=a,D=e[C*2],M=e[C*2+1],w=e[v*2],_=e[v*2+1],S=w-c,A=_-u;var P=y+1;if(l)for(;_w(D,M)&&P<r;)P++,C+=a,D=e[C*2],M=e[C*2+1];var O=.5,j=0,L=0,B=void 0,$=void 0;if(P>=r||_w(D,M))f=w,m=_;else{j=D-c,L=M-u;var Y=w-c,q=D-w,W=_-u,X=M-_,te=void 0,re=void 0;if(s==="x"){te=Math.abs(Y),re=Math.abs(q);var z=j>0?1:-1;f=w-z*te*o,m=_,B=w+z*re*o,$=_}else if(s==="y"){te=Math.abs(W),re=Math.abs(X);var oe=L>0?1:-1;f=w,m=_-oe*te*o,B=w,$=_+oe*re*o}else te=Math.sqrt(Y*Y+W*W),re=Math.sqrt(q*q+X*X),O=re/(re+te),f=w-j*o*(1-O),m=_-L*o*(1-O),B=w+j*o*O,$=_+L*o*O,B=wv(B,_v(D,w)),$=wv($,_v(M,_)),B=_v(B,wv(D,w)),$=_v($,wv(M,_)),j=B-w,L=$-_,f=w-j*te/re,m=_-L*te/re,f=wv(f,_v(c,w)),m=wv(m,_v(u,_)),f=_v(f,wv(c,w)),m=_v(m,wv(u,_)),j=w-f,L=_-m,B=w+j*re/te,$=_+L*re/te}n.bezierCurveTo(d,h,f,m,w,_),d=B,h=$}else n.lineTo(w,_)}c=w,u=_,v+=a}return y}var hAe=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),rgt=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new hAe},e.prototype.buildPath=function(t,r){var i=r.points,a=0,o=i.length/2;if(r.connectNulls){for(;o>0&&_w(i[o*2-2],i[o*2-1]);o--);for(;a<o&&_w(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=O8(t,i,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=Ff.CMD,s,l,c=r==="x",u=[],d=0;d<a.length;){var h=a[d++],f=void 0,m=void 0,v=void 0,y=void 0,w=void 0,_=void 0,S=void 0;switch(h){case o.M:s=a[d++],l=a[d++];break;case o.L:if(f=a[d++],m=a[d++],S=c?(t-s)/(f-s):(t-l)/(m-l),S<=1&&S>=0){var A=c?(m-l)*S+l:(f-s)*S+s;return c?[t,A]:[A,t]}s=f,l=m;break;case o.C:f=a[d++],m=a[d++],v=a[d++],y=a[d++],w=a[d++],_=a[d++];var C=c?LN(s,f,v,w,t,u):LN(l,m,y,_,t,u);if(C>0)for(var D=0;D<C;D++){var M=u[D];if(M<=1&&M>=0){var A=c?mo(l,m,y,_,M):mo(s,f,v,w,M);return c?[t,A]:[A,t]}}s=w,l=_;break}}},e}(Mn),igt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(hAe),fAe=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new igt},e.prototype.buildPath=function(t,r){var i=r.points,a=r.stackedOnPoints,o=0,s=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&_w(i[s*2-2],i[s*2-1]);s--);for(;o<s&&_w(i[o*2],i[o*2+1]);o++);}for(;o<s;){var c=O8(t,i,o,s,s,1,r.smooth,l,r.connectNulls);O8(t,a,o+c-1,c,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=c+1,t.closePath()}},e}(Mn);function pAe(n,e,t,r,i){var a=n.getArea(),o=a.x,s=a.y,l=a.width,c=a.height,u=t.get(["lineStyle","width"])||0;o-=u/2,s-=u/2,l+=u,c+=u,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var d=new er({shape:{x:o,y:s,width:l,height:c}});if(e){var h=n.getBaseAxis(),f=h.isHorizontal(),m=h.inverse;f?(m&&(d.shape.x+=l),d.shape.width=0):(m||(d.shape.y+=c),d.shape.height=0);var v=kt(i)?function(y){i(y,d)}:null;Ni(d,{shape:{width:l,height:c,x:o,y:s}},t,null,r,v)}return d}function gAe(n,e,t){var r=n.getArea(),i=va(r.r0,1),a=va(r.r,1),o=new Al({shape:{cx:va(n.cx,1),cy:va(n.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var s=n.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,Ni(o,{shape:{endAngle:r.endAngle,r:a}},t)}return o}function E2(n,e,t,r,i){if(n){if(n.type==="polar")return gAe(n,e,t);if(n.type==="cartesian2d")return pAe(n,e,t,r,i)}else return null;return null}function i_(n,e){return n.type===e}function iue(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return;return!0}}function aue(n){for(var e=1/0,t=1/0,r=-1/0,i=-1/0,a=0;a<n.length;){var o=n[a++],s=n[a++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(s)||(t=Math.min(s,t),i=Math.max(s,i))}return[[e,t],[r,i]]}function oue(n,e){var t=aue(n),r=t[0],i=t[1],a=aue(e),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function sue(n){return ur(n)?n:n?.5:0}function agt(n,e,t){if(!t.valueDim)return[];for(var r=e.count(),i=_f(r*2),a=0;a<r;a++){var o=dAe(t,n,e,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function xv(n,e,t,r,i){var a=t.getBaseAxis(),o=a.dim==="x"||a.dim==="radius"?0:1,s=[],l=0,c=[],u=[],d=[],h=[];if(i){for(l=0;l<n.length;l+=2){var f=e||n;!isNaN(f[l])&&!isNaN(f[l+1])&&h.push(n[l],n[l+1])}n=h}for(l=0;l<n.length-2;l+=2)switch(d[0]=n[l+2],d[1]=n[l+3],u[0]=n[l],u[1]=n[l+1],s.push(u[0],u[1]),r){case"end":c[o]=d[o],c[1-o]=u[1-o],s.push(c[0],c[1]);break;case"middle":var m=(u[o]+d[o])/2,v=[];c[o]=v[o]=m,c[1-o]=u[1-o],v[1-o]=d[1-o],s.push(c[0],c[1]),s.push(v[0],v[1]);break;default:c[o]=u[o],c[1-o]=d[1-o],s.push(c[0],c[1])}return s.push(n[l++],n[l++]),s}function ogt(n,e){var t=[],r=n.length,i,a;function o(u,d,h){var f=u.coord,m=(h-f)/(d.coord-f),v=Kot(m,[u.color,d.color]);return{coord:h,color:v}}for(var s=0;s<r;s++){var l=n[s],c=l.coord;if(c<0)i=l;else if(c>e){a?t.push(o(a,l,e)):i&&t.push(o(i,l,0),o(i,l,e));break}else i&&(t.push(o(i,l,0)),i=null),t.push(l),a=l}return t}function sgt(n,e,t){var r=n.getVisual("visualMeta");if(!(!r||!r.length||!n.count())&&e.type==="cartesian2d"){for(var i,a,o=r.length-1;o>=0;o--){var s=n.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=r[o];break}}if(a){var l=e.getAxis(i),c=Ue(a.stops,function(S){return{coord:l.toGlobalCoord(l.dataToCoord(S.value)),color:S.color}}),u=c.length,d=a.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),d.reverse());var h=ogt(c,i==="x"?t.getWidth():t.getHeight()),f=h.length;if(!f&&u)return c[0].coord<0?d[1]?d[1]:c[u-1].color:d[0]?d[0]:c[0].color;var m=10,v=h[0].coord-m,y=h[f-1].coord+m,w=y-v;if(w<.001)return"transparent";Z(h,function(S){S.offset=(S.coord-v)/w}),h.push({offset:f?h[f-1].offset:.5,color:d[1]||"transparent"}),h.unshift({offset:f?h[0].offset:.5,color:d[0]||"transparent"});var _=new m2(0,0,0,0,h,!0);return _[i]=v,_[i+"2"]=y,_}}}function lgt(n,e,t){var r=n.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=t.getAxesByScale("ordinal")[0];if(a&&!(i&&cgt(a,e))){var o=e.mapDimension(a.dim),s={};return Z(a.getViewLabels(),function(l){var c=a.scale.getRawOrdinalNumber(l.tickValue);s[c]=1}),function(l){return!s.hasOwnProperty(e.get(o,l))}}}}function cgt(n,e){var t=n.getExtent(),r=Math.abs(t[1]-t[0])/n.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(S2.getSymbolSize(e,o)[n.isHorizontal()?1:0]*1.5>r)return!1;return!0}function ugt(n,e){return isNaN(n)||isNaN(e)}function dgt(n){for(var e=n.length/2;e>0&&ugt(n[e*2-2],n[e*2-1]);e--);return e-1}function lue(n,e){return[n[e*2],n[e*2+1]]}function hgt(n,e,t){for(var r=n.length/2,i=t==="x"?0:1,a,o,s=0,l=-1,c=0;c<r;c++)if(o=n[c*2+i],!(isNaN(o)||isNaN(n[c*2+1-i]))){if(c===0){a=o;continue}if(a<=e&&o>=e||a>=e&&o<=e){l=c;break}s=c,a=o}return{range:[s,l],t:(e-a)/(o-a)}}function mAe(n){if(n.get(["endLabel","show"]))return!0;for(var e=0;e<El.length;e++)if(n.get([El[e],"endLabel","show"]))return!0;return!1}function j6(n,e,t,r){if(i_(e,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=mAe(r)?function(f,m){n._endLabelOnDuring(f,m,o,s,a,i,e)}:null,c=e.getBaseAxis().isHorizontal(),u=pAe(e,t,r,function(){var f=n._endLabel;f&&t&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var d=u.shape,h=Math.max(d.width,d.height);c?(d.y-=h,d.height+=h*2):(d.x-=h,d.width+=h*2)}return l&&l(1,u),u}else return gAe(e,t,r)}function fgt(n,e){var t=e.getBaseAxis(),r=t.isHorizontal(),i=t.inverse,a=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:n.get("align")||a,verticalAlign:n.get("verticalAlign")||o}}}var pgt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(){var t=new zt,r=new T2;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t,this._changePolyState=dt(this._changePolyState,this)},e.prototype.render=function(t,r,i){var a=t.coordinateSystem,o=this.group,s=t.getData(),l=t.getModel("lineStyle"),c=t.getModel("areaStyle"),u=s.getLayout("points")||[],d=a.type==="polar",h=this._coordSys,f=this._symbolDraw,m=this._polyline,v=this._polygon,y=this._lineGroup,w=!r.ssr&&t.get("animation"),_=!c.isEmpty(),S=c.get("origin"),A=uAe(a,s,S),C=_&&agt(a,s,A),D=t.get("showSymbol"),M=t.get("connectNulls"),P=D&&!d&&lgt(t,s,a),O=this._data;O&&O.eachItemGraphicEl(function(he,pe){he.__temp&&(o.remove(he),O.setItemGraphicEl(pe,null))}),D||f.remove(),o.add(y);var j=d?!1:t.get("step"),L;a&&a.getArea&&t.get("clip",!0)&&(L=a.getArea(),L.width!=null?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var B=sgt(s,a,i)||s.getVisual("style")[s.getVisual("drawType")];if(!(m&&h.type===a.type&&j===this._step))D&&f.updateData(s,{isIgnore:P,clipShape:L,disableAnimation:!0,getSymbolPoint:function(he){return[u[he*2],u[he*2+1]]}}),w&&this._initSymbolLabelAnimation(s,a,L),j&&(C&&(C=xv(C,u,a,j,M)),u=xv(u,null,a,j,M)),m=this._newPolyline(u),_?v=this._newPolygon(u,C):v&&(y.remove(v),v=this._polygon=null),d||this._initOrUpdateEndLabel(t,a,Uw(B)),y.setClipPath(j6(this,a,!0,t));else{_&&!v?v=this._newPolygon(u,C):v&&!_&&(y.remove(v),v=this._polygon=null),d||this._initOrUpdateEndLabel(t,a,Uw(B));var $=y.getClipPath();if($){var Y=j6(this,a,!1,t);Ni($,{shape:Y.shape},t)}else y.setClipPath(j6(this,a,!0,t));D&&f.updateData(s,{isIgnore:P,clipShape:L,disableAnimation:!0,getSymbolPoint:function(he){return[u[he*2],u[he*2+1]]}}),(!iue(this._stackedOnPoints,C)||!iue(this._points,u))&&(w?this._doUpdateAnimation(s,C,a,i,j,S,M):(j&&(C&&(C=xv(C,u,a,j,M)),u=xv(u,null,a,j,M)),m.setShape({points:u}),v&&v.setShape({points:u,stackedOnPoints:C})))}var q=t.getModel("emphasis"),W=q.get("focus"),X=q.get("blurScope"),te=q.get("disabled");if(m.useStyle(Rt(l.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),gs(m,t,"lineStyle"),m.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var re=m.getState("emphasis").style;re.lineWidth=+m.style.lineWidth+1}Wt(m).seriesIndex=t.seriesIndex,na(m,W,X,te);var z=sue(t.get("smooth")),oe=t.get("smoothMonotone");if(m.setShape({smooth:z,smoothMonotone:oe,connectNulls:M}),v){var le=s.getCalculationInfo("stackedOnSeries"),ee=0;v.useStyle(Rt(c.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),le&&(ee=sue(le.get("smooth"))),v.setShape({smooth:z,stackedOnSmooth:ee,smoothMonotone:oe,connectNulls:M}),gs(v,t,"areaStyle"),Wt(v).seriesIndex=t.seriesIndex,na(v,W,X,te)}var be=this._changePolyState;s.eachItemGraphicEl(function(he){he&&(he.onHoverStateChange=be)}),this._polyline.onHoverStateChange=be,this._data=s,this._coordSys=a,this._stackedOnPoints=C,this._points=u,this._step=j,this._valueOrigin=S,t.get("triggerLineEvent")&&(this.packEventData(t,m),v&&this.packEventData(t,v))},e.prototype.packEventData=function(t,r){Wt(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,i,a){var o=t.getData(),s=Fw(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),c=o.getItemGraphicEl(s);if(!c){var u=l[s*2],d=l[s*2+1];if(isNaN(u)||isNaN(d)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,d))return;var h=t.get("zlevel")||0,f=t.get("z")||0;c=new S2(o,s),c.x=u,c.y=d,c.setZ(h,f);var m=c.getSymbolPath().getTextContent();m&&(m.zlevel=h,m.z=f,m.z2=this._polyline.z2+1),c.__temp=!0,o.setItemGraphicEl(s,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else ti.prototype.highlight.call(this,t,r,i,a)},e.prototype.downplay=function(t,r,i,a){var o=t.getData(),s=Fw(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else ti.prototype.downplay.call(this,t,r,i,a)},e.prototype._changePolyState=function(t){var r=this._polygon;zN(this._polyline,t),r&&zN(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new rgt({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new fAe({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,r,i){var a,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var c=t.hostModel,u=c.get("animationDuration");kt(u)&&(u=u(null));var d=c.get("animationDelay")||0,h=kt(d)?d(null):d;t.eachItemGraphicEl(function(f,m){var v=f;if(v){var y=[f.x,f.y],w=void 0,_=void 0,S=void 0;if(i)if(o){var A=i,C=r.pointToCoord(y);a?(w=A.startAngle,_=A.endAngle,S=-C[1]/180*Math.PI):(w=A.r0,_=A.r,S=C[0])}else{var D=i;a?(w=D.x,_=D.x+D.width,S=f.x):(w=D.y+D.height,_=D.y,S=f.y)}var M=_===w?0:(S-w)/(_-w);l&&(M=1-M);var P=kt(d)?d(m):u*M+h,O=v.getSymbolPath(),j=O.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:P}),j&&j.animateFrom({style:{opacity:0}},{duration:300,delay:P}),O.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,i){var a=t.getModel("endLabel");if(mAe(t)){var o=t.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var c=this._endLabel;c||(c=this._endLabel=new sr({z2:200}),c.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var u=dgt(l);u>=0&&(ms(s,So(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:u,defaultText:function(d,h,f){return f!=null?cAe(o,f):rT(o,d)},enableTextSetter:!0},fgt(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,i,a,o,s,l){var c=this._endLabel,u=this._polyline;if(c){t<1&&a.originalX==null&&(a.originalX=c.x,a.originalY=c.y);var d=i.getLayout("points"),h=i.hostModel,f=h.get("connectNulls"),m=s.get("precision"),v=s.get("distance")||0,y=l.getBaseAxis(),w=y.isHorizontal(),_=y.inverse,S=r.shape,A=_?w?S.x:S.y+S.height:w?S.x+S.width:S.y,C=(w?v:0)*(_?-1:1),D=(w?0:-v)*(_?-1:1),M=w?"x":"y",P=hgt(d,A,M),O=P.range,j=O[1]-O[0],L=void 0;if(j>=1){if(j>1&&!f){var B=lue(d,O[0]);c.attr({x:B[0]+C,y:B[1]+D}),o&&(L=h.getRawValue(O[0]))}else{var B=u.getPointOn(A,M);B&&c.attr({x:B[0]+C,y:B[1]+D});var $=h.getRawValue(O[0]),Y=h.getRawValue(O[1]);o&&(L=JSe(i,m,$,Y,P.t))}a.lastFrameIndex=O[0]}else{var q=t===1||a.lastFrameIndex>0?O[0]:0,B=lue(d,q);o&&(L=h.getRawValue(q)),c.attr({x:B[0]+C,y:B[1]+D})}if(o){var W=LT(c);typeof W.setLabelText=="function"&&W.setLabelText(L)}}},e.prototype._doUpdateAnimation=function(t,r,i,a,o,s,l){var c=this._polyline,u=this._polygon,d=t.hostModel,h=ngt(this._data,t,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),f=h.current,m=h.stackedOnCurrent,v=h.next,y=h.stackedOnNext;if(o&&(m=xv(h.stackedOnCurrent,h.current,i,o,l),f=xv(h.current,null,i,o,l),y=xv(h.stackedOnNext,h.next,i,o,l),v=xv(h.next,null,i,o,l)),oue(f,v)>3e3||u&&oue(m,y)>3e3){c.stopAnimation(),c.setShape({points:v}),u&&(u.stopAnimation(),u.setShape({points:v,stackedOnPoints:y}));return}c.shape.__points=h.current,c.shape.points=f;var w={shape:{points:v}};h.current!==f&&(w.shape.__points=h.next),c.stopAnimation(),fr(c,w,d),u&&(u.setShape({points:f,stackedOnPoints:m}),u.stopAnimation(),fr(u,{shape:{stackedOnPoints:y}},d),c.shape.points!==u.shape.points&&(u.shape.points=c.shape.points));for(var _=[],S=h.status,A=0;A<S.length;A++){var C=S[A].cmd;if(C==="="){var D=t.getItemGraphicEl(S[A].idx1);D&&_.push({el:D,ptIdx:A})}}c.animators&&c.animators.length&&c.animators[0].during(function(){u&&u.dirtyShape();for(var M=c.shape.__points,P=0;P<_.length;P++){var O=_[P].el,j=_[P].ptIdx*2;O.x=M[j],O.y=M[j+1],O.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(ti);function A2(n,e){return{seriesType:n,plan:UT(),reset:function(t){var r=t.getData(),i=t.coordinateSystem,a=t.pipelineContext,o=e||a.large;if(i){var s=Ue(i.dimensions,function(f){return r.mapDimension(f)}).slice(0,2),l=s.length,c=r.getCalculationInfo("stackResultDimension");gy(r,s[0])&&(s[0]=c),gy(r,s[1])&&(s[1]=c);var u=r.getStore(),d=r.getDimensionIndex(s[0]),h=r.getDimensionIndex(s[1]);return l&&{progress:function(f,m){for(var v=f.end-f.start,y=o&&_f(v*l),w=[],_=[],S=f.start,A=0;S<f.end;S++){var C=void 0;if(l===1){var D=u.get(d,S);C=i.dataToPoint(D,null,_)}else w[0]=u.get(d,S),w[1]=u.get(h,S),C=i.dataToPoint(w,null,_);o?(y[A++]=C[0],y[A++]=C[1]):m.setItemLayout(S,C.slice())}o&&m.setLayout("points",y)}}}}}}var ggt={average:function(n){for(var e=0,t=0,r=0;r<n.length;r++)isNaN(n[r])||(e+=n[r],t++);return t===0?NaN:e/t},sum:function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t]||0;return e},max:function(n){for(var e=-1/0,t=0;t<n.length;t++)n[t]>e&&(e=n[t]);return isFinite(e)?e:NaN},min:function(n){for(var e=1/0,t=0;t<n.length;t++)n[t]<e&&(e=n[t]);return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},mgt=function(n){return Math.round(n.length/2)};function vAe(n){return{seriesType:n,reset:function(e,t,r){var i=e.getData(),a=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),c=o.getOtherAxis(l),u=l.getExtent(),d=r.getDevicePixelRatio(),h=Math.abs(u[1]-u[0])*(d||1),f=Math.round(s/h);if(isFinite(f)&&f>1){a==="lttb"?e.setData(i.lttbDownSample(i.mapDimension(c.dim),1/f)):a==="minmax"&&e.setData(i.minmaxDownSample(i.mapDimension(c.dim),1/f));var m=void 0;st(a)?m=ggt[a]:kt(a)&&(m=a),m&&e.setData(i.downSample(i.mapDimension(c.dim),1/f,m,mgt))}}}}}function vgt(n){n.registerChartView(pgt),n.registerSeriesModel(Qpt),n.registerLayout(A2("line",!0)),n.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,vAe("line"))}var uI=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(t),s=a.dataToPoint(o);if(i)Z(a.getAxes(),function(h,f){if(h.type==="category"&&r!=null){var m=h.getTicksCoords(),v=h.getTickModel().get("alignWithLabel"),y=o[f],w=r[f]==="x1"||r[f]==="y1";if(w&&!v&&(y+=1),m.length<2)return;if(m.length===2){s[f]=h.toGlobalCoord(h.getExtent()[w?1:0]);return}for(var _=void 0,S=void 0,A=1,C=0;C<m.length;C++){var D=m[C].coord,M=C===m.length-1?m[C-1].tickValue+A:m[C].tickValue;if(M===y){S=D;break}else if(M<y)_=D;else if(_!=null&&M>y){S=(D+_)/2;break}C===1&&(A=M-m[0].tickValue)}S==null&&(_?_&&(S=m[m.length-1].coord):S=m[0].coord),s[f]=h.toGlobalCoord(S)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),d=a.getBaseAxis().isHorizontal()?0:1;s[d]+=c+u/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(bi);bi.registerClass(uI);var ygt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return Zg(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,i){return i.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=My(uI.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(uI),bgt=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),lL=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new bgt},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,c=o+l,u=r.startAngle,d=r.endAngle,h=r.clockwise,f=Math.PI*2,m=h?d-u<f:u-d<f;m||(u=d-(h?f:-f));var v=Math.cos(u),y=Math.sin(u),w=Math.cos(d),_=Math.sin(d);m?(t.moveTo(v*o+i,y*o+a),t.arc(v*c+i,y*c+a,l,-Math.PI+u,u,!h)):t.moveTo(v*s+i,y*s+a),t.arc(i,a,s,u,d,!h),t.arc(w*c+i,_*c+a,l,d-Math.PI*2,d-Math.PI,!h),o!==0&&t.arc(i,a,o,d,u,h)},e}(Mn);function wgt(n,e){e=e||{};var t=e.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return UN(r,i,a);var s=n(o),l=i.distance!=null?i.distance:5,c=this.shape,u=c.cx,d=c.cy,h=c.r,f=c.r0,m=(h+f)/2,v=c.startAngle,y=c.endAngle,w=(v+y)/2,_=t?Math.abs(h-f)/2:0,S=Math.cos,A=Math.sin,C=u+h*S(v),D=d+h*A(v),M="left",P="top";switch(s){case"startArc":C=u+(f-l)*S(w),D=d+(f-l)*A(w),M="center",P="top";break;case"insideStartArc":C=u+(f+l)*S(w),D=d+(f+l)*A(w),M="center",P="bottom";break;case"startAngle":C=u+m*S(v)+zP(v,l+_,!1),D=d+m*A(v)+HP(v,l+_,!1),M="right",P="middle";break;case"insideStartAngle":C=u+m*S(v)+zP(v,-l+_,!1),D=d+m*A(v)+HP(v,-l+_,!1),M="left",P="middle";break;case"middle":C=u+m*S(w),D=d+m*A(w),M="center",P="middle";break;case"endArc":C=u+(h+l)*S(w),D=d+(h+l)*A(w),M="center",P="bottom";break;case"insideEndArc":C=u+(h-l)*S(w),D=d+(h-l)*A(w),M="center",P="top";break;case"endAngle":C=u+m*S(y)+zP(y,l+_,!0),D=d+m*A(y)+HP(y,l+_,!0),M="left",P="middle";break;case"insideEndAngle":C=u+m*S(y)+zP(y,-l+_,!0),D=d+m*A(y)+HP(y,-l+_,!0),M="right",P="middle";break;default:return UN(r,i,a)}return r=r||{},r.x=C,r.y=D,r.align=M,r.verticalAlign=P,r}}function _gt(n,e,t,r){if(ur(r)){n.setTextConfig({rotation:r});return}else if($e(e)){n.setTextConfig({rotation:0});return}var i=n.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,c=t(e);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:n.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),n.setTextConfig({rotation:u})}function zP(n,e,t){return e*Math.sin(n)*(t?-1:1)}function HP(n,e,t){return e*Math.cos(n)*(t?1:-1)}function aw(n,e,t){var r=n.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;$e(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Ue(r,function(a){return ch(a,i)})}}var F6=Math.max,$6=Math.min;function xgt(n,e){var t=n.getArea&&n.getArea();if(i_(n,"cartesian2d")){var r=n.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=i,t.width+=i*2):(t.y-=i,t.height+=i*2)}}return t}var Sgt=function(n){Te(e,n);function e(){var t=n.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,i,a){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,i):this._renderNormal(t,r,i,a))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){Iy(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,i,a){var o=this.group,s=t.getData(),l=this._data,c=t.coordinateSystem,u=c.getBaseAxis(),d;c.type==="cartesian2d"?d=u.isHorizontal():c.type==="polar"&&(d=u.dim==="angle");var h=t.isAnimationEnabled()?t:null,f=Tgt(t,c);f&&this._enableRealtimeSort(f,s,i);var m=t.get("clip",!0)||f,v=xgt(c,s);o.removeClipPath();var y=t.get("roundCap",!0),w=t.get("showBackground",!0),_=t.getModel("backgroundStyle"),S=_.get("borderRadius")||0,A=[],C=this._backgroundEls,D=a&&a.isInitSort,M=a&&a.type==="changeAxisOrder";function P(L){var B=qP[c.type](s,L),$=Mgt(c,d,B);return $.useStyle(_.getItemStyle()),c.type==="cartesian2d"?$.setShape("r",S):$.setShape("cornerRadius",S),A[L]=$,$}s.diff(l).add(function(L){var B=s.getItemModel(L),$=qP[c.type](s,L,B);if(w&&P(L),!(!s.hasValue(L)||!fue[c.type]($))){var Y=!1;m&&(Y=cue[c.type](v,$));var q=uue[c.type](t,s,L,$,d,h,u.model,!1,y);f&&(q.forceLabelAnimation=!0),pue(q,s,L,B,$,t,d,c.type==="polar"),D?q.attr({shape:$}):f?due(f,h,q,$,L,d,!1,!1):Ni(q,{shape:$},t,L),s.setItemGraphicEl(L,q),o.add(q),q.ignore=Y}}).update(function(L,B){var $=s.getItemModel(L),Y=qP[c.type](s,L,$);if(w){var q=void 0;C.length===0?q=P(B):(q=C[B],q.useStyle(_.getItemStyle()),c.type==="cartesian2d"?q.setShape("r",S):q.setShape("cornerRadius",S),A[L]=q);var W=qP[c.type](s,L),X=bAe(d,W,c);fr(q,{shape:X},h,L)}var te=l.getItemGraphicEl(B);if(!s.hasValue(L)||!fue[c.type](Y)){o.remove(te);return}var re=!1;if(m&&(re=cue[c.type](v,Y),re&&o.remove(te)),te?uh(te):te=uue[c.type](t,s,L,Y,d,h,u.model,!!te,y),f&&(te.forceLabelAnimation=!0),M){var z=te.getTextContent();if(z){var oe=LT(z);oe.prevValue!=null&&(oe.prevValue=oe.value)}}else pue(te,s,L,$,Y,t,d,c.type==="polar");D?te.attr({shape:Y}):f?due(f,h,te,Y,L,d,!0,M):fr(te,{shape:Y},t,L,null),s.setItemGraphicEl(L,te),te.ignore=re,o.add(te)}).remove(function(L){var B=l.getItemGraphicEl(L);B&&eI(B,t,L)}).execute();var O=this._backgroundGroup||(this._backgroundGroup=new zt);O.removeAll();for(var j=0;j<A.length;++j)O.add(A[j]);o.add(O),this._backgroundEls=A,this._data=s},e.prototype._renderLarge=function(t,r,i){this._clear(),mue(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),mue(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&E2(t.coordinateSystem,!1,t),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,i){var a=this;if(r.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,i),this._isFirstFrame=!1;else{var s=function(l){var c=r.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(o.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,i){var a=[];return t.each(t.mapDimension(r.dim),function(o,s){var l=i(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:Ue(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,i){for(var a=i.scale,o=t.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,c=a.getOrdinalMeta().categories.length;l<c;++l){var u=t.rawIndexOf(o,a.getRawOrdinalNumber(l)),d=u<0?Number.MIN_VALUE:r(t.indexOfRawIndex(u));if(d>s)return!0;s=d}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(t.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,r,i,a){if(this._isOrderChangedWithinSameData(t,r,i)){var o=this._dataSort(t,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,r,i){var a=r.baseAxis,o=this._dataSort(t,a,function(s){return t.get(t.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){eI(a,t,Wt(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(ti),cue={cartesian2d:function(n,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=n.x+n.width,a=n.y+n.height,o=F6(e.x,n.x),s=$6(e.x+e.width,i),l=F6(e.y,n.y),c=$6(e.y+e.height,a),u=s<o,d=c<l;return e.x=u&&o>i?s:o,e.y=d&&l>a?c:l,e.width=u?0:s-o,e.height=d?0:c-l,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),u||d},polar:function(n,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var i=$6(e.r,n.r),a=F6(e.r0,n.r0);e.r=i,e.r0=a;var o=i-a<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},uue={cartesian2d:function(n,e,t,r,i,a,o,s,l){var c=new er({shape:Pe({},r),z2:1});if(c.__dataIndex=t,c.name="item",a){var u=c.shape,d=i?"height":"width";u[d]=0}return c},polar:function(n,e,t,r,i,a,o,s,l){var c=!i&&l?lL:Al,u=new c({shape:r,z2:1});u.name="item";var d=yAe(i);if(u.calculateTextPosition=wgt(d,{isRoundCap:c===lL}),a){var h=u.shape,f=i?"r":"endAngle",m={};h[f]=i?r.r0:r.startAngle,m[f]=r[f],(s?fr:Ni)(u,{shape:m},a)}return u}};function Tgt(n,e){var t=n.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function due(n,e,t,r,i,a,o,s){var l,c;a?(c={x:r.x,width:r.width},l={y:r.y,height:r.height}):(c={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?fr:Ni)(t,{shape:l},e,i,null);var u=e?n.baseAxis.model:null;(o?fr:Ni)(t,{shape:c},u,i)}function hue(n,e){for(var t=0;t<e.length;t++)if(!isFinite(n[e[t]]))return!0;return!1}var Egt=["x","y","width","height"],Agt=["cx","cy","r","startAngle","endAngle"],fue={cartesian2d:function(n){return!hue(n,Egt)},polar:function(n){return!hue(n,Agt)}},qP={cartesian2d:function(n,e,t){var r=n.getItemLayout(e),i=t?Dgt(t,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(n,e,t){var r=n.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Cgt(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function yAe(n){return function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}}(n)}function pue(n,e,t,r,i,a,o,s){var l=e.getItemVisual(t,"style");if(s){if(!a.get("roundCap")){var u=n.shape,d=aw(r.getModel("itemStyle"),u,!0);Pe(u,d),n.setShape(u)}}else{var c=r.get(["itemStyle","borderRadius"])||0;n.setShape("r",c)}n.useStyle(l);var h=r.getShallow("cursor");h&&n.attr("cursor",h);var f=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",m=So(r);ms(n,m,{labelFetcher:a,labelDataIndex:t,defaultText:rT(a.getData(),t),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var v=n.getTextContent();if(s&&v){var y=r.get(["label","position"]);n.textConfig.inside=y==="middle"?!0:null,_gt(n,y==="outside"?f:y,yAe(o),r.get(["label","rotate"]))}L1e(v,m,a.getRawValue(t),function(_){return cAe(e,_)});var w=r.getModel(["emphasis"]);na(n,w.get("focus"),w.get("blurScope"),w.get("disabled")),gs(n,r),Cgt(i)&&(n.style.fill="none",n.style.stroke="none",Z(n.states,function(_){_.style&&(_.style.fill=_.style.stroke="none")}))}function Dgt(n,e){var t=n.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=n.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var kgt=function(){function n(){}return n}(),gue=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new kgt},e.prototype.buildPath=function(t,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,u=0;u<i.length;u+=3)l[a]=c,l[o]=i[u+2],s[a]=i[u+a],s[o]=i[u+o],t.rect(s[0],s[1],l[0],l[1])},e}(Mn);function mue(n,e,t,r){var i=n.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=n.getModel("backgroundStyle"),c=i.getLayout("largeBackgroundPoints");if(c){var u=new gue({shape:{points:c},incremental:!!r,silent:!0,z2:0});u.baseDimIdx=a,u.largeDataIndices=o,u.barWidth=s,u.useStyle(l.getItemStyle()),e.add(u),t&&t.push(u)}var d=new gue({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=a,d.largeDataIndices=o,d.barWidth=s,e.add(d),d.useStyle(i.getVisual("style")),d.style.stroke=null,Wt(d).seriesIndex=n.seriesIndex,n.get("silent")||(d.on("mousedown",vue),d.on("mousemove",vue)),t&&t.push(d)}var vue=sK(function(n){var e=this,t=Igt(e,n.offsetX,n.offsetY);Wt(e).dataIndex=t>=0?t:null},30,!1);function Igt(n,e,t){for(var r=n.baseDimIdx,i=1-r,a=n.shape.points,o=n.largeDataIndices,s=[],l=[],c=n.barWidth,u=0,d=a.length/3;u<d;u++){var h=u*3;if(l[r]=c,l[i]=a[h+2],s[r]=a[h+r],s[i]=a[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),e>=s[0]&&e<=s[0]+l[0]&&t>=s[1]&&t<=s[1]+l[1])return o[u]}return-1}function bAe(n,e,t){if(i_(t,"cartesian2d")){var r=e,i=t.getArea();return{x:n?r.x:i.x,y:n?i.y:r.y,width:n?r.width:i.width,height:n?i.height:r.height}}else{var i=t.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:n?i.r0:a.r0,r:n?i.r:a.r,startAngle:n?a.startAngle:0,endAngle:n?a.endAngle:Math.PI*2}}}function Mgt(n,e,t){var r=n.type==="polar"?Al:er;return new r({shape:bAe(e,t,n),silent:!0,z2:0})}function Pgt(n){n.registerChartView(Sgt),n.registerSeriesModel(ygt),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,en(TEe,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,EEe("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,vAe("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var yue=Math.PI*2,GP=Math.PI/180;function wAe(n,e){return oo(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function _Ae(n,e){var t=wAe(n,e),r=n.get("center"),i=n.get("radius");$e(i)||(i=[0,i]);var a=Je(t.width,e.getWidth()),o=Je(t.height,e.getHeight()),s=Math.min(a,o),l=Je(i[0],s/2),c=Je(i[1],s/2),u,d,h=n.coordinateSystem;if(h){var f=h.dataToPoint(r);u=f[0]||0,d=f[1]||0}else $e(r)||(r=[r,r]),u=Je(r[0],a)+t.x,d=Je(r[1],o)+t.y;return{cx:u,cy:d,r0:l,r:c}}function Ogt(n,e,t){e.eachSeriesByType(n,function(r){var i=r.getData(),a=i.mapDimension("value"),o=wAe(r,t),s=_Ae(r,t),l=s.cx,c=s.cy,u=s.r,d=s.r0,h=-r.get("startAngle")*GP,f=r.get("endAngle"),m=r.get("padAngle")*GP;f=f==="auto"?h-yue:-f*GP;var v=r.get("minAngle")*GP,y=v+m,w=0;i.each(a,function(X){!isNaN(X)&&w++});var _=i.getSum(a),S=Math.PI/(_||w)*2,A=r.get("clockwise"),C=r.get("roseType"),D=r.get("stillShowZeroSum"),M=i.getDataExtent(a);M[0]=0;var P=A?1:-1,O=[h,f],j=P*m/2;LY(O,!A),h=O[0],f=O[1];var L=xAe(r);L.startAngle=h,L.endAngle=f,L.clockwise=A;var B=Math.abs(f-h),$=B,Y=0,q=h;if(i.setLayout({viewRect:o,r:u}),i.each(a,function(X,te){var re;if(isNaN(X)){i.setItemLayout(te,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:A,cx:l,cy:c,r0:d,r:C?NaN:u});return}C!=="area"?re=_===0&&D?S:X*S:re=B/w,re<y?(re=y,$-=y):Y+=X;var z=q+P*re,oe=0,le=0;m>re?(oe=q+P*re/2,le=oe):(oe=q+j,le=z-j),i.setItemLayout(te,{angle:re,startAngle:oe,endAngle:le,clockwise:A,cx:l,cy:c,r0:d,r:C?kr(X,M,[d,u]):u}),q=z}),$<yue&&w)if($<=.001){var W=B/w;i.each(a,function(X,te){if(!isNaN(X)){var re=i.getItemLayout(te);re.angle=W;var z=0,oe=0;W<m?(z=h+P*(te+1/2)*W,oe=z):(z=h+P*te*W+j,oe=h+P*(te+1)*W-j),re.startAngle=z,re.endAngle=oe}})}else S=$/Y,q=h,i.each(a,function(X,te){if(!isNaN(X)){var re=i.getItemLayout(te),z=re.angle===y?y:X*S,oe=0,le=0;z<m?(oe=q+P*z/2,le=oe):(oe=q+j,le=q+P*z-j),re.startAngle=oe,re.endAngle=le,q+=P*z}})})}var xAe=tr();function C2(n){return{seriesType:n,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var Rgt=Math.PI/180;function bue(n,e,t,r,i,a,o,s,l,c){if(n.length<2)return;function u(v){for(var y=v.rB,w=y*y,_=0;_<v.list.length;_++){var S=v.list[_],A=Math.abs(S.label.y-t),C=r+S.len,D=C*C,M=Math.sqrt(Math.abs((1-A*A/w)*D)),P=e+(M+S.len2)*i,O=P-S.label.x,j=S.targetTextWidth-O*i;SAe(S,j,!0),S.label.x=P}}function d(v){for(var y={list:[],maxY:0},w={list:[],maxY:0},_=0;_<v.length;_++)if(v[_].labelAlignTo==="none"){var S=v[_],A=S.label.y>t?w:y,C=Math.abs(S.label.y-t);if(C>=A.maxY){var D=S.label.x-e-S.len2*i,M=r+S.len,P=Math.abs(D)<M?Math.sqrt(C*C/(1-D*D/M/M)):M;A.rB=P,A.maxY=C}A.list.push(S)}u(y),u(w)}for(var h=n.length,f=0;f<h;f++)if(n[f].position==="outer"&&n[f].labelAlignTo==="labelLine"){var m=n[f].label.x-c;n[f].linePoints[1][0]+=m,n[f].label.x=c}GEe(n,l,l+o)&&d(n)}function Ngt(n,e,t,r,i,a,o,s){for(var l=[],c=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<n.length;h++){var f=n[h].label;B6(n[h])||(f.x<e?(u=Math.min(u,f.x),l.push(n[h])):(d=Math.max(d,f.x),c.push(n[h])))}for(var h=0;h<n.length;h++){var m=n[h];if(!B6(m)&&m.linePoints){if(m.labelStyleWidth!=null)continue;var f=m.label,v=m.linePoints,y=void 0;m.labelAlignTo==="edge"?f.x<e?y=v[2][0]-m.labelDistance-o-m.edgeDistance:y=o+i-m.edgeDistance-v[2][0]-m.labelDistance:m.labelAlignTo==="labelLine"?f.x<e?y=u-o-m.bleedMargin:y=o+i-d-m.bleedMargin:f.x<e?y=f.x-o-m.bleedMargin:y=o+i-f.x-m.bleedMargin,m.targetTextWidth=y,SAe(m,y)}}bue(c,e,t,r,1,i,a,o,s,d),bue(l,e,t,r,-1,i,a,o,s,u);for(var h=0;h<n.length;h++){var m=n[h];if(!B6(m)&&m.linePoints){var f=m.label,v=m.linePoints,w=m.labelAlignTo==="edge",_=f.style.padding,S=_?_[1]+_[3]:0,A=f.style.backgroundColor?0:S,C=m.rect.width+A,D=v[1][0]-v[2][0];w?f.x<e?v[2][0]=o+m.edgeDistance+C+m.labelDistance:v[2][0]=o+i-m.edgeDistance-C-m.labelDistance:(f.x<e?v[2][0]=f.x+m.labelDistance:v[2][0]=f.x-m.labelDistance,v[1][0]=v[2][0]+D),v[1][1]=v[2][1]=f.y}}}function SAe(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var r=n.label,i=r.style,a=n.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,c=i.overflow,u=a.width+(o?0:l);if(e<u||t){var d=a.height;if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",o)}else{var f=e-l,m=e<u?f:t?f>n.unconstrainedWidth?null:f:null;r.setStyle("width",m)}var v=r.getBoundingRect();a.width=v.width;var y=(r.style.margin||0)+2.1;a.height=v.height+y,a.y-=(a.height-d)/2}}}function B6(n){return n.position==="center"}function Lgt(n){var e=n.getData(),t=[],r,i,a=!1,o=(n.get("minShowLabelAngle")||0)*Rgt,s=e.getLayout("viewRect"),l=e.getLayout("r"),c=s.width,u=s.x,d=s.y,h=s.height;function f(D){D.ignore=!0}function m(D){if(!D.ignore)return!0;for(var M in D.states)if(D.states[M].ignore===!1)return!0;return!1}e.each(function(D){var M=e.getItemGraphicEl(D),P=M.shape,O=M.getTextContent(),j=M.getTextGuideLine(),L=e.getItemModel(D),B=L.getModel("label"),$=B.get("position")||L.get(["emphasis","label","position"]),Y=B.get("distanceToLabelLine"),q=B.get("alignTo"),W=Je(B.get("edgeDistance"),c),X=B.get("bleedMargin"),te=L.getModel("labelLine"),re=te.get("length");re=Je(re,c);var z=te.get("length2");if(z=Je(z,c),Math.abs(P.endAngle-P.startAngle)<o){Z(O.states,f),O.ignore=!0,j&&(Z(j.states,f),j.ignore=!0);return}if(m(O)){var oe=(P.startAngle+P.endAngle)/2,le=Math.cos(oe),ee=Math.sin(oe),be,he,pe,ct;r=P.cx,i=P.cy;var Be=$==="inside"||$==="inner";if($==="center")be=P.cx,he=P.cy,ct="center";else{var Se=(Be?(P.r+P.r0)/2*le:P.r*le)+r,_e=(Be?(P.r+P.r0)/2*ee:P.r*ee)+i;if(be=Se+le*3,he=_e+ee*3,!Be){var me=Se+le*(re+l-P.r),fe=_e+ee*(re+l-P.r),Ge=me+(le<0?-1:1)*z,Ve=fe;q==="edge"?be=le<0?u+W:u+c-W:be=Ge+(le<0?-Y:Y),he=Ve,pe=[[Se,_e],[me,fe],[Ge,Ve]]}ct=Be?"center":q==="edge"?le>0?"right":"left":le>0?"left":"right"}var nt=Math.PI,we=0,rt=B.get("rotate");if(ur(rt))we=rt*(nt/180);else if($==="center")we=0;else if(rt==="radial"||rt===!0){var on=le<0?-oe+nt:-oe;we=on}else if(rt==="tangential"&&$!=="outside"&&$!=="outer"){var Mt=Math.atan2(le,ee);Mt<0&&(Mt=nt*2+Mt);var kn=ee>0;kn&&(Mt=nt+Mt),we=Mt-nt}if(a=!!we,O.x=be,O.y=he,O.rotation=we,O.setStyle({verticalAlign:"middle"}),Be){O.setStyle({align:ct});var Yt=O.states.select;Yt&&(Yt.x+=O.x,Yt.y+=O.y)}else{var nr=O.getBoundingRect().clone();nr.applyTransform(O.getComputedTransform());var Le=(O.style.margin||0)+2.1;nr.y-=Le/2,nr.height+=Le,t.push({label:O,labelLine:j,position:$,len:re,len2:z,minTurnAngle:te.get("minTurnAngle"),maxSurfaceAngle:te.get("maxSurfaceAngle"),surfaceNormal:new ln(le,ee),linePoints:pe,textAlign:ct,labelDistance:Y,labelAlignTo:q,edgeDistance:W,bleedMargin:X,rect:nr,unconstrainedWidth:nr.width,labelStyleWidth:O.style.width})}M.setTextConfig({inside:Be})}}),!a&&n.get("avoidLabelOverlap")&&Ngt(t,r,i,l,c,h,u,d);for(var v=0;v<t.length;v++){var y=t[v],w=y.label,_=y.labelLine,S=isNaN(w.x)||isNaN(w.y);if(w){w.setStyle({align:y.textAlign}),S&&(Z(w.states,f),w.ignore=!0);var A=w.states.select;A&&(A.x+=w.x,A.y+=w.y)}if(_){var C=y.linePoints;S||!C?(Z(_.states,f),_.ignore=!0):(zEe(C,y.minTurnAngle),apt(C,y.surfaceNormal,y.maxSurfaceAngle),_.setShape({points:C}),w.__hostTarget.textGuideLineConfig={anchor:new ln(C[0][0],C[0][1])})}}}var jgt=function(n){Te(e,n);function e(t,r,i){var a=n.call(this)||this;a.z2=2;var o=new sr;return a.setTextContent(o),a.updateData(t,r,i,!0),a}return e.prototype.updateData=function(t,r,i,a){var o=this,s=t.hostModel,l=t.getItemModel(r),c=l.getModel("emphasis"),u=t.getItemLayout(r),d=Pe(aw(l.getModel("itemStyle"),u,!0),u);if(isNaN(d.startAngle)){o.setShape(d);return}if(a){o.setShape(d);var h=s.getShallow("animationType");s.ecModel.ssr?(Ni(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=d.cx,o.originY=d.cy):h==="scale"?(o.shape.r=u.r0,Ni(o,{shape:{r:u.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),Ni(o,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,r)):(o.shape.endAngle=u.startAngle,fr(o,{shape:{endAngle:u.endAngle}},s,r))}else uh(o),fr(o,{shape:d},s,r);o.useStyle(t.getItemVisual(r,"style")),gs(o,l);var f=(u.startAngle+u.endAngle)/2,m=s.get("selectedOffset"),v=Math.cos(f)*m,y=Math.sin(f)*m,w=l.getShallow("cursor");w&&o.attr("cursor",w),this._updateLabel(s,t,r),o.ensureState("emphasis").shape=Pe({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},aw(c.getModel("itemStyle"),u)),Pe(o.ensureState("select"),{x:v,y,shape:aw(l.getModel(["select","itemStyle"]),u)}),Pe(o.ensureState("blur"),{shape:aw(l.getModel(["blur","itemStyle"]),u)});var _=o.getTextGuideLine(),S=o.getTextContent();_&&Pe(_.ensureState("select"),{x:v,y}),Pe(S.ensureState("select"),{x:v,y}),na(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),l=r.getItemVisual(i,"style"),c=l&&l.fill,u=l&&l.opacity;ms(a,So(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:c,defaultOpacity:u,defaultText:t.getFormattedLabel(i,"normal")||r.getName(i)});var d=a.getTextContent();a.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var h=t.get(["label","position"]);if(h!=="outside"&&h!=="outer")a.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new Dl,this.setTextGuideLine(f)),wK(this,_K(o),{stroke:c,opacity:Cf(s.get(["lineStyle","opacity"]),u,1)})}},e}(Al),Fgt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i,a){var o=t.getData(),s=this._data,l=this.group,c;if(!s&&o.count()>0){for(var u=o.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<o.count();++d)u=o.getItemLayout(d);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&t.get("showEmptyCircle")){var h=xAe(t),f=new Al({shape:Pe(_Ae(t,i),h)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}o.diff(s).add(function(m){var v=new jgt(o,m,c);o.setItemGraphicEl(m,v),l.add(v)}).update(function(m,v){var y=s.getItemGraphicEl(v);y.updateData(o,m,c),y.off("click"),l.add(y),o.setItemGraphicEl(m,y)}).remove(function(m){var v=s.getItemGraphicEl(m);eI(v,t,m)}).execute(),Lgt(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="pie",e}(ti);function qT(n,e,t){e=$e(e)&&{coordDimensions:e}||Pe({encodeDefine:n.getEncode()},e);var r=n.getSource(),i=_2(r,e).dimensions,a=new xl(i,n);return a.initData(r,t),a}var D2=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},n}(),$gt=tr(),Bgt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new D2(dt(this.getData,this),dt(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return qT(this,{coordDimensions:["value"],encodeDefaulter:en(JY,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),i=$gt(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),a=i.seats=Mst(o,r.hostModel.get("percentPrecision"))}var s=n.prototype.getDataParams.call(this,t);return s.percent=a[t]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(t){jw(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(bi);function Ugt(n){return{seriesType:n,reset:function(e,t){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(ur(o)&&!isNaN(o)&&o<0)})}}}function Vgt(n){n.registerChartView(Fgt),n.registerSeriesModel(Bgt),VTe("pie",n.registerAction),n.registerLayout(en(Ogt,"pie")),n.registerProcessor(C2("pie")),n.registerProcessor(Ugt("pie"))}var zgt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(bi),TAe=4,Hgt=function(){function n(){}return n}(),qgt=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new Hgt},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,r){var i=r.points,a=r.size,o=this.symbolProxy,s=o.shape,l=t.getContext?t.getContext():t,c=l&&a[0]<TAe,u=this.softClipShape,d;if(c){this._ctx=l;return}for(this._ctx=null,d=this._off;d<i.length;){var h=i[d++],f=i[d++];isNaN(h)||isNaN(f)||u&&!u.contain(h,f)||(s.x=h-a[0]/2,s.y=f-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(t,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,i=t.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var l=r[s++],c=r[s++];isNaN(l)||isNaN(c)||o&&!o.contain(l,c)||a.fillRect(l-i[0]/2,c-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(t,r){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),c=a.length/2-1;c>=0;c--){var u=c*2,d=a[u]-s/2,h=a[u+1]-l/2;if(t>=d&&r>=h&&t<=d+s&&r<=h+l)return c}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.points,a=r.size,o=a[0],s=a[1],l=1/0,c=1/0,u=-1/0,d=-1/0,h=0;h<i.length;){var f=i[h++],m=i[h++];l=Math.min(f,l),u=Math.max(f,u),c=Math.min(m,c),d=Math.max(m,d)}t=this._rect=new pn(l-o/2,c-s/2,u-l+o,d-c+s)}return t},e}(Mn),Ggt=function(){function n(){this.group=new zt}return n.prototype.updateData=function(e,t){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,t)},n.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;t=new Float32Array(t.buffer,a,i)}r.setShape("points",t),r.reset()})},n.prototype.incrementalPrepareUpdate=function(e){this._clear()},n.prototype.incrementalUpdate=function(e,t,r){var i=this._newAdded[0],a=t.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=e.end,i.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=e.start,c.endIndex=e.end,c.incremental=!0,c.setShape({points:a}),this._setCommon(c,t,r)}},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new qgt({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;r=r||{};var a=t.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=za(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<TAe;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var c=Wt(e);c.seriesIndex=i.seriesIndex,e.on("mousemove",function(u){c.dataIndex=null;var d=e.hoverDataIdx;d>=0&&(c.dataIndex=d+(e.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),Wgt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.updateData(a,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,i){var a=t.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=A2("").reset(t,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var r=t.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,r){var i=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new Ggt:new T2,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(ti),Ygt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Un),R8=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Va).models[0]},e.type="cartesian2dAxis",e}(Un);Ha(R8,x2);var EAe={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Kgt=an({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},EAe),DK=an({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},EAe),Xgt=an({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},DK),Zgt=Rt({logBase:10},DK);const AAe={category:Kgt,value:DK,time:Xgt,log:Zgt};var Qgt={value:1,category:1,time:1,log:1};function iT(n,e,t,r){Z(Qgt,function(i,a){var o=an(an({},AAe[a],!0),r,!0),s=function(l){Te(c,l);function c(){var u=l!==null&&l.apply(this,arguments)||this;return u.type=e+"Axis."+a,u}return c.prototype.mergeDefaultAndTheme=function(u,d){var h=nI(this),f=h?$T(u):{},m=d.getTheme();an(u,m.get(a+"Axis")),an(u,this.getDefaultOption()),u.type=wue(u),h&&py(u,f,h)},c.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=C8.createByAxisModel(this))},c.prototype.getCategories=function(u){var d=this.option;if(d.type==="category")return u?d.data:this.__ordinalMeta.categories},c.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},c.type=e+"Axis."+a,c.defaultOption=o,c}(t);n.registerComponentModel(s)}),n.registerSubTypeDefaulter(e+"Axis",wue)}function wue(n){return n.type||(n.data?"category":"value")}var Jgt=function(){function n(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return n.prototype.getAxis=function(e){return this._axes[e]},n.prototype.getAxes=function(){return Ue(this._dimList,function(e){return this._axes[e]},this)},n.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Cr(this.getAxes(),function(t){return t.scale.type===e})},n.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},n}(),N8=["x","y"];function _ue(n){return n.type==="interval"||n.type==="time"}var emt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=N8,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!_ue(t)||!_ue(r))){var i=t.getExtent(),a=r.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],c=a[1]-a[0];if(!(!l||!c)){var u=(s[0]-o[0])/l,d=(s[1]-o[1])/c,h=o[0]-i[0]*u,f=o[1]-a[0]*d,m=this._transform=[u,0,0,d,h,f];this._invTransform=PT([],m)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var i=this.dataToPoint(t),a=this.dataToPoint(r),o=this.getArea(),s=new pn(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,r,i){i=i||[];var a=t[0],o=t[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return hs(i,t,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,r)),i[1]=l.toGlobalCoord(l.dataToCoord(o,r)),i},e.prototype.clampData=function(t,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(t[0]),c=a.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),c),Math.max(s[0],s[1])),r},e.prototype.pointToData=function(t,r){var i=[];if(this._invTransform)return hs(i,t,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(t[0]),r),i[1]=o.coordToData(o.toLocalCoord(t[1]),r),i},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(r[0],r[1])-t,o=Math.min(i[0],i[1])-t,s=Math.max(r[0],r[1])-a+t,l=Math.max(i[0],i[1])-o+t;return new pn(a,o,s,l)},e}(Jgt),tmt=function(n){Te(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(fh);function L8(n,e,t){t=t||{};var r=n.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,c=i.dim,u=r.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],h={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,m=c==="x"?[d[2]-f,d[3]+f]:[d[0]-f,d[1]+f];if(o){var v=o.toGlobalCoord(o.dataToCoord(0));m[h.onZero]=Math.max(Math.min(v,m[1]),m[0])}a.position=[c==="y"?m[h[l]]:d[0],c==="x"?m[h[l]]:d[3]],a.rotation=Math.PI/2*(c==="x"?0:1);var y={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=y[s],a.labelOffset=o?m[h[s]]-m[h.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Ho(t.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var w=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-w:w,a.z2=1,a}function xue(n){return n.get("coordinateSystem")==="cartesian2d"}function Sue(n){var e={xAxisModel:null,yAxisModel:null};return Z(e,function(t,r){var i=r.replace(/Model$/,""),a=n.getReferringComponents(i,Va).models[0];e[r]=a}),e}var U6=Math.log;function CAe(n,e,t){var r=Lg.prototype,i=r.getTicks.call(t),a=r.getTicks.call(t,!0),o=i.length-1,s=r.getInterval.call(t),l=IEe(n,e),c=l.extent,u=l.fixMin,d=l.fixMax;if(n.type==="log"){var h=U6(n.base);c=[U6(c[0])/h,U6(c[1])/h]}n.setExtent(c[0],c[1]),n.calcNiceExtent({splitNumber:o,fixMin:u,fixMax:d});var f=r.getExtent.call(n);u&&(c[0]=f[0]),d&&(c[1]=f[1]);var m=r.getInterval.call(n),v=c[0],y=c[1];if(u&&d)m=(y-v)/o;else if(u)for(y=c[0]+m*o;y<c[1]&&isFinite(y)&&isFinite(c[1]);)m=A6(m),y=c[0]+m*o;else if(d)for(v=c[1]-m*o;v>c[0]&&isFinite(v)&&isFinite(c[0]);)m=A6(m),v=c[1]-m*o;else{var w=n.getTicks().length-1;w>o&&(m=A6(m));var _=m*o;y=Math.ceil(c[1]/m)*m,v=va(y-_),v<0&&c[0]>=0?(v=0,y=va(_)):y>0&&c[1]<=0&&(y=0,v=-va(_))}var S=(i[0].value-a[0].value)/s,A=(i[o].value-a[o].value)/s;r.setExtent.call(n,v+m*S,y+m*A),r.setInterval.call(n,m),(S||A)&&r.setNiceExtent.call(n,v+m,y-m)}var nmt=function(){function n(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=N8,this._initCartesian(e,t,r),this.model=e}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function i(o){var s,l=Vn(o),c=l.length;if(c){for(var u=[],d=c-1;d>=0;d--){var h=+l[d],f=o[h],m=f.model,v=f.scale;D8(v)&&m.get("alignTicks")&&m.get("interval")==null?u.push(f):(nT(v,m),D8(v)&&(s=f))}u.length&&(s||(s=u.pop(),nT(s.scale,s.model)),Z(u,function(y){CAe(y.scale,y.model,s.scale)}))}}i(r.x),i(r.y);var a={};Z(r.x,function(o){Tue(r,"y",o,a)}),Z(r.y,function(o){Tue(r,"x",o,a)}),this.resize(this.model,t)},n.prototype.resize=function(e,t,r){var i=e.getBoxLayoutParams(),a=!r&&e.get("containLabel"),o=oo(i,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(Z(s,function(c){if(!c.model.get(["axisLabel","inside"])){var u=Lft(c);if(u){var d=c.isHorizontal()?"height":"width",h=c.model.get(["axisLabel","margin"]);o[d]-=u[d]+h,c.position==="top"?o.y+=u.height+h:c.position==="left"&&(o.x+=u.width+h)}}}),l()),Z(this._coordsList,function(c){c.calcAffineTransform()});function l(){Z(s,function(c){var u=c.isHorizontal(),d=u?[0,o.width]:[0,o.height],h=c.inverse?1:0;c.setExtent(d[h],d[1-h]),rmt(c,u?o.x:o.y)})}},n.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}jt(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===t)return a[i]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},n.prototype.convertFromPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},n.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",Va).models[0],i=e.yAxisModel||t&&t.getReferringComponents("yAxis",Va).models[0],a=e.gridModel,o=this._coordsList,s,l;if(t)s=t.coordinateSystem,_n(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var c=a.coordinateSystem;c===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},n.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},n.prototype._initCartesian=function(e,t,r){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",c("x"),this),t.eachComponent("yAxis",c("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,Z(s.x,function(u,d){Z(s.y,function(h,f){var m="x"+d+"y"+f,v=new emt(m);v.master=i,v.model=e,i._coordsMap[m]=v,i._coordsList.push(v),v.addAxis(u),v.addAxis(h)})});function c(u){return function(d,h){if(V6(d,e)){var f=d.get("position");u==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var m=new tmt(u,q5(d),[0,0],d.get("type"),f),v=m.type==="category";m.onBand=v&&d.get("boundaryGap"),m.inverse=d.get("inverse"),d.axis=m,m.model=d,m.grid=a,m.index=h,a._axesList.push(m),s[u][h]=m,l[u]++}}}},n.prototype._updateScale=function(e,t){Z(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(xue(i)){var a=Sue(i),o=a.xAxisModel,s=a.yAxisModel;if(!V6(o,t)||!V6(s,t))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),c=i.getData(),u=l.getAxis("x"),d=l.getAxis("y");r(c,u),r(c,d)}},this);function r(i,a){Z(iL(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},n.prototype.getTooltipAxes=function(e){var t=[],r=[];return Z(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);_n(t,a)<0&&t.push(a),_n(r,o)<0&&r.push(o)}),{baseAxes:t,otherAxes:r}},n.create=function(e,t){var r=[];return e.eachComponent("grid",function(i,a){var o=new n(i,e,t);o.name="grid_"+a,o.resize(i,t,!0),i.coordinateSystem=o,r.push(o)}),e.eachSeries(function(i){if(xue(i)){var a=Sue(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),c=l.coordinateSystem;i.coordinateSystem=c.getCartesian(o.componentIndex,s.componentIndex)}}),r},n.dimensions=N8,n}();function V6(n,e){return n.getCoordSysModel()===e}function Tue(n,e,t,r){t.getAxesOnZeroOf=function(){return a?[a]:[]};var i=n[e],a,o=t.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)Eue(i[l])&&(a=i[l]);else for(var c in i)if(i.hasOwnProperty(c)&&Eue(i[c])&&!r[u(i[c])]){a=i[c];break}a&&(r[u(a)]=!0);function u(d){return d.dim+"_"+d.index}}function Eue(n){return n&&n.type!=="category"&&n.type!=="time"&&Nft(n)}function rmt(n,e){var t=n.getExtent(),r=t[0]+t[1];n.toGlobalCoord=n.dim==="x"?function(i){return i+e}:function(i){return r-i+e},n.toLocalCoord=n.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}var zv=Math.PI,Sl=function(){function n(e,t){this.group=new zt,this.opt=t,this.axisModel=e,Rt(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new zt({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return n.prototype.hasBuilder=function(e){return!!Aue[e]},n.prototype.add=function(e){Aue[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,r){var i=zSe(t-e),a,o;return Xk(i)?(o=r>0?"top":"bottom",a="center"):Xk(i-zv)?(o=r>0?"bottom":"top",a="center"):(o="middle",i>0&&i<zv?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),Aue={axisLine:function(n,e,t,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&n.handleAutoShown&&(i=n.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),o=r.transform,s=[a[0],0],l=[a[1],0],c=s[0]>l[0];o&&(hs(s,s,o),hs(l,l,o));var u=Pe({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new bo({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});J1(d.shape,d.style.lineWidth),d.anid="line",t.add(d);var h=e.get(["axisLine","symbol"]);if(h!=null){var f=e.get(["axisLine","symbolSize"]);st(h)&&(h=[h,h]),(st(f)||ur(f))&&(f=[f,f]);var m=n_(e.get(["axisLine","symbolOffset"])||0,f),v=f[0],y=f[1];Z([{rotate:n.rotation+Math.PI/2,offset:m[0],r:0},{rotate:n.rotation-Math.PI/2,offset:m[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(w,_){if(h[_]!=="none"&&h[_]!=null){var S=za(h[_],-v/2,-y/2,v,y,u.stroke,!0),A=w.r+w.offset,C=c?l:s;S.attr({rotation:w.rotate,x:C[0]+A*Math.cos(n.rotation),y:C[1]-A*Math.sin(n.rotation),silent:!0,z2:11}),t.add(S)}})}}},axisTickLabel:function(n,e,t,r){var i=omt(t,r,e,n),a=lmt(t,r,e,n);if(amt(e,a,i),smt(t,r,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=HEe(Ue(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));WEe(o)}},axisName:function(n,e,t,r){var i=Ho(n.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),o=n.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=e.axis.getExtent(),u=c[0]>c[1]?-1:1,d=[a==="start"?c[0]-u*l:a==="end"?c[1]+u*l:(c[0]+c[1])/2,Due(a)?n.labelOffset+o*l:0],h,f=e.get("nameRotate");f!=null&&(f=f*zv/180);var m;Due(a)?h=Sl.innerTextLayout(n.rotation,f??n.rotation,o):(h=imt(n.rotation,a,f||0,c),m=n.axisNameAvailableWidth,m!=null&&(m=Math.abs(m/Math.sin(h.rotation)),!isFinite(m)&&(m=null)));var v=s.getFont(),y=e.get("nameTruncate",!0)||{},w=y.ellipsis,_=Ho(n.nameTruncateMaxWidth,y.maxWidth,m),S=new sr({x:d[0],y:d[1],rotation:h.rotation,silent:Sl.isLabelSilent(e),style:vi(s,{text:i,font:v,overflow:"truncate",width:_,ellipsis:w,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(e_({el:S,componentModel:e,itemName:i}),S.__fullText=i,S.anid="name",e.get("triggerEvent")){var A=Sl.makeAxisEventDataBase(e);A.targetType="axisName",A.name=i,Wt(S).eventData=A}r.add(S),S.updateTransform(),t.add(S),S.decomposeTransform()}}};function imt(n,e,t,r){var i=zSe(t-n),a,o,s=r[0]>r[1],l=e==="start"&&!s||e!=="start"&&s;return Xk(i-zv/2)?(o=l?"bottom":"top",a="center"):Xk(i-zv*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<zv*1.5&&i>zv/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function amt(n,e,t){if(!MEe(n.axis)){var r=n.get(["axisLabel","showMinLabel"]),i=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var a=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],c=t[0],u=t[1],d=t[t.length-1],h=t[t.length-2];r===!1?(Cu(a),Cu(c)):Cue(a,o)&&(r?(Cu(o),Cu(u)):(Cu(a),Cu(c))),i===!1?(Cu(s),Cu(d)):Cue(l,s)&&(i?(Cu(l),Cu(h)):(Cu(s),Cu(d)))}}function Cu(n){n&&(n.ignore=!0)}function Cue(n,e){var t=n&&n.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var i=m5([]);return Jw(i,i,-n.rotation),t.applyTransform(yg([],i,n.getLocalTransform())),r.applyTransform(yg([],i,e.getLocalTransform())),t.intersect(r)}}function Due(n){return n==="middle"||n==="center"}function DAe(n,e,t,r,i){for(var a=[],o=[],s=[],l=0;l<n.length;l++){var c=n[l].coord;o[0]=c,o[1]=0,s[0]=c,s[1]=t,e&&(hs(o,o,e),hs(s,s,e));var u=new bo({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});J1(u.shape,u.style.lineWidth),u.anid=i+"_"+n[l].tickValue,a.push(u)}return a}function omt(n,e,t,r){var i=t.axis,a=t.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),c=i.getTicksCoords(),u=DAe(c,e.transform,l,Rt(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<u.length;d++)n.add(u[d]);return u}}function smt(n,e,t,r){var i=t.axis,a=t.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=r*a.get("length"),c=Rt(s.getLineStyle(),Rt(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),u=0;u<o.length;u++)for(var d=DAe(o[u],e.transform,l,c,"minorticks_"+u),h=0;h<d.length;h++)n.add(d[h])}}function lmt(n,e,t,r){var i=t.axis,a=Ho(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),c=(Ho(r.labelRotate,o.get("rotate"))||0)*zv/180,u=Sl.innerTextLayout(r.rotation,c,r.labelDirection),d=t.getCategories&&t.getCategories(!0),h=[],f=Sl.isLabelSilent(t),m=t.get("triggerEvent");return Z(l,function(v,y){var w=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,_=v.formattedLabel,S=v.rawLabel,A=o;if(d&&d[w]){var C=d[w];jt(C)&&C.textStyle&&(A=new Ir(C.textStyle,o,t.ecModel))}var D=A.getTextColor()||t.get(["axisLine","lineStyle","color"]),M=i.dataToCoord(w),P=A.getShallow("align",!0)||u.textAlign,O=Zt(A.getShallow("alignMinLabel",!0),P),j=Zt(A.getShallow("alignMaxLabel",!0),P),L=A.getShallow("verticalAlign",!0)||A.getShallow("baseline",!0)||u.textVerticalAlign,B=Zt(A.getShallow("verticalAlignMinLabel",!0),L),$=Zt(A.getShallow("verticalAlignMaxLabel",!0),L),Y=new sr({x:M,y:r.labelOffset+r.labelDirection*s,rotation:u.rotation,silent:f,z2:10+(v.level||0),style:vi(A,{text:_,align:y===0?O:y===l.length-1?j:P,verticalAlign:y===0?B:y===l.length-1?$:L,fill:kt(D)?D(i.type==="category"?S:i.type==="value"?w+"":w,y):D})});if(Y.anid="label_"+w,e_({el:Y,componentModel:t,itemName:_,formatterParamsExtra:{isTruncated:function(){return Y.isTruncated},value:S,tickIndex:y}}),m){var q=Sl.makeAxisEventDataBase(t);q.targetType="axisLabel",q.value=S,q.tickIndex=y,i.type==="category"&&(q.dataIndex=w),Wt(Y).eventData=q}e.add(Y),Y.updateTransform(),h.push(Y),n.add(Y),Y.decomposeTransform()}),h}}function cmt(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return umt(t,n,e),t.seriesInvolved&&hmt(t,n),t}function umt(n,e,t){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];Z(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=dI(s.model),c=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=s;var u=s.model,d=u.getModel("tooltip",r);if(Z(s.getAxes(),en(v,!1,null)),s.getTooltipAxes&&r&&d.get("show")){var h=d.get("trigger")==="axis",f=d.get(["axisPointer","type"])==="cross",m=s.getTooltipAxes(d.get(["axisPointer","axis"]));(h||f)&&Z(m.baseAxes,en(v,f?"cross":!0,h)),f&&Z(m.otherAxes,en(v,"cross",!1))}function v(y,w,_){var S=_.model.getModel("axisPointer",i),A=S.get("show");if(!(!A||A==="auto"&&!y&&!j8(S))){w==null&&(w=S.get("triggerTooltip")),S=y?dmt(_,d,i,e,y,w):S;var C=S.get("snap"),D=S.get("triggerEmphasis"),M=dI(_.model),P=w||C||_.type==="category",O=n.axesInfo[M]={key:M,axis:_,coordSys:s,axisPointerModel:S,triggerTooltip:w,triggerEmphasis:D,involveSeries:P,snap:C,useHandle:j8(S),seriesModels:[],linkGroup:null};c[M]=O,n.seriesInvolved=n.seriesInvolved||P;var j=fmt(a,_);if(j!=null){var L=o[j]||(o[j]={axesInfo:{}});L.axesInfo[M]=O,L.mapper=a[j].mapper,O.linkGroup=L}}}})}function dmt(n,e,t,r,i,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};Z(s,function(h){l[h]=Bt(o.get(h))}),l.snap=n.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),i==="cross"){var u=o.get(["label","show"]);if(c.show=u??!0,!a){var d=l.lineStyle=o.get("crossStyle");d&&Rt(c,d.textStyle)}}return n.model.getModel("axisPointer",new Ir(l,t,r))}function hmt(n,e){e.eachSeries(function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),a=t.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||t.get(["axisPointer","show"],!0)===!1||Z(n.coordSysAxesInfo[dI(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function fmt(n,e){for(var t=e.model,r=e.dim,i=0;i<n.length;i++){var a=n[i]||{};if(z6(a[r+"AxisId"],t.id)||z6(a[r+"AxisIndex"],t.componentIndex)||z6(a[r+"AxisName"],t.name))return i}}function z6(n,e){return n==="all"||$e(n)&&_n(n,e)>=0||n===e}function pmt(n){var e=kK(n);if(e){var t=e.axisPointerModel,r=e.axis.scale,i=t.option,a=t.get("status"),o=t.get("value");o!=null&&(o=r.parse(o));var s=j8(t);a==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function kK(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[dI(n)]}function gmt(n){var e=kK(n);return e&&e.axisPointerModel}function j8(n){return!!n.get(["handle","show"])}function dI(n){return n.type+"||"+n.id}var kue={},a_=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.axisPointerClass&&pmt(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,r,i,a){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=gmt(t);o?(this._axisPointer||(this._axisPointer=new a)).render(t,o,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){kue[t]=r},e.getAxisPointerClass=function(t){return t&&kue[t]},e.type="axis",e}(Yi),F8=tr();function kAe(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),c=i.getTicksCoords({tickModel:a,clamp:!0});if(c.length){var u=s.length,d=F8(n).splitAreaColors,h=_t(),f=0;if(d)for(var m=0;m<c.length;m++){var v=d.get(c[m].tickValue);if(v!=null){f=(v+(u-1)*m)%u;break}}var y=i.toGlobalCoord(c[0].coord),w=o.getAreaStyle();s=$e(s)?s:[s];for(var m=1;m<c.length;m++){var _=i.toGlobalCoord(c[m].coord),S=void 0,A=void 0,C=void 0,D=void 0;i.isHorizontal()?(S=y,A=l.y,C=_-S,D=l.height,y=S+C):(S=l.x,A=y,C=l.width,D=_-A,y=A+D);var M=c[m-1].tickValue;M!=null&&h.set(M,f),e.add(new er({anid:M!=null?"area_"+M:null,shape:{x:S,y:A,width:C,height:D},style:Rt({fill:s[f]},w),autoBatch:!0,silent:!0})),f=(f+1)%u}F8(n).splitAreaColors=h}}}function IAe(n){F8(n).splitAreaColors=null}var mmt=["axisLine","axisTickLabel","axisName"],vmt=["splitArea","splitLine","minorSplitLine"],MAe=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new zt,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),l=L8(s,t),c=new Sl(t,Pe({handleAutoShown:function(d){for(var h=s.coordinateSystem.getCartesians(),f=0;f<h.length;f++)if(D8(h[f].getOtherAxis(t.axis).scale))return!0;return!1}},l));Z(mmt,c.add,c),this._axisGroup.add(c.getGroup()),Z(vmt,function(d){t.get([d,"show"])&&ymt[d](this,this._axisGroup,t,s)},this);var u=a&&a.type==="changeAxisOrder"&&a.isInitSort;u||v2(o,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)}},e.prototype.remove=function(){IAe(this)},e.type="cartesianAxis",e}(a_),ymt={splitLine:function(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color"),l=a.get("showMinLine")!==!1,c=a.get("showMaxLine")!==!1;s=$e(s)?s:[s];for(var u=r.coordinateSystem.getRect(),d=i.isHorizontal(),h=0,f=i.getTicksCoords({tickModel:a}),m=[],v=[],y=o.getLineStyle(),w=0;w<f.length;w++){var _=i.toGlobalCoord(f[w].coord);if(!(w===0&&!l||w===f.length-1&&!c)){var S=f[w].tickValue;d?(m[0]=_,m[1]=u.y,v[0]=_,v[1]=u.y+u.height):(m[0]=u.x,m[1]=_,v[0]=u.x+u.width,v[1]=_);var A=h++%s.length,C=new bo({anid:S!=null?"line_"+S:null,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:v[0],y2:v[1]},style:Rt({stroke:s[A]},y),silent:!0});J1(C.shape,y.lineWidth),e.add(C)}}}},minorSplitLine:function(n,e,t,r){var i=t.axis,a=t.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=i.isHorizontal(),c=i.getMinorTicksCoords();if(c.length)for(var u=[],d=[],h=o.getLineStyle(),f=0;f<c.length;f++)for(var m=0;m<c[f].length;m++){var v=i.toGlobalCoord(c[f][m].coord);l?(u[0]=v,u[1]=s.y,d[0]=v,d[1]=s.y+s.height):(u[0]=s.x,u[1]=v,d[0]=s.x+s.width,d[1]=v);var y=new bo({anid:"minor_line_"+c[f][m].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:h,silent:!0});J1(y.shape,h.lineWidth),e.add(y)}},splitArea:function(n,e,t,r){kAe(n,e,t,r)}},PAe=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(MAe),bmt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=PAe.type,t}return e.type="yAxis",e}(MAe),wmt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new er({shape:t.coordinateSystem.getRect(),style:Rt({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Yi),Iue={offset:0};function OAe(n){n.registerComponentView(wmt),n.registerComponentModel(Ygt),n.registerCoordinateSystem("cartesian2d",nmt),iT(n,"x",R8,Iue),iT(n,"y",R8,Iue),n.registerComponentView(PAe),n.registerComponentView(bmt),n.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function _mt(n){Dn(OAe),n.registerSeriesModel(zgt),n.registerChartView(Wgt),n.registerLayout(A2("scatter"))}function xmt(n){n.eachSeriesByType("radar",function(e){var t=e.getData(),r=[],i=e.coordinateSystem;if(i){var a=i.getIndicatorAxes();Z(a,function(o,s){t.each(t.mapDimension(a[s].dim),function(l,c){r[c]=r[c]||[];var u=i.dataToPoint(l,s);r[c][s]=Mue(u)?u:Pue(i)})}),t.each(function(o){var s=lot(r[o],function(l){return Mue(l)})||Pue(i);r[o].push(s.slice()),t.setItemLayout(o,r[o])})}})}function Mue(n){return!isNaN(n[0])&&!isNaN(n[1])}function Pue(n){return[n.cx,n.cy]}function Smt(n){var e=n.polar;if(e){$e(e)||(e=[e]);var t=[];Z(e,function(r,i){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),n.radar=n.radar||[],$e(n.radar)||(n.radar=[n.radar]),n.radar.push(r)):t.push(r)}),n.polar=t}Z(n.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var Tmt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.coordinateSystem,o=this.group,s=t.getData(),l=this._data;function c(h,f){var m=h.getItemVisual(f,"symbol")||"circle";if(m!=="none"){var v=zT(h.getItemVisual(f,"symbolSize")),y=za(m,-1,-1,2,2),w=h.getItemVisual(f,"symbolRotate")||0;return y.attr({style:{strokeNoScale:!0},z2:100,scaleX:v[0]/2,scaleY:v[1]/2,rotation:w*Math.PI/180||0}),y}}function u(h,f,m,v,y,w){m.removeAll();for(var _=0;_<f.length-1;_++){var S=c(v,y);S&&(S.__dimIdx=_,h[_]?(S.setPosition(h[_]),t_[w?"initProps":"updateProps"](S,{x:f[_][0],y:f[_][1]},t,y)):S.setPosition(f[_]),m.add(S))}}function d(h){return Ue(h,function(f){return[a.cx,a.cy]})}s.diff(l).add(function(h){var f=s.getItemLayout(h);if(f){var m=new Cl,v=new Dl,y={shape:{points:f}};m.shape.points=d(f),v.shape.points=d(f),Ni(m,y,t,h),Ni(v,y,t,h);var w=new zt,_=new zt;w.add(v),w.add(m),w.add(_),u(v.shape.points,f,_,s,h,!0),s.setItemGraphicEl(h,w)}}).update(function(h,f){var m=l.getItemGraphicEl(f),v=m.childAt(0),y=m.childAt(1),w=m.childAt(2),_={shape:{points:s.getItemLayout(h)}};_.shape.points&&(u(v.shape.points,_.shape.points,w,s,h,!1),uh(y),uh(v),fr(v,_,t),fr(y,_,t),s.setItemGraphicEl(h,m))}).remove(function(h){o.remove(l.getItemGraphicEl(h))}).execute(),s.eachItemGraphicEl(function(h,f){var m=s.getItemModel(f),v=h.childAt(0),y=h.childAt(1),w=h.childAt(2),_=s.getItemVisual(f,"style"),S=_.fill;o.add(h),v.useStyle(Rt(m.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:S})),gs(v,m,"lineStyle"),gs(y,m,"areaStyle");var A=m.getModel("areaStyle"),C=A.isEmpty()&&A.parentModel.isEmpty();y.ignore=C,Z(["emphasis","select","blur"],function(P){var O=m.getModel([P,"areaStyle"]),j=O.isEmpty()&&O.parentModel.isEmpty();y.ensureState(P).ignore=j&&C}),y.useStyle(Rt(A.getAreaStyle(),{fill:S,opacity:.7,decal:_.decal}));var D=m.getModel("emphasis"),M=D.getModel("itemStyle").getItemStyle();w.eachChild(function(P){if(P instanceof Yo){var O=P.style;P.useStyle(Pe({image:O.image,x:O.x,y:O.y,width:O.width,height:O.height},_))}else P.useStyle(_),P.setColor(S),P.style.strokeNoScale=!0;var j=P.ensureState("emphasis");j.style=Bt(M);var L=s.getStore().get(s.getDimensionIndex(P.__dimIdx),f);(L==null||isNaN(L))&&(L=""),ms(P,So(m),{labelFetcher:s.hostModel,labelDataIndex:f,labelDimIndex:P.__dimIdx,defaultText:L,inheritColor:S,defaultOpacity:_.opacity})}),na(h,D.get("focus"),D.get("blurScope"),D.get("disabled"))}),this._data=s},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(ti),Emt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new D2(dt(this.getData,this),dt(this.getRawData,this))},e.prototype.getInitialData=function(t,r){return qT(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(t),c=l===""?this.name:l,u=ITe(this,t);return To("section",{header:c,sortBlocks:!0,blocks:Ue(s,function(d){var h=a.get(a.mapDimension(d.dim),t);return To("nameValue",{markerType:"subItem",markerColor:u,name:d.name,value:h,sortParam:h})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var r=this.getData(),i=this.coordinateSystem,a=r.getValues(Ue(i.dimensions,function(c){return r.mapDimension(c)}),t),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=i.getIndicatorAxes();return i.coordToPoint(l[o].dataToCoord(a[o]),o)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(bi),cC=AAe.value;function WP(n,e){return Rt({show:e},n)}var Amt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),r=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),c=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),d=this.get("axisNameGap"),h=this.get("triggerEvent"),f=Ue(this.get("indicator")||[],function(m){m.max!=null&&m.max>0&&!m.min?m.min=0:m.min!=null&&m.min<0&&!m.max&&(m.max=0);var v=l;m.color!=null&&(v=Rt({color:m.color},l));var y=an(Bt(m),{boundaryGap:t,splitNumber:r,scale:i,axisLine:a,axisTick:o,axisLabel:s,name:m.text,showName:c,nameLocation:"end",nameGap:d,nameTextStyle:v,triggerEvent:h},!1);if(st(u)){var w=y.name;y.name=u.replace("{value}",w??"")}else kt(u)&&(y.name=u(y.name,y));var _=new Ir(y,null,this.ecModel);return Ha(_,x2.prototype),_.mainType="radar",_.componentIndex=this.componentIndex,_},this);this._indicatorModels=f},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:an({lineStyle:{color:"#bbb"}},cC.axisLine),axisLabel:WP(cC.axisLabel,!1),axisTick:WP(cC.axisTick,!1),splitLine:WP(cC.splitLine,!0),splitArea:WP(cC.splitArea,!0),indicator:[]},e}(Un),Cmt=["axisLine","axisTickLabel","axisName"],Dmt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes(),a=Ue(i,function(o){var s=o.model.get("showName")?o.name:"",l=new Sl(o.model,{axisName:s,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});Z(a,function(o){Z(Cmt,o.add,o),this.group.add(o.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes();if(!i.length)return;var a=t.get("shape"),o=t.getModel("splitLine"),s=t.getModel("splitArea"),l=o.getModel("lineStyle"),c=s.getModel("areaStyle"),u=o.get("show"),d=s.get("show"),h=l.get("color"),f=c.get("color"),m=$e(h)?h:[h],v=$e(f)?f:[f],y=[],w=[];function _(q,W,X){var te=X%W.length;return q[te]=q[te]||[],te}if(a==="circle")for(var S=i[0].getTicksCoords(),A=r.cx,C=r.cy,D=0;D<S.length;D++){if(u){var M=_(y,m,D);y[M].push(new Xg({shape:{cx:A,cy:C,r:S[D].coord}}))}if(d&&D<S.length-1){var M=_(w,v,D);w[M].push(new p2({shape:{cx:A,cy:C,r0:S[D].coord,r:S[D+1].coord}}))}}else for(var P,O=Ue(i,function(q,W){var X=q.getTicksCoords();return P=P==null?X.length-1:Math.min(X.length-1,P),Ue(X,function(te){return r.coordToPoint(te.coord,W)})}),j=[],D=0;D<=P;D++){for(var L=[],B=0;B<i.length;B++)L.push(O[B][D]);if(L[0]&&L.push(L[0].slice()),u){var M=_(y,m,D);y[M].push(new Dl({shape:{points:L}}))}if(d&&j){var M=_(w,v,D-1);w[M].push(new Cl({shape:{points:L.concat(j)}}))}j=L.slice().reverse()}var $=l.getLineStyle(),Y=c.getAreaStyle();Z(w,function(q,W){this.group.add(Bu(q,{style:Rt({stroke:"none",fill:v[W%v.length]},Y),silent:!0}))},this),Z(y,function(q,W){this.group.add(Bu(q,{style:Rt({fill:"none",stroke:m[W%m.length]},$),silent:!0}))},this)},e.type="radar",e}(Yi),kmt=function(n){Te(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.type="value",a.angle=0,a.name="",a}return e}(fh),Imt=function(){function n(e,t,r){this.dimensions=[],this._model=e,this._indicatorAxes=Ue(e.getIndicatorModels(),function(i,a){var o="indicator_"+a,s=new kmt(o,new Lg);return s.name=i.get("name"),s.model=i,i.axis=s,this.dimensions.push(o),s},this),this.resize(e,r)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(e,t){var r=this._indicatorAxes[t];return this.coordToPoint(r.dataToCoord(e),t)},n.prototype.coordToPoint=function(e,t){var r=this._indicatorAxes[t],i=r.angle,a=this.cx+e*Math.cos(i),o=this.cy-e*Math.sin(i);return[a,o]},n.prototype.pointToData=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=Math.sqrt(t*t+r*r);t/=i,r/=i;for(var a=Math.atan2(-r,t),o=1/0,s,l=-1,c=0;c<this._indicatorAxes.length;c++){var u=this._indicatorAxes[c],d=Math.abs(a-u.angle);d<o&&(s=u,l=c,o=d)}return[l,+(s&&s.coordToData(i))]},n.prototype.resize=function(e,t){var r=e.get("center"),i=t.getWidth(),a=t.getHeight(),o=Math.min(i,a)/2;this.cx=Je(r[0],i),this.cy=Je(r[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(st(s)||ur(s))&&(s=[0,s]),this.r0=Je(s[0],o),this.r=Je(s[1],o),Z(this._indicatorAxes,function(l,c){l.setExtent(this.r0,this.r);var u=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),l.angle=u},this)},n.prototype.update=function(e,t){var r=this._indicatorAxes,i=this._model;Z(r,function(s){s.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||e.getComponent("radar",s.get("radarIndex"))!==i)){var c=s.getData();Z(r,function(u){u.scale.unionExtentFromData(c,c.mapDimension(u.dim))})}},this);var a=i.get("splitNumber"),o=new Lg;o.setExtent(0,a),o.setInterval(1),Z(r,function(s,l){CAe(s.scale,s.model,o)})},n.prototype.convertToPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.create=function(e,t){var r=[];return e.eachComponent("radar",function(i){var a=new n(i,e,t);r.push(a),i.coordinateSystem=a}),e.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=r[i.get("radarIndex")||0])}),r},n.dimensions=[],n}();function Mmt(n){n.registerCoordinateSystem("radar",Imt),n.registerComponentModel(Amt),n.registerComponentView(Dmt),n.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(r){t.setItemVisual(r,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function Pmt(n){Dn(Mmt),n.registerChartView(Tmt),n.registerSeriesModel(Emt),n.registerLayout(xmt),n.registerProcessor(C2("radar")),n.registerPreprocessor(Smt)}var Oue="\0_ec_interaction_mutex";function Omt(n,e,t){var r=IK(n);r[e]=t}function Rmt(n,e,t){var r=IK(n),i=r[e];i===t&&(r[e]=null)}function Rue(n,e){return!!IK(n)[e]}function IK(n){return n[Oue]||(n[Oue]={})}qf({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Ca);var k2=function(n){Te(e,n);function e(t){var r=n.call(this)||this;r._zr=t;var i=dt(r._mousedownHandler,r),a=dt(r._mousemoveHandler,r),o=dt(r._mouseupHandler,r),s=dt(r._mousewheelHandler,r),l=dt(r._pinchHandler,r);return r.enable=function(c,u){this.disable(),this._opt=Rt(Bt(u)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),c==null&&(c=!0),(c===!0||c==="move"||c==="pan")&&(t.on("mousedown",i),t.on("mousemove",a),t.on("mouseup",o)),(c===!0||c==="scale"||c==="zoom")&&(t.on("mousewheel",s),t.on("pinch",l))},r.disable=function(){t.off("mousedown",i),t.off("mousemove",a),t.off("mouseup",o),t.off("mousewheel",s),t.off("pinch",l)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!ose(t)){for(var r=t.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=t.offsetX,a=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!tR("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||Rue(this._zr,"globalPan"))){var r=t.offsetX,i=t.offsetY,a=this._x,o=this._y,s=r-a,l=i-o;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&Mg(t.event),RAe(this,"pan","moveOnMouseMove",t,{dx:s,dy:l,oldX:a,oldY:o,newX:r,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){ose(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var r=tR("zoomOnMouseWheel",t,this._opt),i=tR("moveOnMouseWheel",t,this._opt),a=t.wheelDelta,o=Math.abs(a),s=t.offsetX,l=t.offsetY;if(!(a===0||!r&&!i)){if(r){var c=o>3?1.4:o>1?1.2:1.1,u=a>0?c:1/c;H6(this,"zoom","zoomOnMouseWheel",t,{scale:u,originX:s,originY:l,isAvailableBehavior:null})}if(i){var d=Math.abs(a),h=(a>0?1:-1)*(d>3?.4:d>1?.15:.05);H6(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!Rue(this._zr,"globalPan")){var r=t.pinchScale>1?1.1:1/1.1;H6(this,"zoom",null,t,{scale:r,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(ed);function H6(n,e,t,r,i){n.pointerChecker&&n.pointerChecker(r,i.originX,i.originY)&&(Mg(r.event),RAe(n,e,t,r,i))}function RAe(n,e,t,r,i){i.isAvailableBehavior=dt(tR,null,t,r),n.trigger(e,i)}function tR(n,e,t){var r=t[n];return!n||r&&(!st(r)||e.event[r+"Key"])}function MK(n,e,t){var r=n.target;r.x+=e,r.y+=t,r.dirty()}function PK(n,e,t,r){var i=n.target,a=n.zoomLimit,o=n.zoom=n.zoom||1;if(o*=e,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var c=o/n.zoom;n.zoom=o,i.x-=(t-i.x)*(c-1),i.y-=(r-i.y)*(c-1),i.scaleX*=c,i.scaleY*=c,i.dirty()}var Nmt={axisPointer:1,tooltip:1,brush:1};function W5(n,e,t){var r=e.getComponentByElement(n.topTarget),i=r&&r.coordinateSystem;return r&&r!==t&&!Nmt.hasOwnProperty(r.mainType)&&i&&i.model!==t}function NAe(n){if(st(n)){var e=new DOMParser;n=e.parseFromString(n,"text/xml")}var t=n;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var q6,cL={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Nue=Vn(cL),uL={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Lue=Vn(uL),Lmt=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(e,t){t=t||{};var r=NAe(e);this._defsUsePending=[];var i=new zt;this._root=i;var a=[],o=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||t.width),l=parseFloat(r.getAttribute("height")||t.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),Ic(r,i,null,!0,!1);for(var c=r.firstChild;c;)this._parseNode(c,i,a,null,!1,!1),c=c.nextSibling;$mt(this._defs,this._defsUsePending),this._defsUsePending=[];var u,d;if(o){var h=Y5(o);h.length>=4&&(u={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(u&&s!=null&&l!=null&&(d=jAe(u,{x:0,y:0,width:s,height:l}),!t.ignoreViewBox)){var f=i;i=new zt,i.add(f),f.scaleX=f.scaleY=d.scale,f.x=d.x,f.y=d.y}return!t.ignoreRootClip&&s!=null&&l!=null&&i.setClipPath(new er({shape:{x:0,y:0,width:s,height:l}})),{root:i,width:s,height:l,viewBoxRect:u,viewBoxTransform:d,named:a}},n.prototype._parseNode=function(e,t,r,i,a,o){var s=e.nodeName.toLowerCase(),l,c=i;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=t;else{if(!a){var u=q6[s];if(u&&ft(q6,s)){l=u.call(this,e,t);var d=e.getAttribute("name");if(d){var h={name:d,namedFrom:null,svgNodeTagLower:s,el:l};r.push(h),s==="g"&&(c=h)}else i&&r.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:l});t.add(l)}}var f=jue[s];if(f&&ft(jue,s)){var m=f.call(this,e),v=e.getAttribute("id");v&&(this._defs[v]=m)}}if(l&&l.isGroup)for(var y=e.firstChild;y;)y.nodeType===1?this._parseNode(y,l,r,c,a,o):y.nodeType===3&&o&&this._parseText(y,l),y=y.nextSibling},n.prototype._parseText=function(e,t){var r=new Q1({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Du(t,r),Ic(e,r,this._defsUsePending,!1,!1),jmt(r,t);var i=r.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,r.scaleX*=a/9,r.scaleY*=a/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var s=r.getBoundingRect();return this._textX+=s.width,t.add(r),r},n.internalField=function(){q6={g:function(e,t){var r=new zt;return Du(t,r),Ic(e,r,this._defsUsePending,!1,!1),r},rect:function(e,t){var r=new er;return Du(t,r),Ic(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,t){var r=new Xg;return Du(t,r),Ic(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,t){var r=new bo;return Du(t,r),Ic(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,t){var r=new A5;return Du(t,r),Ic(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,t){var r=e.getAttribute("points"),i;r&&(i=Bue(r));var a=new Cl({shape:{points:i||[]},silent:!0});return Du(t,a),Ic(e,a,this._defsUsePending,!1,!1),a},polyline:function(e,t){var r=e.getAttribute("points"),i;r&&(i=Bue(r));var a=new Dl({shape:{points:i||[]},silent:!0});return Du(t,a),Ic(e,a,this._defsUsePending,!1,!1),a},image:function(e,t){var r=new Yo;return Du(t,r),Ic(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,t){var r=e.getAttribute("x")||"0",i=e.getAttribute("y")||"0",a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(o);var s=new zt;return Du(t,s),Ic(e,s,this._defsUsePending,!1,!0),s},tspan:function(e,t){var r=e.getAttribute("x"),i=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),i!=null&&(this._textY=parseFloat(i));var a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0",s=new zt;return Du(t,s),Ic(e,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(e,t){var r=e.getAttribute("d")||"",i=T1e(r);return Du(t,i),Ic(e,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),n}(),jue={lineargradient:function(n){var e=parseInt(n.getAttribute("x1")||"0",10),t=parseInt(n.getAttribute("y1")||"0",10),r=parseInt(n.getAttribute("x2")||"10",10),i=parseInt(n.getAttribute("y2")||"0",10),a=new m2(e,t,r,i);return Fue(n,a),$ue(n,a),a},radialgradient:function(n){var e=parseInt(n.getAttribute("cx")||"0",10),t=parseInt(n.getAttribute("cy")||"0",10),r=parseInt(n.getAttribute("r")||"0",10),i=new D1e(e,t,r);return Fue(n,i),$ue(n,i),i}};function Fue(n,e){var t=n.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function $ue(n,e){for(var t=n.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var r=t.getAttribute("offset"),i=void 0;r&&r.indexOf("%")>0?i=parseInt(r,10)/100:r?i=parseFloat(r):i=0;var a={};LAe(t,a,a);var o=a.stopColor||t.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:i,color:o})}t=t.nextSibling}}function Du(n,e){n&&n.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Rt(e.__inheritedStyle,n.__inheritedStyle))}function Bue(n){for(var e=Y5(n),t=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),a=parseFloat(e[r+1]);t.push([i,a])}return t}function Ic(n,e,t,r,i){var a=e,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};n.nodeType===1&&(Vmt(n,e),LAe(n,o,s),r||zmt(n,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=Uue(a,"fill",o.fill,t)),o.stroke!=null&&(a.style.stroke=Uue(a,"stroke",o.stroke,t)),Z(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),Z(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),i&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=Ue(Y5(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function jmt(n,e){var t=e.__selfStyle;if(t){var r=t.textBaseline,i=r;!r||r==="auto"||r==="baseline"?i="alphabetic":r==="before-edge"||r==="text-before-edge"?i="top":r==="after-edge"||r==="text-after-edge"?i="bottom":(r==="central"||r==="mathematical")&&(i="middle"),n.style.textBaseline=i}var a=e.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),n.style.textAlign=s)}}var Fmt=/^url\(\s*#(.*?)\)/;function Uue(n,e,t,r){var i=t&&t.match(Fmt);if(i){var a=th(i[1]);r.push([n,e,a]);return}return t==="none"&&(t=null),t}function $mt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r[0].style[r[1]]=n[r[2]]}}var Bmt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Y5(n){return n.match(Bmt)||[]}var Umt=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,G6=Math.PI/180;function Vmt(n,e){var t=n.getAttribute("transform");if(t){t=t.replace(/,/g," ");var r=[],i=null;t.replace(Umt,function(d,h,f){return r.push(h,f),""});for(var a=r.length-1;a>0;a-=2){var o=r[a],s=r[a-1],l=Y5(o);switch(i=i||Gc(),s){case"translate":Nf(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":CY(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Jw(i,i,-parseFloat(l[0])*G6,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var c=Math.tan(parseFloat(l[0])*G6);yg(i,[1,0,c,1,0,0],i);break;case"skewY":var u=Math.tan(parseFloat(l[0])*G6);yg(i,[1,u,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}e.setLocalTransform(i)}}var Vue=/([^\s:;]+)\s*:\s*([^:;]+)/g;function LAe(n,e,t){var r=n.getAttribute("style");if(r){Vue.lastIndex=0;for(var i;(i=Vue.exec(r))!=null;){var a=i[1],o=ft(cL,a)?cL[a]:null;o&&(e[o]=i[2]);var s=ft(uL,a)?uL[a]:null;s&&(t[s]=i[2])}}}function zmt(n,e,t){for(var r=0;r<Nue.length;r++){var i=Nue[r],a=n.getAttribute(i);a!=null&&(e[cL[i]]=a)}for(var r=0;r<Lue.length;r++){var i=Lue[r],a=n.getAttribute(i);a!=null&&(t[uL[i]]=a)}}function jAe(n,e){var t=e.width/n.width,r=e.height/n.height,i=Math.min(t,r);return{scale:i,x:-(n.x+n.width/2)*i+(e.x+e.width/2),y:-(n.y+n.height/2)*i+(e.y+e.height/2)}}function Hmt(n,e){var t=new Lmt;return t.parse(n,e)}var qmt=_t(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Gmt=function(){function n(e,t){this.type="geoSVG",this._usedGraphicMap=_t(),this._freedGraphics=[],this._mapName=e,this._parsedXML=NAe(t)}return n.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=Ymt(e.named),r=t.regions,i=t.regionsMap;this._regions=r,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(e){var t,r;try{t=e&&Hmt(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=t.root,Tl(r!=null)}catch(y){throw new Error(`Invalid svg format
`+y.message)}var i=new zt;i.add(r),i.isGeoSVGGraphicRoot=!0;var a=t.width,o=t.height,s=t.viewBoxRect,l=this._boundingRect;if(!l){var c=void 0,u=void 0,d=void 0,h=void 0;if(a!=null?(c=0,d=a):s&&(c=s.x,d=s.width),o!=null?(u=0,h=o):s&&(u=s.y,h=s.height),c==null||u==null){var f=r.getBoundingRect();c==null&&(c=f.x,d=f.width),u==null&&(u=f.y,h=f.height)}l=this._boundingRect=new pn(c,u,d,h)}if(s){var m=jAe(s,l);r.scaleX=r.scaleY=m.scale,r.x=m.x,r.y=m.y}i.setClipPath(new er({shape:l.plain()}));var v=[];return Z(t.named,function(y){qmt.get(y.svgNodeTagLower)!=null&&(v.push(y),Wmt(y.el))}),{root:i,boundingRect:l,named:v}},n.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},n.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},n}();function Wmt(n){n.silent=!1,n.isGroup&&n.traverse(function(e){e.silent=!1})}function Ymt(n){var e=[],t=_t();return Z(n,function(r){if(r.namedFrom==null){var i=new Vft(r.name,r.el);e.push(i),t.set(r.name,i)}}),{regions:e,regionsMap:t}}var $8=[126,25],zue="南海诸岛",Ib=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Sb=0;Sb<Ib.length;Sb++)for(var iS=0;iS<Ib[Sb].length;iS++)Ib[Sb][iS][0]/=10.5,Ib[Sb][iS][1]/=-10.5/.75,Ib[Sb][iS][0]+=$8[0],Ib[Sb][iS][1]+=$8[1];function Kmt(n,e){if(n==="china"){for(var t=0;t<e.length;t++)if(e[t].name===zue)return;e.push(new OEe(zue,Ue(Ib,function(r){return{type:"polygon",exterior:r}}),$8))}}var Xmt={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function Zmt(n,e){if(n==="china"){var t=Xmt[e.name];if(t){var r=e.getCenter();r[0]+=t[0]/10.5,r[1]+=-t[1]/(10.5/.75),e.setCenter(r)}}}var Qmt=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function Jmt(n,e){n==="china"&&e.name==="台湾"&&e.geometries.push({type:"polygon",exterior:Qmt[0]})}var evt="name",tvt=function(){function n(e,t,r){this.type="geoJSON",this._parsedMap=_t(),this._mapName=e,this._specialAreas=r,this._geoJSON=rvt(t)}return n.prototype.load=function(e,t){t=t||evt;var r=this._parsedMap.get(t);if(!r){var i=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:i,boundingRect:nvt(i)})}var a=_t(),o=[];return Z(r.regions,function(s){var l=s.name;e&&ft(e,l)&&(s=s.cloneShallow(l=e[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:r.boundingRect||new pn(0,0,0,0),regionsMap:a}},n.prototype._parseToRegions=function(e){var t=this._mapName,r=this._geoJSON,i;try{i=r?Hft(r,e):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return Kmt(t,i),Z(i,function(a){var o=a.name;Zmt(t,a),Jmt(t,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),i},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function nvt(n){for(var e,t=0;t<n.length;t++){var r=n[t].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function rvt(n){return st(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var uC=_t();const jg={registerMap:function(n,e,t){if(e.svg){var r=new Gmt(n,e.svg);uC.set(n,r)}else{var i=e.geoJson||e.geoJSON;i&&!e.features?t=e.specialAreas:i=e;var r=new tvt(n,i,t);uC.set(n,r)}},getGeoResource:function(n){return uC.get(n)},getMapForUser:function(n){var e=uC.get(n);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(n,e,t){var r=uC.get(n);if(r)return r.load(e,t)}};var OK=["rect","circle","line","ellipse","polygon","polyline","path"],ivt=_t(OK),avt=_t(OK.concat(["g"])),ovt=_t(OK.concat(["g"])),FAe=tr();function YP(n){var e=n.getItemStyle(),t=n.get("areaColor");return t!=null&&(e.fill=t),e}function Hue(n){var e=n.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var $Ae=function(){function n(e){var t=new zt;this.uid=jT("ec_map_draw"),this._controller=new k2(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new zt),t.add(this._svgGroup=new zt)}return n.prototype.draw=function(e,t,r,i,a){var o=e.mainType==="geo",s=e.getData&&e.getData();o&&t.eachComponent({mainType:"series",subType:"map"},function(w){!s&&w.getHostGeoModel()===e&&(s=w.getData())});var l=e.coordinateSystem,c=this._regionsGroup,u=this.group,d=l.getTransformInfo(),h=d.raw,f=d.roam,m=!c.childAt(0)||a;m?(u.x=f.x,u.y=f.y,u.scaleX=f.scaleX,u.scaleY=f.scaleY,u.dirty()):fr(u,f,e);var v=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,y={api:r,geo:l,mapOrGeoModel:e,data:s,isVisualEncodedByVisualMap:v,isGeo:o,transformInfoRaw:h};l.resourceType==="geoJSON"?this._buildGeoJSON(y):l.resourceType==="geoSVG"&&this._buildSVG(y),this._updateController(e,t,r),this._updateMapSelectHandler(e,c,r,i)},n.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=_t(),r=_t(),i=this._regionsGroup,a=e.transformInfoRaw,o=e.mapOrGeoModel,s=e.data,l=e.geo.projection,c=l&&l.stream;function u(f,m){return m&&(f=m(f)),f&&[f[0]*a.scaleX+a.x,f[1]*a.scaleY+a.y]}function d(f){for(var m=[],v=!c&&l&&l.project,y=0;y<f.length;++y){var w=u(f[y],v);w&&m.push(w)}return m}function h(f){return{shape:{points:d(f)}}}i.removeAll(),Z(e.geo.regions,function(f){var m=f.name,v=t.get(m),y=r.get(m)||{},w=y.dataIdx,_=y.regionModel;if(!v){v=t.set(m,new zt),i.add(v),w=s?s.indexOfName(m):null,_=e.isGeo?o.getRegionModel(m):s?s.getItemModel(w):null;var S=_.get("silent",!0);S!=null&&(v.silent=S),r.set(m,{dataIdx:w,regionModel:_})}var A=[],C=[];Z(f.geometries,function(P){if(P.type==="polygon"){var O=[P.exterior].concat(P.interiors||[]);c&&(O=Xue(O,c)),Z(O,function(L){A.push(new Cl(h(L)))})}else{var j=P.points;c&&(j=Xue(j,c,!0)),Z(j,function(L){C.push(new Dl(h(L)))})}});var D=u(f.getCenter(),l&&l.project);function M(P,O){if(P.length){var j=new zY({culling:!0,segmentIgnoreThreshold:1,shape:{paths:P}});v.add(j),que(e,j,w,_),Gue(e,j,m,_,o,w,D),O&&(Hue(j),Z(j.states,Hue))}}M(A),M(C,!0)}),t.each(function(f,m){var v=r.get(m),y=v.dataIdx,w=v.regionModel;Wue(e,f,m,w,o,y),Yue(e,f,m,w,o),Kue(e,f,m,w,o)},this)},n.prototype._buildSVG=function(e){var t=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var i=this._svgDispatcherMap=_t(),a=!1;Z(this._svgGraphicRecord.named,function(o){var s=o.name,l=e.mapOrGeoModel,c=e.data,u=o.svgNodeTagLower,d=o.el,h=c?c.indexOfName(s):null,f=l.getRegionModel(s);ivt.get(u)!=null&&d instanceof Qu&&que(e,d,h,f),d instanceof Qu&&(d.culling=!0);var m=f.get("silent",!0);if(m!=null&&(d.silent=m),d.z2EmphasisLift=0,!o.namedFrom&&(ovt.get(u)!=null&&Gue(e,d,s,f,l,h,null),Wue(e,d,s,f,l,h),Yue(e,d,s,f,l),avt.get(u)!=null)){var v=Kue(e,d,s,f,l);v==="self"&&(a=!0);var y=i.get(s)||i.set(s,[]);y.push(d)}},this),this._enableBlurEntireSVG(a,e)},n.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var r=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=r.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Bw(a);var o=a.ensureState("blur").style||{};o.opacity==null&&i!=null&&(o.opacity=i),a.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var r=t.coordinateSystem;if(r.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(e);return a?[a]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},n.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},n.prototype._useSVG=function(e){var t=jg.getGeoResource(e);if(t&&t.type==="geoSVG"){var r=t.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},n.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=jg.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(e,t,r){var i=e.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=i.getZoom(),a.enable(e.get("roam")||!1);var s=e.mainType;function l(){var c={type:"geoRoam",componentType:s};return c[s+"Id"]=e.id,c}a.off("pan").on("pan",function(c){this._mouseDownFlag=!1,MK(o,c.dx,c.dy),r.dispatchAction(Pe(l(),{dx:c.dx,dy:c.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(c){this._mouseDownFlag=!1,PK(o,c.scale,c.originX,c.originY),r.dispatchAction(Pe(l(),{totalZoom:o.zoom,zoom:c.scale,originX:c.originX,originY:c.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(c,u,d){return i.containPoint([u,d])&&!W5(c,r,e)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=FAe(t).ignore)})},n.prototype._updateMapSelectHandler=function(e,t,r,i){var a=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){a._mouseDownFlag=!0}),t.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},n}();function que(n,e,t,r){var i=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),o=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=YP(i),c=YP(a),u=YP(s),d=YP(o),h=n.data;if(h){var f=h.getItemVisual(t,"style"),m=h.getItemVisual(t,"decal");n.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),m&&(l.decal=tT(m,n.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=c,e.ensureState("select").style=u,e.ensureState("blur").style=d,Bw(e)}function Gue(n,e,t,r,i,a,o){var s=n.data,l=n.isGeo,c=s&&isNaN(s.get(s.mapDimension("value"),a)),u=s&&s.getItemLayout(a);if(l||c||u&&u.showLabel){var d=l?t:a,h=void 0;(!s||a>=0)&&(h=i);var f=o?{normal:{align:"center",verticalAlign:"middle"}}:null;ms(e,So(r),{labelFetcher:h,labelDataIndex:d,defaultText:t},f);var m=e.getTextContent();if(m&&(FAe(m).ignore=m.ignore,e.textConfig&&o)){var v=e.getBoundingRect().clone();e.textConfig.layoutRect=v,e.textConfig.position=[(o[0]-v.x)/v.width*100+"%",(o[1]-v.y)/v.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function Wue(n,e,t,r,i,a){n.data?n.data.setItemGraphicEl(a,e):Wt(e).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:t,region:r&&r.option||{}}}function Yue(n,e,t,r,i){n.data||e_({el:e,componentModel:i,itemName:t,itemTooltipOption:r.get("tooltip")})}function Kue(n,e,t,r,i){e.highDownSilentOnTouch=!!i.get("selectedMode");var a=r.getModel("emphasis"),o=a.get("focus");return na(e,o,a.get("blurScope"),a.get("disabled")),n.isGeo&&ict(e,i,t),o}function Xue(n,e,t){var r=[],i;function a(){i=[]}function o(){i.length&&(r.push(i),i=[])}var s=e({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,c){isFinite(l)&&isFinite(c)&&i.push([l,c])},sphere:function(){}});return!t&&s.polygonStart(),Z(n,function(l){s.lineStart();for(var c=0;c<l.length;c++)s.point(l[c][0],l[c][1]);s.lineEnd()}),!t&&s.polygonEnd(),r}var svt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===t.id){var s=this._mapDraw;s&&o.add(s.group)}else if(t.needsDrawMap){var s=this._mapDraw||new $Ae(i);o.add(s.group),s.draw(t,r,i,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(t,r,i)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,r,i){var a=t.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var c=a.getItemLayout(l);if(!(!c||!c.point)){var u=c.point,d=c.offset,h=new Xg({style:{fill:t.getData().getVisual("style").fill},shape:{cx:u[0]+d*9,cy:u[1],r:3},silent:!0,z2:8+(d?0:RT+1)});if(!d){var f=t.mainSeries.getData(),m=a.getName(l),v=f.indexOfName(m),y=a.getItemModel(l),w=y.getModel("label"),_=f.getItemGraphicEl(v);ms(h,So(y),{labelFetcher:{getFormattedLabel:function(S,A){return t.getFormattedLabel(v,A)}},defaultText:m}),h.disableLabelAnimation=!0,w.get("position")||h.setTextConfig({position:"bottom"}),_.onHoverStateChange=function(S){zN(h,S)}}o.add(h)}}})},e.type="map",e}(ti),lvt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(r){if(r!=null){var i=this.getData().getName(r),a=this.coordinateSystem,o=a.getRegion(i);return o&&a.dataToPoint(o.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var r=qT(this,{coordDimensions:["value"],encodeDefaulter:en(JY,this)}),i=_t(),a=[],o=0,s=r.count();o<s;o++){var l=r.getName(o);i.set(l,o)}var c=jg.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return Z(c.regions,function(u){var d=u.name,h=i.get(d),f=u.properties&&u.properties.echartsStyle,m;h==null?(m={name:d},a.push(m)):m=r.getRawDataItem(h),f&&an(m,f)}),r.appendData(a),r},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return t!=null?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var r=this.getData();return r.get(r.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var r=this.getData();return r.getItemModel(r.indexOfName(t))},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData(),o=this.getRawValue(t),s=a.getName(t),l=this.seriesGroup,c=[],u=0;u<l.length;u++){var d=l[u].originalData.indexOfName(s),h=a.mapDimension("value");isNaN(l[u].originalData.get(h,d))||c.push(l[u].name)}return To("section",{header:c.join(", "),noHeader:!c.length,blocks:[To("nameValue",{name:s,value:o})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var r=t.icon||"roundRect",i=za(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return i.setStyle(t.itemStyle),i.style.stroke="none",r.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(bi);function cvt(n,e){var t={};return Z(n,function(r){r.each(r.mapDimension("value"),function(i,a){var o="ec-"+r.getName(a);t[o]=t[o]||[],isNaN(i)||t[o].push(i)})}),n[0].map(n[0].mapDimension("value"),function(r,i){for(var a="ec-"+n[0].getName(i),o=0,s=1/0,l=-1/0,c=t[a].length,u=0;u<c;u++)s=Math.min(s,t[a][u]),l=Math.max(l,t[a][u]),o+=t[a][u];var d;return e==="min"?d=s:e==="max"?d=l:e==="average"?d=o/c:d=o,c===0?NaN:d})}function uvt(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getHostGeoModel(),i=r?"o"+r.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)}),Z(e,function(t,r){for(var i=cvt(Ue(t,function(o){return o.getData()}),t[0].get("mapValueCalculation")),a=0;a<t.length;a++)t[a].originalData=t[a].getData();for(var a=0;a<t.length;a++)t[a].seriesGroup=t,t[a].needsDrawMap=a===0&&!t[a].getHostGeoModel(),t[a].setData(i.cloneShallow()),t[a].mainSeries=t[0]})}function dvt(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getMapType();if(!(t.getHostGeoModel()||e[r])){var i={};Z(t.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&n.getComponent("legend")&&l.each(l.mapDimension("value"),function(c,u){var d=l.getName(u),h=s.getRegion(d);if(!(!h||isNaN(c))){var f=i[d]||0,m=s.dataToPoint(h.getCenter());i[d]=f+1,l.setItemLayout(u,{point:m,offset:f})}})});var a=t.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!i[s],a.setItemLayout(o,l)}),e[r]=!0}})}var Zue=hs,I2=function(n){Te(e,n);function e(t){var r=n.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new sg,r._rawTransformable=new sg,r.name=t,r}return e.prototype.setBoundingRect=function(t,r,i,a){return this._rect=new pn(t,r,i,a),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,r,i,a){this._transformTo(t,r,i,a),this._viewRect=new pn(t,r,i,a)},e.prototype._transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new pn(t,r,i,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},e.prototype.setCenter=function(t,r){t&&(this._center=[Je(t[0],r.getWidth()),Je(t[1],r.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var r=this.zoomLimit;r&&(r.max!=null&&(t=Math.min(r.max,t)),r.min!=null&&(t=Math.max(r.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),r=t.x+t.width/2,i=t.y+t.height/2;return[r,i]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=hs([],a,t),i=hs([],i,t),r.originX=a[0],r.originY=a[1],r.x=i[0]-a[0],r.y=i[1]-a[1],r.scaleX=r.scaleY=o,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),AY(this.transform||(this.transform=[]),r.transform||Gc()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],PT(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,i=new sg;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,r,i){var a=r?this._rawTransform:this.transform;return i=i||[],a?Zue(i,t,a):fl(i,t)},e.prototype.pointToData=function(t){var r=this.invTransform;return r?Zue([],t,r):[t[0],t[1]]},e.prototype.convertToPixel=function(t,r,i){var a=Que(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=Que(r);return a===this?a.pointToData(i):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(sg);function Que(n){var e=n.seriesModel;return e?e.coordinateSystem:null}var hvt={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},BAe=["lng","lat"],B8=function(n){Te(e,n);function e(t,r,i){var a=n.call(this,t)||this;a.dimensions=BAe,a.type="geo",a._nameCoordMap=_t(),a.map=r;var o=i.projection,s=jg.load(r,i.nameMap,i.nameProperty),l=jg.getGeoResource(r);a.resourceType=l?l.type:null;var c=a.regions=s.regions,u=hvt[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var d;if(o)for(var h=0;h<c.length;h++){var f=c[h].getBoundingRect(o);d=d||f.clone(),d.union(f)}else d=s.boundingRect;return a.setBoundingRect(d.x,d.y,d.width,d.height),a.aspectScale=o?1:Zt(i.aspectScale,u.aspectScale),a._invertLongitute=o?!1:u.invertLongitute,a}return e.prototype._transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new pn(t,r,i,a));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,s&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var r=this.regions,i=0;i<r.length;i++){var a=r[i];if(a.type==="geoJSON"&&a.contain(t))return r[i]}},e.prototype.addGeoCoord=function(t,r){this._nameCoordMap.set(t,r)},e.prototype.getGeoCoord=function(t){var r=this._regionsMap.get(t);return this._nameCoordMap.get(t)||r&&r.getCenter()},e.prototype.dataToPoint=function(t,r,i){if(st(t)&&(t=this.getGeoCoord(t)),t){var a=this.projection;return a&&(t=a.project(t)),t&&this.projectedToPoint(t,r,i)}},e.prototype.pointToData=function(t){var r=this.projection;return r&&(t=r.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(t){return n.prototype.pointToData.call(this,t)},e.prototype.projectedToPoint=function(t,r,i){return n.prototype.dataToPoint.call(this,t,r,i)},e.prototype.convertToPixel=function(t,r,i){var a=Jue(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=Jue(r);return a===this?a.pointToData(i):null},e}(I2);Ha(B8,I2);function Jue(n){var e=n.geoModel,t=n.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",Va).models[0]||{}).coordinateSystem:null}function ede(n,e){var t=n.get("boundingCoords");if(t!=null){var r=t[0],i=t[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var o=r[0],s=r[1],l=i[0],c=i[1];r=[1/0,1/0],i=[-1/0,-1/0];var u=function(D,M,P,O){for(var j=P-D,L=O-M,B=0;B<=100;B++){var $=B/100,Y=a.project([D+j*$,M+L*$]);Fv(r,r,Y),$v(i,i,Y)}};u(o,s,l,s),u(l,s,l,c),u(l,c,o,c),u(o,c,l,s)}this.setBoundingRect(r[0],r[1],i[0]-r[0],i[1]-r[1])}}var d=this.getBoundingRect(),h=n.get("layoutCenter"),f=n.get("layoutSize"),m=e.getWidth(),v=e.getHeight(),y=d.width/d.height*this.aspectScale,w=!1,_,S;h&&f&&(_=[Je(h[0],m),Je(h[1],v)],S=Je(f,Math.min(m,v)),!isNaN(_[0])&&!isNaN(_[1])&&!isNaN(S)&&(w=!0));var A;if(w)A={},y>1?(A.width=S,A.height=S/y):(A.height=S,A.width=S*y),A.y=_[1]-A.height/2,A.x=_[0]-A.width/2;else{var C=n.getBoxLayoutParams();C.aspect=y,A=oo(C,{width:m,height:v})}this.setViewRect(A.x,A.y,A.width,A.height),this.setCenter(n.get("center"),e),this.setZoom(n.get("zoom"))}function fvt(n,e){Z(e.get("geoCoord"),function(t,r){n.addGeoCoord(r,t)})}var pvt=function(){function n(){this.dimensions=BAe}return n.prototype.create=function(e,t){var r=[];function i(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}e.eachComponent("geo",function(o,s){var l=o.get("map"),c=new B8(l+s,l,Pe({nameMap:o.get("nameMap")},i(o)));c.zoomLimit=o.get("scaleLimit"),r.push(c),o.coordinateSystem=c,c.model=o,c.resize=ede,c.resize(o,t)}),e.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=r[l]}});var a={};return e.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),Z(a,function(o,s){var l=Ue(o,function(u){return u.get("nameMap")}),c=new B8(s,s,Pe({nameMap:xY(l)},i(o[0])));c.zoomLimit=Ho.apply(null,Ue(o,function(u){return u.get("scaleLimit")})),r.push(c),c.resize=ede,c.resize(o[0],t),Z(o,function(u){u.coordinateSystem=c,fvt(c,u)})}),r},n.prototype.getFilledRegions=function(e,t,r,i){for(var a=(e||[]).slice(),o=_t(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=jg.load(t,r,i);return Z(l.regions,function(c){var u=c.name,d=o.get(u),h=c.properties&&c.properties.echartsStyle;d||(d={name:u},a.push(d)),h&&an(d,h)}),a},n}(),UAe=new pvt,gvt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){var a=jg.getGeoResource(t.map);if(a&&a.type==="geoJSON"){var o=t.itemStyle=t.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(t,i),jw(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,r=this.option;r.regions=UAe.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var i={};this._optionModelMap=Rf(r.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new Ir(o,t,t.ecModel)),o.selected&&(i[s]=!0)),a},_t()),r.selectedMap||(r.selectedMap=i)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Ir(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,r){var i=this.getRegionModel(t),a=r==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:t};if(kt(a))return o.status=r,a(o);if(st(a))return a.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var r=this.option,i=r.selectedMode;if(i){i!=="multiple"&&(r.selectedMap=null);var a=r.selectedMap||(r.selectedMap={});a[t]=!0}},e.prototype.unSelect=function(t){var r=this.option.selectedMap;r&&(r[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var r=this.option.selectedMap;return!!(r&&r[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(Un);function tde(n,e){return n.pointToProjected?n.pointToProjected(e):n.pointToData(e)}function RK(n,e,t,r){var i=n.getZoom(),a=n.getCenter(),o=e.zoom,s=n.projectedToPoint?n.projectedToPoint(a):n.dataToPoint(a);if(e.dx!=null&&e.dy!=null&&(s[0]-=e.dx,s[1]-=e.dy,n.setCenter(tde(n,s),r)),o!=null){if(t){var l=t.min||0,c=t.max||1/0;o=Math.max(Math.min(i*o,c),l)/i}n.scaleX*=o,n.scaleY*=o;var u=(e.originX-n.x)*(o-1),d=(e.originY-n.y)*(o-1);n.x-=u,n.y-=d,n.updateTransform(),n.setCenter(tde(n,s),r),n.setZoom(o*i)}return{center:n.getCenter(),zoom:n.getZoom()}}var mvt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,r){this._api=r},e.prototype.render=function(t,r,i,a){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new $Ae(i));var o=this._mapDraw;o.draw(t,r,i,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=t.get("silent"),this.group.add(o.group),this.updateSelectStatus(t,r,i)},e.prototype._handleRegionClick=function(t){var r;nw(t.target,function(i){return(r=Wt(i).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(t,r,i){var a=this;this._mapDraw.group.traverse(function(o){var s=Wt(o).eventData;if(s)return a._model.isSelected(s.name)?i.enterSelect(o):i.leaveSelect(o),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(Yi);function vvt(n,e,t){jg.registerMap(n,e,t)}function VAe(n){n.registerCoordinateSystem("geo",UAe),n.registerComponentModel(gvt),n.registerComponentView(mvt),n.registerImpl("registerMap",vvt),n.registerImpl("getMap",function(t){return jg.getMapForUser(t)});function e(t,r){r.update="geo:updateSelectStatus",n.registerAction(r,function(i,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[t](i.name);var c=l.coordinateSystem;Z(c.regions,function(d){o[d.name]=l.isSelected(d.name)||!1});var u=[];Z(o,function(d,h){o[h]&&u.push(h)}),s.push({geoIndex:l.componentIndex,name:u})}),{selected:o,allSelected:s,name:i.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,r,i){var a=t.componentType||"series";r.eachComponent({mainType:a,query:t},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=RK(s,t,o.get("scaleLimit"),i);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&Z(o.seriesGroup,function(c){c.setCenter(l.center),c.setZoom(l.zoom)})}})})}function yvt(n){Dn(VAe),n.registerChartView(svt),n.registerSeriesModel(lvt),n.registerLayout(dvt),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,uvt),VTe("map",n.registerAction)}function bvt(n){var e=n;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],r,i;r=t.pop();)if(i=r.children,r.isExpand&&i.length)for(var a=i.length,o=a-1;o>=0;o--){var s=i[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},t.push(s)}}function wvt(n,e){var t=n.isExpand?n.children:[],r=n.parentNode.children,i=n.hierNode.i?r[n.hierNode.i-1]:null;if(t.length){Svt(n);var a=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;i?(n.hierNode.prelim=i.hierNode.prelim+e(n,i),n.hierNode.modifier=n.hierNode.prelim-a):n.hierNode.prelim=a}else i&&(n.hierNode.prelim=i.hierNode.prelim+e(n,i));n.parentNode.hierNode.defaultAncestor=Tvt(n,i,n.parentNode.hierNode.defaultAncestor||r[0],e)}function _vt(n){var e=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:e},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function nde(n){return arguments.length?n:Cvt}function XC(n,e){return n-=Math.PI/2,{x:e*Math.cos(n),y:e*Math.sin(n)}}function xvt(n,e){return oo(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Svt(n){for(var e=n.children,t=e.length,r=0,i=0;--t>=0;){var a=e[t];a.hierNode.prelim+=r,a.hierNode.modifier+=r,i+=a.hierNode.change,r+=a.hierNode.shift+i}}function Tvt(n,e,t,r){if(e){for(var i=n,a=n,o=a.parentNode.children[0],s=e,l=i.hierNode.modifier,c=a.hierNode.modifier,u=o.hierNode.modifier,d=s.hierNode.modifier;s=W6(s),a=Y6(a),s&&a;){i=W6(i),o=Y6(o),i.hierNode.ancestor=n;var h=s.hierNode.prelim+d-a.hierNode.prelim-c+r(s,a);h>0&&(Avt(Evt(s,n,t),n,h),c+=h,l+=h),d+=s.hierNode.modifier,c+=a.hierNode.modifier,l+=i.hierNode.modifier,u+=o.hierNode.modifier}s&&!W6(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=d-l),a&&!Y6(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=c-u,t=n)}return t}function W6(n){var e=n.children;return e.length&&n.isExpand?e[e.length-1]:n.hierNode.thread}function Y6(n){var e=n.children;return e.length&&n.isExpand?e[0]:n.hierNode.thread}function Evt(n,e,t){return n.hierNode.ancestor.parentNode===e.parentNode?n.hierNode.ancestor:t}function Avt(n,e,t){var r=t/(e.hierNode.i-n.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,n.hierNode.change+=r}function Cvt(n,e){return n.parentNode===e.parentNode?1:2}var Dvt=function(){function n(){this.parentPoint=[],this.childPoints=[]}return n}(),kvt=function(n){Te(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Dvt},e.prototype.buildPath=function(t,r){var i=r.childPoints,a=i.length,o=r.parentPoint,s=i[0],l=i[a-1];if(a===1){t.moveTo(o[0],o[1]),t.lineTo(s[0],s[1]);return}var c=r.orient,u=c==="TB"||c==="BT"?0:1,d=1-u,h=Je(r.forkPosition,1),f=[];f[u]=o[u],f[d]=o[d]+(l[d]-o[d])*h,t.moveTo(o[0],o[1]),t.lineTo(f[0],f[1]),t.moveTo(s[0],s[1]),f[u]=s[u],t.lineTo(f[0],f[1]),f[u]=l[u],t.lineTo(f[0],f[1]),t.lineTo(l[0],l[1]);for(var m=1;m<a-1;m++){var v=i[m];t.moveTo(v[0],v[1]),f[u]=v[u],t.lineTo(f[0],f[1])}},e}(Mn),Ivt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new zt,t}return e.prototype.init=function(t,r){this._controller=new k2(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,i){var a=t.getData(),o=t.layoutInfo,s=this._mainGroup,l=t.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(t,i),this._updateController(t,r,i);var c=this._data;a.diff(c).add(function(u){rde(a,u)&&ide(a,u,null,s,t)}).update(function(u,d){var h=c.getItemGraphicEl(d);if(!rde(a,u)){h&&ode(c,d,h,s,t);return}ide(a,u,h,s,t)}).remove(function(u){var d=c.getItemGraphicEl(u);d&&ode(c,u,d,s,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(u,d){u.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:d})})}),this._data=a},e.prototype._updateViewCoordSys=function(t,r){var i=t.getData(),a=[];i.each(function(d){var h=i.getItemLayout(d);h&&!isNaN(h.x)&&!isNaN(h.y)&&a.push([+h.x,+h.y])});var o=[],s=[];S5(a,o,s);var l=this._min,c=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=c?c[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=c?c[1]:s[1]+1);var u=t.coordinateSystem=new I2;u.zoomLimit=t.get("scaleLimit"),u.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),u.setCenter(t.get("center"),r),u.setZoom(t.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=o,this._max=s},e.prototype._updateController=function(t,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(c,u,d){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(u,d)&&!W5(c,i,t)}),o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){MK(s,c.dx,c.dy),i.dispatchAction({seriesId:t.id,type:"treeRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){PK(s,c.scale,c.originX,c.originY),i.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),a._updateNodeAndLinkScale(t),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var r=t.getData(),i=this._getNodeGlobalScale(t);r.eachItemGraphicEl(function(a,o){a.setSymbolScale(i)})},e.prototype._getNodeGlobalScale=function(t){var r=t.coordinateSystem;if(r.type!=="view")return 1;var i=this._nodeScaleRatio,a=r.scaleX||1,o=r.getZoom(),s=(o-1)*i+1;return s/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(ti);function rde(n,e){var t=n.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function ide(n,e,t,r,i){var a=!t,o=n.tree.getNodeByDataIndex(e),s=o.getModel(),l=o.getVisual("style").fill,c=o.isExpand===!1&&o.children.length!==0?l:"#fff",u=n.tree.root,d=o.parentNode===u?o:o.parentNode||o,h=n.getItemGraphicEl(d.dataIndex),f=d.getLayout(),m=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:f,v=o.getLayout();a?(t=new S2(n,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.x=m.x,t.y=m.y):t.updateData(n,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=v.rawX,t.__radialRawY=v.rawY,r.add(t),n.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,fr(t,{x:v.x,y:v.y},i);var y=t.getSymbolPath();if(i.get("layout")==="radial"){var w=u.children[0],_=w.getLayout(),S=w.children.length,A=void 0,C=void 0;if(v.x===_.x&&o.isExpand===!0&&w.children.length){var D={x:(w.children[0].getLayout().x+w.children[S-1].getLayout().x)/2,y:(w.children[0].getLayout().y+w.children[S-1].getLayout().y)/2};A=Math.atan2(D.y-_.y,D.x-_.x),A<0&&(A=Math.PI*2+A),C=D.x<_.x,C&&(A=A-Math.PI)}else A=Math.atan2(v.y-_.y,v.x-_.x),A<0&&(A=Math.PI*2+A),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(C=v.x<_.x,C&&(A=A-Math.PI)):(C=v.x>_.x,C||(A=A-Math.PI));var M=C?"left":"right",P=s.getModel("label"),O=P.get("rotate"),j=O*(Math.PI/180),L=y.getTextContent();L&&(y.setTextConfig({position:P.get("position")||M,rotation:O==null?-A:j,origin:"center"}),L.setStyle("verticalAlign","middle"))}var B=s.get(["emphasis","focus"]),$=B==="relative"?Gk(o.getAncestorsIndices(),o.getDescendantIndices()):B==="ancestor"?o.getAncestorsIndices():B==="descendant"?o.getDescendantIndices():null;$&&(Wt(t).focus=$),Mvt(i,o,u,t,m,f,v,r),t.__edge&&(t.onHoverStateChange=function(Y){if(Y!=="blur"){var q=o.parentNode&&n.getItemGraphicEl(o.parentNode.dataIndex);q&&q.hoverState===f2||zN(t.__edge,Y)}})}function Mvt(n,e,t,r,i,a,o,s){var l=e.getModel(),c=n.get("edgeShape"),u=n.get("layout"),d=n.getOrient(),h=n.get(["lineStyle","curveness"]),f=n.get("edgeForkPosition"),m=l.getModel("lineStyle").getLineStyle(),v=r.__edge;if(c==="curve")e.parentNode&&e.parentNode!==t&&(v||(v=r.__edge=new g2({shape:U8(u,d,h,i,i)})),fr(v,{shape:U8(u,d,h,a,o)},n));else if(c==="polyline"&&u==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var y=e.children,w=[],_=0;_<y.length;_++){var S=y[_].getLayout();w.push([S.x,S.y])}v||(v=r.__edge=new kvt({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:d,forkPosition:f}})),fr(v,{shape:{parentPoint:[o.x,o.y],childPoints:w}},n)}v&&!(c==="polyline"&&!e.isExpand)&&(v.useStyle(Rt({strokeNoScale:!0,fill:null},m)),gs(v,l,"lineStyle"),Bw(v),s.add(v))}function ade(n,e,t,r,i){var a=e.tree.root,o=zAe(a,n),s=o.source,l=o.sourceLayout,c=e.getItemGraphicEl(n.dataIndex);if(c){var u=e.getItemGraphicEl(s.dataIndex),d=u.__edge,h=c.__edge||(s.isExpand===!1||s.children.length===1?d:void 0),f=r.get("edgeShape"),m=r.get("layout"),v=r.get("orient"),y=r.get(["lineStyle","curveness"]);h&&(f==="curve"?fy(h,{shape:U8(m,v,y,l,l),style:{opacity:0}},r,{cb:function(){t.remove(h)},removeOpt:i}):f==="polyline"&&r.get("layout")==="orthogonal"&&fy(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){t.remove(h)},removeOpt:i}))}}function zAe(n,e){for(var t=e.parentNode===n?e:e.parentNode||e,r;r=t.getLayout(),r==null;)t=t.parentNode===n?t:t.parentNode||t;return{source:t,sourceLayout:r}}function ode(n,e,t,r,i){var a=n.tree.getNodeByDataIndex(e),o=n.tree.root,s=zAe(o,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};fy(t,{x:s.x+1,y:s.y+1},i,{cb:function(){r.remove(t),n.setItemGraphicEl(e,null)},removeOpt:l}),t.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(c){ade(c,n,r,i,l)}),ade(a,n,r,i,l)}function U8(n,e,t,r,i){var a,o,s,l,c,u,d,h;if(n==="radial"){c=r.rawX,d=r.rawY,u=i.rawX,h=i.rawY;var f=XC(c,d),m=XC(c,d+(h-d)*t),v=XC(u,h+(d-h)*t),y=XC(u,h);return{x1:f.x||0,y1:f.y||0,x2:y.x||0,y2:y.y||0,cpx1:m.x||0,cpy1:m.y||0,cpx2:v.x||0,cpy2:v.y||0}}else c=r.x,d=r.y,u=i.x,h=i.y,(e==="LR"||e==="RL")&&(a=c+(u-c)*t,o=d,s=u+(c-u)*t,l=h),(e==="TB"||e==="BT")&&(a=c,o=d+(h-d)*t,s=u,l=h+(d-h)*t);return{x1:c,y1:d,x2:u,y2:h,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var Yu=tr();function HAe(n){var e=n.mainData,t=n.datas;t||(t={main:e},n.datasAttr={main:"data"}),n.datas=n.mainData=null,qAe(e,t,n),Z(t,function(r){Z(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,en(Pvt,n))})}),e.wrapMethod("cloneShallow",en(Rvt,n)),Z(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,en(Ovt,n))}),Tl(t[e.dataType]===e)}function Pvt(n,e){if(jvt(this)){var t=Pe({},Yu(this).datas);t[this.dataType]=e,qAe(e,t,n)}else NK(e,this.dataType,Yu(this).mainData,n);return e}function Ovt(n,e){return n.struct&&n.struct.update(),e}function Rvt(n,e){return Z(Yu(e).datas,function(t,r){t!==e&&NK(t.cloneShallow(),r,e,n)}),e}function Nvt(n){var e=Yu(this).mainData;return n==null||e==null?e:Yu(e).datas[n]}function Lvt(){var n=Yu(this).mainData;return n==null?[{data:n}]:Ue(Vn(Yu(n).datas),function(e){return{type:e,data:Yu(n).datas[e]}})}function jvt(n){return Yu(n).mainData===n}function qAe(n,e,t){Yu(n).datas={},Z(e,function(r,i){NK(r,i,n,t)})}function NK(n,e,t,r){Yu(t).datas[e]=n,Yu(n).mainData=t,n.dataType=e,r.struct&&(n[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=n),n.getLinkedData=Nvt,n.getLinkedDataAll=Lvt}var Fvt=function(){function n(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(e,t,r){kt(e)&&(r=t,t=e,e=null),e=e||{},st(e)&&(e={order:e});var i=e.order||"preorder",a=this[e.attr||"children"],o;i==="preorder"&&(o=t.call(r,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(e,t,r);i==="postorder"&&t.call(r,this)},n.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},n.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].getNodeById(e);if(a)return a}},n.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].contains(e);if(a)return a}},n.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},n.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},n.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},n.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},n.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},n.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},n.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},n.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},n}(),LK=function(){function n(e){this.type="tree",this._nodes=[],this.hostModel=e}return n.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},n.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},n.prototype.getNodeById=function(e){return this.root.getNodeById(e)},n.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,i=t.length;r<i;r++)t[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)t[e.getRawIndex(r)].dataIndex=r},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(e,t,r){var i=new n(t),a=[],o=1;s(e);function s(u,d){var h=u.value;o=Math.max(o,$e(h)?h.length:1),a.push(u);var f=new Fvt(ro(u.name,""),i);d?$vt(f,d):i.root=f,i._nodes.push(f);var m=u.children;if(m)for(var v=0;v<m.length;v++)s(m[v],f)}i.root.updateDepthAndHeight(0);var l=_2(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,c=new xl(l,t);return c.initData(a),r&&r(c),HAe({mainData:c,struct:i,structAttr:"tree"}),i.update(),i},n}();function $vt(n,e){var t=e.children;n.parentNode!==e&&(t.push(n),n.parentNode=e)}function hI(n,e,t){if(n&&_n(e,n.type)>=0){var r=t.getData().tree.root,i=n.targetNode;if(st(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=n.targetNodeId;if(a!=null&&(i=r.getNodeById(a)))return{node:i}}}function GAe(n){for(var e=[];n;)n=n.parentNode,n&&e.push(n);return e.reverse()}function jK(n,e){var t=GAe(n);return _n(t,e)>=0}function K5(n,e){for(var t=[];n;){var r=n.dataIndex;t.push({name:n.name,dataIndex:r,value:e.getRawValue(r)}),n=n.parentNode}return t.reverse(),t}var Bvt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var r={name:t.name,children:t.data},i=t.leaves||{},a=new Ir(i,this,this.ecModel),o=LK.createTree(r,this,s);function s(d){d.wrapMethod("getItemModel",function(h,f){var m=o.getNodeByDataIndex(f);return m&&m.children.length&&m.isExpand||(h.parentModel=a),h})}var l=0;o.eachNode("preorder",function(d){d.depth>l&&(l=d.depth)});var c=t.expandAndCollapse,u=c&&t.initialTreeDepth>=0?t.initialTreeDepth:l;return o.root.eachNode("preorder",function(d){var h=d.hostTree.data.getRawDataItem(d.dataIndex);d.isExpand=h&&h.collapsed!=null?!h.collapsed:d.depth<=u}),o.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(t),l=s.getValue(),c=s.name;s&&s!==o;)c=s.parentNode.name+"."+c,s=s.parentNode;return To("nameValue",{name:c,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=K5(i,this),r.collapsed=!i.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(bi);function Uvt(n,e,t){for(var r=[n],i=[],a;a=r.pop();)if(i.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;a=i.pop();)e(a,t)}function dC(n,e){for(var t=[n],r;r=t.pop();)if(e(r),r.isExpand){var i=r.children;if(i.length)for(var a=i.length-1;a>=0;a--)t.push(i[a])}}function Vvt(n,e){n.eachSeriesByType("tree",function(t){zvt(t,e)})}function zvt(n,e){var t=xvt(n,e);n.layoutInfo=t;var r=n.get("layout"),i=0,a=0,o=null;r==="radial"?(i=2*Math.PI,a=Math.min(t.height,t.width)/2,o=nde(function(S,A){return(S.parentNode===A.parentNode?1:2)/S.depth})):(i=t.width,a=t.height,o=nde());var s=n.getData().tree.root,l=s.children[0];if(l){bvt(s),Uvt(l,wvt,o),s.hierNode.modifier=-l.hierNode.prelim,dC(l,_vt);var c=l,u=l,d=l;dC(l,function(S){var A=S.getLayout().x;A<c.getLayout().x&&(c=S),A>u.getLayout().x&&(u=S),S.depth>d.depth&&(d=S)});var h=c===u?1:o(c,u)/2,f=h-c.getLayout().x,m=0,v=0,y=0,w=0;if(r==="radial")m=i/(u.getLayout().x+h+f),v=a/(d.depth-1||1),dC(l,function(S){y=(S.getLayout().x+f)*m,w=(S.depth-1)*v;var A=XC(y,w);S.setLayout({x:A.x,y:A.y,rawX:y,rawY:w},!0)});else{var _=n.getOrient();_==="RL"||_==="LR"?(v=a/(u.getLayout().x+h+f),m=i/(d.depth-1||1),dC(l,function(S){w=(S.getLayout().x+f)*v,y=_==="LR"?(S.depth-1)*m:i-(S.depth-1)*m,S.setLayout({x:y,y:w},!0)})):(_==="TB"||_==="BT")&&(m=i/(u.getLayout().x+h+f),v=a/(d.depth-1||1),dC(l,function(S){y=(S.getLayout().x+f)*m,w=_==="TB"?(S.depth-1)*v:a-(S.depth-1)*v,S.setLayout({x:y,y:w},!0)}))}}}function Hvt(n){n.eachSeriesByType("tree",function(e){var t=e.getData(),r=t.tree;r.eachNode(function(i){var a=i.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=t.ensureUniqueItemVisual(i.dataIndex,"style");Pe(s,o)})})}function qvt(n){n.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var i=e.dataIndex,a=r.getData().tree,o=a.getNodeByDataIndex(i);o.isExpand=!o.isExpand})}),n.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var a=i.coordinateSystem,o=RK(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}function Gvt(n){n.registerChartView(Ivt),n.registerSeriesModel(Bvt),n.registerLayout(Vvt),n.registerVisual(Hvt),qvt(n)}var sde=["treemapZoomToNode","treemapRender","treemapMove"];function Wvt(n){for(var e=0;e<sde.length;e++)n.registerAction({type:sde[e],update:"updateView"},Ca);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"treemap",query:t},i);function i(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=hI(t,s,a);if(l){var c=a.getViewRoot();c&&(t.direction=jK(c,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function WAe(n){var e=n.getData(),t=e.tree,r={};t.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var o=g8(n.ecModel,a.name||a.dataIndex+"",r);i.setVisual("decal",o)})}var Yvt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};YAe(i);var a=t.levels||[],o=this.designatedVisualItemStyle={},s=new Ir({itemStyle:o},this,r);a=t.levels=Kvt(a,r);var l=Ue(a||[],function(d){return new Ir(d,s,r)},this),c=LK.createTree(i,this,u);function u(d){d.wrapMethod("getItemModel",function(h,f){var m=c.getNodeByDataIndex(f),v=m?l[m.depth]:null;return h.parentModel=v||s,h})}return c.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return To("nameValue",{name:s,value:o})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=K5(i,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},Pe(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var r=this._idIndexMap;r||(r=this._idIndexMap=_t(),this._idIndexMapCount=0);var i=r.get(t);return i==null&&r.set(t,i=this._idIndexMapCount++),i},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){WAe(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(bi);function YAe(n){var e=0;Z(n.children,function(r){YAe(r);var i=r.value;$e(i)&&(i=i[0]),e+=i});var t=n.value;$e(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),$e(n.value)?n.value[0]=t:n.value=t}function Kvt(n,e){var t=Wr(e.get("color")),r=Wr(e.get(["aria","decal","decals"]));if(t){n=n||[];var i,a;Z(n,function(s){var l=new Ir(s),c=l.get("color"),u=l.get("decal");(l.get(["itemStyle","color"])||c&&c!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||u&&u!=="none")&&(a=!0)});var o=n[0]||(n[0]={});return i||(o.color=t.slice()),!a&&r&&(o.decal=r.slice()),n}}var Xvt=8,lde=8,K6=5,Zvt=function(){function n(e){this.group=new zt,e.add(this.group)}return n.prototype.render=function(e,t,r,i){var a=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!r)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),c=s.getModel("textStyle"),u=l.getModel(["itemStyle","textStyle"]),d={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,d,c),this._renderContent(e,d,s,l,c,u,i),L5(o,d.pos,d.box)}},n.prototype._prepare=function(e,t,r){for(var i=e;i;i=i.parentNode){var a=ro(i.getModel().get("name"),""),o=r.getTextRect(a),s=Math.max(o.width+Xvt*2,t.emptyItemWidth);t.totalWidth+=s+lde,t.renderList.push({node:i,text:a,width:s})}},n.prototype._renderContent=function(e,t,r,i,a,o,s){for(var l=0,c=t.emptyItemWidth,u=e.get(["breadcrumb","height"]),d=out(t.pos,t.box),h=t.totalWidth,f=t.renderList,m=i.getModel("itemStyle").getItemStyle(),v=f.length-1;v>=0;v--){var y=f[v],w=y.node,_=y.width,S=y.text;h>d.width&&(h-=_-c,_=c,S=null);var A=new Cl({shape:{points:Qvt(l,0,_,u,v===f.length-1,v===0)},style:Rt(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new sr({style:vi(a,{text:S})}),textConfig:{position:"inside"},z2:RT*1e4,onclick:en(s,w)});A.disableLabelAnimation=!0,A.getTextContent().ensureState("emphasis").style=vi(o,{text:S}),A.ensureState("emphasis").style=m,na(A,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(A),Jvt(A,e,w),l+=_+lde}},n.prototype.remove=function(){this.group.removeAll()},n}();function Qvt(n,e,t,r,i,a){var o=[[i?n:n-K6,e],[n+t,e],[n+t,e+r],[i?n:n-K6,e+r]];return!a&&o.splice(2,0,[n+t+K6,e+r/2]),!i&&o.push([n,e+r/2]),o}function Jvt(n,e,t){Wt(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&K5(t,e)}}var eyt=function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(e,t,r,i,a){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:i,easing:a}),!0)},n.prototype.finished=function(e){return this._finishedCallback=e,this},n.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},n}();function tyt(){return new eyt}var V8=zt,cde=er,ude=3,dde="label",hde="upperLabel",nyt=RT*10,ryt=RT*2,iyt=RT*3,Mb=$w([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),fde=function(n){var e=Mb(n);return e.stroke=e.fill=e.lineWidth=null,e},dL=tr(),ayt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=hC(),t}return e.prototype.render=function(t,r,i,a){var o=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(_n(o,t)<0)){this.seriesModel=t,this.api=i,this.ecModel=r;var s=["treemapZoomToNode","treemapRootToNode"],l=hI(a,s,t),c=a&&a.type,u=t.layoutInfo,d=!this._oldTree,h=this._storage,f=c==="treemapRootToNode"&&l&&h?{rootNodeGroup:h.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,m=this._giveContainerGroup(u),v=t.get("animation"),y=this._doRender(m,t,f);v&&!d&&(!c||c==="treemapZoomToNode"||c==="treemapRootToNode")?this._doAnimation(m,y,t,f):y.renderFinally(),this._resetController(i),this._renderBreadcrumb(t,i,l)}},e.prototype._giveContainerGroup=function(t){var r=this._containerGroup;return r||(r=this._containerGroup=new V8,this._initEvents(r),this.group.add(r)),r.x=t.x,r.y=t.y,r},e.prototype._doRender=function(t,r,i){var a=r.getData().tree,o=this._oldTree,s=hC(),l=hC(),c=this._storage,u=[];function d(_,S,A,C){return oyt(r,l,c,i,s,u,_,S,A,C)}v(a.root?[a.root]:[],o&&o.root?[o.root]:[],t,a===o||!o,0);var h=y(c);if(this._oldTree=a,this._storage=l,this._controllerHost){var f=this.seriesModel.layoutInfo,m=a.root.getLayout();m.width===f.width&&m.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:h,renderFinally:w};function v(_,S,A,C,D){C?(S=_,Z(_,function(O,j){!O.isRemoved()&&P(j,j)})):new Ng(S,_,M,M).add(P).update(P).remove(en(P,null)).execute();function M(O){return O.getId()}function P(O,j){var L=O!=null?_[O]:null,B=j!=null?S[j]:null,$=d(L,B,A,D);$&&v(L&&L.viewChildren||[],B&&B.viewChildren||[],$,C,D+1)}}function y(_){var S=hC();return _&&Z(_,function(A,C){var D=S[C];Z(A,function(M){M&&(D.push(M),dL(M).willDelete=!0)})}),S}function w(){Z(h,function(_){Z(_,function(S){S.parent&&S.parent.remove(S)})}),Z(u,function(_){_.invisible=!0,_.dirty()})}},e.prototype._doAnimation=function(t,r,i,a){var o=i.get("animationDurationUpdate"),s=i.get("animationEasing"),l=(kt(o)?0:o)||0,c=(kt(s)?null:s)||"cubicOut",u=tyt();Z(r.willDeleteEls,function(d,h){Z(d,function(f,m){if(!f.invisible){var v=f.parent,y,w=dL(v);if(a&&a.direction==="drillDown")y=v===a.rootNodeGroup?{shape:{x:0,y:0,width:w.nodeWidth,height:w.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var _=0,S=0;w.willDelete||(_=w.nodeWidth/2,S=w.nodeHeight/2),y=h==="nodeGroup"?{x:_,y:S,style:{opacity:0}}:{shape:{x:_,y:S,width:0,height:0},style:{opacity:0}}}y&&u.add(f,y,l,0,c)}})}),Z(this._storage,function(d,h){Z(d,function(f,m){var v=r.lastsForAnimation[h][m],y={};v&&(f instanceof zt?v.oldX!=null&&(y.x=f.x,y.y=f.y,f.x=v.oldX,f.y=v.oldY):(v.oldShape&&(y.shape=Pe({},f.shape),f.setShape(v.oldShape)),v.fadein?(f.setStyle("opacity",0),y.style={opacity:1}):f.style.opacity!==1&&(y.style={opacity:1})),u.add(f,y,l,0,c))})},this),this._state="animating",u.finished(dt(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(t){var r=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),r||(r=this._controller=new k2(t.getZr()),r.enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),r.on("pan",dt(this._onPan,this)),r.on("zoom",dt(this._onZoom,this)));var a=new pn(0,0,t.getWidth(),t.getHeight());r.setPointerChecker(function(o,s,l){return a.contain(s,l)})},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>ude||Math.abs(t.dy)>ude)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+t.dx,y:i.y+t.dy,width:i.width,height:i.height}})}},e.prototype._onZoom=function(t){var r=t.originX,i=t.originY,a=t.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new pn(s.x,s.y,s.width,s.height),c=null,u=this._controllerHost;c=u.zoomLimit;var d=u.zoom=u.zoom||1;if(d*=a,c){var h=c.min||0,f=c.max||1/0;d=Math.max(Math.min(f,d),h)}var m=d/u.zoom;u.zoom=d;var v=this.seriesModel.layoutInfo;r-=v.x,i-=v.y;var y=Gc();Nf(y,y,[-r,-i]),CY(y,y,[m,m]),Nf(y,y,[r,i]),l.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(t){var r=this;t.on("click",function(i){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var o=r.findTarget(i.offsetX,i.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)r._rootToNode(o);else if(a==="zoomToNode")r._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),c=l.get("link",!0),u=l.get("target",!0)||"blank";c&&KN(c,u)}}}}},this)},e.prototype._renderBreadcrumb=function(t,r,i){var a=this;i||(i=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),i||(i={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Zvt(this.group))).render(t,r,i.node,function(o){a._state!=="animating"&&(jK(t.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=hC(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,r){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(t,r),c=s.shape;if(c.x<=l[0]&&l[0]<=c.x+c.width&&c.y<=l[1]&&l[1]<=c.y+c.height)i={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},e.type="treemap",e}(ti);function hC(){return{nodeGroup:[],background:[],content:[]}}function oyt(n,e,t,r,i,a,o,s,l,c){if(!o)return;var u=o.getLayout(),d=n.getData(),h=o.getModel();if(d.setItemGraphicEl(o.dataIndex,null),!u||!u.isInView)return;var f=u.width,m=u.height,v=u.borderWidth,y=u.invisible,w=o.getRawIndex(),_=s&&s.getRawIndex(),S=o.viewChildren,A=u.upperHeight,C=S&&S.length,D=h.getModel("itemStyle"),M=h.getModel(["emphasis","itemStyle"]),P=h.getModel(["blur","itemStyle"]),O=h.getModel(["select","itemStyle"]),j=D.get("borderRadius")||0,L=he("nodeGroup",V8);if(!L)return;if(l.add(L),L.x=u.x||0,L.y=u.y||0,L.markRedraw(),dL(L).nodeWidth=f,dL(L).nodeHeight=m,u.isAboveViewRoot)return L;var B=he("background",cde,c,ryt);B&&z(L,B,C&&u.upperLabelHeight);var $=h.getModel("emphasis"),Y=$.get("focus"),q=$.get("blurScope"),W=$.get("disabled"),X=Y==="ancestor"?o.getAncestorsIndices():Y==="descendant"?o.getDescendantIndices():Y;if(C)Jk(L)&&ew(L,!1),B&&(ew(B,!W),d.setItemGraphicEl(o.dataIndex,B),s8(B,X,q));else{var te=he("content",cde,c,iyt);te&&oe(L,te),B.disableMorphing=!0,B&&Jk(B)&&ew(B,!1),ew(L,!W),d.setItemGraphicEl(o.dataIndex,L);var re=h.getShallow("cursor");re&&te.attr("cursor",re),s8(L,X,q)}return L;function z(Be,Se,_e){var me=Wt(Se);if(me.dataIndex=o.dataIndex,me.seriesIndex=n.seriesIndex,Se.setShape({x:0,y:0,width:f,height:m,r:j}),y)le(Se);else{Se.invisible=!1;var fe=o.getVisual("style"),Ge=fe.stroke,Ve=fde(D);Ve.fill=Ge;var nt=Mb(M);nt.fill=M.get("borderColor");var we=Mb(P);we.fill=P.get("borderColor");var rt=Mb(O);if(rt.fill=O.get("borderColor"),_e){var on=f-2*v;ee(Se,Ge,fe.opacity,{x:v,y:0,width:on,height:A})}else Se.removeTextContent();Se.setStyle(Ve),Se.ensureState("emphasis").style=nt,Se.ensureState("blur").style=we,Se.ensureState("select").style=rt,Bw(Se)}Be.add(Se)}function oe(Be,Se){var _e=Wt(Se);_e.dataIndex=o.dataIndex,_e.seriesIndex=n.seriesIndex;var me=Math.max(f-2*v,0),fe=Math.max(m-2*v,0);if(Se.culling=!0,Se.setShape({x:v,y:v,width:me,height:fe,r:j}),y)le(Se);else{Se.invisible=!1;var Ge=o.getVisual("style"),Ve=Ge.fill,nt=fde(D);nt.fill=Ve,nt.decal=Ge.decal;var we=Mb(M),rt=Mb(P),on=Mb(O);ee(Se,Ve,Ge.opacity,null),Se.setStyle(nt),Se.ensureState("emphasis").style=we,Se.ensureState("blur").style=rt,Se.ensureState("select").style=on,Bw(Se)}Be.add(Se)}function le(Be){!Be.invisible&&a.push(Be)}function ee(Be,Se,_e,me){var fe=h.getModel(me?hde:dde),Ge=ro(h.get("name"),null),Ve=fe.getShallow("show");ms(Be,So(h,me?hde:dde),{defaultText:Ve?Ge:null,inheritColor:Se,defaultOpacity:_e,labelFetcher:n,labelDataIndex:o.dataIndex});var nt=Be.getTextContent();if(nt){var we=nt.style,rt=TY(we.padding||0);me&&(Be.setTextConfig({layoutRect:me}),nt.disableLabelLayout=!0),nt.beforeUpdate=function(){var Mt=Math.max((me?me.width:Be.shape.width)-rt[1]-rt[3],0),kn=Math.max((me?me.height:Be.shape.height)-rt[0]-rt[2],0);(we.width!==Mt||we.height!==kn)&&nt.setStyle({width:Mt,height:kn})},we.truncateMinChar=2,we.lineOverflow="truncate",be(we,me,u);var on=nt.getState("emphasis");be(on?on.style:null,me,u)}}function be(Be,Se,_e){var me=Be?Be.text:null;if(!Se&&_e.isLeafRoot&&me!=null){var fe=n.get("drillDownIcon",!0);Be.text=fe?fe+" "+me:me}}function he(Be,Se,_e,me){var fe=_!=null&&t[Be][_],Ge=i[Be];return fe?(t[Be][_]=null,pe(Ge,fe)):y||(fe=new Se,fe instanceof Qu&&(fe.z2=syt(_e,me)),ct(Ge,fe)),e[Be][w]=fe}function pe(Be,Se){var _e=Be[w]={};Se instanceof V8?(_e.oldX=Se.x,_e.oldY=Se.y):_e.oldShape=Pe({},Se.shape)}function ct(Be,Se){var _e=Be[w]={},me=o.parentNode,fe=Se instanceof zt;if(me&&(!r||r.direction==="drillDown")){var Ge=0,Ve=0,nt=i.background[me.getRawIndex()];!r&&nt&&nt.oldShape&&(Ge=nt.oldShape.width,Ve=nt.oldShape.height),fe?(_e.oldX=0,_e.oldY=Ve):_e.oldShape={x:Ge,y:Ve,width:0,height:0}}_e.fadein=!fe}}function syt(n,e){return n*nyt+e}var fI=Z,lyt=jt,hL=-1,xo=function(){function n(e){var t=e.mappingMethod,r=e.type,i=this.option=Bt(e);this.type=r,this.mappingMethod=t,this._normalizeData=dyt[t];var a=n.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[t],t==="piecewise"?(X6(i),cyt(i)):t==="category"?i.categories?uyt(i):X6(i,!0):(Tl(t!=="linear"||i.dataExtent),X6(i))}return n.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},n.prototype.getNormalizer=function(){return dt(this._normalizeData,this)},n.listVisualTypes=function(){return Vn(n.visualHandlers)},n.isValidType=function(e){return n.visualHandlers.hasOwnProperty(e)},n.eachVisual=function(e,t,r){jt(e)?Z(e,t,r):t.call(r,e)},n.mapVisual=function(e,t,r){var i,a=$e(e)?[]:jt(e)?{}:(i=!0,null);return n.eachVisual(e,function(o,s){var l=t.call(r,o,s);i?a=l:a[s]=l}),a},n.retrieveVisuals=function(e){var t={},r;return e&&fI(n.visualHandlers,function(i,a){e.hasOwnProperty(a)&&(t[a]=e[a],r=!0)}),r?t:null},n.prepareVisualTypes=function(e){if($e(e))e=e.slice();else if(lyt(e)){var t=[];fI(e,function(r,i){t.push(i)}),e=t}else return[];return e.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},n.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},n.findPieceIndex=function(e,t,r){for(var i,a=1/0,o=0,s=t.length;o<s;o++){var l=t[o].value;if(l!=null){if(l===e||st(l)&&l===e+"")return o;r&&h(l,o)}}for(var o=0,s=t.length;o<s;o++){var c=t[o],u=c.interval,d=c.close;if(u){if(u[0]===-1/0){if(XP(d[1],e,u[1]))return o}else if(u[1]===1/0){if(XP(d[0],u[0],e))return o}else if(XP(d[0],u[0],e)&&XP(d[1],e,u[1]))return o;r&&h(u[0],o),r&&h(u[1],o)}}if(r)return e===1/0?t.length-1:e===-1/0?0:i;function h(f,m){var v=Math.abs(f-e);v<a&&(a=v,i=m)}},n.visualHandlers={color:{applyVisual:fC("color"),getColorMapper:function(){var e=this.option;return dt(e.mappingMethod==="category"?function(t,r){return!r&&(t=this._normalizeData(t)),ZC.call(this,t)}:function(t,r,i){var a=!!i;return!r&&(t=this._normalizeData(t)),i=IU(t,e.parsedVisual,i),a?i:bg(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return bg(IU(e,this.option.parsedVisual),"rgba")},category:ZC,piecewise:function(e,t){var r=H8.call(this,t);return r==null&&(r=bg(IU(e,this.option.parsedVisual),"rgba")),r},fixed:Pb}},colorHue:KP(function(e,t){return wD(e,t)}),colorSaturation:KP(function(e,t){return wD(e,null,t)}),colorLightness:KP(function(e,t){return wD(e,null,null,t)}),colorAlpha:KP(function(e,t){return jN(e,t)}),decal:{applyVisual:fC("decal"),_normalizedToVisual:{linear:null,category:ZC,piecewise:null,fixed:null}},opacity:{applyVisual:fC("opacity"),_normalizedToVisual:z8([0,1])},liftZ:{applyVisual:fC("liftZ"),_normalizedToVisual:{linear:Pb,category:Pb,piecewise:Pb,fixed:Pb}},symbol:{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("symbol",i)},_normalizedToVisual:{linear:pde,category:ZC,piecewise:function(e,t){var r=H8.call(this,t);return r==null&&(r=pde.call(this,e)),r},fixed:Pb}},symbolSize:{applyVisual:fC("symbolSize"),_normalizedToVisual:z8([0,1])}},n}();function cyt(n){var e=n.pieceList;n.hasSpecialVisual=!1,Z(e,function(t,r){t.originIndex=r,t.visual!=null&&(n.hasSpecialVisual=!0)})}function uyt(n){var e=n.categories,t=n.categoryMap={},r=n.visual;if(fI(e,function(o,s){t[o]=s}),!$e(r)){var i=[];jt(r)?fI(r,function(o,s){var l=t[s];i[l??hL]=o}):i[hL]=r,r=KAe(n,i)}for(var a=e.length-1;a>=0;a--)r[a]==null&&(delete t[e[a]],e.pop())}function X6(n,e){var t=n.visual,r=[];jt(t)?fI(t,function(a){r.push(a)}):t!=null&&r.push(t);var i={color:1,symbol:1};!e&&r.length===1&&!i.hasOwnProperty(n.type)&&(r[1]=r[0]),KAe(n,r)}function KP(n){return{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("color",n(t("color"),i))},_normalizedToVisual:z8([0,1])}}function pde(n){var e=this.option.visual;return e[Math.round(kr(n,[0,1],[0,e.length-1],!0))]||{}}function fC(n){return function(e,t,r){r(n,this.mapValueToVisual(e))}}function ZC(n){var e=this.option.visual;return e[this.option.loop&&n!==hL?n%e.length:n]}function Pb(){return this.option.visual[0]}function z8(n){return{linear:function(e){return kr(e,n,this.option.visual,!0)},category:ZC,piecewise:function(e,t){var r=H8.call(this,t);return r==null&&(r=kr(e,n,this.option.visual,!0)),r},fixed:Pb}}function H8(n){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var r=xo.findPieceIndex(n,t),i=t[r];if(i&&i.visual)return i.visual[this.type]}}function KAe(n,e){return n.visual=e,n.type==="color"&&(n.parsedVisual=Ue(e,function(t){var r=Wc(t);return r||[0,0,0,1]})),e}var dyt={linear:function(n){return kr(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var e=this.option.pieceList,t=xo.findPieceIndex(n,e,!0);if(t!=null)return kr(t,[0,e.length-1],[0,1],!0)},category:function(n){var e=this.option.categories?this.option.categoryMap[n]:n;return e??hL},fixed:Ca};function XP(n,e,t){return n?e<=t:e<t}var hyt="itemStyle",XAe=tr();const fyt={seriesType:"treemap",reset:function(n){var e=n.getData().tree,t=e.root;t.isRemoved()||ZAe(t,{},n.getViewRoot().getAncestors(),n)}};function ZAe(n,e,t,r){var i=n.getModel(),a=n.getLayout(),o=n.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=i.getModel(hyt),l=pyt(s,e,r),c=o.ensureUniqueItemVisual(n.dataIndex,"style"),u=s.get("borderColor"),d=s.get("borderColorSaturation"),h;d!=null&&(h=gde(l),u=gyt(d,h)),c.stroke=u;var f=n.viewChildren;if(!f||!f.length)h=gde(l),c.fill=h;else{var m=myt(n,i,a,s,l,f);Z(f,function(v,y){if(v.depth>=t.length||v===t[v.depth]){var w=vyt(i,l,v,y,m,r);ZAe(v,w,t,r)}})}}}function pyt(n,e,t){var r=Pe({},e),i=t.designatedVisualItemStyle;return Z(["color","colorAlpha","colorSaturation"],function(a){i[a]=e[a];var o=n.get(a);i[a]=null,o!=null&&(r[a]=o)}),r}function gde(n){var e=Z6(n,"color");if(e){var t=Z6(n,"colorAlpha"),r=Z6(n,"colorSaturation");return r&&(e=wD(e,null,null,r)),t&&(e=jN(e,t)),e}}function gyt(n,e){return e!=null?wD(e,null,null,n):null}function Z6(n,e){var t=n[e];if(t!=null&&t!=="none")return t}function myt(n,e,t,r,i,a){if(!(!a||!a.length)){var o=Q6(e,"color")||i.color!=null&&i.color!=="none"&&(Q6(e,"colorAlpha")||Q6(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),c=t.dataExtent.slice();s!=null&&s<c[0]&&(c[0]=s),l!=null&&l>c[1]&&(c[1]=l);var u=e.get("colorMappingBy"),d={type:o.name,dataExtent:c,visual:o.range};d.type==="color"&&(u==="index"||u==="id")?(d.mappingMethod="category",d.loop=!0):d.mappingMethod="linear";var h=new xo(d);return XAe(h).drColorMappingBy=u,h}}}function Q6(n,e){var t=n.get(e);return $e(t)&&t.length?{name:e,range:t}:null}function vyt(n,e,t,r,i,a){var o=Pe({},e);if(i){var s=i.type,l=s==="color"&&XAe(i).drColorMappingBy,c=l==="index"?r:l==="id"?a.mapIdToIndex(t.getId()):t.getValue(n.get("visualDimension"));o[s]=i.mapValueToVisual(c)}return o}var pI=Math.max,fL=Math.min,mde=Ho,FK=Z,QAe=["itemStyle","borderWidth"],yyt=["itemStyle","gapWidth"],byt=["upperLabel","show"],wyt=["upperLabel","height"];const _yt={seriesType:"treemap",reset:function(n,e,t,r){var i=t.getWidth(),a=t.getHeight(),o=n.option,s=oo(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),l=o.size||[],c=Je(mde(s.width,l[0]),i),u=Je(mde(s.height,l[1]),a),d=r&&r.type,h=["treemapZoomToNode","treemapRootToNode"],f=hI(r,h,n),m=d==="treemapRender"||d==="treemapMove"?r.rootRect:null,v=n.getViewRoot(),y=GAe(v);if(d!=="treemapMove"){var w=d==="treemapZoomToNode"?Cyt(n,f,v,c,u):m?[m.width,m.height]:[c,u],_=o.sort;_&&_!=="asc"&&_!=="desc"&&(_="desc");var S={squareRatio:o.squareRatio,sort:_,leafDepth:o.leafDepth};v.hostTree.clearLayouts();var A={x:0,y:0,width:w[0],height:w[1],area:w[0]*w[1]};v.setLayout(A),JAe(v,S,!1,0),A=v.getLayout(),FK(y,function(D,M){var P=(y[M+1]||v).getValue();D.setLayout(Pe({dataExtent:[P,P],borderWidth:0,upperHeight:0},A))})}var C=n.getData().tree.root;C.setLayout(Dyt(s,m,f),!0),n.setLayoutInfo(s),eCe(C,new pn(-s.x,-s.y,i,a),y,v,0)}};function JAe(n,e,t,r){var i,a;if(!n.isRemoved()){var o=n.getLayout();i=o.width,a=o.height;var s=n.getModel(),l=s.get(QAe),c=s.get(yyt)/2,u=tCe(s),d=Math.max(l,u),h=l-c,f=d-c;n.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:u},!0),i=pI(i-2*h,0),a=pI(a-h-f,0);var m=i*a,v=xyt(n,s,m,e,t,r);if(v.length){var y={x:h,y:f,width:i,height:a},w=fL(i,a),_=1/0,S=[];S.area=0;for(var A=0,C=v.length;A<C;){var D=v[A];S.push(D),S.area+=D.getLayout().area;var M=Ayt(S,w,e.squareRatio);M<=_?(A++,_=M):(S.area-=S.pop().getLayout().area,vde(S,w,y,c,!1),w=fL(y.width,y.height),S.length=S.area=0,_=1/0)}if(S.length&&vde(S,w,y,c,!0),!t){var P=s.get("childrenVisibleMin");P!=null&&m<P&&(t=!0)}for(var A=0,C=v.length;A<C;A++)JAe(v[A],e,t,r+1)}}}function xyt(n,e,t,r,i,a){var o=n.children||[],s=r.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=r.leafDepth!=null&&r.leafDepth<=a;if(i&&!l)return n.viewChildren=[];o=Cr(o,function(f){return!f.isRemoved()}),Tyt(o,s);var c=Eyt(e,o,s);if(c.sum===0)return n.viewChildren=[];if(c.sum=Syt(e,t,c.sum,s,o),c.sum===0)return n.viewChildren=[];for(var u=0,d=o.length;u<d;u++){var h=o[u].getValue()/c.sum*t;o[u].setLayout({area:h})}return l&&(o.length&&n.setLayout({isLeafRoot:!0},!0),o.length=0),n.viewChildren=o,n.setLayout({dataExtent:c.dataExtent},!0),o}function Syt(n,e,t,r,i){if(!r)return t;for(var a=n.get("visibleMin"),o=i.length,s=o,l=o-1;l>=0;l--){var c=i[r==="asc"?o-l-1:l].getValue();c/t*e<a&&(s=l,t-=c)}return r==="asc"?i.splice(0,o-s):i.splice(s,o-s),t}function Tyt(n,e){return e&&n.sort(function(t,r){var i=e==="asc"?t.getValue()-r.getValue():r.getValue()-t.getValue();return i===0?e==="asc"?t.dataIndex-r.dataIndex:r.dataIndex-t.dataIndex:i}),n}function Eyt(n,e,t){for(var r=0,i=0,a=e.length;i<a;i++)r+=e[i].getValue();var o=n.get("visualDimension"),s;return!e||!e.length?s=[NaN,NaN]:o==="value"&&t?(s=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&s.reverse()):(s=[1/0,-1/0],FK(e,function(l){var c=l.getValue(o);c<s[0]&&(s[0]=c),c>s[1]&&(s[1]=c)})),{sum:r,dataExtent:s}}function Ayt(n,e,t){for(var r=0,i=1/0,a=0,o=void 0,s=n.length;a<s;a++)o=n[a].getLayout().area,o&&(o<i&&(i=o),o>r&&(r=o));var l=n.area*n.area,c=e*e*t;return l?pI(c*r/l,l/(c*i)):1/0}function vde(n,e,t,r,i){var a=e===t.width?0:1,o=1-a,s=["x","y"],l=["width","height"],c=t[s[a]],u=e?n.area/e:0;(i||u>t[l[o]])&&(u=t[l[o]]);for(var d=0,h=n.length;d<h;d++){var f=n[d],m={},v=u?f.getLayout().area/u:0,y=m[l[o]]=pI(u-2*r,0),w=t[s[a]]+t[l[a]]-c,_=d===h-1||w<v?w:v,S=m[l[a]]=pI(_-2*r,0);m[s[o]]=t[s[o]]+fL(r,y/2),m[s[a]]=c+fL(r,S/2),c+=_,f.setLayout(m,!0)}t[s[o]]+=u,t[l[o]]-=u}function Cyt(n,e,t,r,i){var a=(e||{}).node,o=[r,i];if(!a||a===t)return o;for(var s,l=r*i,c=l*n.option.zoomToNodeRatio;s=a.parentNode;){for(var u=0,d=s.children,h=0,f=d.length;h<f;h++)u+=d[h].getValue();var m=a.getValue();if(m===0)return o;c*=u/m;var v=s.getModel(),y=v.get(QAe),w=Math.max(y,tCe(v));c+=4*y*y+(3*y+w)*Math.pow(c,.5),c>Ise&&(c=Ise),a=s}c<l&&(c=l);var _=Math.pow(c/l,.5);return[r*_,i*_]}function Dyt(n,e,t){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!t)return r;var i=t.node,a=i.getLayout();if(!a)return r;for(var o=[a.width/2,a.height/2],s=i;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:n.width/2-o[0],y:n.height/2-o[1]}}function eCe(n,e,t,r,i){var a=n.getLayout(),o=t[i],s=o&&o===n;if(!(o&&!s||i===t.length&&n!==r)){n.setLayout({isInView:!0,invisible:!s&&!e.intersect(a),isAboveViewRoot:s},!0);var l=new pn(e.x-a.x,e.y-a.y,e.width,e.height);FK(n.viewChildren||[],function(c){eCe(c,l,t,r,i+1)})}}function tCe(n){return n.get(byt)?n.get(wyt):0}function kyt(n){n.registerSeriesModel(Yvt),n.registerChartView(ayt),n.registerVisual(fyt),n.registerLayout(_yt),Wvt(n)}function Iyt(n){var e=n.findComponents({mainType:"legend"});!e||!e.length||n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getGraph(),a=i.data,o=r.mapArray(r.getName);a.filterSelf(function(s){var l=a.getItemModel(s),c=l.getShallow("category");if(c!=null){ur(c)&&(c=o[c]);for(var u=0;u<e.length;u++)if(!e[u].isSelected(c))return!1}return!0})})}function Myt(n){var e={};n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getData(),a={};r.each(function(o){var s=r.getName(o);a["ec-"+s]=o;var l=r.getItemModel(o),c=l.getModel("itemStyle").getItemStyle();c.fill||(c.fill=t.getColorFromPalette(s,e)),r.setItemVisual(o,"style",c);for(var u=["symbol","symbolSize","symbolKeepAspect"],d=0;d<u.length;d++){var h=l.getShallow(u[d],!0);h!=null&&r.setItemVisual(o,u[d],h)}}),r.count()&&i.each(function(o){var s=i.getItemModel(o),l=s.getShallow("category");if(l!=null){st(l)&&(l=a["ec-"+l]);var c=r.getItemVisual(l,"style"),u=i.ensureUniqueItemVisual(o,"style");Pe(u,c);for(var d=["symbol","symbolSize","symbolKeepAspect"],h=0;h<d.length;h++)i.setItemVisual(o,d[h],r.getItemVisual(l,d[h]))}})})}function ZP(n){return n instanceof Array||(n=[n,n]),n}function Pyt(n){n.eachSeriesByType("graph",function(e){var t=e.getGraph(),r=e.getEdgeData(),i=ZP(e.get("edgeSymbol")),a=ZP(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(o){var s=r.getItemModel(o),l=t.getEdgeByIndex(o),c=ZP(s.getShallow("symbol",!0)),u=ZP(s.getShallow("symbolSize",!0)),d=s.getModel("lineStyle").getLineStyle(),h=r.ensureUniqueItemVisual(o,"style");switch(Pe(h,d),h.stroke){case"source":{var f=l.node1.getVisual("style");h.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");h.stroke=f&&f.fill;break}}c[0]&&l.setVisual("fromSymbol",c[0]),c[1]&&l.setVisual("toSymbol",c[1]),u[0]&&l.setVisual("fromSymbolSize",u[0]),u[1]&&l.setVisual("toSymbolSize",u[1])})})}var q8="-->",X5=function(n){return n.get("autoCurveness")||null},nCe=function(n,e){var t=X5(n),r=20,i=[];if(ur(t))r=t;else if($e(t)){n.__curvenessList=t;return}e>r&&(r=e);var a=r%2?r+2:r+3;i=[];for(var o=0;o<a;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));n.__curvenessList=i},gI=function(n,e,t){var r=[n.id,n.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[t.uid,r,i].join(q8)},rCe=function(n){var e=n.split(q8);return[e[0],e[2],e[1]].join(q8)},Oyt=function(n,e){var t=gI(n.node1,n.node2,e);return e.__edgeMap[t]},Ryt=function(n,e){var t=G8(gI(n.node1,n.node2,e),e),r=G8(gI(n.node2,n.node1,e),e);return t+r},G8=function(n,e){var t=e.__edgeMap;return t[n]?t[n].length:0};function Nyt(n){X5(n)&&(n.__curvenessList=[],n.__edgeMap={},nCe(n))}function Lyt(n,e,t,r){if(X5(t)){var i=gI(n,e,t),a=t.__edgeMap,o=a[rCe(i)];a[i]&&!o?a[i].isForward=!0:o&&a[i]&&(o.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(r)}}function $K(n,e,t,r){var i=X5(e),a=$e(i);if(!i)return null;var o=Oyt(n,e);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===t){s=l;break}var c=Ryt(n,e);nCe(e,c),n.lineStyle=n.lineStyle||{};var u=gI(n.node1,n.node2,e),d=e.__curvenessList,h=a||c%2?0:1;if(o.isForward)return d[h+s];var f=rCe(u),m=G8(f,e),v=d[s+m+h];return r?a?i&&i[0]===0?(m+h)%2?v:-v:((m%2?0:1)+h)%2?v:-v:(m+h)%2?v:-v:d[s+m+h]}function iCe(n){var e=n.coordinateSystem;if(!(e&&e.type!=="view")){var t=n.getGraph();t.eachNode(function(r){var i=r.getModel();r.setLayout([+i.get("x"),+i.get("y")])}),BK(t,n)}}function BK(n,e){n.eachEdge(function(t,r){var i=Cf(t.getModel().get(["lineStyle","curveness"]),-$K(t,e,r,!0),0),a=vg(t.node1.getLayout()),o=vg(t.node2.getLayout()),s=[a,o];+i&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*i,(a[1]+o[1])/2-(o[0]-a[0])*i]),t.setLayout(s)})}function jyt(n,e){n.eachSeriesByType("graph",function(t){var r=t.get("layout"),i=t.coordinateSystem;if(i&&i.type!=="view"){var a=t.getData(),o=[];Z(i.dimensions,function(h){o=o.concat(a.mapDimensionsAll(h))});for(var s=0;s<a.count();s++){for(var l=[],c=!1,u=0;u<o.length;u++){var d=a.get(o[u],s);isNaN(d)||(c=!0),l.push(d)}c?a.setItemLayout(s,i.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}BK(a.graph,t)}else(!r||r==="none")&&iCe(t)})}function QC(n){var e=n.coordinateSystem;if(e.type!=="view")return 1;var t=n.option.nodeScaleRatio,r=e.scaleX,i=e.getZoom(),a=(i-1)*t+1;return a/r}function JC(n){var e=n.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var yde=Math.PI,J6=[];function UK(n,e,t,r){var i=n.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),o=n.getData(),s=o.graph,l=a.width/2+a.x,c=a.height/2+a.y,u=Math.min(a.width,a.height)/2,d=o.count();if(o.setLayout({cx:l,cy:c}),!!d){if(t){var h=i.pointToData(r),f=h[0],m=h[1],v=[f-l,m-c];MT(v,v),UO(v,v,u),t.setLayout([l+v[0],c+v[1]],!0);var y=n.get(["circular","rotateLabel"]);aCe(t,y,l,c)}Fyt[e](n,s,o,u,l,c,d),s.eachEdge(function(w,_){var S=Cf(w.getModel().get(["lineStyle","curveness"]),$K(w,n,_),0),A=vg(w.node1.getLayout()),C=vg(w.node2.getLayout()),D,M=(A[0]+C[0])/2,P=(A[1]+C[1])/2;+S&&(S*=3,D=[l*S+M*(1-S),c*S+P*(1-S)]),w.setLayout([A,C,D])})}}}var Fyt={value:function(n,e,t,r,i,a,o){var s=0,l=t.getSum("value"),c=Math.PI*2/(l||o);e.eachNode(function(u){var d=u.getValue("value"),h=c*(l?d:1)/2;s+=h,u.setLayout([r*Math.cos(s)+i,r*Math.sin(s)+a]),s+=h})},symbolSize:function(n,e,t,r,i,a,o){var s=0;J6.length=o;var l=QC(n);e.eachNode(function(d){var h=JC(d);isNaN(h)&&(h=2),h<0&&(h=0),h*=l;var f=Math.asin(h/2/r);isNaN(f)&&(f=yde/2),J6[d.dataIndex]=f,s+=f*2});var c=(2*yde-s)/o/2,u=0;e.eachNode(function(d){var h=c+J6[d.dataIndex];u+=h,(!d.getLayout()||!d.getLayout().fixed)&&d.setLayout([r*Math.cos(u)+i,r*Math.sin(u)+a]),u+=h})}};function aCe(n,e,t,r){var i=n.getGraphicEl();if(i){var a=n.getModel(),o=a.get(["label","rotate"])||0,s=i.getSymbolPath();if(e){var l=n.getLayout(),c=Math.atan2(l[1]-r,l[0]-t);c<0&&(c=Math.PI*2+c);var u=l[0]<t;u&&(c=c-Math.PI);var d=u?"left":"right";s.setTextConfig({rotation:-c,position:d,origin:"center"});var h=s.ensureState("emphasis");Pe(h.textConfig||(h.textConfig={}),{position:d})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function $yt(n){n.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&UK(e,"symbolSize")})}var aS=PH;function Byt(n,e,t){for(var r=n,i=e,a=t.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],c=t.gravity==null?.1:t.gravity,u=0;u<r.length;u++){var d=r[u];d.p||(d.p=Qw(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),d.pp=vg(d.p),d.edges=null}var h=t.friction==null?.6:t.friction,f=h,m,v;return{warmUp:function(){f=h*.8},setFixed:function(y){r[y].fixed=!0},setUnfixed:function(y){r[y].fixed=!1},beforeStep:function(y){m=y},afterStep:function(y){v=y},step:function(y){m&&m(r,i);for(var w=[],_=r.length,S=0;S<i.length;S++){var A=i[S];if(!A.ignoreForceLayout){var C=A.n1,D=A.n2;Qb(w,D.p,C.p);var M=OH(w)-A.d,P=D.w/(C.w+D.w);isNaN(P)&&(P=0),MT(w,w),!C.fixed&&aS(C.p,C.p,w,P*M*f),!D.fixed&&aS(D.p,D.p,w,-(1-P)*M*f)}}for(var S=0;S<_;S++){var O=r[S];O.fixed||(Qb(w,l,O.p),aS(O.p,O.p,w,c*f))}for(var S=0;S<_;S++)for(var C=r[S],j=S+1;j<_;j++){var D=r[j];Qb(w,D.p,C.p);var M=OH(w);M===0&&(got(w,Math.random()-.5,Math.random()-.5),M=1);var L=(C.rep+D.rep)/M/M;!C.fixed&&aS(C.pp,C.pp,w,L),!D.fixed&&aS(D.pp,D.pp,w,-L)}for(var B=[],S=0;S<_;S++){var O=r[S];O.fixed||(Qb(B,O.p,O.pp),aS(O.p,O.p,B,f),fl(O.pp,O.p))}f=f*.992;var $=f<.01;v&&v(r,i,$),y&&y($)}}}function Uyt(n){n.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},i=e.getGraph(),a=i.data,o=i.edgeData,s=e.getModel("force"),l=s.get("initLayout");e.preservedPoints?a.each(function(S){var A=a.getId(S);a.setItemLayout(S,r[A]||[NaN,NaN])}):!l||l==="none"?iCe(e):l==="circular"&&UK(e,"value");var c=a.getDataExtent("value"),u=o.getDataExtent("value"),d=s.get("repulsion"),h=s.get("edgeLength"),f=$e(d)?d:[d,d],m=$e(h)?h:[h,h];m=[m[1],m[0]];var v=a.mapArray("value",function(S,A){var C=a.getItemLayout(A),D=kr(S,c,f);return isNaN(D)&&(D=(f[0]+f[1])/2),{w:D,rep:D,fixed:a.getItemModel(A).get("fixed"),p:!C||isNaN(C[0])||isNaN(C[1])?null:C}}),y=o.mapArray("value",function(S,A){var C=i.getEdgeByIndex(A),D=kr(S,u,m);isNaN(D)&&(D=(m[0]+m[1])/2);var M=C.getModel(),P=Cf(C.getModel().get(["lineStyle","curveness"]),-$K(C,e,A,!0),0);return{n1:v[C.node1.dataIndex],n2:v[C.node2.dataIndex],d:D,curveness:P,ignoreForceLayout:M.get("ignoreForceLayout")}}),w=t.getBoundingRect(),_=Byt(v,y,{rect:w,gravity:s.get("gravity"),friction:s.get("friction")});_.beforeStep(function(S,A){for(var C=0,D=S.length;C<D;C++)S[C].fixed&&fl(S[C].p,i.getNodeByIndex(C).getLayout())}),_.afterStep(function(S,A,C){for(var D=0,M=S.length;D<M;D++)S[D].fixed||i.getNodeByIndex(D).setLayout(S[D].p),r[a.getId(D)]=S[D].p;for(var D=0,M=A.length;D<M;D++){var P=A[D],O=i.getEdgeByIndex(D),j=P.n1.p,L=P.n2.p,B=O.getLayout();B=B?B.slice():[],B[0]=B[0]||[],B[1]=B[1]||[],fl(B[0],j),fl(B[1],L),+P.curveness&&(B[2]=[(j[0]+L[0])/2-(j[1]-L[1])*P.curveness,(j[1]+L[1])/2-(L[0]-j[0])*P.curveness]),O.setLayout(B)}}),e.forceLayout=_,e.preservedPoints=r,_.step()}else e.forceLayout=null})}function Vyt(n,e,t){var r=Pe(n.getBoxLayoutParams(),{aspect:t});return oo(r,{width:e.getWidth(),height:e.getHeight()})}function zyt(n,e){var t=[];return n.eachSeriesByType("graph",function(r){var i=r.get("coordinateSystem");if(!i||i==="view"){var a=r.getData(),o=a.mapArray(function(y){var w=a.getItemModel(y);return[+w.get("x"),+w.get("y")]}),s=[],l=[];S5(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var c=(l[0]-s[0])/(l[1]-s[1]),u=Vyt(r,e,c);isNaN(c)&&(s=[u.x,u.y],l=[u.x+u.width,u.y+u.height]);var d=l[0]-s[0],h=l[1]-s[1],f=u.width,m=u.height,v=r.coordinateSystem=new I2;v.zoomLimit=r.get("scaleLimit"),v.setBoundingRect(s[0],s[1],d,h),v.setViewRect(u.x,u.y,f,m),v.setCenter(r.get("center"),e),v.setZoom(r.get("zoom")),t.push(v)}}),t}var bde=bo.prototype,eV=g2.prototype,oCe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}();(function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(oCe);function tV(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var Hyt=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new oCe},e.prototype.buildPath=function(t,r){tV(r)?bde.buildPath.call(this,t,r):eV.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return tV(this.shape)?bde.pointAt.call(this,t):eV.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,i=tV(r)?[r.x2-r.x1,r.y2-r.y1]:eV.tangentAt.call(this,t);return MT(i,i)},e}(Mn),nV=["fromSymbol","toSymbol"];function wde(n){return"_"+n+"Type"}function _de(n,e,t){var r=e.getItemVisual(t,n);if(!r||r==="none")return r;var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),o=e.getItemVisual(t,n+"Offset"),s=e.getItemVisual(t,n+"KeepAspect"),l=zT(i),c=n_(o||0,l);return r+l+c+(a||"")+(s||"")}function xde(n,e,t){var r=e.getItemVisual(t,n);if(!(!r||r==="none")){var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),o=e.getItemVisual(t,n+"Offset"),s=e.getItemVisual(t,n+"KeepAspect"),l=zT(i),c=n_(o||0,l),u=za(r,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,s);return u.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,u.name=n,u}}function qyt(n){var e=new Hyt({name:"line",subPixelOptimize:!0});return W8(e.shape,n),e}function W8(n,e){n.x1=e[0][0],n.y1=e[0][1],n.x2=e[1][0],n.y2=e[1][1],n.percent=1;var t=e[2];t?(n.cpx1=t[0],n.cpy1=t[1]):(n.cpx1=NaN,n.cpy1=NaN)}var VK=function(n){Te(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createLine(t,r,i),a}return e.prototype._createLine=function(t,r,i){var a=t.hostModel,o=t.getItemLayout(r),s=qyt(o);s.shape.percent=0,Ni(s,{shape:{percent:1}},a,r),this.add(s),Z(nV,function(l){var c=xde(l,t,r);this.add(c),this[wde(l)]=_de(l,t,r)},this),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,o=this.childOfName("line"),s=t.getItemLayout(r),l={shape:{}};W8(l.shape,s),fr(o,l,a,r),Z(nV,function(c){var u=_de(c,t,r),d=wde(c);if(this[d]!==u){this.remove(this.childOfName(c));var h=xde(c,t,r);this.add(h)}this[d]=u},this),this._updateCommonStl(t,r,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,i){var a=t.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,c=i&&i.selectLineStyle,u=i&&i.labelStatesModels,d=i&&i.emphasisDisabled,h=i&&i.focus,f=i&&i.blurScope;if(!i||t.hasItemOption){var m=t.getItemModel(r),v=m.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=m.getModel(["blur","lineStyle"]).getLineStyle(),c=m.getModel(["select","lineStyle"]).getLineStyle(),d=v.get("disabled"),h=v.get("focus"),f=v.get("blurScope"),u=So(m)}var y=t.getItemVisual(r,"style"),w=y.stroke;o.useStyle(y),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=c,Z(nV,function(D){var M=this.childOfName(D);if(M){M.setColor(w),M.style.opacity=y.opacity;for(var P=0;P<El.length;P++){var O=El[P],j=o.getState(O);if(j){var L=j.style||{},B=M.ensureState(O),$=B.style||(B.style={});L.stroke!=null&&($[M.__isEmptyBrush?"stroke":"fill"]=L.stroke),L.opacity!=null&&($.opacity=L.opacity)}}M.markRedraw()}},this);var _=a.getRawValue(r);ms(this,u,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(D,M){return a.getFormattedLabel(D,M,t.dataType)}},inheritColor:w||"#000",defaultOpacity:y.opacity,defaultText:(_==null?t.getName(r):isFinite(_)?va(_):_)+""});var S=this.getTextContent();if(S){var A=u.normal;S.__align=S.style.align,S.__verticalAlign=S.style.verticalAlign,S.__position=A.get("position")||"middle";var C=A.get("distance");$e(C)||(C=[C,C]),S.__labelDistance=C}this.setTextConfig({position:null,local:!0,inside:!1}),na(this,h,f,d)},e.prototype.highlight=function(){Og(this)},e.prototype.downplay=function(){Rg(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");W8(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),i=t.childOfName("toSymbol"),a=t.getTextContent();if(!r&&!i&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),d=l.pointAt(c),h=Qb([],d,u);MT(h,h);function f(j,L){var B=j.__specifiedRotation;if(B==null){var $=l.tangentAt(L);j.attr("rotation",(L===1?-1:1)*Math.PI/2-Math.atan2($[1],$[0]))}else j.attr("rotation",B)}if(r&&(r.setPosition(u),f(r,0),r.scaleX=r.scaleY=o*c,r.markRedraw()),i&&(i.setPosition(d),f(i,1),i.scaleX=i.scaleY=o*c,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var m=void 0,v=void 0,y=a.__labelDistance,w=y[0]*o,_=y[1]*o,S=c/2,A=l.tangentAt(S),C=[A[1],-A[0]],D=l.pointAt(S);C[1]>0&&(C[0]=-C[0],C[1]=-C[1]);var M=A[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var P=-Math.atan2(A[1],A[0]);d[0]<u[0]&&(P=Math.PI+P),a.rotation=P}var O=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":O=-_,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":O=_,v="top";break;default:O=0,v="middle"}switch(a.__position){case"end":a.x=h[0]*w+d[0],a.y=h[1]*_+d[1],m=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":a.x=-h[0]*w+u[0],a.y=-h[1]*_+u[1],m=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=w*M+u[0],a.y=u[1]+O,m=A[0]<0?"right":"left",a.originX=-w*M,a.originY=-O;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=D[0],a.y=D[1]+O,m="center",a.originY=-O;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-w*M+d[0],a.y=d[1]+O,m=A[0]>=0?"right":"left",a.originX=w*M,a.originY=-O;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||v,align:a.__align||m})}},e}(zt),zK=function(){function n(e){this.group=new zt,this._LineCtor=e||VK}return n.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,i=r.group,a=r._lineData;r._lineData=e,a||i.removeAll();var o=Sde(e);e.diff(a).add(function(s){t._doAdd(e,s,o)}).update(function(s,l){t._doUpdate(a,e,l,s,o)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},n.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Sde(e),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(s){!s.isGroup&&!Gyt(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var a=t.getItemLayout(i);if(rV(a)){var o=new this._LineCtor(t,i,this._seriesScope);o.traverse(r),this.group.add(o),t.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(e){Iy(this._progressiveEls||this.group,e)},n.prototype._doAdd=function(e,t,r){var i=e.getItemLayout(t);if(rV(i)){var a=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,a),this.group.add(a)}},n.prototype._doUpdate=function(e,t,r,i,a){var o=e.getItemGraphicEl(r);if(!rV(t.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(t,i,a):o=new this._LineCtor(t,i,a),t.setItemGraphicEl(i,o),this.group.add(o)},n}();function Gyt(n){return n.animators&&n.animators.length>0}function Sde(n){var e=n.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:So(e)}}function Tde(n){return isNaN(n[0])||isNaN(n[1])}function rV(n){return n&&!Tde(n[0])&&!Tde(n[1])}var iV=[],aV=[],oV=[],oS=Vo,sV=pw,Ede=Math.abs;function Ade(n,e,t){for(var r=n[0],i=n[1],a=n[2],o=1/0,s,l=t*t,c=.1,u=.1;u<=.9;u+=.1){iV[0]=oS(r[0],i[0],a[0],u),iV[1]=oS(r[1],i[1],a[1],u);var d=Ede(sV(iV,e)-l);d<o&&(o=d,s=u)}for(var h=0;h<32;h++){var f=s+c;aV[0]=oS(r[0],i[0],a[0],s),aV[1]=oS(r[1],i[1],a[1],s),oV[0]=oS(r[0],i[0],a[0],f),oV[1]=oS(r[1],i[1],a[1],f);var d=sV(aV,e)-l;if(Ede(d)<.01)break;var m=sV(oV,e)-l;c/=2,d<0?m>=0?s=s+c:s=s-c:m>=0?s=s-c:s=s+c}return s}function lV(n,e){var t=[],r=Wk,i=[[],[],[]],a=[[],[]],o=[];e/=2,n.eachEdge(function(s,l){var c=s.getLayout(),u=s.getVisual("fromSymbol"),d=s.getVisual("toSymbol");c.__original||(c.__original=[vg(c[0]),vg(c[1])],c[2]&&c.__original.push(vg(c[2])));var h=c.__original;if(c[2]!=null){if(fl(i[0],h[0]),fl(i[1],h[2]),fl(i[2],h[1]),u&&u!=="none"){var f=JC(s.node1),m=Ade(i,h[0],f*e);r(i[0][0],i[1][0],i[2][0],m,t),i[0][0]=t[3],i[1][0]=t[4],r(i[0][1],i[1][1],i[2][1],m,t),i[0][1]=t[3],i[1][1]=t[4]}if(d&&d!=="none"){var f=JC(s.node2),m=Ade(i,h[1],f*e);r(i[0][0],i[1][0],i[2][0],m,t),i[1][0]=t[1],i[2][0]=t[2],r(i[0][1],i[1][1],i[2][1],m,t),i[1][1]=t[1],i[2][1]=t[2]}fl(c[0],i[0]),fl(c[1],i[2]),fl(c[2],i[1])}else{if(fl(a[0],h[0]),fl(a[1],h[1]),Qb(o,a[1],a[0]),MT(o,o),u&&u!=="none"){var f=JC(s.node1);PH(a[0],a[0],o,f*e)}if(d&&d!=="none"){var f=JC(s.node2);PH(a[1],a[1],o,-f*e)}fl(c[0],a[0]),fl(c[1],a[1])}})}function Cde(n){return n.type==="view"}var Wyt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){var i=new T2,a=new zK,o=this.group;this._controller=new k2(r.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(a.group),this._symbolDraw=i,this._lineDraw=a,this._firstRender=!0},e.prototype.render=function(t,r,i){var a=this,o=t.coordinateSystem;this._model=t;var s=this._symbolDraw,l=this._lineDraw,c=this.group;if(Cde(o)){var u={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?c.attr(u):fr(c,u,t)}lV(t.getGraph(),QC(t));var d=t.getData();s.updateData(d);var h=t.getEdgeData();l.updateData(h),this._updateNodeAndLinkScale(),this._updateController(t,r,i),clearTimeout(this._layoutTimeout);var f=t.forceLayout,m=t.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,m);var v=t.get("layout");d.graph.eachNode(function(S){var A=S.dataIndex,C=S.getGraphicEl(),D=S.getModel();if(C){C.off("drag").off("dragend");var M=D.get("draggable");M&&C.on("drag",function(O){switch(v){case"force":f.warmUp(),!a._layouting&&a._startForceLayoutIteration(f,m),f.setFixed(A),d.setItemLayout(A,[C.x,C.y]);break;case"circular":d.setItemLayout(A,[C.x,C.y]),S.setLayout({fixed:!0},!0),UK(t,"symbolSize",S,[O.offsetX,O.offsetY]),a.updateLayout(t);break;case"none":default:d.setItemLayout(A,[C.x,C.y]),BK(t.getGraph(),t),a.updateLayout(t);break}}).on("dragend",function(){f&&f.setUnfixed(A)}),C.setDraggable(M,!!D.get("cursor"));var P=D.get(["emphasis","focus"]);P==="adjacency"&&(Wt(C).focus=S.getAdjacentDataIndices())}}),d.graph.eachEdge(function(S){var A=S.getGraphicEl(),C=S.getModel().get(["emphasis","focus"]);A&&C==="adjacency"&&(Wt(A).focus={edge:[S.dataIndex],node:[S.node1.dataIndex,S.node2.dataIndex]})});var y=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),w=d.getLayout("cx"),_=d.getLayout("cy");d.graph.eachNode(function(S){aCe(S,y,w,_)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,r){var i=this;(function a(){t.step(function(o){i.updateLayout(i._model),(i._layouting=!o)&&(r?i._layoutTimeout=setTimeout(a,16):a())})})()},e.prototype._updateController=function(t,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(c,u,d){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(u,d)&&!W5(c,i,t)}),!Cde(t.coordinateSystem)){o.disable();return}o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){MK(s,c.dx,c.dy),i.dispatchAction({seriesId:t.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){PK(s,c.scale,c.originX,c.originY),i.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),a._updateNodeAndLinkScale(),lV(t.getGraph(),QC(t)),a._lineDraw.updateLayout(),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),i=QC(t);r.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(i)})},e.prototype.updateLayout=function(t){lV(t.getGraph(),QC(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(ti);function sS(n){return"_EC_"+n}var Yyt=function(){function n(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var r=this._nodesMap;if(!r[sS(e)]){var i=new Ob(e,t);return i.hostGraph=this,this.nodes.push(i),r[sS(e)]=i,i}},n.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},n.prototype.getNodeById=function(e){return this._nodesMap[sS(e)]},n.prototype.addEdge=function(e,t,r){var i=this._nodesMap,a=this._edgesMap;if(ur(e)&&(e=this.nodes[e]),ur(t)&&(t=this.nodes[t]),e instanceof Ob||(e=i[sS(e)]),t instanceof Ob||(t=i[sS(t)]),!(!e||!t)){var o=e.id+"-"+t.id,s=new sCe(e,t,r);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),a[o]=s,s}},n.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},n.prototype.getEdge=function(e,t){e instanceof Ob&&(e=e.id),t instanceof Ob&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},n.prototype.eachNode=function(e,t){for(var r=this.nodes,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&e.call(t,r[a],a)},n.prototype.eachEdge=function(e,t){for(var r=this.edges,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0&&e.call(t,r[a],a)},n.prototype.breadthFirstTraverse=function(e,t,r,i){if(t instanceof Ob||(t=this._nodesMap[sS(t)]),!!t){for(var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(i,t,null))for(var s=[t];s.length;)for(var l=s.shift(),c=l[a],o=0;o<c.length;o++){var u=c[o],d=u.node1===l?u.node2:u.node1;if(!d.__visited){if(e.call(i,d,l))return;s.push(d),d.__visited=!0}}}},n.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,i=this.edges,a=0,o=r.length;a<o;a++)r[a].dataIndex=-1;for(var a=0,o=e.count();a<o;a++)r[e.getRawIndex(a)].dataIndex=a;t.filterSelf(function(s){var l=i[t.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)i[t.getRawIndex(a)].dataIndex=a},n.prototype.clone=function(){for(var e=new n(this._directed),t=this.nodes,r=this.edges,i=0;i<t.length;i++)e.addNode(t[i].id,t[i].dataIndex);for(var i=0;i<r.length;i++){var a=r[i];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},n}(),Ob=function(){function n(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},n.prototype.getTrajectoryDataIndices=function(){for(var e=_t(),t=_t(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var a=[i.node1],o=[i.node2],s=0;s<a.length;){var l=a[s];s++,t.set(l.dataIndex,!0);for(var c=0;c<l.inEdges.length;c++)e.set(l.inEdges[c].dataIndex,!0),a.push(l.inEdges[c].node1)}for(s=0;s<o.length;){var u=o[s];s++,t.set(u.dataIndex,!0);for(var c=0;c<u.outEdges.length;c++)e.set(u.outEdges[c].dataIndex,!0),o.push(u.outEdges[c].node2)}}}return{edge:e.keys(),node:t.keys()}},n}(),sCe=function(){function n(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=r??-1}return n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n.prototype.getTrajectoryDataIndices=function(){var e=_t(),t=_t();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],a=0;a<r.length;){var o=r[a];a++,t.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)e.set(o.inEdges[s].dataIndex,!0),r.push(o.inEdges[s].node1)}for(a=0;a<i.length;){var l=i[a];a++,t.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:e.keys(),node:t.keys()}},n}();function lCe(n,e){return{getValue:function(t){var r=this[n][e];return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,r){this.dataIndex>=0&&this[n][e].setItemVisual(this.dataIndex,t,r)},getVisual:function(t){return this[n][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,r){this.dataIndex>=0&&this[n][e].setItemLayout(this.dataIndex,t,r)},getLayout:function(){return this[n][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][e].getRawIndex(this.dataIndex)}}}Ha(Ob,lCe("hostGraph","data"));Ha(sCe,lCe("hostGraph","edgeData"));function cCe(n,e,t,r,i){for(var a=new Yyt(r),o=0;o<n.length;o++)a.addNode(Ho(n[o].id,n[o].name,o),o);for(var s=[],l=[],c=0,o=0;o<e.length;o++){var u=e[o],d=u.source,h=u.target;a.addEdge(d,h,c)&&(l.push(u),s.push(Ho(ro(u.id,null),d+" > "+h)),c++)}var f=t.get("coordinateSystem"),m;if(f==="cartesian2d"||f==="polar")m=Zg(n,t);else{var v=b2.get(f),y=v?v.dimensions||[]:[];_n(y,"value")<0&&y.concat(["value"]);var w=_2(n,{coordDimensions:y,encodeDefine:t.getEncode()}).dimensions;m=new xl(w,t),m.initData(n)}var _=new xl(["value"],t);return _.initData(l,s),i&&i(m,_),HAe({mainData:m,struct:a,structAttr:"graph",datas:{node:m,edge:_},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var Kyt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new D2(i,i),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){n.prototype.mergeDefaultAndTheme.apply(this,arguments),jw(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],o=this;if(a&&i){Nyt(this);var s=cCe(a,i,this,!0,l);return Z(s.edges,function(c){Lyt(c.node1,c.node2,this,c.dataIndex)},this),s.data}function l(c,u){c.wrapMethod("getItemModel",function(m){var v=o._categoriesModels,y=m.getShallow("category"),w=v[y];return w&&(w.parentModel=m.parentModel,m.parentModel=w),m});var d=Ir.prototype.getModel;function h(m,v){var y=d.call(this,m,v);return y.resolveParentPath=f,y}u.wrapMethod("getItemModel",function(m){return m.resolveParentPath=f,m.getModel=h,m});function f(m){if(m&&(m[0]==="label"||m[1]==="label")){var v=m.slice();return m[0]==="label"?v[0]="edgeLabel":m[1]==="label"&&(v[1]="edgeLabel"),v}return m}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,r,i){if(i==="edge"){var a=this.getData(),o=this.getDataParams(t,i),s=a.graph.getEdgeByIndex(t),l=a.getName(s.node1.dataIndex),c=a.getName(s.node2.dataIndex),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),To("nameValue",{name:u.join(" > "),value:o.value,noValue:o.value==null})}var d=PTe({series:this,dataIndex:t,multipleSeries:r});return d},e.prototype._updateCategoriesData=function(){var t=Ue(this.option.categories||[],function(i){return i.value!=null?i:Pe({value:0},i)}),r=new xl(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(i){return r.getItemModel(i)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(bi),Xyt={type:"graphRoam",event:"graphRoam",update:"none"};function Zyt(n){n.registerChartView(Wyt),n.registerSeriesModel(Kyt),n.registerProcessor(Iyt),n.registerVisual(Myt),n.registerVisual(Pyt),n.registerLayout(jyt),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,$yt),n.registerLayout(Uyt),n.registerCoordinateSystem("graphView",{dimensions:I2.dimensions,create:zyt}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Ca),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Ca),n.registerAction(Xyt,function(e,t,r){t.eachComponent({mainType:"series",query:e},function(i){var a=i.coordinateSystem,o=RK(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}var Qyt=function(){function n(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return n}(),Jyt=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new Qyt},e.prototype.buildPath=function(t,r){var i=Math.cos,a=Math.sin,o=r.r,s=r.width,l=r.angle,c=r.x-i(l)*s*(s>=o/3?1:2),u=r.y-a(l)*s*(s>=o/3?1:2);l=r.angle-Math.PI/2,t.moveTo(c,u),t.lineTo(r.x+i(l)*s,r.y+a(l)*s),t.lineTo(r.x+i(r.angle)*o,r.y+a(r.angle)*o),t.lineTo(r.x-i(l)*s,r.y-a(l)*s),t.lineTo(c,u)},e}(Mn);function e0t(n,e){var t=n.get("center"),r=e.getWidth(),i=e.getHeight(),a=Math.min(r,i),o=Je(t[0],e.getWidth()),s=Je(t[1],e.getHeight()),l=Je(n.get("radius"),a/2);return{cx:o,cy:s,r:l}}function QP(n,e){var t=n==null?"":n+"";return e&&(st(e)?t=e.replace("{value}",t):kt(e)&&(t=e(n))),t}var t0t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeAll();var a=t.get(["axisLine","lineStyle","color"]),o=e0t(t,i);this._renderMain(t,r,i,a,o),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,r,i,a,o){var s=this.group,l=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,u=-t.get("endAngle")/180*Math.PI,d=t.getModel("axisLine"),h=d.get("roundCap"),f=h?lL:Al,m=d.get("show"),v=d.getModel("lineStyle"),y=v.get("width"),w=[c,u];LY(w,!l),c=w[0],u=w[1];for(var _=u-c,S=c,A=[],C=0;m&&C<a.length;C++){var D=Math.min(Math.max(a[C][0],0),1);u=c+_*D;var M=new f({shape:{startAngle:S,endAngle:u,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-y,r:o.r},silent:!0});M.setStyle({fill:a[C][1]}),M.setStyle(v.getLineStyle(["color","width"])),A.push(M),S=u}A.reverse(),Z(A,function(O){return s.add(O)});var P=function(O){if(O<=0)return a[0][1];var j;for(j=0;j<a.length;j++)if(a[j][0]>=O&&(j===0?0:a[j-1][0])<O)return a[j][1];return a[j-1][1]};this._renderTicks(t,r,i,P,o,c,u,l,y),this._renderTitleAndDetail(t,r,i,P,o),this._renderAnchor(t,o),this._renderPointer(t,r,i,P,o,c,u,l,y)},e.prototype._renderTicks=function(t,r,i,a,o,s,l,c,u){for(var d=this.group,h=o.cx,f=o.cy,m=o.r,v=+t.get("min"),y=+t.get("max"),w=t.getModel("splitLine"),_=t.getModel("axisTick"),S=t.getModel("axisLabel"),A=t.get("splitNumber"),C=_.get("splitNumber"),D=Je(w.get("length"),m),M=Je(_.get("length"),m),P=s,O=(l-s)/A,j=O/C,L=w.getModel("lineStyle").getLineStyle(),B=_.getModel("lineStyle").getLineStyle(),$=w.get("distance"),Y,q,W=0;W<=A;W++){if(Y=Math.cos(P),q=Math.sin(P),w.get("show")){var X=$?$+u:u,te=new bo({shape:{x1:Y*(m-X)+h,y1:q*(m-X)+f,x2:Y*(m-D-X)+h,y2:q*(m-D-X)+f},style:L,silent:!0});L.stroke==="auto"&&te.setStyle({stroke:a(W/A)}),d.add(te)}if(S.get("show")){var X=S.get("distance")+$,re=QP(va(W/A*(y-v)+v),S.get("formatter")),z=a(W/A),oe=Y*(m-D-X)+h,le=q*(m-D-X)+f,ee=S.get("rotate"),be=0;ee==="radial"?(be=-P+2*Math.PI,be>Math.PI/2&&(be+=Math.PI)):ee==="tangential"?be=-P-Math.PI/2:ur(ee)&&(be=ee*Math.PI/180),be===0?d.add(new sr({style:vi(S,{text:re,x:oe,y:le,verticalAlign:q<-.8?"top":q>.8?"bottom":"middle",align:Y<-.4?"left":Y>.4?"right":"center"},{inheritColor:z}),silent:!0})):d.add(new sr({style:vi(S,{text:re,x:oe,y:le,verticalAlign:"middle",align:"center"},{inheritColor:z}),silent:!0,originX:oe,originY:le,rotation:be}))}if(_.get("show")&&W!==A){var X=_.get("distance");X=X?X+u:u;for(var he=0;he<=C;he++){Y=Math.cos(P),q=Math.sin(P);var pe=new bo({shape:{x1:Y*(m-X)+h,y1:q*(m-X)+f,x2:Y*(m-M-X)+h,y2:q*(m-M-X)+f},silent:!0,style:B});B.stroke==="auto"&&pe.setStyle({stroke:a((W+he/C)/A)}),d.add(pe),P+=j}P-=j}else P+=O}},e.prototype._renderPointer=function(t,r,i,a,o,s,l,c,u){var d=this.group,h=this._data,f=this._progressEls,m=[],v=t.get(["pointer","show"]),y=t.getModel("progress"),w=y.get("show"),_=t.getData(),S=_.mapDimension("value"),A=+t.get("min"),C=+t.get("max"),D=[A,C],M=[s,l];function P(j,L){var B=_.getItemModel(j),$=B.getModel("pointer"),Y=Je($.get("width"),o.r),q=Je($.get("length"),o.r),W=t.get(["pointer","icon"]),X=$.get("offsetCenter"),te=Je(X[0],o.r),re=Je(X[1],o.r),z=$.get("keepAspect"),oe;return W?oe=za(W,te-Y/2,re-q,Y,q,null,z):oe=new Jyt({shape:{angle:-Math.PI/2,width:Y,r:q,x:te,y:re}}),oe.rotation=-(L+Math.PI/2),oe.x=o.cx,oe.y=o.cy,oe}function O(j,L){var B=y.get("roundCap"),$=B?lL:Al,Y=y.get("overlap"),q=Y?y.get("width"):u/_.count(),W=Y?o.r-q:o.r-(j+1)*q,X=Y?o.r:o.r-j*q,te=new $({shape:{startAngle:s,endAngle:L,cx:o.cx,cy:o.cy,clockwise:c,r0:W,r:X}});return Y&&(te.z2=kr(_.get(S,j),[A,C],[100,0],!0)),te}(w||v)&&(_.diff(h).add(function(j){var L=_.get(S,j);if(v){var B=P(j,s);Ni(B,{rotation:-((isNaN(+L)?M[0]:kr(L,D,M,!0))+Math.PI/2)},t),d.add(B),_.setItemGraphicEl(j,B)}if(w){var $=O(j,s),Y=y.get("clip");Ni($,{shape:{endAngle:kr(L,D,M,Y)}},t),d.add($),i8(t.seriesIndex,_.dataType,j,$),m[j]=$}}).update(function(j,L){var B=_.get(S,j);if(v){var $=h.getItemGraphicEl(L),Y=$?$.rotation:s,q=P(j,Y);q.rotation=Y,fr(q,{rotation:-((isNaN(+B)?M[0]:kr(B,D,M,!0))+Math.PI/2)},t),d.add(q),_.setItemGraphicEl(j,q)}if(w){var W=f[L],X=W?W.shape.endAngle:s,te=O(j,X),re=y.get("clip");fr(te,{shape:{endAngle:kr(B,D,M,re)}},t),d.add(te),i8(t.seriesIndex,_.dataType,j,te),m[j]=te}}).execute(),_.each(function(j){var L=_.getItemModel(j),B=L.getModel("emphasis"),$=B.get("focus"),Y=B.get("blurScope"),q=B.get("disabled");if(v){var W=_.getItemGraphicEl(j),X=_.getItemVisual(j,"style"),te=X.fill;if(W instanceof Yo){var re=W.style;W.useStyle(Pe({image:re.image,x:re.x,y:re.y,width:re.width,height:re.height},X))}else W.useStyle(X),W.type!=="pointer"&&W.setColor(te);W.setStyle(L.getModel(["pointer","itemStyle"]).getItemStyle()),W.style.fill==="auto"&&W.setStyle("fill",a(kr(_.get(S,j),D,[0,1],!0))),W.z2EmphasisLift=0,gs(W,L),na(W,$,Y,q)}if(w){var z=m[j];z.useStyle(_.getItemVisual(j,"style")),z.setStyle(L.getModel(["progress","itemStyle"]).getItemStyle()),z.z2EmphasisLift=0,gs(z,L),na(z,$,Y,q)}}),this._progressEls=m)},e.prototype._renderAnchor=function(t,r){var i=t.getModel("anchor"),a=i.get("show");if(a){var o=i.get("size"),s=i.get("icon"),l=i.get("offsetCenter"),c=i.get("keepAspect"),u=za(s,r.cx-o/2+Je(l[0],r.r),r.cy-o/2+Je(l[1],r.r),o,o,null,c);u.z2=i.get("showAbove")?1:0,u.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(u)}},e.prototype._renderTitleAndDetail=function(t,r,i,a,o){var s=this,l=t.getData(),c=l.mapDimension("value"),u=+t.get("min"),d=+t.get("max"),h=new zt,f=[],m=[],v=t.isAnimationEnabled(),y=t.get(["pointer","showAbove"]);l.diff(this._data).add(function(w){f[w]=new sr({silent:!0}),m[w]=new sr({silent:!0})}).update(function(w,_){f[w]=s._titleEls[_],m[w]=s._detailEls[_]}).execute(),l.each(function(w){var _=l.getItemModel(w),S=l.get(c,w),A=new zt,C=a(kr(S,[u,d],[0,1],!0)),D=_.getModel("title");if(D.get("show")){var M=D.get("offsetCenter"),P=o.cx+Je(M[0],o.r),O=o.cy+Je(M[1],o.r),j=f[w];j.attr({z2:y?0:2,style:vi(D,{x:P,y:O,text:l.getName(w),align:"center",verticalAlign:"middle"},{inheritColor:C})}),A.add(j)}var L=_.getModel("detail");if(L.get("show")){var B=L.get("offsetCenter"),$=o.cx+Je(B[0],o.r),Y=o.cy+Je(B[1],o.r),q=Je(L.get("width"),o.r),W=Je(L.get("height"),o.r),X=t.get(["progress","show"])?l.getItemVisual(w,"style").fill:C,j=m[w],te=L.get("formatter");j.attr({z2:y?0:2,style:vi(L,{x:$,y:Y,text:QP(S,te),width:isNaN(q)?null:q,height:isNaN(W)?null:W,align:"center",verticalAlign:"middle"},{inheritColor:X})}),L1e(j,{normal:L},S,function(z){return QP(z,te)}),v&&j1e(j,w,l,t,{getFormattedLabel:function(z,oe,le,ee,be,he){return QP(he?he.interpolatedValue:S,te)}}),A.add(j)}h.add(A)}),this.group.add(h),this._titleEls=f,this._detailEls=m},e.type="gauge",e}(ti),n0t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,r){return qT(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(bi);function r0t(n){n.registerChartView(t0t),n.registerSeriesModel(n0t)}var i0t=["itemStyle","opacity"],a0t=function(n){Te(e,n);function e(t,r){var i=n.call(this)||this,a=i,o=new Dl,s=new sr;return a.setTextContent(s),i.setTextGuideLine(o),i.updateData(t,r,!0),i}return e.prototype.updateData=function(t,r,i){var a=this,o=t.hostModel,s=t.getItemModel(r),l=t.getItemLayout(r),c=s.getModel("emphasis"),u=s.get(i0t);u=u??1,i||uh(a),a.useStyle(t.getItemVisual(r,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,Ni(a,{style:{opacity:u}},o,r)):fr(a,{style:{opacity:u},shape:{points:l.points}},o,r),gs(a,s),this._updateLabel(t,r),na(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r){var i=this,a=this.getTextGuideLine(),o=i.getTextContent(),s=t.hostModel,l=t.getItemModel(r),c=t.getItemLayout(r),u=c.label,d=t.getItemVisual(r,"style"),h=d.fill;ms(o,So(l),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:d.opacity,defaultText:t.getName(r)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}}),i.setTextConfig({local:!0,inside:!!u.inside,insideStroke:h,outsideFill:h});var f=u.linePoints;a.setShape({points:f}),i.textGuideLineConfig={anchor:f?new ln(f[0][0],f[0][1]):null},fr(o,{style:{x:u.x,y:u.y}},s,r),o.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),wK(i,_K(l),{stroke:h})},e}(Cl),o0t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var c=new a0t(a,l);a.setItemGraphicEl(l,c),s.add(c)}).update(function(l,c){var u=o.getItemGraphicEl(c);u.updateData(a,l),s.add(u),a.setItemGraphicEl(l,u)}).remove(function(l){var c=o.getItemGraphicEl(l);eI(c,t,l)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(ti),s0t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new D2(dt(this.getData,this),dt(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,r){return qT(this,{coordDimensions:["value"],encodeDefaulter:en(JY,this)})},e.prototype._defaultLabelLine=function(t){jw(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var r=this.getData(),i=n.prototype.getDataParams.call(this,t),a=r.mapDimension("value"),o=r.getSum(a);return i.percent=o?+(r.get(a,t)/o*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(bi);function l0t(n,e){return oo(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function c0t(n,e){for(var t=n.mapDimension("value"),r=n.mapArray(t,function(l){return l}),i=[],a=e==="ascending",o=0,s=n.count();o<s;o++)i[o]=o;return kt(e)?i.sort(e):e!=="none"&&i.sort(function(l,c){return a?r[l]-r[c]:r[c]-r[l]}),i}function u0t(n){var e=n.hostModel,t=e.get("orient");n.each(function(r){var i=n.getItemModel(r),a=i.getModel("label"),o=a.get("position"),s=i.getModel("labelLine"),l=n.getItemLayout(r),c=l.points,u=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",d,h,f,m;if(u)o==="insideLeft"?(h=(c[0][0]+c[3][0])/2+5,f=(c[0][1]+c[3][1])/2,d="left"):o==="insideRight"?(h=(c[1][0]+c[2][0])/2-5,f=(c[1][1]+c[2][1])/2,d="right"):(h=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,f=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,d="center"),m=[[h,f],[h,f]];else{var v=void 0,y=void 0,w=void 0,_=void 0,S=s.get("length");o==="left"?(v=(c[3][0]+c[0][0])/2,y=(c[3][1]+c[0][1])/2,w=v-S,h=w-5,d="right"):o==="right"?(v=(c[1][0]+c[2][0])/2,y=(c[1][1]+c[2][1])/2,w=v+S,h=w+5,d="left"):o==="top"?(v=(c[3][0]+c[0][0])/2,y=(c[3][1]+c[0][1])/2,_=y-S,f=_-5,d="center"):o==="bottom"?(v=(c[1][0]+c[2][0])/2,y=(c[1][1]+c[2][1])/2,_=y+S,f=_+5,d="center"):o==="rightTop"?(v=t==="horizontal"?c[3][0]:c[1][0],y=t==="horizontal"?c[3][1]:c[1][1],t==="horizontal"?(_=y-S,f=_-5,d="center"):(w=v+S,h=w+5,d="top")):o==="rightBottom"?(v=c[2][0],y=c[2][1],t==="horizontal"?(_=y+S,f=_+5,d="center"):(w=v+S,h=w+5,d="bottom")):o==="leftTop"?(v=c[0][0],y=t==="horizontal"?c[0][1]:c[1][1],t==="horizontal"?(_=y-S,f=_-5,d="center"):(w=v-S,h=w-5,d="right")):o==="leftBottom"?(v=t==="horizontal"?c[1][0]:c[3][0],y=t==="horizontal"?c[1][1]:c[2][1],t==="horizontal"?(_=y+S,f=_+5,d="center"):(w=v-S,h=w-5,d="right")):(v=(c[1][0]+c[2][0])/2,y=(c[1][1]+c[2][1])/2,t==="horizontal"?(_=y+S,f=_+5,d="center"):(w=v+S,h=w+5,d="left")),t==="horizontal"?(w=v,h=w):(_=y,f=_),m=[[v,y],[w,_]]}l.label={linePoints:m,x:h,y:f,verticalAlign:"middle",textAlign:d,inside:u}})}function d0t(n,e){n.eachSeriesByType("funnel",function(t){var r=t.getData(),i=r.mapDimension("value"),a=t.get("sort"),o=l0t(t,e),s=t.get("orient"),l=o.width,c=o.height,u=c0t(r,a),d=o.x,h=o.y,f=s==="horizontal"?[Je(t.get("minSize"),c),Je(t.get("maxSize"),c)]:[Je(t.get("minSize"),l),Je(t.get("maxSize"),l)],m=r.getDataExtent(i),v=t.get("min"),y=t.get("max");v==null&&(v=Math.min(m[0],0)),y==null&&(y=m[1]);var w=t.get("funnelAlign"),_=t.get("gap"),S=s==="horizontal"?l:c,A=(S-_*(r.count()-1))/r.count(),C=function(Y,q){if(s==="horizontal"){var W=r.get(i,Y)||0,X=kr(W,[v,y],f,!0),te=void 0;switch(w){case"top":te=h;break;case"center":te=h+(c-X)/2;break;case"bottom":te=h+(c-X);break}return[[q,te],[q,te+X]]}var re=r.get(i,Y)||0,z=kr(re,[v,y],f,!0),oe;switch(w){case"left":oe=d;break;case"center":oe=d+(l-z)/2;break;case"right":oe=d+l-z;break}return[[oe,q],[oe+z,q]]};a==="ascending"&&(A=-A,_=-_,s==="horizontal"?d+=l:h+=c,u=u.reverse());for(var D=0;D<u.length;D++){var M=u[D],P=u[D+1],O=r.getItemModel(M);if(s==="horizontal"){var j=O.get(["itemStyle","width"]);j==null?j=A:(j=Je(j,l),a==="ascending"&&(j=-j));var L=C(M,d),B=C(P,d+j);d+=j+_,r.setItemLayout(M,{points:L.concat(B.slice().reverse())})}else{var $=O.get(["itemStyle","height"]);$==null?$=A:($=Je($,c),a==="ascending"&&($=-$));var L=C(M,h),B=C(P,h+$);h+=$+_,r.setItemLayout(M,{points:L.concat(B.slice().reverse())})}}u0t(r)})}function h0t(n){n.registerChartView(o0t),n.registerSeriesModel(s0t),n.registerLayout(d0t),n.registerProcessor(C2("funnel"))}var f0t=.3,p0t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new zt,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var o=this._dataGroup,s=t.getData(),l=this._data,c=t.coordinateSystem,u=c.dimensions,d=kde(t);s.diff(l).add(h).update(f).remove(m).execute();function h(y){var w=Dde(s,o,y,u,c);cV(w,s,y,d)}function f(y,w){var _=l.getItemGraphicEl(w),S=uCe(s,y,u,c);s.setItemGraphicEl(y,_),fr(_,{shape:{points:S}},t,y),uh(_),cV(_,s,y,d)}function m(y){var w=l.getItemGraphicEl(y);o.remove(w)}if(!this._initialized){this._initialized=!0;var v=g0t(c,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(v)}this._data=s},e.prototype.incrementalPrepareRender=function(t,r,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,r,i){for(var a=r.getData(),o=r.coordinateSystem,s=o.dimensions,l=kde(r),c=this._progressiveEls=[],u=t.start;u<t.end;u++){var d=Dde(a,this._dataGroup,u,s,o);d.incremental=!0,cV(d,a,u,l),c.push(d)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(ti);function g0t(n,e,t){var r=n.model,i=n.getRect(),a=new er({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o=r.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),Ni(a,{shape:{width:i.width,height:i.height}},e,t),a}function uCe(n,e,t,r){for(var i=[],a=0;a<t.length;a++){var o=t[a],s=n.get(n.mapDimension(o),e);m0t(s,r.getAxis(o).type)||i.push(r.dataToPoint(s,o))}return i}function Dde(n,e,t,r,i){var a=uCe(n,t,r,i),o=new Dl({shape:{points:a},z2:10});return e.add(o),n.setItemGraphicEl(t,o),o}function kde(n){var e=n.get("smooth",!0);return e===!0&&(e=f0t),e=Pg(e),qk(e)&&(e=0),{smooth:e}}function cV(n,e,t,r){n.useStyle(e.getItemVisual(t,"style")),n.style.fill=null,n.setShape("smooth",r.smooth);var i=e.getItemModel(t),a=i.getModel("emphasis");gs(n,i,"lineStyle"),na(n,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function m0t(n,e){return e==="category"?n==null:n==null||isNaN(n)}var v0t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{useEncodeDefaulter:dt(y0t,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var r=this.coordinateSystem,i=this.getData(),a=[];return r.eachActiveState(i,function(o,s){t===o&&a.push(i.getRawIndex(s))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(bi);function y0t(n){var e=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(e){var t={};return Z(e.dimensions,function(r){var i=b0t(r);t[r]=i}),t}}function b0t(n){return+n.replace("dim","")}var w0t=["lineStyle","opacity"],_0t={seriesType:"parallel",reset:function(n,e){var t=n.coordinateSystem,r={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(i,a){t.eachActiveState(a,function(o,s){var l=r[o];if(o==="normal"&&a.hasItemOption){var c=a.getItemModel(s).get(w0t,!0);c!=null&&(l=c)}var u=a.ensureUniqueItemVisual(s,"style");u.opacity=l},i.start,i.end)}}}};function x0t(n){S0t(n),T0t(n)}function S0t(n){if(!n.parallel){var e=!1;Z(n.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(n.parallel=[{}])}}function T0t(n){var e=Wr(n.parallelAxis);Z(e,function(t){if(jt(t)){var r=t.parallelIndex||0,i=Wr(n.parallel)[r];i&&i.parallelAxisDefault&&an(t,i.parallelAxisDefault,!1)}})}var E0t=5,A0t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this._model=t,this._api=i,this._handlers||(this._handlers={},Z(C0t,function(a,o){i.getZr().on(o,this._handlers[o]=dt(a,this))},this)),VT(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,r){iI(this,"_throttledDispatchExpand"),Z(this._handlers,function(i,a){r.getZr().off(a,i)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Pe({type:"parallelAxisExpand"},t))},e.type="parallel",e}(Yi),C0t={mousedown:function(n){uV(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var e=this._mouseDownPoint;if(uV(this,"click")&&e){var t=[n.offsetX,n.offsetY],r=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(r>E0t)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!(this._mouseDownPoint||!uV(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),r=t.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function uV(n,e){var t=n._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var D0t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var r=this.option;t&&an(r,t,!0),this._initDimensions()},e.prototype.contains=function(t,r){var i=t.get("parallelIndex");return i!=null&&r.getComponent("parallel",i)===this},e.prototype.setAxisExpand=function(t){Z(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){t.hasOwnProperty(r)&&(this.option[r]=t[r])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],r=this.parallelAxisIndex=[],i=Cr(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);Z(i,function(a){t.push("dim"+a.get("dim")),r.push(a.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(Un),k0t=function(n){Te(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.type=a||"value",s.axisIndex=o,s}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(fh);function o_(n,e,t,r,i,a){n=n||0;var o=t[1]-t[0];if(i!=null&&(i=lS(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=lS(s,[0,o]),i=a=lS(s,[i,a]),r=0}e[0]=lS(e[0],t),e[1]=lS(e[1],t);var l=dV(e,r);e[r]+=n;var c=i||0,u=t.slice();l.sign<0?u[0]+=c:u[1]-=c,e[r]=lS(e[r],u);var d;return d=dV(e,r),i!=null&&(d.sign!==l.sign||d.span<i)&&(e[1-r]=e[r]+l.sign*i),d=dV(e,r),a!=null&&d.span>a&&(e[1-r]=e[r]+d.sign*a),e}function dV(n,e){var t=n[e]-n[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function lS(n,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,n))}var hV=Z,dCe=Math.min,hCe=Math.max,Ide=Math.floor,I0t=Math.ceil,Mde=va,M0t=Math.PI,P0t=function(){function n(e,t,r){this.type="parallel",this._axesMap=_t(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=e.dimensions,a=e.parallelAxisIndex;hV(i,function(o,s){var l=a[s],c=t.getComponent("parallelAxis",l),u=this._axesMap.set(o,new k0t(o,q5(c),[0,0],c.get("type"),l)),d=u.type==="category";u.onBand=d&&c.get("boundaryGap"),u.inverse=c.get("inverse"),c.axis=u,u.model=c,u.coordinateSystem=c.coordinateSystem=this},this)},n.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},n.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),r=t.axisBase,i=t.layoutBase,a=t.pixelDimIndex,o=e[1-a],s=e[a];return o>=r&&o<=r+t.axisLength&&s>=i&&s<=i+t.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(r){if(e.contains(r,t)){var i=r.getData();hV(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(i,i.mapDimension(a)),nT(o.scale,o.model)},this)}},this)},n.prototype.resize=function(e,t){this._rect=oo(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,r=["x","y"],i=["width","height"],a=e.get("layout"),o=a==="horizontal"?0:1,s=t[i[o]],l=[0,s],c=this.dimensions.length,u=JP(e.get("axisExpandWidth"),l),d=JP(e.get("axisExpandCount")||0,[0,c]),h=e.get("axisExpandable")&&c>3&&c>d&&d>1&&u>0&&s>0,f=e.get("axisExpandWindow"),m;if(f)m=JP(f[1]-f[0],l),f[1]=f[0]+m;else{m=JP(u*(d-1),l);var v=e.get("axisExpandCenter")||Ide(c/2);f=[u*v-m/2],f[1]=f[0]+m}var y=(s-m)/(c-d);y<3&&(y=0);var w=[Ide(Mde(f[0]/u,1))+1,I0t(Mde(f[1]/u,1))-1],_=y/u*f[0];return{layout:a,pixelDimIndex:o,layoutBase:t[r[o]],layoutLength:s,axisBase:t[r[1-o]],axisLength:t[i[1-o]],axisExpandable:h,axisExpandWidth:u,axisCollapseWidth:y,axisExpandWindow:f,axisCount:c,winInnerIndices:w,axisExpandWindow0Pos:_}},n.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,r=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;t.each(function(o){var s=[0,i.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),hV(r,function(o,s){var l=(i.axisExpandable?R0t:O0t)(s,i),c={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},u={horizontal:M0t/2,vertical:0},d=[c[a].x+e.x,c[a].y+e.y],h=u[a],f=Gc();Jw(f,f,h),Nf(f,f,d),this._axesLayout[o]={position:d,rotation:h,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(e){return this._axesMap.get(e)},n.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},n.prototype.eachActiveState=function(e,t,r,i){r==null&&(r=0),i==null&&(i=e.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];Z(o,function(y){s.push(e.mapDimension(y)),l.push(a.get(y).model)});for(var c=this.hasAxisBrushed(),u=r;u<i;u++){var d=void 0;if(!c)d="normal";else{d="active";for(var h=e.getValues(s,u),f=0,m=o.length;f<m;f++){var v=l[f].getActiveState(h[f]);if(v==="inactive"){d="inactive";break}}}t(d,u)}},n.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,r=!1,i=0,a=e.length;i<a;i++)t.get(e[i]).model.getActiveState()!=="normal"&&(r=!0);return r},n.prototype.axisCoordToPoint=function(e,t){var r=this._axesLayout[t];return ah([e,0],r.transform)},n.prototype.getAxisLayout=function(e){return Bt(this._axesLayout[e])},n.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),r=t.pixelDimIndex,i=t.axisExpandWindow.slice(),a=i[1]-i[0],o=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var s=e[r]-t.layoutBase-t.axisExpandWindow0Pos,l,c="slide",u=t.axisCollapseWidth,d=this._model.get("axisExpandSlideTriggerArea"),h=d[0]!=null;if(u)h&&u&&s<a*d[0]?(c="jump",l=s-a*d[2]):h&&u&&s>a*(1-d[0])?(c="jump",l=s-a*(1-d[2])):(l=s-a*d[1])>=0&&(l=s-a*(1-d[1]))<=0&&(l=0),l*=t.axisExpandWidth/u,l?o_(l,i,o,"all"):c="none";else{var f=i[1]-i[0],m=o[1]*s/f;i=[hCe(0,m-f/2)],i[1]=dCe(o[1],i[0]+f),i[0]=i[1]-f}return{axisExpandWindow:i,behavior:c}},n}();function JP(n,e){return dCe(hCe(n,e[0]),e[1])}function O0t(n,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*n,axisNameAvailableWidth:t,axisLabelShow:!0}}function R0t(n,e){var t=e.layoutLength,r=e.axisExpandWidth,i=e.axisCount,a=e.axisCollapseWidth,o=e.winInnerIndices,s,l=a,c=!1,u;return n<o[0]?(s=n*a,u=a):n<=o[1]?(s=e.axisExpandWindow0Pos+n*r-e.axisExpandWindow[0],l=r,c=!0):(s=t-(i-1-n)*a,u=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:c,nameTruncateMaxWidth:u}}function N0t(n,e){var t=[];return n.eachComponent("parallel",function(r,i){var a=new P0t(r,n,e);a.name="parallel_"+i,a.resize(r,e),r.coordinateSystem=a,a.model=r,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var i=r.getReferringComponents("parallel",Va).models[0];r.coordinateSystem=i.coordinateSystem}}),t}var L0t={create:N0t},Y8=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return $w([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var r=this.activeIntervals=Bt(t);if(r)for(var i=r.length-1;i>=0;i--)Hu(r[i])},e.prototype.getActiveState=function(t){var r=this.activeIntervals;if(!r.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(r.length===1){var i=r[0];if(i[0]<=t&&t<=i[1])return"active"}else for(var a=0,o=r.length;a<o;a++)if(r[a][0]<=t&&t<=r[a][1])return"active";return"inactive"},e}(Un);Ha(Y8,x2);var Vw=!0,mI=Math.min,aT=Math.max,j0t=Math.pow,F0t=1e4,$0t=6,B0t=6,Pde="globalPan",U0t={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},V0t={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Ode={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},z0t=0,HK=function(n){Te(e,n);function e(t){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new zt,r._uid="brushController_"+z0t++,Z(X0t,function(i,a){this._handlers[a]=dt(i,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||Omt(r,Pde,this._uid),Z(this._handlers,function(i,a){r.on(a,i)}),this._brushType=t.brushType,this._brushOption=an(Bt(Ode),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Rmt(t,Pde,this._uid),Z(this._handlers,function(r,i){t.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};Z(t,function(i){r[i.panelId]=Bt(i)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=Ue(t,function(h){return an(Bt(Ode),h,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Ng(i,t,c,l).add(u).update(u).remove(d).execute(),this;function l(h,f){return(h.id!=null?h.id:r+f)+"-"+h.brushType}function c(h,f){return l(h.__brushOption,f)}function u(h,f){var m=t[h];if(f!=null&&i[f]===s)a[h]=i[f];else{var v=a[h]=f!=null?(i[f].__brushOption=m,i[f]):pCe(o,fCe(o,m));qK(o,v)}}function d(h){i[h]!==s&&o.group.remove(i[h])}},e.prototype.unmount=function(){return this.enableBrush(!1),K8(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(ed);function fCe(n,e){var t=Z5[e.brushType].createCover(n,e);return t.__brushOption=e,mCe(t,e),n.group.add(t),t}function pCe(n,e){var t=GK(e);return t.endCreating&&(t.endCreating(n,e),mCe(e,e.__brushOption)),e}function gCe(n,e){var t=e.__brushOption;GK(e).updateCoverShape(n,e,t.range,t)}function mCe(n,e){var t=e.z;t==null&&(t=F0t),n.traverse(function(r){r.z=t,r.z2=t})}function qK(n,e){GK(e).updateCommon(n,e),gCe(n,e)}function GK(n){return Z5[n.__brushOption.brushType]}function WK(n,e,t){var r=n._panels;if(!r)return Vw;var i,a=n._transform;return Z(r,function(o){o.isTargetByCursor(e,t,a)&&(i=o)}),i}function vCe(n,e){var t=n._panels;if(!t)return Vw;var r=e.__brushOption.panelId;return r!=null?t[r]:Vw}function K8(n){var e=n._covers,t=e.length;return Z(e,function(r){n.group.remove(r)},n),e.length=0,!!t}function zw(n,e){var t=Ue(n._covers,function(r){var i=r.__brushOption,a=Bt(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function H0t(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],i=t[0]-r[0],a=t[1]-r[1],o=j0t(i*i+a*a,.5);return o>$0t}function yCe(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function bCe(n,e,t,r){var i=new zt;return i.add(new er({name:"main",style:YK(t),silent:!0,draggable:!0,cursor:"move",drift:en(Rde,n,e,i,["n","s","w","e"]),ondragend:en(zw,e,{isEnd:!0})})),Z(r,function(a){i.add(new er({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:en(Rde,n,e,i,a),ondragend:en(zw,e,{isEnd:!0})}))}),i}function wCe(n,e,t,r){var i=r.brushStyle.lineWidth||0,a=aT(i,B0t),o=t[0][0],s=t[1][0],l=o-i/2,c=s-i/2,u=t[0][1],d=t[1][1],h=u-a+i/2,f=d-a+i/2,m=u-o,v=d-s,y=m+i,w=v+i;Kp(n,e,"main",o,s,m,v),r.transformable&&(Kp(n,e,"w",l,c,a,w),Kp(n,e,"e",h,c,a,w),Kp(n,e,"n",l,c,y,a),Kp(n,e,"s",l,f,y,a),Kp(n,e,"nw",l,c,a,a),Kp(n,e,"ne",h,c,a,a),Kp(n,e,"sw",l,f,a,a),Kp(n,e,"se",h,f,a,a))}function X8(n,e){var t=e.__brushOption,r=t.transformable,i=e.childAt(0);i.useStyle(YK(t)),i.attr({silent:!r,cursor:r?"move":"default"}),Z([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?Z8(n,a[0]):G0t(n,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?V0t[s]+"-resize":null})})}function Kp(n,e,t,r,i,a,o){var s=e.childOfName(t);s&&s.setShape(Y0t(KK(n,e,[[r,i],[r+a,i+o]])))}function YK(n){return Rt({strokeNoScale:!0},n.brushStyle)}function _Ce(n,e,t,r){var i=[mI(n,t),mI(e,r)],a=[aT(n,t),aT(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function q0t(n){return bw(n.group)}function Z8(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=k5(t[e],q0t(n));return r[i]}function G0t(n,e){var t=[Z8(n,e[0]),Z8(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function Rde(n,e,t,r,i,a){var o=t.__brushOption,s=n.toRectRange(o.range),l=xCe(e,i,a);Z(r,function(c){var u=U0t[c];s[u[0]][u[1]]+=l[u[0]]}),o.range=n.fromRectRange(_Ce(s[0][0],s[1][0],s[0][1],s[1][1])),qK(e,t),zw(e,{isEnd:!1})}function W0t(n,e,t,r){var i=e.__brushOption.range,a=xCe(n,t,r);Z(i,function(o){o[0]+=a[0],o[1]+=a[1]}),qK(n,e),zw(n,{isEnd:!1})}function xCe(n,e,t){var r=n.group,i=r.transformCoordToLocal(e,t),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function KK(n,e,t){var r=vCe(n,e);return r&&r!==Vw?r.clipPath(t,n._transform):Bt(t)}function Y0t(n){var e=mI(n[0][0],n[1][0]),t=mI(n[0][1],n[1][1]),r=aT(n[0][0],n[1][0]),i=aT(n[0][1],n[1][1]);return{x:e,y:t,width:r-e,height:i-t}}function K0t(n,e,t){if(!(!n._brushType||Z0t(n,e.offsetX,e.offsetY))){var r=n._zr,i=n._covers,a=WK(n,e,t);if(!n._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===Vw||s.panelId===a.panelId)&&Z5[s.brushType].contain(i[o],t[0],t[1]))return}a&&r.setCursorStyle("crosshair")}}function Q8(n){var e=n.event;e.preventDefault&&e.preventDefault()}function J8(n,e,t){return n.childOfName("main").contain(e,t)}function SCe(n,e,t,r){var i=n._creatingCover,a=n._creatingPanel,o=n._brushOption,s;if(n._track.push(t.slice()),H0t(n)||i){if(a&&!i){o.brushMode==="single"&&K8(n);var l=Bt(o);l.brushType=Nde(l.brushType,a),l.panelId=a===Vw?null:a.panelId,i=n._creatingCover=fCe(n,l),n._covers.push(i)}if(i){var c=Z5[Nde(n._brushType,a)],u=i.__brushOption;u.range=c.getCreatingRange(KK(n,i,n._track)),r&&(pCe(n,i),c.updateCommon(n,i)),gCe(n,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&WK(n,e,t)&&K8(n)&&(s={isEnd:r,removeOnClick:!0});return s}function Nde(n,e){return n==="auto"?e.defaultBrushType:n}var X0t={mousedown:function(n){if(this._dragging)Lde(this,n);else if(!n.target||!n.target.draggable){Q8(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=WK(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,r=this.group.transformCoordToLocal(e,t);if(K0t(this,n,r),this._dragging){Q8(n);var i=SCe(this,n,r,!1);i&&zw(this,i)}},mouseup:function(n){Lde(this,n)}};function Lde(n,e){if(n._dragging){Q8(e);var t=e.offsetX,r=e.offsetY,i=n.group.transformCoordToLocal(t,r),a=SCe(n,e,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&zw(n,a)}}function Z0t(n,e,t){var r=n._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var Z5={lineX:jde(0),lineY:jde(1),rect:{createCover:function(n,e){function t(r){return r}return bCe({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=yCe(n);return _Ce(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,r){wCe(n,e,t,r)},updateCommon:X8,contain:J8},polygon:{createCover:function(n,e){var t=new zt;return t.add(new Dl({name:"main",style:YK(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new Cl({name:"main",draggable:!0,drift:en(W0t,n,e),ondragend:en(zw,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,r){e.childAt(0).setShape({points:KK(n,e,t)})},updateCommon:X8,contain:J8}};function jde(n){return{createCover:function(e,t){return bCe({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=yCe(e),r=mI(t[0][n],t[1][n]),i=aT(t[0][n],t[1][n]);return[r,i]},updateCoverShape:function(e,t,r,i){var a,o=vCe(e,t);if(o!==Vw&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(n);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-n]]}var l=[r,a];n&&l.reverse(),wCe(e,t,l,i)},updateCommon:X8,contain:J8}}function TCe(n){return n=XK(n),function(e){return O1e(e,n)}}function ECe(n,e){return n=XK(n),function(t){var r=e??t,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function ACe(n,e,t){var r=XK(n);return function(i,a){return r.contain(a[0],a[1])&&!W5(i,e,t)}}function XK(n){return pn.create(n)}var Q0t=["axisLine","axisTickLabel","axisName"],J0t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){n.prototype.init.apply(this,arguments),(this._brushController=new HK(r.getZr())).on("brush",dt(this._onBrush,this))},e.prototype.render=function(t,r,i,a){if(!ebt(t,r,a)){this.axisModel=t,this.api=i,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new zt,this.group.add(this._axisGroup),!!t.get("show")){var s=nbt(t,r),l=s.coordinateSystem,c=t.getAreaSelectStyle(),u=c.width,d=t.axis.dim,h=l.getAxisLayout(d),f=Pe({strokeContainThreshold:u},h),m=new Sl(t,f);Z(Q0t,m.add,m),this._axisGroup.add(m.getGroup()),this._refreshBrushController(f,c,t,s,u,i),v2(o,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,r,i,a,o,s){var l=i.axis.getExtent(),c=l[1]-l[0],u=Math.min(30,Math.abs(c)*.1),d=pn.create({x:l[0],y:-o/2,width:c,height:o});d.x-=u,d.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:TCe(d),isTargetByCursor:ACe(d,s,a),getLinearBrushOtherExtent:ECe(d,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(tbt(i))},e.prototype._onBrush=function(t){var r=t.areas,i=this.axisModel,a=i.axis,o=Ue(r,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!i.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Yi);function ebt(n,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===n}function tbt(n){var e=n.axis;return Ue(n.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function nbt(n,e){return e.getComponent("parallel",n.get("parallelIndex"))}var rbt={type:"axisAreaSelect",event:"axisAreaSelected"};function ibt(n){n.registerAction(rbt,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),n.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var abt={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function CCe(n){n.registerComponentView(A0t),n.registerComponentModel(D0t),n.registerCoordinateSystem("parallel",L0t),n.registerPreprocessor(x0t),n.registerComponentModel(Y8),n.registerComponentView(J0t),iT(n,"parallel",Y8,abt),ibt(n)}function obt(n){Dn(CCe),n.registerChartView(p0t),n.registerSeriesModel(v0t),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,_0t)}var sbt=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return n}(),lbt=function(n){Te(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new sbt},e.prototype.buildPath=function(t,r){var i=r.extent;t.moveTo(r.x1,r.y1),t.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(t.lineTo(r.x2+i,r.y2),t.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(t.lineTo(r.x2,r.y2+i),t.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),t.closePath()},e.prototype.highlight=function(){Og(this)},e.prototype.downplay=function(){Rg(this)},e}(Mn),cbt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._focusAdjacencyDisabled=!1,t}return e.prototype.render=function(t,r,i){var a=this,o=t.getGraph(),s=this.group,l=t.layoutInfo,c=l.width,u=l.height,d=t.getData(),h=t.getData("edge"),f=t.get("orient");this._model=t,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(m){var v=new lbt,y=Wt(v);y.dataIndex=m.dataIndex,y.seriesIndex=t.seriesIndex,y.dataType="edge";var w=m.getModel(),_=w.getModel("lineStyle"),S=_.get("curveness"),A=m.node1.getLayout(),C=m.node1.getModel(),D=C.get("localX"),M=C.get("localY"),P=m.node2.getLayout(),O=m.node2.getModel(),j=O.get("localX"),L=O.get("localY"),B=m.getLayout(),$,Y,q,W,X,te,re,z;v.shape.extent=Math.max(1,B.dy),v.shape.orient=f,f==="vertical"?($=(D!=null?D*c:A.x)+B.sy,Y=(M!=null?M*u:A.y)+A.dy,q=(j!=null?j*c:P.x)+B.ty,W=L!=null?L*u:P.y,X=$,te=Y*(1-S)+W*S,re=q,z=Y*S+W*(1-S)):($=(D!=null?D*c:A.x)+A.dx,Y=(M!=null?M*u:A.y)+B.sy,q=j!=null?j*c:P.x,W=(L!=null?L*u:P.y)+B.ty,X=$*(1-S)+q*S,te=Y,re=$*S+q*(1-S),z=W),v.setShape({x1:$,y1:Y,x2:q,y2:W,cpx1:X,cpy1:te,cpx2:re,cpy2:z}),v.useStyle(_.getItemStyle()),Fde(v.style,f,m);var oe=""+w.get("value"),le=So(w,"edgeLabel");ms(v,le,{labelFetcher:{getFormattedLabel:function(he,pe,ct,Be,Se,_e){return t.getFormattedLabel(he,pe,"edge",Be,Cf(Se,le.normal&&le.normal.get("formatter"),oe),_e)}},labelDataIndex:m.dataIndex,defaultText:oe}),v.setTextConfig({position:"inside"});var ee=w.getModel("emphasis");gs(v,w,"lineStyle",function(he){var pe=he.getItemStyle();return Fde(pe,f,m),pe}),s.add(v),h.setItemGraphicEl(m.dataIndex,v);var be=ee.get("focus");na(v,be==="adjacency"?m.getAdjacentDataIndices():be==="trajectory"?m.getTrajectoryDataIndices():be,ee.get("blurScope"),ee.get("disabled"))}),o.eachNode(function(m){var v=m.getLayout(),y=m.getModel(),w=y.get("localX"),_=y.get("localY"),S=y.getModel("emphasis"),A=y.get(["itemStyle","borderRadius"])||0,C=new er({shape:{x:w!=null?w*c:v.x,y:_!=null?_*u:v.y,width:v.dx,height:v.dy,r:A},style:y.getModel("itemStyle").getItemStyle(),z2:10});ms(C,So(y),{labelFetcher:{getFormattedLabel:function(M,P){return t.getFormattedLabel(M,P,"node")}},labelDataIndex:m.dataIndex,defaultText:m.id}),C.disableLabelAnimation=!0,C.setStyle("fill",m.getVisual("color")),C.setStyle("decal",m.getVisual("style").decal),gs(C,y),s.add(C),d.setItemGraphicEl(m.dataIndex,C),Wt(C).dataType="node";var D=S.get("focus");na(C,D==="adjacency"?m.getAdjacentDataIndices():D==="trajectory"?m.getTrajectoryDataIndices():D,S.get("blurScope"),S.get("disabled"))}),d.eachItemGraphicEl(function(m,v){var y=d.getItemModel(v);y.get("draggable")&&(m.drift=function(w,_){a._focusAdjacencyDisabled=!0,this.shape.x+=w,this.shape.y+=_,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:d.getRawIndex(v),localX:this.shape.x/c,localY:this.shape.y/u})},m.ondragend=function(){a._focusAdjacencyDisabled=!1},m.draggable=!0,m.cursor="move")}),!this._data&&t.isAnimationEnabled()&&s.setClipPath(ubt(s.getBoundingRect(),t,function(){s.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(ti);function Fde(n,e,t){switch(n.fill){case"source":n.fill=t.node1.getVisual("color"),n.decal=t.node1.getVisual("style").decal;break;case"target":n.fill=t.node2.getVisual("color"),n.decal=t.node2.getVisual("style").decal;break;case"gradient":var r=t.node1.getVisual("color"),i=t.node2.getVisual("color");st(r)&&st(i)&&(n.fill=new m2(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function ubt(n,e,t){var r=new er({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return Ni(r,{shape:{width:n.width+20}},e,t),r}var dbt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],o=t.levels||[];this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new Ir(o[l],this,r));var c=cCe(a,i,this,!0,u);return c.data;function u(d,h){d.wrapMethod("getItemModel",function(f,m){var v=f.parentModel,y=v.getData().getItemLayout(m);if(y){var w=y.depth,_=v.levelModels[w];_&&(f.parentModel=_)}return f}),h.wrapMethod("getItemModel",function(f,m){var v=f.parentModel,y=v.getGraph().getEdgeByIndex(m),w=y.node1.getLayout();if(w){var _=w.depth,S=v.levelModels[_];S&&(f.parentModel=S)}return f})}},e.prototype.setNodePosition=function(t,r){var i=this.option.data||this.option.nodes,a=i[t];a.localX=r[0],a.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,i){function a(f){return isNaN(f)||f==null}if(i==="edge"){var o=this.getDataParams(t,i),s=o.data,l=o.value,c=s.source+" -- "+s.target;return To("nameValue",{name:c,value:l,noValue:a(l)})}else{var u=this.getGraph().getNodeByIndex(t),d=u.getLayout().value,h=this.getDataParams(t,i).data.name;return To("nameValue",{name:h!=null?h+"":null,value:d,noValue:a(d)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,r){var i=n.prototype.getDataParams.call(this,t,r);if(i.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(t),o=a.getLayout().value;i.value=o}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(bi);function hbt(n,e){n.eachSeriesByType("sankey",function(t){var r=t.get("nodeWidth"),i=t.get("nodeGap"),a=fbt(t,e);t.layoutInfo=a;var o=a.width,s=a.height,l=t.getGraph(),c=l.nodes,u=l.edges;gbt(c);var d=Cr(c,function(v){return v.getLayout().value===0}),h=d.length!==0?0:t.get("layoutIterations"),f=t.get("orient"),m=t.get("nodeAlign");pbt(c,u,r,i,o,s,h,f,m)})}function fbt(n,e){return oo(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function pbt(n,e,t,r,i,a,o,s,l){mbt(n,e,t,i,a,s,l),wbt(n,e,a,i,r,o,s),kbt(n,s)}function gbt(n){Z(n,function(e){var t=ny(e.outEdges,pL),r=ny(e.inEdges,pL),i=e.getValue()||0,a=Math.max(t,r,i);e.setLayout({value:a},!0)})}function mbt(n,e,t,r,i,a,o){for(var s=[],l=[],c=[],u=[],d=0,h=0;h<e.length;h++)s[h]=1;for(var h=0;h<n.length;h++)l[h]=n[h].inEdges.length,l[h]===0&&c.push(n[h]);for(var f=-1;c.length;){for(var m=0;m<c.length;m++){var v=c[m],y=v.hostGraph.data.getRawDataItem(v.dataIndex),w=y.depth!=null&&y.depth>=0;w&&y.depth>f&&(f=y.depth),v.setLayout({depth:w?y.depth:d},!0),a==="vertical"?v.setLayout({dy:t},!0):v.setLayout({dx:t},!0);for(var _=0;_<v.outEdges.length;_++){var S=v.outEdges[_],A=e.indexOf(S);s[A]=0;var C=S.node2,D=n.indexOf(C);--l[D]===0&&u.indexOf(C)<0&&u.push(C)}}++d,c=u,u=[]}for(var h=0;h<s.length;h++)if(s[h]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var M=f>d-1?f:d-1;o&&o!=="left"&&vbt(n,o,a,M);var P=a==="vertical"?(i-t)/M:(r-t)/M;bbt(n,P,a)}function DCe(n){var e=n.hostGraph.data.getRawDataItem(n.dataIndex);return e.depth!=null&&e.depth>=0}function vbt(n,e,t,r){if(e==="right"){for(var i=[],a=n,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];i.indexOf(u.node1)<0&&i.push(u.node1)}}a=i,i=[],++o}Z(n,function(d){DCe(d)||d.setLayout({depth:Math.max(0,r-d.getLayout().skNodeHeight)},!0)})}else e==="justify"&&ybt(n,r)}function ybt(n,e){Z(n,function(t){!DCe(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function bbt(n,e,t){Z(n,function(r){var i=r.getLayout().depth*e;t==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function wbt(n,e,t,r,i,a,o){var s=_bt(n,o);xbt(s,e,t,r,i,o),fV(s,i,t,r,o);for(var l=1;a>0;a--)l*=.99,Sbt(s,l,o),fV(s,i,t,r,o),Dbt(s,l,o),fV(s,i,t,r,o)}function _bt(n,e){var t=[],r=e==="vertical"?"y":"x",i=e8(n,function(a){return a.getLayout()[r]});return i.keys.sort(function(a,o){return a-o}),Z(i.keys,function(a){t.push(i.buckets.get(a))}),t}function xbt(n,e,t,r,i,a){var o=1/0;Z(n,function(s){var l=s.length,c=0;Z(s,function(d){c+=d.getLayout().value});var u=a==="vertical"?(r-(l-1)*i)/c:(t-(l-1)*i)/c;u<o&&(o=u)}),Z(n,function(s){Z(s,function(l,c){var u=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:c},!0),l.setLayout({dx:u},!0)):(l.setLayout({y:c},!0),l.setLayout({dy:u},!0))})}),Z(e,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function fV(n,e,t,r,i){var a=i==="vertical"?"x":"y";Z(n,function(o){o.sort(function(v,y){return v.getLayout()[a]-y.getLayout()[a]});for(var s,l,c,u=0,d=o.length,h=i==="vertical"?"dx":"dy",f=0;f<d;f++)l=o[f],c=u-l.getLayout()[a],c>0&&(s=l.getLayout()[a]+c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[a]+l.getLayout()[h]+e;var m=i==="vertical"?r:t;if(c=u-e-m,c>0){s=l.getLayout()[a]-c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),u=s;for(var f=d-2;f>=0;--f)l=o[f],c=l.getLayout()[a]+l.getLayout()[h]+e-u,c>0&&(s=l.getLayout()[a]-c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[a]}})}function Sbt(n,e,t){Z(n.slice().reverse(),function(r){Z(r,function(i){if(i.outEdges.length){var a=ny(i.outEdges,Tbt,t)/ny(i.outEdges,pL);if(isNaN(a)){var o=i.outEdges.length;a=o?ny(i.outEdges,Ebt,t)/o:0}if(t==="vertical"){var s=i.getLayout().x+(a-my(i,t))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-my(i,t))*e;i.setLayout({y:l},!0)}}})})}function Tbt(n,e){return my(n.node2,e)*n.getValue()}function Ebt(n,e){return my(n.node2,e)}function Abt(n,e){return my(n.node1,e)*n.getValue()}function Cbt(n,e){return my(n.node1,e)}function my(n,e){return e==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function pL(n){return n.getValue()}function ny(n,e,t){for(var r=0,i=n.length,a=-1;++a<i;){var o=+e(n[a],t);isNaN(o)||(r+=o)}return r}function Dbt(n,e,t){Z(n,function(r){Z(r,function(i){if(i.inEdges.length){var a=ny(i.inEdges,Abt,t)/ny(i.inEdges,pL);if(isNaN(a)){var o=i.inEdges.length;a=o?ny(i.inEdges,Cbt,t)/o:0}if(t==="vertical"){var s=i.getLayout().x+(a-my(i,t))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-my(i,t))*e;i.setLayout({y:l},!0)}}})})}function kbt(n,e){var t=e==="vertical"?"x":"y";Z(n,function(r){r.outEdges.sort(function(i,a){return i.node2.getLayout()[t]-a.node2.getLayout()[t]}),r.inEdges.sort(function(i,a){return i.node1.getLayout()[t]-a.node1.getLayout()[t]})}),Z(n,function(r){var i=0,a=0;Z(r.outEdges,function(o){o.setLayout({sy:i},!0),i+=o.getLayout().dy}),Z(r.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function Ibt(n){n.eachSeriesByType("sankey",function(e){var t=e.getGraph(),r=t.nodes,i=t.edges;if(r.length){var a=1/0,o=-1/0;Z(r,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),Z(r,function(s){var l=new xo({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:e.get("color")}),c=l.mapValueToVisual(s.getLayout().value),u=s.getModel().get(["itemStyle","color"]);u!=null?(s.setVisual("color",u),s.setVisual("style",{fill:u})):(s.setVisual("color",c),s.setVisual("style",{fill:c}))})}i.length&&Z(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function Mbt(n){n.registerChartView(cbt),n.registerSeriesModel(dbt),n.registerLayout(hbt),n.registerVisual(Ibt),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var kCe=function(){function n(){}return n.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},n.prototype.getInitialData=function(e,t){var r,i=t.getComponent("xAxis",this.get("xAxisIndex")),a=t.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=a.get("type"),l;o==="category"?(e.layout="horizontal",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("x")):s==="category"?(e.layout="vertical",r=a.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var c=["x","y"],u=e.layout==="horizontal"?0:1,d=this._baseAxisDim=c[u],h=c[1-u],f=[i,a],m=f[u].get("type"),v=f[1-u].get("type"),y=e.data;if(y&&l){var w=[];Z(y,function(A,C){var D;$e(A)?(D=A.slice(),A.unshift(C)):$e(A.value)?(D=Pe({},A),D.value=D.value.slice(),A.value.unshift(C)):D=A,w.push(D)}),e.data=w}var _=this.defaultValueDimensions,S=[{name:d,type:rL(m),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:rL(v),dimsDef:_.slice()}];return qT(this,{coordDimensions:S,dimensionsCount:_.length+1,encodeDefaulter:en(aTe,S,this)})},n.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},n}(),ICe=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(bi);Ha(ICe,kCe,!0);var Pbt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=t.get("layout")==="horizontal"?1:0;a.diff(s).add(function(c){if(a.hasValue(c)){var u=a.getItemLayout(c),d=$de(u,a,c,l,!0);a.setItemGraphicEl(c,d),o.add(d)}}).update(function(c,u){var d=s.getItemGraphicEl(u);if(!a.hasValue(c)){o.remove(d);return}var h=a.getItemLayout(c);d?(uh(d),MCe(h,d,a,c)):d=$de(h,a,c,l),o.add(d),a.setItemGraphicEl(c,d)}).remove(function(c){var u=s.getItemGraphicEl(c);u&&o.remove(u)}).execute(),this._data=a},e.prototype.remove=function(t){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&r.remove(a)})},e.type="boxplot",e}(ti),Obt=function(){function n(){}return n}(),Rbt=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new Obt},e.prototype.buildPath=function(t,r){var i=r.points,a=0;for(t.moveTo(i[a][0],i[a][1]),a++;a<4;a++)t.lineTo(i[a][0],i[a][1]);for(t.closePath();a<i.length;a++)t.moveTo(i[a][0],i[a][1]),a++,t.lineTo(i[a][0],i[a][1])},e}(Mn);function $de(n,e,t,r,i){var a=n.ends,o=new Rbt({shape:{points:i?Nbt(a,r,n):a}});return MCe(n,o,e,t,i),o}function MCe(n,e,t,r,i){var a=t.hostModel,o=t_[i?"initProps":"updateProps"];o(e,{shape:{points:n.ends}},a,r),e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=t.getItemModel(r),l=s.getModel("emphasis");gs(e,s),na(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function Nbt(n,e,t){return Ue(n,function(r){return r=r.slice(),r[e]=t.initBaseline,r})}var PD=Z;function Lbt(n){var e=jbt(n);PD(e,function(t){var r=t.seriesModels;r.length&&(Fbt(t),PD(r,function(i,a){$bt(i,t.boxOffsetList[a],t.boxWidthList[a])}))})}function jbt(n){var e=[],t=[];return n.eachSeriesByType("boxplot",function(r){var i=r.getBaseAxis(),a=_n(t,i);a<0&&(a=t.length,t[a]=i,e[a]={axis:i,seriesModels:[]}),e[a].seriesModels.push(r)}),e}function Fbt(n){var e=n.axis,t=n.seriesModels,r=t.length,i=n.boxWidthList=[],a=n.boxOffsetList=[],o=[],s;if(e.type==="category")s=e.getBandWidth();else{var l=0;PD(t,function(m){l=Math.max(l,m.getData().count())});var c=e.getExtent();s=Math.abs(c[1]-c[0])/l}PD(t,function(m){var v=m.get("boxWidth");$e(v)||(v=[v,v]),o.push([Je(v[0],s)||0,Je(v[1],s)||0])});var u=s*.8-2,d=u/r*.3,h=(u-d*(r-1))/r,f=h/2-u/2;PD(t,function(m,v){a.push(f),f+=d+h,i.push(Math.min(Math.max(h,o[v][0]),o[v][1]))})}function $bt(n,e,t){var r=n.coordinateSystem,i=n.getData(),a=t/2,o=n.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],c=i.mapDimension(l[o]),u=i.mapDimensionsAll(l[s]);if(c==null||u.length<5)return;for(var d=0;d<i.count();d++){var h=i.get(c,d),f=S(h,u[2],d),m=S(h,u[0],d),v=S(h,u[1],d),y=S(h,u[3],d),w=S(h,u[4],d),_=[];A(_,v,!1),A(_,y,!0),_.push(m,v,w,y),C(_,m),C(_,w),C(_,f),i.setItemLayout(d,{initBaseline:f[s],ends:_})}function S(D,M,P){var O=i.get(M,P),j=[];j[o]=D,j[s]=O;var L;return isNaN(D)||isNaN(O)?L=[NaN,NaN]:(L=r.dataToPoint(j),L[o]+=e),L}function A(D,M,P){var O=M.slice(),j=M.slice();O[o]+=a,j[o]-=a,P?D.push(O,j):D.push(j,O)}function C(D,M){var P=M.slice(),O=M.slice();P[o]-=a,O[o]+=a,D.push(P,O)}}function Bbt(n,e){e=e||{};for(var t=[],r=[],i=e.boundIQR,a=i==="none"||i===0,o=0;o<n.length;o++){var s=Hu(n[o].slice()),l=VU(s,.25),c=VU(s,.5),u=VU(s,.75),d=s[0],h=s[s.length-1],f=(i??1.5)*(u-l),m=a?d:Math.max(d,l-f),v=a?h:Math.min(h,u+f),y=e.itemNameFormatter,w=kt(y)?y({value:o}):st(y)?y.replace("{value}",o+""):o+"";t.push([w,m,l,c,u,v]);for(var _=0;_<s.length;_++){var S=s[_];if(S<m||S>v){var A=[w,S];r.push(A)}}}return{boxData:t,outliers:r}}var Ubt={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Ws){var r="";Er(r)}var i=Bbt(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function Vbt(n){n.registerSeriesModel(ICe),n.registerChartView(Pbt),n.registerLayout(Lbt),n.registerTransform(Ubt)}var zbt=["itemStyle","borderColor"],Hbt=["itemStyle","borderColor0"],qbt=["itemStyle","borderColorDoji"],Gbt=["itemStyle","color"],Wbt=["itemStyle","color0"];function ZK(n,e){return e.get(n>0?Gbt:Wbt)}function QK(n,e){return e.get(n===0?qbt:n>0?zbt:Hbt)}var Ybt={seriesType:"candlestick",plan:UT(),performRawSeries:!0,reset:function(n,e){if(!e.isSeriesFiltered(n)){var t=n.pipelineContext.large;return!t&&{progress:function(r,i){for(var a;(a=r.next())!=null;){var o=i.getItemModel(a),s=i.getItemLayout(a).sign,l=o.getItemStyle();l.fill=ZK(s,o),l.stroke=QK(s,o)||l.fill;var c=i.ensureUniqueItemVisual(a,"style");Pe(c,l)}}}}}},Kbt=["color","borderColor"],Xbt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,r,i){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,r,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},e.prototype.eachRendered=function(t){Iy(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t){var r=t.getData(),i=this._data,a=this.group,o=r.getLayout("isSimpleBox"),s=t.get("clip",!0),l=t.coordinateSystem,c=l.getArea&&l.getArea();this._data||a.removeAll(),r.diff(i).add(function(u){if(r.hasValue(u)){var d=r.getItemLayout(u);if(s&&Bde(c,d))return;var h=pV(d,u,!0);Ni(h,{shape:{points:d.ends}},t,u),gV(h,r,u,o),a.add(h),r.setItemGraphicEl(u,h)}}).update(function(u,d){var h=i.getItemGraphicEl(d);if(!r.hasValue(u)){a.remove(h);return}var f=r.getItemLayout(u);if(s&&Bde(c,f)){a.remove(h);return}h?(fr(h,{shape:{points:f.ends}},t,u),uh(h)):h=pV(f),gV(h,r,u,o),a.add(h),r.setItemGraphicEl(u,h)}).remove(function(u){var d=i.getItemGraphicEl(u);d&&a.remove(d)}).execute(),this._data=r},e.prototype._renderLarge=function(t){this._clear(),Ude(t,this.group);var r=t.get("clip",!0)?E2(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,r){for(var i=r.getData(),a=i.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var s=i.getItemLayout(o),l=pV(s);gV(l,i,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(t,r){Ude(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(ti),Zbt=function(){function n(){}return n}(),Qbt=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new Zbt},e.prototype.buildPath=function(t,r){var i=r.points;this.__simpleBox?(t.moveTo(i[4][0],i[4][1]),t.lineTo(i[6][0],i[6][1])):(t.moveTo(i[0][0],i[0][1]),t.lineTo(i[1][0],i[1][1]),t.lineTo(i[2][0],i[2][1]),t.lineTo(i[3][0],i[3][1]),t.closePath(),t.moveTo(i[4][0],i[4][1]),t.lineTo(i[5][0],i[5][1]),t.moveTo(i[6][0],i[6][1]),t.lineTo(i[7][0],i[7][1]))},e}(Mn);function pV(n,e,t){var r=n.ends;return new Qbt({shape:{points:t?Jbt(r,n):r},z2:100})}function Bde(n,e){for(var t=!0,r=0;r<e.ends.length;r++)if(n.contain(e.ends[r][0],e.ends[r][1])){t=!1;break}return t}function gV(n,e,t,r){var i=e.getItemModel(t);n.useStyle(e.getItemVisual(t,"style")),n.style.strokeNoScale=!0,n.__simpleBox=r,gs(n,i);var a=e.getItemLayout(t).sign;Z(n.states,function(s,l){var c=i.getModel(l),u=ZK(a,c),d=QK(a,c)||u,h=s.style||(s.style={});u&&(h.fill=u),d&&(h.stroke=d)});var o=i.getModel("emphasis");na(n,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function Jbt(n,e){return Ue(n,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var ewt=function(){function n(){}return n}(),mV=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new ewt},e.prototype.buildPath=function(t,r){for(var i=r.points,a=0;a<i.length;)if(this.__sign===i[a++]){var o=i[a++];t.moveTo(o,i[a++]),t.lineTo(o,i[a++])}else a+=3},e}(Mn);function Ude(n,e,t,r){var i=n.getData(),a=i.getLayout("largePoints"),o=new mV({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});e.add(o);var s=new mV({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new mV({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});e.add(l),vV(1,o,n),vV(-1,s,n),vV(0,l,n),r&&(o.incremental=!0,s.incremental=!0),t&&t.push(o,s)}function vV(n,e,t,r){var i=QK(n,t)||ZK(n,t),a=t.getModel("itemStyle").getItemStyle(Kbt);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var PCe=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,r,i){var a=r.getItemLayout(t);return a&&i.rect(a.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(bi);Ha(PCe,kCe,!0);function twt(n){!n||!$e(n.series)||Z(n.series,function(e){jt(e)&&e.type==="k"&&(e.type="candlestick")})}var nwt={seriesType:"candlestick",plan:UT(),reset:function(n){var e=n.coordinateSystem,t=n.getData(),r=rwt(n,t),i=0,a=1,o=["x","y"],s=t.getDimensionIndex(t.mapDimension(o[i])),l=Ue(t.mapDimensionsAll(o[a]),t.getDimensionIndex,t),c=l[0],u=l[1],d=l[2],h=l[3];if(t.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),s<0||l.length<4)return;return{progress:n.pipelineContext.large?m:f};function f(v,y){for(var w,_=y.getStore();(w=v.next())!=null;){var S=_.get(s,w),A=_.get(c,w),C=_.get(u,w),D=_.get(d,w),M=_.get(h,w),P=Math.min(A,C),O=Math.max(A,C),j=X(P,S),L=X(O,S),B=X(D,S),$=X(M,S),Y=[];te(Y,L,0),te(Y,j,1),Y.push(z($),z(L),z(B),z(j));var q=y.getItemModel(w),W=!!q.get(["itemStyle","borderColorDoji"]);y.setItemLayout(w,{sign:Vde(_,w,A,C,u,W),initBaseline:A>C?L[a]:j[a],ends:Y,brushRect:re(D,M,S)})}function X(oe,le){var ee=[];return ee[i]=le,ee[a]=oe,isNaN(le)||isNaN(oe)?[NaN,NaN]:e.dataToPoint(ee)}function te(oe,le,ee){var be=le.slice(),he=le.slice();be[i]=XO(be[i]+r/2,1,!1),he[i]=XO(he[i]-r/2,1,!0),ee?oe.push(be,he):oe.push(he,be)}function re(oe,le,ee){var be=X(oe,ee),he=X(le,ee);return be[i]-=r/2,he[i]-=r/2,{x:be[0],y:be[1],width:r,height:he[1]-be[1]}}function z(oe){return oe[i]=XO(oe[i],1),oe}}function m(v,y){for(var w=_f(v.count*4),_=0,S,A=[],C=[],D,M=y.getStore(),P=!!n.get(["itemStyle","borderColorDoji"]);(D=v.next())!=null;){var O=M.get(s,D),j=M.get(c,D),L=M.get(u,D),B=M.get(d,D),$=M.get(h,D);if(isNaN(O)||isNaN(B)||isNaN($)){w[_++]=NaN,_+=3;continue}w[_++]=Vde(M,D,j,L,u,P),A[i]=O,A[a]=B,S=e.dataToPoint(A,null,C),w[_++]=S?S[0]:NaN,w[_++]=S?S[1]:NaN,A[a]=$,S=e.dataToPoint(A,null,C),w[_++]=S?S[1]:NaN}y.setLayout("largePoints",w)}}};function Vde(n,e,t,r,i,a){var o;return t>r?o=-1:t<r?o=1:o=a?0:e>0?n.get(i,e-1)<=r?1:-1:1,o}function rwt(n,e){var t=n.getBaseAxis(),r,i=t.type==="category"?t.getBandWidth():(r=t.getExtent(),Math.abs(r[1]-r[0])/e.count()),a=Je(Zt(n.get("barMaxWidth"),i),i),o=Je(Zt(n.get("barMinWidth"),1),i),s=n.get("barWidth");return s!=null?Je(s,i):Math.max(Math.min(i/2,a),o)}function iwt(n){n.registerChartView(Xbt),n.registerSeriesModel(PCe),n.registerPreprocessor(twt),n.registerVisual(Ybt),n.registerLayout(nwt)}function zde(n,e){var t=e.rippleEffectColor||e.color;n.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var awt=function(n){Te(e,n);function e(t,r){var i=n.call(this)||this,a=new S2(t,r),o=new zt;return i.add(a),i.add(o),i.updateData(t,r),i}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var r=t.symbolType,i=t.color,a=t.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=za(r,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var c=-s/a*t.period+t.effectOffset;l.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(c).start(),l.animateStyle(!0).when(t.period,{opacity:0}).delay(c).start(),o.add(l)}zde(o,t)},e.prototype.updateEffectAnimation=function(t){for(var r=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(r[s]!==t[s]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}zde(i,t)},e.prototype.highlight=function(){Og(this)},e.prototype.downplay=function(){Rg(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,r){var i=this,a=t.hostModel;this.childAt(0).updateData(t,r);var o=this.childAt(1),s=t.getItemModel(r),l=t.getItemVisual(r,"symbol"),c=zT(t.getItemVisual(r,"symbolSize")),u=t.getItemVisual(r,"style"),d=u&&u.fill,h=s.getModel("emphasis");o.setScale(c),o.traverse(function(y){y.setStyle("fill",d)});var f=n_(t.getItemVisual(r,"symbolOffset"),c);f&&(o.x=f[0],o.y=f[1]);var m=t.getItemVisual(r,"symbolRotate");o.rotation=(m||0)*Math.PI/180||0;var v={};v.showEffectOn=a.get("showEffectOn"),v.rippleScale=s.get(["rippleEffect","scale"]),v.brushType=s.get(["rippleEffect","brushType"]),v.period=s.get(["rippleEffect","period"])*1e3,v.effectOffset=r/t.count(),v.z=a.getShallow("z")||0,v.zlevel=a.getShallow("zlevel")||0,v.symbolType=l,v.color=d,v.rippleEffectColor=s.get(["rippleEffect","color"]),v.rippleNumber=s.get(["rippleEffect","number"]),v.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(v):this.startEffectAnimation(v),this._effectCfg=v):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(y){y==="emphasis"?v.showEffectOn!=="render"&&i.startEffectAnimation(v):y==="normal"&&v.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=v,na(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(zt),owt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new T2(awt)},e.prototype.render=function(t,r,i){var a=t.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(t)}),this.group.add(o.group)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,i=r&&r.getArea&&r.getArea();return t.get("clip",!0)?i:null},e.prototype.updateTransform=function(t,r,i){var a=t.getData();this.group.dirty();var o=A2("").reset(t,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var r=t.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=Mot(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(ti),swt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(bi);function lwt(n){n.registerChartView(owt),n.registerSeriesModel(swt),n.registerLayout(A2("effectScatter"))}var OCe=function(n){Te(e,n);function e(t,r,i){var a=n.call(this)||this;return a.add(a.createLine(t,r,i)),a._updateEffectSymbol(t,r),a}return e.prototype.createLine=function(t,r,i){return new VK(t,r,i)},e.prototype._updateEffectSymbol=function(t,r){var i=t.getItemModel(r),a=i.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");$e(o)||(o=[o,o]);var l=t.getItemVisual(r,"style"),c=a.get("color")||l&&l.stroke,u=this.childAt(1);this._symbolType!==s&&(this.remove(u),u=za(s,-.5,-.5,1,1,c),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",c),u.setStyle(a.getItemStyle(["color"])),u.scaleX=o[0],u.scaleY=o[1],u.setColor(c),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(t,a,r))},e.prototype._updateEffectAnimation=function(t,r,i){var a=this.childAt(1);if(a){var o=t.getItemLayout(i),s=r.get("period")*1e3,l=r.get("loop"),c=r.get("roundTrip"),u=r.get("constantSpeed"),d=Ho(r.get("delay"),function(f){return f/t.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),u>0&&(s=this._getLineLength(a)/u*1e3),s!==this._period||l!==this._loop||c!==this._roundTrip){a.stopAnimation();var h=void 0;kt(d)?h=d(i):h=d,a.__t>0&&(h=-s*a.__t),this._animateSymbol(a,s,h,l,c)}this._period=s,this._loop=l,this._roundTrip=c}},e.prototype._animateSymbol=function(t,r,i,a,o){if(r>0){t.__t=0;var s=this,l=t.animate("",a).when(o?r*2:r,{__t:o?2:1}).delay(i).during(function(){s._updateSymbolPosition(t)});a||l.done(function(){s.remove(t)}),l.start()}},e.prototype._getLineLength=function(t){return jv(t.__p1,t.__cp1)+jv(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,r){t.__p1=r[0],t.__p2=r[1],t.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(t,r,i){this.childAt(0).updateData(t,r,i),this._updateEffectSymbol(t,r)},e.prototype._updateSymbolPosition=function(t){var r=t.__p1,i=t.__p2,a=t.__cp1,o=t.__t<1?t.__t:2-t.__t,s=[t.x,t.y],l=s.slice(),c=Vo,u=$H;s[0]=c(r[0],a[0],i[0],o),s[1]=c(r[1],a[1],i[1],o);var d=t.__t<1?u(r[0],a[0],i[0],o):u(i[0],a[0],r[0],1-o),h=t.__t<1?u(r[1],a[1],i[1],o):u(i[1],a[1],r[1],1-o);t.rotation=-Math.atan2(h,d)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=jv(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):t.__lastT===1?t.scaleY=2*jv(r,s):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=s[0],t.y=s[1]},e.prototype.updateLayout=function(t,r){this.childAt(0).updateLayout(t,r);var i=t.getItemModel(r).getModel("effect");this._updateEffectAnimation(t,i,r)},e}(zt),RCe=function(n){Te(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createPolyline(t,r,i),a}return e.prototype._createPolyline=function(t,r,i){var a=t.getItemLayout(r),o=new Dl({shape:{points:a}});this.add(o),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,o=this.childAt(0),s={shape:{points:t.getItemLayout(r)}};fr(o,s,a,r),this._updateCommonStl(t,r,i)},e.prototype._updateCommonStl=function(t,r,i){var a=this.childAt(0),o=t.getItemModel(r),s=i&&i.emphasisLineStyle,l=i&&i.focus,c=i&&i.blurScope,u=i&&i.emphasisDisabled;if(!i||t.hasItemOption){var d=o.getModel("emphasis");s=d.getModel("lineStyle").getLineStyle(),u=d.get("disabled"),l=d.get("focus"),c=d.get("blurScope")}a.useStyle(t.getItemVisual(r,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var h=a.ensureState("emphasis");h.style=s,na(this,l,c,u)},e.prototype.updateLayout=function(t,r){var i=this.childAt(0);i.setShape("points",t.getItemLayout(r))},e}(zt),cwt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,r,i){return new RCe(t,r,i)},e.prototype._updateAnimationPoints=function(t,r){this._points=r;for(var i=[0],a=0,o=1;o<r.length;o++){var s=r[o-1],l=r[o];a+=jv(s,l),i.push(a)}if(a===0){this._length=0;return}for(var o=0;o<i.length;o++)i[o]/=a;this._offsets=i,this._length=a},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var r=t.__t<1?t.__t:2-t.__t,i=this._points,a=this._offsets,o=i.length;if(a){var s=this._lastFrame,l;if(r<this._lastFramePercent){var c=Math.min(s+1,o-1);for(l=c;l>=0&&!(a[l]<=r);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>r);l++);l=Math.min(l-1,o-2)}var u=(r-a[l])/(a[l+1]-a[l]),d=i[l],h=i[l+1];t.x=d[0]*(1-u)+u*h[0],t.y=d[1]*(1-u)+u*h[1];var f=t.__t<1?h[0]-d[0]:d[0]-h[0],m=t.__t<1?h[1]-d[1]:d[1]-h[1];t.rotation=-Math.atan2(m,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,t.ignore=!1}},e}(OCe),uwt=function(){function n(){this.polyline=!1,this.curveness=0,this.segs=[]}return n}(),dwt=function(n){Te(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new uwt},e.prototype.buildPath=function(t,r){var i=r.segs,a=r.curveness,o;if(r.polyline)for(o=this._off;o<i.length;){var s=i[o++];if(s>0){t.moveTo(i[o++],i[o++]);for(var l=1;l<s;l++)t.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var c=i[o++],u=i[o++],d=i[o++],h=i[o++];if(t.moveTo(c,u),a>0){var f=(c+d)/2-(u-h)*a,m=(u+h)/2-(d-c)*a;t.quadraticCurveTo(f,m,d,h)}else t.lineTo(d,h)}this.incremental&&(this._off=o,this.notClear=!0)},e.prototype.findDataIndex=function(t,r){var i=this.shape,a=i.segs,o=i.curveness,s=this.style.lineWidth;if(i.polyline)for(var l=0,c=0;c<a.length;){var u=a[c++];if(u>0)for(var d=a[c++],h=a[c++],f=1;f<u;f++){var m=a[c++],v=a[c++];if(kv(d,h,m,v,s,t,r))return l}l++}else for(var l=0,c=0;c<a.length;){var d=a[c++],h=a[c++],m=a[c++],v=a[c++];if(o>0){var y=(d+m)/2-(h-v)*o,w=(h+v)/2-(m-d)*o;if(a1e(d,h,y,w,m,v,s,t,r))return l}else if(kv(d,h,m,v,s,t,r))return l;l++}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,c=0;c<i.length;){var u=i[c++],d=i[c++];a=Math.min(u,a),s=Math.max(u,s),o=Math.min(d,o),l=Math.max(d,l)}t=this._rect=new pn(a,o,s,l)}return t},e}(Mn),hwt=function(){function n(){this.group=new zt}return n.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},n.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(e,t){var r=this._newAdded[0],i=t.getLayout("linesPoints"),a=r&&r.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+i.length);s.set(a),s.set(i,o),r.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,t),l.__startIndex=e.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new dwt({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=t.getVisual("style");a&&a.stroke&&e.setStyle("stroke",a.stroke),e.setStyle("fill",null);var o=Wt(e);o.seriesIndex=i.seriesIndex,e.on("mousemove",function(s){o.dataIndex=null;var l=e.hoverDataIdx;l>0&&(o.dataIndex=l+e.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),NCe={seriesType:"lines",plan:UT(),reset:function(n){var e=n.coordinateSystem;if(e){var t=n.get("polyline"),r=n.pipelineContext.large;return{progress:function(i,a){var o=[];if(r){var s=void 0,l=i.end-i.start;if(t){for(var c=0,u=i.start;u<i.end;u++)c+=n.getLineCoordsCount(u);s=new Float32Array(l+c*2)}else s=new Float32Array(l*4);for(var d=0,h=[],u=i.start;u<i.end;u++){var f=n.getLineCoords(u,o);t&&(s[d++]=f);for(var m=0;m<f;m++)h=e.dataToPoint(o[m],!1,h),s[d++]=h[0],s[d++]=h[1]}a.setLayout("linesPoints",s)}else for(var u=i.start;u<i.end;u++){var v=a.getItemModel(u),f=n.getLineCoords(u,o),y=[];if(t)for(var w=0;w<f;w++)y.push(e.dataToPoint(o[w]));else{y[0]=e.dataToPoint(o[0]),y[1]=e.dataToPoint(o[1]);var _=v.get(["lineStyle","curveness"]);+_&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*_,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*_])}a.setItemLayout(u,y)}}}}}},fwt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._updateLineDraw(a,t),s=t.get("zlevel"),l=t.get(["effect","trailLength"]),c=i.getZr(),u=c.painter.getType()==="svg";u||c.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!u&&c.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&l>0&&(u||c.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var d=t.get("clip",!0)&&E2(t.coordinateSystem,!1,t);d?this.group.setClipPath(d):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),o=this._updateLineDraw(a,t);o.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._lineDraw.incrementalUpdate(t,r.getData()),this._finished=t.end===r.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,r,i){var a=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=NCe.reset(t,r,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},e.prototype._updateLineDraw=function(t,r){var i=this._lineDraw,a=this._showEffect(r),o=!!r.get("polyline"),s=r.pipelineContext,l=s.large;return(!i||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=l?new hwt:new zK(o?a?cwt:RCe:a?OCe:VK),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(i.group),i},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var r=t.getZr(),i=r.painter.getType()==="svg";!i&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.type="lines",e}(ti),pwt=typeof Uint32Array>"u"?Array:Uint32Array,gwt=typeof Float64Array>"u"?Array:Float64Array;function Hde(n){var e=n.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(n.data=Ue(e,function(t){var r=[t[0].coord,t[1].coord],i={coords:r};return t[0].name&&(i.fromName=t[0].name),t[1].name&&(i.toName=t[1].name),xY([i,t[0],t[1]])}))}var mwt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],Hde(t);var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count)),n.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(Hde(t),t.data){var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count))}n.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var r=this._processFlatCoordsArray(t.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=Gk(this._flatCoords,r.flatCoords),this._flatCoordsOffset=Gk(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),t.data=new Float32Array(r.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var r=this.getData().getItemModel(t),i=r.option instanceof Array?r.option:r.getShallow("coords");return i},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,r){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[t*2],a=this._flatCoordsOffset[t*2+1],o=0;o<a;o++)r[o]=r[o]||[],r[o][0]=this._flatCoords[i+o*2],r[o][1]=this._flatCoords[i+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(t),o=0;o<s.length;o++)r[o]=r[o]||[],r[o][0]=s[o][0],r[o][1]=s[o][1];return s.length}},e.prototype._processFlatCoordsArray=function(t){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),ur(t[0])){for(var i=t.length,a=new pwt(i),o=new gwt(i),s=0,l=0,c=0,u=0;u<i;){c++;var d=t[u++];a[l++]=s+r,a[l++]=d;for(var h=0;h<d;h++){var f=t[u++],m=t[u++];o[s++]=f,o[s++]=m}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:c}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,r){var i=new xl(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(a,o,s,l){if(a instanceof Array)return NaN;i.hasItemOption=!0;var c=a.value;if(c!=null)return c instanceof Array?c[l]:c}),i},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=a.getItemModel(t),s=o.get("name");if(s)return s;var l=o.get("fromName"),c=o.get("toName"),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),To("nameValue",{name:u.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),r=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(bi);function eO(n){return n instanceof Array||(n=[n,n]),n}var vwt={seriesType:"lines",reset:function(n){var e=eO(n.get("symbol")),t=eO(n.get("symbolSize")),r=n.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",t&&t[0]),r.setVisual("toSymbolSize",t&&t[1]);function i(a,o){var s=a.getItemModel(o),l=eO(s.getShallow("symbol",!0)),c=eO(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),c[0]&&a.setItemVisual(o,"fromSymbolSize",c[0]),c[1]&&a.setItemVisual(o,"toSymbolSize",c[1])}return{dataEach:r.hasItemOption?i:null}}};function ywt(n){n.registerChartView(fwt),n.registerSeriesModel(mwt),n.registerLayout(NCe),n.registerVisual(vwt)}var bwt=256,wwt=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=dy.createCanvas();this.canvas=e}return n.prototype.update=function(e,t,r,i,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),c=this._getGradient(a,"outOfRange"),u=this.pointSize+this.blurSize,d=this.canvas,h=d.getContext("2d"),f=e.length;d.width=t,d.height=r;for(var m=0;m<f;++m){var v=e[m],y=v[0],w=v[1],_=v[2],S=i(_);h.globalAlpha=S,h.drawImage(s,y-u,w-u)}if(!d.width||!d.height)return d;for(var A=h.getImageData(0,0,d.width,d.height),C=A.data,D=0,M=C.length,P=this.minOpacity,O=this.maxOpacity,j=O-P;D<M;){var S=C[D+3]/256,L=Math.floor(S*(bwt-1))*4;if(S>0){var B=o(S)?l:c;S>0&&(S=S*j+P),C[D++]=B[L],C[D++]=B[L+1],C[D++]=B[L+2],C[D++]=B[L+3]*S*256}else D+=4}return h.putImageData(A,0,0),d},n.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=dy.createCanvas()),t=this.pointSize+this.blurSize,r=t*2;e.width=r,e.height=r;var i=e.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),e},n.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,i=r[t]||(r[t]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[t](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i},n}();function _wt(n,e,t){var r=n[1]-n[0];e=Ue(e,function(o){return{interval:[(o.interval[0]-n[0])/r,(o.interval[1]-n[0])/r]}});var i=e.length,a=0;return function(o){var s;for(s=a;s<i;s++){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<i&&t[s]}}function xwt(n,e){var t=n[1]-n[0];return e=[(e[0]-n[0])/t,(e[1]-n[0])/t],function(r){return r>=e[0]&&r<=e[1]}}function qde(n){var e=n.dimensions;return e[0]==="lng"&&e[1]==="lat"}var Swt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a;r.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===t&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=t.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(t,i,0,t.getData().count()):qde(o)&&this._renderOnGeo(o,t,a,i)},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll()},e.prototype.incrementalRender=function(t,r,i,a){var o=r.coordinateSystem;o&&(qde(o)?this.render(r,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Iy(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,r,i,a,o){var s=t.coordinateSystem,l=i_(s,"cartesian2d"),c,u,d,h;if(l){var f=s.getAxis("x"),m=s.getAxis("y");c=f.getBandWidth()+.5,u=m.getBandWidth()+.5,d=f.scale.getExtent(),h=m.scale.getExtent()}for(var v=this.group,y=t.getData(),w=t.getModel(["emphasis","itemStyle"]).getItemStyle(),_=t.getModel(["blur","itemStyle"]).getItemStyle(),S=t.getModel(["select","itemStyle"]).getItemStyle(),A=t.get(["itemStyle","borderRadius"]),C=So(t),D=t.getModel("emphasis"),M=D.get("focus"),P=D.get("blurScope"),O=D.get("disabled"),j=l?[y.mapDimension("x"),y.mapDimension("y"),y.mapDimension("value")]:[y.mapDimension("time"),y.mapDimension("value")],L=i;L<a;L++){var B=void 0,$=y.getItemVisual(L,"style");if(l){var Y=y.get(j[0],L),q=y.get(j[1],L);if(isNaN(y.get(j[2],L))||isNaN(Y)||isNaN(q)||Y<d[0]||Y>d[1]||q<h[0]||q>h[1])continue;var W=s.dataToPoint([Y,q]);B=new er({shape:{x:W[0]-c/2,y:W[1]-u/2,width:c,height:u},style:$})}else{if(isNaN(y.get(j[1],L)))continue;B=new er({z2:1,shape:s.dataToRect([y.get(j[0],L)]).contentShape,style:$})}if(y.hasItemOption){var X=y.getItemModel(L),te=X.getModel("emphasis");w=te.getModel("itemStyle").getItemStyle(),_=X.getModel(["blur","itemStyle"]).getItemStyle(),S=X.getModel(["select","itemStyle"]).getItemStyle(),A=X.get(["itemStyle","borderRadius"]),M=te.get("focus"),P=te.get("blurScope"),O=te.get("disabled"),C=So(X)}B.shape.r=A;var re=t.getRawValue(L),z="-";re&&re[2]!=null&&(z=re[2]+""),ms(B,C,{labelFetcher:t,labelDataIndex:L,defaultOpacity:$.opacity,defaultText:z}),B.ensureState("emphasis").style=w,B.ensureState("blur").style=_,B.ensureState("select").style=S,na(B,M,P,O),B.incremental=o,o&&(B.states.emphasis.hoverLayer=!0),v.add(B),y.setItemGraphicEl(L,B),this._progressiveEls&&this._progressiveEls.push(B)}},e.prototype._renderOnGeo=function(t,r,i,a){var o=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=r.getData(),c=this._hmLayer||this._hmLayer||new wwt;c.blurSize=r.get("blurSize"),c.pointSize=r.get("pointSize"),c.minOpacity=r.get("minOpacity"),c.maxOpacity=r.get("maxOpacity");var u=t.getViewRect().clone(),d=t.getRoamTransform();u.applyTransform(d);var h=Math.max(u.x,0),f=Math.max(u.y,0),m=Math.min(u.width+u.x,a.getWidth()),v=Math.min(u.height+u.y,a.getHeight()),y=m-h,w=v-f,_=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],S=l.mapArray(_,function(M,P,O){var j=t.dataToPoint([M,P]);return j[0]-=h,j[1]-=f,j.push(O),j}),A=i.getExtent(),C=i.type==="visualMap.continuous"?xwt(A,i.option.range):_wt(A,i.getPieceList(),i.option.selected);c.update(S,y,w,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},C);var D=new Yo({style:{width:y,height:w,x:h,y:f,image:c.canvas},silent:!0});this.group.add(D)},e.type="heatmap",e}(ti),Twt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=b2.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(bi);function Ewt(n){n.registerChartView(Swt),n.registerSeriesModel(Twt)}var Awt=["itemStyle","borderWidth"],Gde=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],yV=new Xg,Cwt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group,o=t.getData(),s=this._data,l=t.coordinateSystem,c=l.getBaseAxis(),u=c.isHorizontal(),d=l.master.getRect(),h={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:t,coordSys:l,coordSysExtent:[[d.x,d.x+d.width],[d.y,d.y+d.height]],isHorizontal:u,valueDim:Gde[+u],categoryDim:Gde[1-+u]};o.diff(s).add(function(m){if(o.hasValue(m)){var v=Yde(o,m),y=Wde(o,m,v,h),w=Kde(o,h,y);o.setItemGraphicEl(m,w),a.add(w),Zde(w,h,y)}}).update(function(m,v){var y=s.getItemGraphicEl(v);if(!o.hasValue(m)){a.remove(y);return}var w=Yde(o,m),_=Wde(o,m,w,h),S=UCe(o,_);y&&S!==y.__pictorialShapeStr&&(a.remove(y),o.setItemGraphicEl(m,null),y=null),y?Rwt(y,h,_):y=Kde(o,h,_,!0),o.setItemGraphicEl(m,y),y.__pictorialSymbolMeta=_,a.add(y),Zde(y,h,_)}).remove(function(m){var v=s.getItemGraphicEl(m);v&&Xde(s,m,v.__pictorialSymbolMeta.animationModel,v)}).execute();var f=t.get("clip",!0)?E2(t.coordinateSystem,!1,t):null;return f?a.setClipPath(f):a.removeClipPath(),this._data=o,this.group},e.prototype.remove=function(t,r){var i=this.group,a=this._data;t.get("animation")?a&&a.eachItemGraphicEl(function(o){Xde(a,Wt(o).dataIndex,t,o)}):i.removeAll()},e.type="pictorialBar",e}(ti);function Wde(n,e,t,r){var i=n.getItemLayout(e),a=t.get("symbolRepeat"),o=t.get("symbolClip"),s=t.get("symbolPosition")||"start",l=t.get("symbolRotate"),c=(l||0)*Math.PI/180||0,u=t.get("symbolPatternSize")||2,d=t.isAnimationEnabled(),h={dataIndex:e,layout:i,itemModel:t,symbolType:n.getItemVisual(e,"symbol")||"circle",style:n.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:c,animationModel:d?t:null,hoverScale:d&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};Dwt(t,a,i,r,h),kwt(n,e,i,a,o,h.boundingLength,h.pxSign,u,r,h),Iwt(t,h.symbolScale,c,r,h);var f=h.symbolSize,m=n_(t.get("symbolOffset"),f);return Mwt(t,f,i,a,o,m,s,h.valueLineWidth,h.boundingLength,h.repeatCutLength,r,h),h}function Dwt(n,e,t,r,i){var a=r.valueDim,o=n.get("symbolBoundingData"),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),c=1-+(t[a.wh]<=0),u;if($e(o)){var d=[bV(s,o[0])-l,bV(s,o[1])-l];d[1]<d[0]&&d.reverse(),u=d[c]}else o!=null?u=bV(s,o)-l:e?u=r.coordSysExtent[a.index][c]-l:u=t[a.wh];i.boundingLength=u,e&&(i.repeatCutLength=t[a.wh]);var h=a.xy==="x",f=s.inverse;i.pxSign=h&&!f||!h&&f?u>=0?1:-1:u>0?1:-1}function bV(n,e){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(e)))}function kwt(n,e,t,r,i,a,o,s,l,c){var u=l.valueDim,d=l.categoryDim,h=Math.abs(t[d.wh]),f=n.getItemVisual(e,"symbolSize"),m;$e(f)?m=f.slice():f==null?m=["100%","100%"]:m=[f,f],m[d.index]=Je(m[d.index],h),m[u.index]=Je(m[u.index],r?h:Math.abs(a)),c.symbolSize=m;var v=c.symbolScale=[m[0]/s,m[1]/s];v[u.index]*=(l.isHorizontal?-1:1)*o}function Iwt(n,e,t,r,i){var a=n.get(Awt)||0;a&&(yV.attr({scaleX:e[0],scaleY:e[1],rotation:t}),yV.updateTransform(),a/=yV.getLineScale(),a*=e[r.valueDim.index]),i.valueLineWidth=a||0}function Mwt(n,e,t,r,i,a,o,s,l,c,u,d){var h=u.categoryDim,f=u.valueDim,m=d.pxSign,v=Math.max(e[f.index]+s,0),y=v;if(r){var w=Math.abs(l),_=Ho(n.get("symbolMargin"),"15%")+"",S=!1;_.lastIndexOf("!")===_.length-1&&(S=!0,_=_.slice(0,_.length-1));var A=Je(_,e[f.index]),C=Math.max(v+A*2,0),D=S?0:A*2,M=qSe(r),P=M?r:Qde((w+D)/C),O=w-P*v;A=O/2/(S?P:Math.max(P-1,1)),C=v+A*2,D=S?0:A*2,!M&&r!=="fixed"&&(P=c?Qde((Math.abs(c)+D)/C):0),y=P*C-D,d.repeatTimes=P,d.symbolMargin=A}var j=m*(y/2),L=d.pathPosition=[];L[h.index]=t[h.wh]/2,L[f.index]=o==="start"?j:o==="end"?l-j:l/2,a&&(L[0]+=a[0],L[1]+=a[1]);var B=d.bundlePosition=[];B[h.index]=t[h.xy],B[f.index]=t[f.xy];var $=d.barRectShape=Pe({},t);$[f.wh]=m*Math.max(Math.abs(t[f.wh]),Math.abs(L[f.index]+j)),$[h.wh]=t[h.wh];var Y=d.clipShape={};Y[h.xy]=-t[h.xy],Y[h.wh]=u.ecSize[h.wh],Y[f.xy]=0,Y[f.wh]=t[f.wh]}function LCe(n){var e=n.symbolPatternSize,t=za(n.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function jCe(n,e,t,r){var i=n.__pictorialBundle,a=t.symbolSize,o=t.valueLineWidth,s=t.pathPosition,l=e.valueDim,c=t.repeatTimes||0,u=0,d=a[e.valueDim.index]+o+t.symbolMargin*2;for(JK(n,function(v){v.__pictorialAnimationIndex=u,v.__pictorialRepeatTimes=c,u<c?f1(v,null,m(u),t,r):f1(v,null,{scaleX:0,scaleY:0},t,r,function(){i.remove(v)}),u++});u<c;u++){var h=LCe(t);h.__pictorialAnimationIndex=u,h.__pictorialRepeatTimes=c,i.add(h);var f=m(u);f1(h,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},t,r)}function m(v){var y=s.slice(),w=t.pxSign,_=v;return(t.symbolRepeatDirection==="start"?w>0:w<0)&&(_=c-1-v),y[l.index]=d*(_-c/2+.5)+s[l.index],{x:y[0],y:y[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function FCe(n,e,t,r){var i=n.__pictorialBundle,a=n.__pictorialMainPath;a?f1(a,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,r):(a=n.__pictorialMainPath=LCe(t),i.add(a),f1(a,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,r))}function $Ce(n,e,t){var r=Pe({},e.barRectShape),i=n.__pictorialBarRect;i?f1(i,null,{shape:r},e,t):(i=n.__pictorialBarRect=new er({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,n.add(i))}function BCe(n,e,t,r){if(t.symbolClip){var i=n.__pictorialClipPath,a=Pe({},t.clipShape),o=e.valueDim,s=t.animationModel,l=t.dataIndex;if(i)fr(i,{shape:a},s,l);else{a[o.wh]=0,i=new er({shape:a}),n.__pictorialBundle.setClipPath(i),n.__pictorialClipPath=i;var c={};c[o.wh]=t.clipShape[o.wh],t_[r?"updateProps":"initProps"](i,{shape:c},s,l)}}}function Yde(n,e){var t=n.getItemModel(e);return t.getAnimationDelayParams=Pwt,t.isAnimationEnabled=Owt,t}function Pwt(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function Owt(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Kde(n,e,t,r){var i=new zt,a=new zt;return i.add(a),i.__pictorialBundle=a,a.x=t.bundlePosition[0],a.y=t.bundlePosition[1],t.symbolRepeat?jCe(i,e,t):FCe(i,e,t),$Ce(i,t,r),BCe(i,e,t,r),i.__pictorialShapeStr=UCe(n,t),i.__pictorialSymbolMeta=t,i}function Rwt(n,e,t){var r=t.animationModel,i=t.dataIndex,a=n.__pictorialBundle;fr(a,{x:t.bundlePosition[0],y:t.bundlePosition[1]},r,i),t.symbolRepeat?jCe(n,e,t,!0):FCe(n,e,t,!0),$Ce(n,t,!0),BCe(n,e,t,!0)}function Xde(n,e,t,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];JK(r,function(o){a.push(o)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(t=null),Z(a,function(o){fy(o,{scaleX:0,scaleY:0},t,e,function(){r.parent&&r.parent.remove(r)})}),n.setItemGraphicEl(e,null)}function UCe(n,e){return[n.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function JK(n,e,t){Z(n.__pictorialBundle.children(),function(r){r!==n.__pictorialBarRect&&e.call(t,r)})}function f1(n,e,t,r,i,a){e&&n.attr(e),r.symbolClip&&!i?t&&n.attr(t):t&&t_[i?"updateProps":"initProps"](n,t,r.animationModel,r.dataIndex,a)}function Zde(n,e,t){var r=t.dataIndex,i=t.itemModel,a=i.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),c=i.getShallow("cursor"),u=a.get("focus"),d=a.get("blurScope"),h=a.get("scale");JK(n,function(v){if(v instanceof Yo){var y=v.style;v.useStyle(Pe({image:y.image,x:y.x,y:y.y,width:y.width,height:y.height},t.style))}else v.useStyle(t.style);var w=v.ensureState("emphasis");w.style=o,h&&(w.scaleX=v.scaleX*1.1,w.scaleY=v.scaleY*1.1),v.ensureState("blur").style=s,v.ensureState("select").style=l,c&&(v.cursor=c),v.z2=t.z2});var f=e.valueDim.posDesc[+(t.boundingLength>0)],m=n.__pictorialBarRect;m.ignoreClip=!0,ms(m,So(i),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:rT(e.seriesModel.getData(),r),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:f}),na(n,u,d,a.get("disabled"))}function Qde(n){var e=Math.round(n);return Math.abs(n-e)<1e-4?e:Math.ceil(n)}var Nwt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,n.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=My(uI.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(uI);function Lwt(n){n.registerChartView(Cwt),n.registerSeriesModel(Nwt),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,en(TEe,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,EEe("pictorialBar"))}var jwt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this,s=this.group,l=t.getLayerSeries(),c=a.getLayout("layoutInfo"),u=c.rect,d=c.boundaryGap;s.x=0,s.y=u.y+d[0];function h(y){return y.name}var f=new Ng(this._layersSeries||[],l,h,h),m=[];f.add(dt(v,this,"add")).update(dt(v,this,"update")).remove(dt(v,this,"remove")).execute();function v(y,w,_){var S=o._layers;if(y==="remove"){s.remove(S[w]);return}for(var A=[],C=[],D,M=l[w].indices,P=0;P<M.length;P++){var O=a.getItemLayout(M[P]),j=O.x,L=O.y0,B=O.y;A.push(j,L),C.push(j,L+B),D=a.getItemVisual(M[P],"style")}var $,Y=a.getItemLayout(M[0]),q=t.getModel("label"),W=q.get("margin"),X=t.getModel("emphasis");if(y==="add"){var te=m[w]=new zt;$=new fAe({shape:{points:A,stackedOnPoints:C,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),te.add($),s.add(te),t.isAnimationEnabled()&&$.setClipPath(Fwt($.getBoundingRect(),t,function(){$.removeClipPath()}))}else{var te=S[_];$=te.childAt(0),s.add(te),m[w]=te,fr($,{shape:{points:A,stackedOnPoints:C}},t),uh($)}ms($,So(t),{labelDataIndex:M[P-1],defaultText:a.getName(M[P-1]),inheritColor:D.fill},{normal:{verticalAlign:"middle"}}),$.setTextConfig({position:null,local:!0});var re=$.getTextContent();re&&(re.x=Y.x-W,re.y=Y.y0+Y.y/2),$.useStyle(D),a.setItemGraphicEl(w,$),gs($,t),na($,X.get("focus"),X.get("blurScope"),X.get("disabled"))}this._layersSeries=l,this._layers=m},e.type="themeRiver",e}(ti);function Fwt(n,e,t){var r=new er({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return Ni(r,{shape:{x:n.x-50,width:n.width+100,height:n.height+20}},e,t),r}var wV=2,$wt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new D2(dt(this.getData,this),dt(this.getRawData,this))},e.prototype.fixData=function(t){var r=t.length,i={},a=e8(t,function(h){return i.hasOwnProperty(h[0]+"")||(i[h[0]+""]=-1),h[2]}),o=[];a.buckets.each(function(h,f){o.push({name:f,dataList:h})});for(var s=o.length,l=0;l<s;++l){for(var c=o[l].name,u=0;u<o[l].dataList.length;++u){var d=o[l].dataList[u][0]+"";i[d]=l}for(var d in i)i.hasOwnProperty(d)&&i[d]!==l&&(i[d]=l,t[r]=[d,0,c],r++)}return t},e.prototype.getInitialData=function(t,r){for(var i=this.getReferringComponents("singleAxis",Va).models[0],a=i.get("type"),o=Cr(t.data,function(m){return m[2]!==void 0}),s=this.fixData(o||[]),l=[],c=this.nameMap=_t(),u=0,d=0;d<s.length;++d)l.push(s[d][wV]),c.get(s[d][wV])||(c.set(s[d][wV],u),u++);var h=_2(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:rL(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new xl(h,this);return f.initData(s),f},e.prototype.getLayerSeries=function(){for(var t=this.getData(),r=t.count(),i=[],a=0;a<r;++a)i[a]=a;var o=t.mapDimension("single"),s=e8(i,function(c){return t.get("name",c)}),l=[];return s.buckets.each(function(c,u){c.sort(function(d,h){return t.get(o,d)-t.get(o,h)}),l.push({name:u,indices:c})}),l},e.prototype.getAxisTooltipData=function(t,r,i){$e(t)||(t=t?[t]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,c,u=0;u<l;++u){for(var d=Number.MAX_VALUE,h=-1,f=o[u].indices.length,m=0;m<f;++m){var v=a.get(t[0],o[u].indices[m]),y=Math.abs(v-r);y<=d&&(c=v,d=y,h=o[u].indices[m])}s.push(h)}return{dataIndices:s,nestestValue:c}},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=a.getName(t),s=a.get(a.mapDimension("value"),t);return To("nameValue",{name:o,value:s})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(bi);function Bwt(n,e){n.eachSeriesByType("themeRiver",function(t){var r=t.getData(),i=t.coordinateSystem,a={},o=i.getRect();a.rect=o;var s=t.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=Je(s[0],o.height),s[1]=Je(s[1],o.height);var c=o.height-s[0]-s[1];Jde(r,t,c)}else{s[0]=Je(s[0],o.width),s[1]=Je(s[1],o.width);var u=o.width-s[0]-s[1];Jde(r,t,u)}r.setLayout("layoutInfo",a)})}function Jde(n,e,t){if(n.count())for(var r=e.coordinateSystem,i=e.getLayerSeries(),a=n.mapDimension("single"),o=n.mapDimension("value"),s=Ue(i,function(y){return Ue(y.indices,function(w){var _=r.dataToPoint(n.get(a,w));return _[1]=n.get(o,w),_})}),l=Uwt(s),c=l.y0,u=t/l.max,d=i.length,h=i[0].indices.length,f,m=0;m<h;++m){f=c[m]*u,n.setItemLayout(i[0].indices[m],{layerIndex:0,x:s[0][m][0],y0:f,y:s[0][m][1]*u});for(var v=1;v<d;++v)f+=s[v-1][m][1]*u,n.setItemLayout(i[v].indices[m],{layerIndex:v,x:s[v][m][0],y0:f,y:s[v][m][1]*u})}}function Uwt(n){for(var e=n.length,t=n[0].length,r=[],i=[],a=0,o=0;o<t;++o){for(var s=0,l=0;l<e;++l)s+=n[l][o][1];s>a&&(a=s),r.push(s)}for(var c=0;c<t;++c)i[c]=(a-r[c])/2;a=0;for(var u=0;u<t;++u){var d=r[u]+i[u];d>a&&(a=d)}return{y0:i,max:a}}function Vwt(n){n.registerChartView(jwt),n.registerSeriesModel($wt),n.registerLayout(Bwt),n.registerProcessor(C2("themeRiver"))}var zwt=2,Hwt=4,ehe=function(n){Te(e,n);function e(t,r,i,a){var o=n.call(this)||this;o.z2=zwt,o.textConfig={inside:!0},Wt(o).seriesIndex=r.seriesIndex;var s=new sr({z2:Hwt,silent:t.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,t,r,i,a),o}return e.prototype.updateData=function(t,r,i,a,o){this.node=r,r.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var s=this;Wt(s).dataIndex=r.dataIndex;var l=r.getModel(),c=l.getModel("emphasis"),u=r.getLayout(),d=Pe({},u);d.label=null;var h=r.getVisual("style");h.lineJoin="bevel";var f=r.getVisual("decal");f&&(h.decal=tT(f,o));var m=aw(l.getModel("itemStyle"),d,!0);Pe(d,m),Z(El,function(_){var S=s.ensureState(_),A=l.getModel([_,"itemStyle"]);S.style=A.getItemStyle();var C=aw(A,d);C&&(S.shape=C)}),t?(s.setShape(d),s.shape.r=u.r0,Ni(s,{shape:{r:u.r}},i,r.dataIndex)):(fr(s,{shape:d},i),uh(s)),s.useStyle(h),this._updateLabel(i);var v=l.getShallow("cursor");v&&s.attr("cursor",v),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var y=c.get("focus"),w=y==="relative"?Gk(r.getAncestorsIndices(),r.getDescendantIndices()):y==="ancestor"?r.getAncestorsIndices():y==="descendant"?r.getDescendantIndices():y;na(this,w,c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t){var r=this,i=this.node.getModel(),a=i.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,c=Math.cos(l),u=Math.sin(l),d=this,h=d.getTextContent(),f=this.node.dataIndex,m=a.get("minAngle")/180*Math.PI,v=a.get("show")&&!(m!=null&&Math.abs(s)<m);h.ignore=!v,Z(Qk,function(w){var _=w==="normal"?i.getModel("label"):i.getModel([w,"label"]),S=w==="normal",A=S?h:h.ensureState(w),C=t.getFormattedLabel(f,w);S&&(C=C||r.node.name),A.style=vi(_,{},null,w!=="normal",!0),C&&(A.style.text=C);var D=_.get("show");D!=null&&!S&&(A.ignore=!D);var M=y(_,"position"),P=S?d:d.states[w],O=P.style.fill;P.textConfig={outsideFill:_.get("color")==="inherit"?O:null,inside:M!=="outside"};var j,L=y(_,"distance")||0,B=y(_,"align"),$=y(_,"rotate"),Y=Math.PI*.5,q=Math.PI*1.5,W=zc($==="tangential"?Math.PI/2-l:l),X=W>Y&&!Xk(W-Y)&&W<q;M==="outside"?(j=o.r+L,B=X?"right":"left"):!B||B==="center"?(s===2*Math.PI&&o.r0===0?j=0:j=(o.r+o.r0)/2,B="center"):B==="left"?(j=o.r0+L,B=X?"right":"left"):B==="right"&&(j=o.r-L,B=X?"left":"right"),A.style.align=B,A.style.verticalAlign=y(_,"verticalAlign")||"middle",A.x=j*c+o.cx,A.y=j*u+o.cy;var te=0;$==="radial"?te=zc(-l)+(X?Math.PI:0):$==="tangential"?te=zc(Math.PI/2-l)+(X?Math.PI:0):ur($)&&(te=$*Math.PI/180),A.rotation=zc(te)});function y(w,_){var S=w.get(_);return S??a.get(_)}h.dirtyStyle()},e}(Al),eq="sunburstRootToNode",the="sunburstHighlight",qwt="sunburstUnhighlight";function Gwt(n){n.registerAction({type:eq,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,a){var o=hI(e,[eq],i);if(o){var s=i.getViewRoot();s&&(e.direction=jK(s,o.node)?"rollUp":"drillDown"),i.resetViewRoot(o.node)}}}),n.registerAction({type:the,update:"none"},function(e,t,r){e=Pe({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(a){var o=hI(e,[the],a);o&&(e.dataIndex=o.node.dataIndex)}r.dispatchAction(Pe(e,{type:"highlight"}))}),n.registerAction({type:qwt,update:"updateView"},function(e,t,r){e=Pe({},e),r.dispatchAction(Pe(e,{type:"downplay"}))})}var Wwt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){var o=this;this.seriesModel=t,this.api=i,this.ecModel=r;var s=t.getData(),l=s.tree.root,c=t.getViewRoot(),u=this.group,d=t.get("renderLabelForZeroData"),h=[];c.eachNode(function(_){h.push(_)});var f=this._oldChildren||[];m(h,f),w(l,c),this._initEvents(),this._oldChildren=h;function m(_,S){if(_.length===0&&S.length===0)return;new Ng(S,_,A,A).add(C).update(C).remove(en(C,null)).execute();function A(D){return D.getId()}function C(D,M){var P=D==null?null:_[D],O=M==null?null:S[M];v(P,O)}}function v(_,S){if(!d&&_&&!_.getValue()&&(_=null),_!==l&&S!==l){if(S&&S.piece)_?(S.piece.updateData(!1,_,t,r,i),s.setItemGraphicEl(_.dataIndex,S.piece)):y(S);else if(_){var A=new ehe(_,t,r,i);u.add(A),s.setItemGraphicEl(_.dataIndex,A)}}}function y(_){_&&_.piece&&(u.remove(_.piece),_.piece=null)}function w(_,S){S.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,_,t,r,i):(o.virtualPiece=new ehe(_,t,r,i),u.add(o.virtualPiece)),S.piece.off("click"),o.virtualPiece.on("click",function(A){o._rootToNode(S.parentNode)})):o.virtualPiece&&(u.remove(o.virtualPiece),o.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,a=t.seriesModel.getViewRoot();a.eachNode(function(o){if(!i&&o.piece&&o.piece===r.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")t._rootToNode(o);else if(s==="link"){var l=o.getModel(),c=l.get("link");if(c){var u=l.get("target",!0)||"_blank";KN(c,u)}}i=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:eq,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="sunburst",e}(ti),Ywt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};VCe(i);var a=this._levelModels=Ue(t.levels||[],function(l){return new Ir(l,this,r)},this),o=LK.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(c,u){var d=o.getNodeByDataIndex(u),h=a[d.depth];return h&&(c.parentModel=h),c})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=K5(i,this),r},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){WAe(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(bi);function VCe(n){var e=0;Z(n.children,function(r){VCe(r);var i=r.value;$e(i)&&(i=i[0]),e+=i});var t=n.value;$e(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),$e(n.value)?n.value[0]=t:n.value=t}var nhe=Math.PI/180;function Kwt(n,e,t){e.eachSeriesByType(n,function(r){var i=r.get("center"),a=r.get("radius");$e(a)||(a=[0,a]),$e(i)||(i=[i,i]);var o=t.getWidth(),s=t.getHeight(),l=Math.min(o,s),c=Je(i[0],o),u=Je(i[1],s),d=Je(a[0],l/2),h=Je(a[1],l/2),f=-r.get("startAngle")*nhe,m=r.get("minAngle")*nhe,v=r.getData().tree.root,y=r.getViewRoot(),w=y.depth,_=r.get("sort");_!=null&&zCe(y,_);var S=0;Z(y.children,function(W){!isNaN(W.getValue())&&S++});var A=y.getValue(),C=Math.PI/(A||S)*2,D=y.depth>0,M=y.height-(D?-1:1),P=(h-d)/(M||1),O=r.get("clockwise"),j=r.get("stillShowZeroSum"),L=O?1:-1,B=function(W,X){if(W){var te=X;if(W!==v){var re=W.getValue(),z=A===0&&j?C:re*C;z<m&&(z=m),te=X+L*z;var oe=W.depth-w-(D?-1:1),le=d+P*oe,ee=d+P*(oe+1),be=r.getLevelModel(W);if(be){var he=be.get("r0",!0),pe=be.get("r",!0),ct=be.get("radius",!0);ct!=null&&(he=ct[0],pe=ct[1]),he!=null&&(le=Je(he,l/2)),pe!=null&&(ee=Je(pe,l/2))}W.setLayout({angle:z,startAngle:X,endAngle:te,clockwise:O,cx:c,cy:u,r0:le,r:ee})}if(W.children&&W.children.length){var Be=0;Z(W.children,function(Se){Be+=B(Se,X+Be)})}return te-X}};if(D){var $=d,Y=d+P,q=Math.PI*2;v.setLayout({angle:q,startAngle:f,endAngle:f+q,clockwise:O,cx:c,cy:u,r0:$,r:Y})}B(y,f)})}function zCe(n,e){var t=n.children||[];n.children=Xwt(t,e),t.length&&Z(n.children,function(r){zCe(r,e)})}function Xwt(n,e){if(kt(e)){var t=Ue(n,function(i,a){var o=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return o}},index:a}});return t.sort(function(i,a){return e(i.params,a.params)}),Ue(t,function(i){return n[i.index]})}else{var r=e==="asc";return n.sort(function(i,a){var o=(i.getValue()-a.getValue())*(r?1:-1);return o===0?(i.dataIndex-a.dataIndex)*(r?-1:1):o})}}function Zwt(n){var e={};function t(r,i,a){for(var o=r;o&&o.depth>1;)o=o.parentNode;var s=i.getColorFromPalette(o.name||o.dataIndex+"",e);return r.depth>1&&st(s)&&(s=VH(s,(r.depth-1)/(a-1)*.5)),s}n.eachSeriesByType("sunburst",function(r){var i=r.getData(),a=i.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=t(o,r,a.root.height));var c=i.ensureUniqueItemVisual(o.dataIndex,"style");Pe(c,l)})})}function Qwt(n){n.registerChartView(Wwt),n.registerSeriesModel(Ywt),n.registerLayout(en(Kwt,"sunburst")),n.registerProcessor(en(C2,"sunburst")),n.registerVisual(Zwt),Gwt(n)}var rhe={color:"fill",borderColor:"stroke"},Jwt={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},wg=tr(),e_t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,r){return Zg(null,this)},e.prototype.getDataParams=function(t,r,i){var a=n.prototype.getDataParams.call(this,t,r);return i&&(a.info=wg(i).info),a},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(bi);function t_t(n,e){return e=e||[0,0],Ue(["x","y"],function(t,r){var i=this.getAxis(t),a=e[r],o=n[r]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-o)-i.dataToCoord(a+o))},this)}function n_t(n){var e=n.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:dt(t_t,n)}}}function r_t(n,e){return e=e||[0,0],Ue([0,1],function(t){var r=e[t],i=n[t]/2,a=[],o=[];return a[t]=r-i,o[t]=r+i,a[1-t]=o[1-t]=e[1-t],Math.abs(this.dataToPoint(a)[t]-this.dataToPoint(o)[t])},this)}function i_t(n){var e=n.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:n.getZoom()},api:{coord:function(t){return n.dataToPoint(t)},size:dt(r_t,n)}}}function a_t(n,e){var t=this.getAxis(),r=e instanceof Array?e[0]:e,i=(n instanceof Array?n[0]:n)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(r-i)-t.dataToCoord(r+i))}function o_t(n){var e=n.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:dt(a_t,n)}}}function s_t(n,e){return e=e||[0,0],Ue(["Radius","Angle"],function(t,r){var i="get"+t+"Axis",a=this[i](),o=e[r],s=n[r]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return t==="Angle"&&(l=l*Math.PI/180),l},this)}function l_t(n){var e=n.getRadiusAxis(),t=n.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:r[1],r0:r[0]},api:{coord:function(i){var a=e.dataToRadius(i[0]),o=t.dataToAngle(i[1]),s=n.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:dt(s_t,n)}}}function c_t(n){var e=n.getRect(),t=n.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(r,i){return n.dataToPoint(r,i)}}}}function HCe(n,e,t,r){return n&&(n.legacy||n.legacy!==!1&&!t&&!r&&e!=="tspan"&&(e==="text"||ft(n,"text")))}function qCe(n,e,t){var r=n,i,a,o;if(e==="text")o=r;else{o={},ft(r,"text")&&(o.text=r.text),ft(r,"rich")&&(o.rich=r.rich),ft(r,"textFill")&&(o.fill=r.textFill),ft(r,"textStroke")&&(o.stroke=r.textStroke),ft(r,"fontFamily")&&(o.fontFamily=r.fontFamily),ft(r,"fontSize")&&(o.fontSize=r.fontSize),ft(r,"fontStyle")&&(o.fontStyle=r.fontStyle),ft(r,"fontWeight")&&(o.fontWeight=r.fontWeight),a={type:"text",style:o,silent:!0},i={};var s=ft(r,"textPosition");t?i.position=s?r.textPosition:"inside":s&&(i.position=r.textPosition),ft(r,"textPosition")&&(i.position=r.textPosition),ft(r,"textOffset")&&(i.offset=r.textOffset),ft(r,"textRotation")&&(i.rotation=r.textRotation),ft(r,"textDistance")&&(i.distance=r.textDistance)}return ihe(o,n),Z(o.rich,function(l){ihe(l,l)}),{textConfig:i,textContent:a}}function ihe(n,e){e&&(e.font=e.textFont||e.font,ft(e,"textStrokeWidth")&&(n.lineWidth=e.textStrokeWidth),ft(e,"textAlign")&&(n.align=e.textAlign),ft(e,"textVerticalAlign")&&(n.verticalAlign=e.textVerticalAlign),ft(e,"textLineHeight")&&(n.lineHeight=e.textLineHeight),ft(e,"textWidth")&&(n.width=e.textWidth),ft(e,"textHeight")&&(n.height=e.textHeight),ft(e,"textBackgroundColor")&&(n.backgroundColor=e.textBackgroundColor),ft(e,"textPadding")&&(n.padding=e.textPadding),ft(e,"textBorderColor")&&(n.borderColor=e.textBorderColor),ft(e,"textBorderWidth")&&(n.borderWidth=e.textBorderWidth),ft(e,"textBorderRadius")&&(n.borderRadius=e.textBorderRadius),ft(e,"textBoxShadowColor")&&(n.shadowColor=e.textBoxShadowColor),ft(e,"textBoxShadowBlur")&&(n.shadowBlur=e.textBoxShadowBlur),ft(e,"textBoxShadowOffsetX")&&(n.shadowOffsetX=e.textBoxShadowOffsetX),ft(e,"textBoxShadowOffsetY")&&(n.shadowOffsetY=e.textBoxShadowOffsetY))}function ahe(n,e,t){var r=n;r.textPosition=r.textPosition||t.position||"inside",t.offset!=null&&(r.textOffset=t.offset),t.rotation!=null&&(r.textRotation=t.rotation),t.distance!=null&&(r.textDistance=t.distance);var i=r.textPosition.indexOf("inside")>=0,a=n.fill||"#000";ohe(r,e);var o=r.textFill==null;return i?o&&(r.textFill=t.insideFill||"#fff",!r.textStroke&&t.insideStroke&&(r.textStroke=t.insideStroke),!r.textStroke&&(r.textStroke=a),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(o&&(r.textFill=n.fill||t.outsideFill||"#000"),!r.textStroke&&t.outsideStroke&&(r.textStroke=t.outsideStroke)),r.text=e.text,r.rich=e.rich,Z(e.rich,function(s){ohe(s,s)}),r}function ohe(n,e){e&&(ft(e,"fill")&&(n.textFill=e.fill),ft(e,"stroke")&&(n.textStroke=e.fill),ft(e,"lineWidth")&&(n.textStrokeWidth=e.lineWidth),ft(e,"font")&&(n.font=e.font),ft(e,"fontStyle")&&(n.fontStyle=e.fontStyle),ft(e,"fontWeight")&&(n.fontWeight=e.fontWeight),ft(e,"fontSize")&&(n.fontSize=e.fontSize),ft(e,"fontFamily")&&(n.fontFamily=e.fontFamily),ft(e,"align")&&(n.textAlign=e.align),ft(e,"verticalAlign")&&(n.textVerticalAlign=e.verticalAlign),ft(e,"lineHeight")&&(n.textLineHeight=e.lineHeight),ft(e,"width")&&(n.textWidth=e.width),ft(e,"height")&&(n.textHeight=e.height),ft(e,"backgroundColor")&&(n.textBackgroundColor=e.backgroundColor),ft(e,"padding")&&(n.textPadding=e.padding),ft(e,"borderColor")&&(n.textBorderColor=e.borderColor),ft(e,"borderWidth")&&(n.textBorderWidth=e.borderWidth),ft(e,"borderRadius")&&(n.textBorderRadius=e.borderRadius),ft(e,"shadowColor")&&(n.textBoxShadowColor=e.shadowColor),ft(e,"shadowBlur")&&(n.textBoxShadowBlur=e.shadowBlur),ft(e,"shadowOffsetX")&&(n.textBoxShadowOffsetX=e.shadowOffsetX),ft(e,"shadowOffsetY")&&(n.textBoxShadowOffsetY=e.shadowOffsetY),ft(e,"textShadowColor")&&(n.textShadowColor=e.textShadowColor),ft(e,"textShadowBlur")&&(n.textShadowBlur=e.textShadowBlur),ft(e,"textShadowOffsetX")&&(n.textShadowOffsetX=e.textShadowOffsetX),ft(e,"textShadowOffsetY")&&(n.textShadowOffsetY=e.textShadowOffsetY))}var GCe={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},she=Vn(GCe);Rf(Lf,function(n,e){return n[e]=1,n},{});Lf.join(", ");var gL=["","style","shape","extra"],oT=tr();function eX(n,e,t,r,i){var a=n+"Animation",o=NT(n,r,i)||{},s=oT(e).userDuring;return o.duration>0&&(o.during=s?dt(p_t,{el:e,userDuring:s}):null,o.setToFinal=!0,o.scope=n),Pe(o,t[a]),o}function nR(n,e,t,r){r=r||{};var i=r.dataIndex,a=r.isInit,o=r.clearStyle,s=t.isAnimationEnabled(),l=oT(n),c=e.style;l.userDuring=e.during;var u={},d={};if(m_t(n,e,d),che("shape",e,d),che("extra",e,d),!a&&s&&(g_t(n,e,u),lhe("shape",n,e,u),lhe("extra",n,e,u),v_t(n,e,c,u)),d.style=c,u_t(n,d,o),h_t(n,e),s)if(a){var h={};Z(gL,function(m){var v=m?e[m]:e;v&&v.enterFrom&&(m&&(h[m]=h[m]||{}),Pe(m?h[m]:h,v.enterFrom))});var f=eX("enter",n,e,t,i);f.duration>0&&n.animateFrom(h,f)}else d_t(n,e,i||0,t,u);WCe(n,e),c?n.dirty():n.markRedraw()}function WCe(n,e){for(var t=oT(n).leaveToProps,r=0;r<gL.length;r++){var i=gL[r],a=i?e[i]:e;a&&a.leaveTo&&(t||(t=oT(n).leaveToProps={}),i&&(t[i]=t[i]||{}),Pe(i?t[i]:t,a.leaveTo))}}function Q5(n,e,t,r){if(n){var i=n.parent,a=oT(n).leaveToProps;if(a){var o=eX("update",n,e,t,0);o.done=function(){i.remove(n)},n.animateTo(a,o)}else i.remove(n)}}function xw(n){return n==="all"}function u_t(n,e,t){var r=e.style;if(!n.isGroup&&r){if(t){n.useStyle({});for(var i=n.animators,a=0;a<i.length;a++){var o=i[a];o.targetName==="style"&&o.changeTarget(n.style)}}n.setStyle(r)}e&&(e.style=null,e&&n.attr(e),e.style=r)}function d_t(n,e,t,r,i){if(i){var a=eX("update",n,e,r,t);a.duration>0&&n.animateFrom(i,a)}}function h_t(n,e){ft(e,"silent")&&(n.silent=e.silent),ft(e,"ignore")&&(n.ignore=e.ignore),n instanceof Qu&&ft(e,"invisible")&&(n.invisible=e.invisible),n instanceof Mn&&ft(e,"autoBatch")&&(n.autoBatch=e.autoBatch)}var rf={},f_t={setTransform:function(n,e){return rf.el[n]=e,this},getTransform:function(n){return rf.el[n]},setShape:function(n,e){var t=rf.el,r=t.shape||(t.shape={});return r[n]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(n){var e=rf.el.shape;if(e)return e[n]},setStyle:function(n,e){var t=rf.el,r=t.style;return r&&(r[n]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(n){var e=rf.el.style;if(e)return e[n]},setExtra:function(n,e){var t=rf.el.extra||(rf.el.extra={});return t[n]=e,this},getExtra:function(n){var e=rf.el.extra;if(e)return e[n]}};function p_t(){var n=this,e=n.el;if(e){var t=oT(e).userDuring,r=n.userDuring;if(t!==r){n.el=n.userDuring=null;return}rf.el=e,r(f_t)}}function lhe(n,e,t,r){var i=t[n];if(i){var a=e[n],o;if(a){var s=t.transition,l=i.transition;if(l)if(!o&&(o=r[n]={}),xw(l))Pe(o,a);else for(var c=Wr(l),u=0;u<c.length;u++){var d=c[u],h=a[d];o[d]=h}else if(xw(s)||_n(s,n)>=0){!o&&(o=r[n]={});for(var f=Vn(a),u=0;u<f.length;u++){var d=f[u],h=a[d];y_t(i[d],h)&&(o[d]=h)}}}}}function che(n,e,t){var r=e[n];if(r)for(var i=t[n]={},a=Vn(r),o=0;o<a.length;o++){var s=a[o];i[s]=_D(r[s])}}function g_t(n,e,t){for(var r=e.transition,i=xw(r)?Lf:Wr(r||[]),a=0;a<i.length;a++){var o=i[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=n[o];t[o]=s}}}function m_t(n,e,t){for(var r=0;r<she.length;r++){var i=she[r],a=GCe[i],o=e[i];o&&(t[a[0]]=o[0],t[a[1]]=o[1])}for(var r=0;r<Lf.length;r++){var s=Lf[r];e[s]!=null&&(t[s]=e[s])}}function v_t(n,e,t,r){if(t){var i=n.style,a;if(i){var o=t.transition,s=e.transition;if(o&&!xw(o)){var l=Wr(o);!a&&(a=r.style={});for(var c=0;c<l.length;c++){var u=l[c],d=i[u];a[u]=d}}else if(n.getAnimationStyleProps&&(xw(s)||xw(o)||_n(s,"style")>=0)){var h=n.getAnimationStyleProps(),f=h?h.style:null;if(f){!a&&(a=r.style={});for(var m=Vn(t),c=0;c<m.length;c++){var u=m[c];if(f[u]){var d=i[u];a[u]=d}}}}}}}function y_t(n,e){return Gs(n)?n!==e:n!=null&&isFinite(n)}var YCe=tr(),b_t=["percent","easing","shape","style","extra"];function KCe(n){n.stopAnimation("keyframe"),n.attr(YCe(n))}function mL(n,e,t){if(!(!t.isAnimationEnabled()||!e)){if($e(e)){Z(e,function(s){mL(n,s,t)});return}var r=e.keyframes,i=e.duration;if(t&&i==null){var a=NT("enter",t,0);i=a&&a.duration}if(!(!r||!i)){var o=YCe(n);Z(gL,function(s){if(!(s&&!n[s])){var l;r.sort(function(c,u){return c.percent-u.percent}),Z(r,function(c){var u=n.animators,d=s?c[s]:c;if(d){var h=Vn(d);if(s||(h=Cr(h,function(v){return _n(b_t,v)<0})),!!h.length){l||(l=n.animate(s,e.loop,!0),l.scope="keyframe");for(var f=0;f<u.length;f++)u[f]!==l&&u[f].targetName===l.targetName&&u[f].stopTracks(h);s&&(o[s]=o[s]||{});var m=s?o[s]:o;Z(h,function(v){m[v]=((s?n[s]:n)||{})[v]}),l.whenWithKeys(i*c.percent,d,h,c.easing)}}}),l&&l.delay(e.delay||0).duration(i).start(e.easing)}})}}}var _g="emphasis",Hv="normal",tX="blur",nX="select",vy=[Hv,_g,tX,nX],_V={normal:["itemStyle"],emphasis:[_g,"itemStyle"],blur:[tX,"itemStyle"],select:[nX,"itemStyle"]},xV={normal:["label"],emphasis:[_g,"label"],blur:[tX,"label"],select:[nX,"label"]},w_t=["x","y"],__t="e\0\0",ku={normal:{},emphasis:{},blur:{},select:{}},x_t={cartesian2d:n_t,geo:i_t,single:o_t,polar:l_t,calendar:c_t};function tq(n){return n instanceof Mn}function nq(n){return n instanceof Qu}function S_t(n,e){e.copyTransform(n),nq(e)&&nq(n)&&(e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel,e.invisible=n.invisible,e.ignore=n.ignore,tq(e)&&tq(n)&&e.setShape(n.shape))}var T_t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var o=this._data,s=t.getData(),l=this.group,c=uhe(t,s,r,i);o||l.removeAll(),s.diff(o).add(function(d){SV(i,null,d,c(d,a),t,l,s)}).remove(function(d){var h=o.getItemGraphicEl(d);h&&Q5(h,wg(h).option,t)}).update(function(d,h){var f=o.getItemGraphicEl(h);SV(i,f,d,c(d,a),t,l,s)}).execute();var u=t.get("clip",!0)?E2(t.coordinateSystem,!1,t):null;u?l.setClipPath(u):l.removeClipPath(),this._data=s},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,r,i,a,o){var s=r.getData(),l=uhe(r,s,i,a),c=this._progressiveEls=[];function u(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var d=t.start;d<t.end;d++){var h=SV(null,null,d,l(d,o),r,this.group,s);h&&(h.traverse(u),c.push(h))}},e.prototype.eachRendered=function(t){Iy(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,r,i,a){var o=r.element;if(o==null||i.name===o)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===o)return!0;return!1},e.type="custom",e}(ti);function rX(n){var e=n.type,t;if(e==="path"){var r=n.shape,i=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=QCe(r);t=D5(a,null,i,r.layout||"center"),wg(t).customPathData=a}else if(e==="image")t=new Yo({}),wg(t).customImagePath=n.style.image;else if(e==="text")t=new sr({});else if(e==="group")t=new zt;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=qY(e);if(!o){var s="";Er(s)}t=new o}return wg(t).customGraphicType=e,t.name=n.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function iX(n,e,t,r,i,a,o){KCe(e);var s=i&&i.normal.cfg;s&&e.setTextConfig(s),r&&r.transition==null&&(r.transition=w_t);var l=r&&r.style;if(l){if(e.type==="text"){var c=l;ft(c,"textFill")&&(c.fill=c.textFill),ft(c,"textStroke")&&(c.stroke=c.textStroke)}var u=void 0,d=tq(e)?l.decal:null;n&&d&&(d.dirty=!0,u=tT(d,n)),l.__decalPattern=u}if(nq(e)&&l){var u=l.__decalPattern;u&&(l.decal=u)}nR(e,r,a,{dataIndex:t,isInit:o,clearStyle:!0}),mL(e,r.keyframeAnimation,a)}function XCe(n,e,t,r,i){var a=e.isGroup?null:e,o=i&&i[n].cfg;if(a){var s=a.ensureState(n);if(r===!1){var l=a.getState(n);l&&(l.style=null)}else s.style=r||null;o&&(s.textConfig=o),Bw(a)}}function E_t(n,e,t){if(!n.isGroup){var r=n,i=t.currentZ,a=t.currentZLevel;r.z=i,r.zlevel=a;var o=e.z2;o!=null&&(r.z2=o||0);for(var s=0;s<vy.length;s++)A_t(r,e,vy[s])}}function A_t(n,e,t){var r=t===Hv,i=r?e:vL(e,t),a=i?i.z2:null,o;a!=null&&(o=r?n:n.ensureState(t),o.z2=a||0)}function uhe(n,e,t,r){var i=n.get("renderItem"),a=n.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):x_t[a.type](a));for(var s=Rt({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:A,style:D,ordinalRawValue:C,styleEmphasis:M,visual:j,barLayout:L,currentSeriesIndices:B,font:$},o.api||{}),l={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:C_t(n.getData())},c,u,d={},h={},f={},m={},v=0;v<vy.length;v++){var y=vy[v];f[y]=n.getModel(_V[y]),m[y]=n.getModel(xV[y])}function w(Y){return Y===c?u||(u=e.getItemModel(Y)):e.getItemModel(Y)}function _(Y,q){return e.hasItemOption?Y===c?d[q]||(d[q]=w(Y).getModel(_V[q])):w(Y).getModel(_V[q]):f[q]}function S(Y,q){return e.hasItemOption?Y===c?h[q]||(h[q]=w(Y).getModel(xV[q])):w(Y).getModel(xV[q]):m[q]}return function(Y,q){return c=Y,u=null,d={},h={},i&&i(Rt({dataIndexInside:Y,dataIndex:e.getRawIndex(Y),actionType:q?q.type:null},l),s)};function A(Y,q){return q==null&&(q=c),e.getStore().get(e.getDimensionIndex(Y||0),q)}function C(Y,q){q==null&&(q=c),Y=Y||0;var W=e.getDimensionInfo(Y);if(!W){var X=e.getDimensionIndex(Y);return X>=0?e.getStore().get(X,q):void 0}var te=e.get(W.name,q),re=W&&W.ordinalMeta;return re?re.categories[te]:te}function D(Y,q){q==null&&(q=c);var W=e.getItemVisual(q,"style"),X=W&&W.fill,te=W&&W.opacity,re=_(q,Hv).getItemStyle();X!=null&&(re.fill=X),te!=null&&(re.opacity=te);var z={inheritColor:st(X)?X:"#000"},oe=S(q,Hv),le=vi(oe,null,z,!1,!0);le.text=oe.getShallow("show")?Zt(n.getFormattedLabel(q,Hv),rT(e,q)):null;var ee=WN(oe,z,!1);return O(Y,re),re=ahe(re,le,ee),Y&&P(re,Y),re.legacy=!0,re}function M(Y,q){q==null&&(q=c);var W=_(q,_g).getItemStyle(),X=S(q,_g),te=vi(X,null,null,!0,!0);te.text=X.getShallow("show")?Cf(n.getFormattedLabel(q,_g),n.getFormattedLabel(q,Hv),rT(e,q)):null;var re=WN(X,null,!0);return O(Y,W),W=ahe(W,te,re),Y&&P(W,Y),W.legacy=!0,W}function P(Y,q){for(var W in q)ft(q,W)&&(Y[W]=q[W])}function O(Y,q){Y&&(Y.textFill&&(q.textFill=Y.textFill),Y.textPosition&&(q.textPosition=Y.textPosition))}function j(Y,q){if(q==null&&(q=c),ft(rhe,Y)){var W=e.getItemVisual(q,"style");return W?W[rhe[Y]]:null}if(ft(Jwt,Y))return e.getItemVisual(q,Y)}function L(Y){if(a.type==="cartesian2d"){var q=a.getBaseAxis();return mft(Rt({axis:q},Y))}}function B(){return t.getCurrentSeriesIndices()}function $(Y){return GY(Y,t)}}function C_t(n){var e={};return Z(n.dimensions,function(t){var r=n.getDimensionInfo(t);if(!r.isExtraCoord){var i=r.coordDim,a=e[i]=e[i]||[];a[r.coordDimIndex]=n.getDimensionIndex(t)}}),e}function SV(n,e,t,r,i,a,o){if(!r){a.remove(e);return}var s=aX(n,e,t,r,i,a);return s&&o.setItemGraphicEl(t,s),s&&na(s,r.focus,r.blurScope,r.emphasisDisabled),s}function aX(n,e,t,r,i,a){var o=-1,s=e;e&&ZCe(e,r,i)&&(o=_n(a.childrenRef(),e),e=null);var l=!e,c=e;c?c.clearStates():(c=rX(r),s&&S_t(s,c)),r.morph===!1?c.disableMorphing=!0:c.disableMorphing&&(c.disableMorphing=!1),ku.normal.cfg=ku.normal.conOpt=ku.emphasis.cfg=ku.emphasis.conOpt=ku.blur.cfg=ku.blur.conOpt=ku.select.cfg=ku.select.conOpt=null,ku.isLegacy=!1,k_t(c,t,r,i,l,ku),D_t(c,t,r,i,l),iX(n,c,t,r,ku,i,l),ft(r,"info")&&(wg(c).info=r.info);for(var u=0;u<vy.length;u++){var d=vy[u];if(d!==Hv){var h=vL(r,d),f=oX(r,h,d);XCe(d,c,h,f,ku)}}return E_t(c,r,i),r.type==="group"&&I_t(n,c,t,r,i),o>=0?a.replaceAt(c,o):a.add(c),c}function ZCe(n,e,t){var r=wg(n),i=e.type,a=e.shape,o=e.style;return t.isUniversalTransitionEnabled()||i!=null&&i!==r.customGraphicType||i==="path"&&R_t(a)&&QCe(a)!==r.customPathData||i==="image"&&ft(o,"image")&&o.image!==r.customImagePath}function D_t(n,e,t,r,i){var a=t.clipPath;if(a===!1)n&&n.getClipPath()&&n.removeClipPath();else if(a){var o=n.getClipPath();o&&ZCe(o,a,r)&&(o=null),o||(o=rX(a),n.setClipPath(o)),iX(null,o,e,a,null,r,i)}}function k_t(n,e,t,r,i,a){if(!n.isGroup){dhe(t,null,a),dhe(t,_g,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,c=a.select.conOpt;if(o!=null||s!=null||c!=null||l!=null){var u=n.getTextContent();if(o===!1)u&&n.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},u?u.clearStates():(u=rX(o),n.setTextContent(u)),iX(null,u,e,o,null,r,i);for(var d=o&&o.style,h=0;h<vy.length;h++){var f=vy[h];if(f!==Hv){var m=a[f].conOpt;XCe(f,u,m,oX(o,m,f),null)}}d?u.dirty():u.markRedraw()}}}}function dhe(n,e,t){var r=e?vL(n,e):n,i=e?oX(n,r,_g):n.style,a=n.type,o=r?r.textConfig:null,s=n.textContent,l=s?e?vL(s,e):s:null;if(i&&(t.isLegacy||HCe(i,a,!!o,!!l))){t.isLegacy=!0;var c=qCe(i,a,!e);!o&&c.textConfig&&(o=c.textConfig),!l&&c.textContent&&(l=c.textContent)}if(!e&&l){var u=l;!u.type&&(u.type="text")}var d=e?t[e]:t.normal;d.cfg=o,d.conOpt=l}function vL(n,e){return e?n?n[e]:null:n}function oX(n,e,t){var r=e&&e.style;return r==null&&t===_g&&n&&(r=n.styleEmphasis),r}function I_t(n,e,t,r,i){var a=r.children,o=a?a.length:0,s=r.$mergeChildren,l=s==="byName"||r.diffChildrenByName,c=s===!1;if(!(!o&&!l&&!c)){if(l){P_t({api:n,oldChildren:e.children()||[],newChildren:a||[],dataIndex:t,seriesModel:i,group:e});return}c&&e.removeAll();for(var u=0;u<o;u++){var d=a[u],h=e.childAt(u);d?(d.ignore==null&&(d.ignore=!1),aX(n,h,t,d,i,e)):h.ignore=!0}for(var f=e.childCount()-1;f>=u;f--){var m=e.childAt(f);M_t(e,m,i)}}}function M_t(n,e,t){e&&Q5(e,wg(n).option,t)}function P_t(n){new Ng(n.oldChildren,n.newChildren,hhe,hhe,n).add(fhe).update(fhe).remove(O_t).execute()}function hhe(n,e){var t=n&&n.name;return t??__t+e}function fhe(n,e){var t=this.context,r=n!=null?t.newChildren[n]:null,i=e!=null?t.oldChildren[e]:null;aX(t.api,i,t.dataIndex,r,t.seriesModel,t.group)}function O_t(n){var e=this.context,t=e.oldChildren[n];t&&Q5(t,wg(t).option,e.seriesModel)}function QCe(n){return n&&(n.pathData||n.d)}function R_t(n){return n&&(ft(n,"pathData")||ft(n,"d"))}function N_t(n){n.registerChartView(T_t),n.registerSeriesModel(e_t)}var Bb=tr(),phe=Bt,TV=dt,sX=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,r,i){var a=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var c={};this.makeElOption(c,a,e,t,r);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=u;var d=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new zt,this.createPointerEl(s,c,e,t),this.createLabelEl(s,c,e,t),r.getZr().add(s);else{var h=en(ghe,t,d);this.updatePointerEl(s,c,h),this.updateLabelEl(s,c,h,t)}vhe(s,t,!0),this._renderHandle(a)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,a=i.type==="category",o=t.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=kK(e).seriesDataCount,c=i.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1}return r===!0},n.prototype.makeElOption=function(e,t,r,i,a){},n.prototype.createPointerEl=function(e,t,r,i){var a=t.pointer;if(a){var o=Bb(e).pointerEl=new t_[a.type](phe(t.pointer));e.add(o)}},n.prototype.createLabelEl=function(e,t,r,i){if(t.label){var a=Bb(e).labelEl=new sr(phe(t.label));e.add(a),mhe(a,i)}},n.prototype.updatePointerEl=function(e,t,r){var i=Bb(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,r,i){var a=Bb(e).labelEl;a&&(a.setStyle(t.label.style),r(a,{x:t.label.x,y:t.label.y}),mhe(a,i))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=t.getModel("handle"),o=t.get("status");if(!a.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=y2(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){Mg(c.event)},onmousedown:TV(this._onHandleDragMove,this,0,0),drift:TV(this._onHandleDragMove,this),ondragend:TV(this._onHandleDragEnd,this)}),r.add(i)),vhe(i,t,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");$e(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,VT(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},n.prototype._moveHandleToValue=function(e,t){ghe(this._axisPointerModel,!t&&this._moveAnimation,this._handle,EV(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(EV(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(EV(i)),Bb(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),iI(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},n}();function ghe(n,e,t,r){JCe(Bb(t).lastProp,r)||(Bb(t).lastProp=r,e?fr(t,r,n):(t.stopAnimation(),t.attr(r)))}function JCe(n,e){if(jt(n)&&jt(e)){var t=!0;return Z(e,function(r,i){t=t&&JCe(n[i],r)}),!!t}else return n===e}function mhe(n,e){n[e.get(["label","show"])?"show":"hide"]()}function EV(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function vhe(n,e,t){var r=e.get("z"),i=e.get("zlevel");n&&n.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=t)})}function lX(n){var e=n.get("type"),t=n.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function eDe(n,e,t,r,i){var a=t.get("value"),o=tDe(a,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=FT(s.get("padding")||0),c=s.getFont(),u=d2(o,c),d=i.position,h=u.width+l[1]+l[3],f=u.height+l[0]+l[2],m=i.align;m==="right"&&(d[0]-=h),m==="center"&&(d[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(d[1]-=f),v==="middle"&&(d[1]-=f/2),L_t(d,h,f,r);var y=s.get("backgroundColor");(!y||y==="auto")&&(y=e.get(["axisLine","lineStyle","color"])),n.label={x:d[0],y:d[1],style:vi(s,{text:o,font:c,fill:s.getTextColor(),padding:l,backgroundColor:y}),z2:10}}function L_t(n,e,t,r){var i=r.getWidth(),a=r.getHeight();n[0]=Math.min(n[0]+e,i)-e,n[1]=Math.min(n[1]+t,a)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function tDe(n,e,t,r,i){n=e.scale.parse(n);var a=e.scale.getLabel({value:n},{precision:i.precision}),o=i.formatter;if(o){var s={value:yK(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};Z(r,function(l){var c=t.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,d=c&&c.getDataParams(u);d&&s.seriesData.push(d)}),st(o)?a=o.replace("{value}",a):kt(o)&&(a=o(s))}return a}function cX(n,e,t){var r=Gc();return Jw(r,r,t.rotation),Nf(r,r,t.position),ah([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function nDe(n,e,t,r,i,a){var o=Sl.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),eDe(e,r,i,a,{position:cX(r.axis,n,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function uX(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function rDe(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}function yhe(n,e,t,r,i,a){return{cx:n,cy:e,r0:t,r,startAngle:i,endAngle:a,clockwise:!0}}var j_t=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis,l=s.grid,c=a.get("type"),u=bhe(l,s).getOtherAxis(s).getGlobalExtent(),d=s.toGlobalCoord(s.dataToCoord(r,!0));if(c&&c!=="none"){var h=lX(a),f=F_t[c](s,d,u);f.style=h,t.graphicKey=f.type,t.pointer=f}var m=L8(l.model,i);nDe(r,t,m,i,a,o)},e.prototype.getHandleTransform=function(t,r,i){var a=L8(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=cX(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),c=bhe(s,o).getOtherAxis(o).getGlobalExtent(),u=o.dim==="x"?0:1,d=[t.x,t.y];d[u]+=r[u],d[u]=Math.min(l[1],d[u]),d[u]=Math.max(l[0],d[u]);var h=(c[1]+c[0])/2,f=[h,h];f[u]=d[u];var m=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:t.rotation,cursorPoint:f,tooltipOption:m[u]}},e}(sX);function bhe(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var F_t={line:function(n,e,t){var r=uX([e,t[0]],[e,t[1]],whe(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=Math.max(1,n.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:rDe([e-r/2,t[0]],[r,i],whe(n))}}};function whe(n){return n.dim==="x"?0:1}var $_t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Un),lg=tr(),B_t=Z;function iDe(n,e,t){if(!Nn.node){var r=e.getZr();lg(r).records||(lg(r).records={}),U_t(r,e);var i=lg(r).records[n]||(lg(r).records[n]={});i.handler=t}}function U_t(n,e){if(lg(n).initialized)return;lg(n).initialized=!0,t("click",en(_he,"click")),t("mousemove",en(_he,"mousemove")),t("globalout",z_t);function t(r,i){n.on(r,function(a){var o=H_t(e);B_t(lg(n).records,function(s){s&&i(s,a,o.dispatchAction)}),V_t(o.pendings,e)})}}function V_t(n,e){var t=n.showTip.length,r=n.hideTip.length,i;t?i=n.showTip[t-1]:r&&(i=n.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function z_t(n,e,t){n.handler("leave",null,t)}function _he(n,e,t,r){e.handler(n,t,r)}function H_t(n){var e={showTip:[],hideTip:[]},t=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=t,n.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function rq(n,e){if(!Nn.node){var t=e.getZr(),r=(lg(t).records||{})[n];r&&(lg(t).records[n]=null)}}var q_t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=r.getComponent("tooltip"),o=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";iDe("axisPointer",i,function(s,l,c){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&c({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,r){rq("axisPointer",r)},e.prototype.dispose=function(t,r){rq("axisPointer",r)},e.type="axisPointer",e}(Yi);function aDe(n,e){var t=[],r=n.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),o=Fw(a,n);if(o==null||o<0||$e(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(n.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),d=u.dim,h=c.dim,f=d==="x"||d==="radius"?1:0,m=a.mapDimension(h),v=[];v[f]=a.get(m,o),v[1-f]=a.get(a.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(v)||[]}else t=l.dataToPoint(a.getValues(Ue(l.dimensions,function(w){return a.mapDimension(w)}),o))||[];else if(s){var y=s.getBoundingRect().clone();y.applyTransform(s.transform),t=[y.x+y.width/2,y.y+y.height/2]}return{point:t,el:s}}var xhe=tr();function G_t(n,e,t){var r=n.currTrigger,i=[n.x,n.y],a=n,o=n.dispatchAction||dt(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){rR(i)&&(i=aDe({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=rR(i),c=a.axesInfo,u=s.axesInfo,d=r==="leave"||rR(i),h={},f={},m={list:[],map:{}},v={showPointer:en(Y_t,f),showTooltip:en(K_t,m)};Z(s.coordSysMap,function(w,_){var S=l||w.containPoint(i);Z(s.coordSysAxesInfo[_],function(A,C){var D=A.axis,M=J_t(c,A);if(!d&&S&&(!c||M)){var P=M&&M.value;P==null&&!l&&(P=D.pointToData(i)),P!=null&&She(A,P,v,!1,h)}})});var y={};return Z(u,function(w,_){var S=w.linkGroup;S&&!f[_]&&Z(S.axesInfo,function(A,C){var D=f[C];if(A!==w&&D){var M=D.value;S.mapper&&(M=w.axis.scale.parse(S.mapper(M,The(A),The(w)))),y[w.key]=M}})}),Z(y,function(w,_){She(u[_],w,v,!0,h)}),X_t(f,u,h),Z_t(m,i,n,o),Q_t(u,o,t),h}}function She(n,e,t,r,i){var a=n.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var o=W_t(e,n),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&Pe(i,s[0]),!r&&n.snap&&a.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,s),t.showTooltip(n,o,l)}}function W_t(n,e){var t=e.axis,r=t.dim,i=n,a=[],o=Number.MAX_VALUE,s=-1;return Z(e.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(r),d,h;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(u,n,t);h=f.dataIndices,d=f.nestestValue}else{if(h=l.getData().indicesOfNearest(u[0],n,t.type==="category"?.5:null),!h.length)return;d=l.getData().get(u[0],h[0])}if(!(d==null||!isFinite(d))){var m=n-d,v=Math.abs(m);v<=o&&((v<o||m>=0&&s<0)&&(o=v,s=m,i=d,a.length=0),Z(h,function(y){a.push({seriesIndex:l.seriesIndex,dataIndexInside:y,dataIndex:l.getData().getRawIndex(y)})}))}}),{payloadBatch:a,snapToValue:i}}function Y_t(n,e,t,r){n[e.key]={value:t,payloadBatch:r}}function K_t(n,e,t,r){var i=t.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,c=dI(l),u=n.map[c];u||(u=n.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(u)),u.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function X_t(n,e,t){var r=t.axesInfo=[];Z(e,function(i,a){var o=i.axisPointerModel.option,s=n[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function Z_t(n,e,t,r){if(rR(e)||!n.list.length){r({type:"hideTip"});return}var i=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:n.list})}function Q_t(n,e,t){var r=t.getZr(),i="axisPointerLastHighlights",a=xhe(r)[i]||{},o=xhe(r)[i]={};Z(n,function(c,u){var d=c.axisPointerModel.option;d.status==="show"&&c.triggerEmphasis&&Z(d.seriesDataIndices,function(h){var f=h.seriesIndex+" | "+h.dataIndex;o[f]=h})});var s=[],l=[];Z(a,function(c,u){!o[u]&&l.push(c)}),Z(o,function(c,u){!a[u]&&s.push(c)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function J_t(n,e){for(var t=0;t<(n||[]).length;t++){var r=n[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function The(n){var e=n.axis.model,t={},r=t.axisDim=n.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function rR(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function M2(n){a_.registerAxisPointerClass("CartesianAxisPointer",j_t),n.registerComponentModel($_t),n.registerComponentView(q_t),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!$e(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=cmt(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},G_t)}function ext(n){Dn(OAe),Dn(M2)}var txt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,c=l.getOtherAxis(s),u=c.getExtent(),d=s.dataToCoord(r),h=a.get("type");if(h&&h!=="none"){var f=lX(a),m=rxt[h](s,l,d,u);m.style=f,t.graphicKey=m.type,t.pointer=m}var v=a.get(["label","margin"]),y=nxt(r,i,a,l,v);eDe(t,i,a,o,y)},e}(sX);function nxt(n,e,t,r,i){var a=e.axis,o=a.dataToCoord(n),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=r.getRadiusAxis().getExtent(),c,u,d;if(a.dim==="radius"){var h=Gc();Jw(h,h,s),Nf(h,h,[r.cx,r.cy]),c=ah([o,-i],h);var f=e.getModel("axisLabel").get("rotate")||0,m=Sl.innerTextLayout(s,f*Math.PI/180,-1);u=m.textAlign,d=m.textVerticalAlign}else{var v=l[1];c=r.coordToPoint([v+i,o]);var y=r.cx,w=r.cy;u=Math.abs(c[0]-y)/v<.3?"center":c[0]>y?"left":"right",d=Math.abs(c[1]-w)/v<.3?"middle":c[1]>w?"top":"bottom"}return{position:c,align:u,verticalAlign:d}}var rxt={line:function(n,e,t,r){return n.dim==="angle"?{type:"Line",shape:uX(e.coordToPoint([r[0],t]),e.coordToPoint([r[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(n,e,t,r){var i=Math.max(1,n.getBandWidth()),a=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:yhe(e.cx,e.cy,r[0],r[1],(-t-i/2)*a,(-t+i/2)*a)}:{type:"Sector",shape:yhe(e.cx,e.cy,t-i/2,t+i/2,0,Math.PI*2)}}},ixt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var r,i=this.ecModel;return i.eachComponent(t,function(a){a.getCoordSysModel()===this&&(r=a)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(Un),dX=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Va).models[0]},e.type="polarAxis",e}(Un);Ha(dX,x2);var axt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e}(dX),oxt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e}(dX),hX=function(n){Te(e,n);function e(t,r){return n.call(this,"radius",t,r)||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e}(fh);hX.prototype.dataToRadius=fh.prototype.dataToCoord;hX.prototype.radiusToData=fh.prototype.coordToData;var sxt=tr(),fX=function(n){Te(e,n);function e(t,r){return n.call(this,"angle",t,r||[0,360])||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,r=t.getLabelModel(),i=t.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=t.dataToCoord(s+1)-t.dataToCoord(s),c=Math.abs(l),u=d2(s==null?"":s+"",r.getFont(),"center","top"),d=Math.max(u.height,7),h=d/c;isNaN(h)&&(h=1/0);var f=Math.max(0,Math.floor(h)),m=sxt(t.model),v=m.lastAutoInterval,y=m.lastTickCount;return v!=null&&y!=null&&Math.abs(v-f)<=1&&Math.abs(y-o)<=1&&v>f?f=v:(m.lastTickCount=o,m.lastAutoInterval=f),f},e}(fh);fX.prototype.dataToAngle=fh.prototype.dataToCoord;fX.prototype.angleToData=fh.prototype.coordToData;var oDe=["radius","angle"],lxt=function(){function n(e){this.dimensions=oDe,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new hX,this._angleAxis=new fX,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},n.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},n.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,i=this._radiusAxis;return r.scale.type===e&&t.push(r),i.scale.type===e&&t.push(i),t},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},n.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},n.prototype.pointToData=function(e,t){var r=this.pointToCoord(e);return[this._radiusAxis.radiusToData(r[0],t),this._angleAxis.angleToData(r[1],t)]},n.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);i.inverse?o=s-360:s=o+360;var l=Math.sqrt(t*t+r*r);t/=l,r/=l;for(var c=Math.atan2(-r,t)/Math.PI*180,u=c<o?1:-1;c<o||c>s;)c+=u*360;return[l,c]},n.prototype.coordToPoint=function(e){var t=e[0],r=e[1]/180*Math.PI,i=Math.cos(r)*t+this.cx,a=-Math.sin(r)*t+this.cy;return[i,a]},n.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),r=t.getExtent().slice();r[0]>r[1]&&r.reverse();var i=e.getExtent(),a=Math.PI/180,o=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:e.inverse,contain:function(s,l){var c=s-this.cx,u=l-this.cy,d=c*c+u*u,h=this.r,f=this.r0;return h!==f&&d-o<=h*h&&d+o>=f*f}}},n.prototype.convertToPixel=function(e,t,r){var i=Ehe(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=Ehe(t);return i===this?this.pointToData(r):null},n}();function Ehe(n){var e=n.seriesModel,t=n.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function cxt(n,e,t){var r=e.get("center"),i=t.getWidth(),a=t.getHeight();n.cx=Je(r[0],i),n.cy=Je(r[1],a);var o=n.getRadiusAxis(),s=Math.min(i,a)/2,l=e.get("radius");l==null?l=[0,"100%"]:$e(l)||(l=[0,l]);var c=[Je(l[0],s),Je(l[1],s)];o.inverse?o.setExtent(c[1],c[0]):o.setExtent(c[0],c[1])}function uxt(n,e){var t=this,r=t.getAngleAxis(),i=t.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),n.eachSeries(function(s){if(s.coordinateSystem===t){var l=s.getData();Z(iL(l,"radius"),function(c){i.scale.unionExtentFromData(l,c)}),Z(iL(l,"angle"),function(c){r.scale.unionExtentFromData(l,c)})}}),nT(r.scale,r.model),nT(i.scale,i.model),r.type==="category"&&!r.onBand){var a=r.getExtent(),o=360/r.scale.count();r.inverse?a[1]+=o:a[1]-=o,r.setExtent(a[0],a[1])}}function dxt(n){return n.mainType==="angleAxis"}function Ahe(n,e){var t;if(n.type=e.get("type"),n.scale=q5(e),n.onBand=e.get("boundaryGap")&&n.type==="category",n.inverse=e.get("inverse"),dxt(e)){n.inverse=n.inverse!==e.get("clockwise");var r=e.get("startAngle"),i=(t=e.get("endAngle"))!==null&&t!==void 0?t:r+(n.inverse?-360:360);n.setExtent(r,i)}e.axis=n,n.model=e}var hxt={dimensions:oDe,create:function(n,e){var t=[];return n.eachComponent("polar",function(r,i){var a=new lxt(i+"");a.update=uxt;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=r.findAxisModel("radiusAxis"),c=r.findAxisModel("angleAxis");Ahe(o,l),Ahe(s,c),cxt(a,r,e),t.push(a),r.coordinateSystem=a,a.model=r}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var i=r.getReferringComponents("polar",Va).models[0];r.coordinateSystem=i.coordinateSystem}}),t}},fxt=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function tO(n,e,t){e[1]>e[0]&&(e=e.slice().reverse());var r=n.coordToPoint([e[0],t]),i=n.coordToPoint([e[1],t]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function nO(n){var e=n.getRadiusAxis();return e.inverse?0:1}function Che(n){var e=n[0],t=n[n.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&n.pop()}var pxt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=t.axis,a=i.polar,o=a.getRadiusAxis().getExtent(),s=i.getTicksCoords(),l=i.getMinorTicksCoords(),c=Ue(i.getViewLabels(),function(u){u=Bt(u);var d=i.scale,h=d.type==="ordinal"?d.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=i.dataToCoord(h),u});Che(c),Che(s),Z(fxt,function(u){t.get([u,"show"])&&(!i.scale.isBlank()||u==="axisLine")&&gxt[u](this.group,t,a,s,l,o,c)},this)}},e.type="angleAxis",e}(a_),gxt={axisLine:function(n,e,t,r,i,a){var o=e.getModel(["axisLine","lineStyle"]),s=t.getAngleAxis(),l=Math.PI/180,c=s.getExtent(),u=nO(t),d=u?0:1,h,f=Math.abs(c[1]-c[0])===360?"Circle":"Arc";a[d]===0?h=new t_[f]({shape:{cx:t.cx,cy:t.cy,r:a[u],startAngle:-c[0]*l,endAngle:-c[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):h=new p2({shape:{cx:t.cx,cy:t.cy,r:a[u],r0:a[d]},style:o.getLineStyle(),z2:1,silent:!0}),h.style.fill=null,n.add(h)},axisTick:function(n,e,t,r,i,a){var o=e.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[nO(t)],c=Ue(r,function(u){return new bo({shape:tO(t,[l,l+s],u.coord)})});n.add(Bu(c,{style:Rt(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),c=a[nO(t)],u=[],d=0;d<i.length;d++)for(var h=0;h<i[d].length;h++)u.push(new bo({shape:tO(t,[c,c+l],i[d][h].coord)}));n.add(Bu(u,{style:Rt(s.getModel("lineStyle").getLineStyle(),Rt(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,e,t,r,i,a,o){var s=e.getCategories(!0),l=e.getModel("axisLabel"),c=l.get("margin"),u=e.get("triggerEvent");Z(o,function(d,h){var f=l,m=d.tickValue,v=a[nO(t)],y=t.coordToPoint([v+c,d.coord]),w=t.cx,_=t.cy,S=Math.abs(y[0]-w)/v<.3?"center":y[0]>w?"left":"right",A=Math.abs(y[1]-_)/v<.3?"middle":y[1]>_?"top":"bottom";if(s&&s[m]){var C=s[m];jt(C)&&C.textStyle&&(f=new Ir(C.textStyle,l,l.ecModel))}var D=new sr({silent:Sl.isLabelSilent(e),style:vi(f,{x:y[0],y:y[1],fill:f.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:d.formattedLabel,align:S,verticalAlign:A})});if(n.add(D),u){var M=Sl.makeAxisEventDataBase(e);M.targetType="axisLabel",M.value=d.rawLabel,Wt(D).eventData=M}},this)},splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=0;d<r.length;d++){var h=c++%l.length;u[h]=u[h]||[],u[h].push(new bo({shape:tO(t,a,r[d].coord)}))}for(var d=0;d<u.length;d++)n.add(Bu(u[d],{style:Rt({stroke:l[d%l.length]},s.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],c=0;c<i.length;c++)for(var u=0;u<i[c].length;u++)l.push(new bo({shape:tO(t,a,i[c][u].coord)}));n.add(Bu(l,{style:s.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(n,e,t,r,i,a){if(r.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=Math.PI/180,h=-r[0].coord*d,f=Math.min(a[0],a[1]),m=Math.max(a[0],a[1]),v=e.get("clockwise"),y=1,w=r.length;y<=w;y++){var _=y===w?r[0].coord:r[y].coord,S=c++%l.length;u[S]=u[S]||[],u[S].push(new Al({shape:{cx:t.cx,cy:t.cy,r0:f,r:m,startAngle:h,endAngle:-_*d,clockwise:v},silent:!0})),h=-_*d}for(var y=0;y<u.length;y++)n.add(Bu(u[y],{style:Rt({fill:l[y%l.length]},s.getAreaStyle()),silent:!0}))}}},mxt=["axisLine","axisTickLabel","axisName"],vxt=["splitLine","splitArea","minorSplitLine"],yxt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=this._axisGroup,a=this._axisGroup=new zt;this.group.add(a);var o=t.axis,s=o.polar,l=s.getAngleAxis(),c=o.getTicksCoords(),u=o.getMinorTicksCoords(),d=l.getExtent()[0],h=o.getExtent(),f=wxt(s,t,d),m=new Sl(t,f);Z(mxt,m.add,m),a.add(m.getGroup()),v2(i,a,t),Z(vxt,function(v){t.get([v,"show"])&&!o.scale.isBlank()&&bxt[v](this.group,t,s,d,h,c,u)},this)}},e.type="radiusAxis",e}(a_),bxt={splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0,u=t.getAngleAxis(),d=Math.PI/180,h=u.getExtent(),f=Math.abs(h[1]-h[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var m=[],v=0;v<a.length;v++){var y=c++%l.length;m[y]=m[y]||[],m[y].push(new t_[f]({shape:{cx:t.cx,cy:t.cy,r:Math.max(a[v].coord,0),startAngle:-h[0]*d,endAngle:-h[1]*d,clockwise:u.inverse}}))}for(var v=0;v<m.length;v++)n.add(Bu(m[v],{style:Rt({stroke:l[v%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(n,e,t,r,i,a,o){if(o.length){for(var s=e.getModel("minorSplitLine"),l=s.getModel("lineStyle"),c=[],u=0;u<o.length;u++)for(var d=0;d<o[u].length;d++)c.push(new Xg({shape:{cx:t.cx,cy:t.cy,r:o[u][d].coord}}));n.add(Bu(c,{style:Rt({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(n,e,t,r,i,a){if(a.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=a[0].coord,h=1;h<a.length;h++){var f=c++%l.length;u[f]=u[f]||[],u[f].push(new Al({shape:{cx:t.cx,cy:t.cy,r0:d,r:a[h].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),d=a[h].coord}for(var h=0;h<u.length;h++)n.add(Bu(u[h],{style:Rt({fill:l[h%l.length]},s.getAreaStyle()),silent:!0}))}}};function wxt(n,e,t){return{position:[n.cx,n.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function sDe(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function lDe(n,e){return e.dim+n.model.componentIndex}function _xt(n,e,t){var r={},i=xxt(Cr(e.getSeriesByType(n),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));e.eachSeriesByType(n,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),c=lDe(s,l),u=sDe(a),d=i[c][u],h=d.offset,f=d.width,m=s.getOtherAxis(l),v=a.coordinateSystem.cx,y=a.coordinateSystem.cy,w=a.get("barMinHeight")||0,_=a.get("barMinAngle")||0;r[u]=r[u]||[];for(var S=o.mapDimension(m.dim),A=o.mapDimension(l.dim),C=gy(o,S),D=l.dim!=="radius"||!a.get("roundCap",!0),M=m.model,P=M.get("startValue"),O=m.dataToCoord(P||0),j=0,L=o.count();j<L;j++){var B=o.get(S,j),$=o.get(A,j),Y=B>=0?"p":"n",q=O;C&&(r[u][$]||(r[u][$]={p:O,n:O}),q=r[u][$][Y]);var W=void 0,X=void 0,te=void 0,re=void 0;if(m.dim==="radius"){var z=m.dataToCoord(B)-O,oe=l.dataToCoord($);Math.abs(z)<w&&(z=(z<0?-1:1)*w),W=q,X=q+z,te=oe-h,re=te-f,C&&(r[u][$][Y]=X)}else{var le=m.dataToCoord(B,D)-O,ee=l.dataToCoord($);Math.abs(le)<_&&(le=(le<0?-1:1)*_),W=ee+h,X=W+f,te=q,re=q+le,C&&(r[u][$][Y]=re)}o.setItemLayout(j,{cx:v,cy:y,r0:W,r:X,startAngle:-te*Math.PI/180,endAngle:-re*Math.PI/180,clockwise:te>=re})}}})}function xxt(n){var e={};Z(n,function(r,i){var a=r.getData(),o=r.coordinateSystem,s=o.getBaseAxis(),l=lDe(o,s),c=s.getExtent(),u=s.type==="category"?s.getBandWidth():Math.abs(c[1]-c[0])/a.count(),d=e[l]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},h=d.stacks;e[l]=d;var f=sDe(r);h[f]||d.autoWidthCount++,h[f]=h[f]||{width:0,maxWidth:0};var m=Je(r.get("barWidth"),u),v=Je(r.get("barMaxWidth"),u),y=r.get("barGap"),w=r.get("barCategoryGap");m&&!h[f].width&&(m=Math.min(d.remainedWidth,m),h[f].width=m,d.remainedWidth-=m),v&&(h[f].maxWidth=v),y!=null&&(d.gap=y),w!=null&&(d.categoryGap=w)});var t={};return Z(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=Je(r.categoryGap,o),l=Je(r.gap,1),c=r.remainedWidth,u=r.autoWidthCount,d=(c-s)/(u+(u-1)*l);d=Math.max(d,0),Z(a,function(v,y){var w=v.maxWidth;w&&w<d&&(w=Math.min(w,c),v.width&&(w=Math.min(w,v.width)),c-=w,v.width=w,u--)}),d=(c-s)/(u+(u-1)*l),d=Math.max(d,0);var h=0,f;Z(a,function(v,y){v.width||(v.width=d),f=v,h+=v.width*(1+l)}),f&&(h-=f.width*l);var m=-h/2;Z(a,function(v,y){t[i][y]=t[i][y]||{offset:m,width:v.width},m+=v.width*(1+l)})}),t}var Sxt={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},Txt={splitNumber:5},Ext=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e}(Yi);function Axt(n){Dn(M2),a_.registerAxisPointerClass("PolarAxisPointer",txt),n.registerCoordinateSystem("polar",hxt),n.registerComponentModel(ixt),n.registerComponentView(Ext),iT(n,"angle",axt,Sxt),iT(n,"radius",oxt,Txt),n.registerComponentView(pxt),n.registerComponentView(yxt),n.registerLayout(en(_xt,"bar"))}function iq(n,e){e=e||{};var t=n.coordinateSystem,r=n.axis,i={},a=r.position,o=r.orient,s=t.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],c={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[o==="vertical"?c.vertical[a]:l[0],o==="horizontal"?c.horizontal[a]:l[3]];var u={horizontal:0,vertical:1};i.rotation=Math.PI/2*u[o];var d={top:-1,bottom:1,right:1,left:-1};i.labelDirection=i.tickDirection=i.nameDirection=d[a],n.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),Ho(e.labelInside,n.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var h=e.rotate;return h==null&&(h=n.get(["axisLabel","rotate"])),i.labelRotation=a==="top"?-h:h,i.z2=1,i}var Cxt=["axisLine","axisTickLabel","axisName"],Dxt=["splitArea","splitLine"],kxt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,r,i,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new zt;var l=iq(t),c=new Sl(t,l);Z(Cxt,c.add,c),o.add(this._axisGroup),o.add(c.getGroup()),Z(Dxt,function(u){t.get([u,"show"])&&Ixt[u](this,this.group,this._axisGroup,t)},this),v2(s,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)},e.prototype.remove=function(){IAe(this)},e.type="singleAxis",e}(a_),Ixt={splitLine:function(n,e,t,r){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),c=r.coordinateSystem.getRect(),u=i.isHorizontal(),d=[],h=0,f=i.getTicksCoords({tickModel:a}),m=[],v=[],y=0;y<f.length;++y){var w=i.toGlobalCoord(f[y].coord);u?(m[0]=w,m[1]=c.y,v[0]=w,v[1]=c.y+c.height):(m[0]=c.x,m[1]=w,v[0]=c.x+c.width,v[1]=w);var _=new bo({shape:{x1:m[0],y1:m[1],x2:v[0],y2:v[1]},silent:!0});J1(_.shape,l);var S=h++%s.length;d[S]=d[S]||[],d[S].push(_)}for(var A=o.getLineStyle(["color"]),y=0;y<d.length;++y)e.add(Bu(d[y],{style:Rt({stroke:s[y%s.length]},A),silent:!0}))}},splitArea:function(n,e,t,r){kAe(n,t,r,r)}},iR=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(Un);Ha(iR,x2.prototype);var Mxt=function(n){Te(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,r){return this.coordinateSystem.pointToData(t)[0]},e}(fh),cDe=["single"],Pxt=function(){function n(e,t,r){this.type="single",this.dimension="single",this.dimensions=cDe,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=this.dimension,a=new Mxt(i,q5(e),[0,0],e.get("type"),e.get("position")),o=a.type==="category";a.onBand=o&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),e.axis=a,a.model=e,a.coordinateSystem=this,this._axis=a},n.prototype.update=function(e,t){e.eachSeries(function(r){if(r.coordinateSystem===this){var i=r.getData();Z(i.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(i,a)},this),nT(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(e,t){this._rect=oo({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,r=t.isHorizontal(),i=r?[0,e.width]:[0,e.height],a=t.inverse?1:0;t.setExtent(i[a],i[1-a]),this._updateAxisTransform(t,r?e.x:e.y)},n.prototype._updateAxisTransform=function(e,t){var r=e.getExtent(),i=r[0]+r[1],a=e.isHorizontal();e.toGlobalCoord=a?function(o){return o+t}:function(o){return i-o+t},e.toLocalCoord=a?function(o){return o-t}:function(o){return i-o+t}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(e){var t=this.getRect(),r=this.getAxis(),i=r.orient;return i==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},n.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e[t.orient==="horizontal"?0:1]))]},n.prototype.dataToPoint=function(e){var t=this.getAxis(),r=this.getRect(),i=[],a=t.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),i[a]=t.toGlobalCoord(t.dataToCoord(+e)),i[1-a]=a===0?r.y+r.height/2:r.x+r.width/2,i},n.prototype.convertToPixel=function(e,t,r){var i=Dhe(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=Dhe(t);return i===this?this.pointToData(r):null},n}();function Dhe(n){var e=n.seriesModel,t=n.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function Oxt(n,e){var t=[];return n.eachComponent("singleAxis",function(r,i){var a=new Pxt(r,n,e);a.name="single_"+i,a.resize(r,e),r.coordinateSystem=a,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var i=r.getReferringComponents("singleAxis",Va).models[0];r.coordinateSystem=i&&i.coordinateSystem}}),t}var Rxt={create:Oxt,dimensions:cDe},khe=["x","y"],Nxt=["width","height"],Lxt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis,l=s.coordinateSystem,c=AV(l,1-yL(s)),u=l.dataToPoint(r)[0],d=a.get("type");if(d&&d!=="none"){var h=lX(a),f=jxt[d](s,u,c);f.style=h,t.graphicKey=f.type,t.pointer=f}var m=iq(i);nDe(r,t,m,i,a,o)},e.prototype.getHandleTransform=function(t,r,i){var a=iq(r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=cX(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var o=i.axis,s=o.coordinateSystem,l=yL(o),c=AV(s,l),u=[t.x,t.y];u[l]+=r[l],u[l]=Math.min(c[1],u[l]),u[l]=Math.max(c[0],u[l]);var d=AV(s,1-l),h=(d[1]+d[0])/2,f=[h,h];return f[l]=u[l],{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},e}(sX),jxt={line:function(n,e,t){var r=uX([e,t[0]],[e,t[1]],yL(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=n.getBandWidth(),i=t[1]-t[0];return{type:"Rect",shape:rDe([e-r/2,t[0]],[r,i],yL(n))}}};function yL(n){return n.isHorizontal()?0:1}function AV(n,e){var t=n.getRect();return[t[khe[e]],t[khe[e]]+t[Nxt[e]]]}var Fxt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e}(Yi);function $xt(n){Dn(M2),a_.registerAxisPointerClass("SingleAxisPointer",Lxt),n.registerComponentView(Fxt),n.registerComponentView(kxt),n.registerComponentModel(iR),iT(n,"single",iR,iR.defaultOption),n.registerCoordinateSystem("single",Rxt)}var Bxt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){var a=$T(t);n.prototype.init.apply(this,arguments),Ihe(t,a)},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),Ihe(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(Un);function Ihe(n,e){var t=n.cellSize,r;$e(t)?r=t:r=n.cellSize=[t,t],r.length===1&&(r[1]=r[0]);var i=Ue([0,1],function(a){return sut(e,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});py(n,e,{type:"box",ignoreSize:i})}var Uxt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll();var o=t.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),c=r.getLocaleModel();this._renderDayRect(t,s,a),this._renderLines(t,s,l,a),this._renderYearText(t,s,l,a),this._renderMonthText(t,c,l,a),this._renderWeekText(t,c,s,l,a)},e.prototype._renderDayRect=function(t,r,i){for(var a=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),c=r.start.time;c<=r.end.time;c=a.getNextNDay(c,1).time){var u=a.dataToRect([c],!1).tl,d=new er({shape:{x:u[0],y:u[1],width:s,height:l},cursor:"default",style:o});i.add(d)}},e.prototype._renderLines=function(t,r,i,a){var o=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),c=t.get(["splitLine","show"]),u=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=r.start,h=0;d.time<=r.end.time;h++){m(d.formatedDate),h===0&&(d=s.getDateInfo(r.start.y+"-"+r.start.m));var f=d.date;f.setMonth(f.getMonth()+1),d=s.getDateInfo(f)}m(s.getNextNDay(r.end.time,1).formatedDate);function m(v){o._firstDayOfMonth.push(s.getDateInfo(v)),o._firstDayPoints.push(s.dataToRect([v],!1).tl);var y=o._getLinePointsOfOneWeek(t,v,i);o._tlpoints.push(y[0]),o._blpoints.push(y[y.length-1]),c&&o._drawSplitline(y,l,a)}c&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,u,i),l,a),c&&this._drawSplitline(o._getEdgesPoints(o._blpoints,u,i),l,a)},e.prototype._getEdgesPoints=function(t,r,i){var a=[t[0].slice(),t[t.length-1].slice()],o=i==="horizontal"?0:1;return a[0][o]=a[0][o]-r/2,a[1][o]=a[1][o]+r/2,a},e.prototype._drawSplitline=function(t,r,i){var a=new Dl({z2:20,shape:{points:t},style:r});i.add(a)},e.prototype._getLinePointsOfOneWeek=function(t,r,i){for(var a=t.coordinateSystem,o=a.getDateInfo(r),s=[],l=0;l<7;l++){var c=a.getNextNDay(o.time,l),u=a.dataToRect([c.time],!1);s[2*c.day]=u.tl,s[2*c.day+1]=u[i==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(t,r){return st(t)&&t?iut(t,r):kt(t)?t(r):r.nameMap},e.prototype._yearTextPositionControl=function(t,r,i,a,o){var s=r[0],l=r[1],c=["center","bottom"];a==="bottom"?(l+=o,c=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,c=["center","top"]):l-=o;var u=0;return(a==="left"||a==="right")&&(u=Math.PI/2),{rotation:u,x:s,y:l,style:{align:c[0],verticalAlign:c[1]}}},e.prototype._renderYearText=function(t,r,i,a){var o=t.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=i!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(c[0][0]+c[1][0])/2,d=(c[0][1]+c[1][1])/2,h=i==="horizontal"?0:1,f={top:[u,c[h][1]],bottom:[u,c[1-h][1]],left:[c[1-h][0],d],right:[c[h][0],d]},m=r.start.y;+r.end.y>+r.start.y&&(m=m+"-"+r.end.y);var v=o.get("formatter"),y={start:r.start.y,end:r.end.y,nameMap:m},w=this._formatterLabel(v,y),_=new sr({z2:30,style:vi(o,{text:w}),silent:o.get("silent")});_.attr(this._yearTextPositionControl(_,f[l],i,l,s)),a.add(_)}},e.prototype._monthTextPositionControl=function(t,r,i,a,o){var s="left",l="top",c=t[0],u=t[1];return i==="horizontal"?(u=u+o,r&&(s="center"),a==="start"&&(l="bottom")):(c=c+o,r&&(l="middle"),a==="start"&&(s="right")),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(t,r,i,a){var o=t.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),c=o.get("position"),u=o.get("align"),d=[this._tlpoints,this._blpoints];(!s||st(s))&&(s&&(r=h8(s)||r),s=r.get(["time","monthAbbr"])||[]);var h=c==="start"?0:1,f=i==="horizontal"?0:1;l=c==="start"?-l:l;for(var m=u==="center",v=o.get("silent"),y=0;y<d[h].length-1;y++){var w=d[h][y].slice(),_=this._firstDayOfMonth[y];if(m){var S=this._firstDayPoints[y];w[f]=(S[f]+d[0][y+1][f])/2}var A=o.get("formatter"),C=s[+_.m-1],D={yyyy:_.y,yy:(_.y+"").slice(2),MM:_.m,M:+_.m,nameMap:C},M=this._formatterLabel(A,D),P=new sr({z2:30,style:Pe(vi(o,{text:M}),this._monthTextPositionControl(w,m,i,c,l)),silent:v});a.add(P)}}},e.prototype._weekTextPositionControl=function(t,r,i,a,o){var s="center",l="middle",c=t[0],u=t[1],d=i==="start";return r==="horizontal"?(c=c+a+(d?1:-1)*o[0]/2,s=d?"right":"left"):(u=u+a+(d?1:-1)*o[1]/2,l=d?"bottom":"top"),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(t,r,i,a,o){var s=t.getModel("dayLabel");if(s.get("show")){var l=t.coordinateSystem,c=s.get("position"),u=s.get("nameMap"),d=s.get("margin"),h=l.getFirstDayOfWeek();if(!u||st(u)){u&&(r=h8(u)||r);var f=r.get(["time","dayOfWeekShort"]);u=f||Ue(r.get(["time","dayOfWeekAbbr"]),function(D){return D[0]})}var m=l.getNextNDay(i.end.time,7-i.lweek).time,v=[l.getCellWidth(),l.getCellHeight()];d=Je(d,Math.min(v[1],v[0])),c==="start"&&(m=l.getNextNDay(i.start.time,-(7+i.fweek)).time,d=-d);for(var y=s.get("silent"),w=0;w<7;w++){var _=l.getNextNDay(m,w),S=l.dataToRect([_.time],!1).center,A=w;A=Math.abs((w+h)%7);var C=new sr({z2:30,style:Pe(vi(s,{text:u[A]}),this._weekTextPositionControl(S,a,c,d,v)),silent:y});o.add(C)}}},e.type="calendar",e}(Yi),CV=864e5,Vxt=function(){function n(e,t,r){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=e}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(e){e=jf(e);var t=e.getFullYear(),r=e.getMonth()+1,i=r<10?"0"+r:""+r,a=e.getDate(),o=a<10?"0"+a:""+a,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:i,d:o,day:s,time:e.getTime(),formatedDate:t+"-"+i+"-"+o,date:e}},n.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},n.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[r,7]:[7,r];Z([0,1],function(d){u(a,d)&&(o[i[d]]=a[d]*s[d])});var l={width:t.getWidth(),height:t.getHeight()},c=this._rect=oo(o,l);Z([0,1],function(d){u(a,d)||(a[d]=c[i[d]]/s[d])});function u(d,h){return d[h]!=null&&d[h]!=="auto"}this._sw=a[0],this._sh=a[1]},n.prototype.dataToPoint=function(e,t){$e(e)&&(e=e[0]),t==null&&(t=!0);var r=this.getDateInfo(e),i=this._rangeInfo,a=r.formatedDate;if(t&&!(r.time>=i.start.time&&r.time<i.end.time+CV))return[NaN,NaN];var o=r.day,s=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},n.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},n.prototype.dataToRect=function(e,t){var r=this.dataToPoint(e,t);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},n.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,t-1,i):this._getDateByWeeksAndDay(t,r-1,i)},n.prototype.convertToPixel=function(e,t,r){var i=Mhe(t);return i===this?i.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=Mhe(t);return i===this?i.pointToData(r):null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if($e(e)&&e.length===1&&(e=e[0]),$e(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var i=this.getDateInfo(r),a=i.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);t=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},n.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;t[0].time>t[1].time&&(r=!0,t.reverse());var i=Math.floor(t[1].time/CV)-Math.floor(t[0].time/CV)+1,a=new Date(t[0].time),o=a.getDate(),s=t[1].date.getDate();a.setDate(o+i-1);var l=a.getDate();if(l!==s)for(var c=a.getTime()-t[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-t[1].time)*c>0;)i-=c,a.setDate(l-c);var u=Math.floor((i+t[0].day+6)/7),d=r?-u+1:u-1;return r&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:i,weeks:u,nthWeek:d,fweek:t[0].day,lweek:t[1].day}},n.prototype._getDateByWeeksAndDay=function(e,t,r){var i=this._getRangeInfo(r);if(e>i.weeks||e===0&&t<i.fweek||e===i.weeks&&t>i.lweek)return null;var a=(e-1)*7-i.fweek+t,o=new Date(i.start.time);return o.setDate(+i.start.d+a),this.getDateInfo(o)},n.create=function(e,t){var r=[];return e.eachComponent("calendar",function(i){var a=new n(i);r.push(a),i.coordinateSystem=a}),e.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=r[i.get("calendarIndex")||0])}),r},n.dimensions=["time","value"],n}();function Mhe(n){var e=n.calendarModel,t=n.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}function zxt(n){n.registerComponentModel(Bxt),n.registerComponentView(Uxt),n.registerCoordinateSystem("calendar",Vxt)}function Hxt(n,e){var t=n.existing;if(e.id=n.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function Phe(n,e){var t;return Z(e,function(r){n[r]!=null&&n[r]!=="auto"&&(t=!0)}),t}function qxt(n,e,t){var r=Pe({},t),i=n[e],a=t.$action||"merge";a==="merge"?i?(an(i,r,!0),py(i,r,{ignoreSize:!0}),eTe(t,i),rO(t,i),rO(t,i,"shape"),rO(t,i,"style"),rO(t,i,"extra"),t.clipPath=i.clipPath):n[e]=r:a==="replace"?n[e]=r:a==="remove"&&i&&(n[e]=null)}var uDe=["transition","enterFrom","leaveTo"],Gxt=uDe.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function rO(n,e,t){if(t&&(!n[t]&&e[t]&&(n[t]={}),n=n[t],e=e[t]),!(!n||!e))for(var r=t?uDe:Gxt,i=0;i<r.length;i++){var a=r[i];n[a]==null&&e[a]!=null&&(n[a]=e[a])}}function Wxt(n,e){if(n&&(n.hv=e.hv=[Phe(e,["left","right"]),Phe(e,["top","bottom"])],n.type==="group")){var t=n,r=e;t.width==null&&(t.width=r.width=0),t.height==null&&(t.height=r.height=0)}}var Yxt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,r){var i=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,t,r),this.option.elements=i},e.prototype.optionUpdated=function(t,r){var i=this.option,a=(r?i:t).elements,o=i.elements=r?[]:i.elements,s=[];this._flatten(a,s,null);var l=XSe(o,s,"normalMerge"),c=this._elOptionsToUpdate=[];Z(l,function(u,d){var h=u.newOption;h&&(c.push(h),Hxt(u,h),qxt(o,d,h),Wxt(o[d],h))},this),i.elements=Cr(o,function(u){return u&&delete u.$action,u!=null})},e.prototype._flatten=function(t,r,i){Z(t,function(a){if(a){i&&(a.parentOption=i),r.push(a);var o=a.children;o&&o.length&&this._flatten(o,r,a),delete a.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(Un),Ohe={path:null,compoundPath:null,group:zt,image:Yo,text:sr},Nu=tr(),Kxt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=_t()},e.prototype.render=function(t,r,i){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,i)},e.prototype._updateElements=function(t){var r=t.useElOptionsToUpdate();if(r){var i=this._elMap,a=this.group,o=t.get("z"),s=t.get("zlevel");Z(r,function(l){var c=ro(l.id,null),u=c!=null?i.get(c):null,d=ro(l.parentId,null),h=d!=null?i.get(d):a,f=l.type,m=l.style;f==="text"&&m&&l.hv&&l.hv[1]&&(m.textVerticalAlign=m.textBaseline=m.verticalAlign=m.align=null);var v=l.textContent,y=l.textConfig;if(m&&HCe(m,f,!!y,!!v)){var w=qCe(m,f,!0);!y&&w.textConfig&&(y=l.textConfig=w.textConfig),!v&&w.textContent&&(v=w.textContent)}var _=Xxt(l),S=l.$action||"merge",A=S==="merge",C=S==="replace";if(A){var D=!u,M=u;D?M=Rhe(c,h,l.type,i):(M&&(Nu(M).isNew=!1),KCe(M)),M&&(nR(M,_,t,{isInit:D}),Nhe(M,l,o,s))}else if(C){aR(u,l,i,t);var P=Rhe(c,h,l.type,i);P&&(nR(P,_,t,{isInit:!0}),Nhe(P,l,o,s))}else S==="remove"&&(WCe(u,l),aR(u,l,i,t));var O=i.get(c);if(O&&v)if(A){var j=O.getTextContent();j?j.attr(v):O.setTextContent(new sr(v))}else C&&O.setTextContent(new sr(v));if(O){var L=l.clipPath;if(L){var B=L.type,$=void 0,D=!1;if(A){var Y=O.getClipPath();D=!Y||Nu(Y).type!==B,$=D?aq(B):Y}else C&&(D=!0,$=aq(B));O.setClipPath($),nR($,L,t,{isInit:D}),mL($,L.keyframeAnimation,t)}var q=Nu(O);O.setTextConfig(y),q.option=l,Zxt(O,t,l),e_({el:O,componentModel:t,itemName:O.name,itemTooltipOption:l.tooltip}),mL(O,l.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,r){for(var i=t.option.elements,a=this.group,o=this._elMap,s=r.getWidth(),l=r.getHeight(),c=["x","y"],u=0;u<i.length;u++){var d=i[u],h=ro(d.id,null),f=h!=null?o.get(h):null;if(!(!f||!f.isGroup)){var m=f.parent,v=m===a,y=Nu(f),w=Nu(m);y.width=Je(y.option.width,v?s:w.width)||0,y.height=Je(y.option.height,v?l:w.height)||0}}for(var u=i.length-1;u>=0;u--){var d=i[u],h=ro(d.id,null),f=h!=null?o.get(h):null;if(f){var m=f.parent,w=Nu(m),_=m===a?{width:s,height:l}:{width:w.width,height:w.height},S={},A=L5(f,d,_,null,{hv:d.hv,boundingMode:d.bounding},S);if(!Nu(f).isNew&&A){for(var C=d.transition,D={},M=0;M<c.length;M++){var P=c[M],O=S[P];C&&(xw(C)||_n(C,P)>=0)?D[P]=O:f[P]=O}fr(f,D,t,0)}else f.attr(S)}}},e.prototype._clear=function(){var t=this,r=this._elMap;r.each(function(i){aR(i,Nu(i).option,r,t._lastGraphicModel)}),this._elMap=_t()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Yi);function aq(n){var e=ft(Ohe,n)?Ohe[n]:qY(n),t=new e({});return Nu(t).type=n,t}function Rhe(n,e,t,r){var i=aq(t);return e.add(i),r.set(n,i),Nu(i).id=n,Nu(i).isNew=!0,i}function aR(n,e,t,r){var i=n&&n.parent;i&&(n.type==="group"&&n.traverse(function(a){aR(a,e,t,r)}),Q5(n,e,r),t.removeKey(Nu(n).id))}function Nhe(n,e,t,r){n.isGroup||Z([["cursor",Qu.prototype.cursor],["zlevel",r||0],["z",t||0],["z2",0]],function(i){var a=i[0];ft(e,a)?n[a]=Zt(e[a],i[1]):n[a]==null&&(n[a]=i[1])}),Z(Vn(e),function(i){if(i.indexOf("on")===0){var a=e[i];n[i]=kt(a)?a:null}}),ft(e,"draggable")&&(n.draggable=e.draggable),e.name!=null&&(n.name=e.name),e.id!=null&&(n.id=e.id)}function Xxt(n){return n=Pe({},n),Z(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(J1e),function(e){delete n[e]}),n}function Zxt(n,e,t){var r=Wt(n).eventData;!n.silent&&!n.ignore&&!r&&(r=Wt(n).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:n.name}),r&&(r.info=t.info)}function Qxt(n){n.registerComponentModel(Yxt),n.registerComponentView(Kxt),n.registerPreprocessor(function(e){var t=e.graphic;$e(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var Lhe=["x","y","radius","angle","single"],Jxt=["cartesian2d","polar","singleAxis"];function eSt(n){var e=n.get("coordinateSystem");return _n(Jxt,e)>=0}function qv(n){return n+"Axis"}function tSt(n,e){var t=_t(),r=[],i=_t();n.eachComponent({mainType:"dataZoom",query:e},function(u){i.get(u.uid)||s(u)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(u){!i.get(u.uid)&&l(u)&&(s(u),a=!0)}function s(u){i.set(u.uid,!0),r.push(u),c(u)}function l(u){var d=!1;return u.eachTargetAxis(function(h,f){var m=t.get(h);m&&m[f]&&(d=!0)}),d}function c(u){u.eachTargetAxis(function(d,h){(t.get(d)||t.set(d,[]))[h]=!0})}return r}function dDe(n){var e=n.ecModel,t={infoList:[],infoMap:_t()};return n.eachTargetAxis(function(r,i){var a=e.getComponent(qv(r),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=t.infoMap.get(s);l||(l={model:o,axisModels:[]},t.infoList.push(l),t.infoMap.set(s,l)),l.axisModels.push(a)}}}),t}var DV=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},n}(),vI=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,i){var a=jhe(t);this.settledOption=a,this.mergeDefaultAndTheme(t,i),this._doInit(a)},e.prototype.mergeOption=function(t){var r=jhe(t);an(this.option,t,!0),an(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;Z([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=_t(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return Z(Lhe,function(i){var a=this.getReferringComponents(qv(i),Wst);if(a.specified){r=!0;var o=new DV;Z(a.models,function(s){o.add(s.componentIndex)}),t.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===r}});l(s,"single")}function l(c,u){var d=c[0];if(d){var h=new DV;if(h.add(d.componentIndex),t.set(u,h),a=!1,u==="x"||u==="y"){var f=d.getReferringComponents("grid",Va).models[0];f&&Z(c,function(m){d.componentIndex!==m.componentIndex&&f===m.getReferringComponents("grid",Va).models[0]&&h.add(m.componentIndex)})}}}a&&Z(Lhe,function(c){if(a){var u=i.findComponents({mainType:qv(c),filter:function(h){return h.get("type",!0)==="category"}});if(u[0]){var d=new DV;d.add(u[0].componentIndex),t.set(c,d),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,i=this.get("rangeMode");Z([["start","startValue"],["end","endValue"]],function(a,o){var s=t[a[0]]!=null,l=t[a[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,i){t==null&&(t=this.ecModel.getComponent(qv(r),i))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(i,a){Z(i.indexList,function(o){t.call(r,a,o)})})},e.prototype.getAxisProxy=function(t,r){var i=this.getAxisModel(t,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[r])return this.ecModel.getComponent(qv(t),r)},e.prototype.setRawRange=function(t){var r=this.option,i=this.settledOption;Z([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(r[a[0]]=i[a[0]]=t[a[0]],r[a[1]]=i[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;Z(["start","startValue","end","endValue"],function(i){r[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var c=this.getAxisProxy(o,s.indexList[l]);if(c.hostedBy(this))return c;r||(r=c)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(Un);function jhe(n){var e={};return Z(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}var nSt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(vI),pX=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.dataZoomModel=t,this.ecModel=r,this.api=i},e.type="dataZoom",e}(Yi),rSt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(pX),OS=Z,Fhe=Hu,iSt=function(){function n(e,t,r,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(e){return this._dataZoomModel===e},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(eSt(t)){var r=qv(this._dimName),i=t.getReferringComponents(r,Va).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}},this),e},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return Bt(this._minMaxSpan)},n.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],c;OS(["start","end"],function(h,f){var m=e[h],v=e[h+"Value"];a[f]==="percent"?(m==null&&(m=o[f]),v=i.parse(kr(m,o,t))):(c=!0,v=v==null?t[f]:i.parse(v),m=kr(v,t,o)),l[f]=v==null||isNaN(v)?t[f]:v,s[f]=m==null||isNaN(m)?o[f]:m}),Fhe(l),Fhe(s);var u=this._minMaxSpan;c?d(l,s,t,o,!1):d(s,l,o,t,!0);function d(h,f,m,v,y){var w=y?"Span":"ValueSpan";o_(0,h,m,"all",u["min"+w],u["max"+w]);for(var _=0;_<2;_++)f[_]=kr(h[_],m,v,!0),y&&(f[_]=i.parse(f[_]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=aSt(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;OS(i,function(l){var c=l.getData(),u=c.mapDimensionsAll(r);if(u.length){if(a==="weakFilter"){var d=c.getStore(),h=Ue(u,function(f){return c.getDimensionIndex(f)},c);c.filterSelf(function(f){for(var m,v,y,w=0;w<u.length;w++){var _=d.get(h[w],f),S=!isNaN(_),A=_<o[0],C=_>o[1];if(S&&!A&&!C)return!0;S&&(y=!0),A&&(m=!0),C&&(v=!0)}return y&&m&&v})}else OS(u,function(f){if(a==="empty")l.setData(c=c.map(f,function(v){return s(v)?v:NaN}));else{var m={};m[f]=o,c.selectRange(m)}});OS(u,function(f){c.setApproximateExtent(o,f)})}});function s(l){return l>=o[0]&&l<=o[1]}},n.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;OS(["min","max"],function(i){var a=t.get(i+"Span"),o=t.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=kr(r[0]+o,r,[0,100],!0):a!=null&&(o=kr(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var i=VSe(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),t[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n}();function aSt(n,e,t){var r=[1/0,-1/0];OS(t,function(o){Fft(r,o.getData(),e)});var i=n.getAxisModel(),a=kEe(i.axis.scale,i,r).calculate();return[a.min,a.max]}var oSt={getTargetSeries:function(n){function e(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=n.getComponent(qv(o),s);i(o,s,l,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var t=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new iSt(i,a,s,n),t.push(o.__dzAxisProxy))});var r=_t();return Z(t,function(i){Z(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,e){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).reset(t)}),t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).filterData(t,e)})}),n.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function sSt(n){n.registerAction("dataZoom",function(e,t){var r=tSt(t,e);Z(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var $he=!1;function gX(n){$he||($he=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,oSt),sSt(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function lSt(n){n.registerComponentModel(nSt),n.registerComponentView(rSt),gX(n)}var Fu=function(){function n(){}return n}(),hDe={};function RS(n,e){hDe[n]=e}function fDe(n){return hDe[n]}var cSt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;Z(this.option.feature,function(r,i){var a=fDe(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),an(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Un);function uSt(n,e,t){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:t.getWidth(),height:t.getHeight()},o=oo(r,a,i);ww(e.get("orient"),n,e.get("itemGap"),o.width,o.height),L5(n,r,a,i)}function pDe(n,e){var t=FT(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),n=new er({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var dSt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",c=t.get("feature")||{},u=this._features||(this._features={}),d=[];Z(c,function(m,v){d.push(v)}),new Ng(this._featureNames||[],d).add(h).update(h).remove(en(h,null)).execute(),this._featureNames=d;function h(m,v){var y=d[m],w=d[v],_=c[y],S=new Ir(_,t,t.ecModel),A;if(a&&a.newTitle!=null&&a.featureName===y&&(_.title=a.newTitle),y&&!w){if(hSt(y))A={onclick:S.option.onclick,featureName:y};else{var C=fDe(y);if(!C)return;A=new C}u[y]=A}else if(A=u[w],!A)return;A.uid=jT("toolbox-feature"),A.model=S,A.ecModel=r,A.api=i;var D=A instanceof Fu;if(!y&&w){D&&A.dispose&&A.dispose(r,i);return}if(!S.get("show")||D&&A.unusable){D&&A.remove&&A.remove(r,i);return}f(S,A,y),S.setIconStatus=function(M,P){var O=this.option,j=this.iconPaths;O.iconStatus=O.iconStatus||{},O.iconStatus[M]=P,j[M]&&(P==="emphasis"?Og:Rg)(j[M])},A instanceof Fu&&A.render&&A.render(S,r,i,a)}function f(m,v,y){var w=m.getModel("iconStyle"),_=m.getModel(["emphasis","iconStyle"]),S=v instanceof Fu&&v.getIcons?v.getIcons():m.get("icon"),A=m.get("title")||{},C,D;st(S)?(C={},C[y]=S):C=S,st(A)?(D={},D[y]=A):D=A;var M=m.iconPaths={};Z(C,function(P,O){var j=y2(P,{},{x:-s/2,y:-s/2,width:s,height:s});j.setStyle(w.getItemStyle());var L=j.ensureState("emphasis");L.style=_.getItemStyle();var B=new sr({style:{text:D[O],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null,font:GY({fontStyle:_.get("textFontStyle"),fontFamily:_.get("textFontFamily"),fontSize:_.get("textFontSize"),fontWeight:_.get("textFontWeight")},r)},ignore:!0});j.setTextContent(B),e_({el:j,componentModel:t,itemName:O,formatterParamsExtra:{title:D[O]}}),j.__title=D[O],j.on("mouseover",function(){var $=_.getItemStyle(),Y=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";B.setStyle({fill:_.get("textFill")||$.fill||$.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),j.setTextConfig({position:_.get("textPosition")||Y}),B.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){m.get(["iconStatus",O])!=="emphasis"&&i.leaveEmphasis(this),B.hide()}),(m.get(["iconStatus",O])==="emphasis"?Og:Rg)(j),o.add(j),j.on("click",dt(v.onclick,v,r,i,O)),M[O]=j})}uSt(o,t,i),o.add(pDe(o.getBoundingRect(),t)),l||o.eachChild(function(m){var v=m.__title,y=m.ensureState("emphasis"),w=y.textConfig||(y.textConfig={}),_=m.getTextContent(),S=_&&_.ensureState("emphasis");if(S&&!kt(S)&&v){var A=S.style||(S.style={}),C=d2(v,sr.makeFont(A)),D=m.x+o.x,M=m.y+o.y+s,P=!1;M+C.height>i.getHeight()&&(w.position="top",P=!0);var O=P?-5-C.height:s+10;D+C.width/2>i.getWidth()?(w.position=["100%",O],A.align="right"):D-C.width/2<0&&(w.position=[0,O],A.align="left")}})},e.prototype.updateView=function(t,r,i,a){Z(this._features,function(o){o instanceof Fu&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(t,r){Z(this._features,function(i){i instanceof Fu&&i.remove&&i.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){Z(this._features,function(i){i instanceof Fu&&i.dispose&&i.dispose(t,r)})},e.type="toolbox",e}(Yi);function hSt(n){return n.indexOf("my")===0}var fSt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var i=this.model,a=i.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),c=Nn.browser;if(typeof MouseEvent=="function"&&(c.newEdge||!c.ie&&!c.edge)){var u=document.createElement("a");u.download=a+"."+s,u.target="_blank",u.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||o){var h=l.split(","),f=h[0].indexOf("base64")>-1,m=o?decodeURIComponent(h[1]):h[1];f&&(m=window.atob(m));var v=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var y=m.length,w=new Uint8Array(y);y--;)w[y]=m.charCodeAt(y);var _=new Blob([w]);window.navigator.msSaveOrOpenBlob(_,v)}else{var S=document.createElement("iframe");document.body.appendChild(S);var A=S.contentWindow,C=A.document;C.open("image/svg+xml","replace"),C.write(m),C.close(),A.focus(),C.execCommand("SaveAs",!0,v),document.body.removeChild(S)}}else{var D=i.get("lang"),M='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(D&&D[0]||"")+'" /></body>',P=window.open();P.document.write(M),P.document.title=a}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(Fu),Bhe="__ec_magicType_stack__",pSt=[["line","bar"],["stack"]],gSt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),i={};return Z(t.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(Uhe[i]){var s={series:[]},l=function(d){var h=d.subType,f=d.id,m=Uhe[i](h,f,d,a);m&&(Rt(m,d.option),s.series.push(m));var v=d.coordinateSystem;if(v&&v.type==="cartesian2d"&&(i==="line"||i==="bar")){var y=v.getAxesByScale("ordinal")[0];if(y){var w=y.dim,_=w+"Axis",S=d.getReferringComponents(_,Va).models[0],A=S.componentIndex;s[_]=s[_]||[];for(var C=0;C<=A;C++)s[_][A]=s[_][A]||{};s[_][A].boundaryGap=i==="bar"}}};Z(pSt,function(d){_n(d,i)>=0&&Z(d,function(h){a.setIconStatus(h,"normal")})}),a.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var c,u=i;i==="stack"&&(c=an({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(u="tiled")),r.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:c,featureName:"magicType"})}},e}(Fu),Uhe={line:function(n,e,t,r){if(n==="bar")return an({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,e,t,r){if(n==="line")return an({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,e,t,r){var i=t.get("stack")===Bhe;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),an({id:e,stack:i?"":Bhe},r.get(["option","stack"])||{},!0)}};qf({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});var J5=new Array(60).join("-"),sT="	";function mSt(n){var e={},t=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else t.push(i)}else t.push(i)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function vSt(n){var e=[];return Z(n,function(t,r){var i=t.categoryAxis,a=t.valueAxis,o=a.dim,s=[" "].concat(Ue(t.series,function(f){return f.name})),l=[i.model.getCategories()];Z(t.series,function(f){var m=f.getRawData();l.push(f.getRawData().mapArray(m.mapDimension(o),function(v){return v}))});for(var c=[s.join(sT)],u=0;u<l[0].length;u++){for(var d=[],h=0;h<l.length;h++)d.push(l[h][u]);c.push(d.join(sT))}e.push(c.join(`
`))}),e.join(`

`+J5+`

`)}function ySt(n){return Ue(n,function(e){var t=e.getRawData(),r=[e.name],i=[];return t.each(t.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=t.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];r.push((s?s+sT:"")+i.join(sT))}),r.join(`
`)}).join(`

`+J5+`

`)}function bSt(n){var e=mSt(n);return{value:Cr([vSt(e.seriesGroupByCategoryAxis),ySt(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+J5+`

`),meta:e.meta}}function bL(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function wSt(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(sT)>=0)return!0}var oq=new RegExp("["+sT+"]+","g");function _St(n){for(var e=n.split(/\n+/g),t=bL(e.shift()).split(oq),r=[],i=Ue(t,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var o=bL(e[a]).split(oq);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function xSt(n){for(var e=n.split(/\n+/g),t=bL(e.shift()),r=[],i=0;i<e.length;i++){var a=bL(e[i]);if(a){var o=a.split(oq),s="",l=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},l=r[i].value):l=r[i]=[];for(var u=0;u<o.length;u++)l.push(+o[u]);l.length===1&&(c?r[i].value=l[0]:r[i]=l[0])}}return{name:t,data:r}}function SSt(n,e){var t=n.split(new RegExp(`
*`+J5+`
*`,"g")),r={series:[]};return Z(t,function(i,a){if(wSt(i)){var o=_St(i),s=e[a],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=xSt(i);r.series.push(o)}}),r}var TSt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var c=document.createElement("div"),u=document.createElement("textarea");c.style.cssText="overflow:auto";var d=a.get("optionToContent"),h=a.get("contentToOption"),f=bSt(t);if(kt(d)){var m=d(r.getOption());st(m)?c.innerHTML=m:Z1(m)&&c.appendChild(m)}else{u.readOnly=a.get("readOnly");var v=u.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),u.value=f.value,c.appendChild(u)}var y=f.meta,w=document.createElement("div");w.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),A=document.createElement("div");_+=";background-color:"+a.get("buttonColor"),_+=";color:"+a.get("buttonTextColor");var C=this;function D(){i.removeChild(o),C._dom=null}FH(S,"click",D),FH(A,"click",function(){if(h==null&&d!=null||h!=null&&d==null){D();return}var M;try{kt(h)?M=h(c,r.getOption()):M=SSt(u.value,y)}catch(P){throw D(),new Error("Data view format error "+P)}M&&r.dispatchAction({type:"changeDataView",newOption:M}),D()}),S.innerHTML=l[1],A.innerHTML=l[2],A.style.cssText=S.style.cssText=_,!a.get("readOnly")&&w.appendChild(A),w.appendChild(S),o.appendChild(s),o.appendChild(c),o.appendChild(w),c.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(Fu);function ESt(n,e){return Ue(n,function(t,r){var i=e&&e[r];if(jt(i)&&!$e(i)){var a=jt(t)&&!$e(t);a||(t={value:t});var o=i.name!=null&&t.name==null;return t=Rt(t,i),o&&delete t.name,t}else return t})}qf({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];Z(n.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)t.push(Pe({type:"scatter"},r));else{var a=i.get("data");t.push({name:r.name,data:ESt(r.data,a)})}}),e.mergeOption(Rt({series:t},n.newOption))});var gDe=Z,mDe=tr();function ASt(n,e){var t=mX(n);gDe(e,function(r,i){for(var a=t.length-1;a>=0;a--){var o=t[a];if(o[i])break}if(a<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();t[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),t.push(e)}function CSt(n){var e=mX(n),t=e[e.length-1];e.length>1&&e.pop();var r={};return gDe(t,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function DSt(n){mDe(n).snapshots=null}function kSt(n){return mX(n).length}function mX(n){var e=mDe(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var ISt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){DSt(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(Fu);qf({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});var MSt=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],vX=function(){function n(e,t,r){var i=this;this._targetInfoList=[];var a=Vhe(t,e);Z(PSt,function(o,s){(!r||!r.include||_n(r.include,s)>=0)&&o(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=kV[r.brushType](0,a,i);r.__rangeOffset={offset:Ghe[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,r){Z(e,function(i){var a=this.findTargetInfo(i,t);a&&a!==!0&&Z(a.coordSyses,function(o){var s=kV[i.brushType](1,o,i.range,!0);r(i,s.values,o,t)})},this)},n.prototype.setInputRanges=function(e,t){Z(e,function(r){var i=this.findTargetInfo(r,t);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=kV[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?Ghe[r.brushType](a.values,o.offset,OSt(a.xyMinMax,o.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(e,t){return Ue(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:TCe(i),isTargetByCursor:ACe(i,e,r.coordSysModel),getLinearBrushOtherExtent:ECe(i)}})},n.prototype.controlSeries=function(e,t,r){var i=this.findTargetInfo(e,r);return i===!0||i&&_n(i.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,i=Vhe(t,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<zhe.length;l++)if(zhe[l](i,o))return o}return!0},n}();function sq(n){return n[0]>n[1]&&n.reverse(),n}function Vhe(n,e){return SD(n,e,{includeMainTypes:MSt})}var PSt={grid:function(n,e){var t=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=_t(),o={},s={};!t&&!r&&!i||(Z(t,function(l){var c=l.axis.grid.model;a.set(c.id,c),o[c.id]=!0}),Z(r,function(l){var c=l.axis.grid.model;a.set(c.id,c),s[c.id]=!0}),Z(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var c=l.coordinateSystem,u=[];Z(c.getCartesians(),function(d,h){(_n(t,d.getAxis("x").model)>=0||_n(r,d.getAxis("y").model)>=0)&&u.push(d)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:Hhe.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(n,e){Z(n.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:Hhe.geo})})}},zhe=[function(n,e){var t=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&t&&(i=t.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],Hhe={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(bw(n)),e}},kV={lineX:en(qhe,0),lineY:en(qhe,1),rect:function(n,e,t,r){var i=n?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),a=n?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[sq([i[0],a[0]]),sq([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(n,e,t,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=Ue(t,function(o){var s=n?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function qhe(n,e,t,r){var i=t.getAxis(["x","y"][n]),a=sq(Ue([0,1],function(s){return e?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[n]=a,o[1-n]=[NaN,NaN],{values:a,xyMinMax:o}}var Ghe={lineX:en(Whe,0),lineY:en(Whe,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return Ue(n,function(r,i){return[r[0]-t[0]*e[i][0],r[1]-t[1]*e[i][1]]})}};function Whe(n,e,t,r){return[e[0]-r[n]*t[0],e[1]-r[n]*t[1]]}function OSt(n,e){var t=Yhe(n),r=Yhe(e),i=[t[0]/r[0],t[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function Yhe(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var lq=Z,RSt=Vst("toolbox-dataZoom_"),NSt=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){this._brushController||(this._brushController=new HK(i.getZr()),this._brushController.on("brush",dt(this._onBrush,this)).mount()),FSt(t,r,this,a,i),jSt(t,r)},e.prototype.onclick=function(t,r,i){LSt[i].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new vX(yX(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(c,u,d){if(d.type==="cartesian2d"){var h=c.brushType;h==="rect"?(s("x",d,u[0]),s("y",d,u[1])):s({lineX:"x",lineY:"y"}[h],d,u)}}),ASt(a,i),this._dispatchZoomAction(i);function s(c,u,d){var h=u.getAxis(c),f=h.model,m=l(c,f,a),v=m.findRepresentativeAxisProxy(f).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(d=o_(0,d.slice(),h.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),m&&(i[m.id]={dataZoomId:m.id,startValue:d[0],endValue:d[1]})}function l(c,u,d){var h;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var m=f.getAxisModel(c,u.componentIndex);m&&(h=f)}),h}},e.prototype._dispatchZoomAction=function(t){var r=[];lq(t,function(i,a){r.push(Bt(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(Fu),LSt={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(CSt(this.ecModel))}};function yX(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function jSt(n,e){n.setIconStatus("back",kSt(e)>1?"emphasis":"normal")}function FSt(n,e,t,r,i){var a=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var o=new vX(yX(n),e,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}fut("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),i=[],a=yX(r),o=SD(n,a);lq(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),lq(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,c,u){var d=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:RSt+c+d};h[u]=d,i.push(h)}return i});function $St(n){n.registerComponentModel(cSt),n.registerComponentView(dSt),RS("saveAsImage",fSt),RS("magicType",gSt),RS("dataView",TSt),RS("dataZoom",NSt),RS("restore",ISt),Dn(lSt)}var BSt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Un);function vDe(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function yDe(n){if(Nn.domSupported){for(var e=document.documentElement.style,t=0,r=n.length;t<r;t++)if(n[t]in e)return n[t]}}var bDe=yDe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),USt=yDe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function wDe(n,e){if(!n)return e;e=Z1e(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function VSt(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?t[e]:null}var zSt=wDe(USt,"transition"),bX=wDe(bDe,"transform"),HSt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Nn.transform3dSupported?"will-change:transform;":"");function qSt(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function GSt(n,e,t){if(!st(t)||t==="inside")return"";var r=n.get("backgroundColor"),i=n.get("borderWidth");e=Uw(e);var a=qSt(t),o=Math.max(Math.round(i)*1.5,6),s="",l=bX+":",c;_n(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(c=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(c=a==="top"?225:45)+"deg)");var u=c*Math.PI/180,d=o+i,h=d*Math.abs(Math.cos(u))+d*Math.abs(Math.sin(u)),f=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-d)/2)*100)/100;s+=";"+a+":-"+f+"px";var m=e+" solid "+i+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+m,"border-right:"+m,"background-color:"+r+";"];return'<div style="'+v.join("")+'"></div>'}function WSt(n,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+n/2+"s "+t,i="opacity"+r+",visibility"+r;return e||(r=" "+n+"s "+t,i+=Nn.transformSupported?","+bX+r:",left"+r+",top"+r),zSt+":"+i}function Khe(n,e,t){var r=n.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!Nn.transformSupported)return t?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=Nn.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return t?"top:0;left:0;"+bX+":"+o+";":[["top",0],["left",0],[bDe,o]]}function YSt(n){var e=[],t=n.get("fontSize"),r=n.getTextColor();r&&e.push("color:"+r),e.push("font:"+n.getFont());var i=Zt(n.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+i+"px");var a=n.get("textShadowColor"),o=n.get("textShadowBlur")||0,s=n.get("textShadowOffsetX")||0,l=n.get("textShadowOffsetY")||0;return a&&o&&e.push("text-shadow:"+s+"px "+l+"px "+o+"px "+a),Z(["decoration","align"],function(c){var u=n.get(c);u&&e.push("text-"+c+":"+u)}),e.join(";")}function KSt(n,e,t){var r=[],i=n.get("transitionDuration"),a=n.get("backgroundColor"),o=n.get("shadowBlur"),s=n.get("shadowColor"),l=n.get("shadowOffsetX"),c=n.get("shadowOffsetY"),u=n.getModel("textStyle"),d=MTe(n,"html"),h=l+"px "+c+"px "+o+"px "+s;return r.push("box-shadow:"+h),e&&i&&r.push(WSt(i,t)),a&&r.push("background-color:"+a),Z(["width","color","radius"],function(f){var m="border-"+f,v=Z1e(m),y=n.get(v);y!=null&&r.push(m+":"+y+(f==="color"?"":"px"))}),r.push(YSt(u)),d!=null&&r.push("padding:"+FT(d).join("px ")+"px"),r.join(";")+";"}function Xhe(n,e,t,r,i){var a=e&&e.painter;if(t){var o=a&&a.getViewportRoot();o&&wot(n,o,t,r,i)}else{n[0]=r,n[1]=i;var s=a&&a.getViewportRootOffset();s&&(n[0]+=s.offsetLeft,n[1]+=s.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var XSt=function(){function n(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Nn.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=e.getZr(),a=t.appendTo,o=a&&(st(a)?document.querySelector(a):Z1(a)?a:kt(a)&&a(e.getDom()));Xhe(this._styleCoord,i,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(r),this._api=e,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=i.handler,u=i.painter.getViewportRoot();Pu(u,l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return n.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=VSt(t,"position"),i=t.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=HSt+KSt(e,!this._firstShow,this._longHide)+Khe(a[0],a[1],!0)+("border-color:"+Uw(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,r,i,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(st(a)&&r.get("trigger")==="item"&&!vDe(r)&&(s=GSt(r,i,a)),st(e))o.innerHTML=e+s;else if(e){o.innerHTML="",$e(e)||(e=[e]);for(var l=0;l<e.length;l++)Z1(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var c=document.createElement("div");c.innerHTML=s,o.appendChild(c)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},n.prototype.moveTo=function(e,t){if(this.el){var r=this._styleCoord;if(Xhe(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var i=this.el.style,a=Khe(r[0],r[1]);Z(a,function(o){i[o[0]]=o[1]})}}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",Nn.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(dt(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},n}(),ZSt=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),Qhe(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,r,i,a){var o=this;jt(e)&&Er(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new sr({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:MTe(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),Z(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){o.el.style[c]=r.get(c)}),Z(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){o.el.style[c]=s.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=Zhe(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},n.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;Qhe(i,this._zr,e,t),e=i[0],t=i[1];var a=r.style,o=Av(a.borderWidth||0),s=Zhe(a);r.x=e+o+s.left,r.y=t+o+s.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(dt(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function Av(n){return Math.max(0,n)}function Zhe(n){var e=Av(n.shadowBlur||0),t=Av(n.shadowOffsetX||0),r=Av(n.shadowOffsetY||0);return{left:Av(e-t),right:Av(e+t),top:Av(e-r),bottom:Av(e+r)}}function Qhe(n,e,t,r){n[0]=t,n[1]=r,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var QSt=new er({shape:{x:-1,y:-1,width:2,height:2}}),JSt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(Nn.node||!r.getDom())){var i=t.getComponent("tooltip"),a=this._renderMode=Kst(i.get("renderMode"));this._tooltipContent=a==="richText"?new ZSt(r):new XSt(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(t,r,i){if(!(Nn.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?VT(this,"_updatePosition",50,"fixRate"):iI(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");iDe("itemTooltip",this._api,dt(function(i,a,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(t,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,i,a){if(!(a.from===this.uid||Nn.node||!i.getDom())){var o=Jhe(a,i);this._ticket="";var s=a.dataByCoordSys,l=r1t(a,r,i);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var u=QSt;u.x=a.x,u.y=a.y,u.update(),Wt(u).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:u},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,i,a))return;var d=aDe(a,r),h=d.point[0],f=d.point[1];h!=null&&f!=null&&this._tryShow({offsetX:h,offsetY:f,target:d.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(t,r,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(Jhe(a,i))},e.prototype._manuallyAxisShowTip=function(t,r,i,a){var o=a.seriesIndex,s=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var c=r.getSeriesByIndex(o);if(c){var u=c.getData(),d=pC([u.getItemModel(s),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(t,r){var i=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){var s=Wt(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;nw(i,function(u){if(Wt(u).dataIndex!=null)return l=u,!0;if(Wt(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(t,l,r):c?this._showComponentItemTooltip(t,c,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=dt(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=pC([r.tooltipOption],a),l=this._renderMode,c=[],u=To("section",{blocks:[],noHeader:!0}),d=[],h=new p6;Z(t,function(_){Z(_.dataByAxis,function(S){var A=i.getComponent(S.axisDim+"Axis",S.axisIndex),C=S.value;if(!(!A||C==null)){var D=tDe(C,A.axis,i,S.seriesDataIndices,S.valueLabelOpt),M=To("section",{header:D,noHeader:!th(D),sortBlocks:!0,blocks:[]});u.blocks.push(M),Z(S.seriesDataIndices,function(P){var O=i.getSeriesByIndex(P.seriesIndex),j=P.dataIndexInside,L=O.getDataParams(j);if(!(L.dataIndex<0)){L.axisDim=S.axisDim,L.axisIndex=S.axisIndex,L.axisType=S.axisType,L.axisId=S.axisId,L.axisValue=yK(A.axis,{value:C}),L.axisValueLabel=D,L.marker=h.makeTooltipMarker("item",Uw(L.color),l);var B=$le(O.formatTooltip(j,!0,null)),$=B.frag;if($){var Y=pC([O],a).get("valueFormatter");M.blocks.push(Y?Pe({valueFormatter:Y},$):$)}B.text&&d.push(B.text),c.push(L)}})}})}),u.blocks.reverse(),d.reverse();var f=r.position,m=s.get("order"),v=qle(u,h,l,m,i.get("useUTC"),s.get("textStyle"));v&&d.unshift(v);var y=l==="richText"?`

`:"<br/>",w=d.join(y);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,c)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,c):this._showTooltipContent(s,w,c,Math.random()+"",o[0],o[1],f,null,h)})},e.prototype._showSeriesItemTooltip=function(t,r,i){var a=this._ecModel,o=Wt(r),s=o.seriesIndex,l=a.getSeriesByIndex(s),c=o.dataModel||l,u=o.dataIndex,d=o.dataType,h=c.getData(d),f=this._renderMode,m=t.positionDefault,v=pC([h.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,m?{position:m}:null),y=v.get("trigger");if(!(y!=null&&y!=="item")){var w=c.getDataParams(u,d),_=new p6;w.marker=_.makeTooltipMarker("item",Uw(w.color),f);var S=$le(c.formatTooltip(u,!1,d)),A=v.get("order"),C=v.get("valueFormatter"),D=S.frag,M=D?qle(C?Pe({valueFormatter:C},D):D,_,f,A,a.get("useUTC"),v.get("textStyle")):S.text,P="item_"+c.name+"_"+u;this._showOrMove(v,function(){this._showTooltipContent(v,M,w,P,t.offsetX,t.offsetY,t.position,t.target,_)}),i({type:"showTip",dataIndexInside:u,dataIndex:h.getRawIndex(u),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,i){var a=this._renderMode==="html",o=Wt(r),s=o.tooltipConfig,l=s.option||{},c=l.encodeHTMLContent;if(st(l)){var u=l;l={content:u,formatter:u},c=!0}c&&a&&l.content&&(l=Bt(l),l.content=ml(l.content));var d=[l],h=this._ecModel.getComponent(o.componentMainType,o.componentIndex);h&&d.push(h),d.push({formatter:l.content});var f=t.positionDefault,m=pC(d,this._tooltipModel,f?{position:f}:null),v=m.get("content"),y=Math.random()+"",w=new p6;this._showOrMove(m,function(){var _=Bt(m.get("formatterParams")||{});this._showTooltipContent(m,v,_,y,t.offsetX,t.offsetY,t.position,r,w)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,i,a,o,s,l,c,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var d=this._tooltipContent;d.setEnterable(t.get("enterable"));var h=t.get("formatter");l=l||t.get("position");var f=r,m=this._getNearestPoint([o,s],i,t.get("trigger"),t.get("borderColor")),v=m.color;if(h)if(st(h)){var y=t.ecModel.get("useUTC"),w=$e(i)?i[0]:i,_=w&&w.axisType&&w.axisType.indexOf("time")>=0;f=h,_&&(f=M5(w.axisValue,f,y)),f=Q1e(f,i,!0)}else if(kt(h)){var S=dt(function(A,C){A===this._ticket&&(d.setContent(C,u,t,v,l),this._updatePosition(t,l,o,s,d,i,c))},this);this._ticket=a,f=h(i,a,S)}else f=h;d.setContent(f,u,t,v,l),d.show(t,v),this._updatePosition(t,l,o,s,d,i,c)}},e.prototype._getNearestPoint=function(t,r,i,a){if(i==="axis"||$e(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!$e(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,i,a,o,s,l){var c=this._api.getWidth(),u=this._api.getHeight();r=r||t.get("position");var d=o.getSize(),h=t.get("align"),f=t.get("verticalAlign"),m=l&&l.getBoundingRect().clone();if(l&&m.applyTransform(l.transform),kt(r)&&(r=r([i,a],s,o.el,m,{viewSize:[c,u],contentSize:d.slice()})),$e(r))i=Je(r[0],c),a=Je(r[1],u);else if(jt(r)){var v=r;v.width=d[0],v.height=d[1];var y=oo(v,{width:c,height:u});i=y.x,a=y.y,h=null,f=null}else if(st(r)&&l){var w=n1t(r,m,d,t.get("borderWidth"));i=w[0],a=w[1]}else{var w=e1t(i,a,o,c,u,h?null:20,f?null:20);i=w[0],a=w[1]}if(h&&(i-=efe(h)?d[0]/2:h==="right"?d[0]:0),f&&(a-=efe(f)?d[1]/2:f==="bottom"?d[1]:0),vDe(t)){var w=t1t(i,a,o,c,u);i=w[0],a=w[1]}o.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===t.length;return o&&Z(i,function(s,l){var c=s.dataByAxis||[],u=t[l]||{},d=u.dataByAxis||[];o=o&&c.length===d.length,o&&Z(c,function(h,f){var m=d[f]||{},v=h.seriesDataIndices||[],y=m.seriesDataIndices||[];o=o&&h.value===m.value&&h.axisType===m.axisType&&h.axisId===m.axisId&&v.length===y.length,o&&Z(v,function(w,_){var S=y[_];o=o&&w.seriesIndex===S.seriesIndex&&w.dataIndex===S.dataIndex}),a&&Z(h.seriesDataIndices,function(w){var _=w.seriesIndex,S=r[_],A=a[_];S&&A&&A.data!==S.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){Nn.node||!r.getDom()||(iI(this,"_updatePosition"),this._tooltipContent.dispose(),rq("itemTooltip",r))},e.type="tooltip",e}(Yi);function pC(n,e,t){var r=e.ecModel,i;t?(i=new Ir(t,r,r),i=new Ir(e.option,i,r)):i=e;for(var a=n.length-1;a>=0;a--){var o=n[a];o&&(o instanceof Ir&&(o=o.get("tooltip",!0)),st(o)&&(o={formatter:o}),o&&(i=new Ir(o,i,r)))}return i}function Jhe(n,e){return n.dispatchAction||dt(e.dispatchAction,e)}function e1t(n,e,t,r,i,a,o){var s=t.getSize(),l=s[0],c=s[1];return a!=null&&(n+l+a+2>r?n-=l+a:n+=a),o!=null&&(e+c+o>i?e-=c+o:e+=o),[n,e]}function t1t(n,e,t,r,i){var a=t.getSize(),o=a[0],s=a[1];return n=Math.min(n+o,r)-o,e=Math.min(e+s,i)-s,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function n1t(n,e,t,r){var i=t[0],a=t[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,c=e.width,u=e.height;switch(n){case"inside":s=e.x+c/2-i/2,l=e.y+u/2-a/2;break;case"top":s=e.x+c/2-i/2,l=e.y-a-o;break;case"bottom":s=e.x+c/2-i/2,l=e.y+u+o;break;case"left":s=e.x-i-o,l=e.y+u/2-a/2;break;case"right":s=e.x+c+o,l=e.y+u/2-a/2}return[s,l]}function efe(n){return n==="center"||n==="middle"}function r1t(n,e,t){var r=OY(n).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=h2(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=t.getViewOfComponentModel(o),l;if(s.group.traverse(function(c){var u=Wt(c).tooltipConfig;if(u&&u.name===n.name)return l=c,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function i1t(n){Dn(M2),n.registerComponentModel(BSt),n.registerComponentView(JSt),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Ca),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Ca)}var a1t=["rect","polygon","keep","clear"];function o1t(n,e){var t=Wr(n?n.brush:[]);if(t.length){var r=[];Z(t,function(l){var c=l.hasOwnProperty("toolbox")?l.toolbox:[];c instanceof Array&&(r=r.concat(c))});var i=n&&n.toolbox;$e(i)&&(i=i[0]),i||(i={feature:{}},n.toolbox=[i]);var a=i.feature||(i.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),s1t(s),e&&!s.length&&s.push.apply(s,a1t)}}function s1t(n){var e={};Z(n,function(t){e[t]=1}),n.length=0,Z(e,function(t,r){n.push(r)})}var tfe=Z;function nfe(n){if(n){for(var e in n)if(n.hasOwnProperty(e))return!0}}function cq(n,e,t){var r={};return tfe(e,function(a){var o=r[a]=i();tfe(n[a],function(s,l){if(xo.isValidType(l)){var c={type:l,visual:s};t&&t(c,a),o[l]=new xo(c),l==="opacity"&&(c=Bt(c),c.type="colorAlpha",o.__hidden.__alphaForOpacity=new xo(c))}})}),r;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function _De(n,e,t){var r;Z(t,function(i){e.hasOwnProperty(i)&&nfe(e[i])&&(r=!0)}),r&&Z(t,function(i){e.hasOwnProperty(i)&&nfe(e[i])?n[i]=Bt(e[i]):delete n[i]})}function l1t(n,e,t,r,i,a){var o={};Z(n,function(d){var h=xo.prepareVisualTypes(e[d]);o[d]=h});var s;function l(d){return lK(t,s,d)}function c(d,h){UTe(t,s,d,h)}t.each(u);function u(d,h){s=d;var f=t.getRawDataItem(s);if(!(f&&f.visualMap===!1))for(var m=r.call(i,d),v=e[m],y=o[m],w=0,_=y.length;w<_;w++){var S=y[w];v[S]&&v[S].applyVisual(d,l,c)}}}function c1t(n,e,t,r){var i={};return Z(n,function(a){var o=xo.prepareVisualTypes(e[a]);i[a]=o}),{progress:function(o,s){var l;r!=null&&(l=s.getDimensionIndex(r));function c(C){return lK(s,d,C)}function u(C,D){UTe(s,d,C,D)}for(var d,h=s.getStore();(d=o.next())!=null;){var f=s.getRawDataItem(d);if(!(f&&f.visualMap===!1))for(var m=r!=null?h.get(l,d):d,v=t(m),y=e[v],w=i[v],_=0,S=w.length;_<S;_++){var A=w[_];y[A]&&y[A].applyVisual(m,c,u)}}}}}function u1t(n){var e=n.brushType,t={point:function(r){return rfe[e].point(r,t,n)},rect:function(r){return rfe[e].rect(r,t,n)}};return t}var rfe={lineX:ife(0),lineY:ife(1),rect:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])},rect:function(n,e,t){return n&&t.boundingRect.intersect(n)}},polygon:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])&&Fb(t.range,n[0],n[1])},rect:function(n,e,t){var r=t.range;if(!n||r.length<=1)return!1;var i=n.x,a=n.y,o=n.width,s=n.height,l=r[0];if(Fb(r,i,a)||Fb(r,i+o,a)||Fb(r,i,a+s)||Fb(r,i+o,a+s)||pn.create(n).contain(l[0],l[1])||GC(i,a,i+o,a,r)||GC(i,a,i,a+s,r)||GC(i+o,a,i+o,a+s,r)||GC(i,a+s,i+o,a+s,r))return!0}}};function ife(n){var e=["x","y"],t=["width","height"];return{point:function(r,i,a){if(r){var o=a.range,s=r[n];return gC(s,o)}},rect:function(r,i,a){if(r){var o=a.range,s=[r[e[n]],r[e[n]]+r[t[n]]];return s[1]<s[0]&&s.reverse(),gC(s[0],o)||gC(s[1],o)||gC(o[0],s)||gC(o[1],s)}}}}function gC(n,e){return e[0]<=n&&n<=e[1]}var afe=["inBrush","outOfBrush"],IV="__ecBrushSelect",uq="__ecInBrushSelectEvent";function xDe(n){n.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new vX(e.option,n);t.setInputRanges(e.areas,n)})}function d1t(n,e,t){var r=[],i,a;n.eachComponent({mainType:"brush"},function(o){t&&t.type==="takeGlobalCursor"&&o.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),xDe(n),n.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Bt(o.areas),selected:[]};r.push(l);var c=o.option,u=c.brushLink,d=[],h=[],f=[],m=!1;s||(i=c.throttleType,a=c.throttleDelay);var v=Ue(o.areas,function(C){var D=g1t[C.brushType],M=Rt({boundingRect:D?D(C):void 0},C);return M.selectors=u1t(M),M}),y=cq(o.option,afe,function(C){C.mappingMethod="fixed"});$e(u)&&Z(u,function(C){d[C]=1});function w(C){return u==="all"||!!d[C]}function _(C){return!!C.length}n.eachSeries(function(C,D){var M=f[D]=[];C.subType==="parallel"?S(C,D):A(C,D,M)});function S(C,D){var M=C.coordinateSystem;m=m||M.hasAxisBrushed(),w(D)&&M.eachActiveState(C.getData(),function(P,O){P==="active"&&(h[O]=1)})}function A(C,D,M){if(!(!C.brushSelector||p1t(o,D))&&(Z(v,function(O){o.brushTargetManager.controlSeries(O,C,n)&&M.push(O),m=m||_(M)}),w(D)&&_(M))){var P=C.getData();P.each(function(O){ofe(C,M,P,O)&&(h[O]=1)})}}n.eachSeries(function(C,D){var M={seriesId:C.id,seriesIndex:D,seriesName:C.name,dataIndex:[]};l.selected.push(M);var P=f[D],O=C.getData(),j=w(D)?function(L){return h[L]?(M.dataIndex.push(O.getRawIndex(L)),"inBrush"):"outOfBrush"}:function(L){return ofe(C,P,O,L)?(M.dataIndex.push(O.getRawIndex(L)),"inBrush"):"outOfBrush"};(w(D)?m:_(P))&&l1t(afe,y,O,j)})}),h1t(e,i,a,r,t)}function h1t(n,e,t,r,i){if(i){var a=n.getZr();if(!a[uq]){a[IV]||(a[IV]=f1t);var o=VT(a,IV,t,e);o(n,r)}}}function f1t(n,e){if(!n.isDisposed()){var t=n.getZr();t[uq]=!0,n.dispatchAction({type:"brushSelect",batch:e}),t[uq]=!1}}function ofe(n,e,t,r){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(n.brushSelector(r,t,o.selectors,o))return!0}}function p1t(n,e){var t=n.option.seriesIndex;return t!=null&&t!=="all"&&($e(t)?_n(t,e)<0:e!==t)}var g1t={rect:function(n){return sfe(n.range)},polygon:function(n){for(var e,t=n.range,r=0,i=t.length;r<i;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=t[r];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&sfe(e)}};function sfe(n){return new pn(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var m1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new HK(r.getZr())).on("brush",dt(this._onBrush,this)).mount()},e.prototype.render=function(t,r,i,a){this.model=t,this._updateController(t,r,i,a)},e.prototype.updateTransform=function(t,r,i,a){xDe(r),this._updateController(t,r,i,a)},e.prototype.updateVisual=function(t,r,i,a){this.updateTransform(t,r,i,a)},e.prototype.updateView=function(t,r,i,a){this._updateController(t,r,i,a)},e.prototype._updateController=function(t,r,i,a){(!a||a.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(i)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var r=this.model.id,i=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:Bt(i),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:Bt(i),$from:r})},e.type="brush",e}(Yi),v1t="#ddd",y1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&_De(i,t,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:v1t},a.hasOwnProperty("liftZ")||(a.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=Ue(t,function(r){return lfe(this.option,r)},this))},e.prototype.setBrushOption=function(t){this.brushOption=lfe(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(Un);function lfe(n,e){return an({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new Ir(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},e,!0)}var b1t=["rect","polygon","lineX","lineY","keep","clear"],w1t=function(n){Te(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i){var a,o,s;r.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,Z(t.get("type",!0),function(l){t.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},e.prototype.updateView=function(t,r,i){this.render(t,r,i)},e.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),i={};return Z(t.get("type",!0),function(a){r[a]&&(i[a]=r[a])}),i},e.prototype.onclick=function(t,r,i){var a=this._brushType,o=this._brushMode;i==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(t){var r={show:!0,type:b1t.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return r},e}(Fu);function _1t(n){n.registerComponentView(m1t),n.registerComponentModel(y1t),n.registerPreprocessor(o1t),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,d1t),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Ca),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Ca),RS("brush",w1t)}var x1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Un),S1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var a=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),l=t.get("textAlign"),c=Zt(t.get("textBaseline"),t.get("textVerticalAlign")),u=new sr({style:vi(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),h=t.get("subtext"),f=new sr({style:vi(s,{text:h,fill:s.getTextColor(),y:d.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),m=t.get("link"),v=t.get("sublink"),y=t.get("triggerEvent",!0);u.silent=!m&&!y,f.silent=!v&&!y,m&&u.on("click",function(){KN(m,"_"+t.get("target"))}),v&&f.on("click",function(){KN(v,"_"+t.get("subtarget"))}),Wt(u).eventData=Wt(f).eventData=y?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(u),h&&a.add(f);var w=a.getBoundingRect(),_=t.getBoxLayoutParams();_.width=w.width,_.height=w.height;var S=oo(_,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?S.x+=S.width:l==="center"&&(S.x+=S.width/2)),c||(c=t.get("top")||t.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?S.y+=S.height:c==="middle"&&(S.y+=S.height/2),c=c||"top"),a.x=S.x,a.y=S.y,a.markRedraw();var A={align:l,verticalAlign:c};u.setStyle(A),f.setStyle(A),w=a.getBoundingRect();var C=S.margin,D=t.getItemStyle(["color","opacity"]);D.fill=t.get("backgroundColor");var M=new er({shape:{x:w.x-C[3],y:w.y-C[0],width:w.width+C[1]+C[3],height:w.height+C[0]+C[2],r:t.get("borderRadius")},style:D,subPixelOptimize:!0,silent:!0});a.add(M)}},e.type="title",e}(Yi);function T1t(n){n.registerComponentModel(x1t),n.registerComponentView(S1t)}var cfe=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._initData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var r=this._data.count();this.option.loop?t=(t%r+r)%r:(t>=r&&(t=r-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,r=t.data||[],i=t.axisType,a=this._names=[],o;i==="category"?(o=[],Z(r,function(c,u){var d=ro(OT(c),""),h;jt(c)?(h=Bt(c),h.value=u):h=u,o.push(h),a.push(d)})):o=r;var s={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new xl([{name:"value",type:s}],this);l.initData(o,a)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Un),SDe=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=My(cfe.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(cfe);Ha(SDe,F5.prototype);var E1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(Yi),A1t=function(n){Te(e,n);function e(t,r,i,a){var o=n.call(this,t,r,i)||this;return o.type=a||"value",o}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(fh),MV=Math.PI,ufe=tr(),C1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.api=r},e.prototype.render=function(t,r,i){if(this.model=t,this.api=i,this.ecModel=r,this.group.removeAll(),t.get("show",!0)){var a=this._layout(t,i),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,t);t.formatTooltip=function(c){var u=l.scale.getLabel({value:c});return To("nameValue",{noName:!0,value:u})},Z(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](a,o,l,t)},this),this._renderAxisLabel(a,s,l,t),this._position(a,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,r){var i=t.get(["label","position"]),a=t.get("orient"),o=k1t(t,r),s;i==null||i==="auto"?s=a==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":st(i)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:s=i;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},c={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:MV/2},d=a==="vertical"?o.height:o.width,h=t.getModel("controlStyle"),f=h.get("show",!0),m=f?h.get("itemSize"):0,v=f?h.get("itemGap"):0,y=m+v,w=t.get(["label","rotate"])||0;w=w*MV/180;var _,S,A,C=h.get("position",!0),D=f&&h.get("showPlayBtn",!0),M=f&&h.get("showPrevBtn",!0),P=f&&h.get("showNextBtn",!0),O=0,j=d;C==="left"||C==="bottom"?(D&&(_=[0,0],O+=y),M&&(S=[O,0],O+=y),P&&(A=[j-m,0],j-=y)):(D&&(_=[j-m,0],j-=y),M&&(S=[0,0],O+=y),P&&(A=[j-m,0],j-=y));var L=[O,j];return t.get("inverse")&&L.reverse(),{viewRect:o,mainLength:d,orient:a,rotation:u[a],labelRotation:w,labelPosOpt:s,labelAlign:t.get(["label","align"])||l[a],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[a],playPosition:_,prevBtnPosition:S,nextBtnPosition:A,axisExtent:L,controlSize:m,controlGap:v}},e.prototype._position=function(t,r){var i=this._mainGroup,a=this._labelGroup,o=t.viewRect;if(t.orient==="vertical"){var s=Gc(),l=o.x,c=o.y+o.height;Nf(s,s,[-l,-c]),Jw(s,s,-MV/2),Nf(s,s,[l,c]),o=o.clone(),o.applyTransform(s)}var u=_(o),d=_(i.getBoundingRect()),h=_(a.getBoundingRect()),f=[i.x,i.y],m=[a.x,a.y];m[0]=f[0]=u[0][0];var v=t.labelPosOpt;if(v==null||st(v)){var y=v==="+"?0:1;S(f,d,u,1,y),S(m,h,u,1,1-y)}else{var y=v>=0?0:1;S(f,d,u,1,y),m[1]=f[1]+v}i.setPosition(f),a.setPosition(m),i.rotation=a.rotation=t.rotation,w(i),w(a);function w(A){A.originX=u[0][0]-A.x,A.originY=u[1][0]-A.y}function _(A){return[[A.x,A.x+A.width],[A.y,A.y+A.height]]}function S(A,C,D,M,P){A[M]+=D[M][P]-C[M][P]}},e.prototype._createAxis=function(t,r){var i=r.getData(),a=r.get("axisType"),o=D1t(r,a);o.getTicks=function(){return i.mapArray(["value"],function(c){return{value:c}})};var s=i.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new A1t("value",o,t.axisExtent,a);return l.model=r,l},e.prototype._createGroup=function(t){var r=this[t]=new zt;return this.group.add(r),r},e.prototype._renderAxisLine=function(t,r,i,a){var o=i.getExtent();if(a.get(["lineStyle","show"])){var s=new bo({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:Pe({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(s);var l=this._progressLine=new bo({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:Rt({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},e.prototype._renderAxisTick=function(t,r,i,a){var o=this,s=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],Z(l,function(c){var u=i.dataToCoord(c.value),d=s.getItemModel(c.value),h=d.getModel("itemStyle"),f=d.getModel(["emphasis","itemStyle"]),m=d.getModel(["progress","itemStyle"]),v={x:u,y:0,onclick:dt(o._changeTimeline,o,c.value)},y=dfe(d,h,r,v);y.ensureState("emphasis").style=f.getItemStyle(),y.ensureState("progress").style=m.getItemStyle(),yw(y);var w=Wt(y);d.get("tooltip")?(w.dataIndex=c.value,w.dataModel=a):w.dataIndex=w.dataModel=null,o._tickSymbols.push(y)})},e.prototype._renderAxisLabel=function(t,r,i,a){var o=this,s=i.getLabelModel();if(s.get("show")){var l=a.getData(),c=i.getViewLabels();this._tickLabels=[],Z(c,function(u){var d=u.tickValue,h=l.getItemModel(d),f=h.getModel("label"),m=h.getModel(["emphasis","label"]),v=h.getModel(["progress","label"]),y=i.dataToCoord(u.tickValue),w=new sr({x:y,y:0,rotation:t.labelRotation-t.rotation,onclick:dt(o._changeTimeline,o,d),silent:!1,style:vi(f,{text:u.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});w.ensureState("emphasis").style=vi(m),w.ensureState("progress").style=vi(v),r.add(w),yw(w),ufe(w).dataIndex=d,o._tickLabels.push(w)})}},e.prototype._renderControl=function(t,r,i,a){var o=t.controlSize,s=t.rotation,l=a.getModel("controlStyle").getItemStyle(),c=a.getModel(["emphasis","controlStyle"]).getItemStyle(),u=a.getPlayState(),d=a.get("inverse",!0);h(t.nextBtnPosition,"next",dt(this._changeTimeline,this,d?"-":"+")),h(t.prevBtnPosition,"prev",dt(this._changeTimeline,this,d?"+":"-")),h(t.playPosition,u?"stop":"play",dt(this._handlePlayClick,this,!u),!0);function h(f,m,v,y){if(f){var w=ch(Zt(a.get(["controlStyle",m+"BtnSize"]),o),o),_=[0,-w/2,w,w],S=I1t(a,m+"Icon",_,{x:f[0],y:f[1],originX:o/2,originY:0,rotation:y?-s:0,rectHover:!0,style:l,onclick:v});S.ensureState("emphasis").style=c,r.add(S),yw(S)}}},e.prototype._renderCurrentPointer=function(t,r,i,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),c=this,u={onCreate:function(d){d.draggable=!0,d.drift=dt(c._handlePointerDrag,c),d.ondragend=dt(c._handlePointerDragend,c),hfe(d,c._progressLine,s,i,a,!0)},onUpdate:function(d){hfe(d,c._progressLine,s,i,a)}};this._currentPointer=dfe(l,l,this._mainGroup,{},this._currentPointer,u)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,r,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,r){var i=this._toAxisCoord(t)[0],a=this._axis,o=Hu(a.getExtent().slice());i>o[1]&&(i=o[1]),i<o[0]&&(i=o[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=i,s.dirty());var l=this._findNearestTick(i),c=this.model;(r||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=t.model;t._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var r=this._mainGroup.getLocalTransform();return ah(t,r,!0)},e.prototype._findNearestTick=function(t){var r=this.model.getData(),i=1/0,a,o=this._axis;return r.each(["value"],function(s,l){var c=o.dataToCoord(s),u=Math.abs(c-t);u<i&&(i=u,a=l)}),a},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var r=this.model.getCurrentIndex();t==="+"?t=r+1:t==="-"&&(t=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),r=this._tickSymbols,i=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<t);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",ufe(i[a]).dataIndex<=t)},e.type="timeline.slider",e}(E1t);function D1t(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new H5({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new mK({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new Lg}}function k1t(n,e){return oo(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},n.get("padding"))}function I1t(n,e,t,r){var i=r.style,a=y2(n.get(["controlStyle",e]),r||{},new pn(t[0],t[1],t[2],t[3]));return i&&a.setStyle(i),a}function dfe(n,e,t,r,i,a){var o=e.get("color");if(i)i.setColor(o),t.add(i),a&&a.onUpdate(i);else{var s=n.get("symbol");i=za(s,-1,-1,2,2,o),i.setStyle("strokeNoScale",!0),t.add(i),a&&a.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),r=an({rectHover:!0,z2:100},r,!0);var c=zT(n.get("symbolSize"));r.scaleX=c[0]/2,r.scaleY=c[1]/2;var u=n_(n.get("symbolOffset"),c);u&&(r.x=(r.x||0)+u[0],r.y=(r.y||0)+u[1]);var d=n.get("symbolRotate");return r.rotation=(d||0)*Math.PI/180||0,i.attr(r),i.updateTransform(),i}function hfe(n,e,t,r,i,a){if(!n.dragging){var o=i.getModel("checkpointStyle"),s=r.dataToCoord(i.getData().get("value",t));if(a||!o.get("animation",!0))n.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function M1t(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,r){var i=t.getComponent("timeline");return i&&e.currentIndex!=null&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),Rt({currentIndex:i.option.currentIndex},e)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var r=t.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function P1t(n){var e=n&&n.timeline;$e(e)||(e=e?[e]:[]),Z(e,function(t){t&&O1t(t)})}function O1t(n){var e=n.type,t={number:"value",time:"time"};if(t[e]&&(n.axisType=t[e],delete n.type),ffe(n),Ub(n,"controlPosition")){var r=n.controlStyle||(n.controlStyle={});Ub(r,"position")||(r.position=n.controlPosition),r.position==="none"&&!Ub(r,"show")&&(r.show=!1,delete r.position),delete n.controlPosition}Z(n.data||[],function(i){jt(i)&&!$e(i)&&(!Ub(i,"value")&&Ub(i,"name")&&(i.value=i.name),ffe(i))})}function ffe(n){var e=n.itemStyle||(n.itemStyle={}),t=e.emphasis||(e.emphasis={}),r=n.label||n.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};Z(r,function(o,s){!a[s]&&!Ub(i,s)&&(i[s]=o)}),t.label&&!Ub(r,"emphasis")&&(r.emphasis=t.label,delete t.label)}function Ub(n,e){return n.hasOwnProperty(e)}function R1t(n){n.registerComponentModel(SDe),n.registerComponentView(C1t),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),M1t(n),n.registerPreprocessor(P1t)}function wX(n,e){if(!n)return!1;for(var t=$e(n)?n:[n],r=0;r<t.length;r++)if(t[r]&&t[r][e])return!0;return!1}function iO(n){jw(n,"label",["show"])}var aO=tr(),Fg=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._mergeOption(t,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(Nn.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},e.prototype._mergeOption=function(t,r,i,a){var o=this.mainType;i||r.eachSeries(function(s){var l=s.get(this.mainType,!0),c=aO(s)[o];if(!l||!l.data){aO(s)[o]=null;return}c?c._mergeOption(l,r,!0):(a&&iO(l),Z(l.data,function(u){u instanceof Array?(iO(u[0]),iO(u[1])):iO(u)}),c=this.createMarkerModelFromSeries(l,this,r),Pe(c,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),c.__hostSeries=s),aO(s)[o]=c},this)},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return To("section",{header:this.name,blocks:[To("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,r){var i=F5.prototype.getDataParams.call(this,t,r),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},e.getMarkerModelFromSeries=function(t,r){return aO(t)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(Un);Ha(Fg,F5.prototype);var N1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(Fg);function dq(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function L1t(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function oO(n,e,t,r,i,a){var o=[],s=gy(e,r),l=s?e.getCalculationInfo("stackResultDimension"):r,c=_X(e,l,n),u=e.indicesOfNearest(l,c)[0];o[i]=e.get(t,u),o[a]=e.get(l,u);var d=e.get(r,u),h=bf(e.get(r,u));return h=Math.min(h,20),h>=0&&(o[a]=+o[a].toFixed(h)),[o,d]}var PV={min:en(oO,"min"),max:en(oO,"max"),average:en(oO,"average"),median:en(oO,"median")};function yI(n,e){if(e){var t=n.getData(),r=n.coordinateSystem,i=r&&r.dimensions;if(!L1t(e)&&!$e(e.coord)&&$e(i)){var a=TDe(e,t,r,n);if(e=Bt(e),e.type&&PV[e.type]&&a.baseAxis&&a.valueAxis){var o=_n(i,a.baseAxis.dim),s=_n(i,a.valueAxis.dim),l=PV[e.type](t,a.baseDataDim,a.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!$e(i))e.coord=[];else for(var c=e.coord,u=0;u<2;u++)PV[c[u]]&&(c[u]=_X(t,t.mapDimension(i[u]),c[u]));return e}}function TDe(n,e,t,r){var i={};return n.valueIndex!=null||n.valueDim!=null?(i.valueDataDim=n.valueIndex!=null?e.getDimension(n.valueIndex):n.valueDim,i.valueAxis=t.getAxis(j1t(r,i.valueDataDim)),i.baseAxis=t.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=t.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function j1t(n,e){var t=n.getData().getDimensionInfo(e);return t&&t.coordDim}function bI(n,e){return n&&n.containData&&e.coord&&!dq(e)?n.containData(e.coord):!0}function F1t(n,e,t){return n&&n.containZone&&e.coord&&t.coord&&!dq(e)&&!dq(t)?n.containZone(e.coord,t.coord):!0}function EDe(n,e){return n?function(t,r,i,a){var o=a<2?t.coord&&t.coord[a]:t.value;return ty(o,e[a])}:function(t,r,i,a){return ty(t.value,e[a])}}function _X(n,e,t){if(t==="average"){var r=0,i=0;return n.each(e,function(a,o){isNaN(a)||(r+=a,i++)}),r/i}else return t==="median"?n.getMedian(e):n.getDataExtent(e)[t==="max"?1:0]}var OV=tr(),xX=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=_t()},e.prototype.render=function(t,r,i){var a=this,o=this.markerGroupMap;o.each(function(s){OV(s).keep=!1}),r.eachSeries(function(s){var l=Fg.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,r,i)}),o.each(function(s){!OV(s).keep&&a.group.remove(s.group)})},e.prototype.markKeep=function(t){OV(t).keep=!0},e.prototype.toggleBlurSeries=function(t,r){var i=this;Z(t,function(a){var o=Fg.getMarkerModelFromSeries(a,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(r?g1e(l):BY(l))})}})},e.type="marker",e}(Yi);function pfe(n,e,t){var r=e.coordinateSystem;n.each(function(i){var a=n.getItemModel(i),o,s=Je(a.get("x"),t.getWidth()),l=Je(a.get("y"),t.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(e.getMarkerPosition)o=e.getMarkerPosition(n.getValues(n.dimensions,i));else if(r){var c=n.get(r.dimensions[0],i),u=n.get(r.dimensions[1],i);o=r.dataToPoint([c,u])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),n.setItemLayout(i,o)})}var $1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=Fg.getMarkerModelFromSeries(a,"markPoint");o&&(pfe(o.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new T2),d=B1t(o,t,r);r.setData(d),pfe(r.getData(),t,a),d.each(function(h){var f=d.getItemModel(h),m=f.getShallow("symbol"),v=f.getShallow("symbolSize"),y=f.getShallow("symbolRotate"),w=f.getShallow("symbolOffset"),_=f.getShallow("symbolKeepAspect");if(kt(m)||kt(v)||kt(y)||kt(w)){var S=r.getRawValue(h),A=r.getDataParams(h);kt(m)&&(m=m(S,A)),kt(v)&&(v=v(S,A)),kt(y)&&(y=y(S,A)),kt(w)&&(w=w(S,A))}var C=f.getModel("itemStyle").getItemStyle(),D=w2(l,"color");C.fill||(C.fill=D),d.setItemVisual(h,{symbol:m,symbolSize:v,symbolRotate:y,symbolOffset:w,symbolKeepAspect:_,style:C})}),u.updateData(d),this.group.add(u.group),d.eachItemGraphicEl(function(h){h.traverse(function(f){Wt(f).dataModel=r})}),this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markPoint",e}(xX);function B1t(n,e,t){var r;n?r=Ue(n&&n.dimensions,function(s){var l=e.getData().getDimensionInfo(e.getData().mapDimension(s))||{};return Pe(Pe({},l),{name:s,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new xl(r,t),a=Ue(t.get("data"),en(yI,e));n&&(a=Cr(a,en(bI,n)));var o=EDe(!!n,r);return i.initData(a,null,o),i}function U1t(n){n.registerComponentModel(N1t),n.registerComponentView($1t),n.registerPreprocessor(function(e){wX(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var V1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Fg),sO=tr(),z1t=function(n,e,t,r){var i=n.getData(),a;if($e(r))a=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var s=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)s=e.getAxis(r.yAxis!=null?"y":"x"),l=Ho(r.yAxis,r.xAxis);else{var c=TDe(r,i,e,n);s=c.valueAxis;var u=vEe(i,c.valueDataDim);l=_X(i,u,o)}var d=s.dim==="x"?0:1,h=1-d,f=Bt(r),m={coord:[]};f.type=null,f.coord=[],f.coord[h]=-1/0,m.coord[h]=1/0;var v=t.get("precision");v>=0&&ur(l)&&(l=+l.toFixed(Math.min(v,20))),f.coord[d]=m.coord[d]=l,a=[f,m,{type:o,valueIndex:r.valueIndex,value:l}]}else a=[]}var y=[yI(n,a[0]),yI(n,a[1]),Pe({},a[2])];return y[2].type=y[2].type||null,an(y[2],y[0]),an(y[2],y[1]),y};function wL(n){return!isNaN(n)&&!isFinite(n)}function gfe(n,e,t,r){var i=1-n,a=r.dimensions[n];return wL(e[i])&&wL(t[i])&&e[n]===t[n]&&r.getAxis(a).containData(e[n])}function H1t(n,e){if(n.type==="cartesian2d"){var t=e[0].coord,r=e[1].coord;if(t&&r&&(gfe(1,t,r,n)||gfe(0,t,r,n)))return!0}return bI(n,e[0])&&bI(n,e[1])}function RV(n,e,t,r,i){var a=r.coordinateSystem,o=n.getItemModel(e),s,l=Je(o.get("x"),i.getWidth()),c=Je(o.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition)s=r.getMarkerPosition(n.getValues(n.dimensions,e));else{var u=a.dimensions,d=n.get(u[0],e),h=n.get(u[1],e);s=a.dataToPoint([d,h])}if(i_(a,"cartesian2d")){var f=a.getAxis("x"),m=a.getAxis("y"),u=a.dimensions;wL(n.get(u[0],e))?s[0]=f.toGlobalCoord(f.getExtent()[t?0:1]):wL(n.get(u[1],e))&&(s[1]=m.toGlobalCoord(m.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}n.setItemLayout(e,s)}var q1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=Fg.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=sO(o).from,c=sO(o).to;l.each(function(u){RV(l,u,!0,a,i),RV(c,u,!1,a,i)}),s.each(function(u){s.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new zK);this.group.add(u.group);var d=G1t(o,t,r),h=d.from,f=d.to,m=d.line;sO(r).from=h,sO(r).to=f,r.setData(m);var v=r.get("symbol"),y=r.get("symbolSize"),w=r.get("symbolRotate"),_=r.get("symbolOffset");$e(v)||(v=[v,v]),$e(y)||(y=[y,y]),$e(w)||(w=[w,w]),$e(_)||(_=[_,_]),d.from.each(function(A){S(h,A,!0),S(f,A,!1)}),m.each(function(A){var C=m.getItemModel(A).getModel("lineStyle").getLineStyle();m.setItemLayout(A,[h.getItemLayout(A),f.getItemLayout(A)]),C.stroke==null&&(C.stroke=h.getItemVisual(A,"style").fill),m.setItemVisual(A,{fromSymbolKeepAspect:h.getItemVisual(A,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(A,"symbolOffset"),fromSymbolRotate:h.getItemVisual(A,"symbolRotate"),fromSymbolSize:h.getItemVisual(A,"symbolSize"),fromSymbol:h.getItemVisual(A,"symbol"),toSymbolKeepAspect:f.getItemVisual(A,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(A,"symbolOffset"),toSymbolRotate:f.getItemVisual(A,"symbolRotate"),toSymbolSize:f.getItemVisual(A,"symbolSize"),toSymbol:f.getItemVisual(A,"symbol"),style:C})}),u.updateData(m),d.line.eachItemGraphicEl(function(A){Wt(A).dataModel=r,A.traverse(function(C){Wt(C).dataModel=r})});function S(A,C,D){var M=A.getItemModel(C);RV(A,C,D,t,a);var P=M.getModel("itemStyle").getItemStyle();P.fill==null&&(P.fill=w2(l,"color")),A.setItemVisual(C,{symbolKeepAspect:M.get("symbolKeepAspect"),symbolOffset:Zt(M.get("symbolOffset",!0),_[D?0:1]),symbolRotate:Zt(M.get("symbolRotate",!0),w[D?0:1]),symbolSize:Zt(M.get("symbolSize"),y[D?0:1]),symbol:Zt(M.get("symbol",!0),v[D?0:1]),style:P})}this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markLine",e}(xX);function G1t(n,e,t){var r;n?r=Ue(n&&n.dimensions,function(c){var u=e.getData().getDimensionInfo(e.getData().mapDimension(c))||{};return Pe(Pe({},u),{name:c,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new xl(r,t),a=new xl(r,t),o=new xl([],t),s=Ue(t.get("data"),en(z1t,e,n,t));n&&(s=Cr(s,en(H1t,n)));var l=EDe(!!n,r);return i.initData(Ue(s,function(c){return c[0]}),null,l),a.initData(Ue(s,function(c){return c[1]}),null,l),o.initData(Ue(s,function(c){return c[2]})),o.hasItemOption=!0,{from:i,to:a,line:o}}function W1t(n){n.registerComponentModel(V1t),n.registerComponentView(q1t),n.registerPreprocessor(function(e){wX(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var Y1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(Fg),lO=tr(),K1t=function(n,e,t,r){var i=r[0],a=r[1];if(!(!i||!a)){var o=yI(n,i),s=yI(n,a),l=o.coord,c=s.coord;l[0]=Ho(l[0],-1/0),l[1]=Ho(l[1],-1/0),c[0]=Ho(c[0],1/0),c[1]=Ho(c[1],1/0);var u=xY([{},o,s]);return u.coord=[o.coord,s.coord],u.x0=o.x,u.y0=o.y,u.x1=s.x,u.y1=s.y,u}};function _L(n){return!isNaN(n)&&!isFinite(n)}function mfe(n,e,t,r){var i=1-n;return _L(e[i])&&_L(t[i])}function X1t(n,e){var t=e.coord[0],r=e.coord[1],i={coord:t,x:e.x0,y:e.y0},a={coord:r,x:e.x1,y:e.y1};return i_(n,"cartesian2d")?t&&r&&(mfe(1,t,r)||mfe(0,t,r))?!0:F1t(n,i,a):bI(n,i)||bI(n,a)}function vfe(n,e,t,r,i){var a=r.coordinateSystem,o=n.getItemModel(e),s,l=Je(o.get(t[0]),i.getWidth()),c=Je(o.get(t[1]),i.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition){var u=n.getValues(["x0","y0"],e),d=n.getValues(["x1","y1"],e),h=a.clampData(u),f=a.clampData(d),m=[];t[0]==="x0"?m[0]=h[0]>f[0]?d[0]:u[0]:m[0]=h[0]>f[0]?u[0]:d[0],t[1]==="y0"?m[1]=h[1]>f[1]?d[1]:u[1]:m[1]=h[1]>f[1]?u[1]:d[1],s=r.getMarkerPosition(m,t,!0)}else{var v=n.get(t[0],e),y=n.get(t[1],e),w=[v,y];a.clampData&&a.clampData(w,w),s=a.dataToPoint(w,!0)}if(i_(a,"cartesian2d")){var _=a.getAxis("x"),S=a.getAxis("y"),v=n.get(t[0],e),y=n.get(t[1],e);_L(v)?s[0]=_.toGlobalCoord(_.getExtent()[t[0]==="x0"?0:1]):_L(y)&&(s[1]=S.toGlobalCoord(S.getExtent()[t[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}return s}var yfe=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Z1t=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=Fg.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var c=Ue(yfe,function(d){return vfe(s,l,d,a,i)});s.setItemLayout(l,c);var u=s.getItemGraphicEl(l);u.setShape("points",c)})}},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,{group:new zt});this.group.add(u.group),this.markKeep(u);var d=Q1t(o,t,r);r.setData(d),d.each(function(h){var f=Ue(yfe,function(P){return vfe(d,h,P,t,a)}),m=o.getAxis("x").scale,v=o.getAxis("y").scale,y=m.getExtent(),w=v.getExtent(),_=[m.parse(d.get("x0",h)),m.parse(d.get("x1",h))],S=[v.parse(d.get("y0",h)),v.parse(d.get("y1",h))];Hu(_),Hu(S);var A=!(y[0]>_[1]||y[1]<_[0]||w[0]>S[1]||w[1]<S[0]),C=!A;d.setItemLayout(h,{points:f,allClipped:C});var D=d.getItemModel(h).getModel("itemStyle").getItemStyle(),M=w2(l,"color");D.fill||(D.fill=M,st(D.fill)&&(D.fill=jN(D.fill,.4))),D.stroke||(D.stroke=M),d.setItemVisual(h,"style",D)}),d.diff(lO(u).data).add(function(h){var f=d.getItemLayout(h);if(!f.allClipped){var m=new Cl({shape:{points:f.points}});d.setItemGraphicEl(h,m),u.group.add(m)}}).update(function(h,f){var m=lO(u).data.getItemGraphicEl(f),v=d.getItemLayout(h);v.allClipped?m&&u.group.remove(m):(m?fr(m,{shape:{points:v.points}},r,h):m=new Cl({shape:{points:v.points}}),d.setItemGraphicEl(h,m),u.group.add(m))}).remove(function(h){var f=lO(u).data.getItemGraphicEl(h);u.group.remove(f)}).execute(),d.eachItemGraphicEl(function(h,f){var m=d.getItemModel(f),v=d.getItemVisual(f,"style");h.useStyle(d.getItemVisual(f,"style")),ms(h,So(m),{labelFetcher:r,labelDataIndex:f,defaultText:d.getName(f)||"",inheritColor:st(v.fill)?jN(v.fill,1):"#000"}),gs(h,m),na(h,null,null,m.get(["emphasis","disabled"])),Wt(h).dataModel=r}),lO(u).data=d,u.group.silent=r.get("silent")||t.get("silent")},e.type="markArea",e}(xX);function Q1t(n,e,t){var r,i,a=["x0","y0","x1","y1"];if(n){var o=Ue(n&&n.dimensions,function(c){var u=e.getData(),d=u.getDimensionInfo(u.mapDimension(c))||{};return Pe(Pe({},d),{name:c,ordinalMeta:null})});i=Ue(a,function(c,u){return{name:c,type:o[u%2].type}}),r=new xl(i,t)}else i=[{name:"value",type:"float"}],r=new xl(i,t);var s=Ue(t.get("data"),en(K1t,e,n,t));n&&(s=Cr(s,en(X1t,n)));var l=n?function(c,u,d,h){var f=c.coord[Math.floor(h/2)][h%2];return ty(f,i[h])}:function(c,u,d,h){return ty(c.value,i[h])};return r.initData(s,null,l),r.hasItemOption=!0,r}function J1t(n){n.registerComponentModel(Y1t),n.registerComponentView(Z1t),n.registerPreprocessor(function(e){wX(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var eTt=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},hq=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),$e(r)&&Z(r,function(a,o){st(a)&&(a={type:a}),r[o]=an(a,eTt(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var a=t[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(l){var c=l.name;i.push(c);var u;if(l.legendVisualProvider){var d=l.legendVisualProvider,h=d.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(h)),h.length?r=r.concat(h):u=!0}else u=!0;u&&PY(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,o=_t(),s=Ue(a,function(l){return(st(l)||ur(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new Ir(l,this,this.ecModel))},this);this._data=Cr(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;Z(a,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;Z(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;Z(t,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&_n(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Un),cS=en,fq=Z,cO=zt,ADe=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new cO),this.group.add(this._selectorGroup=new cO),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),s=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&s==="vertical"?"right":"left");var l=t.get("selector",!0),c=t.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=s==="horizontal"?"end":"start"),this.renderInner(o,t,r,i,l,s,c);var u=t.getBoxLayoutParams(),d={width:i.getWidth(),height:i.getHeight()},h=t.get("padding"),f=oo(u,d,h),m=this.layoutInner(t,o,f,a,l,c),v=oo(Rt({width:m.width,height:m.height},u),d,h);this.group.x=v.x-m.x,this.group.y=v.y-m.y,this.group.markRedraw(),this.group.add(this._backgroundEl=pDe(m,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,a,o,s,l){var c=this.getContentGroup(),u=_t(),d=r.get("selectedMode"),h=[];i.eachRawSeries(function(f){!f.get("legendHoverLink")&&h.push(f.id)}),fq(r.getData(),function(f,m){var v=f.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var y=new cO;y.newline=!0,c.add(y);return}var w=i.getSeriesByName(v)[0];if(!u.get(v))if(w){var _=w.getData(),S=_.getVisual("legendLineStyle")||{},A=_.getVisual("legendIcon"),C=_.getVisual("style"),D=this._createItem(w,v,m,f,r,t,S,C,A,d,a);D.on("click",cS(bfe,v,null,a,h)).on("mouseover",cS(pq,w.name,null,a,h)).on("mouseout",cS(gq,w.name,null,a,h)),i.ssr&&D.eachChild(function(M){var P=Wt(M);P.seriesIndex=w.seriesIndex,P.dataIndex=m,P.ssrType="legend"}),u.set(v,!0)}else i.eachRawSeries(function(M){if(!u.get(v)&&M.legendVisualProvider){var P=M.legendVisualProvider;if(!P.containName(v))return;var O=P.indexOfName(v),j=P.getItemVisual(O,"style"),L=P.getItemVisual(O,"legendIcon"),B=Wc(j.fill);B&&B[3]===0&&(B[3]=.2,j=Pe(Pe({},j),{fill:bg(B,"rgba")}));var $=this._createItem(M,v,m,f,r,t,{},j,L,d,a);$.on("click",cS(bfe,null,v,a,h)).on("mouseover",cS(pq,null,v,a,h)).on("mouseout",cS(gq,null,v,a,h)),i.ssr&&$.eachChild(function(Y){var q=Wt(Y);q.seriesIndex=M.seriesIndex,q.dataIndex=m,q.ssrType="legend"}),u.set(v,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},e.prototype._createSelector=function(t,r,i,a,o){var s=this.getSelectorGroup();fq(t,function(c){var u=c.type,d=new sr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});s.add(d);var h=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);ms(d,{normal:h,emphasis:f},{defaultText:c.title}),yw(d)})},e.prototype._createItem=function(t,r,i,a,o,s,l,c,u,d,h){var f=t.visualDrawType,m=o.get("itemWidth"),v=o.get("itemHeight"),y=o.isSelected(r),w=a.get("symbolRotate"),_=a.get("symbolKeepAspect"),S=a.get("icon");u=S||u||"roundRect";var A=tTt(u,a,l,c,f,y,h),C=new cO,D=a.getModel("textStyle");if(kt(t.getLegendIcon)&&(!S||S==="inherit"))C.add(t.getLegendIcon({itemWidth:m,itemHeight:v,icon:u,iconRotate:w,itemStyle:A.itemStyle,lineStyle:A.lineStyle,symbolKeepAspect:_}));else{var M=S==="inherit"&&t.getData().getVisual("symbol")?w==="inherit"?t.getData().getVisual("symbolRotate"):w:0;C.add(nTt({itemWidth:m,itemHeight:v,icon:u,iconRotate:M,itemStyle:A.itemStyle,symbolKeepAspect:_}))}var P=s==="left"?m+5:-5,O=s,j=o.get("formatter"),L=r;st(j)&&j?L=j.replace("{name}",r??""):kt(j)&&(L=j(r));var B=y?D.getTextColor():a.get("inactiveColor");C.add(new sr({style:vi(D,{text:L,x:P,y:v/2,fill:B,align:O,verticalAlign:"middle"},{inheritColor:B})}));var $=new er({shape:C.getBoundingRect(),style:{fill:"transparent"}}),Y=a.getModel("tooltip");return Y.get("show")&&e_({el:$,componentModel:o,itemName:r,itemTooltipOption:Y.option}),C.add($),C.eachChild(function(q){q.silent=!0}),$.silent=!d,this.getContentGroup().add(C),yw(C),C.__legendDataIndex=i,C},e.prototype.layoutInner=function(t,r,i,a,o,s){var l=this.getContentGroup(),c=this.getSelectorGroup();ww(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var u=l.getBoundingRect(),d=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),o){ww("horizontal",c,t.get("selectorItemGap",!0));var h=c.getBoundingRect(),f=[-h.x,-h.y],m=t.get("selectorButtonGap",!0),v=t.getOrient().index,y=v===0?"width":"height",w=v===0?"height":"width",_=v===0?"y":"x";s==="end"?f[v]+=u[y]+m:d[v]+=h[y]+m,f[1-v]+=u[w]/2-h[w]/2,c.x=f[0],c.y=f[1],l.x=d[0],l.y=d[1];var S={x:0,y:0};return S[y]=u[y]+m+h[y],S[w]=Math.max(u[w],h[w]),S[_]=Math.min(0,h[_]+f[1-v]),S}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Yi);function tTt(n,e,t,r,i,a,o){function s(y,w){y.lineWidth==="auto"&&(y.lineWidth=w.lineWidth>0?2:0),fq(y,function(_,S){y[S]==="inherit"&&(y[S]=w[S])})}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");c.decal=!d||d==="inherit"?r.decal:tT(d,o),c.fill==="inherit"&&(c.fill=r[i]),c.stroke==="inherit"&&(c.stroke=r[u]),c.opacity==="inherit"&&(c.opacity=(i==="fill"?r:t).opacity),s(c,r);var h=e.getModel("lineStyle"),f=h.getLineStyle();if(s(f,t),c.fill==="auto"&&(c.fill=r.fill),c.stroke==="auto"&&(c.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!a){var m=e.get("inactiveBorderWidth"),v=c[u];c.lineWidth=m==="auto"?r.lineWidth>0&&v?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),f.stroke=h.get("inactiveColor"),f.lineWidth=h.get("inactiveWidth")}return{itemStyle:c,lineStyle:f}}function nTt(n){var e=n.icon||"roundRect",t=za(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function bfe(n,e,t,r){gq(n,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:n??e}),pq(n,e,t,r)}function CDe(n){for(var e=n.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function pq(n,e,t,r){CDe(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:r})}function gq(n,e,t,r){CDe(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:r})}function rTt(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function mC(n,e,t){var r=n==="allSelect"||n==="inverseSelect",i={},a=[];t.eachComponent({mainType:"legend",query:e},function(s){r?s[n]():s[n](e.name),wfe(s,i),a.push(s.componentIndex)});var o={};return t.eachComponent("legend",function(s){Z(i,function(l,c){s[l?"select":"unSelect"](c)}),wfe(s,o)}),r?{selected:o,legendIndex:a}:{name:e.name,selected:o}}function wfe(n,e){var t=e||{};return Z(n.getData(),function(r){var i=r.get("name");if(!(i===`
`||i==="")){var a=n.isSelected(i);ft(t,i)?t[i]=t[i]&&a:t[i]=a}}),t}function iTt(n){n.registerAction("legendToggleSelect","legendselectchanged",en(mC,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",en(mC,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",en(mC,"inverseSelect")),n.registerAction("legendSelect","legendselected",en(mC,"select")),n.registerAction("legendUnSelect","legendunselected",en(mC,"unSelect"))}function DDe(n){n.registerComponentModel(hq),n.registerComponentView(ADe),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,rTt),n.registerSubTypeDefaulter("legend",function(){return"plain"}),iTt(n)}var aTt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var a=$T(t);n.prototype.init.call(this,t,r,i),_fe(this,t,a)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),_fe(this,this.option,t)},e.type="legend.scroll",e.defaultOption=My(hq.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(hq);function _fe(n,e,t){var r=n.getOrient(),i=[1,1];i[r.index]=0,py(e,t,{type:"box",ignoreSize:!!i})}var xfe=zt,NV=["width","height"],LV=["x","y"],oTt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new xfe),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new xfe)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,a,o,s,l){var c=this;n.prototype.renderInner.call(this,t,r,i,a,o,s,l);var u=this._controllerGroup,d=r.get("pageIconSize",!0),h=$e(d)?d:[d,d];m("pagePrev",0);var f=r.getModel("pageTextStyle");u.add(new sr({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),m("pageNext",1);function m(v,y){var w=v+"DataIndex",_=y2(r.get("pageIcons",!0)[r.getOrient().name][y],{onclick:dt(c._pageGo,c,w,r,a)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});_.name=v,u.add(_)}},e.prototype.layoutInner=function(t,r,i,a,o,s){var l=this.getSelectorGroup(),c=t.getOrient().index,u=NV[c],d=LV[c],h=NV[1-c],f=LV[1-c];o&&ww("horizontal",l,t.get("selectorItemGap",!0));var m=t.get("selectorButtonGap",!0),v=l.getBoundingRect(),y=[-v.x,-v.y],w=Bt(i);o&&(w[u]=i[u]-v[u]-m);var _=this._layoutContentAndController(t,a,w,c,u,h,f,d);if(o){if(s==="end")y[c]+=_[u]+m;else{var S=v[u]+m;y[c]-=S,_[d]-=S}_[u]+=v[u]+m,y[1-c]+=_[f]+_[h]/2-v[h]/2,_[h]=Math.max(_[h],v[h]),_[f]=Math.min(_[f],v[f]+y[1-c]),l.x=y[0],l.y=y[1],l.markRedraw()}return _},e.prototype._layoutContentAndController=function(t,r,i,a,o,s,l,c){var u=this.getContentGroup(),d=this._containerGroup,h=this._controllerGroup;ww(t.get("orient"),u,t.get("itemGap"),a?i.width:null,a?null:i.height),ww("horizontal",h,t.get("pageButtonItemGap",!0));var f=u.getBoundingRect(),m=h.getBoundingRect(),v=this._showController=f[o]>i[o],y=[-f.x,-f.y];r||(y[a]=u[c]);var w=[0,0],_=[-m.x,-m.y],S=Zt(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(v){var A=t.get("pageButtonPosition",!0);A==="end"?_[a]+=i[o]-m[o]:w[a]+=m[o]+S}_[1-a]+=f[s]/2-m[s]/2,u.setPosition(y),d.setPosition(w),h.setPosition(_);var C={x:0,y:0};if(C[o]=v?i[o]:f[o],C[s]=Math.max(f[s],m[s]),C[l]=Math.min(0,m[l]+_[1-a]),d.__rectSize=i[o],v){var D={x:0,y:0};D[o]=Math.max(i[o]-m[o]-S,0),D[s]=C[s],d.setClipPath(new er({shape:D})),d.__rectSize=D[o]}else h.eachChild(function(P){P.attr({invisible:!0,silent:!0})});var M=this._getPageInfo(t);return M.pageIndex!=null&&fr(u,{x:M.contentPosition[0],y:M.contentPosition[1]},v?t:null),this._updatePageInfoView(t,M),C},e.prototype._pageGo=function(t,r,i){var a=this._getPageInfo(r)[t];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;Z(["pagePrev","pageNext"],function(u){var d=u+"DataIndex",h=r[d]!=null,f=i.childOfName(u);f&&(f.setStyle("fill",h?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=h?"pointer":"default")});var a=i.childOfName("pageText"),o=t.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,c=r.pageCount;a&&o&&a.setStyle("text",st(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):o({current:l,total:c}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=t.getOrient().index,s=NV[o],l=LV[o],c=this._findTargetItemIndex(r),u=i.children(),d=u[c],h=u.length,f=h?1:0,m={contentPosition:[i.x,i.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return m;var v=A(d);m.contentPosition[o]=-v.s;for(var y=c+1,w=v,_=v,S=null;y<=h;++y)S=A(u[y]),(!S&&_.e>w.s+a||S&&!C(S,w.s))&&(_.i>w.i?w=_:w=S,w&&(m.pageNextDataIndex==null&&(m.pageNextDataIndex=w.i),++m.pageCount)),_=S;for(var y=c-1,w=v,_=v,S=null;y>=-1;--y)S=A(u[y]),(!S||!C(_,S.s))&&w.i<_.i&&(_=w,m.pagePrevDataIndex==null&&(m.pagePrevDataIndex=w.i),++m.pageCount,++m.pageIndex),w=S;return m;function A(D){if(D){var M=D.getBoundingRect(),P=M[l]+D[l];return{s:P,e:P+M[s],i:D.__legendDataIndex}}}function C(D,M){return D.e>=M&&D.s<=M+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===t&&(r=s)}),r??a},e.type="legend.scroll",e}(ADe);function sTt(n){n.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function lTt(n){Dn(DDe),n.registerComponentModel(aTt),n.registerComponentView(oTt),sTt(n)}function cTt(n){Dn(DDe),Dn(lTt)}var uTt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=My(vI.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(vI),SX=tr();function dTt(n,e,t){SX(n).coordSysRecordMap.each(function(r){var i=r.dataZoomInfoMap.get(e.uid);i&&(i.getRange=t)})}function hTt(n,e){for(var t=SX(n).coordSysRecordMap,r=t.keys(),i=0;i<r.length;i++){var a=r[i],o=t.get(a),s=o.dataZoomInfoMap;if(s){var l=e.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||kDe(t,o))}}}function kDe(n,e){if(e){n.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function fTt(n,e){var t={model:e,containsPoint:en(gTt,e),dispatchAction:en(pTt,n),dataZoomInfoMap:null,controller:null},r=t.controller=new k2(n.getZr());return Z(["pan","zoom","scrollMove"],function(i){r.on(i,function(a){var o=[];t.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],c=l&&l(s.dzReferCoordSysInfo,t.model.mainType,t.controller,a);!s.model.get("disabled",!0)&&c&&o.push({dataZoomId:s.model.id,start:c[0],end:c[1]})}}),o.length&&t.dispatchAction(o)})}),t}function pTt(n,e){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function gTt(n,e,t,r){return n.coordinateSystem.containPoint([t,r])}function mTt(n){var e,t="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return n.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;r[t+s]>r[t+e]&&(e=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function vTt(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(e,t){var r=SX(t),i=r.coordSysRecordMap||(r.coordSysRecordMap=_t());i.each(function(a){a.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=dDe(a);Z(o.infoList,function(s){var l=s.model.uid,c=i.get(l)||i.set(l,fTt(t,s.model)),u=c.dataZoomInfoMap||(c.dataZoomInfoMap=_t());u.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var c=l.keys()[0];c!=null&&(s=l.get(c))}if(!s){kDe(i,a);return}var u=mTt(l);o.enable(u.controlType,u.opt),o.setPointerChecker(a.containsPoint),VT(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var yTt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,r,i){if(n.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),dTt(i,t,{pan:dt(jV.pan,this),zoom:dt(jV.zoom,this),scrollMove:dt(jV.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){hTt(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(pX),jV={zoom:function(n,e,t,r){var i=this.range,a=i.slice(),o=n.axisModels[0];if(o){var s=FV[e](null,[r.originX,r.originY],o,t,n),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],c=Math.max(1/r.scale,0);a[0]=(a[0]-l)*c+l,a[1]=(a[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(o_(0,a,[0,100],0,u.minSpan,u.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:Sfe(function(n,e,t,r,i,a){var o=FV[r]([a.oldX,a.oldY],[a.newX,a.newY],e,i,t);return o.signal*(n[1]-n[0])*o.pixel/o.pixelLength}),scrollMove:Sfe(function(n,e,t,r,i,a){var o=FV[r]([0,0],[a.scrollDelta,a.scrollDelta],e,i,t);return o.signal*(n[1]-n[0])*a.scrollDelta})};function Sfe(n){return function(e,t,r,i){var a=this.range,o=a.slice(),s=e.axisModels[0];if(s){var l=n(o,s,e,t,r,i);if(o_(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var FV={grid:function(n,e,t,r,i){var a=t.axis,o={},s=i.model.coordinateSystem.getRect();return n=n||[0,0],a.dim==="x"?(o.pixel=e[0]-n[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-n[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(n,e,t,r,i){var a=t.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return n=n?s.pointToCoord(n):[0,0],e=s.pointToCoord(e),t.mainType==="radiusAxis"?(o.pixel=e[0]-n[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-n[1],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=a.inverse?-1:1),o},singleAxis:function(n,e,t,r,i){var a=t.axis,o=i.model.coordinateSystem.getRect(),s={};return n=n||[0,0],a.orient==="horizontal"?(s.pixel=e[0]-n[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-n[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function IDe(n){gX(n),n.registerComponentModel(uTt),n.registerComponentView(yTt),vTt(n)}var bTt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=My(vI.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(vI),vC=er,Tfe=7,wTt=1,$V=30,_Tt=7,yC="horizontal",Efe="vertical",xTt=5,STt=["line","bar","candlestick","scatter"],TTt={easing:"cubicOut",duration:100,delay:0},ETt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,r){this.api=r,this._onBrush=dt(this._onBrush,this),this._onBrushEnd=dt(this._onBrushEnd,this)},e.prototype.render=function(t,r,i,a){if(n.prototype.render.apply(this,arguments),VT(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){iI(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new zt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,r=this.api,i=t.get("brushSelect"),a=i?_Tt:0,o=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===yC?{right:s.width-o.x-o.width,top:s.height-$V-Tfe-a,width:o.width,height:$V}:{right:Tfe,top:o.y,width:$V,height:o.height},c=$T(t.option);Z(["right","top","width","height"],function(d){c[d]==="ph"&&(c[d]=l[d])});var u=oo(c,s);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===Efe&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,r=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===yC&&!o?{scaleY:l?1:-1,scaleX:1}:i===yC&&o?{scaleY:l?1:-1,scaleX:-1}:i===Efe&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var c=t.getBoundingRect([s]);t.x=r.x-c.x,t.y=r.y-c.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,a=t.get("brushSelect");i.add(new vC({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new vC({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:dt(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var r=this._size,i=this._shadowSize||[],a=t.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():t.otherDim;if(l==null)return;var c=this._shadowPolygonPts,u=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var d=o.getDataExtent(l),h=(d[1]-d[0])*.3;d=[d[0]-h,d[1]+h];var f=[0,r[1]],m=[0,r[0]],v=[[r[0],0],[0,0]],y=[],w=m[1]/(o.count()-1),_=0,S=Math.round(o.count()/r[0]),A;o.each([l],function(O,j){if(S>0&&j%S){_+=w;return}var L=O==null||isNaN(O)||O==="",B=L?0:kr(O,d,f,!0);L&&!A&&j?(v.push([v[v.length-1][0],0]),y.push([y[y.length-1][0],0])):!L&&A&&(v.push([_,0]),y.push([_,0])),v.push([_,B]),y.push([_,B]),_+=w,A=L}),c=this._shadowPolygonPts=v,u=this._shadowPolylinePts=y}this._shadowData=o,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var C=this.dataZoomModel;function D(O){var j=C.getModel(O?"selectedDataBackground":"dataBackground"),L=new zt,B=new Cl({shape:{points:c},segmentIgnoreThreshold:1,style:j.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),$=new Dl({shape:{points:u},segmentIgnoreThreshold:1,style:j.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return L.add(B),L.add($),L}for(var M=0;M<3;M++){var P=D(M===1);this._displayables.sliderGroup.add(P),this._displayables.dataShadowSegs.push(P)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,r=t.get("showDataShadow");if(r!==!1){var i,a=this.ecModel;return t.eachTargetAxis(function(o,s){var l=t.getAxisProxy(o,s).getTargetSeriesModels();Z(l,function(c){if(!i&&!(r!==!0&&_n(STt,c.get("type"))<0)){var u=a.getComponent(qv(o),s).axis,d=ATt(o),h,f=c.coordinateSystem;d!=null&&f.getOtherAxis&&(h=f.getOtherAxis(u).inverse),d=c.getData().mapDimension(d),i={thisAxis:u,series:c,thisDim:o,otherDim:d,otherAxisInverse:h}}},this)},this),i}},e.prototype._renderHandle=function(){var t=this.group,r=this._displayables,i=r.handles=[null,null],a=r.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,c=this.api,u=l.get("borderRadius")||0,d=l.get("brushSelect"),h=r.filler=new vC({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(h),o.add(new vC({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:wTt,fill:"rgba(0,0,0,0)"}})),Z([0,1],function(S){var A=l.get("handleIcon");!QN[A]&&A.indexOf("path://")<0&&A.indexOf("image://")<0&&(A="path://"+A);var C=za(A,-1,0,2,2,null,!0);C.attr({cursor:Afe(this._orient),draggable:!0,drift:dt(this._onDragMove,this,S),ondragend:dt(this._onDragEnd,this),onmouseover:dt(this._showDataInfo,this,!0),onmouseout:dt(this._showDataInfo,this,!1),z2:5});var D=C.getBoundingRect(),M=l.get("handleSize");this._handleHeight=Je(M,this._size[1]),this._handleWidth=D.width/D.height*this._handleHeight,C.setStyle(l.getModel("handleStyle").getItemStyle()),C.style.strokeNoScale=!0,C.rectHover=!0,C.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),yw(C);var P=l.get("handleColor");P!=null&&(C.style.fill=P),o.add(i[S]=C);var O=l.getModel("textStyle"),j=l.get("handleLabel")||{},L=j.show||!1;t.add(a[S]=new sr({silent:!0,invisible:!L,style:vi(O,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:O.getTextColor(),font:O.getFont()}),z2:10}))},this);var f=h;if(d){var m=Je(l.get("moveHandleSize"),s[1]),v=r.moveHandle=new er({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:m}}),y=m*.8,w=r.moveHandleIcon=za(l.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);w.silent=!0,w.y=s[1]+m/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _=Math.min(s[1]/2,Math.max(m,10));f=r.moveZone=new er({invisible:!0,shape:{y:s[1]-_,height:m+_}}),f.on("mouseover",function(){c.enterEmphasis(v)}).on("mouseout",function(){c.leaveEmphasis(v)}),o.add(v),o.add(w),o.add(f)}f.attr({draggable:!0,cursor:Afe(this._orient),drift:dt(this._onDragMove,this,"all"),ondragstart:dt(this._showDataInfo,this,!0),ondragend:dt(this._onDragEnd,this),onmouseover:dt(this._showDataInfo,this,!0),onmouseout:dt(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[kr(t[0],[0,100],r,!0),kr(t[1],[0,100],r,!0)]},e.prototype._updateInterval=function(t,r){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];o_(r,a,o,i.get("zoomLock")?"all":t,s.minSpan!=null?kr(s.minSpan,l,o,!0):null,s.maxSpan!=null?kr(s.maxSpan,l,o,!0):null);var c=this._range,u=this._range=Hu([kr(a[0],o,l,!0),kr(a[1],o,l,!0)]);return!c||c[0]!==u[0]||c[1]!==u[1]},e.prototype._updateView=function(t){var r=this._displayables,i=this._handleEnds,a=Hu(i.slice()),o=this._size;Z([0,1],function(f){var m=r.handles[f],v=this._handleHeight;m.attr({scaleX:v/2,scaleY:v/2,x:i[f]+(f?-1:1),y:o[1]/2-v/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(s),r.moveZone.setShape(s),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=r.dataShadowSegs,c=[0,a[0],a[1],o[0]],u=0;u<l.length;u++){var d=l[u],h=d.getClipPath();h||(h=new er,d.setClipPath(h)),h.setShape({x:c[u],y:0,width:c[u+1]-c[u],height:o[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var r=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var c=l.getAxisModel().axis,u=this._range,d=t?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],c),this._formatLabel(d[1],c)]}}var h=Hu(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(m){var v=bw(i.handles[m].parent,this.group),y=k5(m===0?"right":"left",v),w=this._handleWidth/2+xTt,_=ah([h[m]+(m===0?-w:w),this._size[1]/2],v);a[m].setStyle({x:_[0],y:_[1],verticalAlign:o===yC?"middle":y,align:o===yC?y:"center",text:s[m]})}},e.prototype._formatLabel=function(t,r){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var s=t==null||isNaN(t)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return kt(a)?a(t,s):st(a)?a.replace("{value}",s):s},e.prototype._showDataInfo=function(t){var r=this.dataZoomModel.get("handleLabel")||{},i=r.show||!1,a=this.dataZoomModel.getModel(["emphasis","handleLabel"]),o=a.get("show")||!1,s=t||this._dragging?o:i,l=this._displayables,c=l.handleLabels;c[0].attr("invisible",!s),c[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},e.prototype._onDragMove=function(t,r,i,a){this._dragging=!0,Mg(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=ah([r,i],o,!0),l=this._updateInterval(t,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(i[0]<0||i[0]>r[0]||i[1]<0||i[1]>r[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var r=t.offsetX,i=t.offsetY;this._brushStart=new ln(r,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var i=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Hu([kr(i.x,o,s,!0),kr(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Mg(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,r){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new vC({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,c=l.transformCoordToLocal(t,r),u=l.transformCoordToLocal(s.x,s.y),d=this._size;c[0]=Math.max(Math.min(d[0],c[0]),0),o.setShape({x:u[0],y:0,width:c[0]-u[0],height:d[1]})},e.prototype._dispatchZoomAction=function(t){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?TTt:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var t,r=dDe(this.dataZoomModel).infoList;if(!t&&r.length){var i=r[0].model.coordinateSystem;t=i.getRect&&i.getRect()}if(!t){var a=this.api.getWidth(),o=this.api.getHeight();t={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return t},e.type="dataZoom.slider",e}(pX);function ATt(n){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[n]}function Afe(n){return n==="vertical"?"ns-resize":"ew-resize"}function MDe(n){n.registerComponentModel(bTt),n.registerComponentView(ETt),gX(n)}function CTt(n){Dn(IDe),Dn(MDe)}var PDe={get:function(n,e,t){var r=Bt((DTt[n]||{})[e]);return t&&$e(r)?r[r.length-1]:r}},DTt={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Cfe=xo.mapVisual,kTt=xo.eachVisual,ITt=$e,Dfe=Z,MTt=Hu,PTt=kr,xL=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&_De(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var r=this.stateList;t=dt(t,this),this.controllerVisuals=cq(this.option.controller,r,t),this.targetVisuals=cq(this.option.target,r,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,r=[];return t==null||t==="all"?this.ecModel.eachSeries(function(i,a){r.push(a)}):r=Wr(t),r},e.prototype.eachTargetSeries=function(t,r){Z(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&t.call(r,a)},this)},e.prototype.isTargetSeries=function(t){var r=!1;return this.eachTargetSeries(function(i){i===t&&(r=!0)}),r},e.prototype.formatValueText=function(t,r,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,c;i=i||["<",">"],$e(t)&&(t=t.slice(),c=!0);var u=r?t:c?[d(t[0]),d(t[1])]:d(t);if(st(l))return l.replace("{value}",c?u[0]:u).replace("{value2}",c?u[1]:u);if(kt(l))return c?l(t[0],t[1]):l(t);if(c)return t[0]===s[0]?i[0]+" "+u[1]:t[1]===s[1]?i[1]+" "+u[0]:u[0]+" - "+u[1];return u;function d(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,r=MTt([t.min,t.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(t){var r=this.option.dimension;if(r!=null)return t.getDimensionIndex(r);for(var i=t.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=t.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),o=r.controller||(r.controller={});an(a,i),an(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),c.call(this,a,"inRange","outOfRange"),u.call(this,o);function l(d){ITt(r.color)&&!d.inRange&&(d.inRange={color:r.color.slice().reverse()}),d.inRange=d.inRange||{color:t.get("gradientColor")}}function c(d,h,f){var m=d[h],v=d[f];m&&!v&&(v=d[f]={},Dfe(m,function(y,w){if(xo.isValidType(w)){var _=PDe.get(w,"inactive",s);_!=null&&(v[w]=_,w==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function u(d){var h=(d.inRange||{}).symbol||(d.outOfRange||{}).symbol,f=(d.inRange||{}).symbolSize||(d.outOfRange||{}).symbolSize,m=this.get("inactiveColor"),v=this.getItemSymbol(),y=v||"roundRect";Dfe(this.stateList,function(w){var _=this.itemSize,S=d[w];S||(S=d[w]={color:s?m:[m]}),S.symbol==null&&(S.symbol=h&&Bt(h)||(s?y:[y])),S.symbolSize==null&&(S.symbolSize=f&&Bt(f)||(s?_[0]:[_[0],_[0]])),S.symbol=Cfe(S.symbol,function(D){return D==="none"?y:D});var A=S.symbolSize;if(A!=null){var C=-1/0;kTt(A,function(D){D>C&&(C=D)}),S.symbolSize=Cfe(A,function(D){return PTt(D,[0,C],[0,_[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(Un),kfe=[20,140],OTt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=kfe[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=kfe[1])},e.prototype._resetRange=function(){var t=this.getExtent(),r=this.option.range;!r||r.auto?(t.auto=1,this.option.range=t):$e(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],t[0]),r[1]=Math.min(r[1],t[1]))},e.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),Z(this.stateList,function(t){var r=this.option.controller[t].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),r=Hu((this.get("range")||[]).slice());return r[0]>t[1]&&(r[0]=t[1]),r[1]>t[1]&&(r[1]=t[1]),r[0]<t[0]&&(r[0]=t[0]),r[1]<t[0]&&(r[1]=t[0]),r},e.prototype.getValueState=function(t){var r=this.option.range,i=this.getExtent();return(r[0]<=i[0]||r[0]<=t)&&(r[1]>=i[1]||t<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){t[0]<=s&&s<=t[1]&&a.push(l)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},e.prototype.getVisualMeta=function(t){var r=Ife(this,"outOfRange",this.getExtent()),i=Ife(this,"inRange",this.option.range.slice()),a=[];function o(f,m){a.push({value:f,color:t(f,m)})}for(var s=0,l=0,c=i.length,u=r.length;l<u&&(!i.length||r[l]<=i[0]);l++)r[l]<i[s]&&o(r[l],"outOfRange");for(var d=1;s<c;s++,d=0)d&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var d=1;l<u;l++)(!i.length||i[i.length-1]<r[l])&&(d&&(a.length&&o(a[a.length-1].value,"outOfRange"),d=0),o(r[l],"outOfRange"));var h=a.length;return{stops:a,outerColors:[h?a[0].color:"transparent",h?a[h-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=My(xL.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(xL);function Ife(n,e,t){if(t[0]===t[1])return t.slice();for(var r=200,i=(t[1]-t[0])/r,a=t[0],o=[],s=0;s<=r&&a<t[1];s++)o.push(a),a+=i;return o.push(t[1]),o}var ODe=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r},e.prototype.render=function(t,r,i,a){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,r,i,a)},e.prototype.renderBackground=function(t){var r=this.visualMapModel,i=FT(r.get("padding")||0),a=t.getBoundingRect();t.add(new er({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,r,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(r==="color"){var l=o.get("contentColor");s.color=l}function c(f){return s[f]}function u(f,m){s[f]=m}var d=o.controllerVisuals[a||o.getValueState(t)],h=xo.prepareVisualTypes(d);return Z(h,function(f){var m=d[f];i.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",m=d.__alphaForOpacity),xo.dependsOn(f,r)&&m&&m.applyVisual(t,c,u)}),s[r]},e.prototype.positionGroup=function(t){var r=this.visualMapModel,i=this.api;L5(t,r.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},e.prototype.doRender=function(t,r,i,a){},e.type="visualMap",e}(Yi),Mfe=[["left","right","width"],["top","bottom","height"]];function RDe(n,e,t){var r=n.option,i=r.align;if(i!=null&&i!=="auto")return i;for(var a={width:e.getWidth(),height:e.getHeight()},o=r.orient==="horizontal"?1:0,s=Mfe[o],l=[0,null,10],c={},u=0;u<3;u++)c[Mfe[1-o][u]]=l[u],c[s[u]]=u===2?t[0]:r[s[u]];var d=[["x","width",3],["y","height",0]][o],h=oo(c,a,r.padding);return s[(h.margin[d[2]]||0)+h[d[0]]+h[d[1]]*.5<a[d[1]]*.5?0:1]}function oR(n,e){return Z(n||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),n}var af=kr,RTt=Z,Pfe=Math.min,BV=Math.max,NTt=12,LTt=6,jTt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,r){n.prototype.init.call(this,t,r),this._hoverLinkFromSeriesMouseOver=dt(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=dt(this._hideIndicator,this)},e.prototype.doRender=function(t,r,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,r=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(r);var i=t.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(t,r,i){if(r){var a=r[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,c=this._shapes.mainGroup,u=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],c),d=this._applyTransform(i===0?"bottom":"top",c),h=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new sr({style:vi(f,{x:u[0],y:u[1],verticalAlign:h==="horizontal"?"middle":d,align:h==="horizontal"?d:"center",text:a})}))}},e.prototype._renderBar=function(t){var r=this.visualMapModel,i=this._shapes,a=r.itemSize,o=this._orient,s=this._useHandle,l=RDe(r,this.api,a),c=i.mainGroup=this._createBarGroup(l),u=new zt;c.add(u),u.add(i.outOfRange=Ofe()),u.add(i.inRange=Ofe(null,s?Nfe(this._orient):null,dt(this._dragHandle,this,"all",!1),dt(this._dragHandle,this,"all",!0))),u.setClipPath(new er({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var d=r.textStyleModel.getTextRect("国"),h=BV(d.width,d.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,c,0,a,h,o),this._createHandle(r,c,1,a,h,o)),this._createIndicator(r,c,a,h,o),t.add(c)},e.prototype._createHandle=function(t,r,i,a,o,s){var l=dt(this._dragHandle,this,i,!1),c=dt(this._dragHandle,this,i,!0),u=ch(t.get("handleSize"),a[0]),d=za(t.get("handleIcon"),-u/2,-u/2,u,u,null,!0),h=Nfe(this._orient);d.attr({cursor:h,draggable:!0,drift:l,ondragend:c,onmousemove:function(w){Mg(w.event)}}),d.x=a[0]/2,d.useStyle(t.getModel("handleStyle").getItemStyle()),d.setStyle({strokeNoScale:!0,strokeFirst:!0}),d.style.lineWidth*=2,d.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),ew(d,!0),r.add(d);var f=this.visualMapModel.textStyleModel,m=new sr({cursor:h,draggable:!0,drift:l,onmousemove:function(w){Mg(w.event)},ondragend:c,style:vi(f,{x:0,y:0,text:""})});m.ensureState("blur").style={opacity:.1},m.stateTransition={duration:200},this.group.add(m);var v=[u,0],y=this._shapes;y.handleThumbs[i]=d,y.handleLabelPoints[i]=v,y.handleLabels[i]=m},e.prototype._createIndicator=function(t,r,i,a,o){var s=ch(t.get("indicatorSize"),i[0]),l=za(t.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var c=t.getModel("indicatorStyle").getItemStyle();if(l instanceof Yo){var u=l.style;l.useStyle(Pe({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},c))}else l.useStyle(c);r.add(l);var d=this.visualMapModel.textStyleModel,h=new sr({silent:!0,invisible:!0,style:vi(d,{x:0,y:0,text:""})});this.group.add(h);var f=[(o==="horizontal"?a/2:LTt)+i[0]/2,0],m=this._shapes;m.indicator=l,m.indicatorLabel=h,m.indicatorLabelPoint=f,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,r,i,a){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():Rfe(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,r=this._dataInterval=t.getSelected(),i=t.getExtent(),a=[0,t.itemSize[1]];this._handleEnds=[af(r[0],i,a,!0),af(r[1],i,a,!0)]},e.prototype._updateInterval=function(t,r){r=r||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];o_(r,a,o,t,0);var s=i.getExtent();this._dataInterval=[af(a[0],o,s,!0),af(a[1],o,s,!0)]},e.prototype._updateView=function(t){var r=this.visualMapModel,i=r.getExtent(),a=this._shapes,o=[0,r.itemSize[1]],s=t?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),c=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},e.prototype._createBarVisual=function(t,r,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(t,o),l=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],c=this._createBarPoints(i,l);return{barColor:new m2(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},e.prototype._makeColorGradient=function(t,r){var i=100,a=[],o=(t[1]-t[0])/i;a.push({color:this.getControllerVisual(t[0],"color",r),offset:0});for(var s=1;s<i;s++){var l=t[0]+o*s;if(l>t[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:s/i})}return a.push({color:this.getControllerVisual(t[1],"color",r),offset:1}),a},e.prototype._createBarPoints=function(t,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-r[1],t[1]]]},e.prototype._createBarGroup=function(t){var r=this._orient,i=this.visualMapModel.get("inverse");return new zt(r==="horizontal"&&!i?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&i?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!i?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,r){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,c=a.getExtent(),u=this._applyTransform("left",i.mainGroup);RTt([0,1],function(d){var h=o[d];h.setStyle("fill",r.handlesColor[d]),h.y=t[d];var f=af(t[d],[0,l[1]],c,!0),m=this.getControllerVisual(f,"symbolSize");h.scaleX=h.scaleY=m/l[0],h.x=l[0]-m/2;var v=ah(i.handleLabelPoints[d],bw(h,this.group));if(this._orient==="horizontal"){var y=u==="left"||u==="top"?(l[0]-m)/2:(l[0]-m)/-2;v[1]+=y}s[d].setStyle({x:v[0],y:v[1],text:a.formatValueText(this._dataInterval[d]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,r,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,c=[0,l[1]],u=this._shapes,d=u.indicator;if(d){d.attr("invisible",!1);var h={convertOpacityToAlpha:!0},f=this.getControllerVisual(t,"color",h),m=this.getControllerVisual(t,"symbolSize"),v=af(t,s,c,!0),y=l[0]-m/2,w={x:d.x,y:d.y};d.y=v,d.x=y;var _=ah(u.indicatorLabelPoint,bw(d,this.group)),S=u.indicatorLabel;S.attr("invisible",!1);var A=this._applyTransform("left",u.mainGroup),C=this._orient,D=C==="horizontal";S.setStyle({text:(i||"")+o.formatValueText(r),verticalAlign:D?A:"middle",align:D?"center":A});var M={x:y,y:v,style:{fill:f}},P={style:{x:_[0],y:_[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var O={duration:100,easing:"cubicInOut",additive:!0};d.x=w.x,d.y=w.y,d.animateTo(M,O),S.animateTo(P,O)}else d.attr(M),S.attr(P);this._firstShowIndicator=!1;var j=this._shapes.handleLabels;if(j)for(var L=0;L<j.length;L++)this.api.enterBlur(j[L])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(r){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,a=t._applyTransform([r.offsetX,r.offsetY],t._shapes.mainGroup,!0,!0);a[1]=Pfe(BV(0,a[1]),i[1]),t._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,r){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();t=Pfe(BV(o[0],t),o[1]);var l=FTt(i,s,o),c=[t-l,t+l],u=af(t,o,s,!0),d=[af(c[0],o,s,!0),af(c[1],o,s,!0)];c[0]<o[0]&&(d[0]=-1/0),c[1]>o[1]&&(d[1]=1/0),r&&(d[0]===-1/0?this._showIndicator(u,d[1],"< ",l):d[1]===1/0?this._showIndicator(u,d[0],"> ",l):this._showIndicator(u,u,"≈ ",l));var h=this._hoverLinkDataIndices,f=[];(r||Rfe(i))&&(f=this._hoverLinkDataIndices=i.findTargetDataIndices(d));var m=qst(h,f);this._dispatchHighDown("downplay",oR(m[0],i)),this._dispatchHighDown("highlight",oR(m[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var r;if(nw(t.target,function(l){var c=Wt(l);if(c.dataIndex!=null)return r=c,!0},!0),!!r){var i=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(r.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),r.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",oR(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,r,i,a){var o=bw(r,a?null:this.group);return $e(t)?ah(t,o,i):k5(t,o,i)},e.prototype._dispatchHighDown=function(t,r){r&&r.length&&this.api.dispatchAction({type:t,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(ODe);function Ofe(n,e,t,r){return new Cl({shape:{points:n},draggable:!!t,cursor:e,drift:t,onmousemove:function(i){Mg(i.event)},ondragend:r})}function FTt(n,e,t){var r=NTt/2,i=n.get("hoverLinkDataSize");return i&&(r=af(i,e,t,!0)/2),r}function Rfe(n){var e=n.get("hoverLinkOnHandle");return!!(e??n.get("realtime"))}function Nfe(n){return n==="vertical"?"ns-resize":"ew-resize"}var $Tt={type:"selectDataRange",event:"dataRangeSelected",update:"update"},BTt=function(n,e){e.eachComponent({mainType:"visualMap",query:n},function(t){t.setSelected(n.selected)})},UTt=[{createOnAllSeries:!0,reset:function(n,e){var t=[];return e.eachComponent("visualMap",function(r){var i=n.pipelineContext;!r.isTargetSeries(n)||i&&i.large||t.push(c1t(r.stateList,r.targetVisuals,dt(r.getValueState,r),r.getDataDimensionIndex(n.getData())))}),t}},{createOnAllSeries:!0,reset:function(n,e){var t=n.getData(),r=[];e.eachComponent("visualMap",function(i){if(i.isTargetSeries(n)){var a=i.getVisualMeta(dt(VTt,null,n,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(t);o>=0&&(a.dimension=o,r.push(a))}}),n.getData().setVisual("visualMeta",r)}}];function VTt(n,e,t,r){for(var i=e.targetVisuals[r],a=xo.prepareVisualTypes(i),o={color:w2(n.getData(),"color")},s=0,l=a.length;s<l;s++){var c=a[s],u=i[c==="opacity"?"__alphaForOpacity":c];u&&u.applyVisual(t,d,h)}return o.color;function d(f){return o[f]}function h(f,m){o[f]=m}}var Lfe=Z;function zTt(n){var e=n&&n.visualMap;$e(e)||(e=e?[e]:[]),Lfe(e,function(t){if(t){uS(t,"splitList")&&!uS(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var r=t.pieces;r&&$e(r)&&Lfe(r,function(i){jt(i)&&(uS(i,"start")&&!uS(i,"min")&&(i.min=i.start),uS(i,"end")&&!uS(i,"max")&&(i.max=i.end))})}})}function uS(n,e){return n&&n.hasOwnProperty&&n.hasOwnProperty(e)}var jfe=!1;function NDe(n){jfe||(jfe=!0,n.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),n.registerAction($Tt,BTt),Z(UTt,function(e){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,e)}),n.registerPreprocessor(zTt))}function LDe(n){n.registerComponentModel(OTt),n.registerComponentView(jTt),NDe(n)}var HTt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],qTt[this._mode].call(this,this._pieceList),this._resetSelected(t,r);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=Bt(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=Ue(this._pieceList,function(l){return l=Bt(l),s!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var t=this.option,r={},i=xo.listVisualTypes(),a=this.isCategory();Z(t.pieces,function(s){Z(i,function(l){s.hasOwnProperty(l)&&(r[l]=1)})}),Z(r,function(s,l){var c=!1;Z(this.stateList,function(u){c=c||o(t,u,l)||o(t.target,u,l)},this),!c&&Z(this.stateList,function(u){(t[u]||(t[u]={}))[l]=PDe.get(l,u==="inRange"?"active":"inactive",a)})},this);function o(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}n.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,r){var i=this.option,a=this._pieceList,o=(r?i:t).selected||{};if(i.selected=o,Z(a,function(l,c){var u=this.getSelectedMapKey(l);o.hasOwnProperty(u)||(o[u]=!0)},this),i.selectedMode==="single"){var s=!1;Z(a,function(l,c){var u=this.getSelectedMapKey(l);o[u]&&(s?o[u]=!1:s=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Bt(t)},e.prototype.getValueState=function(t){var r=xo.findPieceIndex(t,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var u=xo.findPieceIndex(l,i);u===t&&o.push(c)},this),r.push({seriesId:a.id,dataIndex:o})},this),r},e.prototype.getRepresentValue=function(t){var r;if(this.isCategory())r=t.value;else if(t.value!=null)r=t.value;else{var i=t.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var r=[],i=["",""],a=this;function o(u,d){var h=a.getRepresentValue({interval:u});d||(d=a.getValueState(h));var f=t(h,d);u[0]===-1/0?i[0]=f:u[1]===1/0?i[1]=f:r.push({value:u[0],color:f},{value:u[1],color:f})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return Z(s,function(u){var d=u.interval;d&&(d[0]>c&&o([c,d[0]],"outOfRange"),o(d.slice()),c=d[1])},this),{stops:r,outerColors:i}},e.type="visualMap.piecewise",e.defaultOption=My(xL.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(xL),qTt={splitNumber:function(n){var e=this.option,t=Math.min(e.precision,20),r=this.getExtent(),i=e.splitNumber;i=Math.max(parseInt(i,10),1),e.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(t)!==a&&t<5;)t++;e.precision=t,a=+a.toFixed(t),e.minOpen&&n.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,s=r[0];o<i;s+=a,o++){var l=o===i-1?r[1]:s+a;n.push({interval:[s,l],close:[1,1]})}e.maxOpen&&n.push({interval:[r[1],1/0],close:[0,0]}),Mse(n),Z(n,function(c,u){c.index=u,c.text=this.formatValueText(c.interval)},this)},categories:function(n){var e=this.option;Z(e.categories,function(t){n.push({text:this.formatValueText(t,!0),value:t})},this),Ffe(e,n)},pieces:function(n){var e=this.option;Z(e.pieces,function(t,r){jt(t)||(t={value:t});var i={text:"",index:r};if(t.label!=null&&(i.text=t.label),t.hasOwnProperty("value")){var a=i.value=t.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],c=[-1/0,1/0],u=[],d=0;d<2;d++){for(var h=[["gte","gt","min"],["lte","lt","max"]][d],f=0;f<3&&o[d]==null;f++)o[d]=t[h[f]],s[d]=l[f],u[d]=f===2;o[d]==null&&(o[d]=c[d])}u[0]&&o[1]===1/0&&(s[0]=0),u[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=xo.retrieveVisuals(t),n.push(i)},this),Ffe(e,n),Mse(n),Z(n,function(t){var r=t.close,i=[["<","≤"][r[1]],[">","≥"][r[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,i)},this)}};function Ffe(n,e){var t=n.inverse;(n.orient==="vertical"?!t:t)&&e.reverse()}var GTt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var r=this.visualMapModel,i=r.get("textGap"),a=r.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),c=r.itemSize,u=this._getViewData(),d=u.endsText,h=Ho(r.get("showLabel",!0),!d),f=!r.get("selectedMode");d&&this._renderEndsText(t,d[0],c,h,l),Z(u.viewPieceList,function(m){var v=m.piece,y=new zt;y.onclick=dt(this._onItemClick,this,v),this._enableHoverLink(y,m.indexInModelPieceList);var w=r.getRepresentValue(v);if(this._createItemSymbol(y,w,[0,0,c[0],c[1]],f),h){var _=this.visualMapModel.getValueState(w);y.add(new sr({style:{x:l==="right"?-i:c[0]+i,y:c[1]/2,text:v.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:_==="outOfRange"?.5:1},silent:f}))}t.add(y)},this),d&&this._renderEndsText(t,d[1],c,h,l),ww(r.get("orient"),t,r.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,r){var i=this;t.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:oR(s.findTargetDataIndices(r),s)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,r=t.option;if(r.orient==="vertical")return RDe(t,this.api,t.itemSize);var i=r.align;return(!i||i==="auto")&&(i="left"),i},e.prototype._renderEndsText=function(t,r,i,a,o){if(r){var s=new zt,l=this.visualMapModel.textStyleModel;s.add(new sr({style:vi(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:r})})),t.add(s)}},e.prototype._getViewData=function(){var t=this.visualMapModel,r=Ue(t.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=t.get("text"),a=t.get("orient"),o=t.get("inverse");return(a==="horizontal"?o:!o)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},e.prototype._createItemSymbol=function(t,r,i,a){var o=za(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color"));o.silent=a,t.add(o)},e.prototype._onItemClick=function(t){var r=this.visualMapModel,i=r.option,a=i.selectedMode;if(a){var o=Bt(i.selected),s=r.getSelectedMapKey(t);a==="single"||a===!0?(o[s]=!0,Z(o,function(l,c){o[c]=c===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},e.type="visualMap.piecewise",e}(ODe);function jDe(n){n.registerComponentModel(HTt),n.registerComponentView(GTt),NDe(n)}function WTt(n){Dn(LDe),Dn(jDe)}var YTt={label:{enabled:!0},decal:{show:!1}},$fe=tr(),KTt={};function XTt(n,e){var t=n.getModel("aria");if(!t.get("enabled"))return;var r=Bt(YTt);an(r.label,n.getLocaleModel().get("aria"),!1),an(t.option,r,!1),i(),a();function i(){var c=t.getModel("decal"),u=c.get("show");if(u){var d=_t();n.eachSeries(function(h){if(!h.isColorBySeries()){var f=d.get(h.type);f||(f={},d.set(h.type,f)),$fe(h).scope=f}}),n.eachRawSeries(function(h){if(n.isSeriesFiltered(h))return;if(kt(h.enableAriaDecal)){h.enableAriaDecal();return}var f=h.getData();if(h.isColorBySeries()){var _=g8(h.ecModel,h.name,KTt,n.getSeriesCount()),S=f.getVisual("decal");f.setVisual("decal",A(S,_))}else{var m=h.getRawData(),v={},y=$fe(h).scope;f.each(function(C){var D=f.getRawIndex(C);v[D]=C});var w=m.count();m.each(function(C){var D=v[C],M=m.getName(C)||C+"",P=g8(h.ecModel,M,y,w),O=f.getItemVisual(D,"decal");f.setItemVisual(D,"decal",A(O,P))})}function A(C,D){var M=C?Pe(Pe({},D),C):D;return M.dirty=!0,M}})}}function a(){var c=e.getZr().dom;if(c){var u=n.getLocaleModel().get("aria"),d=t.getModel("label");if(d.option=Rt(d.option,u),!!d.get("enabled")){if(c.setAttribute("role","img"),d.get("description")){c.setAttribute("aria-label",d.get("description"));return}var h=n.getSeriesCount(),f=d.get(["data","maxCount"])||10,m=d.get(["series","maxCount"])||10,v=Math.min(h,m),y;if(!(h<1)){var w=s();if(w){var _=d.get(["general","withTitle"]);y=o(_,{title:w})}else y=d.get(["general","withoutTitle"]);var S=[],A=h>1?d.get(["series","multiple","prefix"]):d.get(["series","single","prefix"]);y+=o(A,{seriesCount:h}),n.eachSeries(function(P,O){if(O<v){var j=void 0,L=P.get("name"),B=L?"withName":"withoutName";j=h>1?d.get(["series","multiple",B]):d.get(["series","single",B]),j=o(j,{seriesId:P.seriesIndex,seriesName:P.get("name"),seriesType:l(P.subType)});var $=P.getData();if($.count()>f){var Y=d.get(["data","partialData"]);j+=o(Y,{displayCnt:f})}else j+=d.get(["data","allData"]);for(var q=d.get(["data","separator","middle"]),W=d.get(["data","separator","end"]),X=d.get(["data","excludeDimensionId"]),te=[],re=0;re<$.count();re++)if(re<f){var z=$.getName(re),oe=X?Cr($.getValues(re),function(ee,be){return _n(X,be)===-1}):$.getValues(re),le=d.get(["data",z?"withName":"withoutName"]);te.push(o(le,{name:z,value:oe.join(q)}))}j+=te.join(q)+W,S.push(j)}});var C=d.getModel(["series","multiple","separator"]),D=C.get("middle"),M=C.get("end");y+=S.join(D)+M,c.setAttribute("aria-label",y)}}}}function o(c,u){if(!st(c))return c;var d=c;return Z(u,function(h,f){d=d.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),h)}),d}function s(){var c=n.get("title");return c&&c.length&&(c=c[0]),c&&c.text}function l(c){var u=n.getLocaleModel().get(["series","typeNames"]);return u[c]||u.chart}}function ZTt(n){if(!(!n||!n.aria)){var e=n.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},Z(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function QTt(n){n.registerPreprocessor(ZTt),n.registerVisual(n.PRIORITY.VISUAL.ARIA,XTt)}var Bfe={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},JTt=function(){function n(e){var t=this._condVal=st(e)?new RegExp(e):dot(e)?e:null;if(t==null){var r="";Er(r)}}return n.prototype.evaluate=function(e){var t=typeof e;return st(t)?this._condVal.test(e):ur(t)?this._condVal.test(e+""):!1},n}(),eEt=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),tEt=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},n}(),nEt=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},n}(),rEt=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),iEt=function(){function n(){}return n.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,r=t(this.valueGetterParam),i=e?this.valueParser(r):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?i:r))return!1;return!0},n}();function TX(n,e){if(n===!0||n===!1){var t=new eEt;return t.value=n,t}var r="";return FDe(n)||Er(r),n.and?Ufe("and",n,e):n.or?Ufe("or",n,e):n.not?aEt(n,e):oEt(n,e)}function Ufe(n,e,t){var r=e[n],i="";$e(r)||Er(i),r.length||Er(i);var a=n==="and"?new tEt:new nEt;return a.children=Ue(r,function(o){return TX(o,t)}),a.children.length||Er(i),a}function aEt(n,e){var t=n.not,r="";FDe(t)||Er(r);var i=new rEt;return i.child=TX(t,e),i.child||Er(r),i}function oEt(n,e){for(var t="",r=e.prepareGetValue(n),i=[],a=Vn(n),o=n.parser,s=o?yTe(o):null,l=0;l<a.length;l++){var c=a[l];if(!(c==="parser"||e.valueGetterAttrMap.get(c))){var u=ft(Bfe,c)?Bfe[c]:c,d=n[c],h=s?s(d):d,f=Yut(u,h)||u==="reg"&&new JTt(h);f||Er(t),i.push(f)}}i.length||Er(t);var m=new iEt;return m.valueGetterParam=r,m.valueParser=s,m.getValue=e.getValue,m.subCondList=i,m}function FDe(n){return jt(n)&&!Gs(n)}var sEt=function(){function n(e,t){this._cond=TX(e,t)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}();function lEt(n,e){return new sEt(n,e)}var cEt={type:"echarts:filter",transform:function(n){for(var e=n.upstream,t,r=lEt(n.config,{valueGetterAttrMap:_t({dimension:!0}),prepareGetValue:function(s){var l="",c=s.dimension;ft(s,"dimension")||Er(l);var u=e.getDimensionInfo(c);return u||Er(l),{dimIdx:u.index}},getValue:function(s){return e.retrieveValueFromItem(t,s.dimIdx)}}),i=[],a=0,o=e.count();a<o;a++)t=e.getRawDataItem(a),r.evaluate()&&i.push(t);return{data:i}}},uEt={type:"echarts:sort",transform:function(n){var e=n.upstream,t=n.config,r="",i=Wr(t);i.length||Er(r);var a=[];Z(i,function(u){var d=u.dimension,h=u.order,f=u.parser,m=u.incomparable;if(d==null&&Er(r),h!=="asc"&&h!=="desc"&&Er(r),m&&m!=="min"&&m!=="max"){var v="";Er(v)}if(h!=="asc"&&h!=="desc"){var y="";Er(y)}var w=e.getDimensionInfo(d);w||Er(r);var _=f?yTe(f):null;f&&!_&&Er(r),a.push({dimIdx:w.index,parser:_,comparator:new wTe(h,m)})});var o=e.sourceFormat;o!==Ws&&o!==nd&&Er(r);for(var s=[],l=0,c=e.count();l<c;l++)s.push(e.getRawDataItem(l));return s.sort(function(u,d){for(var h=0;h<a.length;h++){var f=a[h],m=e.retrieveValueFromItem(u,f.dimIdx),v=e.retrieveValueFromItem(d,f.dimIdx);f.parser&&(m=f.parser(m),v=f.parser(v));var y=f.comparator.evaluate(m,v);if(y!==0)return y}return 0}),{data:s}}};function dEt(n){n.registerTransform(cEt),n.registerTransform(uEt)}var hEt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,r,i){n.prototype.init.call(this,t,r,i),this._sourceManager=new TTe(this),zle(this)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),zle(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Df},e}(Un),fEt=function(n){Te(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(Yi);function pEt(n){n.registerComponentModel(hEt),n.registerComponentView(fEt)}var nf=Ff.CMD;function HS(n,e){return Math.abs(n-e)<1e-5}function mq(n){var e=n.data,t=n.len(),r=[],i,a=0,o=0,s=0,l=0;function c($,Y){i&&i.length>2&&r.push(i),i=[$,Y]}function u($,Y,q,W){HS($,q)&&HS(Y,W)||i.push($,Y,q,W,q,W)}function d($,Y,q,W,X,te){var re=Math.abs(Y-$),z=Math.tan(re/4)*4/3,oe=Y<$?-1:1,le=Math.cos($),ee=Math.sin($),be=Math.cos(Y),he=Math.sin(Y),pe=le*X+q,ct=ee*te+W,Be=be*X+q,Se=he*te+W,_e=X*z*oe,me=te*z*oe;i.push(pe-_e*ee,ct+me*le,Be+_e*he,Se-me*be,Be,Se)}for(var h,f,m,v,y=0;y<t;){var w=e[y++],_=y===1;switch(_&&(a=e[y],o=e[y+1],s=a,l=o,(w===nf.L||w===nf.C||w===nf.Q)&&(i=[s,l])),w){case nf.M:a=s=e[y++],o=l=e[y++],c(s,l);break;case nf.L:h=e[y++],f=e[y++],u(a,o,h,f),a=h,o=f;break;case nf.C:i.push(e[y++],e[y++],e[y++],e[y++],a=e[y++],o=e[y++]);break;case nf.Q:h=e[y++],f=e[y++],m=e[y++],v=e[y++],i.push(a+2/3*(h-a),o+2/3*(f-o),m+2/3*(h-m),v+2/3*(f-v),m,v),a=m,o=v;break;case nf.A:var S=e[y++],A=e[y++],C=e[y++],D=e[y++],M=e[y++],P=e[y++]+M;y+=1;var O=!e[y++];h=Math.cos(M)*C+S,f=Math.sin(M)*D+A,_?(s=h,l=f,c(s,l)):u(a,o,h,f),a=Math.cos(P)*C+S,o=Math.sin(P)*D+A;for(var j=(O?-1:1)*Math.PI/2,L=M;O?L>P:L<P;L+=j){var B=O?Math.max(L+j,P):Math.min(L+j,P);d(L,B,S,A,C,D)}break;case nf.R:s=a=e[y++],l=o=e[y++],h=s+e[y++],f=l+e[y++],c(h,l),u(h,l,h,f),u(h,f,s,f),u(s,f,s,l),u(s,l,h,l);break;case nf.Z:i&&u(a,o,s,l),a=s,o=l;break}}return i&&i.length>2&&r.push(i),r}function vq(n,e,t,r,i,a,o,s,l,c){if(HS(n,t)&&HS(e,r)&&HS(i,o)&&HS(a,s)){l.push(o,s);return}var u=2/c,d=u*u,h=o-n,f=s-e,m=Math.sqrt(h*h+f*f);h/=m,f/=m;var v=t-n,y=r-e,w=i-o,_=a-s,S=v*v+y*y,A=w*w+_*_;if(S<d&&A<d){l.push(o,s);return}var C=h*v+f*y,D=-h*w-f*_,M=S-C*C,P=A-D*D;if(M<d&&C>=0&&P<d&&D>=0){l.push(o,s);return}var O=[],j=[];hy(n,t,i,o,.5,O),hy(e,r,a,s,.5,j),vq(O[0],j[0],O[1],j[1],O[2],j[2],O[3],j[3],l,c),vq(O[4],j[4],O[5],j[5],O[6],j[6],O[7],j[7],l,c)}function gEt(n,e){var t=mq(n),r=[];e=e||1;for(var i=0;i<t.length;i++){var a=t[i],o=[],s=a[0],l=a[1];o.push(s,l);for(var c=2;c<a.length;){var u=a[c++],d=a[c++],h=a[c++],f=a[c++],m=a[c++],v=a[c++];vq(s,l,u,d,h,f,m,v,o,e),s=m,l=v}r.push(o)}return r}function $De(n,e,t){var r=n[e],i=n[1-e],a=Math.abs(r/i),o=Math.ceil(Math.sqrt(a*t)),s=Math.floor(t/o);s===0&&(s=1,o=t);for(var l=[],c=0;c<o;c++)l.push(s);var u=o*s,d=t-u;if(d>0)for(var c=0;c<d;c++)l[c%o]+=1;return l}function Vfe(n,e,t){for(var r=n.r0,i=n.r,a=n.startAngle,o=n.endAngle,s=Math.abs(o-a),l=s*i,c=i-r,u=l>Math.abs(c),d=$De([l,c],u?0:1,e),h=(u?s:c)/d.length,f=0;f<d.length;f++)for(var m=(u?c:s)/d[f],v=0;v<d[f];v++){var y={};u?(y.startAngle=a+h*f,y.endAngle=a+h*(f+1),y.r0=r+m*v,y.r=r+m*(v+1)):(y.startAngle=a+m*v,y.endAngle=a+m*(v+1),y.r0=r+h*f,y.r=r+h*(f+1)),y.clockwise=n.clockwise,y.cx=n.cx,y.cy=n.cy,t.push(y)}}function mEt(n,e,t){for(var r=n.width,i=n.height,a=r>i,o=$De([r,i],a?0:1,e),s=a?"width":"height",l=a?"height":"width",c=a?"x":"y",u=a?"y":"x",d=n[s]/o.length,h=0;h<o.length;h++)for(var f=n[l]/o[h],m=0;m<o[h];m++){var v={};v[c]=h*d,v[u]=m*f,v[s]=d,v[l]=f,v.x+=n.x,v.y+=n.y,t.push(v)}}function zfe(n,e,t,r){return n*r-t*e}function vEt(n,e,t,r,i,a,o,s){var l=t-n,c=r-e,u=o-i,d=s-a,h=zfe(u,d,l,c);if(Math.abs(h)<1e-6)return null;var f=n-i,m=e-a,v=zfe(f,m,u,d)/h;return v<0||v>1?null:new ln(v*l+n,v*c+e)}function yEt(n,e,t){var r=new ln;ln.sub(r,t,e),r.normalize();var i=new ln;ln.sub(i,n,e);var a=i.dot(r);return a}function dS(n,e){var t=n[n.length-1];t&&t[0]===e[0]&&t[1]===e[1]||n.push(e)}function bEt(n,e,t){for(var r=n.length,i=[],a=0;a<r;a++){var o=n[a],s=n[(a+1)%r],l=vEt(o[0],o[1],s[0],s[1],e.x,e.y,t.x,t.y);l&&i.push({projPt:yEt(l,e,t),pt:l,idx:a})}if(i.length<2)return[{points:n},{points:n}];i.sort(function(y,w){return y.projPt-w.projPt});var c=i[0],u=i[i.length-1];if(u.idx<c.idx){var d=c;c=u,u=d}for(var h=[c.pt.x,c.pt.y],f=[u.pt.x,u.pt.y],m=[h],v=[f],a=c.idx+1;a<=u.idx;a++)dS(m,n[a].slice());dS(m,f),dS(m,h);for(var a=u.idx+1;a<=c.idx+r;a++)dS(v,n[a%r].slice());return dS(v,h),dS(v,f),[{points:m},{points:v}]}function Hfe(n){var e=n.points,t=[],r=[];S5(e,t,r);var i=new pn(t[0],t[1],r[0]-t[0],r[1]-t[1]),a=i.width,o=i.height,s=i.x,l=i.y,c=new ln,u=new ln;return a>o?(c.x=u.x=s+a/2,c.y=l,u.y=l+o):(c.y=u.y=l+o/2,c.x=s,u.x=s+a),bEt(e,c,u)}function SL(n,e,t,r){if(t===1)r.push(e);else{var i=Math.floor(t/2),a=n(e);SL(n,a[0],i,r),SL(n,a[1],t-i,r)}return r}function wEt(n,e){for(var t=[],r=0;r<e;r++)t.push(VY(n));return t}function _Et(n,e){e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel}function xEt(n){for(var e=[],t=0;t<n.length;)e.push([n[t++],n[t++]]);return e}function SEt(n,e){var t=[],r=n.shape,i;switch(n.type){case"rect":mEt(r,e,t),i=er;break;case"sector":Vfe(r,e,t),i=Al;break;case"circle":Vfe({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),i=Al;break;default:var a=n.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=Ue(gEt(n.getUpdatedPathProxy(),o),function(w){return xEt(w)}),l=s.length;if(l===0)SL(Hfe,{points:s[0]},e,t);else if(l===e)for(var c=0;c<l;c++)t.push({points:s[c]});else{var u=0,d=Ue(s,function(w){var _=[],S=[];S5(w,_,S);var A=(S[1]-_[1])*(S[0]-_[0]);return u+=A,{poly:w,area:A}});d.sort(function(w,_){return _.area-w.area});for(var h=e,c=0;c<l;c++){var f=d[c];if(h<=0)break;var m=c===l-1?h:Math.ceil(f.area/u*e);m<0||(SL(Hfe,{points:f.poly},m,t),h-=m)}}i=Cl;break}if(!i)return wEt(n,e);for(var v=[],c=0;c<t.length;c++){var y=new i;y.setShape(t[c]),_Et(n,y),v.push(y)}return v}function TEt(n,e){var t=n.length,r=e.length;if(t===r)return[n,e];for(var i=[],a=[],o=t<r?n:e,s=Math.min(t,r),l=Math.abs(r-t)/6,c=(s-2)/6,u=Math.ceil(l/c)+1,d=[o[0],o[1]],h=l,f=2;f<s;){var m=o[f-2],v=o[f-1],y=o[f++],w=o[f++],_=o[f++],S=o[f++],A=o[f++],C=o[f++];if(h<=0){d.push(y,w,_,S,A,C);continue}for(var D=Math.min(h,u-1)+1,M=1;M<=D;M++){var P=M/D;hy(m,y,_,A,P,i),hy(v,w,S,C,P,a),m=i[3],v=a[3],d.push(i[1],a[1],i[2],a[2],m,v),y=i[5],w=a[5],_=i[6],S=a[6]}h-=D-1}return o===n?[d,e]:[n,d]}function qfe(n,e){for(var t=n.length,r=n[t-2],i=n[t-1],a=[],o=0;o<e.length;)a[o++]=r,a[o++]=i;return a}function EEt(n,e){for(var t,r,i,a=[],o=[],s=0;s<Math.max(n.length,e.length);s++){var l=n[s],c=e[s],u=void 0,d=void 0;l?c?(t=TEt(l,c),u=t[0],d=t[1],r=u,i=d):(d=qfe(i||l,l),u=l):(u=qfe(r||c,c),d=c),a.push(u),o.push(d)}return[a,o]}function Gfe(n){for(var e=0,t=0,r=0,i=n.length,a=0,o=i-2;a<i;o=a,a+=2){var s=n[o],l=n[o+1],c=n[a],u=n[a+1],d=s*u-c*l;e+=d,t+=(s+c)*d,r+=(l+u)*d}return e===0?[n[0]||0,n[1]||0]:[t/e/3,r/e/3,e]}function AEt(n,e,t,r){for(var i=(n.length-2)/6,a=1/0,o=0,s=n.length,l=s-2,c=0;c<i;c++){for(var u=c*6,d=0,h=0;h<s;h+=2){var f=h===0?u:(u+h-2)%l+2,m=n[f]-t[0],v=n[f+1]-t[1],y=e[h]-r[0],w=e[h+1]-r[1],_=y-m,S=w-v;d+=_*_+S*S}d<a&&(a=d,o=c)}return o}function CEt(n){for(var e=[],t=n.length,r=0;r<t;r+=2)e[r]=n[t-r-2],e[r+1]=n[t-r-1];return e}function DEt(n,e,t,r){for(var i=[],a,o=0;o<n.length;o++){var s=n[o],l=e[o],c=Gfe(s),u=Gfe(l);a==null&&(a=c[2]<0!=u[2]<0);var d=[],h=[],f=0,m=1/0,v=[],y=s.length;a&&(s=CEt(s));for(var w=AEt(s,l,c,u)*6,_=y-2,S=0;S<_;S+=2){var A=(w+S)%_+2;d[S+2]=s[A]-c[0],d[S+3]=s[A+1]-c[1]}d[0]=s[w]-c[0],d[1]=s[w+1]-c[1];for(var C=r/t,D=-r/2;D<=r/2;D+=C){for(var M=Math.sin(D),P=Math.cos(D),O=0,S=0;S<s.length;S+=2){var j=d[S],L=d[S+1],B=l[S]-u[0],$=l[S+1]-u[1],Y=B*P-$*M,q=B*M+$*P;v[S]=Y,v[S+1]=q;var W=Y-j,X=q-L;O+=W*W+X*X}if(O<m){m=O,f=D;for(var te=0;te<v.length;te++)h[te]=v[te]}}i.push({from:d,to:h,fromCp:c,toCp:u,rotation:-f})}return i}function TL(n){return n.__isCombineMorphing}var BDe="__mOriginal_";function EL(n,e,t){var r=BDe+e,i=n[r]||n[e];n[r]||(n[r]=n[e]);var a=t.replace,o=t.after,s=t.before;n[e]=function(){var l=arguments,c;return s&&s.apply(this,l),a?c=a.apply(this,l):c=i.apply(this,l),o&&o.apply(this,l),c}}function OD(n,e){var t=BDe+e;n[t]&&(n[e]=n[t],n[t]=null)}function Wfe(n,e){for(var t=0;t<n.length;t++)for(var r=n[t],i=0;i<r.length;){var a=r[i],o=r[i+1];r[i++]=e[0]*a+e[2]*o+e[4],r[i++]=e[1]*a+e[3]*o+e[5]}}function UDe(n,e){var t=n.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=EEt(mq(t),mq(r)),a=i[0],o=i[1],s=n.getComputedTransform(),l=e.getComputedTransform();function c(){this.transform=null}s&&Wfe(a,s),l&&Wfe(o,l),EL(e,"updateTransform",{replace:c}),e.transform=null;var u=DEt(a,o,10,Math.PI),d=[];EL(e,"buildPath",{replace:function(h){for(var f=e.__morphT,m=1-f,v=[],y=0;y<u.length;y++){var w=u[y],_=w.from,S=w.to,A=w.rotation*f,C=w.fromCp,D=w.toCp,M=Math.sin(A),P=Math.cos(A);VO(v,C,D,f);for(var O=0;O<_.length;O+=2){var j=_[O],L=_[O+1],B=S[O],$=S[O+1],Y=j*m+B*f,q=L*m+$*f;d[O]=Y*P-q*M+v[0],d[O+1]=Y*M+q*P+v[1]}var W=d[0],X=d[1];h.moveTo(W,X);for(var O=2;O<_.length;){var B=d[O++],$=d[O++],te=d[O++],re=d[O++],z=d[O++],oe=d[O++];W===B&&X===$&&te===z&&re===oe?h.lineTo(z,oe):h.bezierCurveTo(B,$,te,re,z,oe),W=z,X=oe}}}})}function EX(n,e,t){if(!n||!e)return e;var r=t.done,i=t.during;UDe(n,e),e.__morphT=0;function a(){OD(e,"buildPath"),OD(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},Rt({during:function(o){e.dirtyShape(),i&&i(o)},done:function(){a(),r&&r()}},t)),e}function kEt(n,e,t,r,i,a){var o=16;n=i===t?0:Math.round(32767*(n-t)/(i-t)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var s=0,l,c=(1<<o)/2;c>0;c/=2){var u=0,d=0;(n&c)>0&&(u=1),(e&c)>0&&(d=1),s+=c*c*(3*u^d),d===0&&(u===1&&(n=c-1-n,e=c-1-e),l=n,n=e,e=l)}return s}function AL(n){var e=1/0,t=1/0,r=-1/0,i=-1/0,a=Ue(n,function(s){var l=s.getBoundingRect(),c=s.getComputedTransform(),u=l.x+l.width/2+(c?c[4]:0),d=l.y+l.height/2+(c?c[5]:0);return e=Math.min(u,e),t=Math.min(d,t),r=Math.max(u,r),i=Math.max(d,i),[u,d]}),o=Ue(a,function(s,l){return{cp:s,z:kEt(s[0],s[1],e,t,r,i),path:n[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function VDe(n){return SEt(n.path,n.count)}function yq(){return{fromIndividuals:[],toIndividuals:[],count:0}}function IEt(n,e,t){var r=[];function i(C){for(var D=0;D<C.length;D++){var M=C[D];TL(M)?i(M.childrenRef()):M instanceof Mn&&r.push(M)}}i(n);var a=r.length;if(!a)return yq();var o=t.dividePath||VDe,s=o({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),yq();r=AL(r),s=AL(s);for(var l=t.done,c=t.during,u=t.individualDelay,d=new sg,h=0;h<a;h++){var f=r[h],m=s[h];m.parent=e,m.copyTransform(d),u||UDe(f,m)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function v(C){for(var D=0;D<s.length;D++)s[D].addSelfToZr(C)}EL(e,"addSelfToZr",{after:function(C){v(C)}}),EL(e,"removeSelfFromZr",{after:function(C){for(var D=0;D<s.length;D++)s[D].removeSelfFromZr(C)}});function y(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,OD(e,"addSelfToZr"),OD(e,"removeSelfFromZr")}var w=s.length;if(u)for(var _=w,S=function(){_--,_===0&&(y(),l&&l())},h=0;h<w;h++){var A=u?Rt({delay:(t.delay||0)+u(h,w,r[h],s[h]),done:S},t):t;EX(r[h],s[h],A)}else e.__morphT=0,e.animateTo({__morphT:1},Rt({during:function(C){for(var D=0;D<w;D++){var M=s[D];M.__morphT=e.__morphT,M.dirtyShape()}c&&c(C)},done:function(){y();for(var C=0;C<n.length;C++)OD(n[C],"updateTransform");l&&l()}},t));return e.__zr&&v(e.__zr),{fromIndividuals:r,toIndividuals:s,count:w}}function MEt(n,e,t){var r=e.length,i=[],a=t.dividePath||VDe;function o(f){for(var m=0;m<f.length;m++){var v=f[m];TL(v)?o(v.childrenRef()):v instanceof Mn&&i.push(v)}}if(TL(n)){o(n.childrenRef());var s=i.length;if(s<r)for(var l=0,c=s;c<r;c++)i.push(VY(i[l++%s]));i.length=r}else{i=a({path:n,count:r});for(var u=n.getComputedTransform(),c=0;c<i.length;c++)i[c].setLocalTransform(u);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),yq()}i=AL(i),e=AL(e);for(var d=t.individualDelay,c=0;c<r;c++){var h=d?Rt({delay:(t.delay||0)+d(c,r,i[c],e[c])},t):t;EX(i[c],e[c],h)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function Yfe(n){return $e(n[0])}function Kfe(n,e){for(var t=[],r=n.length,i=0;i<r;i++)t.push({one:n[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,o=void 0;for(o=0;o<a;o++)t[o%r].many.push(e[i][o])}for(var s=0,i=r-1;i>=0;i--)if(!t[i].many.length){var l=t[s].many;if(l.length<=1)if(s)s=0;else return t;var a=l.length,c=Math.ceil(a/2);t[i].many=l.slice(c,a),t[s].many=l.slice(0,c),s++}return t}var PEt={clone:function(n){for(var e=[],t=1-Math.pow(1-n.path.style.opacity,1/n.count),r=0;r<n.count;r++){var i=VY(n.path);i.setStyle("opacity",t),e.push(i)}return e},split:null};function UV(n,e,t,r,i,a){if(!n.length||!e.length)return;var o=NT("update",r,i);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),c,u;Yfe(n)&&(c=n,u=e),Yfe(e)&&(c=e,u=n);function d(w,_,S,A,C){var D=w.many,M=w.one;if(D.length===1&&!C){var P=_?D[0]:M,O=_?M:D[0];if(TL(P))d({many:[P],one:O},!0,S,A,!0);else{var j=s?Rt({delay:s(S,A)},l):l;EX(P,O,j),a(P,O,P,O,j)}}else for(var L=Rt({dividePath:PEt[t],individualDelay:s&&function(X,te,re,z){return s(X+S,A)}},l),B=_?IEt(D,M,L):MEt(M,D,L),$=B.fromIndividuals,Y=B.toIndividuals,q=$.length,W=0;W<q;W++){var j=s?Rt({delay:s(W,q)},l):l;a($[W],Y[W],_?D[W]:w.one,_?w.one:D[W],j)}}for(var h=c?c===n:n.length>e.length,f=c?Kfe(u,c):Kfe(h?e:n,[h?n:e]),m=0,v=0;v<f.length;v++)m+=f[v].many.length;for(var y=0,v=0;v<f.length;v++)d(f[v],h,y,m),y+=f[v].many.length}function Rb(n){if(!n)return[];if($e(n)){for(var e=[],t=0;t<n.length;t++)e.push(Rb(n[t]));return e}var r=[];return n.traverse(function(i){i instanceof Mn&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var zDe=1e4,OEt=0,Xfe=1,Zfe=2,REt=tr();function NEt(n,e){for(var t=n.dimensions,r=0;r<t.length;r++){var i=n.getDimensionInfo(t[r]);if(i&&i.otherDims[e]===0)return t[r]}}function LEt(n,e,t){var r=n.getDimensionInfo(t),i=r&&r.ordinalMeta;if(r){var a=n.get(r.name,e);return i&&i.categories[a]||a+""}}function Qfe(n,e,t,r){var i=r?"itemChildGroupId":"itemGroupId",a=NEt(n,i);if(a){var o=LEt(n,e,a);return o}var s=n.getRawDataItem(e),l=r?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!r)return t||n.getId(e)}function Jfe(n){var e=[];return Z(n,function(t){var r=t.data,i=t.dataGroupId;if(!(r.count()>zDe))for(var a=r.getIndices(),o=0;o<a.length;o++)e.push({data:r,groupId:Qfe(r,o,i,!1),childGroupId:Qfe(r,o,i,!0),divide:t.divide,dataIndex:o})}),e}function VV(n,e,t){n.traverse(function(r){r instanceof Mn&&Ni(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function zV(n){if(n.parent){var e=n.getComputedTransform();n.setLocalTransform(e),n.parent.remove(n)}}function hS(n){n.stopAnimation(),n.isGroup&&n.traverse(function(e){e.stopAnimation()})}function jEt(n,e,t){var r=NT("update",t,e);r&&n.traverse(function(i){if(i instanceof Qu){var a=Mct(i);a&&i.animateFrom({style:a},r)}})}function FEt(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var i=n[r],a=e[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function HDe(n,e,t){var r=Jfe(n),i=Jfe(e);function a(S,A,C,D,M){(C||S)&&A.animateFrom({style:C&&C!==S?Pe(Pe({},C.style),S.style):S.style},M)}var o=!1,s=OEt,l=_t(),c=_t();r.forEach(function(S){S.groupId&&l.set(S.groupId,!0),S.childGroupId&&c.set(S.childGroupId,!0)});for(var u=0;u<i.length;u++){var d=i[u].groupId;if(c.get(d)){s=Xfe;break}var h=i[u].childGroupId;if(h&&l.get(h)){s=Zfe;break}}function f(S,A){return function(C){var D=C.data,M=C.dataIndex;return A?D.getId(M):S?s===Xfe?C.childGroupId:C.groupId:s===Zfe?C.childGroupId:C.groupId}}var m=FEt(r,i),v={};if(!m)for(var u=0;u<i.length;u++){var y=i[u],w=y.data.getItemGraphicEl(y.dataIndex);w&&(v[w.id]=!0)}function _(S,A){var C=r[A],D=i[S],M=D.data.hostModel,P=C.data.getItemGraphicEl(C.dataIndex),O=D.data.getItemGraphicEl(D.dataIndex);if(P===O){O&&jEt(O,D.dataIndex,M);return}P&&v[P.id]||O&&(hS(O),P?(hS(P),zV(P),o=!0,UV(Rb(P),Rb(O),D.divide,M,S,a)):VV(O,M,S))}new Ng(r,i,f(!0,m),f(!1,m),null,"multiple").update(_).updateManyToOne(function(S,A){var C=i[S],D=C.data,M=D.hostModel,P=D.getItemGraphicEl(C.dataIndex),O=Cr(Ue(A,function(j){return r[j].data.getItemGraphicEl(r[j].dataIndex)}),function(j){return j&&j!==P&&!v[j.id]});P&&(hS(P),O.length?(Z(O,function(j){hS(j),zV(j)}),o=!0,UV(Rb(O),Rb(P),C.divide,M,S,a)):VV(P,M,C.dataIndex))}).updateOneToMany(function(S,A){var C=r[A],D=C.data.getItemGraphicEl(C.dataIndex);if(!(D&&v[D.id])){var M=Cr(Ue(S,function(O){return i[O].data.getItemGraphicEl(i[O].dataIndex)}),function(O){return O&&O!==D}),P=i[S[0]].data.hostModel;M.length&&(Z(M,function(O){return hS(O)}),D?(hS(D),zV(D),o=!0,UV(Rb(D),Rb(M),C.divide,P,S[0],a)):Z(M,function(O){return VV(O,P,S[0])}))}}).updateManyToMany(function(S,A){new Ng(A,S,function(C){return r[C].data.getId(r[C].dataIndex)},function(C){return i[C].data.getId(i[C].dataIndex)}).update(function(C,D){_(S[C],A[D])}).execute()}).execute(),o&&Z(e,function(S){var A=S.data,C=A.hostModel,D=C&&t.getViewOfSeriesModel(C),M=NT("update",C,0);D&&C.isAnimationEnabled()&&M&&M.duration>0&&D.group.traverse(function(P){P instanceof Mn&&!P.animators.length&&P.animateFrom({style:{opacity:0}},M)})})}function epe(n){var e=n.getModel("universalTransition").get("seriesKey");return e||n.id}function tpe(n){return $e(n)?n.sort().join(","):n}function Iv(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function $Et(n,e){var t=_t(),r=_t(),i=_t();return Z(n.oldSeries,function(a,o){var s=n.oldDataGroupIds[o],l=n.oldData[o],c=epe(a),u=tpe(c);r.set(u,{dataGroupId:s,data:l}),$e(c)&&Z(c,function(d){i.set(d,{key:u,dataGroupId:s,data:l})})}),Z(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=epe(a),c=tpe(l),u=r.get(c);if(u)t.set(c,{oldSeries:[{dataGroupId:u.dataGroupId,divide:Iv(u.data),data:u.data}],newSeries:[{dataGroupId:o,divide:Iv(s),data:s}]});else if($e(l)){var d=[];Z(l,function(m){var v=r.get(m);v.data&&d.push({dataGroupId:v.dataGroupId,divide:Iv(v.data),data:v.data})}),d.length&&t.set(c,{oldSeries:d,newSeries:[{dataGroupId:o,data:s,divide:Iv(s)}]})}else{var h=i.get(l);if(h){var f=t.get(h.key);f||(f={oldSeries:[{dataGroupId:h.dataGroupId,data:h.data,divide:Iv(h.data)}],newSeries:[]},t.set(h.key,f)),f.newSeries.push({dataGroupId:o,data:s,divide:Iv(s)})}}}}),t}function npe(n,e){for(var t=0;t<n.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===n[t].seriesIndex||e.seriesId!=null&&e.seriesId===n[t].id;if(r)return t}}function BEt(n,e,t,r){var i=[],a=[];Z(Wr(n.from),function(o){var s=npe(e.oldSeries,o);s>=0&&i.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:Iv(e.oldData[s]),groupIdDim:o.dimension})}),Z(Wr(n.to),function(o){var s=npe(t.updatedSeries,o);if(s>=0){var l=t.updatedSeries[s].getData();a.push({dataGroupId:e.oldDataGroupIds[s],data:l,divide:Iv(l),groupIdDim:o.dimension})}}),i.length>0&&a.length>0&&HDe(i,a,r)}function UEt(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){Z(Wr(r.seriesTransition),function(i){Z(Wr(i.to),function(a){for(var o=r.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][JO]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(e,t,r){var i=REt(t);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)Z(Wr(a),function(f){BEt(f,i,r,t)});else{var o=$Et(i,r);Z(o.keys(),function(f){var m=o.get(f);HDe(m.oldSeries,m.newSeries,t)})}Z(r.updatedSeries,function(f){f[JO]&&(f[JO]=!1)})}for(var s=e.getSeries(),l=i.oldSeries=[],c=i.oldDataGroupIds=[],u=i.oldData=[],d=0;d<s.length;d++){var h=s[d].getData();h.count()<zDe&&(l.push(s[d]),c.push(s[d].get("dataGroupId")),u.push(h))}})}Dn([Zpt]);Dn([Gpt]);Dn([vgt,Pgt,Vgt,_mt,Pmt,yvt,Gvt,kyt,Zyt,r0t,h0t,obt,Mbt,Vbt,iwt,lwt,ywt,Ewt,Lwt,Vwt,Qwt,N_t]);Dn(ext);Dn(Axt);Dn(VAe);Dn($xt);Dn(CCe);Dn(zxt);Dn(Qxt);Dn($St);Dn(i1t);Dn(M2);Dn(_1t);Dn(T1t);Dn(R1t);Dn(U1t);Dn(W1t);Dn(J1t);Dn(cTt);Dn(CTt);Dn(IDe);Dn(MDe);Dn(WTt);Dn(LDe);Dn(jDe);Dn(QTt);Dn(dEt);Dn(pEt);Dn(UEt);Dn(hpt);const rpe=n=>{if(n===0)return"0m";const e=Math.floor(n/60),t=n%60;return e===0?`${t}m`:t===0?`${e}h`:`${e}h ${t}m`},VEt=({data:n})=>{const e=K.useRef(null),t=K.useRef(null),{isLeftSidebarOpen:r}=tc();return K.useEffect(()=>{if(!e.current)return;console.log("📊 UsageLineChart received data:",{dataLength:(n==null?void 0:n.length)||0,data:n==null?void 0:n.slice(0,5),totalOnScreenTime:(n==null?void 0:n.reduce((m,v)=>m+v.onScreenTime,0))||0,isEmpty:!n||n.length===0,sampleData:n==null?void 0:n[0]}),t.current&&(t.current.dispose(),t.current=null),t.current=sEe(e.current);const i=getComputedStyle(document.documentElement).getPropertyValue("--bg-primary").trim()==="#141414",a=getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim()||(i?"#2a2a2a":"#e5e7eb");if(!n||n.length===0){console.warn("📊 UsageLineChart: No data available, showing empty chart");const m={animation:!1,graphic:{type:"text",left:"center",top:"middle",style:{text:"No usage data available",fontSize:16,fill:i?"#a1a1aa":"#666"}}};t.current.setOption(m);return}const o=m=>{const v=new Date(m),y=v.toLocaleDateString("en-US",{month:"long"}),w=v.getDate();return`${y} ${w}`},l=n.map(m=>m.date).map(o),c=n.map(m=>m.onScreenTime),u=n.map(m=>m.workingTime),d=n.map(m=>m.deepFocusTime),h={animation:!1,tooltip:{trigger:"axis",backgroundColor:i?"rgba(42, 42, 42, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:i?"#404040":"#e2e8f0",borderWidth:1,borderRadius:8,extraCssText:"min-width: 200px; white-space: nowrap;",textStyle:{color:i?"#ffffff":"#1f2937"},formatter:function(m){if(!m||m.length===0)return"";let v=`<div style="font-weight: 600; margin-bottom: 4px;">${m[0].axisValue}</div>`;return m.forEach(y=>{const w=y.color,_=y.seriesName,S=rpe(y.value||0);v+=`<div style="display: flex; align-items: center; margin: 2px 0;">
              <span style="display: inline-block; width: 8px; height: 8px; border-radius: 50%; background-color: ${w}; margin-right: 8px;"></span>
              <span style="color: ${i?"#a1a1aa":"#6b7280"};">${_}</span>
              <span style="margin-left: auto; font-weight: 600; color: ${i?"#ffffff":"#1f2937"};">${S}</span>
            </div>`}),v}},legend:{data:["On Screen Time","Working Time","Deep Focus Time"],bottom:"0",icon:"circle",itemWidth:8,itemHeight:8,textStyle:{color:i?"#a1a1aa":"#666",fontSize:12}},grid:{left:"0",right:"20",top:"10",bottom:"30",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:l,axisLine:{lineStyle:{color:i?"#404040":"#eee"}},axisLabel:{color:i?"#a1a1aa":"#666",formatter:function(m,v){return v===l.length-1?"{right|"+m+"}":m},rich:{right:{align:"right"}}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:a,type:[3,3],width:1}},axisLabel:{color:i?"#a1a1aa":"#666",formatter:function(m){return rpe(m)}}},series:[{name:"On Screen Time",type:"line",smooth:!0,symbol:"circle",symbolSize:8,showSymbol:!0,lineStyle:{width:3,color:"rgba(87, 181, 231, 1)"},itemStyle:{color:"rgba(87, 181, 231, 1)",borderColor:"rgba(87, 181, 231, 1)",borderWidth:0},data:c},{name:"Working Time",type:"line",smooth:!0,symbol:"circle",symbolSize:8,showSymbol:!0,lineStyle:{width:3,color:"rgba(34, 197, 94, 1)"},itemStyle:{color:"rgba(34, 197, 94, 1)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:0},data:u},{name:"Deep Focus Time",type:"line",smooth:!0,symbol:"circle",symbolSize:8,showSymbol:!0,lineStyle:{width:3,color:"rgba(239, 68, 68, 1)"},itemStyle:{color:"rgba(239, 68, 68, 1)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:0},data:d}]};t.current.setOption(h);const f=()=>{t.current&&t.current.resize()};return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),t.current&&(t.current.dispose(),t.current=null)}},[n]),K.useEffect(()=>{(()=>{setTimeout(()=>{t.current&&t.current.resize()},100)})()},[r]),E.jsx("div",{ref:e,className:"w-full h-full"})},zEt=({data:n})=>{const e=K.useRef(null),t=K.useRef(null);console.log("🥧 UsagePieChart received data:",{hasData:!!n,dataLength:(n==null?void 0:n.length)||0,totalTime:(n==null?void 0:n.reduce((i,a)=>i+a.timeSpent,0))||0,sampleData:(n==null?void 0:n.slice(0,3))||[],timestamp:new Date().toISOString()});const r=i=>{const a=Math.floor(i/60),o=i%60;return a===0?`${o}m`:o===0?`${a}h`:`${a}h ${o}m`};return K.useEffect(()=>{if(!e.current)return;t.current=sEe(e.current);const i=document.documentElement,o=getComputedStyle(i).getPropertyValue("--bg-primary").trim()==="#141414"||i.classList.contains("dark")||i.getAttribute("data-theme")==="dark";if(!n||n.length===0){console.warn("🥧 UsagePieChart: No data available, showing empty chart");const v={animation:!1,graphic:{type:"text",left:"center",top:"middle",style:{text:"No site usage data available",fontSize:16,fill:o?"#a1a1aa":"#666"}},series:[]};t.current.setOption(v,!0);return}const s=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de"],l=n.slice(0,5),c=n.slice(5),u=c.reduce((v,y)=>v+y.timeSpent,0),d=c.reduce((v,y)=>v+y.sessions,0),h=[...l.map((v,y)=>{const w=w_e(v.url||v.name),_=s[y],S=b_e(w,_);return{value:v.timeSpent,name:v.name,timeSpent:v.timeSpent,sessions:v.sessions,itemStyle:{color:S}}})];n.length>5&&u>0&&h.push({value:u,name:"Others",timeSpent:u,sessions:d,itemStyle:{color:"#9CA3AF"}}),console.log("🥧 UsagePieChart: Rendering chart with data:",{chartDataLength:h.length,totalValue:h.reduce((v,y)=>v+y.value,0),hasOthers:h.some(v=>v.name==="Others")});const f={animation:!1,graphic:[],tooltip:{trigger:"item",backgroundColor:o?"rgba(42, 42, 42, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:o?"#404040":"#e2e8f0",borderWidth:1,borderRadius:8,padding:[12,16],textStyle:{color:o?"#ffffff":"#1f2937",fontSize:13},formatter:function(v){const y=v.data,w=v.percent,_=o?"#a1a1aa":"#6b7280";return`
            <div style="font-weight: 600; font-size: 14px; margin-bottom: 8px; color: ${o?"#ffffff":"#111827"};">
              ${y.name}
            </div>
            <div style="line-height: 1.5;">
              <div style="margin-bottom: 4px;">
                <span style="color: ${_};">Total time visited:</span>
                <span style="float: right; font-weight: 500;">${r(y.timeSpent)}</span>
              </div>
              <div style="margin-bottom: 4px;">
                <span style="color: ${_};">Total sessions:</span>
                <span style="float: right; font-weight: 500;">${y.sessions}</span>
              </div>
              <div>
                <span style="color: ${_};">Percentage:</span>
                <span style="float: right; font-weight: 500;">${w.toFixed(1)}%</span>
              </div>
            </div>
          `}},series:[{name:"Usage",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:4,borderColor:o?"transparent":"#fff",borderWidth:o?0:2},label:{show:!0,position:"inside",formatter:"{d}%",fontSize:12,color:"#fff",fontWeight:"500",align:"center",verticalAlign:"middle",distance:"25%"},emphasis:{label:{show:!0,fontSize:14,fontWeight:"600"}},labelLine:{show:!1},data:h}]};t.current.setOption(f,!0),console.log("🥧 UsagePieChart: Chart updated with",h.length,"data points");const m=()=>{t.current&&t.current.resize()};return window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m),t.current&&t.current.dispose()}},[n]),E.jsx("div",{ref:e,className:"w-full h-full"})},AX=({domain:n,size:e=32,className:t="",fallbackIcon:r="ri-global-line",onLoad:i,onError:a})=>{const o=r||vl.getDomainIcon(n),[s,l]=K.useState(null),[c,u]=K.useState(!0),[d,h]=K.useState(!1),[f,m]=K.useState(!1);return K.useEffect(()=>{let v=!0;return n&&(async()=>{try{u(!0),h(!1),m(!1);const _=`https://www.google.com/s2/favicons?domain=${vl.cleanDomain(n)}&sz=${e*2}`,S=await new Promise(A=>{const C=new Image,D=setTimeout(()=>{A(!1)},2e3);C.onload=()=>{clearTimeout(D),C.width>16||C.height>16?A(!0):A(!1)},C.onerror=()=>{clearTimeout(D),A(!1)},C.src=_});v&&(S?(l(_),u(!1),i==null||i()):(m(!0),u(!1),a==null||a()))}catch{v&&(h(!0),u(!1),m(!0),a==null||a())}})(),()=>{v=!1}},[n,e,i,a,o]),c||f||!s?E.jsx("div",{className:`flex items-center justify-center bg-gray-100 rounded ${t}`,style:{width:e,height:e},children:E.jsx(bt,{name:o,className:"text-gray-600",size:Math.floor(e*.6)})}):E.jsx("div",{className:`flex items-center justify-center overflow-hidden rounded ${t}`,style:{width:e,height:e},title:`${n} favicon`,children:E.jsx("img",{src:s,alt:`${n} favicon`,width:e,height:e,className:"favicon-image",style:{objectFit:"contain",maxWidth:e,maxHeight:e},onError:v=>{m(!0),h(!0)}})})};class HEt{constructor(){hn(this,"cacheKey","siteUsage30Days");hn(this,"cacheDurationMs",24*60*60*1e3)}getTodayKey(){return new Date().toISOString().split("T")[0]}isCacheValid(e){const t=this.getTodayKey(),r=e.dateKey===t,i=Date.now()-e.timestamp<this.cacheDurationMs;return r&&i}async getLast30DaysUsage(){var e;try{const t=localStorage.getItem(this.cacheKey);if(t){const d=JSON.parse(t);if(this.isCacheValid(d))return console.log("📋 Using cached 30-day usage data"),d.data}console.log("🔄 Fetching fresh 30-day usage data");const{user:r}=Rn.getState();if(!(r!=null&&r.uid))return console.warn("⚠️ No user ID available for fetching usage data"),[];const i=new Date().toISOString().split("T")[0],a=new Date;a.setDate(a.getDate()-30);const o=a.toISOString().split("T")[0];let s;try{s=await jc.getUserData(r.uid,o,i)}catch(d){if((e=d==null?void 0:d.message)!=null&&e.includes("index"))return console.warn("⚠️ Firebase index required for site usage query. Using fallback empty data."),[];throw d}const l=new Map;s.forEach(d=>{Object.entries(d.sites).forEach(([h,f])=>{const m=l.get(h),v=this.formatDomainName(h);m?(m.timeSpent+=f.timeSpent,m.visits+=f.visits):l.set(h,{timeSpent:f.timeSpent,visits:f.visits,name:v,icon:void 0})})});const c=Array.from(l.entries()).map(([d,h],f)=>({id:`cached_${d}_${f}`,name:h.name,url:d,timeSpent:Math.floor(h.timeSpent/(1e3*60)),sessions:h.visits,percentage:0,backgroundColor:this.getColorForSite(d),icon:vl.getDomainIcon(d)})).sort((d,h)=>h.timeSpent-d.timeSpent),u={data:c,timestamp:Date.now(),dateKey:this.getTodayKey()};return localStorage.setItem(this.cacheKey,JSON.stringify(u)),c}catch(t){return console.error("❌ Error fetching 30-day usage data:",t),[]}}formatDomainName(e){return e.replace(/^www\./,"").replace(/\b\w/g,t=>t.toUpperCase())}formatTimeSpent(e){const t=Math.floor(e/6e4),r=Math.floor(t/60),i=t%60;return r>0?`${r}h ${i}m`:`${i}m`}getColorForSite(e){let t=0;for(let i=0;i<e.length;i++)t=e.charCodeAt(i)+((t<<5)-t);return`hsl(${Math.abs(t)%360}, 70%, 50%)`}parseTimeToMinutes(e){const t=e.match(/(\d+)h/),r=e.match(/(\d+)m/),i=t?parseInt(t[1]):0,a=r?parseInt(r[1]):0;return i*60+a}clearCache(){localStorage.removeItem(this.cacheKey),console.log("🗑️ Site usage cache cleared")}}const ipe=new HEt,qEt=()=>{const[n,e]=K.useState([]),[t,r]=K.useState(!1),[i,a]=K.useState(null),o=K.useCallback(async()=>{r(!0),a(null);try{const l=await ipe.getLast30DaysUsage();e(l)}catch(l){a(l instanceof Error?l.message:"Failed to load usage data"),console.error("❌ Error loading cached site usage:",l),e([])}finally{r(!1)}},[]);return{siteUsage:n,isLoading:t,error:i,loadUsageData:o,clearCache:()=>{ipe.clearCache(),e([])}}},GEt=({isOpen:n,onClose:e,onAddSites:t})=>{const{siteUsage:r,isLoading:i,loadUsageData:a}=qEt(),[o,s]=K.useState("visited"),[l,c]=K.useState(new Set),[u,d]=K.useState(!1),[h,f]=K.useState(""),[m,v]=K.useState(""),[y,w]=K.useState(!1);K.useEffect(()=>{n&&o==="visited"&&r.length===0&&!i&&a()},[n,o,r.length,i,a]);const _=r.map(j=>({name:j.name,url:j.url,icon:j.icon,backgroundColor:j.backgroundColor})),S=_.filter(j=>j.name.toLowerCase().includes(m.toLowerCase())||j.url.toLowerCase().includes(m.toLowerCase()));if(K.useEffect(()=>(n?(w(!0),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",setTimeout(()=>{c(new Set),d(!1),f(""),v(""),s("visited"),w(!1)},300)),()=>{document.body.style.overflow="unset"}),[n]),!n&&!y)return null;const A=j=>{const L=new Set(l);L.has(j)?L.delete(j):L.add(j),c(L),d(L.size===S.length)},C=j=>{c(j?new Set(S.map(L=>L.url)):new Set),d(j)},D=()=>{if(o==="visited"){const j=_.filter(L=>l.has(L.url)).map(L=>({name:L.name,url:L.url,icon:L.icon,backgroundColor:L.backgroundColor,isActive:!0}));t(j)}else if(o==="manual"&&h){const j=h.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0],L=j.split(".")[0];t([{name:L.charAt(0).toUpperCase()+L.slice(1),url:j,icon:"ri-global-line",backgroundColor:"#6B7280",isActive:!0}])}e()},M=o==="visited"?l.size:h?1:0,O=(()=>{if(!h)return null;const j=h.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0],L=j.split(".")[0];return{name:L.charAt(0).toUpperCase()+L.slice(1),domain:j}})();return E.jsx("div",{className:`fixed inset-0 bg-black flex items-center justify-center z-50 transition-all duration-300 ${n?"bg-opacity-50":"bg-opacity-0"}`,onClick:j=>{j.target===j.currentTarget&&e()},children:E.jsxs("div",{className:`bg-background-primary rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl transition-all duration-300 ${n?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}`,style:{maxHeight:"85vh"},children:[E.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[E.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Add Site to Block"}),E.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary transition-colors",children:E.jsx(bt,{name:"close-line",className:"w-6 h-6"})})]}),E.jsxs("div",{className:"flex gap-6 mb-6 flex-shrink-0",children:[E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:opacity-75 transition-opacity",children:[E.jsx("input",{type:"radio",name:"addSiteMethod",value:"visited",checked:o==="visited",onChange:()=>s("visited"),className:"hidden"}),E.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${o==="visited"?"border-[#BB5F5A] bg-transparent":"border-border"}`,children:E.jsx("div",{className:`w-2.5 h-2.5 rounded-full bg-[#BB5F5A] transition-opacity duration-200 ${o==="visited"?"opacity-100":"opacity-0"}`})}),E.jsx("span",{className:"text-base text-text-primary",children:"Select visited sites"})]}),E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:opacity-75 transition-opacity",children:[E.jsx("input",{type:"radio",name:"addSiteMethod",value:"manual",checked:o==="manual",onChange:()=>s("manual"),className:"hidden"}),E.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${o==="manual"?"border-[#BB5F5A] bg-transparent":"border-border"}`,children:E.jsx("div",{className:`w-2.5 h-2.5 rounded-full bg-[#BB5F5A] transition-opacity duration-200 ${o==="manual"?"opacity-100":"opacity-0"}`})}),E.jsx("span",{className:"text-base text-text-primary",children:"Input site URL"})]})]}),E.jsxs("div",{className:"flex-1 min-h-0 flex flex-col",children:[o==="visited"&&E.jsxs("div",{className:"flex flex-col min-h-0",children:[E.jsxs("div",{className:"relative mb-4 flex-shrink-0",children:[E.jsx("input",{type:"text",value:m,onChange:j=>v(j.target.value),className:"w-full pl-10 pr-4 py-2.5 text-sm border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#BB5F5A] focus:border-transparent bg-background-container text-text-primary placeholder-text-secondary",placeholder:"Search sites..."}),E.jsx("div",{className:"absolute left-3 top-2.5 flex items-center h-5 text-text-secondary pointer-events-none",children:E.jsx("i",{className:"ri-search-line text-base"})})]}),E.jsx("div",{className:"flex-1 min-h-0",children:E.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto custom-scrollbar",children:i?E.jsxs("div",{className:"flex items-center justify-center py-8",children:[E.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#BB5F5A]"}),E.jsx("span",{className:"ml-3 text-text-secondary",children:"Loading sites..."})]}):S.length===0?E.jsxs("div",{className:"text-center py-8 text-text-secondary",children:[E.jsx("i",{className:"ri-global-line text-5xl mx-auto mb-3 opacity-50 block"}),E.jsx("p",{children:"No sites found"})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"add-site-modal-item flex items-center gap-3 p-3 rounded-lg transition-colors cursor-pointer",onClick:()=>C(!u),children:[E.jsx(Bk,{checked:u,onChange:C}),E.jsx("span",{className:"text-base font-medium text-text-primary",children:"Select all sites"}),l.size>0&&E.jsxs("span",{className:"text-sm text-[#BB5F5A] font-medium ml-auto",children:[l.size," selected"]})]}),S.map(j=>E.jsxs("div",{className:"add-site-modal-item flex items-center gap-3 p-3 rounded-lg transition-colors cursor-pointer",onClick:()=>A(j.url),children:[E.jsx(Bk,{checked:l.has(j.url),onChange:()=>A(j.url)}),E.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 pointer-events-none",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx(AX,{domain:j.url,size:32,fallbackIcon:j.icon})}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("div",{className:"font-medium text-text-primary truncate",children:j.name}),E.jsx("div",{className:"text-sm text-text-secondary truncate",children:j.url})]})]})]},j.url))]})})})]}),o==="manual"&&E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"relative mb-4",children:E.jsx("input",{type:"text",value:h,onChange:j=>f(j.target.value),className:"w-full px-4 py-3 text-base border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#BB5F5A] focus:border-transparent bg-background-container text-text-primary placeholder-text-secondary",placeholder:"https://www.facebook.com/"})}),O&&E.jsxs("div",{className:"mt-4 flex items-center gap-3 p-3 bg-background-container rounded-lg",children:[E.jsx("div",{className:"w-10 h-10 bg-[#1877F2] rounded-lg flex items-center justify-center",children:E.jsx(bt,{name:"global-line",className:"text-xl text-white"})}),E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-text-primary",children:O.name}),E.jsx("div",{className:"text-sm text-text-secondary",children:O.domain})]})]})]})]}),E.jsxs("div",{className:"flex justify-end gap-3 mt-6 flex-shrink-0",children:[E.jsx("button",{onClick:e,className:"px-6 py-2 border border-border rounded-lg text-text-secondary hover:bg-background-container hover:text-text-primary font-medium transition-colors",children:"Cancel"}),E.jsxs("button",{onClick:D,disabled:M===0,className:`px-6 py-2 rounded-lg font-medium transition-colors ${M>0?"bg-[#BB5F5A] text-white hover:bg-[#A54F4A]":"bg-background-container text-text-secondary cursor-not-allowed"}`,children:["Add Site (",M,")"]})]})]})})},WEt=({checked:n,onChange:e,disabled:t=!1})=>E.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[E.jsx("input",{type:"checkbox",checked:n,onChange:r=>e(r.target.checked),disabled:t,className:"sr-only peer"}),E.jsx("div",{className:"w-10 h-5 bg-background-container peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-[20px] peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-4 after:w-4 after:transition-all duration-300 peer-checked:bg-[#BB5F5A] peer-disabled:opacity-50 peer-disabled:cursor-not-allowed"})]}),YEt=({site:n,onToggle:e,onRemove:t})=>{const[r,i]=K.useState(!1),a=n.icon,o=()=>{i(!0),setTimeout(()=>{t()},300)};return E.jsxs("div",{className:`flex items-center justify-between p-4 bg-background-container rounded-lg transition-all duration-300 ease-in-out border border-border
        ${r?"opacity-0 scale-95 h-0 py-0 my-0 overflow-hidden":"opacity-100 scale-100"}
        ${n.isActive?"":"opacity-60"}`,children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:"mr-4 transition-all duration-200",children:E.jsx(AX,{domain:n.url,size:32,className:"shadow-sm",fallbackIcon:a})}),E.jsx("span",{className:"font-medium text-text-primary",children:n.name})]}),E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("button",{onClick:o,className:"p-1.5 text-text-secondary hover:text-red-500 transition-colors duration-200 hover:scale-110",title:"Remove site",children:E.jsx(bt,{name:"delete-bin-line",className:"w-5 h-5"})}),E.jsx(WEt,{checked:n.isActive,onChange:e})]})]})},KEt=({site:n,formatTime:e,color:t,percentage:r})=>{const i=t||n.backgroundColor,a=r!==void 0?r:n.percentage;return E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:"mr-3",children:E.jsx(AX,{domain:n.url,size:32,className:"shadow-sm",fallbackIcon:n.icon})}),E.jsxs("div",{children:[E.jsx("div",{className:"font-medium text-text-primary",children:n.name}),E.jsxs("div",{className:"text-xs text-text-secondary",children:[n.sessions," sessions"]})]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("div",{className:"font-medium text-text-primary",children:e(n.timeSpent)}),E.jsxs("div",{className:"text-xs text-text-secondary",children:[a.toFixed(1),"%"]})]})]}),E.jsx("div",{className:"w-full bg-background-container rounded-full h-1.5 overflow-hidden",children:E.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500 ease-out",style:{width:`${a}%`,backgroundColor:i}})})]})},XEt=({isBackingUp:n,lastBackupTime:e,backupError:t,onRetryBackup:r})=>{var m;const[i,a]=K.useState(null),{getSyncStatus:o,retryBackup:s}=Qd(),l=n!==void 0?n:i==null?void 0:i.isBackingUp,c=e!==void 0?e:i==null?void 0:i.lastBackupTime,u=t!==void 0?t:i==null?void 0:i.backupError;K.useEffect(()=>{if(n===void 0&&e===void 0&&t===void 0){const v=()=>{a(o())};v();const y=setInterval(v,5e3);return()=>clearInterval(y)}},[o,n,e,t]);const d=()=>l?"⏳":u?"❌":c?"✅":"🔄",h=()=>l?"Syncing...":u?`Error: ${u}`:c?`Last sync: ${new Date(c).toLocaleTimeString()}`:"No sync yet",f=()=>{r?r():s()};return E.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[E.jsx("span",{className:"text-lg",children:d()}),E.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:h()}),u&&E.jsx("button",{onClick:f,className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Retry"}),((m=i==null?void 0:i.circuitBreaker)==null?void 0:m.state)==="OPEN"&&E.jsxs("span",{className:"text-xs text-orange-500",children:["Cooling down... (",Math.ceil(i.circuitBreaker.timeUntilRetry/1e3),"s)"]})]})},ZEt=()=>{const{timeMetrics:n,siteUsage:e,blockedSites:t,dailyUsage:r,isExtensionConnected:i,isDeepFocusActive:a,totalSessionsCount:o,deepFocusSessions:s,loadDeepFocusSessions:l,subscribeToSessions:c,unsubscribeFromSessions:u,toggleBlockedSite:d,removeBlockedSite:h,addBlockedSite:f,loadBlockedSites:m,loadExtensionData:v,loadAllTimeExtensionData:y,blockSiteInExtension:w,unblockSiteInExtension:_,enableDeepFocus:S,disableDeepFocus:A,toggleDeepFocus:C,loadFocusStatus:D,activeSessionId:M,activeSessionDuration:P,initializeDailyBackup:O,isBackingUp:j,lastBackupTime:L,backupError:B,backupTodayData:$,loadHybridTimeRangeData:Y,isSessionPaused:q,autoSessionManagement:W,setAutoSessionManagement:X,recordOverrideSession:te,overrideSessions:re,loadOverrideSessions:z,comparisonData:oe,isLoadingComparison:le,comparisonError:ee,loadComparisonData:be}=Qd(),{workSessions:he}=qg(),{user:pe}=Rn(),{isLeftSidebarOpen:ct,toggleLeftSidebar:Be}=tc(),[Se,_e]=K.useState(!1),[me,fe]=K.useState(!1),[Ge,Ve]=K.useState(!1),nt=()=>{const Ce=new Date,Fe=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate()),Qe=new Date(Fe);Qe.setHours(0,0,0,0);const vt=new Date(Fe);return vt.setHours(23,59,59,999),{startDate:Qe,endDate:vt,rangeType:"today"}},[we,rt]=K.useState(nt()),[on,Mt]=K.useState(null),[kn,nr]=K.useState(null),[Le,Yt]=K.useState(!1),xn=$g(),Ut=vs(),Ae=K.useRef(null),je=K.useRef(null),tt=K.useRef(null),Et=async()=>{console.log("🔄 Resetting extension connection...");const{default:Ce}=await Fr(async()=>{const{default:Fe}=await Promise.resolve().then(()=>Gae);return{default:Fe}},void 0);Ce.resetCircuitBreaker(),await v(),console.log("✅ Extension connection reset complete")},[pt,Rr]=K.useState(null),[vn,Ur]=K.useState([]),[Li,un]=K.useState("unknown"),[dr,wi]=K.useState(!1),[ze,rr]=K.useState(0);K.useEffect(()=>{(async()=>{var Qe,vt;console.log("🔄 AUTO-RELOAD: Deep Focus page mounted/navigated - forcing fresh data load for today"),console.log("🔄 AUTO-RELOAD: Current location pathname:",Ut.pathname),console.log("📡 AUTO-RELOAD: Pre-loading fresh extension data to match manual selection behavior...");try{await v(),console.log("✅ AUTO-RELOAD: Fresh extension data pre-loaded successfully")}catch(ot){console.warn("⚠️ AUTO-RELOAD: Extension data pre-load failed, continuing with range update:",ot)}const Fe=nt();console.log("📅 AUTO-RELOAD: Setting fresh today range (matching manual selection):",{startDate:(Qe=Fe.startDate)==null?void 0:Qe.toISOString(),endDate:(vt=Fe.endDate)==null?void 0:vt.toISOString(),rangeType:Fe.rangeType,currentTime:new Date().toISOString()}),Rr(null),wi(!0),rt(Fe),rr(ot=>{const wt=ot+1;return console.log("🎯 AUTO-RELOAD: Page load trigger updated to force fresh data:",{oldTrigger:ot,newTrigger:wt,timestamp:new Date().toISOString()}),wt}),console.log("✅ AUTO-RELOAD: Complete sequence initiated - fresh today data will load (matching manual behavior)")})()},[Ut.pathname]),K.useEffect(()=>{var Ce,Fe;console.log("🔍 DEBUG: selectedRange state changed:",{rangeType:we.rangeType,startDate:(Ce=we.startDate)==null?void 0:Ce.toISOString(),endDate:(Fe=we.endDate)==null?void 0:Fe.toISOString(),startFormatted:we.startDate?Ji(we.startDate):null,endFormatted:we.endDate?Ji(we.endDate):null,todayForReference:new Date().toISOString().split("T")[0],pageLoadTrigger:ze})},[we,ze]),K.useEffect(()=>{(async()=>{if(!(pe!=null&&pe.uid)||!we.startDate||!we.endDate){console.log("🔥 Skipping Firebase data load - missing requirements:",{hasUser:!!(pe!=null&&pe.uid),hasStartDate:!!we.startDate,hasEndDate:!!we.endDate,rangeType:we.rangeType}),Ur([]);return}try{const Fe=Ji(we.startDate),Qe=Ji(we.endDate),vt=await jc.getUserData(pe.uid,Fe,Qe);console.log("🔥 Firebase data loaded:",{recordsFound:vt.length,dateRange:`${Fe} to ${Qe}`,sampleRecord:vt[0]});const ot=vt.map(wt=>({date:wt.date,onScreenTime:Math.round(wt.totalTime/(1e3*60))}));console.log("🔥 Converted Firebase daily data:",{totalDays:ot.length,totalTime:ot.reduce((wt,mt)=>wt+mt.onScreenTime,0),sampleDay:ot[0]}),Ur(ot)}catch(Fe){console.warn("⚠️ Failed to load Firebase data:",Fe),Ur([])}})()},[pe==null?void 0:pe.uid,we,jc]),K.useEffect(()=>{pe!=null&&pe.uid&&m(pe.uid)},[pe==null?void 0:pe.uid,m]);const ji=Ce=>{if(we.rangeType==="all time"||!we.startDate||!we.endDate)return!0;let Fe;if(Ce.includes("/")&&Ce.split("/").length===2){const[mt,Kt]=Ce.split("/"),Sn=new Date().getFullYear();Fe=new Date(Sn,parseInt(Kt)-1,parseInt(mt))}else{const mt=Ce.includes("T")?Ce.split("T")[0]:Ce,[Kt,Sn,sn]=mt.split("-").map(Number);Fe=new Date(Kt,Sn-1,sn)}const Qe=new Date(Fe.getFullYear(),Fe.getMonth(),Fe.getDate()),vt=new Date(we.startDate.getFullYear(),we.startDate.getMonth(),we.startDate.getDate()),ot=new Date(we.endDate.getFullYear(),we.endDate.getMonth(),we.endDate.getDate());return Qe>=vt&&Qe<=ot};K.useEffect(()=>{let Ce=!1;return(async()=>{var Qe,vt;if(!(pe!=null&&pe.uid)){console.log("🔄 Data loading waiting for user...");return}console.log("🔄 AUTO-RELOAD: Starting coordinated data load:",{rangeType:we.rangeType,pageLoadTrigger:ze,reason:ze>0?"AUTO-RELOAD: Page navigation triggered refresh":"Regular data loading",timestamp:new Date().toISOString(),isAutoReload:ze>0,pathname:Ut.pathname}),dr||wi(!0);try{if(we.rangeType==="all time"){console.log("🔍 DEBUG: All time selected - loading all extension data"),await y(),Ce||(e&&e.length>0?(console.log("✅ Using store data for all-time view"),Rr({siteUsage:e,dailyUsage:r.length>0?r:[],timeMetrics:n}),console.log("✅ Extension data set successfully for all-time:",{siteUsageCount:e.length,dailyUsageCount:r.length,timeMetrics:n,source:"store data for all-time"})):(console.log("⚠️ No store data available for all-time view, clearing extension data"),Rr(null)));return}if(we.rangeType==="today"){console.log("🔍 AUTO-RELOAD: Today selected - prioritizing real-time extension data",{isAutoReload:ze>0,pageLoadTrigger:ze,hasExistingStoreData:(e==null?void 0:e.length)>0,storeOnScreenTime:(n==null?void 0:n.onScreenTime)||0});try{if(ze>0?(console.log("📡 AUTO-RELOAD: Force loading fresh extension data (auto-reload detected)..."),await v()):(console.log("📡 Manual selection: Using existing extension data or loading if needed..."),(!e||e.length===0||n.onScreenTime===0)&&await v()),!Ce)if(e&&e.length>0&&n.onScreenTime>0){console.log("✅ AUTO-RELOAD: Using real-time extension data for today:",{onScreenTime:n.onScreenTime,siteCount:e.length,source:"real-time extension",isAutoReload:ze>0,loadTrigger:ze>0?"auto-reload-forced":"manual-or-conditional"});const Sn=new Date,sn=Ji(Sn),Xt=he.filter(ni=>ni.sessionType==="pomodoro"||ni.sessionType==="manual").filter(ni=>new Date(ni.date).toDateString()===Sn.toDateString()).reduce((ni,Lt)=>ni+(Lt.duration||0),0),jn=s.filter(ni=>ni.status==="completed"&&ni.duration).filter(ni=>new Date(ni.createdAt).toDateString()===Sn.toDateString()).reduce((ni,Lt)=>ni+(Lt.duration||0),0);Rr({timeMetrics:n,siteUsage:e,dailyUsage:[{date:sn,onScreenTime:n.onScreenTime,workingTime:Xt,deepFocusTime:jn}]}),console.log("✅ AUTO-RELOAD: Extension data set successfully for today (real-time):",{onScreenTime:n.onScreenTime,siteUsageCount:e.length,workingTime:Xt,deepFocusTime:jn,source:"real-time extension data",autoReloadCompleted:!0,isAutoReload:ze>0,freshDataConfirmed:n.onScreenTime>0&&e.length>0,timestamp:new Date().toISOString()}),ze>0&&console.log("🎯 AUTO-RELOAD SUCCESS: Fresh today data loaded automatically! On Screen Time:",(Lt=>{const ri=Math.floor(Lt/60),Bn=Lt%60;return ri===0?`${Bn}m`:Bn===0?`${ri}h`:`${ri}h ${Bn}m`})(n.onScreenTime),"| Sites:",e.length);return}else console.log("⚠️ AUTO-RELOAD: Extension data incomplete, falling back to hybrid data")}catch(Sn){console.warn("⚠️ AUTO-RELOAD: Real-time extension data failed, falling back to hybrid data:",Sn)}}if(!we.startDate||!we.endDate){console.log("🔍 DEBUG: No date range selected - clearing extension data"),Ce||Rr(null);return}const ot=Ji(we.startDate),wt=Ji(we.endDate);console.log("🔍 DEBUG: Loading coordinated data with exact dates (fallback for non-today or hybrid data):",{rangeType:we.rangeType,startDateStr:ot,endDateStr:wt,today:new Date().toISOString().split("T")[0]});const mt=await Y(ot,wt);if(Ce){console.log("🔄 Data loading cancelled, ignoring result");return}console.log("✅ Loaded hybrid data:",mt);const Kt=mt.timeMetrics.onScreenTime>0||mt.siteUsage.length>0;if(console.log("🔍 DEBUG: Hybrid data analysis:",{hasData:Kt,onScreenTime:mt.timeMetrics.onScreenTime,siteUsageCount:mt.siteUsage.length,hasDailyData:!!mt.dailyData,dailyDataKeys:mt.dailyData?Object.keys(mt.dailyData):[],rangeType:we.rangeType,dateRange:`${ot} to ${wt}`}),Kt&&mt.siteUsage.length>0){const sn=(mt.dailyData?Object.entries(mt.dailyData).map(([Xt,jn])=>({date:Xt,onScreenTime:Math.round(jn.totalTime/6e4),workingTime:0,deepFocusTime:0})).sort((Xt,jn)=>Xt.date.localeCompare(jn.date)):[]).map(Xt=>{const jn=new Date(Xt.date),ni=he.filter(ri=>ri.sessionType==="pomodoro"||ri.sessionType==="manual").filter(ri=>new Date(ri.date).toDateString()===jn.toDateString()).reduce((ri,Bn)=>ri+(Bn.duration||0),0),Lt=s.filter(ri=>ri.status==="completed"&&ri.duration).filter(ri=>new Date(ri.createdAt).toDateString()===jn.toDateString()).reduce((ri,Bn)=>ri+(Bn.duration||0),0);return{...Xt,workingTime:ni,deepFocusTime:Lt}});console.log("🔍 Enhanced daily breakdown with session data:",{totalDays:sn.length,totalOnScreenTime:sn.reduce((Xt,jn)=>Xt+jn.onScreenTime,0),totalWorkingTime:sn.reduce((Xt,jn)=>Xt+jn.workingTime,0),totalDeepFocusTime:sn.reduce((Xt,jn)=>Xt+jn.deepFocusTime,0),sampleDays:sn.slice(0,3)}),Rr({timeMetrics:mt.timeMetrics,siteUsage:mt.siteUsage,dailyUsage:sn}),console.log("✅ Extension data set successfully:",{timeMetrics:mt.timeMetrics,siteUsageCount:mt.siteUsage.length,dailyUsageCount:sn.length,rangeType:we.rangeType,source:"hybrid data with enhanced daily breakdown"})}else console.log("⚠️ No meaningful data found for date range, clearing extension data:",{hybridDataReceived:!!mt,onScreenTime:((Qe=mt==null?void 0:mt.timeMetrics)==null?void 0:Qe.onScreenTime)||0,siteUsageCount:((vt=mt==null?void 0:mt.siteUsage)==null?void 0:vt.length)||0,rangeType:we.rangeType,dateRange:`${ot} to ${wt}`}),Rr(null)}catch(ot){Ce||(console.error("❌ Failed to load coordinated data:",ot),console.log("⚠️ Falling back to clearing extension data...",{rangeType:we.rangeType,errorMessage:ot instanceof Error?ot.message:"Unknown error",dateRange:we.startDate&&we.endDate?`${Ji(we.startDate)} to ${Ji(we.endDate)}`:"No date range"}),Rr(null))}finally{Ce||(console.log("🔄 AUTO-RELOAD: Data loading completed, setting isLoadingDateRangeData to false",{isAutoReload:ze>0,pageLoadTrigger:ze,rangeType:we.rangeType,completedAt:new Date().toISOString()}),wi(!1),ze>0&&we.rangeType==="today"&&console.log("🎉 AUTO-RELOAD COMPLETE: Successfully loaded fresh today's data automatically!",{storeOnScreenTime:(n==null?void 0:n.onScreenTime)||0,storeSiteCount:(e==null?void 0:e.length)||0,hasExtensionData:!!pt,autoReloadWorking:!0}))}})(),()=>{Ce=!0}},[we,pe]),K.useEffect(()=>{var Qe,vt,ot;const Ce=async wt=>{try{console.log("📱 PAGE: Override session recorded globally:",wt.detail);const mt=we.startDate,Kt=we.endDate;console.log("🔄 PAGE: Reloading override sessions with date range:",{startDate:mt,endDate:Kt}),pe!=null&&pe.uid&&(await z(pe.uid,mt||void 0,Kt||void 0),console.log("🔄 PAGE: Reloaded override sessions after global recording"))}catch(mt){console.error("❌ PAGE: Failed to reload override sessions after global recording:",mt)}},Fe=async wt=>{var mt,Kt;try{const Sn=wt.data||wt;if((Sn==null?void 0:Sn.type)==="EXTENSION_STATUS"&&((mt=Sn==null?void 0:Sn.source)!=null&&mt.includes("extension"))){console.log("🔍 DEBUG: Extension status received:",Sn.payload),un(((Kt=Sn.payload)==null?void 0:Kt.status)||"unknown");return}(Sn==null?void 0:Sn.type)==="SET_USER_ID_RESPONSE"&&console.log("📧 Debug: SET_USER_ID response from extension:",Sn),(Sn==null?void 0:Sn.type)==="RECORD_OVERRIDE_SESSION_RESPONSE"&&console.log("📧 Debug: RECORD_OVERRIDE_SESSION response from extension:",Sn)}catch(Sn){console.error("Error handling extension message:",Sn)}};window.addEventListener("overrideSessionRecorded",Ce),window.addEventListener("message",Fe);try{typeof window.chrome<"u"&&((ot=(vt=(Qe=window.chrome)==null?void 0:Qe.runtime)==null?void 0:vt.onMessage)!=null&&ot.addListener)&&window.chrome.runtime.onMessage.addListener(Fe)}catch(wt){console.warn("Could not set up Chrome extension listener:",wt)}return()=>{var wt,mt,Kt;try{window.removeEventListener("overrideSessionRecorded",Ce),window.removeEventListener("message",Fe),typeof window.chrome<"u"&&((Kt=(mt=(wt=window.chrome)==null?void 0:wt.runtime)==null?void 0:mt.onMessage)!=null&&Kt.removeListener)&&window.chrome.runtime.onMessage.removeListener(Fe)}catch(Sn){console.warn("Error cleaning up extension listeners:",Sn)}}},[we,z,pe==null?void 0:pe.uid]);const Ln=K.useMemo(()=>{if(we.rangeType==="all time"||!we.startDate||!we.endDate)return he;const Ce=new Date(we.startDate);Ce.setHours(0,0,0,0);const Fe=new Date(we.endDate);return Fe.setHours(23,59,59,999),he.filter(Qe=>{const vt=new Date(Qe.date),ot=new Date(vt.getFullYear(),vt.getMonth(),vt.getDate()),wt=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate()),mt=new Date(Fe.getFullYear(),Fe.getMonth(),Fe.getDate());return ot>=wt&&ot<=mt})},[he,we]),Fi=K.useMemo(()=>{var vt,ot;if(we.rangeType==="all time")return console.log('🔍 Deep Focus Sessions: Using all sessions for "all time" range'),s;if(!we.startDate||!we.endDate)return console.log("🔍 Deep Focus Sessions: No date range specified, using all sessions"),s;const Ce=new Date(we.startDate);Ce.setHours(0,0,0,0);const Fe=new Date(we.endDate);Fe.setHours(23,59,59,999);const Qe=s.filter(wt=>{const mt=new Date(wt.createdAt),Kt=new Date(mt.getFullYear(),mt.getMonth(),mt.getDate()),Sn=new Date(Ce.getFullYear(),Ce.getMonth(),Ce.getDate()),sn=new Date(Fe.getFullYear(),Fe.getMonth(),Fe.getDate());return Kt>=Sn&&Kt<=sn});return console.log("🔍 Deep Focus Sessions: Filtered by date range:",{totalSessions:s.length,filteredSessions:Qe.length,rangeType:we.rangeType,startDate:(vt=we.startDate)==null?void 0:vt.toISOString(),endDate:(ot=we.endDate)==null?void 0:ot.toISOString(),sampleFiltered:Qe.slice(0,3).map(wt=>({id:wt.id,createdAt:wt.createdAt,duration:wt.duration,status:wt.status}))}),Qe},[s,we]),Co=K.useMemo(()=>{var Ce,Fe,Qe,vt;if(console.log("🔍 filteredDailyUsage calculation:",{hasExtensionData:!!pt,extensionDailyLength:((Ce=pt==null?void 0:pt.dailyUsage)==null?void 0:Ce.length)||0,extensionSiteUsageLength:((Fe=pt==null?void 0:pt.siteUsage)==null?void 0:Fe.length)||0,storeDailyLength:(r==null?void 0:r.length)||0,rangeType:we.rangeType,startDate:(Qe=we.startDate)==null?void 0:Qe.toISOString(),endDate:(vt=we.endDate)==null?void 0:vt.toISOString(),firebaseDailyDataLength:(vn==null?void 0:vn.length)||0,isLoadingDateRangeData:dr}),dr&&we.rangeType!=="all time")return console.log("🔄 Loading date range data, showing empty daily usage to prevent stale data"),[];if(pt!=null&&pt.dailyUsage&&pt.dailyUsage.length>0)return console.log("✅ Using extension daily usage data:",{totalDays:pt.dailyUsage.length,totalOnScreenTime:pt.dailyUsage.reduce((ot,wt)=>ot+wt.onScreenTime,0),totalWorkingTime:pt.dailyUsage.reduce((ot,wt)=>ot+wt.workingTime,0),totalDeepFocusTime:pt.dailyUsage.reduce((ot,wt)=>ot+wt.deepFocusTime,0),sampleDays:pt.dailyUsage.slice(0,3),source:we.rangeType==="today"?"real-time extension (prioritized for today)":"extension data",rangeType:we.rangeType}),pt.dailyUsage;if(pt!=null&&pt.siteUsage&&pt.siteUsage.length>0){const ot=pt.siteUsage.reduce((Xt,jn)=>Xt+jn.timeSpent,0),wt=Ln.filter(Xt=>Xt.sessionType==="pomodoro"||Xt.sessionType==="manual"),mt=wt.reduce((Xt,jn)=>Xt+(jn.duration||0),0),Kt=Fi.filter(Xt=>Xt.status==="completed"&&Xt.duration).reduce((Xt,jn)=>Xt+(jn.duration||0),0);console.log("✅ FIXED - Using filtered sessions (same as summary cards):",{filteredWorkSessionsCount:Ln.length,workSessionsForCalculationCount:wt.length,filteredDeepFocusSessionsCount:Fi.length,realWorkingTime:mt,realDeepFocusTime:Kt,source:"client-side filtered sessions (CONSISTENT APPROACH)",shouldMatchSummaryCards:!0,efficiency:"JavaScript filtering applied for date range consistency!"}),console.log("🚀 Using CONSISTENT client-side filtered metrics for chart:",{onScreenTime:ot,realWorkingTime:mt,realDeepFocusTime:Kt,approach:"client-side filtering (CONSISTENT)",benefit:"Date range filtering applied for accurate metrics"});const sn=(()=>{const Xt=[];if(we.rangeType==="today"){const Bn=Ji(new Date);return Xt.push({date:Bn,onScreenTime:ot,workingTime:mt,deepFocusTime:Kt}),Xt}const jn=we.startDate||new Date,ni=we.endDate||new Date,Lt={};if(he.filter(Bn=>Bn.sessionType==="pomodoro"||Bn.sessionType==="manual").forEach(Bn=>{const _a=new Date(Bn.date);if(_a>=jn&&_a<=ni){const $i=Ji(_a);Lt[$i]||(Lt[$i]={workingTime:0,deepFocusTime:0,onScreenTime:0}),Lt[$i].workingTime+=Bn.duration||0}}),Fi.filter(Bn=>Bn.status==="completed"&&Bn.duration).forEach(Bn=>{const _a=new Date(Bn.createdAt),$i=Ji(_a);Lt[$i]||(Lt[$i]={workingTime:0,deepFocusTime:0,onScreenTime:0}),Lt[$i].deepFocusTime+=Bn.duration||0}),vn.length>0)vn.forEach(Bn=>{Lt[Bn.date]||(Lt[Bn.date]={workingTime:0,deepFocusTime:0,onScreenTime:0}),Lt[Bn.date].onScreenTime=Bn.onScreenTime});else{const Bn=Math.ceil((ni.getTime()-jn.getTime())/864e5);console.log("📊 Using aggregated data fallback for chart:",{totalOnScreenTime:ot,totalDays:Bn,source:"filteredSiteUsage (no Firebase daily data)",reason:"firebaseDailyData is empty"});const _a=Array.from({length:Bn},()=>.7+Math.random()*.6),$i=_a.reduce((Qt,Pa)=>Qt+Pa,0);for(let Qt=0;Qt<Bn;Qt++){const Pa=new Date(jn);Pa.setDate(jn.getDate()+Qt);const ph=Ji(Pa);Lt[ph]||(Lt[ph]={workingTime:0,deepFocusTime:0,onScreenTime:0});const sa=_a[Qt],ra=Math.round(ot*sa/$i);Lt[ph].onScreenTime=ra}}const ri=Math.ceil((ni.getTime()-jn.getTime())/(1e3*60*60*24));for(let Bn=0;Bn<ri;Bn++){const _a=new Date(jn);_a.setDate(jn.getDate()+Bn);const $i=Ji(_a),Qt=Lt[$i];Xt.push({date:$i,onScreenTime:(Qt==null?void 0:Qt.onScreenTime)||0,workingTime:(Qt==null?void 0:Qt.workingTime)||0,deepFocusTime:(Qt==null?void 0:Qt.deepFocusTime)||0})}return Xt})();return console.log("📊 Generated daily breakdown for chart:",{daysGenerated:sn.length,totalOnScreenTime:sn.reduce((Xt,jn)=>Xt+jn.onScreenTime,0),sampleDays:sn.slice(0,3),usedFirebaseData:vn.length>0,firebaseDataLength:vn.length}),sn}if(we.rangeType==="all time"){const ot=(pt==null?void 0:pt.dailyUsage)||r;return console.log("✅ Using data for all time:",ot),ot}if(we.startDate&&we.endDate){const ot=r.filter(wt=>ji(wt.date));return console.log("✅ Using filtered store data:",ot.length,"days from",r.length),console.log("📅 Filtered data:",ot),ot}return console.log("✅ Using store data (fallback):",r),r},[pt,r,we,Ln,Fi,vn,dr]),ae=K.useMemo(()=>{var Ce,Fe,Qe;return console.log("🔍 filteredSiteUsage calculation:",{hasExtensionData:!!pt,extensionSiteUsageLength:((Ce=pt==null?void 0:pt.siteUsage)==null?void 0:Ce.length)||0,storeSiteUsageLength:(e==null?void 0:e.length)||0,rangeType:we.rangeType,isLoadingDateRangeData:dr,startDate:(Fe=we.startDate)==null?void 0:Fe.toISOString(),endDate:(Qe=we.endDate)==null?void 0:Qe.toISOString()}),pt&&pt.siteUsage&&pt.siteUsage.length>0?(console.log("✅ Using extension data for site usage:",{siteCount:pt.siteUsage.length,totalTime:pt.siteUsage.reduce((vt,ot)=>vt+ot.timeSpent,0),source:we.rangeType==="today"?"real-time extension (prioritized)":"extension data",rangeType:we.rangeType}),pt.siteUsage):we.rangeType==="all time"?(console.log("✅ Using store data for all-time site usage:",e.length,"sites"),e):dr&&we.rangeType!=="all time"?(console.log("🔄 Loading date range data, showing empty site usage to prevent stale data"),[]):e&&e.length>0?(console.log("⚠️ No extension data for date range, using store data as fallback:",{siteCount:e.length,totalTime:e.reduce((vt,ot)=>vt+ot.timeSpent,0),note:"May not be perfectly filtered for date range"}),e):(console.log("❌ No site usage data available from any source"),[])},[pt,e,we,dr]),ce=K.useMemo(()=>{const Ce=Fi.filter(Fe=>Fe.duration).reduce((Fe,Qe)=>Fe+(Qe.duration||0),0);return sSe.logCurrentState(Fi,we),console.log("🎯 Database-filtered Deep Focus Time:",Ce,"minutes (no JS filtering needed)"),Ce},[Fi]),ge=K.useMemo(()=>Co.reduce((Ce,Fe)=>Ce+Fe.onScreenTime,0),[Co]),Me=K.useMemo(()=>{var ot,wt;const Ce=Ln.filter(mt=>mt.sessionType==="pomodoro"||mt.sessionType==="manual"),Fe=Ce.reduce((mt,Kt)=>mt+(Kt.duration||0),0),Qe=ae.reduce((mt,Kt)=>mt+Kt.timeSpent,0);console.log("🚀 Deep Focus Page - SMART Time Metrics Calculation:",{totalWorkSessions:he.length,filteredWorkSessions:Ln.length,workSessionsForCalculation:Ce.length,totalWorkingTime:Fe,filteredDeepFocusTime:ce,onScreenTimeFromSites:Qe,siteCount:ae.length,totalUsageTime:ge,selectedRange:we.rangeType,isLoadingDateRangeData:dr,smartApproach:"Database-level filtering eliminates JS session checks",efficiency:"No more individual session date verification needed",dateRange:{start:(ot=we.startDate)==null?void 0:ot.toISOString(),end:(wt=we.endDate)==null?void 0:wt.toISOString()}});const vt=re.reduce((mt,Kt)=>mt+Kt.duration,0);return console.log("🎯 Override Time Calculation:",{sessionsCount:re.length,totalTime:vt,dateRange:we.rangeType}),{onScreenTime:Qe,workingTime:Fe,deepFocusTime:ce,overrideTime:vt}},[ae,Ln,ce,we,re,ge,dr]);K.useEffect(()=>{console.log("🔧 Deep Focus: Sidebar state changed",{isLeftSidebarOpen:ct,timestamp:new Date().toISOString()}),requestAnimationFrame(()=>{const Ce=document.getElementById("sidebar");Ce&&(console.log("🔧 Deep Focus: Sidebar element found",{currentWidth:Ce.style.width,className:Ce.className,isOpen:ct}),Ce.style.display="flex",ct?(Ce.style.width="16rem",Ce.classList.remove("w-0"),Ce.classList.add("w-64")):(Ce.style.width="0px",Ce.classList.remove("w-64"),Ce.classList.add("w-0")))})},[ct]),K.useEffect(()=>{O()},[O]),K.useEffect(()=>{if(pe!=null&&pe.uid){console.log("🔍 Loading Deep Focus sessions for user:",pe.uid),console.log("🔍 Selected range:",we);const Ce=we.rangeType==="all time"?void 0:we.startDate||void 0,Fe=we.rangeType==="all time"?void 0:we.endDate||void 0;console.log("🔍 Date filters:",{startDate:Ce,endDate:Fe}),l(pe.uid,Ce,Fe),c(pe.uid)}else console.log("❌ No user available, user object:",pe);return()=>{console.log("DeepFocusPage: Cleaning up session subscription"),u()}},[pe==null?void 0:pe.uid,we,l,c,u]),K.useEffect(()=>{if(pe!=null&&pe.uid){const Ce=we.rangeType==="all time"?void 0:we.startDate||void 0,Fe=we.rangeType==="all time"?void 0:we.endDate||void 0;console.log("🔄 Loading override sessions for range:",we.rangeType,{startDate:Ce,endDate:Fe}),z(pe.uid,Ce,Fe)}},[pe==null?void 0:pe.uid,we,z]),K.useEffect(()=>{pe!=null&&pe.uid&&pet(we.rangeType)&&(console.log("🔄 Loading comparison data for range:",we.rangeType),be(we))},[pe==null?void 0:pe.uid,we,be]),K.useEffect(()=>{const Ce=async()=>{try{const Fe=[...t.map(Qe=>Qe.url),...ae.map(Qe=>Qe.url)];await Promise.all([vl.preloadFavicons(Fe,32),vl.preloadFavicons(Fe,40)]),console.log("Favicons preloaded for",Fe.length,"domains")}catch(Fe){console.warn("Failed to preload some favicons:",Fe)}};(t.length>0||ae.length>0)&&Ce()},[t,ae]),K.useEffect(()=>{const Ce=Fe=>{if(Ae.current&&!Ae.current.contains(Fe.target)){if(fe(!1),tt.current&&tt.current.isOpen)return;Ve(!1)}};return document.addEventListener("mousedown",Ce),()=>{document.removeEventListener("mousedown",Ce)}},[]),K.useEffect(()=>{if(Ge&&je.current&&!tt.current){Yt(!0);const Ce=Ba(je.current,{mode:"range",dateFormat:"M d, Y",maxDate:new Date,defaultDate:[on,kn].filter(Boolean),onChange:function(Fe){if(Fe.length===2)if(Math.ceil((Fe[1].getTime()-Fe[0].getTime())/864e5)>365){const vt=new Date(Fe[0]);vt.setDate(vt.getDate()+364),Ce.setDate([Fe[0],vt])}else Mt(Fe[0]),nr(Fe[1]);else Fe.length===1&&(Mt(Fe[0]),nr(null))},onClose:function(){if(Le){Yt(!1);return}}});tt.current=Ce,Ce.open()}return()=>{!Ge&&tt.current&&(tt.current.destroy(),tt.current=null)}},[Ge,Le]);const it=async Ce=>{const Fe=t.find(Qe=>Qe.id===Ce);if(Fe){await d(Ce);try{Fe.isActive?await _(Fe.url):await w(Fe.url)}catch(Qe){console.error("Failed to sync with extension:",Qe)}}},xt=async Ce=>{const Fe=t.find(Qe=>Qe.id===Ce);if(Fe){await h(Ce);try{await _(Fe.url)}catch(Qe){console.error("Failed to unblock site in extension:",Qe)}}},Pt=async Ce=>{for(const Fe of Ce){await f(Fe);try{await w(Fe.url)}catch(Qe){console.error("Failed to block site in extension:",Qe)}}},gt=Ce=>Ce.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Nt=Ce=>{const Fe=new Date,Qe=new Date(Fe.getFullYear(),Fe.getMonth(),Fe.getDate()),vt=new Date(Qe);vt.setHours(23,59,59,999);const ot=new Date(Qe);ot.setHours(0,0,0,0);let wt="today";switch(console.log("🔍 DEBUG: Date range selection started:",{range:Ce,systemDate:new Date().toISOString(),systemDateLocal:new Date().toLocaleDateString(),todayNormalized:Qe.toISOString(),initialEnd:vt.toISOString(),initialStart:ot.toISOString()}),Ce){case"Today":wt="today",console.log("🔍 DEBUG: Today range created:",{startDate:ot.toISOString(),startDateLocal:ot.toLocaleDateString(),endDate:vt.toISOString(),endDateLocal:vt.toLocaleDateString(),startFormatted:Ji(ot),endFormatted:Ji(vt)}),rt({startDate:ot,endDate:vt,rangeType:wt});break;case"Yesterday":const mt=new Date(Qe);mt.setDate(Qe.getDate()-1);const Kt=new Date(mt);Kt.setHours(0,0,0,0);const Sn=new Date(mt);Sn.setHours(23,59,59,999),wt="yesterday",rt({startDate:Kt,endDate:Sn,rangeType:wt});break;case"Last 7 Days":const sn=new Date(Qe);sn.setDate(Qe.getDate()-6),sn.setHours(0,0,0,0),wt="last 7 days",rt({startDate:sn,endDate:vt,rangeType:wt});break;case"Last 30 Days":const Xt=new Date(Qe);Xt.setDate(Qe.getDate()-29),Xt.setHours(0,0,0,0),wt="last 30 days",rt({startDate:Xt,endDate:vt,rangeType:wt});break;case"Custom Range":Ve(!0),fe(!1);return;default:wt="all time",rt({startDate:null,endDate:null,rangeType:wt})}fe(!1)},Tt=()=>{if(on&&kn){const Ce=new Date;if(Ce.setHours(23,59,59,999),on>Ce||kn>Ce){console.warn("Cannot select future dates for productivity analysis");return}const Fe=new Date(on);Fe.setHours(0,0,0,0);const Qe=new Date(kn);if(Qe.setHours(23,59,59,999),rt({startDate:Fe,endDate:Qe,rangeType:"custom"}),Ve(!1),tt.current){try{tt.current.destroy()}catch(vt){console.warn("Error destroying date picker:",vt)}tt.current=null}}},qt=()=>{switch(we.rangeType){case"today":return"Today";case"yesterday":return"Yesterday";case"last 7 days":return"Last 7 days";case"last 30 days":return"Last 30 days";case"custom":return we.startDate&&we.endDate?`${gt(we.startDate)} - ${gt(we.endDate)}`:"Custom Range";default:return"All time"}},Hn=Ce=>{const Fe=Math.floor(Ce/60),Qe=Ce%60;return Fe===0?`${Qe}m`:Qe===0?`${Fe}h`:`${Fe}h ${Qe}m`},di=Ce=>{if(!oe||we.rangeType==="all time")return{label:"All time data",color:"text-gray-500",icon:"—"};const Fe=oe.current[Ce],Qe=oe.previous[Ce];let vt="previous period";switch(we.rangeType){case"today":vt="yesterday";break;case"last 7 days":vt="previous week";break;case"last 30 days":vt="previous month";break;default:vt="previous period"}return fet(Fe,Qe,vt)};return K.useEffect(()=>{(async()=>{console.log("📡 IMMEDIATE extension status check...");try{const vt=await Fr(()=>Promise.resolve().then(()=>Gae),void 0).then(wt=>wt.default);if(!vt.isExtensionInstalled()){un("offline"),console.log("📱 Extension not installed");return}await Promise.race([vt.testConnection(),new Promise(wt=>setTimeout(()=>wt(!1),1e3))])?(un("online"),console.log("✅ Extension IMMEDIATELY available")):(un("offline"),console.log("⚠️ Extension not responding immediately"))}catch(vt){un("offline"),console.log("❌ Extension status check failed:",vt)}})();const Fe=vt=>{var ot,wt;((ot=vt.data)==null?void 0:ot.type)==="EXTENSION_PONG"&&((wt=vt.data)==null?void 0:wt.source)==="focus-time-tracker-extension"&&(console.log("✅ Extension responded to ping - marking as online"),un("online"))};window.addEventListener("message",Fe);const Qe=setTimeout(()=>{un(vt=>vt==="unknown"?(console.log("⚠️ Extension status timeout - marking as offline"),"offline"):vt)},3e3);return setTimeout(()=>{console.log("📡 Sending extension ping (backup check)..."),window.postMessage({type:"EXTENSION_PING",payload:{timestamp:Date.now()},source:"make10000hours-webapp"},"*")},100),()=>{clearTimeout(Qe),window.removeEventListener("message",Fe)}},[]),E.jsxs("div",{className:"deep-focus-page-container flex h-screen bg-background-primary dark:bg-[#141414]",children:[E.jsx(ET,{}),E.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[E.jsxs("div",{className:"h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-all duration-500 relative",children:[E.jsxs("div",{className:"flex items-center",children:[!ct&&E.jsx("button",{onClick:Be,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:E.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:E.jsx(bt,{name:"menu-line",size:20})})}),E.jsx("div",{className:`text-lg font-semibold transition-all duration-500 ${a?"bg-gradient-to-r from-[rgb(187,95,90)] via-[rgb(236,72,153)] to-[rgb(251,146,60)] bg-clip-text text-transparent font-bold":"text-text-primary"}`,children:"Deep Focus"}),E.jsx("div",{className:"ml-4 flex items-center gap-4",children:E.jsx("div",{className:"flex flex-col",children:E.jsxs("label",{className:"relative inline-flex items-center cursor-pointer group",children:[E.jsx("input",{type:"checkbox",className:"sr-only peer",checked:a,onChange:async Ce=>{console.log("Deep Focus switch toggled:",Ce.target.checked,"User:",pe);try{Ce.target.checked?(console.log("🟢 Enabling Deep Focus..."),await S("web"),console.log("✅ Deep Focus enabled successfully")):(console.log("🔴 Disabling Deep Focus..."),await A(),console.log("✅ Deep Focus disabled successfully"))}catch(Fe){console.error("❌ Failed to toggle Deep Focus:",Fe),setTimeout(()=>{const Qe=Ce.target;Qe&&(Qe.checked=!Ce.target.checked)},100),alert(`Failed to ${Ce.target.checked?"enable":"disable"} Deep Focus: ${Fe instanceof Error?Fe.message:"Unknown error"}`)}}}),E.jsx("div",{className:`w-[120px] h-[33px] flex items-center rounded-full transition-all duration-500 relative ${a?"bg-gradient-to-r from-[rgba(187,95,90,0.9)] via-[rgba(236,72,153,0.9)] to-[rgba(251,146,60,0.9)] shadow-[0_0_15px_rgba(236,72,153,0.3)] border border-white/20 justify-start pl-[10.5px]":"bg-gray-100/80 border-0 justify-end pr-[10.5px]"}`,children:E.jsx("span",{className:`text-sm font-medium transition-colors duration-500 relative z-10 whitespace-nowrap ${a?"text-white font-semibold [text-shadow:0_0_12px_rgba(255,255,255,0.5)]":"text-gray-600 font-semibold"}`,children:a?"Deep Focus":"Focus Off"})}),E.jsx("div",{className:`absolute w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-500 ${a?"left-[calc(100%-27px)] shadow-[0_6px_20px_rgba(187,95,90,0.2)]":"left-1.5 shadow-[0_2px_8px_rgba(0,0,0,0.1)]"}`})]})})})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsxs("div",{className:"relative",ref:Ae,children:[E.jsxs("button",{className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container flex items-center space-x-2",onClick:()=>{if(fe(!me),Ge&&(Ve(!1),tt.current)){try{tt.current.destroy()}catch(Ce){console.warn("Error destroying date picker:",Ce)}tt.current=null}},children:[E.jsx("span",{children:qt()}),E.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:E.jsx(bt,{name:"arrow-down-s-line",className:"w-4 h-4"})})]}),me&&E.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-background-secondary rounded-lg shadow-lg border border-border py-2 z-10",children:[E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>Nt("Today"),children:"Today"}),E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>Nt("Yesterday"),children:"Yesterday"}),E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>Nt("Last 7 Days"),children:"Last 7 days"}),E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>Nt("Last 30 Days"),children:"Last 30 days"}),E.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container flex items-center justify-between",onClick:()=>Nt("Custom Range"),children:[E.jsx("span",{children:"Time range"}),E.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:E.jsx(bt,{name:"calendar-line",className:"w-4 h-4"})})]}),E.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>Nt("All time"),children:"All time"})]}),Ge&&E.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-background-secondary rounded-lg shadow-lg border border-border p-4 z-10",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Select date range"}),E.jsx("button",{className:"text-text-secondary hover:text-text-primary",onClick:()=>{if(Ve(!1),tt.current){try{tt.current.destroy()}catch(Ce){console.warn("Error destroying date picker:",Ce)}tt.current=null}},children:E.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:E.jsx(bt,{name:"close-line",className:"w-4 h-4"})})})]}),E.jsx("div",{children:E.jsx("input",{ref:je,type:"text",id:"date-range-input",name:"date-range",className:"w-full px-3 py-1.5 text-sm border border-border rounded-button focus:outline-none focus:border-primary bg-background-primary text-text-primary",placeholder:"Select date range",readOnly:!0})}),E.jsxs("div",{className:"mt-2 text-xs text-text-secondary",children:[on&&!kn?"Select end date":on?"":"Select start date",(!on||!kn)&&E.jsx("div",{className:"text-text-secondary mt-1",children:"Note: Future dates cannot be selected for productivity analysis"})]}),E.jsx("div",{className:"mt-4 flex justify-end",children:E.jsx("button",{className:"px-4 py-1.5 text-sm font-medium bg-primary border border-primary rounded-button text-white hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Tt,disabled:!on||!kn,children:"Apply"})})]})]}),E.jsx(mi,{text:"Pomodoro Timer",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Ut.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Ut.pathname==="/pomodoro"?void 0:()=>xn("/pomodoro"),"aria-label":Ut.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"timer-line",size:20})})})}),E.jsx(mi,{text:"Task management",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Ut.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Ut.pathname==="/projects"?void 0:()=>xn("/projects"),"aria-label":Ut.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"task-line",size:20})})})}),E.jsx(mi,{text:"Productivity Insights",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Ut.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Ut.pathname==="/dashboard"?void 0:()=>xn("/dashboard"),"aria-label":Ut.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"dashboard-line",size:20})})})}),E.jsx(mi,{text:"Calendar",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Ut.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Ut.pathname==="/calendar"?void 0:()=>xn("/calendar"),"aria-label":Ut.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"calendar-line",size:20})})})}),E.jsx(mi,{text:"Deep Focus",children:E.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Ut.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Ut.pathname==="/deep-focus"?void 0:()=>xn("/deep-focus"),"aria-label":Ut.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:E.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:E.jsx(bt,{name:"brain-line",size:20})})})})]})]}),E.jsxs("main",{className:"flex-1 p-6 flex gap-6 overflow-y-auto relative",children:[dr&&we.rangeType!=="all time"&&E.jsx("div",{className:"absolute inset-0 bg-background-primary/50 flex items-center justify-center z-10",children:E.jsx("div",{className:"bg-background-secondary rounded-lg p-6 shadow-lg border border-border",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"}),E.jsx("span",{className:"text-text-primary font-medium",children:ze>0&&we.rangeType==="today"?"Refreshing today's data...":`Loading ${qt().toLowerCase()} data...`})]})})}),E.jsxs("div",{className:"w-2/3 space-y-6",children:[E.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"On Screen Time",value:Me.onScreenTime,metricKey:"onScreenTime",icon:"computer-line",iconColor:"text-blue-500",iconBg:"bg-blue-50",valueColor:"text-blue-500",hoverBorder:"hover:border-blue-100"},{label:"Working Time",value:Me.workingTime,metricKey:"workingTime",icon:"timer-line",iconColor:"text-green-500",iconBg:"bg-green-50",valueColor:"text-green-500",hoverBorder:"hover:border-green-100"},{label:"Deep Focus Time",value:Me.deepFocusTime,metricKey:"deepFocusTime",icon:"focus-3-line",iconColor:"text-red-500",iconBg:"bg-red-50",valueColor:"text-red-500",hoverBorder:"hover:border-red-100",isDeepFocusTime:!0},{label:"Override Time",value:Me.overrideTime,metricKey:"overrideTime",icon:"time-line",iconColor:"text-orange-500",iconBg:"bg-orange-50",valueColor:"text-orange-500",hoverBorder:"hover:border-orange-100"}].map((Ce,Fe)=>{const Qe=di(Ce.metricKey),vt=ot=>{switch(ot){case"On Screen Time":return"Total time spent on all websites";case"Working Time":return"Total time in active Pomodoro sessions";case"Deep Focus Time":return"Total time with Deep Focus mode enabled";case"Override Time":return"Total time spent overriding blocked websites";default:return ot}};return E.jsxs("div",{className:`bg-background-secondary p-6 rounded-lg border border-border ${Ce.hoverBorder} transition-all duration-300 group`,children:[E.jsxs("div",{className:"flex justify-between items-start mb-3",children:[E.jsx("div",{className:`w-10 h-10 ${Ce.iconBg} rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300`,children:E.jsx(bt,{name:Ce.icon,className:`text-xl ${Ce.iconColor}`,size:20})}),E.jsx(mi,{text:vt(Ce.label),placement:"bottom",children:E.jsx("button",{className:"text-text-secondary hover:text-text-primary opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:E.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:E.jsx(bt,{name:"information-line",className:"w-4 h-4"})})})})]}),E.jsx("h3",{className:"text-sm text-text-secondary mb-1",children:Ce.label}),E.jsx("div",{className:`text-2xl font-semibold ${Ce.valueColor}`,children:Hn(Ce.value)}),E.jsxs("div",{className:`flex items-center mt-3 text-xs font-medium ${Qe.color}`,children:[E.jsx("span",{children:Qe.label}),le&&E.jsx("div",{className:"ml-2 animate-spin rounded-full h-3 w-3 border-b border-gray-400"})]})]},Fe)})}),E.jsxs("div",{className:"bg-background-secondary rounded-lg p-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsxs("div",{className:"text-sm font-medium text-text-primary",children:["Usage Time: ",E.jsx("span",{className:"text-text-secondary",children:Hn(ge)})]}),E.jsx("div",{className:"flex space-x-2",children:E.jsx("button",{className:"p-1 text-text-secondary hover:text-text-primary transition-colors duration-200",children:E.jsx(bt,{name:"more-2-fill",className:"w-5 h-5"})})})]}),E.jsx("div",{className:`w-full transition-all duration-500 ${ct?"h-72":"h-80"}`,children:E.jsx(VEt,{data:Co})})]}),E.jsxs("div",{className:"bg-background-secondary rounded-lg p-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("h2",{className:"text-lg font-medium text-text-primary",children:"BLOCKED"}),E.jsxs("div",{className:"flex items-center gap-2",style:{display:"none"},children:[E.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${i?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[E.jsx("div",{className:`w-2 h-2 rounded-full ${i?"bg-green-500":"bg-yellow-500"}`}),i?"Extension Connected":"Extension Offline",!i&&E.jsx("button",{onClick:Et,className:"ml-2 px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reset"})]}),E.jsx("button",{onClick:()=>{v()},className:"p-1 text-text-secondary hover:text-text-primary transition-colors duration-200",title:"Refresh extension data",children:E.jsx(bt,{name:"refresh-line",className:"w-4 h-4"})}),E.jsx("div",{className:"border-l border-border pl-2",children:E.jsx(XEt,{isBackingUp:j,lastBackupTime:L,backupError:B,onRetryBackup:$})}),(pe==null?void 0:pe.uid)&&E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:async()=>{try{if(console.log("🧪 Quick override test..."),pe!=null&&pe.uid){const Ce=await lSe(pe.uid);Ce.success&&(console.log("✅ Quick test completed:",Ce),await z(pe.uid,we.startDate||void 0,we.endDate||void 0))}}catch(Ce){console.error("❌ Quick test failed:",Ce)}},className:"p-1 text-text-secondary hover:text-text-primary transition-colors duration-200",title:"Quick Override Test (simple test)",style:{display:"none"},children:E.jsx(bt,{name:"play-line",className:"w-4 h-4"})}),!1,E.jsx("button",{onClick:async()=>{try{if(console.log("🔧 Fixing blocked sites icons..."),pe!=null&&pe.uid){const{fixBlockedSitesIcons:Ce}=await Fr(async()=>{const{fixBlockedSitesIcons:Qe}=await import("./fixBlockedSitesIcons-DeE8RcfO.js");return{fixBlockedSitesIcons:Qe}},[]),Fe=await Ce(pe.uid);console.log("✅ Icon fix completed:",Fe,"sites fixed"),await m(pe.uid),alert(`Fixed ${Fe} blocked sites with proper icons!`)}}catch(Ce){console.error("❌ Failed to fix icons:",Ce),alert("Failed to fix icons. Check console for details.")}},className:"p-1 text-orange-500 hover:text-orange-600 transition-colors duration-200",title:"Fix Missing Icons (one-time migration)",style:{display:"none"},children:E.jsx(bt,{name:"tools-line",className:"w-4 h-4"})})]})]})]}),E.jsx("button",{onClick:()=>_e(!0),className:"p-2 bg-[#BB5F5A] text-white rounded-full hover:bg-opacity-90 transition-all duration-200 hover:scale-105",children:E.jsx(bt,{name:"add-line",className:"w-5 h-5"})})]}),E.jsx("div",{className:"space-y-4",children:t.map(Ce=>E.jsx(YEt,{site:Ce,onToggle:()=>it(Ce.id),onRemove:()=>xt(Ce.id)},Ce.id))})]})]}),E.jsx("div",{className:"w-1/3 space-y-6",children:E.jsxs("div",{className:"bg-background-secondary rounded-lg",children:[E.jsx("h2",{className:"text-lg font-medium mb-6 text-text-primary p-6 pb-0",children:"Your Usage"}),E.jsxs("div",{className:"w-full h-48 mb-4",children:[ze>0&&(console.log("🥧 Auto-Reload Pie Chart Update:",{hasData:ae.length>0,siteCount:ae.length,totalTime:ae.reduce((Ce,Fe)=>Ce+Fe.timeSpent,0),status:"Auto-reload data applied to pie chart"}),null),E.jsx(zEt,{data:ae},`pie-chart-${ze}-${we.rangeType}`)]}),E.jsx("div",{className:"space-y-4 px-6 pb-6",children:ae.map((Ce,Fe)=>{const Qe=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de"],vt=w_e(Ce.url||Ce.name),ot=Fe<5?Qe[Fe]:"#9CA3AF",wt=b_e(vt,ot),mt=ae.reduce((Sn,sn)=>Sn+sn.timeSpent,0),Kt=mt>0?Ce.timeSpent/mt*100:0;return E.jsx(KEt,{site:Ce,formatTime:Hn,color:wt,percentage:Kt},Ce.id)})})]})})]})]}),E.jsx(GEt,{isOpen:Se,onClose:()=>_e(!1),onAddSites:Pt})]})},QEt=({title:n="Loading",subtitle:e="Please wait...",variant:t="full"})=>t==="inline"?E.jsxs("div",{className:"flex items-center justify-center space-x-3 p-4",children:[E.jsx("div",{className:"w-32 h-1 bg-gray-200 rounded-full overflow-hidden",children:E.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-pulse"})}),E.jsx("span",{className:"text-sm text-gray-600",children:n})]}):t==="minimal"?E.jsx("div",{className:"flex items-center justify-center p-8",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"w-48 h-2 bg-gray-200 rounded-full overflow-hidden mx-auto mb-4",children:E.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full animate-pulse"})}),E.jsx("p",{className:"text-sm font-medium text-gray-700",children:n}),e&&E.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e})]})}):E.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:E.jsxs("div",{className:"text-center max-w-md w-full",children:[E.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:n}),E.jsx("p",{className:"text-gray-500 mb-8",children:e}),E.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-4",children:E.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full",style:{animation:"loading-progress 2s ease-in-out infinite"}})})]})});function JEt(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const eAt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,tAt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nAt={};function ape(n,e){return(nAt.jsx?tAt:eAt).test(n)}const rAt=/[ \t\n\f\r]/g;function iAt(n){return typeof n=="object"?n.type==="text"?ope(n.value):!1:ope(n)}function ope(n){return n.replace(rAt,"")===""}class P2{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}P2.prototype.normal={};P2.prototype.property={};P2.prototype.space=void 0;function qDe(n,e){const t={},r={};for(const i of n)Object.assign(t,i.property),Object.assign(r,i.normal);return new P2(t,r,e)}function bq(n){return n.toLowerCase()}class oc{constructor(e,t){this.attribute=t,this.property=e}}oc.prototype.attribute="";oc.prototype.booleanish=!1;oc.prototype.boolean=!1;oc.prototype.commaOrSpaceSeparated=!1;oc.prototype.commaSeparated=!1;oc.prototype.defined=!1;oc.prototype.mustUseProperty=!1;oc.prototype.number=!1;oc.prototype.overloadedBoolean=!1;oc.prototype.property="";oc.prototype.spaceSeparated=!1;oc.prototype.space=void 0;let aAt=0;const ar=s_(),eo=s_(),wq=s_(),ut=s_(),qi=s_(),p1=s_(),Oc=s_();function s_(){return 2**++aAt}const _q=Object.freeze(Object.defineProperty({__proto__:null,boolean:ar,booleanish:eo,commaOrSpaceSeparated:Oc,commaSeparated:p1,number:ut,overloadedBoolean:wq,spaceSeparated:qi},Symbol.toStringTag,{value:"Module"})),HV=Object.keys(_q);class CX extends oc{constructor(e,t,r,i){let a=-1;if(super(e,t),spe(this,"space",i),typeof r=="number")for(;++a<HV.length;){const o=HV[a];spe(this,HV[a],(r&_q[o])===_q[o])}}}CX.prototype.defined=!0;function spe(n,e,t){t&&(n[e]=t)}function GT(n){const e={},t={};for(const[r,i]of Object.entries(n.properties)){const a=new CX(r,n.transform(n.attributes||{},r),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,t[bq(r)]=r,t[bq(a.attribute)]=r}return new P2(e,t,n.space)}const GDe=GT({properties:{ariaActiveDescendant:null,ariaAtomic:eo,ariaAutoComplete:null,ariaBusy:eo,ariaChecked:eo,ariaColCount:ut,ariaColIndex:ut,ariaColSpan:ut,ariaControls:qi,ariaCurrent:null,ariaDescribedBy:qi,ariaDetails:null,ariaDisabled:eo,ariaDropEffect:qi,ariaErrorMessage:null,ariaExpanded:eo,ariaFlowTo:qi,ariaGrabbed:eo,ariaHasPopup:null,ariaHidden:eo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:qi,ariaLevel:ut,ariaLive:null,ariaModal:eo,ariaMultiLine:eo,ariaMultiSelectable:eo,ariaOrientation:null,ariaOwns:qi,ariaPlaceholder:null,ariaPosInSet:ut,ariaPressed:eo,ariaReadOnly:eo,ariaRelevant:null,ariaRequired:eo,ariaRoleDescription:qi,ariaRowCount:ut,ariaRowIndex:ut,ariaRowSpan:ut,ariaSelected:eo,ariaSetSize:ut,ariaSort:null,ariaValueMax:ut,ariaValueMin:ut,ariaValueNow:ut,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function WDe(n,e){return e in n?n[e]:e}function YDe(n,e){return WDe(n,e.toLowerCase())}const oAt=GT({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:p1,acceptCharset:qi,accessKey:qi,action:null,allow:null,allowFullScreen:ar,allowPaymentRequest:ar,allowUserMedia:ar,alt:null,as:null,async:ar,autoCapitalize:null,autoComplete:qi,autoFocus:ar,autoPlay:ar,blocking:qi,capture:null,charSet:null,checked:ar,cite:null,className:qi,cols:ut,colSpan:null,content:null,contentEditable:eo,controls:ar,controlsList:qi,coords:ut|p1,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ar,defer:ar,dir:null,dirName:null,disabled:ar,download:wq,draggable:eo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ar,formTarget:null,headers:qi,height:ut,hidden:wq,high:ut,href:null,hrefLang:null,htmlFor:qi,httpEquiv:qi,id:null,imageSizes:null,imageSrcSet:null,inert:ar,inputMode:null,integrity:null,is:null,isMap:ar,itemId:null,itemProp:qi,itemRef:qi,itemScope:ar,itemType:qi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ar,low:ut,manifest:null,max:null,maxLength:ut,media:null,method:null,min:null,minLength:ut,multiple:ar,muted:ar,name:null,nonce:null,noModule:ar,noValidate:ar,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ar,optimum:ut,pattern:null,ping:qi,placeholder:null,playsInline:ar,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ar,referrerPolicy:null,rel:qi,required:ar,reversed:ar,rows:ut,rowSpan:ut,sandbox:qi,scope:null,scoped:ar,seamless:ar,selected:ar,shadowRootClonable:ar,shadowRootDelegatesFocus:ar,shadowRootMode:null,shape:null,size:ut,sizes:null,slot:null,span:ut,spellCheck:eo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ut,step:null,style:null,tabIndex:ut,target:null,title:null,translate:null,type:null,typeMustMatch:ar,useMap:null,value:eo,width:ut,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:qi,axis:null,background:null,bgColor:null,border:ut,borderColor:null,bottomMargin:ut,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ar,declare:ar,event:null,face:null,frame:null,frameBorder:null,hSpace:ut,leftMargin:ut,link:null,longDesc:null,lowSrc:null,marginHeight:ut,marginWidth:ut,noResize:ar,noHref:ar,noShade:ar,noWrap:ar,object:null,profile:null,prompt:null,rev:null,rightMargin:ut,rules:null,scheme:null,scrolling:eo,standby:null,summary:null,text:null,topMargin:ut,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ut,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ar,disableRemotePlayback:ar,prefix:null,property:null,results:ut,security:null,unselectable:null},space:"html",transform:YDe}),sAt=GT({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Oc,accentHeight:ut,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ut,amplitude:ut,arabicForm:null,ascent:ut,attributeName:null,attributeType:null,azimuth:ut,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ut,by:null,calcMode:null,capHeight:ut,className:qi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ut,diffuseConstant:ut,direction:null,display:null,dur:null,divisor:ut,dominantBaseline:null,download:ar,dx:null,dy:null,edgeMode:null,editable:null,elevation:ut,enableBackground:null,end:null,event:null,exponent:ut,externalResourcesRequired:null,fill:null,fillOpacity:ut,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:p1,g2:p1,glyphName:p1,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ut,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ut,horizOriginX:ut,horizOriginY:ut,id:null,ideographic:ut,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ut,k:ut,k1:ut,k2:ut,k3:ut,k4:ut,kernelMatrix:Oc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ut,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ut,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ut,overlineThickness:ut,paintOrder:null,panose1:null,path:null,pathLength:ut,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:qi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ut,pointsAtY:ut,pointsAtZ:ut,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Oc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Oc,rev:Oc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Oc,requiredFeatures:Oc,requiredFonts:Oc,requiredFormats:Oc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ut,specularExponent:ut,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ut,strikethroughThickness:ut,string:null,stroke:null,strokeDashArray:Oc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ut,strokeOpacity:ut,strokeWidth:null,style:null,surfaceScale:ut,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Oc,tabIndex:ut,tableValues:null,target:null,targetX:ut,targetY:ut,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Oc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ut,underlineThickness:ut,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ut,values:null,vAlphabetic:ut,vMathematical:ut,vectorEffect:null,vHanging:ut,vIdeographic:ut,version:null,vertAdvY:ut,vertOriginX:ut,vertOriginY:ut,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ut,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:WDe}),KDe=GT({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),XDe=GT({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:YDe}),ZDe=GT({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),lAt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cAt=/[A-Z]/g,lpe=/-[a-z]/g,uAt=/^data[-\w.:]+$/i;function dAt(n,e){const t=bq(e);let r=e,i=oc;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&uAt.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(lpe,fAt);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!lpe.test(a)){let o=a.replace(cAt,hAt);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=CX}return new i(r,e)}function hAt(n){return"-"+n.toLowerCase()}function fAt(n){return n.charAt(1).toUpperCase()}const pAt=qDe([GDe,oAt,KDe,XDe,ZDe],"html"),DX=qDe([GDe,sAt,KDe,XDe,ZDe],"svg");function gAt(n){return n.join(" ").trim()}var fS={},qV,cpe;function mAt(){if(cpe)return qV;cpe=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,s=/^\s+|\s+$/g,l=`
`,c="/",u="*",d="",h="comment",f="declaration";qV=function(v,y){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];y=y||{};var w=1,_=1;function S($){var Y=$.match(e);Y&&(w+=Y.length);var q=$.lastIndexOf(l);_=~q?$.length-q:_+$.length}function A(){var $={line:w,column:_};return function(Y){return Y.position=new C($),P(),Y}}function C($){this.start=$,this.end={line:w,column:_},this.source=y.source}C.prototype.content=v;function D($){var Y=new Error(y.source+":"+w+":"+_+": "+$);if(Y.reason=$,Y.filename=y.source,Y.line=w,Y.column=_,Y.source=v,!y.silent)throw Y}function M($){var Y=$.exec(v);if(Y){var q=Y[0];return S(q),v=v.slice(q.length),Y}}function P(){M(t)}function O($){var Y;for($=$||[];Y=j();)Y!==!1&&$.push(Y);return $}function j(){var $=A();if(!(c!=v.charAt(0)||u!=v.charAt(1))){for(var Y=2;d!=v.charAt(Y)&&(u!=v.charAt(Y)||c!=v.charAt(Y+1));)++Y;if(Y+=2,d===v.charAt(Y-1))return D("End of comment missing");var q=v.slice(2,Y-2);return _+=2,S(q),v=v.slice(Y),_+=2,$({type:h,comment:q})}}function L(){var $=A(),Y=M(r);if(Y){if(j(),!M(i))return D("property missing ':'");var q=M(a),W=$({type:f,property:m(Y[0].replace(n,d)),value:q?m(q[0].replace(n,d)):d});return M(o),W}}function B(){var $=[];O($);for(var Y;Y=L();)Y!==!1&&($.push(Y),O($));return $}return P(),B()};function m(v){return v?v.replace(s,d):d}return qV}var upe;function vAt(){if(upe)return fS;upe=1;var n=fS&&fS.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fS,"__esModule",{value:!0}),fS.default=t;var e=n(mAt());function t(r,i){var a=null;if(!r||typeof r!="string")return a;var o=(0,e.default)(r),s=typeof i=="function";return o.forEach(function(l){if(l.type==="declaration"){var c=l.property,u=l.value;s?i(c,u,l):u&&(a=a||{},a[c]=u)}}),a}return fS}var bC={},dpe;function yAt(){if(dpe)return bC;dpe=1,Object.defineProperty(bC,"__esModule",{value:!0}),bC.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(c){return!c||t.test(c)||n.test(c)},o=function(c,u){return u.toUpperCase()},s=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),a(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(i,s):c=c.replace(r,s),c.replace(e,o))};return bC.camelCase=l,bC}var wC,hpe;function bAt(){if(hpe)return wC;hpe=1;var n=wC&&wC.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(vAt()),t=yAt();function r(i,a){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(s,l){s&&l&&(o[(0,t.camelCase)(s,a)]=l)}),o}return r.default=r,wC=r,wC}var wAt=bAt();const _At=Br(wAt),QDe=JDe("end"),kX=JDe("start");function JDe(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function xAt(n){const e=kX(n),t=QDe(n);if(e&&t)return{start:e,end:t}}function RD(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?fpe(n.position):"start"in n||"end"in n?fpe(n):"line"in n||"column"in n?xq(n):""}function xq(n){return ppe(n&&n.line)+":"+ppe(n&&n.column)}function fpe(n){return xq(n&&n.start)+"-"+xq(n&&n.end)}function ppe(n){return n&&typeof n=="number"?n:1}class Ks extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",a={},o=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof e=="string"?i=e:!a.cause&&e&&(o=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const s=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=s?s.line:void 0,this.name=RD(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ks.prototype.file="";Ks.prototype.name="";Ks.prototype.reason="";Ks.prototype.message="";Ks.prototype.stack="";Ks.prototype.column=void 0;Ks.prototype.line=void 0;Ks.prototype.ancestors=void 0;Ks.prototype.cause=void 0;Ks.prototype.fatal=void 0;Ks.prototype.place=void 0;Ks.prototype.ruleId=void 0;Ks.prototype.source=void 0;const IX={}.hasOwnProperty,SAt=new Map,TAt=/[A-Z]/g,EAt=new Set(["table","tbody","thead","tfoot","tr"]),AAt=new Set(["td","th"]),eke="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function CAt(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=NAt(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=RAt(t,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?DX:pAt,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=tke(i,n,void 0);return a&&typeof a!="string"?a:i.create(n,i.Fragment,{children:a||void 0},void 0)}function tke(n,e,t){if(e.type==="element")return DAt(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return kAt(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return MAt(n,e,t);if(e.type==="mdxjsEsm")return IAt(n,e);if(e.type==="root")return PAt(n,e,t);if(e.type==="text")return OAt(n,e)}function DAt(n,e,t){const r=n.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=DX,n.schema=i),n.ancestors.push(e);const a=rke(n,e.tagName,!1),o=LAt(n,e);let s=PX(n,e);return EAt.has(e.tagName)&&(s=s.filter(function(l){return typeof l=="string"?!iAt(l):!0})),nke(n,o,a,e),MX(o,s),n.ancestors.pop(),n.schema=r,n.create(e,a,o,t)}function kAt(n,e){if(e.data&&e.data.estree&&n.evaluater){const r=e.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}wI(n,e.position)}function IAt(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);wI(n,e.position)}function MAt(n,e,t){const r=n.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=DX,n.schema=i),n.ancestors.push(e);const a=e.name===null?n.Fragment:rke(n,e.name,!0),o=jAt(n,e),s=PX(n,e);return nke(n,o,a,e),MX(o,s),n.ancestors.pop(),n.schema=r,n.create(e,a,o,t)}function PAt(n,e,t){const r={};return MX(r,PX(n,e)),n.create(e,n.Fragment,r,t)}function OAt(n,e){return e.value}function nke(n,e,t,r){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=r)}function MX(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function RAt(n,e,t){return r;function r(i,a,o,s){const c=Array.isArray(o.children)?t:e;return s?c(a,o,s):c(a,o)}}function NAt(n,e){return t;function t(r,i,a,o){const s=Array.isArray(a.children),l=kX(r);return e(i,a,o,s,{columnNumber:l?l.column-1:void 0,fileName:n,lineNumber:l?l.line:void 0},void 0)}}function LAt(n,e){const t={};let r,i;for(i in e.properties)if(i!=="children"&&IX.call(e.properties,i)){const a=FAt(n,i,e.properties[i]);if(a){const[o,s]=a;n.tableCellAlignToStyle&&o==="align"&&typeof s=="string"&&AAt.has(e.tagName)?r=s:t[o]=s}}if(r){const a=t.style||(t.style={});a[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function jAt(n,e){const t={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const s=o.properties[0];s.type,Object.assign(t,n.evaluater.evaluateExpression(s.argument))}else wI(n,e.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const s=r.value.data.estree.body[0];s.type,a=n.evaluater.evaluateExpression(s.expression)}else wI(n,e.position);else a=r.value===null?!0:r.value;t[i]=a}return t}function PX(n,e){const t=[];let r=-1;const i=n.passKeys?new Map:SAt;for(;++r<e.children.length;){const a=e.children[r];let o;if(n.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const s=tke(n,a,o);s!==void 0&&t.push(s)}return t}function FAt(n,e,t){const r=dAt(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?JEt(t):gAt(t)),r.property==="style"){let i=typeof t=="object"?t:$At(n,String(t));return n.stylePropertyNameCase==="css"&&(i=BAt(i)),["style",i]}return[n.elementAttributeNameCase==="react"&&r.space?lAt[r.property]||r.property:r.attribute,t]}}function $At(n,e){try{return _At(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const r=t,i=new Ks("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=n.filePath||void 0,i.url=eke+"#cannot-parse-style-attribute",i}}function rke(n,e,t){let r;if(!t)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,o;for(;++a<i.length;){const s=ape(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:s,computed:!!(a&&s.type==="Literal"),optional:!1}:s}r=o}else r=ape(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return IX.call(n.components,i)?n.components[i]:i}if(n.evaluater)return n.evaluater.evaluateExpression(r);wI(n)}function wI(n,e){const t=new Ks("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=eke+"#cannot-handle-mdx-estrees-without-createevaluater",t}function BAt(n){const e={};let t;for(t in n)IX.call(n,t)&&(e[UAt(t)]=n[t]);return e}function UAt(n){let e=n.replace(TAt,VAt);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function VAt(n){return"-"+n.toLowerCase()}const GV={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},zAt={};function HAt(n,e){const t=zAt,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return ike(n,r,i)}function ike(n,e,t){if(qAt(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return gpe(n.children,e,t)}return Array.isArray(n)?gpe(n,e,t):""}function gpe(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=ike(n[i],e,t);return r.join("")}function qAt(n){return!!(n&&typeof n=="object")}const mpe=document.createElement("i");function OX(n){const e="&"+n+";";mpe.innerHTML=e;const t=mpe.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function $f(n,e,t,r){const i=n.length;let a=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)o=Array.from(r),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);a<r.length;)o=r.slice(a,a+1e4),o.unshift(e,0),n.splice(...o),a+=1e4,e+=1e4}function $u(n,e){return n.length>0?($f(n,n.length,0,e),n):e}const vpe={}.hasOwnProperty;function GAt(n){const e={};let t=-1;for(;++t<n.length;)WAt(e,n[t]);return e}function WAt(n,e){let t;for(t in e){const i=(vpe.call(n,t)?n[t]:void 0)||(n[t]={}),a=e[t];let o;if(a)for(o in a){vpe.call(i,o)||(i[o]=[]);const s=a[o];YAt(i[o],Array.isArray(s)?s:s?[s]:[])}}}function YAt(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);$f(n,0,0,r)}function ake(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function g1(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const gf=Py(/[A-Za-z]/),Hc=Py(/[\dA-Za-z]/),KAt=Py(/[#-'*+\--9=?A-Z^-~]/);function Sq(n){return n!==null&&(n<32||n===127)}const Tq=Py(/\d/),XAt=Py(/[\dA-Fa-f]/),ZAt=Py(/[!-/:-@[-`{-~]/);function On(n){return n!==null&&n<-2}function nc(n){return n!==null&&(n<0||n===32)}function Jr(n){return n===-2||n===-1||n===32}const QAt=Py(new RegExp("\\p{P}|\\p{S}","u")),JAt=Py(/\s/);function Py(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function WT(n){const e=[];let t=-1,r=0,i=0;for(;++t<n.length;){const a=n.charCodeAt(t);let o="";if(a===37&&Hc(n.charCodeAt(t+1))&&Hc(n.charCodeAt(t+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const s=n.charCodeAt(t+1);a<56320&&s>56319&&s<57344?(o=String.fromCharCode(a,s),i=1):o="�"}else o=String.fromCharCode(a);o&&(e.push(n.slice(r,t),encodeURIComponent(o)),r=t+i+1,o=""),i&&(t+=i,i=0)}return e.join("")+n.slice(r)}function Wi(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(l){return Jr(l)?(n.enter(t),s(l)):e(l)}function s(l){return Jr(l)&&a++<i?(n.consume(l),s):(n.exit(t),e(l))}}const eCt={tokenize:tCt};function tCt(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),Wi(n,e,"linePrefix")}function i(s){return n.enter("paragraph"),a(s)}function a(s){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,o(s)}function o(s){if(s===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(s);return}return On(s)?(n.consume(s),n.exit("chunkText"),a):(n.consume(s),o)}}const nCt={tokenize:rCt},ype={tokenize:iCt};function rCt(n){const e=this,t=[];let r=0,i,a,o;return s;function s(S){if(r<t.length){const A=t[r];return e.containerState=A[1],n.attempt(A[0].continuation,l,c)(S)}return c(S)}function l(S){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&_();const A=e.events.length;let C=A,D;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){D=e.events[C][1].end;break}w(r);let M=A;for(;M<e.events.length;)e.events[M][1].end={...D},M++;return $f(e.events,C+1,0,e.events.slice(A)),e.events.length=M,c(S)}return s(S)}function c(S){if(r===t.length){if(!i)return h(S);if(i.currentConstruct&&i.currentConstruct.concrete)return m(S);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(ype,u,d)(S)}function u(S){return i&&_(),w(r),h(S)}function d(S){return e.parser.lazy[e.now().line]=r!==t.length,o=e.now().offset,m(S)}function h(S){return e.containerState={},n.attempt(ype,f,m)(S)}function f(S){return r++,t.push([e.currentConstruct,e.containerState]),h(S)}function m(S){if(S===null){i&&_(),w(0),n.consume(S);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),v(S)}function v(S){if(S===null){y(n.exit("chunkFlow"),!0),w(0),n.consume(S);return}return On(S)?(n.consume(S),y(n.exit("chunkFlow")),r=0,e.interrupt=void 0,s):(n.consume(S),v)}function y(S,A){const C=e.sliceStream(S);if(A&&C.push(null),S.previous=a,a&&(a.next=S),a=S,i.defineSkip(S.start),i.write(C),e.parser.lazy[S.start.line]){let D=i.events.length;for(;D--;)if(i.events[D][1].start.offset<o&&(!i.events[D][1].end||i.events[D][1].end.offset>o))return;const M=e.events.length;let P=M,O,j;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(O){j=e.events[P][1].end;break}O=!0}for(w(r),D=M;D<e.events.length;)e.events[D][1].end={...j},D++;$f(e.events,P+1,0,e.events.slice(M)),e.events.length=D}}function w(S){let A=t.length;for(;A-- >S;){const C=t[A];e.containerState=C[1],C[0].exit.call(e,n)}t.length=S}function _(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function iCt(n,e,t){return Wi(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function bpe(n){if(n===null||nc(n)||JAt(n))return 1;if(QAt(n))return 2}function RX(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const a=n[i].resolveAll;a&&!r.includes(a)&&(e=a(e,t),r.push(a))}return e}const Eq={name:"attention",resolveAll:aCt,tokenize:oCt};function aCt(n,e){let t=-1,r,i,a,o,s,l,c,u;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const d={...n[r][1].end},h={...n[t][1].start};wpe(d,-l),wpe(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...n[r][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:h},a={type:l>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...s.end}},n[r][1].end={...o.start},n[t][1].start={...s.end},c=[],n[r][1].end.offset-n[r][1].start.offset&&(c=$u(c,[["enter",n[r][1],e],["exit",n[r][1],e]])),c=$u(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",a,e]]),c=$u(c,RX(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),c=$u(c,[["exit",a,e],["enter",s,e],["exit",s,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(u=2,c=$u(c,[["enter",n[t][1],e],["exit",n[t][1],e]])):u=0,$f(n,r-1,t-r+3,c),t=r+c.length-u-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function oCt(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=bpe(r);let a;return o;function o(l){return a=l,n.enter("attentionSequence"),s(l)}function s(l){if(l===a)return n.consume(l),s;const c=n.exit("attentionSequence"),u=bpe(l),d=!u||u===2&&i||t.includes(l),h=!i||i===2&&u||t.includes(r);return c._open=!!(a===42?d:d&&(i||!h)),c._close=!!(a===42?h:h&&(u||!d)),e(l)}}function wpe(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const sCt={name:"autolink",tokenize:lCt};function lCt(n,e,t){let r=0;return i;function i(f){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),a}function a(f){return gf(f)?(n.consume(f),o):f===64?t(f):c(f)}function o(f){return f===43||f===45||f===46||Hc(f)?(r=1,s(f)):c(f)}function s(f){return f===58?(n.consume(f),r=0,l):(f===43||f===45||f===46||Hc(f))&&r++<32?(n.consume(f),s):(r=0,c(f))}function l(f){return f===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):f===null||f===32||f===60||Sq(f)?t(f):(n.consume(f),l)}function c(f){return f===64?(n.consume(f),u):KAt(f)?(n.consume(f),c):t(f)}function u(f){return Hc(f)?d(f):t(f)}function d(f){return f===46?(n.consume(f),r=0,u):f===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):h(f)}function h(f){if((f===45||Hc(f))&&r++<63){const m=f===45?h:d;return n.consume(f),m}return t(f)}}const eF={partial:!0,tokenize:cCt};function cCt(n,e,t){return r;function r(a){return Jr(a)?Wi(n,i,"linePrefix")(a):i(a)}function i(a){return a===null||On(a)?e(a):t(a)}}const oke={continuation:{tokenize:dCt},exit:hCt,name:"blockQuote",tokenize:uCt};function uCt(n,e,t){const r=this;return i;function i(o){if(o===62){const s=r.containerState;return s.open||(n.enter("blockQuote",{_container:!0}),s.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),a}return t(o)}function a(o){return Jr(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function dCt(n,e,t){const r=this;return i;function i(o){return Jr(o)?Wi(n,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return n.attempt(oke,e,t)(o)}}function hCt(n){n.exit("blockQuote")}const ske={name:"characterEscape",tokenize:fCt};function fCt(n,e,t){return r;function r(a){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(a),n.exit("escapeMarker"),i}function i(a){return ZAt(a)?(n.enter("characterEscapeValue"),n.consume(a),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(a)}}const lke={name:"characterReference",tokenize:pCt};function pCt(n,e,t){const r=this;let i=0,a,o;return s;function s(d){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(d),n.exit("characterReferenceMarker"),l}function l(d){return d===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(d),n.exit("characterReferenceMarkerNumeric"),c):(n.enter("characterReferenceValue"),a=31,o=Hc,u(d))}function c(d){return d===88||d===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(d),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),a=6,o=XAt,u):(n.enter("characterReferenceValue"),a=7,o=Tq,u(d))}function u(d){if(d===59&&i){const h=n.exit("characterReferenceValue");return o===Hc&&!OX(r.sliceSerialize(h))?t(d):(n.enter("characterReferenceMarker"),n.consume(d),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(d)&&i++<a?(n.consume(d),u):t(d)}}const _pe={partial:!0,tokenize:mCt},xpe={concrete:!0,name:"codeFenced",tokenize:gCt};function gCt(n,e,t){const r=this,i={partial:!0,tokenize:C};let a=0,o=0,s;return l;function l(D){return c(D)}function c(D){const M=r.events[r.events.length-1];return a=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,s=D,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),u(D)}function u(D){return D===s?(o++,n.consume(D),u):o<3?t(D):(n.exit("codeFencedFenceSequence"),Jr(D)?Wi(n,d,"whitespace")(D):d(D))}function d(D){return D===null||On(D)?(n.exit("codeFencedFence"),r.interrupt?e(D):n.check(_pe,v,A)(D)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),h(D))}function h(D){return D===null||On(D)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),d(D)):Jr(D)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Wi(n,f,"whitespace")(D)):D===96&&D===s?t(D):(n.consume(D),h)}function f(D){return D===null||On(D)?d(D):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),m(D))}function m(D){return D===null||On(D)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),d(D)):D===96&&D===s?t(D):(n.consume(D),m)}function v(D){return n.attempt(i,A,y)(D)}function y(D){return n.enter("lineEnding"),n.consume(D),n.exit("lineEnding"),w}function w(D){return a>0&&Jr(D)?Wi(n,_,"linePrefix",a+1)(D):_(D)}function _(D){return D===null||On(D)?n.check(_pe,v,A)(D):(n.enter("codeFlowValue"),S(D))}function S(D){return D===null||On(D)?(n.exit("codeFlowValue"),_(D)):(n.consume(D),S)}function A(D){return n.exit("codeFenced"),e(D)}function C(D,M,P){let O=0;return j;function j(q){return D.enter("lineEnding"),D.consume(q),D.exit("lineEnding"),L}function L(q){return D.enter("codeFencedFence"),Jr(q)?Wi(D,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):B(q)}function B(q){return q===s?(D.enter("codeFencedFenceSequence"),$(q)):P(q)}function $(q){return q===s?(O++,D.consume(q),$):O>=o?(D.exit("codeFencedFenceSequence"),Jr(q)?Wi(D,Y,"whitespace")(q):Y(q)):P(q)}function Y(q){return q===null||On(q)?(D.exit("codeFencedFence"),M(q)):P(q)}}}function mCt(n,e,t){const r=this;return i;function i(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}const WV={name:"codeIndented",tokenize:yCt},vCt={partial:!0,tokenize:bCt};function yCt(n,e,t){const r=this;return i;function i(c){return n.enter("codeIndented"),Wi(n,a,"linePrefix",5)(c)}function a(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):t(c)}function o(c){return c===null?l(c):On(c)?n.attempt(vCt,o,l)(c):(n.enter("codeFlowValue"),s(c))}function s(c){return c===null||On(c)?(n.exit("codeFlowValue"),o(c)):(n.consume(c),s)}function l(c){return n.exit("codeIndented"),e(c)}}function bCt(n,e,t){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?t(o):On(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),i):Wi(n,a,"linePrefix",5)(o)}function a(o){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):On(o)?i(o):t(o)}}const wCt={name:"codeText",previous:xCt,resolve:_Ct,tokenize:SCt};function _Ct(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function xCt(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function SCt(n,e,t){let r=0,i,a;return o;function o(d){return n.enter("codeText"),n.enter("codeTextSequence"),s(d)}function s(d){return d===96?(n.consume(d),r++,s):(n.exit("codeTextSequence"),l(d))}function l(d){return d===null?t(d):d===32?(n.enter("space"),n.consume(d),n.exit("space"),l):d===96?(a=n.enter("codeTextSequence"),i=0,u(d)):On(d)?(n.enter("lineEnding"),n.consume(d),n.exit("lineEnding"),l):(n.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||On(d)?(n.exit("codeTextData"),l(d)):(n.consume(d),c)}function u(d){return d===96?(n.consume(d),i++,u):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(d)):(a.type="codeTextData",c(d))}}class TCt{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&_C(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),_C(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),_C(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);_C(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);_C(this.left,t.reverse())}}}function _C(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function cke(n){const e={};let t=-1,r,i,a,o,s,l,c;const u=new TCt(n);for(;++t<u.length;){for(;t in e;)t=e[t];if(r=u.get(t),t&&r[1].type==="chunkFlow"&&u.get(t-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,ECt(u,t)),t=e[t],c=!0);else if(r[1]._container){for(a=t,i=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},s=u.slice(i,t),s.unshift(r),u.splice(i,t-i+1,s))}}return $f(n,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function ECt(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const a=[];let o=t._tokenizer;o||(o=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const s=o.events,l=[],c={};let u,d,h=-1,f=t,m=0,v=0;const y=[v];for(;f;){for(;n.get(++i)[1]!==f;);a.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=t;++h<s.length;)s[h][0]==="exit"&&s[h-1][0]==="enter"&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(v=h+1,y.push(v),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),h=y.length;h--;){const w=s.slice(y[h],y[h+1]),_=a.pop();l.push([_,_+w.length-1]),n.splice(_,2,w)}for(l.reverse(),h=-1;++h<l.length;)c[m+l[h][0]]=m+l[h][1],m+=l[h][1]-l[h][0]-1;return c}const ACt={resolve:DCt,tokenize:kCt},CCt={partial:!0,tokenize:ICt};function DCt(n){return cke(n),n}function kCt(n,e){let t;return r;function r(s){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?a(s):On(s)?n.check(CCt,o,a)(s):(n.consume(s),i)}function a(s){return n.exit("chunkContent"),n.exit("content"),e(s)}function o(s){return n.consume(s),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function ICt(n,e,t){const r=this;return i;function i(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),Wi(n,a,"linePrefix")}function a(o){if(o===null||On(o))return t(o);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):n.interrupt(r.parser.constructs.flow,t,e)(o)}}function uke(n,e,t,r,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(w){return w===60?(n.enter(r),n.enter(i),n.enter(a),n.consume(w),n.exit(a),h):w===null||w===32||w===41||Sq(w)?t(w):(n.enter(r),n.enter(o),n.enter(s),n.enter("chunkString",{contentType:"string"}),v(w))}function h(w){return w===62?(n.enter(a),n.consume(w),n.exit(a),n.exit(i),n.exit(r),e):(n.enter(s),n.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===62?(n.exit("chunkString"),n.exit(s),h(w)):w===null||w===60||On(w)?t(w):(n.consume(w),w===92?m:f)}function m(w){return w===60||w===62||w===92?(n.consume(w),f):f(w)}function v(w){return!u&&(w===null||w===41||nc(w))?(n.exit("chunkString"),n.exit(s),n.exit(o),n.exit(r),e(w)):u<c&&w===40?(n.consume(w),u++,v):w===41?(n.consume(w),u--,v):w===null||w===32||w===40||Sq(w)?t(w):(n.consume(w),w===92?y:v)}function y(w){return w===40||w===41||w===92?(n.consume(w),v):v(w)}}function dke(n,e,t,r,i,a){const o=this;let s=0,l;return c;function c(f){return n.enter(r),n.enter(i),n.consume(f),n.exit(i),n.enter(a),u}function u(f){return s>999||f===null||f===91||f===93&&!l||f===94&&!s&&"_hiddenFootnoteSupport"in o.parser.constructs?t(f):f===93?(n.exit(a),n.enter(i),n.consume(f),n.exit(i),n.exit(r),e):On(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),u):(n.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||On(f)||s++>999?(n.exit("chunkString"),u(f)):(n.consume(f),l||(l=!Jr(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(n.consume(f),s++,d):d(f)}}function hke(n,e,t,r,i,a){let o;return s;function s(h){return h===34||h===39||h===40?(n.enter(r),n.enter(i),n.consume(h),n.exit(i),o=h===40?41:h,l):t(h)}function l(h){return h===o?(n.enter(i),n.consume(h),n.exit(i),n.exit(r),e):(n.enter(a),c(h))}function c(h){return h===o?(n.exit(a),l(o)):h===null?t(h):On(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),Wi(n,c,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||On(h)?(n.exit("chunkString"),c(h)):(n.consume(h),h===92?d:u)}function d(h){return h===o||h===92?(n.consume(h),u):u(h)}}function ND(n,e){let t;return r;function r(i){return On(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):Jr(i)?Wi(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const MCt={name:"definition",tokenize:OCt},PCt={partial:!0,tokenize:RCt};function OCt(n,e,t){const r=this;let i;return a;function a(f){return n.enter("definition"),o(f)}function o(f){return dke.call(r,n,s,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function s(f){return i=g1(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(n.enter("definitionMarker"),n.consume(f),n.exit("definitionMarker"),l):t(f)}function l(f){return nc(f)?ND(n,c)(f):c(f)}function c(f){return uke(n,u,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return n.attempt(PCt,d,d)(f)}function d(f){return Jr(f)?Wi(n,h,"whitespace")(f):h(f)}function h(f){return f===null||On(f)?(n.exit("definition"),r.parser.defined.push(i),e(f)):t(f)}}function RCt(n,e,t){return r;function r(s){return nc(s)?ND(n,i)(s):t(s)}function i(s){return hke(n,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function a(s){return Jr(s)?Wi(n,o,"whitespace")(s):o(s)}function o(s){return s===null||On(s)?e(s):t(s)}}const NCt={name:"hardBreakEscape",tokenize:LCt};function LCt(n,e,t){return r;function r(a){return n.enter("hardBreakEscape"),n.consume(a),i}function i(a){return On(a)?(n.exit("hardBreakEscape"),e(a)):t(a)}}const jCt={name:"headingAtx",resolve:FCt,tokenize:$Ct};function FCt(n,e){let t=n.length-2,r=3,i,a;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},a={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},$f(n,r,t-r+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),n}function $Ct(n,e,t){let r=0;return i;function i(u){return n.enter("atxHeading"),a(u)}function a(u){return n.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(n.consume(u),o):u===null||nc(u)?(n.exit("atxHeadingSequence"),s(u)):t(u)}function s(u){return u===35?(n.enter("atxHeadingSequence"),l(u)):u===null||On(u)?(n.exit("atxHeading"),e(u)):Jr(u)?Wi(n,s,"whitespace")(u):(n.enter("atxHeadingText"),c(u))}function l(u){return u===35?(n.consume(u),l):(n.exit("atxHeadingSequence"),s(u))}function c(u){return u===null||u===35||nc(u)?(n.exit("atxHeadingText"),s(u)):(n.consume(u),c)}}const BCt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Spe=["pre","script","style","textarea"],UCt={concrete:!0,name:"htmlFlow",resolveTo:HCt,tokenize:qCt},VCt={partial:!0,tokenize:WCt},zCt={partial:!0,tokenize:GCt};function HCt(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function qCt(n,e,t){const r=this;let i,a,o,s,l;return c;function c(ee){return u(ee)}function u(ee){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(ee),d}function d(ee){return ee===33?(n.consume(ee),h):ee===47?(n.consume(ee),a=!0,v):ee===63?(n.consume(ee),i=3,r.interrupt?e:z):gf(ee)?(n.consume(ee),o=String.fromCharCode(ee),y):t(ee)}function h(ee){return ee===45?(n.consume(ee),i=2,f):ee===91?(n.consume(ee),i=5,s=0,m):gf(ee)?(n.consume(ee),i=4,r.interrupt?e:z):t(ee)}function f(ee){return ee===45?(n.consume(ee),r.interrupt?e:z):t(ee)}function m(ee){const be="CDATA[";return ee===be.charCodeAt(s++)?(n.consume(ee),s===be.length?r.interrupt?e:B:m):t(ee)}function v(ee){return gf(ee)?(n.consume(ee),o=String.fromCharCode(ee),y):t(ee)}function y(ee){if(ee===null||ee===47||ee===62||nc(ee)){const be=ee===47,he=o.toLowerCase();return!be&&!a&&Spe.includes(he)?(i=1,r.interrupt?e(ee):B(ee)):BCt.includes(o.toLowerCase())?(i=6,be?(n.consume(ee),w):r.interrupt?e(ee):B(ee)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(ee):a?_(ee):S(ee))}return ee===45||Hc(ee)?(n.consume(ee),o+=String.fromCharCode(ee),y):t(ee)}function w(ee){return ee===62?(n.consume(ee),r.interrupt?e:B):t(ee)}function _(ee){return Jr(ee)?(n.consume(ee),_):j(ee)}function S(ee){return ee===47?(n.consume(ee),j):ee===58||ee===95||gf(ee)?(n.consume(ee),A):Jr(ee)?(n.consume(ee),S):j(ee)}function A(ee){return ee===45||ee===46||ee===58||ee===95||Hc(ee)?(n.consume(ee),A):C(ee)}function C(ee){return ee===61?(n.consume(ee),D):Jr(ee)?(n.consume(ee),C):S(ee)}function D(ee){return ee===null||ee===60||ee===61||ee===62||ee===96?t(ee):ee===34||ee===39?(n.consume(ee),l=ee,M):Jr(ee)?(n.consume(ee),D):P(ee)}function M(ee){return ee===l?(n.consume(ee),l=null,O):ee===null||On(ee)?t(ee):(n.consume(ee),M)}function P(ee){return ee===null||ee===34||ee===39||ee===47||ee===60||ee===61||ee===62||ee===96||nc(ee)?C(ee):(n.consume(ee),P)}function O(ee){return ee===47||ee===62||Jr(ee)?S(ee):t(ee)}function j(ee){return ee===62?(n.consume(ee),L):t(ee)}function L(ee){return ee===null||On(ee)?B(ee):Jr(ee)?(n.consume(ee),L):t(ee)}function B(ee){return ee===45&&i===2?(n.consume(ee),W):ee===60&&i===1?(n.consume(ee),X):ee===62&&i===4?(n.consume(ee),oe):ee===63&&i===3?(n.consume(ee),z):ee===93&&i===5?(n.consume(ee),re):On(ee)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(VCt,le,$)(ee)):ee===null||On(ee)?(n.exit("htmlFlowData"),$(ee)):(n.consume(ee),B)}function $(ee){return n.check(zCt,Y,le)(ee)}function Y(ee){return n.enter("lineEnding"),n.consume(ee),n.exit("lineEnding"),q}function q(ee){return ee===null||On(ee)?$(ee):(n.enter("htmlFlowData"),B(ee))}function W(ee){return ee===45?(n.consume(ee),z):B(ee)}function X(ee){return ee===47?(n.consume(ee),o="",te):B(ee)}function te(ee){if(ee===62){const be=o.toLowerCase();return Spe.includes(be)?(n.consume(ee),oe):B(ee)}return gf(ee)&&o.length<8?(n.consume(ee),o+=String.fromCharCode(ee),te):B(ee)}function re(ee){return ee===93?(n.consume(ee),z):B(ee)}function z(ee){return ee===62?(n.consume(ee),oe):ee===45&&i===2?(n.consume(ee),z):B(ee)}function oe(ee){return ee===null||On(ee)?(n.exit("htmlFlowData"),le(ee)):(n.consume(ee),oe)}function le(ee){return n.exit("htmlFlow"),e(ee)}}function GCt(n,e,t){const r=this;return i;function i(o){return On(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),a):t(o)}function a(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}function WCt(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(eF,e,t)}}const YCt={name:"htmlText",tokenize:KCt};function KCt(n,e,t){const r=this;let i,a,o;return s;function s(z){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(z),l}function l(z){return z===33?(n.consume(z),c):z===47?(n.consume(z),C):z===63?(n.consume(z),S):gf(z)?(n.consume(z),P):t(z)}function c(z){return z===45?(n.consume(z),u):z===91?(n.consume(z),a=0,m):gf(z)?(n.consume(z),_):t(z)}function u(z){return z===45?(n.consume(z),f):t(z)}function d(z){return z===null?t(z):z===45?(n.consume(z),h):On(z)?(o=d,X(z)):(n.consume(z),d)}function h(z){return z===45?(n.consume(z),f):d(z)}function f(z){return z===62?W(z):z===45?h(z):d(z)}function m(z){const oe="CDATA[";return z===oe.charCodeAt(a++)?(n.consume(z),a===oe.length?v:m):t(z)}function v(z){return z===null?t(z):z===93?(n.consume(z),y):On(z)?(o=v,X(z)):(n.consume(z),v)}function y(z){return z===93?(n.consume(z),w):v(z)}function w(z){return z===62?W(z):z===93?(n.consume(z),w):v(z)}function _(z){return z===null||z===62?W(z):On(z)?(o=_,X(z)):(n.consume(z),_)}function S(z){return z===null?t(z):z===63?(n.consume(z),A):On(z)?(o=S,X(z)):(n.consume(z),S)}function A(z){return z===62?W(z):S(z)}function C(z){return gf(z)?(n.consume(z),D):t(z)}function D(z){return z===45||Hc(z)?(n.consume(z),D):M(z)}function M(z){return On(z)?(o=M,X(z)):Jr(z)?(n.consume(z),M):W(z)}function P(z){return z===45||Hc(z)?(n.consume(z),P):z===47||z===62||nc(z)?O(z):t(z)}function O(z){return z===47?(n.consume(z),W):z===58||z===95||gf(z)?(n.consume(z),j):On(z)?(o=O,X(z)):Jr(z)?(n.consume(z),O):W(z)}function j(z){return z===45||z===46||z===58||z===95||Hc(z)?(n.consume(z),j):L(z)}function L(z){return z===61?(n.consume(z),B):On(z)?(o=L,X(z)):Jr(z)?(n.consume(z),L):O(z)}function B(z){return z===null||z===60||z===61||z===62||z===96?t(z):z===34||z===39?(n.consume(z),i=z,$):On(z)?(o=B,X(z)):Jr(z)?(n.consume(z),B):(n.consume(z),Y)}function $(z){return z===i?(n.consume(z),i=void 0,q):z===null?t(z):On(z)?(o=$,X(z)):(n.consume(z),$)}function Y(z){return z===null||z===34||z===39||z===60||z===61||z===96?t(z):z===47||z===62||nc(z)?O(z):(n.consume(z),Y)}function q(z){return z===47||z===62||nc(z)?O(z):t(z)}function W(z){return z===62?(n.consume(z),n.exit("htmlTextData"),n.exit("htmlText"),e):t(z)}function X(z){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(z),n.exit("lineEnding"),te}function te(z){return Jr(z)?Wi(n,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):re(z)}function re(z){return n.enter("htmlTextData"),o(z)}}const NX={name:"labelEnd",resolveAll:JCt,resolveTo:eDt,tokenize:tDt},XCt={tokenize:nDt},ZCt={tokenize:rDt},QCt={tokenize:iDt};function JCt(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&$f(n,0,n.length,t),n}function eDt(n,e){let t=n.length,r=0,i,a,o,s;for(;t--;)if(i=n[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=t);const l={type:n[a][1].type==="labelLink"?"link":"image",start:{...n[a][1].start},end:{...n[n.length-1][1].end}},c={type:"label",start:{...n[a][1].start},end:{...n[o][1].end}},u={type:"labelText",start:{...n[a+r+2][1].end},end:{...n[o-2][1].start}};return s=[["enter",l,e],["enter",c,e]],s=$u(s,n.slice(a+1,a+r+3)),s=$u(s,[["enter",u,e]]),s=$u(s,RX(e.parser.constructs.insideSpan.null,n.slice(a+r+4,o-3),e)),s=$u(s,[["exit",u,e],n[o-2],n[o-1],["exit",c,e]]),s=$u(s,n.slice(o+1)),s=$u(s,[["exit",l,e]]),$f(n,a,n.length,s),n}function tDt(n,e,t){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return s;function s(h){return a?a._inactive?d(h):(o=r.parser.defined.includes(g1(r.sliceSerialize({start:a.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(h),n.exit("labelMarker"),n.exit("labelEnd"),l):t(h)}function l(h){return h===40?n.attempt(XCt,u,o?u:d)(h):h===91?n.attempt(ZCt,u,o?c:d)(h):o?u(h):d(h)}function c(h){return n.attempt(QCt,u,d)(h)}function u(h){return e(h)}function d(h){return a._balanced=!0,t(h)}}function nDt(n,e,t){return r;function r(d){return n.enter("resource"),n.enter("resourceMarker"),n.consume(d),n.exit("resourceMarker"),i}function i(d){return nc(d)?ND(n,a)(d):a(d)}function a(d){return d===41?u(d):uke(n,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return nc(d)?ND(n,l)(d):u(d)}function s(d){return t(d)}function l(d){return d===34||d===39||d===40?hke(n,c,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return nc(d)?ND(n,u)(d):u(d)}function u(d){return d===41?(n.enter("resourceMarker"),n.consume(d),n.exit("resourceMarker"),n.exit("resource"),e):t(d)}}function rDt(n,e,t){const r=this;return i;function i(s){return dke.call(r,n,a,o,"reference","referenceMarker","referenceString")(s)}function a(s){return r.parser.defined.includes(g1(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(s):t(s)}function o(s){return t(s)}}function iDt(n,e,t){return r;function r(a){return n.enter("reference"),n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),i}function i(a){return a===93?(n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),n.exit("reference"),e):t(a)}}const aDt={name:"labelStartImage",resolveAll:NX.resolveAll,tokenize:oDt};function oDt(n,e,t){const r=this;return i;function i(s){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(s),n.exit("labelImageMarker"),a}function a(s){return s===91?(n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelImage"),o):t(s)}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(s):e(s)}}const sDt={name:"labelStartLink",resolveAll:NX.resolveAll,tokenize:lDt};function lDt(n,e,t){const r=this;return i;function i(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const YV={name:"lineEnding",tokenize:cDt};function cDt(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Wi(n,e,"linePrefix")}}const sR={name:"thematicBreak",tokenize:uDt};function uDt(n,e,t){let r=0,i;return a;function a(c){return n.enter("thematicBreak"),o(c)}function o(c){return i=c,s(c)}function s(c){return c===i?(n.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||On(c))?(n.exit("thematicBreak"),e(c)):t(c)}function l(c){return c===i?(n.consume(c),r++,l):(n.exit("thematicBreakSequence"),Jr(c)?Wi(n,s,"whitespace")(c):s(c))}}const ql={continuation:{tokenize:pDt},exit:mDt,name:"list",tokenize:fDt},dDt={partial:!0,tokenize:vDt},hDt={partial:!0,tokenize:gDt};function fDt(n,e,t){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(f){const m=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Tq(f)){if(r.containerState.type||(r.containerState.type=m,n.enter(m,{_container:!0})),m==="listUnordered")return n.enter("listItemPrefix"),f===42||f===45?n.check(sR,t,c)(f):c(f);if(!r.interrupt||f===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(f)}return t(f)}function l(f){return Tq(f)&&++o<10?(n.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(n.exit("listItemValue"),c(f)):t(f)}function c(f){return n.enter("listItemMarker"),n.consume(f),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,n.check(eF,r.interrupt?t:u,n.attempt(dDt,h,d))}function u(f){return r.containerState.initialBlankLine=!0,a++,h(f)}function d(f){return Jr(f)?(n.enter("listItemPrefixWhitespace"),n.consume(f),n.exit("listItemPrefixWhitespace"),h):t(f)}function h(f){return r.containerState.size=a+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(f)}}function pDt(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(eF,i,a);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Wi(n,e,"listItemIndent",r.containerState.size+1)(s)}function a(s){return r.containerState.furtherBlankLines||!Jr(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(hDt,e,o)(s))}function o(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Wi(n,n.attempt(ql,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function gDt(n,e,t){const r=this;return Wi(n,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(a):t(a)}}function mDt(n){n.exit(this.containerState.type)}function vDt(n,e,t){const r=this;return Wi(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!Jr(a)&&o&&o[1].type==="listItemPrefixWhitespace"?e(a):t(a)}}const Tpe={name:"setextUnderline",resolveTo:yDt,tokenize:bDt};function yDt(n,e){let t=n.length,r,i,a;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!a&&n[t][1].type==="definition"&&(a=t);const o={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",a?(n.splice(i,0,["enter",o,e]),n.splice(a+1,0,["exit",n[r][1],e]),n[r][1].end={...n[a][1].end}):n[r][1]=o,n.push(["exit",o,e]),n}function bDt(n,e,t){const r=this;let i;return a;function a(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(n.enter("setextHeadingLine"),i=c,o(c)):t(c)}function o(c){return n.enter("setextHeadingLineSequence"),s(c)}function s(c){return c===i?(n.consume(c),s):(n.exit("setextHeadingLineSequence"),Jr(c)?Wi(n,l,"lineSuffix")(c):l(c))}function l(c){return c===null||On(c)?(n.exit("setextHeadingLine"),e(c)):t(c)}}const wDt={tokenize:_Dt};function _Dt(n){const e=this,t=n.attempt(eF,r,n.attempt(this.parser.constructs.flowInitial,i,Wi(n,n.attempt(this.parser.constructs.flow,i,n.attempt(ACt,i)),"linePrefix")));return t;function r(a){if(a===null){n.consume(a);return}return n.enter("lineEndingBlank"),n.consume(a),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const xDt={resolveAll:pke()},SDt=fke("string"),TDt=fke("text");function fke(n){return{resolveAll:pke(n==="text"?EDt:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],a=t.attempt(i,o,s);return o;function o(u){return c(u)?a(u):s(u)}function s(u){if(u===null){t.consume(u);return}return t.enter("data"),t.consume(u),l}function l(u){return c(u)?(t.exit("data"),a(u)):(t.consume(u),l)}function c(u){if(u===null)return!0;const d=i[u];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function pke(n){return e;function e(t,r){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return n?n(t,r):t}}function EDt(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let a=i.length,o=-1,s=0,l;for(;a--;){const c=i[a];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)s++,o--;if(o)break;o=-1}else if(c===-2)l=!0,s++;else if(c!==-1){a++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(s=0),s){const c={type:t===n.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(n.splice(t,0,["enter",c,e],["exit",c,e]),t+=2)}t++}return n}const ADt={42:ql,43:ql,45:ql,48:ql,49:ql,50:ql,51:ql,52:ql,53:ql,54:ql,55:ql,56:ql,57:ql,62:oke},CDt={91:MCt},DDt={[-2]:WV,[-1]:WV,32:WV},kDt={35:jCt,42:sR,45:[Tpe,sR],60:UCt,61:Tpe,95:sR,96:xpe,126:xpe},IDt={38:lke,92:ske},MDt={[-5]:YV,[-4]:YV,[-3]:YV,33:aDt,38:lke,42:Eq,60:[sCt,YCt],91:sDt,92:[NCt,ske],93:NX,95:Eq,96:wCt},PDt={null:[Eq,xDt]},ODt={null:[42,95]},RDt={null:[]},NDt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ODt,contentInitial:CDt,disable:RDt,document:ADt,flow:kDt,flowInitial:DDt,insideSpan:PDt,string:IDt,text:MDt},Symbol.toStringTag,{value:"Module"}));function LDt(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},a=[];let o=[],s=[];const l={attempt:M(C),check:M(D),consume:_,enter:S,exit:A,interrupt:M(D,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:m,parser:n,previous:null,sliceSerialize:h,sliceStream:f,write:d};let u=e.tokenize.call(c,l);return e.resolveAll&&a.push(e),c;function d(L){return o=$u(o,L),y(),o[o.length-1]!==null?[]:(P(e,0),c.events=RX(a,c.events,c),c.events)}function h(L,B){return FDt(f(L),B)}function f(L){return jDt(o,L)}function m(){const{_bufferIndex:L,_index:B,line:$,column:Y,offset:q}=r;return{_bufferIndex:L,_index:B,line:$,column:Y,offset:q}}function v(L){i[L.line]=L.column,j()}function y(){let L;for(;r._index<o.length;){const B=o[r._index];if(typeof B=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<B.length;)w(B.charCodeAt(r._bufferIndex));else w(B)}}function w(L){u=u(L)}function _(L){On(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,j()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=L}function S(L,B){const $=B||{};return $.type=L,$.start=m(),c.events.push(["enter",$,c]),s.push($),$}function A(L){const B=s.pop();return B.end=m(),c.events.push(["exit",B,c]),B}function C(L,B){P(L,B.from)}function D(L,B){B.restore()}function M(L,B){return $;function $(Y,q,W){let X,te,re,z;return Array.isArray(Y)?le(Y):"tokenize"in Y?le([Y]):oe(Y);function oe(pe){return ct;function ct(Be){const Se=Be!==null&&pe[Be],_e=Be!==null&&pe.null,me=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(_e)?_e:_e?[_e]:[]];return le(me)(Be)}}function le(pe){return X=pe,te=0,pe.length===0?W:ee(pe[te])}function ee(pe){return ct;function ct(Be){return z=O(),re=pe,pe.partial||(c.currentConstruct=pe),pe.name&&c.parser.constructs.disable.null.includes(pe.name)?he():pe.tokenize.call(B?Object.assign(Object.create(c),B):c,l,be,he)(Be)}}function be(pe){return L(re,z),q}function he(pe){return z.restore(),++te<X.length?ee(X[te]):W}}}function P(L,B){L.resolveAll&&!a.includes(L)&&a.push(L),L.resolve&&$f(c.events,B,c.events.length-B,L.resolve(c.events.slice(B),c)),L.resolveTo&&(c.events=L.resolveTo(c.events,c))}function O(){const L=m(),B=c.previous,$=c.currentConstruct,Y=c.events.length,q=Array.from(s);return{from:Y,restore:W};function W(){r=L,c.previous=B,c.currentConstruct=$,c.events.length=Y,s=q,j()}}function j(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function jDt(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let o;if(t===i)o=[n[t].slice(r,a)];else{if(o=n.slice(t,i),r>-1){const s=o[0];typeof s=="string"?o[0]=s.slice(r):o.shift()}a>0&&o.push(n[i].slice(0,a))}return o}function FDt(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const a=n[t];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function $Dt(n){const r={constructs:GAt([NDt,...(n||{}).extensions||[]]),content:i(eCt),defined:[],document:i(nCt),flow:i(wDt),lazy:{},string:i(SDt),text:i(TDt)};return r;function i(a){return o;function o(s){return LDt(r,a,s)}}}function BDt(n){for(;!cke(n););return n}const Epe=/[\0\t\n\r]/g;function UDt(){let n=1,e="",t=!0,r;return i;function i(a,o,s){const l=[];let c,u,d,h,f;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),d=0,e="",t&&(a.charCodeAt(0)===65279&&d++,t=void 0);d<a.length;){if(Epe.lastIndex=d,c=Epe.exec(a),h=c&&c.index!==void 0?c.index:a.length,f=a.charCodeAt(h),!c){e=a.slice(d);break}if(f===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(a.slice(d,h)),n+=h-d),f){case 0:{l.push(65533),n++;break}case 9:{for(u=Math.ceil(n/4)*4,l.push(-2);n++<u;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}d=h+1}return s&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const VDt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function zDt(n){return n.replace(VDt,HDt)}function HDt(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return ake(t.slice(a?2:1),a?16:10)}return OX(t)||n}const gke={}.hasOwnProperty;function qDt(n,e,t){return typeof e!="string"&&(t=e,e=void 0),GDt(t)(BDt($Dt(t).document().write(UDt()(n,e,!0))))}function GDt(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Mt),autolinkProtocol:O,autolinkEmail:O,atxHeading:a(nt),blockQuote:a(_e),characterEscape:O,characterReference:O,codeFenced:a(me),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(me,o),codeText:a(fe,o),codeTextData:O,data:O,codeFlowValue:O,definition:a(Ge),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(Ve),hardBreakEscape:a(we),hardBreakTrailing:a(we),htmlFlow:a(rt,o),htmlFlowData:O,htmlText:a(rt,o),htmlTextData:O,image:a(on),label:o,link:a(Mt),listItem:a(nr),listItemValue:h,listOrdered:a(kn,d),listUnordered:a(kn),paragraph:a(Le),reference:ee,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(nt),strong:a(Yt),thematicBreak:a(Ut)},exit:{atxHeading:l(),atxHeadingSequence:C,autolink:l(),autolinkEmail:Se,autolinkProtocol:Be,blockQuote:l(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:he,characterReferenceMarkerNumeric:he,characterReferenceValue:pe,characterReference:ct,codeFenced:l(y),codeFencedFence:v,codeFencedFenceInfo:f,codeFencedFenceMeta:m,codeFlowValue:j,codeIndented:l(w),codeText:l(q),codeTextData:j,data:j,definition:l(),definitionDestinationString:A,definitionLabelString:_,definitionTitleString:S,emphasis:l(),hardBreakEscape:l(B),hardBreakTrailing:l(B),htmlFlow:l($),htmlFlowData:j,htmlText:l(Y),htmlTextData:j,image:l(X),label:re,labelText:te,lineEnding:L,link:l(W),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:be,resourceDestinationString:z,resourceTitleString:oe,resource:le,setextHeading:l(P),setextHeadingLineSequence:M,setextHeadingText:D,strong:l(),thematicBreak:l()}};mke(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(Ae){let je={type:"root",children:[]};const tt={stack:[je],tokenStack:[],config:e,enter:s,exit:c,buffer:o,resume:u,data:t},Et=[];let pt=-1;for(;++pt<Ae.length;)if(Ae[pt][1].type==="listOrdered"||Ae[pt][1].type==="listUnordered")if(Ae[pt][0]==="enter")Et.push(pt);else{const Rr=Et.pop();pt=i(Ae,Rr,pt)}for(pt=-1;++pt<Ae.length;){const Rr=e[Ae[pt][0]];gke.call(Rr,Ae[pt][1].type)&&Rr[Ae[pt][1].type].call(Object.assign({sliceSerialize:Ae[pt][2].sliceSerialize},tt),Ae[pt][1])}if(tt.tokenStack.length>0){const Rr=tt.tokenStack[tt.tokenStack.length-1];(Rr[1]||Ape).call(tt,void 0,Rr[0])}for(je.position={start:Sv(Ae.length>0?Ae[0][1].start:{line:1,column:1,offset:0}),end:Sv(Ae.length>0?Ae[Ae.length-2][1].end:{line:1,column:1,offset:0})},pt=-1;++pt<e.transforms.length;)je=e.transforms[pt](je)||je;return je}function i(Ae,je,tt){let Et=je-1,pt=-1,Rr=!1,vn,Ur,Li,un;for(;++Et<=tt;){const dr=Ae[Et];switch(dr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{dr[0]==="enter"?pt++:pt--,un=void 0;break}case"lineEndingBlank":{dr[0]==="enter"&&(vn&&!un&&!pt&&!Li&&(Li=Et),un=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:un=void 0}if(!pt&&dr[0]==="enter"&&dr[1].type==="listItemPrefix"||pt===-1&&dr[0]==="exit"&&(dr[1].type==="listUnordered"||dr[1].type==="listOrdered")){if(vn){let wi=Et;for(Ur=void 0;wi--;){const ze=Ae[wi];if(ze[1].type==="lineEnding"||ze[1].type==="lineEndingBlank"){if(ze[0]==="exit")continue;Ur&&(Ae[Ur][1].type="lineEndingBlank",Rr=!0),ze[1].type="lineEnding",Ur=wi}else if(!(ze[1].type==="linePrefix"||ze[1].type==="blockQuotePrefix"||ze[1].type==="blockQuotePrefixWhitespace"||ze[1].type==="blockQuoteMarker"||ze[1].type==="listItemIndent"))break}Li&&(!Ur||Li<Ur)&&(vn._spread=!0),vn.end=Object.assign({},Ur?Ae[Ur][1].start:dr[1].end),Ae.splice(Ur||Et,0,["exit",vn,dr[2]]),Et++,tt++}if(dr[1].type==="listItemPrefix"){const wi={type:"listItem",_spread:!1,start:Object.assign({},dr[1].start),end:void 0};vn=wi,Ae.splice(Et,0,["enter",wi,dr[2]]),Et++,tt++,Li=void 0,un=!0}}}return Ae[je][1]._spread=Rr,tt}function a(Ae,je){return tt;function tt(Et){s.call(this,Ae(Et),Et),je&&je.call(this,Et)}}function o(){this.stack.push({type:"fragment",children:[]})}function s(Ae,je,tt){this.stack[this.stack.length-1].children.push(Ae),this.stack.push(Ae),this.tokenStack.push([je,tt||void 0]),Ae.position={start:Sv(je.start),end:void 0}}function l(Ae){return je;function je(tt){Ae&&Ae.call(this,tt),c.call(this,tt)}}function c(Ae,je){const tt=this.stack.pop(),Et=this.tokenStack.pop();if(Et)Et[0].type!==Ae.type&&(je?je.call(this,Ae,Et[0]):(Et[1]||Ape).call(this,Ae,Et[0]));else throw new Error("Cannot close `"+Ae.type+"` ("+RD({start:Ae.start,end:Ae.end})+"): it’s not open");tt.position.end=Sv(Ae.end)}function u(){return HAt(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(Ae){if(this.data.expectingFirstListItemValue){const je=this.stack[this.stack.length-2];je.start=Number.parseInt(this.sliceSerialize(Ae),10),this.data.expectingFirstListItemValue=void 0}}function f(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.lang=Ae}function m(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.meta=Ae}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.value=Ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.value=Ae.replace(/(\r?\n|\r)$/g,"")}function _(Ae){const je=this.resume(),tt=this.stack[this.stack.length-1];tt.label=je,tt.identifier=g1(this.sliceSerialize(Ae)).toLowerCase()}function S(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.title=Ae}function A(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.url=Ae}function C(Ae){const je=this.stack[this.stack.length-1];if(!je.depth){const tt=this.sliceSerialize(Ae).length;je.depth=tt}}function D(){this.data.setextHeadingSlurpLineEnding=!0}function M(Ae){const je=this.stack[this.stack.length-1];je.depth=this.sliceSerialize(Ae).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function O(Ae){const tt=this.stack[this.stack.length-1].children;let Et=tt[tt.length-1];(!Et||Et.type!=="text")&&(Et=xn(),Et.position={start:Sv(Ae.start),end:void 0},tt.push(Et)),this.stack.push(Et)}function j(Ae){const je=this.stack.pop();je.value+=this.sliceSerialize(Ae),je.position.end=Sv(Ae.end)}function L(Ae){const je=this.stack[this.stack.length-1];if(this.data.atHardBreak){const tt=je.children[je.children.length-1];tt.position.end=Sv(Ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(je.type)&&(O.call(this,Ae),j.call(this,Ae))}function B(){this.data.atHardBreak=!0}function $(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.value=Ae}function Y(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.value=Ae}function q(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.value=Ae}function W(){const Ae=this.stack[this.stack.length-1];if(this.data.inReference){const je=this.data.referenceType||"shortcut";Ae.type+="Reference",Ae.referenceType=je,delete Ae.url,delete Ae.title}else delete Ae.identifier,delete Ae.label;this.data.referenceType=void 0}function X(){const Ae=this.stack[this.stack.length-1];if(this.data.inReference){const je=this.data.referenceType||"shortcut";Ae.type+="Reference",Ae.referenceType=je,delete Ae.url,delete Ae.title}else delete Ae.identifier,delete Ae.label;this.data.referenceType=void 0}function te(Ae){const je=this.sliceSerialize(Ae),tt=this.stack[this.stack.length-2];tt.label=zDt(je),tt.identifier=g1(je).toLowerCase()}function re(){const Ae=this.stack[this.stack.length-1],je=this.resume(),tt=this.stack[this.stack.length-1];if(this.data.inReference=!0,tt.type==="link"){const Et=Ae.children;tt.children=Et}else tt.alt=je}function z(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.url=Ae}function oe(){const Ae=this.resume(),je=this.stack[this.stack.length-1];je.title=Ae}function le(){this.data.inReference=void 0}function ee(){this.data.referenceType="collapsed"}function be(Ae){const je=this.resume(),tt=this.stack[this.stack.length-1];tt.label=je,tt.identifier=g1(this.sliceSerialize(Ae)).toLowerCase(),this.data.referenceType="full"}function he(Ae){this.data.characterReferenceType=Ae.type}function pe(Ae){const je=this.sliceSerialize(Ae),tt=this.data.characterReferenceType;let Et;tt?(Et=ake(je,tt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Et=OX(je);const pt=this.stack[this.stack.length-1];pt.value+=Et}function ct(Ae){const je=this.stack.pop();je.position.end=Sv(Ae.end)}function Be(Ae){j.call(this,Ae);const je=this.stack[this.stack.length-1];je.url=this.sliceSerialize(Ae)}function Se(Ae){j.call(this,Ae);const je=this.stack[this.stack.length-1];je.url="mailto:"+this.sliceSerialize(Ae)}function _e(){return{type:"blockquote",children:[]}}function me(){return{type:"code",lang:null,meta:null,value:""}}function fe(){return{type:"inlineCode",value:""}}function Ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ve(){return{type:"emphasis",children:[]}}function nt(){return{type:"heading",depth:0,children:[]}}function we(){return{type:"break"}}function rt(){return{type:"html",value:""}}function on(){return{type:"image",title:null,url:"",alt:null}}function Mt(){return{type:"link",title:null,url:"",children:[]}}function kn(Ae){return{type:"list",ordered:Ae.type==="listOrdered",start:null,spread:Ae._spread,children:[]}}function nr(Ae){return{type:"listItem",spread:Ae._spread,checked:null,children:[]}}function Le(){return{type:"paragraph",children:[]}}function Yt(){return{type:"strong",children:[]}}function xn(){return{type:"text",value:""}}function Ut(){return{type:"thematicBreak"}}}function Sv(n){return{line:n.line,column:n.column,offset:n.offset}}function mke(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?mke(n,r):WDt(n,r)}}function WDt(n,e){let t;for(t in e)if(gke.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function Ape(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+RD({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+RD({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+RD({start:e.start,end:e.end})+") is still open")}function YDt(n){const e=this;e.parser=t;function t(r){return qDt(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function KDt(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function XDt(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function ZDt(n,e){const t=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return e.meta&&(i.data={meta:e.meta}),n.patch(e,i),i=n.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},n.patch(e,i),i}function QDt(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function JDt(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function ekt(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=WT(r.toLowerCase()),a=n.footnoteOrder.indexOf(r);let o,s=n.footnoteCounts.get(r);s===void 0?(s=0,n.footnoteOrder.push(r),o=n.footnoteOrder.length):o=a+1,s+=1,n.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};n.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return n.patch(e,c),n.applyData(e,c)}function tkt(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function nkt(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function vke(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=n.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function rkt(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return vke(n,e);const i={src:WT(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return n.patch(e,a),n.applyData(e,a)}function ikt(n,e){const t={src:WT(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function akt(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function okt(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return vke(n,e);const i={href:WT(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:n.all(e)};return n.patch(e,a),n.applyData(e,a)}function skt(n,e){const t={href:WT(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function lkt(n,e,t){const r=n.all(e),i=t?ckt(t):yke(e),a={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const u=r[s];(i||s!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:o};return n.patch(e,c),n.applyData(e,c)}function ckt(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=yke(t[r])}return e}function yke(n){const e=n.spread;return e??n.children.length>1}function ukt(n,e){const t={},r=n.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,a),n.applyData(e,a)}function dkt(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function hkt(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function fkt(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function pkt(n,e){const t=n.all(e),r=t.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],o),i.push(o)}if(t.length>0){const o={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},s=kX(e.children[1]),l=QDe(e.children[e.children.length-1]);s&&l&&(o.position={start:s,end:l}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:n.wrap(i,!0)};return n.patch(e,a),n.applyData(e,a)}function gkt(n,e,t){const r=t?t.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",o=t&&t.type==="table"?t.align:void 0,s=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<s;){const d=e.children[l],h={},f=o?o[l]:void 0;f&&(h.align=f);let m={type:"element",tagName:a,properties:h,children:[]};d&&(m.children=n.all(d),n.patch(d,m),m=n.applyData(d,m)),c.push(m)}const u={type:"element",tagName:"tr",properties:{},children:n.wrap(c,!0)};return n.patch(e,u),n.applyData(e,u)}function mkt(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const Cpe=9,Dpe=32;function vkt(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),i=0;const a=[];for(;r;)a.push(kpe(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(e);return a.push(kpe(e.slice(i),i>0,!1)),a.join("")}function kpe(n,e,t){let r=0,i=n.length;if(e){let a=n.codePointAt(r);for(;a===Cpe||a===Dpe;)r++,a=n.codePointAt(r)}if(t){let a=n.codePointAt(i-1);for(;a===Cpe||a===Dpe;)i--,a=n.codePointAt(i-1)}return i>r?n.slice(r,i):""}function ykt(n,e){const t={type:"text",value:vkt(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function bkt(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const wkt={blockquote:KDt,break:XDt,code:ZDt,delete:QDt,emphasis:JDt,footnoteReference:ekt,heading:tkt,html:nkt,imageReference:rkt,image:ikt,inlineCode:akt,linkReference:okt,link:skt,listItem:lkt,list:ukt,paragraph:dkt,root:hkt,strong:fkt,table:pkt,tableCell:mkt,tableRow:gkt,text:ykt,thematicBreak:bkt,toml:uO,yaml:uO,definition:uO,footnoteDefinition:uO};function uO(){}const bke=-1,tF=0,LD=1,CL=2,LX=3,jX=4,FX=5,$X=6,wke=7,_ke=8,Ipe=typeof self=="object"?self:globalThis,_kt=(n,e)=>{const t=(i,a)=>(n.set(a,i),i),r=i=>{if(n.has(i))return n.get(i);const[a,o]=e[i];switch(a){case tF:case bke:return t(o,i);case LD:{const s=t([],i);for(const l of o)s.push(r(l));return s}case CL:{const s=t({},i);for(const[l,c]of o)s[r(l)]=r(c);return s}case LX:return t(new Date(o),i);case jX:{const{source:s,flags:l}=o;return t(new RegExp(s,l),i)}case FX:{const s=t(new Map,i);for(const[l,c]of o)s.set(r(l),r(c));return s}case $X:{const s=t(new Set,i);for(const l of o)s.add(r(l));return s}case wke:{const{name:s,message:l}=o;return t(new Ipe[s](l),i)}case _ke:return t(BigInt(o),i);case"BigInt":return t(Object(BigInt(o)),i);case"ArrayBuffer":return t(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:s}=new Uint8Array(o);return t(new DataView(s),o)}}return t(new Ipe[a](o),i)};return r},Mpe=n=>_kt(new Map,n)(0),pS="",{toString:xkt}={},{keys:Skt}=Object,xC=n=>{const e=typeof n;if(e!=="object"||!n)return[tF,e];const t=xkt.call(n).slice(8,-1);switch(t){case"Array":return[LD,pS];case"Object":return[CL,pS];case"Date":return[LX,pS];case"RegExp":return[jX,pS];case"Map":return[FX,pS];case"Set":return[$X,pS];case"DataView":return[LD,t]}return t.includes("Array")?[LD,t]:t.includes("Error")?[wke,t]:[CL,t]},dO=([n,e])=>n===tF&&(e==="function"||e==="symbol"),Tkt=(n,e,t,r)=>{const i=(o,s)=>{const l=r.push(o)-1;return t.set(s,l),l},a=o=>{if(t.has(o))return t.get(o);let[s,l]=xC(o);switch(s){case tF:{let u=o;switch(l){case"bigint":s=_ke,u=o.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([bke],o)}return i([s,u],o)}case LD:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}const u=[],d=i([s,u],o);for(const h of o)u.push(a(h));return d}case CL:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return a(o.toJSON());const u=[],d=i([s,u],o);for(const h of Skt(o))(n||!dO(xC(o[h])))&&u.push([a(h),a(o[h])]);return d}case LX:return i([s,o.toISOString()],o);case jX:{const{source:u,flags:d}=o;return i([s,{source:u,flags:d}],o)}case FX:{const u=[],d=i([s,u],o);for(const[h,f]of o)(n||!(dO(xC(h))||dO(xC(f))))&&u.push([a(h),a(f)]);return d}case $X:{const u=[],d=i([s,u],o);for(const h of o)(n||!dO(xC(h)))&&u.push(a(h));return d}}const{message:c}=o;return i([s,{name:l,message:c}],o)};return a},Ppe=(n,{json:e,lossy:t}={})=>{const r=[];return Tkt(!(e||t),!!e,new Map,r)(n),r},DL=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?Mpe(Ppe(n,e)):structuredClone(n):(n,e)=>Mpe(Ppe(n,e));function Ekt(n,e){const t=[{type:"text",value:"↩"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function Akt(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function Ckt(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||Ekt,r=n.options.footnoteBackLabel||Akt,i=n.options.footnoteLabel||"Footnotes",a=n.options.footnoteLabelTagName||"h2",o=n.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<n.footnoteOrder.length;){const c=n.footnoteById.get(n.footnoteOrder[l]);if(!c)continue;const u=n.all(c),d=String(c.identifier).toUpperCase(),h=WT(d.toLowerCase());let f=0;const m=[],v=n.footnoteCounts.get(d);for(;v!==void 0&&++f<=v;){m.length>0&&m.push({type:"text",value:" "});let _=typeof t=="string"?t:t(l,f);typeof _=="string"&&(_={type:"text",value:_}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const _=y.children[y.children.length-1];_&&_.type==="text"?_.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else u.push(...m);const w={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:n.wrap(u,!0)};n.patch(c,w),s.push(w)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...DL(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(s,!0)},{type:"text",value:`
`}]}}const xke=function(n){if(n==null)return Mkt;if(typeof n=="function")return nF(n);if(typeof n=="object")return Array.isArray(n)?Dkt(n):kkt(n);if(typeof n=="string")return Ikt(n);throw new Error("Expected function, string, or object as test")};function Dkt(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=xke(n[t]);return nF(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function kkt(n){const e=n;return nF(t);function t(r){const i=r;let a;for(a in n)if(i[a]!==e[a])return!1;return!0}}function Ikt(n){return nF(e);function e(t){return t&&t.type===n}}function nF(n){return e;function e(t,r,i){return!!(Pkt(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function Mkt(){return!0}function Pkt(n){return n!==null&&typeof n=="object"&&"type"in n}const Ske=[],Okt=!0,Ope=!1,Rkt="skip";function Nkt(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const a=xke(i),o=r?-1:1;s(n,void 0,[])();function s(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=Ske,m,v,y;if((!e||a(l,c,u[u.length-1]||void 0))&&(f=Lkt(t(l,u)),f[0]===Ope))return f;if("children"in l&&l.children){const w=l;if(w.children&&f[0]!==Rkt)for(v=(r?w.children.length:-1)+o,y=u.concat(w);v>-1&&v<w.children.length;){const _=w.children[v];if(m=s(_,v,y)(),m[0]===Ope)return m;v=typeof m[1]=="number"?m[1]:v+o}}return f}}}function Lkt(n){return Array.isArray(n)?n:typeof n=="number"?[Okt,n]:n==null?Ske:[n]}function Tke(n,e,t,r){let i,a,o;typeof e=="function"&&typeof t!="function"?(a=void 0,o=e,i=t):(a=e,o=t,i=r),Nkt(n,a,s,i);function s(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return o(l,d,u)}}const Aq={}.hasOwnProperty,jkt={};function Fkt(n,e){const t=e||jkt,r=new Map,i=new Map,a=new Map,o={...wkt,...t.handlers},s={all:c,applyData:Bkt,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:l,options:t,patch:$kt,wrap:Vkt};return Tke(n,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:i,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),s;function l(u,d){const h=u.type,f=s.handlers[h];if(Aq.call(s.handlers,h)&&f)return f(s,u,d);if(s.options.passThrough&&s.options.passThrough.includes(h)){if("children"in u){const{children:v,...y}=u,w=DL(y);return w.children=s.all(u),w}return DL(u)}return(s.options.unknownHandler||Ukt)(s,u,d)}function c(u){const d=[];if("children"in u){const h=u.children;let f=-1;for(;++f<h.length;){const m=s.one(h[f],u);if(m){if(f&&h[f-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Rpe(m.value)),!Array.isArray(m)&&m.type==="element")){const v=m.children[0];v&&v.type==="text"&&(v.value=Rpe(v.value))}Array.isArray(m)?d.push(...m):d.push(m)}}}return d}}function $kt(n,e){n.position&&(e.position=xAt(n))}function Bkt(n,e){let t=e;if(n&&n.data){const r=n.data.hName,i=n.data.hChildren,a=n.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const o="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:o}}t.type==="element"&&a&&Object.assign(t.properties,DL(a)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function Ukt(n,e){const t=e.data||{},r="value"in e&&!(Aq.call(t,"hProperties")||Aq.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function Vkt(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function Rpe(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function Npe(n,e){const t=Fkt(n,e),r=t.one(n,void 0),i=Ckt(t),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function zkt(n,e){return n&&"run"in n?async function(t,r){const i=Npe(t,{file:r,...e});await n.run(i,r)}:function(t,r){return Npe(t,{file:r,...n||e})}}function Lpe(n){if(n)throw n}var KV,jpe;function Hkt(){if(jpe)return KV;jpe=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},a=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=n.call(c,"constructor"),d=c.constructor&&c.constructor.prototype&&n.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!d)return!1;var h;for(h in c);return typeof h>"u"||n.call(c,h)},o=function(c,u){t&&u.name==="__proto__"?t(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},s=function(c,u){if(u==="__proto__")if(n.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return KV=function l(){var c,u,d,h,f,m,v=arguments[0],y=1,w=arguments.length,_=!1;for(typeof v=="boolean"&&(_=v,v=arguments[1]||{},y=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});y<w;++y)if(c=arguments[y],c!=null)for(u in c)d=s(v,u),h=s(c,u),v!==h&&(_&&h&&(a(h)||(f=i(h)))?(f?(f=!1,m=d&&i(d)?d:[]):m=d&&a(d)?d:{},o(v,{name:u,newValue:l(_,m,h)})):typeof h<"u"&&o(v,{name:u,newValue:h}));return v},KV}var qkt=Hkt();const XV=Br(qkt);function Cq(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function Gkt(){const n=[],e={run:t,use:r};return e;function t(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);s(null,...i);function s(l,...c){const u=n[++a];let d=-1;if(l){o(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?Wkt(u,s)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function Wkt(n,e){let t;return r;function r(...o){const s=n.length>o.length;let l;s&&o.push(i);try{l=n.apply(this,o)}catch(c){const u=c;if(s&&t)throw u;return i(u)}s||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(o,...s){t||(t=!0,e(o,...s))}function a(o){i(null,o)}}const of={basename:Ykt,dirname:Kkt,extname:Xkt,join:Zkt,sep:"/"};function Ykt(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');O2(n);let t=0,r=-1,i=n.length,a;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(a){t=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let o=-1,s=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(a){t=i+1;break}}else o<0&&(a=!0,o=i+1),s>-1&&(n.codePointAt(i)===e.codePointAt(s--)?s<0&&(r=i):(s=-1,r=o));return t===r?r=o:r<0&&(r=n.length),n.slice(t,r)}function Kkt(n){if(O2(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function Xkt(n){O2(n);let e=n.length,t=-1,r=0,i=-1,a=0,o;for(;e--;){const s=n.codePointAt(e);if(s===47){if(o){r=e+1;break}continue}t<0&&(o=!0,t=e+1),s===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function Zkt(...n){let e=-1,t;for(;++e<n.length;)O2(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":Qkt(t)}function Qkt(n){O2(n);const e=n.codePointAt(0)===47;let t=Jkt(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function Jkt(n,e){let t="",r=0,i=-1,a=0,o=-1,s,l;for(;++o<=n.length;){if(o<n.length)s=n.codePointAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=o,a=0;continue}}else if(t.length>0){t="",r=0,i=o,a=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,o):t=n.slice(i+1,o),r=o-i-1;i=o,a=0}else s===46&&a>-1?a++:a=-1}return t}function O2(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const eIt={cwd:tIt};function tIt(){return"/"}function Dq(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function nIt(n){if(typeof n=="string")n=new URL(n);else if(!Dq(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return rIt(n)}function rIt(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const ZV=["history","path","basename","stem","extname","dirname"];class Eke{constructor(e){let t;e?Dq(e)?t={path:e}:typeof e=="string"||iIt(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":eIt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ZV.length;){const a=ZV[r];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)ZV.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?of.basename(this.path):void 0}set basename(e){JV(e,"basename"),QV(e,"basename"),this.path=of.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?of.dirname(this.path):void 0}set dirname(e){Fpe(this.basename,"dirname"),this.path=of.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?of.extname(this.path):void 0}set extname(e){if(QV(e,"extname"),Fpe(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=of.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Dq(e)&&(e=nIt(e)),JV(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?of.basename(this.path,this.extname):void 0}set stem(e){JV(e,"stem"),QV(e,"stem"),this.path=of.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new Ks(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function QV(n,e){if(n&&n.includes(of.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+of.sep+"`")}function JV(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function Fpe(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function iIt(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const aIt=function(n){const r=this.constructor.prototype,i=r[n],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},oIt={}.hasOwnProperty;class BX extends aIt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Gkt()}copy(){const e=new BX;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(XV(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(nz("data",this.frozen),this.namespace[e]=t,this):oIt.call(this.namespace,e)&&this.namespace[e]||void 0:e?(nz("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=hO(e),r=this.parser||this.Parser;return ez("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),ez("process",this.parser||this.Parser),tz("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(a,o){const s=hO(e),l=r.parse(s);r.run(l,s,function(u,d,h){if(u||!d||!h)return c(u);const f=d,m=r.stringify(f,h);cIt(m)?h.value=m:h.result=m,c(u,h)});function c(u,d){u||!d?o(u):a?a(d):t(void 0,d)}}}processSync(e){let t=!1,r;return this.freeze(),ez("processSync",this.parser||this.Parser),tz("processSync",this.compiler||this.Compiler),this.process(e,i),Bpe("processSync","process",t),r;function i(a,o){t=!0,Lpe(a),r=o}}run(e,t,r){$pe(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?a(void 0,r):new Promise(a);function a(o,s){const l=hO(t);i.run(e,l,c);function c(u,d,h){const f=d||e;u?s(u):o?o(f):r(void 0,f,h)}}}runSync(e,t){let r=!1,i;return this.run(e,t,a),Bpe("runSync","run",r),i;function a(o,s){Lpe(o),i=s,r=!0}}stringify(e,t){this.freeze();const r=hO(t),i=this.compiler||this.Compiler;return tz("stringify",i),$pe(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(nz("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?s(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(c.plugins),c.settings&&(i.settings=XV(!0,i.settings,c.settings))}function s(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];a(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===c){h=d;break}if(h===-1)r.push([c,...u]);else if(u.length>0){let[f,...m]=u;const v=r[h][1];Cq(v)&&Cq(f)&&(f=XV(!0,v,f)),r[h]=[c,f,...m]}}}}const sIt=new BX().freeze();function ez(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function tz(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function nz(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $pe(n){if(!Cq(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function Bpe(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function hO(n){return lIt(n)?n:new Eke(n)}function lIt(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function cIt(n){return typeof n=="string"||uIt(n)}function uIt(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const dIt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Upe=[],Vpe={allowDangerousHtml:!0},hIt=/^(https?|ircs?|mailto|xmpp)$/i,fIt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function pIt(n){const e=gIt(n),t=mIt(n);return vIt(e.runSync(e.parse(t),t),n)}function gIt(n){const e=n.rehypePlugins||Upe,t=n.remarkPlugins||Upe,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...Vpe}:Vpe;return sIt().use(YDt).use(t).use(zkt,r).use(e)}function mIt(n){const e=n.children||"",t=new Eke;return typeof e=="string"&&(t.value=e),t}function vIt(n,e){const t=e.allowedElements,r=e.allowElement,i=e.components,a=e.disallowedElements,o=e.skipHtml,s=e.unwrapDisallowed,l=e.urlTransform||yIt;for(const u of fIt)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+dIt+u.id,void 0);return e.className&&(n={type:"element",tagName:"div",properties:{className:e.className},children:n.type==="root"?n.children:[n]}),Tke(n,c),CAt(n,{Fragment:E.Fragment,components:i,ignoreInvalidStyle:!0,jsx:E.jsx,jsxs:E.jsxs,passKeys:!0,passNode:!0});function c(u,d,h){if(u.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let f;for(f in GV)if(Object.hasOwn(GV,f)&&Object.hasOwn(u.properties,f)){const m=u.properties[f],v=GV[f];(v===null||v.includes(u.tagName))&&(u.properties[f]=l(String(m||""),f,u))}}if(u.type==="element"){let f=t?!t.includes(u.tagName):a?a.includes(u.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(u,d,h)),f&&h&&typeof d=="number")return s&&u.children?h.children.splice(d,1,...u.children):h.children.splice(d,1),d}}}function yIt(n){const e=n.indexOf(":"),t=n.indexOf("?"),r=n.indexOf("#"),i=n.indexOf("/");return e===-1||i!==-1&&e>i||t!==-1&&e>t||r!==-1&&e>r||hIt.test(n.slice(0,e))?n:""}const bIt=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fr(async()=>{const{default:r}=await Promise.resolve().then(()=>YT);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class UX extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class wIt extends UX{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _It extends UX{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class xIt extends UX{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var kq;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(kq||(kq={}));var SIt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};class TIt{constructor(e,{headers:t={},customFetch:r,region:i=kq.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=bIt(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return SIt(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=t;let s={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(s["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(s["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(s["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),i),body:c}).catch(m=>{throw new wIt(m)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new _It(u);if(!u.ok)throw new xIt(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}var No={},gS={},mS={},vS={},yS={},bS={},EIt=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},lT=EIt();const AIt=lT.fetch,Ake=lT.fetch.bind(lT),Cke=lT.Headers,CIt=lT.Request,DIt=lT.Response,YT=Object.freeze(Object.defineProperty({__proto__:null,Headers:Cke,Request:CIt,Response:DIt,default:Ake,fetch:AIt},Symbol.toStringTag,{value:"Module"})),kIt=Qke(YT);var fO={},zpe;function Dke(){if(zpe)return fO;zpe=1,Object.defineProperty(fO,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return fO.default=n,fO}var Hpe;function kke(){if(Hpe)return bS;Hpe=1;var n=bS&&bS.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(bS,"__esModule",{value:!0});const e=n(kIt),t=n(Dke());class r{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=Object.assign({},this.headers),this.headers[a]=o,this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h;let f=null,m=null,v=null,y=c.status,w=c.statusText;if(c.ok){if(this.method!=="HEAD"){const C=await c.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?m=C:m=JSON.parse(C))}const S=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),A=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");S&&A&&A.length>1&&(v=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,v=null,y=406,w="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const S=await c.text();try{f=JSON.parse(S),Array.isArray(f)&&c.status===404&&(m=[],f=null,y=200,w="OK")}catch{c.status===404&&S===""?(y=204,w="No Content"):f={message:S}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,y=200,w="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:m,count:v,status:y,statusText:w}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(d=c==null?void 0:c.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(a,o)}returns(){return this}overrideTypes(){return this}}return bS.default=r,bS}var qpe;function Ike(){if(qpe)return yS;qpe=1;var n=yS&&yS.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yS,"__esModule",{value:!0});const e=n(kke());class t extends e.default{select(i){let a=!1;const o=(i??"*").split("").map(s=>/\s/.test(s)&&!a?"":(s==='"'&&(a=!a),s)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const s=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:s=o}={}){const l=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:s=!1,wal:l=!1,format:c="text"}={}){var u;const d=[i?"analyze":null,a?"verbose":null,o?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return yS.default=t,yS}var Gpe;function VX(){if(Gpe)return vS;Gpe=1;var n=vS&&vS.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vS,"__esModule",{value:!0});const e=n(Ike());class t extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const o=Array.from(new Set(a)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:o,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${c}.${a}`),this}match(i){return Object.entries(i).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(i,a,o){return this.url.searchParams.append(i,`not.${a}.${o}`),this}or(i,{foreignTable:a,referencedTable:o=a}={}){const s=o?`${o}.or`:"or";return this.url.searchParams.append(s,`(${i})`),this}filter(i,a,o){return this.url.searchParams.append(i,`${a}.${o}`),this}}return vS.default=t,vS}var Wpe;function Mke(){if(Wpe)return mS;Wpe=1;var n=mS&&mS.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mS,"__esModule",{value:!0});const e=n(VX());class t{constructor(i,{headers:a={},schema:o,fetch:s}){this.url=i,this.headers=a,this.schema=o,this.fetch=s}select(i,{head:a=!1,count:o}={}){const s=a?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:a,defaultToNull:o=!0}={}){const s="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:s,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&u.push(this.headers.Prefer),s&&u.push(`count=${s}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const d=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:a}={}){const o="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),a&&s.push(`count=${a}`),this.headers.Prefer=s.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const a="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return mS.default=t,mS}var SC={},TC={},Ype;function IIt(){return Ype||(Ype=1,Object.defineProperty(TC,"__esModule",{value:!0}),TC.version=void 0,TC.version="0.0.0-automated"),TC}var Kpe;function MIt(){if(Kpe)return SC;Kpe=1,Object.defineProperty(SC,"__esModule",{value:!0}),SC.DEFAULT_HEADERS=void 0;const n=IIt();return SC.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},SC}var Xpe;function PIt(){if(Xpe)return gS;Xpe=1;var n=gS&&gS.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(gS,"__esModule",{value:!0});const e=n(Mke()),t=n(VX()),r=MIt();class i{constructor(o,{headers:s={},schema:l,fetch:c}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),s),this.schemaName=l,this.fetch=c}from(o){const s=new URL(`${this.url}/${o}`);return new e.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,s={},{head:l=!1,get:c=!1,count:u}={}){let d;const h=new URL(`${this.url}/rpc/${o}`);let f;l||c?(d=l?"HEAD":"GET",Object.entries(s).filter(([v,y])=>y!==void 0).map(([v,y])=>[v,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([v,y])=>{h.searchParams.append(v,y)})):(d="POST",f=s);const m=Object.assign({},this.headers);return u&&(m.Prefer=`count=${u}`),new t.default({method:d,url:h,headers:m,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return gS.default=i,gS}var Zpe;function OIt(){if(Zpe)return No;Zpe=1;var n=No&&No.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(No,"__esModule",{value:!0}),No.PostgrestError=No.PostgrestBuilder=No.PostgrestTransformBuilder=No.PostgrestFilterBuilder=No.PostgrestQueryBuilder=No.PostgrestClient=void 0;const e=n(PIt());No.PostgrestClient=e.default;const t=n(Mke());No.PostgrestQueryBuilder=t.default;const r=n(VX());No.PostgrestFilterBuilder=r.default;const i=n(Ike());No.PostgrestTransformBuilder=i.default;const a=n(kke());No.PostgrestBuilder=a.default;const o=n(Dke());return No.PostgrestError=o.default,No.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},No}var RIt=OIt();const NIt=Br(RIt),{PostgrestClient:LIt,PostgrestQueryBuilder:uPt,PostgrestFilterBuilder:dPt,PostgrestTransformBuilder:hPt,PostgrestBuilder:fPt,PostgrestError:pPt}=NIt;let Iq;typeof window>"u"?Iq=require("ws"):Iq=window.WebSocket;const jIt="2.11.10",FIt={"X-Client-Info":`realtime-js/${jIt}`},$It="1.0.0",Pke=1e4,BIt=1e3;var m1;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(m1||(m1={}));var hl;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(hl||(hl={}));var Kd;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Kd||(Kd={}));var Mq;(function(n){n.websocket="websocket"})(Mq||(Mq={}));var Vb;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Vb||(Vb={}));class UIt{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),a=t.getUint8(2);let o=this.HEADER_LENGTH+2;const s=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+a));o=o+a;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:s,event:l,payload:c}}}class Oke{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Hi;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Hi||(Hi={}));const Qpe=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,o)=>(a[o]=VIt(o,n,e,i),a),{})},VIt=(n,e,t,r)=>{const i=e.find(s=>s.name===n),a=i==null?void 0:i.type,o=t[n];return a&&!r.includes(a)?Rke(a,o):Pq(o)},Rke=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return GIt(e,t)}switch(n){case Hi.bool:return zIt(e);case Hi.float4:case Hi.float8:case Hi.int2:case Hi.int4:case Hi.int8:case Hi.numeric:case Hi.oid:return HIt(e);case Hi.json:case Hi.jsonb:return qIt(e);case Hi.timestamp:return WIt(e);case Hi.abstime:case Hi.date:case Hi.daterange:case Hi.int4range:case Hi.int8range:case Hi.money:case Hi.reltime:case Hi.text:case Hi.time:case Hi.timestamptz:case Hi.timetz:case Hi.tsrange:case Hi.tstzrange:return Pq(e);default:return Pq(e)}},Pq=n=>n,zIt=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},HIt=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},qIt=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},GIt=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let a;const o=n.slice(1,t);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>Rke(e,s))}return n},WIt=n=>typeof n=="string"?n.replace(" ","T"):n,Nke=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class rz{constructor(e,t,r={},i=Pke){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Jpe;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Jpe||(Jpe={}));class jD{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jD.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=jD.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=jD.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const a=this.cloneDeep(e),o=this.transformState(t),s={},l={};return this.map(a,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=a[c];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),m=u.filter(y=>f.indexOf(y.presence_ref)<0),v=d.filter(y=>h.indexOf(y.presence_ref)<0);m.length>0&&(s[c]=m),v.length>0&&(l[c]=v)}else s[c]=u}),this.syncDiff(a,{joins:s,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:a,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var c;const u=(c=e[s])!==null&&c!==void 0?c:[];if(e[s]=this.cloneDeep(l),u.length>0){const d=e[s].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[s].unshift(...h)}r(s,u,l)}),this.map(o,(s,l)=>{let c=e[s];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[s]=c,i(s,c,l),c.length===0&&delete e[s]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ege;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ege||(ege={}));var tge;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(tge||(tge={}));var eg;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(eg||(eg={}));class zX{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=hl.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new rz(this,Kd.join,this.params,this.timeout),this.rejoinTimer=new Oke(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hl.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hl.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=hl.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hl.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kd.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new jD(this),this.broadcastEndpointURL=Nke(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:s}}=this.params;this._onError(u=>e==null?void 0:e(eg.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(eg.CLOSED));const l={},c={broadcast:a,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:s};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(eg.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,m=[];for(let v=0;v<f;v++){const y=h[v],{filter:{event:w,schema:_,table:S,filter:A}}=y,C=u&&u[v];if(C&&C.event===w&&C.schema===_&&C.table===S&&C.filter===A)m.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=hl.errored,e==null||e(eg.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(eg.SUBSCRIBED);return}}).receive("error",u=>{this.state=hl.errored,e==null||e(eg.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(eg.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=hl.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kd.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new rz(this,Kd.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new rz(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,a;const o=e.toLocaleLowerCase(),{close:s,error:l,leave:c,join:u}=Kd;if(r&&[s,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,v,y;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(v=f.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var m,v,y,w,_,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const A=f.id,C=(m=f.filter)===null||m===void 0?void 0:m.event;return A&&((v=t.ids)===null||v===void 0?void 0:v.includes(A))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const A=(_=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return A==="*"||A===((S=t==null?void 0:t.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:v,table:y,commit_timestamp:w,type:_,errors:S}=m;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:w,eventType:_,new:{},old:{},errors:S}),this._getPayloadRecords(m))}f.callback(h,r)})}_isClosed(){return this.state===hl.closed}_isJoined(){return this.state===hl.joined}_isJoining(){return this.state===hl.joining}_isLeaving(){return this.state===hl.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&zX.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Kd.close,{},e)}_onError(e){this._on(Kd.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hl.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Qpe(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Qpe(e.columns,e.old_record)),t}}const nge=()=>{},YIt=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KIt{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=FIt,this.params={},this.timeout=Pke,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nge,this.ref=0,this.logger=nge,this.conn=null,this.sendBuffer=[],this.serializer=new UIt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...s)=>Fr(async()=>{const{default:l}=await Promise.resolve().then(()=>YT);return{default:l}},void 0).then(({default:l})=>l(...s)):o=fetch,(...s)=>o(...s)},this.endPoint=`${e}/${Mq.websocket}`,this.httpEndpoint=Nke(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(a,o)=>o(JSON.stringify(a)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Oke(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Iq),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new XIt(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$It}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case m1.connecting:return Vb.Connecting;case m1.open:return Vb.Open;case m1.closing:return Vb.Closing;default:return Vb.Closed}}isConnected(){return this.connectionState()===Vb.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new zX(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:i,ref:a}=e,o=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${t} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Kd.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(BIt,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:a,ref:o}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(s=>s._isMember(r)).forEach(s=>s._trigger(i,a,o)),this.stateChangeCallbacks.message.forEach(s=>s(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Kd.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([YIt],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class XIt{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=m1.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class HX extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Fo(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class ZIt extends HX{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Oq extends HX{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var QIt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};const Lke=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fr(async()=>{const{default:r}=await Promise.resolve().then(()=>YT);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},JIt=()=>QIt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fr(()=>Promise.resolve().then(()=>YT),void 0)).Response:Response}),Rq=n=>{if(Array.isArray(n))return n.map(t=>Rq(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Rq(r)}),e};var l_=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};const iz=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),e2t=(n,e,t)=>l_(void 0,void 0,void 0,function*(){const r=yield JIt();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{e(new ZIt(iz(i),n.status||500))}).catch(i=>{e(new Oq(iz(i),i))}):e(new Oq(iz(n),n))}),t2t=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function R2(n,e,t,r,i,a){return l_(this,void 0,void 0,function*(){return new Promise((o,s)=>{n(t,t2t(e,r,i,a)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>e2t(l,s,r))})})}function kL(n,e,t,r){return l_(this,void 0,void 0,function*(){return R2(n,"GET",e,t,r)})}function Mv(n,e,t,r,i){return l_(this,void 0,void 0,function*(){return R2(n,"POST",e,r,i,t)})}function n2t(n,e,t,r,i){return l_(this,void 0,void 0,function*(){return R2(n,"PUT",e,r,i,t)})}function r2t(n,e,t,r){return l_(this,void 0,void 0,function*(){return R2(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function jke(n,e,t,r,i){return l_(this,void 0,void 0,function*(){return R2(n,"DELETE",e,r,i,t)})}var zl=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};const i2t={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rge={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class a2t{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Lke(i)}uploadOrUpdate(e,t,r,i){return zl(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},rge),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=r,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(Fo(a))return{data:null,error:a};throw a}})}upload(e,t,r){return zl(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return zl(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:rge.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(s.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Fo(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return zl(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const a=yield Mv(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new HX("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(r){if(Fo(r))return{data:null,error:r};throw r}})}update(e,t,r){return zl(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return zl(this,void 0,void 0,function*(){try{return{data:yield Mv(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Fo(i))return{data:null,error:i};throw i}})}copy(e,t,r){return zl(this,void 0,void 0,function*(){try{return{data:{path:(yield Mv(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Fo(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return zl(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Mv(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(Fo(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return zl(this,void 0,void 0,function*(){try{const i=yield Mv(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(Fo(i))return{data:null,error:i};throw i}})}download(e,t){return zl(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=a?`?${a}`:"";try{const s=this._getFinalPath(e);return{data:yield(yield kL(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(s){if(Fo(s))return{data:null,error:s};throw s}})}info(e){return zl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield kL(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Rq(r),error:null}}catch(r){if(Fo(r))return{data:null,error:r};throw r}})}exists(e){return zl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield r2t(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Fo(r)&&r instanceof Oq){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${c}`)}}}remove(e){return zl(this,void 0,void 0,function*(){try{return{data:yield jke(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Fo(t))return{data:null,error:t};throw t}})}list(e,t,r){return zl(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},i2t),t),{prefix:e||""});return{data:yield Mv(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Fo(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const o2t="2.7.1",s2t={"X-Client-Info":`storage-js/${o2t}`};var wS=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};class l2t{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},s2t),t),this.fetch=Lke(r)}listBuckets(){return wS(this,void 0,void 0,function*(){try{return{data:yield kL(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Fo(e))return{data:null,error:e};throw e}})}getBucket(e){return wS(this,void 0,void 0,function*(){try{return{data:yield kL(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Fo(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return wS(this,void 0,void 0,function*(){try{return{data:yield Mv(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Fo(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return wS(this,void 0,void 0,function*(){try{return{data:yield n2t(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Fo(r))return{data:null,error:r};throw r}})}emptyBucket(e){return wS(this,void 0,void 0,function*(){try{return{data:yield Mv(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Fo(t))return{data:null,error:t};throw t}})}deleteBucket(e){return wS(this,void 0,void 0,function*(){try{return{data:yield jke(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Fo(t))return{data:null,error:t};throw t}})}}class c2t extends l2t{constructor(e,t={},r){super(e,t,r)}from(e){return new a2t(this.url,this.headers,e,this.fetch)}}const u2t="2.50.0";let eD="";typeof Deno<"u"?eD="deno":typeof document<"u"?eD="web":typeof navigator<"u"&&navigator.product==="ReactNative"?eD="react-native":eD="node";const d2t={"X-Client-Info":`supabase-js-${eD}/${u2t}`},h2t={headers:d2t},f2t={schema:"public"},p2t={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},g2t={};var m2t=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};const v2t=n=>{let e;return n?e=n:typeof fetch>"u"?e=Ake:e=fetch,(...t)=>e(...t)},y2t=()=>typeof Headers>"u"?Cke:Headers,b2t=(n,e,t)=>{const r=v2t(t),i=y2t();return(a,o)=>m2t(void 0,void 0,void 0,function*(){var s;const l=(s=yield e())!==null&&s!==void 0?s:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},o),{headers:c}))})};var w2t=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};function _2t(n){return n.endsWith("/")?n:n+"/"}function x2t(n,e){var t,r;const{db:i,auth:a,realtime:o,global:s}=n,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>w2t(this,void 0,void 0,function*(){return""})};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}const Fke="2.70.0",NS=30*1e3,Nq=3,az=Nq*NS,S2t="http://localhost:9999",T2t="supabase.auth.token",E2t={"X-Client-Info":`gotrue-js/${Fke}`},Lq="X-Supabase-Api-Version",$ke={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},A2t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,C2t=6e5;class qX extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Qn(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class D2t extends qX{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function k2t(n){return Qn(n)&&n.name==="AuthApiError"}class Bke extends qX{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Oy extends qX{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Cv extends Oy{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function I2t(n){return Qn(n)&&n.name==="AuthSessionMissingError"}class pO extends Oy{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gO extends Oy{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mO extends Oy{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function M2t(n){return Qn(n)&&n.name==="AuthImplicitGrantRedirectError"}class ige extends Oy{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jq extends Oy{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function oz(n){return Qn(n)&&n.name==="AuthRetryableFetchError"}class age extends Oy{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class FD extends Oy{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const IL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oge=` 	
\r=`.split(""),P2t=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<oge.length;e+=1)n[oge[e].charCodeAt(0)]=-2;for(let e=0;e<IL.length;e+=1)n[IL[e].charCodeAt(0)]=e;return n})();function sge(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(IL[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(IL[r]),e.queuedBits-=6}}function Uke(n,e,t){const r=P2t[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function lge(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{N2t(o,r,t)};for(let o=0;o<n.length;o+=1)Uke(n.charCodeAt(o),i,a);return e.join("")}function O2t(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function R2t(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}O2t(r,e)}}function N2t(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function L2t(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)Uke(n.charCodeAt(i),t,r);return new Uint8Array(e)}function j2t(n){const e=[];return R2t(n,t=>e.push(t)),new Uint8Array(e)}function F2t(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>sge(i,t,r)),sge(null,t,r),e.join("")}function $2t(n){return Math.round(Date.now()/1e3)+n}function B2t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Bd=()=>typeof window<"u"&&typeof document<"u",Tb={tested:!1,writable:!1},$D=()=>{if(!Bd())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Tb.tested)return Tb.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Tb.tested=!0,Tb.writable=!0}catch{Tb.tested=!0,Tb.writable=!1}return Tb.writable};function U2t(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const Vke=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fr(async()=>{const{default:r}=await Promise.resolve().then(()=>YT);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},V2t=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",zke=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},vO=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},yO=async(n,e)=>{await n.removeItem(e)};class rF{constructor(){this.promise=new rF.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}rF.promiseConstructor=Promise;function sz(n){const e=n.split(".");if(e.length!==3)throw new FD("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!A2t.test(e[r]))throw new FD("JWT not in base64url format");return{header:JSON.parse(lge(e[0])),payload:JSON.parse(lge(e[1])),signature:L2t(e[2]),raw:{header:e[0],payload:e[1]}}}async function z2t(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function H2t(n,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await n(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function q2t(n){return("0"+n.toString(16)).substr(-2)}function G2t(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,q2t).join("")}async function W2t(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Y2t(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await W2t(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _S(n,e,t=!1){const r=G2t();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await zke(n,`${e}-code-verifier`,i);const a=await Y2t(r);return[a,r===a?"plain":"s256"]}const K2t=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function X2t(n){const e=n.headers.get(Lq);if(!e||!e.match(K2t))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Z2t(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Q2t(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const J2t=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xS(n){if(!J2t.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var eMt=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Nb=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),tMt=[502,503,504];async function cge(n){var e;if(!V2t(n))throw new jq(Nb(n),0);if(tMt.includes(n.status))throw new jq(Nb(n),n.status);let t;try{t=await n.json()}catch(a){throw new Bke(Nb(a),a)}let r;const i=X2t(n);if(i&&i.getTime()>=$ke["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new age(Nb(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Cv}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new age(Nb(t),n.status,t.weak_password.reasons);throw new D2t(Nb(t),n.status||500,r)}const nMt=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function _r(n,e,t,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[Lq]||(a[Lq]=$ke["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await rMt(n,e,t+s,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function rMt(n,e,t,r,i,a){const o=nMt(e,r,i,a);let s;try{s=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new jq(Nb(l),0)}if(s.ok||await cge(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(l){await cge(l)}}function Zp(n){var e;let t=null;sMt(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=$2t(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function uge(n){const e=Zp(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ov(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function iMt(n){return{data:n,error:null}}function aMt(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a}=n,o=eMt(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function oMt(n){return n}function sMt(n){return n.access_token&&n.refresh_token&&n.expires_in}const lz=["global","local","others"];var lMt=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class cMt{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Vke(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=lz[0]){if(lz.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lz.join(", ")}`);try{return await _r(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await _r(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ov})}catch(r){if(Qn(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=lMt(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await _r(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:aMt,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Qn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await _r(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ov})}catch(t){if(Qn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,a,o,s,l;try{const c={nextPage:null,lastPage:0,total:0},u=await _r(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:oMt});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Qn(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){xS(e);try{return await _r(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ov})}catch(t){if(Qn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){xS(e);try{return await _r(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ov})}catch(r){if(Qn(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){xS(e);try{return await _r(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ov})}catch(r){if(Qn(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){xS(e.userId);try{const{data:t,error:r}=await _r(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Qn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){xS(e.userId),xS(e.id);try{return{data:await _r(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}}}const uMt={getItem:n=>$D()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{$D()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{$D()&&globalThis.localStorage.removeItem(n)}};function dge(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function dMt(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const SS={debug:!!(globalThis&&$D()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hke extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class hMt extends Hke{}async function fMt(n,e,t){SS.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),SS.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){SS.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{SS.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw SS.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new hMt(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(SS.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}dMt();const pMt={url:S2t,storageKey:T2t,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:E2t,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hge(n,e,t){return await t()}class _I{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_I.nextInstanceID,_I.nextInstanceID+=1,this.instanceID>0&&Bd()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},pMt),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new cMt({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Vke(i.fetch),this.lock=i.lock||hge,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Bd()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=fMt:this.lock=hge,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:$D()?this.storage=uMt:(this.memoryStorage={},this.storage=dge(this.memoryStorage)):(this.memoryStorage={},this.storage=dge(this.memoryStorage)),Bd()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fke}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=U2t(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Bd()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),M2t(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Qn(t)?{error:t}:{error:new Bke("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const a=await _r(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Zp}),{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(Qn(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,i;try{let a;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await _S(this.storage,this.storageKey)),a=await _r(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},xform:Zp})}else if("phone"in e){const{phone:u,password:d,options:h}=e;a=await _r(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Zp})}else throw new gO("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(Qn(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:o,options:s}=e;t=await _r(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:uge})}else if("phone"in e){const{phone:a,password:o,options:s}=e;t=await _r(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:uge})}else throw new gO("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new pO}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(Qn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,a,o,s,l,c,u,d,h,f;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:y,wallet:w,statement:_,options:S}=e;let A;if(Bd())if(typeof w=="object")A=w;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))A=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=w}const C=new URL((t=S==null?void 0:S.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in A&&A.signIn){const D=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),_?{statement:_}:null));let M;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")M=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)M=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)m=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),v=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${C.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(r=S==null?void 0:S.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((l=S==null?void 0:S.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((d=(u=S==null?void 0:S.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...S.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const D=await A.signMessage(new TextEncoder().encode(m),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=D}}try{const{data:y,error:w}=await _r(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:F2t(v)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Zp});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new pO}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(Qn(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const t=await vO(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:a,error:o}=await _r(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Zp});if(await yO(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new pO}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Qn(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:a,nonce:o}=e,s=await _r(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Zp}),{data:l,error:c}=s;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new pO}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(Qn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,a,o;try{if("email"in e){const{email:s,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await _S(this.storage,this.storageKey));const{error:d}=await _r(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:s,options:l}=e,{data:c,error:u}=await _r(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new gO("You must provide either an email or phone number.")}catch(s){if(Qn(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var t,r;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:s}=await _r(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Zp});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Qn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await _S(this.storage,this.storageKey)),await _r(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:iMt})}catch(a){if(Qn(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Cv;const{error:i}=await _r(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Qn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:o}=await _r(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:o,error:s}=await _r(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s}}throw new gO("You must provide either an email or phone number and a type")}catch(t){if(Qn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await vO(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<az:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _r(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ov}):await this._useSession(async t=>{var r,i,a;const{data:o,error:s}=t;if(s)throw s;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cv}:await _r(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Ov})})}catch(t){if(Qn(t))return I2t(t)&&(await this._removeSession(),await yO(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Cv;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await _S(this.storage,this.storageKey));const{data:c,error:u}=await _r(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:Ov});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Qn(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Cv;const t=Date.now()/1e3;let r=t,i=!0,a=null;const{payload:o}=sz(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Qn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:s}=t;if(s)throw s;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Cv;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Qn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Bd())throw new mO("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mO(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ige("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mO("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ige("No code detected.");const{data:_,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:c}=e;if(!a||!s||!o||!c)throw new mO("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(s);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=NS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:v,error:y}=await this._getUser(a);if(y)throw y;const w={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(Qn(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await vO(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{error:a};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:s}=await this.admin.signOut(o,e);if(s&&!(k2t(s)&&(s.status===404||s.status===401||s.status===403)))return{error:s}}return e!=="others"&&(await this._removeSession(),await yO(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=B2t(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:a},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await _S(this.storage,this.storageKey,!0));try{return await _r(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Qn(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async a=>{var o,s,l,c,u;const{data:d,error:h}=a;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await _r(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Bd()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Qn(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:o}=t;if(o)throw o;return await _r(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Qn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await H2t(async i=>(i>0&&await z2t(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await _r(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Zp})),(i,a)=>{const o=200*Math.pow(2,i);return a&&oz(a)&&Date.now()+o-r<NS})}catch(r){if(this._debug(t,"error",r),Qn(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Bd()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await vO(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<az;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${az}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),oz(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Cv;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new rF;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Cv;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={session:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),Qn(a)){const o={session:null,error:a};return oz(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await zke(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await yO(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bd()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),NS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/NS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${NS}ms, refresh threshold is ${Nq} ticks`),i<=Nq&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Hke)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bd()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await _S(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await _r(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Qn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:o}=t;if(o)return{data:null,error:o};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await _r(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Qn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:s}=await _r(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:s})})}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await _r(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=sz(i.access_token);let s=null;o.aal&&(s=o.aal);let l=s;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+C2t>Date.now()))return r;const{data:i,error:a}=await _r(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new FD("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new FD("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};r=f.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=sz(r);if(Z2t(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:a,header:i,signature:o},error:null}}const c=Q2t(i.alg),u=await this.fetchJwk(i.kid,t),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,j2t(`${s}.${l}`)))throw new FD("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}}}_I.nextInstanceID=0;const gMt=_I;class mMt extends gMt{constructor(e){super(e)}}var vMt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};class yMt{constructor(e,t,r){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=_2t(e),l=new URL(s);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:f2t,realtime:g2t,auth:Object.assign(Object.assign({},p2t),{storageKey:c}),global:h2t},d=x2t(r??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=b2t(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new LIt(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new TIt(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new c2t(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return vMt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:a,flowType:o,lock:s,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mMt({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:s,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new KIt(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bMt=(n,e,t)=>new yMt(n,e,t),ML="your_supabase_project_url_here",PL="your_supabase_anon_key_here";if(ML.includes("your_supabase_project_url_here")||PL.includes("your_supabase_anon_key_here")){const n=`Missing or invalid Supabase environment variables:
    - VITE_SUPABASE_URL: ${ML.includes("your_supabase_project_url_here")?"❌ Placeholder value":"✅"}
    - VITE_SUPABASE_ANON_KEY: ${PL.includes("your_supabase_anon_key_here")?"❌ Placeholder value":"✅"}
    
    For production: Add these as GitHub repository secrets
    For development: Create a .env file in project root with these values`;console.warn("⚠️ Supabase Configuration Warning:",n),console.log("🔧 App will continue without Supabase features until configuration is complete")}const wMt=ML.includes("your_supabase_project_url_here")||PL.includes("your_supabase_anon_key_here")?null:bMt(ML,PL,{auth:{persistSession:!1}}),Dt=wMt,_Mt=Object.freeze(Object.defineProperty({__proto__:null,supabase:Dt},Symbol.toStringTag,{value:"Module"}));class Gl{static generateSessionText(e,t,r){const i=e.startTime?new Date(e.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"Unknown time",a=Math.round(e.duration||0),o=e.sessionType||"work session";let s=`User completed ${a}-minute ${o} on '${t.title}' task from '${r.name}' project at ${i}.`;if(e.status&&(s+=` Session status: ${e.status}.`),t.timeEstimated){const l=Math.round(t.timeSpent/t.timeEstimated*100);s+=` Task progress: ${l}% (${Math.round(t.timeSpent)}/${t.timeEstimated} minutes).`}return e.notes&&(s+=` Session notes: ${e.notes}`),s+=` Task category: ${this.determineTaskCategory(t,r)}.`,s+=` Environment: ${this.getTimeContext(e.startTime)}.`,s}static generateTaskAggregateText(e,t,r){const i=Math.round(e.timeSpent||0),a=t.length,o=a>0?Math.round(i/a):0,s=e.timeEstimated?Math.round(i/e.timeEstimated*100):0;let l=`Task '${e.title}' from project '${r.name}' has accumulated ${i} minutes across ${a} work sessions.`;o>0&&(l+=` Average session duration: ${o} minutes.`),e.timeEstimated&&(l+=` Progress: ${s}% of estimated ${e.timeEstimated} minutes.`),l+=` Current status: ${e.completed?"Completed":"In Progress"}.`;const c=new Date,u=e;if(e.createdAt){const d=new Date(e.createdAt);l+=` Created: ${this.formatRelativeDate(d,c)}.`}if(u.scheduledDate){const d=new Date(u.scheduledDate);let h=` Scheduled: ${this.formatRelativeDate(d,c)}`;u.scheduledStartTime&&u.scheduledEndTime&&(h+=` from ${u.scheduledStartTime} to ${u.scheduledEndTime}`),l+=h+"."}if(u.dueDate&&!u.scheduledDate){const d=new Date(u.dueDate);l+=` Due: ${this.formatDueDate(d,c)}.`}if(u.priority&&(l+=` Priority: ${u.priority}.`),e.updatedAt){const d=new Date(e.updatedAt);l+=` Last updated: ${this.formatRelativeDate(d,c)}.`}if(e.description&&(l+=` Task description: ${e.description}`),a>0){const d=this.analyzeWorkPattern(t);l+=` Time investment pattern: ${d}.`}return l}static generateProjectSummaryText(e,t,r){const i=t.length;if(i===0)return`Project "${e.name}" is newly created with no tasks yet.`;const a=t.filter(S=>S.status==="todo"||!S.completed&&S.status!=="pomodoro"),o=t.filter(S=>S.status==="pomodoro"),s=t.filter(S=>S.completed||S.status==="completed"),l=Math.round(t.reduce((S,A)=>S+(A.timeSpent||0),0)),c=r.length,u=this.calculateProjectAge(e,t);let d=0;a.length>0&&d++,o.length>0&&d++,s.length>0&&d++;let h=`Project "${e.name}" created ${u}, containing ${i} tasks across ${d} status.`;h+=`

`,h+=`TO-DO LIST STATUS (${a.length} tasks):
`,a.length>0?this.prioritizeTasksForDisplay(a,a.length).forEach(A=>{const C=A.timeEstimated?`estimated ${A.timeEstimated} min`:"no estimate",D=this.inferTaskPriority(A),M=this.getTaskDueInfo(A);h+=`- "${A.title}" (${C}, priority: ${D}${M})
`}):h+=`- No tasks in to-do list
`,h+=`
`,h+=`IN POMODORO STATUS (${o.length} tasks):
`,o.length>0?o.forEach(S=>{const A=S.timeEstimated?`${S.timeSpent}/${S.timeEstimated} min completed, ${Math.round(S.timeSpent/S.timeEstimated*100)}% progress`:`${S.timeSpent} min invested`,C=r.filter(M=>M.taskId===S.id).length,D=this.analyzeTaskWorkPattern(S,r);h+=`- "${S.title}" (${A}, ${C} sessions, ${D})
`}):h+=`- No tasks currently in pomodoro
`,h+=`
`,h+=`COMPLETED STATUS (${s.length} tasks):
`,s.length>0?this.getRecentCompletedTasks(s,s.length).forEach(A=>{const C=A.timeSpent?`${A.timeSpent} min`:"no time logged",D=this.getCompletionTimeframe(A);h+=`- "${A.title}" (${C}, completed ${D})
`}):h+=`- No completed tasks yet
`,h+=`
`,Math.round(s.length/i*100);const f=c>0?Math.round(r.reduce((S,A)=>S+(A.duration||0),0)/c):0,m=this.calculateTimeEstimationAccuracy(s),v=this.analyzeProjectMomentum(r),y=this.findPeakProductivityPattern(r),w=this.calculateTaskVelocity(s,u);h+=`PROJECT ANALYTICS: Total ${l} minutes invested across ${c} work sessions over ${this.getProjectDuration(t,r)}. `,h+=`Average session duration: ${f} minutes. `,h+=`Completion velocity: ${w.current} tasks per week${w.target?` (${w.comparison} target of ${w.target})`:""}. `,h+=`Time estimation accuracy: ${m}%. `,h+=`Peak productivity: ${y}. `,h+=`Current momentum: ${v}.`;const _=this.identifyProjectRisks(t,r,o);return _.length>0&&(h+=`

RISK INDICATORS: ${_.join(". ")}.`),e.description&&(h+=`

Project description: ${e.description}`),h}static generateTemporalSummaryText(e,t,r,i=[],a=[]){if(e==="weekly"){const o=new Date(r),s=i.map(u=>({...u,status:u.status})),l=a.map(u=>({...u})),c=t.map(u=>({...u,sessionType:u.sessionType||"work"}));return this.generateWeeklySummary(s,l,c,o)}else if(e==="monthly"){const o=new Date(r),s=i.map(u=>({...u,status:u.status})),l=a.map(u=>({...u})),c=t.map(u=>({...u,sessionType:u.sessionType||"work"}));return this.generateMonthlySummary(s,l,c,o)}else return this.generateDailySummaryText(t,r,i,a)}static generateDailySummaryText(e,t,r,i){const a=e.reduce((l,c)=>l+(c.duration||0),0),o=e.length;let s=`DAILY PRODUCTIVITY SUMMARY: ${new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}

`;return s+=`OVERVIEW: ${a} minutes of productive work across ${o} work sessions. `,s+=`Worked on ${i.length} projects, ${r.length} tasks. `,s+=`Created ${r.filter(l=>{const c=new Date(l.createdAt);return c>=new Date(t)&&c<=new Date(t)}).length} new task${r.filter(l=>{const c=new Date(l.createdAt);return c>=new Date(t)&&c<=new Date(t)}).length>1?"s":""} today.

`,s+=this.generateProjectSummary(e,r,i,a),s+=this.generateTaskSummary(e,r,i),s+=this.generateMetricsAndInsights(e,a,o),s}static generateWeeklySummary(e,t,r,i=Ig(new Date)){const a=DW(i),s=CN({start:i,end:a}).map(_=>An(_,"EEE do")).join(", "),l=r.filter(_=>{let S=this.safeToDate(_.date||_.startTime);return S?S>=i&&S<=a:(console.warn("Invalid session date, skipping:",{sessionId:_.id,date:_.date,startTime:_.startTime,userId:_.userId}),!1)});console.log(`📊 Weekly filter stats for week ${An(i,"yyyy-MM-dd")} to ${An(a,"yyyy-MM-dd")}:`,{totalSessions:r.length,filteredSessions:l.length,weekStart:i.toISOString(),weekEnd:a.toISOString()});const c=l.reduce((_,S)=>_+(S.duration||0),0),u=e.filter(_=>{const S=this.safeToDate(_.updatedAt);return _.completed&&S&&S>=i&&S<=a}),d=e.filter(_=>{const S=this.safeToDate(_.createdAt);return S&&S>=i&&S<=a}),h=t.map(_=>this.calculateProjectProgress(_,e,l,i,a,c)).sort((_,S)=>S.totalDuration-_.totalDuration).filter(_=>_.totalDuration>0);let f=`WEEKLY PRODUCTIVITY SUMMARY: Week of ${An(i,"MMMM d")}-${An(a,"d")}, ${An(i,"yyyy")} (${s})

`;const m=Math.floor(c/60),v=c%60,y=m>0?`${m} hours ${v} minutes`:`${v} minutes`;f+=`OVERVIEW: ${y} total productive time across ${l.length} work sessions. `,f+=`Worked on ${h.length} projects, ${e.length} tasks. `,f+=`Completed ${u.length} tasks, created ${d.length} new tasks this week.

`,f+=`TOP PROJECTS BY TIME INVESTMENT:

`,h.forEach((_,S)=>{const A=Math.floor(_.totalDuration/60),C=_.totalDuration%60,D=A>0?`${A}h ${C}m`:`${C}m`;f+=`${S+1}. "${_.project.name}" - ${D} (${_.percentageOfWeek.toFixed(1)}% of week)
`,f+=`└─ ${this.formatDailyDistribution(_.dailyWork)}
`,_.tasks.sort((M,P)=>P.totalDuration-M.totalDuration).filter(M=>M.totalDuration>0).forEach(M=>{const P=Math.floor(M.totalDuration/60),O=M.totalDuration%60,j=P>0?`${P}h ${O}m`:`${O}m`;f+=`└─ "${M.task.title}" (time spent: ${j})
`})}),f+=`
`,f+=`TOP TASKS BY TIME SPENT:

`;const w=h.flatMap(_=>_.tasks).sort((_,S)=>S.totalDuration-_.totalDuration).filter(_=>_.totalDuration>0);return w.forEach((_,S)=>{const A=t.find(O=>O.id===_.task.projectId);if(!A)return;const C=Math.floor(_.totalDuration/60),D=_.totalDuration%60,M=C>0?`${C}h ${D}m`:`${D}m`;f+=`${S+1}. "${_.task.title}" - ${M} (${A.name} project)
`,f+="└─ Progress: ",_.task.timeEstimated>0?f+=`${_.totalDuration}/${_.task.timeEstimated} estimated minutes (${Math.round(_.progress)}% complete)${_.isCompleted?" ✅":""}
`:f+=`No time estimate set${_.isCompleted?" ✅":""}
`,f+=`└─ Created: ${An(_.createdDate,"MMMM d, yyyy")}
`,_.isCompleted&&_.completedDate&&(f+=`└─ Completed: ${An(_.completedDate,"MMMM d, yyyy")}
`);const P=_.dailyWork.filter(O=>O.duration>0).map(O=>`${An(O.date,"EEE")}(${O.duration}m)`).join(", ");f+=`└─ Daily work: ${P||"No work recorded"}
`}),f+=this.generateWeeklyAnalytics(l,w,h,i,a),f+=this.generateWeeklyPatterns(l,h,i,a),f+=this.generateMomentumIndicators(w,h,l),f}static generateMonthlySummary(e,t,r,i=new Date(new Date().getFullYear(),new Date().getMonth(),1)){const a=i.getFullYear(),o=i.getMonth(),s=new Date(a,o+1,0),l=An(i,"MMMM yyyy"),c=`${An(i,"MMMM d")}-${An(s,"d")}, ${An(i,"yyyy")}`,u=r.filter(M=>{let P=this.safeToDate(M.date||M.startTime);return P&&P>=i&&P<=s}),d=e.filter(M=>u.some(O=>O.taskId===M.id)),h=t.filter(M=>d.some(P=>P.projectId===M.id));console.log(`📊 Monthly summary stats for ${l}:`,{sessions:u.length,tasks:d.length,projects:h.length});const f=u.reduce((M,P)=>M+(P.duration||0),0),m=Math.floor(f/60),v=f%60,y=m>0?`${m} hours ${v} minutes`:`${v} minutes`,w=d.filter(M=>M.completed),_=d.filter(M=>{const P=this.safeToDate(M.createdAt);return P&&P>=i&&P<=s}),S=h.filter(M=>{const P=this.safeToDate(M.createdAt);return P&&P>=i&&P<=s}),A=h.map(M=>this.calculateMonthlyProjectProgress(M,d,u,i,s,f)).sort((M,P)=>P.totalDuration-M.totalDuration).filter(M=>M.totalDuration>0);let C=`MONTHLY PRODUCTIVITY SUMMARY: ${c}

`;if(C+=`OVERVIEW: ${y} total productive time across ${u.length} work sessions. `,C+=`Worked on ${h.length} projects, ${d.length} tasks. `,C+=`Completed ${w.length} tasks, created ${_.length} new tasks`,S.length>0&&(C+=`, ${S.length} new projects`),C+=` this month.

`,C+=`TOP PROJECTS BY TIME INVESTMENT:

`,A.forEach((M,P)=>{const O=Math.floor(M.totalDuration/60),j=M.totalDuration%60,L=O>0?`${O}h ${j}m`:`${j}m`;C+=`${P+1}. "${M.project.name}" - ${L} (${M.percentageOfMonth.toFixed(0)}% of month)
`,C+=`└─ ${this.formatWeeklyDistribution(M.weeklyWork,i)}
`,M.tasks.sort((B,$)=>$.totalDuration-B.totalDuration).filter(B=>B.totalDuration>0).slice(0,6).forEach(B=>{const $=B.totalDuration;C+=`└─ "${B.task.title}" (time spent: ${$}m)
`})}),d.some(M=>!M.projectId||!h.find(P=>P.id===M.projectId))){const M=d.filter(O=>!O.projectId||!h.find(j=>j.id===O.projectId)),P=u.filter(O=>M.some(j=>j.id===O.taskId)).reduce((O,j)=>O+(j.duration||0),0);if(P>0){const O=Math.floor(P/60),j=P%60,L=O>0?`${O}h ${j}m`:`${j}m`,B=(P/f*100).toFixed(0);C+=`${A.length+1}. Unassigned Tasks - ${L} (${B}% of month)
`,C+=`└─ ${this.formatWeeklyDistribution(this.calculateWeeklyWork(u.filter($=>M.some(Y=>Y.id===$.taskId)),i,s),i)}
`,M.sort(($,Y)=>{const q=u.filter(X=>X.taskId===$.id).reduce((X,te)=>X+(te.duration||0),0);return u.filter(X=>X.taskId===Y.id).reduce((X,te)=>X+(te.duration||0),0)-q}).slice(0,3).forEach($=>{const Y=u.filter(q=>q.taskId===$.id).reduce((q,W)=>q+(W.duration||0),0);Y>0&&(C+=`└─ "${$.title}" (time spent: ${Y}m)
`)})}}C+=`
`,C+=`TOP TASKS BY TIME SPENT (MONTH):

`;const D=A.flatMap(M=>M.tasks).sort((M,P)=>P.totalDuration-M.totalDuration).filter(M=>M.totalDuration>0).slice(0,12);return D.forEach((M,P)=>{const O=h.find(B=>B.id===M.task.projectId),j=(O==null?void 0:O.name)||"Unassigned";if(C+=`${P+1}. "${M.task.title}" - ${M.totalDuration}m (${j} project)
`,M.task.timeEstimated>0){const B=Math.round(M.totalDuration/M.task.timeEstimated*100);C+=`└─ Progress: ${M.isCompleted?"Completed ✅":`${B}% complete`} (${M.totalDuration}/${M.task.timeEstimated} estimated minutes)
`}else C+=`└─ Progress: ${M.isCompleted?"Completed ✅":"In progress"} (No time estimate set)
`;C+=`└─ Created: ${An(M.createdDate,"MMMM d, yyyy")}
`,M.isCompleted&&M.completedDate&&(C+=`└─ Completed: ${An(M.completedDate,"MMMM d, yyyy")}
`);const L=this.formatWeeklyWorkDistribution(M.weeklyWork,i);C+=`└─ Weekly work: ${L}
`}),C+=`
`,C+=this.generateMonthlyAnalytics(u,D,A,i,s),C+=this.generateMonthlyPatterns(u,A,D,i,s),C+=this.generateMonthlyAchievements(w,_,S,A),C+=this.generateMonthlyRecommendations(u,D,A,d),C}static generateTaskSessionSummaryText(e,t,r){const i=Math.round(t.reduce((m,v)=>m+(v.duration||0),0)),a=t.length,o=a>0?Math.round(i/a):0,s=e.timeEstimated?Math.round(e.timeSpent/e.timeEstimated*100):0;let l=`Task '${e.title}' from project '${r.name}' has been worked on across ${a} sessions, totaling ${i} minutes.`;o>0&&(l+=` Average session duration: ${o} minutes.`),e.timeEstimated&&(l+=` Progress: ${s}% of estimated ${e.timeEstimated} minutes.`);const c=this.analyzeWorkPattern(t);l+=` Work pattern: ${c}.`;const u=this.findPeakProductivityHour(t);u&&(l+=` Most productive time for this task: ${u}.`);const d=t.map(m=>{try{let v=m.date||"";if(typeof v=="string"&&v.includes("_")&&(v=v.split("_")[0]),typeof v=="string"){const w=v.match(/(\d{4}-\d{2}-\d{2})/);w&&(v=w[1])}return(this.safeToDate(v)||(m.startTime?this.safeToDate(m.startTime):null)||new Date).toDateString()}catch(v){return console.warn("Error parsing session date for distribution analysis:",m,v),new Date().toDateString()}}),h=new Set(d).size;h>1&&(l+=` Worked on across ${h} different days.`);const f=t.filter(m=>m.notes&&m.notes.trim().length>0);if(f.length>0){const m=f.map(v=>v.notes).join(" ");l+=` Session insights: ${m}`}return l+=` Current status: ${e.completed?"Completed":"In Progress"}.`,e.description&&(l+=` Task description: ${e.description}`),l}static determineTaskCategory(e,t){return e.title.toLowerCase().includes("bug")||e.title.toLowerCase().includes("fix")?"Bug Fix":e.title.toLowerCase().includes("feature")||e.title.toLowerCase().includes("implement")?"Feature Development":e.title.toLowerCase().includes("test")||e.title.toLowerCase().includes("testing")?"Testing":t.name||"General"}static analyzeWorkPattern(e){if(e.length<2)return"limited session data";const t=e.map(i=>i.duration||0),r=t.reduce((i,a)=>i+a,0)/t.length;return r>30?"sustained long-form focus sessions":r<15?"frequent short burst sessions":"balanced work session rhythm"}static extractKeyCategories(e,t){const r=new Set;return e.forEach(i=>{i.title.toLowerCase().includes("bug")&&r.add("Bug Fixes"),i.title.toLowerCase().includes("feature")&&r.add("Features"),i.title.toLowerCase().includes("test")&&r.add("Testing"),i.title.toLowerCase().includes("design")&&r.add("Design")}),r.size===0&&r.add(t.name),Array.from(r).slice(0,3)}static analyzeProjectMomentum(e){if(e.length<3)return"insufficient data for momentum analysis";const t=e.filter(o=>o.startTime).sort((o,s)=>new Date(o.startTime).getTime()-new Date(s.startTime).getTime());if(t.length<3)return"consistent activity";const i=t.slice(-3).reduce((o,s)=>o+(s.duration||0),0)/3,a=t.slice(0,-3).reduce((o,s)=>o+(s.duration||0),0)/Math.max(1,t.length-3);return i>a*1.2?"accelerating momentum":i<a*.8?"declining momentum":"steady momentum"}static findPeakProductivityHour(e){if(!e.length)return null;const t=new Map;if(e.forEach(i=>{if(i.startTime){const a=new Date(i.startTime).getHours();t.set(a,(t.get(a)||0)+(i.duration||0))}}),t.size===0)return null;const r=Array.from(t.entries()).reduce((i,[a,o])=>o>(t.get(i)||0)?a:i,0);return`${r}:00-${r+1}:00`}static analyzeTemporalPattern(e){if(!e.length)return"No sessions recorded";const t=e.filter(a=>{const o=a.startTime?new Date(a.startTime).getHours():0;return o>=5&&o<12}).length,r=e.filter(a=>{const o=a.startTime?new Date(a.startTime).getHours():0;return o>=12&&o<17}).length,i=e.filter(a=>{const o=a.startTime?new Date(a.startTime).getHours():0;return o>=17&&o<22}).length;return t>r&&t>i?"Morning-focused":r>t&&r>i?"Afternoon-focused":i>t&&i>r?"Evening-focused":"Evenly distributed"}static assessFocusQuality(e){if(!e.length)return"No data available";const t=e.reduce((a,o)=>a+(o.duration||0),0)/e.length,r=e.some(a=>(a.duration||0)>=25),i=e.filter(a=>(a.duration||0)<15).length;return t>=20&&r&&i<=e.length*.2?"Excellent - consistent long focus periods":t>=15&&i<=e.length*.3?"Good - balanced focus periods":t>=10?"Fair - moderate focus with room for improvement":"Needs improvement - consider longer focus sessions"}static getTimeContext(e){if(!e)return"standard workspace";const t=new Date(e).getHours();return t<6?"late night focused environment":t<12?"morning productivity environment":t<17?"afternoon work environment":t<22?"evening work environment":"night work environment"}static formatRelativeDate(e,t=new Date){return e.toLocaleDateString()}static formatDueDate(e,t=new Date){const r=Math.floor((e.getTime()-t.getTime())/864e5),i=e.toLocaleDateString();return r<0?`${i} - OVERDUE`:i}static calculateProjectAge(e,t){if(t.length===0)return"recently";const r=t.reduce((a,o)=>new Date(o.createdAt)<new Date(a.createdAt)?o:a);return`on ${new Date(r.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`}static getTaskCategoryCount(e){const t=new Set;return e.forEach(r=>{r.title.toLowerCase().includes("bug")||r.title.toLowerCase().includes("fix")?t.add("Bug Fixes"):r.title.toLowerCase().includes("feature")||r.title.toLowerCase().includes("implement")?t.add("Features"):r.title.toLowerCase().includes("test")||r.title.toLowerCase().includes("testing")?t.add("Testing"):r.title.toLowerCase().includes("design")?t.add("Design"):t.add("General")}),t.size}static prioritizeTasksForDisplay(e,t){return e.sort((r,i)=>{const a=r.timeEstimated||0,o=i.timeEstimated||0;return a!==o?o-a:new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime()}).slice(0,t)}static inferTaskPriority(e){return e.timeEstimated?e.timeEstimated>300?"high":e.timeEstimated>120?"medium":"low":"low"}static getTaskDueInfo(e){return""}static analyzeTaskWorkPattern(e,t){const r=t.filter(a=>a.taskId===e.id);if(r.length===0)return"no sessions yet";const i=r.reduce((a,o)=>a+(o.duration||0),0)/r.length;return i>30?"sustained focus sessions":i<15?"short burst sessions":"balanced work rhythm"}static getRecentCompletedTasks(e,t){return e.sort((r,i)=>new Date(i.updatedAt||i.createdAt).getTime()-new Date(r.updatedAt||r.createdAt).getTime()).slice(0,t)}static getCompletionTimeframe(e){return`on ${new Date(e.updatedAt||e.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`}static calculateTimeEstimationAccuracy(e){const t=e.filter(i=>i.timeEstimated&&i.timeEstimated>0);if(t.length===0)return 0;const r=t.reduce((i,a)=>{const o=Math.min(a.timeSpent/a.timeEstimated,a.timeEstimated/a.timeSpent)*100;return i+o},0);return Math.round(r/t.length)}static findPeakProductivityPattern(e){if(e.length===0)return"no data available";const t={},r={};e.forEach(u=>{if(u.startTime){const d=new Date(u.startTime),h=d.getDay(),f=d.getHours();t[h]=(t[h]||0)+(u.duration||0),r[f]=(r[f]||0)+(u.duration||0)}});const i=Object.entries(t).reduce((u,[d,h])=>h>u[1]?[d,h]:u,["0",0]),a=Object.entries(r).reduce((u,[d,h])=>h>u[1]?[d,h]:u,["0",0]),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][parseInt(i[0])],c=parseInt(a[0])>=12?"afternoon":"morning";return`${s} ${c}s`}static calculateTaskVelocity(e,t){if(e.length===0)return{current:0};const r=t.match(/(\d+)\s+weeks?/),i=r?parseInt(r[1]):1,a=Number((e.length/i).toFixed(1)),o=2.5;let s="below";return a>=o&&(s="meeting"),a>o*1.1&&(s="exceeding"),{current:a,target:o,comparison:s}}static getProjectDuration(e,t){if(e.length===0)return"no duration data";const r=[...e.map(l=>new Date(l.createdAt)),...t.map(l=>l.startTime?new Date(l.startTime):new Date)].filter(l=>l);if(r.length===0)return"no duration data";const i=new Date(Math.min(...r.map(l=>l.getTime()))),a=new Date(Math.max(...r.map(l=>l.getTime()))),o=i.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),s=a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o===s?`since ${o}`:`from ${o} to ${s}`}static identifyProjectRisks(e,t,r){const i=[],a=r.filter(l=>l.timeEstimated?l.timeSpent>l.timeEstimated*1.2:!1);a.length>0&&i.push(`${a.length} task${a.length>1?"s":""} behind schedule`),t.filter(l=>l.startTime?(Date.now()-new Date(l.startTime).getTime())/(1e3*60*60*24)<=7:!1).length===0&&t.length>0&&i.push("No recent activity in past week");const s=e.filter(l=>l.completed);return e.length>5&&s.length/e.length<.3&&i.push("Low completion rate, recommend schedule review"),i}static generateDailyInsights(e,t,r,i){const a=[],o=r/i;o<15&&a.push(`Short session durations (${Math.round(o)}-minute average) suggest frequent task switching`);const s=t.filter(l=>{if(!l.timeEstimated||!l.timeSpent)return!1;const c=l.timeSpent/l.timeEstimated;return c>.3&&c<.8});if(s.length>0){const l=s[0];l.timeEstimated&&l.timeSpent&&a.push(`The ${Math.round(l.timeSpent/l.timeEstimated*100)}% progress on "${l.title}" makes it a good completion candidate for tomorrow`)}return e.some(l=>!l.projectId)&&a.push("Consider consolidating unassigned tasks into proper projects for better focus"),a.join(". ")}static generateProgressBar(e){const r=Math.round(e/100*20),i=20-r;return"█".repeat(r)+"░".repeat(i)}static parseSessionDate(e){try{if(e.startTime){const t=new Date(e.startTime);if(!isNaN(t.getTime()))return t}if(e.date){let t=e.date;if(typeof t=="string"&&t.includes("_")&&(t=t.split("_")[0]),typeof t=="string"){const i=t.match(/(\d{4}-\d{2}-\d{2})/);i&&(t=i[1])}const r=new Date(t);if(!isNaN(r.getTime()))return new Date(An(r,"yyyy-MM-dd"));if(typeof t=="string"&&t.match(/^\d{4}-W\d{1,2}$/)){const i=this.parseISOWeekDate(t);if(i&&!isNaN(i.getTime()))return i}}return console.warn("No valid date found in session:",e),null}catch(t){return console.warn("Error parsing session date:",e,t),null}}static parseISOWeekDate(e){try{const[t,r]=e.split("-W").map(Number);if(!t||!r||r<1||r>53)return console.warn("Invalid ISO week format:",e),null;const i=new Date(t,0,1);for(;i.getDay()!==1;)i.setDate(i.getDate()+1);return i.setDate(i.getDate()+(r-1)*7),isNaN(i.getTime())?null:i}catch(t){return console.warn("Error parsing ISO week date:",e,t),null}}static isWithinTimeframe(e,t,r){try{if(!e)return!1;let i;const a=new Date(t);if(!isNaN(a.getTime()))i=a;else if(t.match(/^\d{4}-W\d{1,2}$/)){const o=this.parseISOWeekDate(t);if(!o)return!1;i=o}else throw new Error("Invalid reference date format");if(isNaN(i.getTime()))throw new Error("Invalid reference date");if(r==="weekly"){const o=i.getDay(),s=i.getDate()-o+(o===0?-6:1);i=new Date(i.setDate(s));const l=new Date(i);l.setDate(l.getDate()+6);const c=new Date(e);return c.setHours(0,0,0,0),i.setHours(0,0,0,0),l.setHours(23,59,59,999),c>=i&&c<=l}else if(r==="monthly"){const o=i.getMonth(),s=i.getFullYear();i=new Date(s,o,1);const l=new Date(s,o+1,0),c=new Date(e);return c.setHours(0,0,0,0),i.setHours(0,0,0,0),l.setHours(23,59,59,999),c>=i&&c<=l}else return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()&&e.getDate()===i.getDate()}catch(i){return console.error("Error checking timeframe:",i),!1}}static getOrdinalSuffix(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}static generateProjectSummary(e,t,r,i){let a=`TOP PROJECTS BY TIME INVESTMENT:

`;const o=new Map;return e.forEach(l=>{var u;const c=(u=t.find(d=>d.id===l.taskId))==null?void 0:u.projectId;c&&o.set(c,(o.get(c)||0)+(l.duration||0))}),Array.from(o.entries()).sort((l,c)=>c[1]-l[1]).forEach(([l,c],u)=>{const d=r.find(w=>w.id===l),h=l==="unassigned"?"Unassigned Tasks":(d==null?void 0:d.name)||"Unknown Project",f=Math.round(c/i*100),m=Math.floor(c/60),v=c%60,y=m>0?`${m}h ${v}m`:`${v}m`;a+=`${u+1}. "${h}" - ${y} (${f}% of total time)
`}),a}static generateTaskSummary(e,t,r){let i=`TOP TASKS BY TIME SPENT:

`;const a=new Map;return e.forEach(s=>{s.taskId&&a.set(s.taskId,(a.get(s.taskId)||0)+(s.duration||0))}),Array.from(a).sort((s,l)=>l[1]-s[1]).map(([s,l])=>({taskId:s,duration:l})).forEach(({taskId:s,duration:l},c)=>{const u=t.find(h=>h.id===s),d=r.find(h=>h.id===(u==null?void 0:u.projectId));if(u){const h=Math.floor(l/60),f=l%60,m=h>0?`${h}h ${f}m`:`${f}m`;i+=`${c+1}. "${u.title}" - ${m} (${(d==null?void 0:d.name)||"Unassigned"} project)
`}}),i}static generateMetricsAndInsights(e,t,r){const i=t/r;let a=`PRODUCTIVITY METRICS:
`;return a+=`- Total Productive Time: ${Math.floor(t/60)}h ${t%60}m
`,a+=`- Session Count: ${r} work sessions
`,a+=`- Average Session: ~${Math.round(i)} minutes
`,a+=`- Session Distribution: ${this.analyzeTimeOfDayDistribution(e)}
`,a+=`- Focus Quality: ${this.analyzeFocusQuality(e)}

`,a}static analyzeTimeOfDayDistribution(e){if(e.length===0)return"No sessions recorded";const t=e.filter(a=>{if(!a.startTime)return!1;const o=new Date(a.startTime).getHours();return o>=5&&o<12}).length,r=e.filter(a=>{if(!a.startTime)return!1;const o=new Date(a.startTime).getHours();return o>=12&&o<17}).length,i=e.filter(a=>{if(!a.startTime)return!1;const o=new Date(a.startTime).getHours();return o>=17&&o<22}).length;return t>r&&t>i?"Morning-focused":r>t&&r>i?"Afternoon-focused":i>t&&i>r?"Evening-focused":"Evenly distributed"}static analyzeFocusQuality(e){if(!e.length)return"No data available";const t=e.reduce((a,o)=>a+(o.duration||0),0)/e.length,r=e.some(a=>(a.duration||0)>=25),i=e.filter(a=>(a.duration||0)<15).length;return t>=20&&r&&i<=e.length*.2?"Excellent - consistent long focus periods":t>=15&&i<=e.length*.3?"Good - balanced focus periods":t>=10?"Fair - moderate focus with room for improvement":"Needs improvement - consider longer focus sessions"}static formatDayHeader(e){return An(e,"EEE do")}static formatMinutes(e){const t=Math.floor(e/60),r=e%60;return t>0?`${t} hours ${r} minutes`:`${r} minutes`}static formatDailyWork(e){return e.map(t=>`${An(t.date,"EEE")}: ${t.duration}m`).join(", ")}static calculateDailyWork(e,t,r,i){return CN({start:t,end:r}).map(o=>{const s=e.filter(l=>{try{const c=l.date||l.startTime;if(!c)return!1;let u=c;if(typeof u=="string"){u.includes("_")&&(u=u.split("_")[0]);const m=u.match(/(\d{4}-\d{2}-\d{2})/);m&&(u=m[1])}const d=this.safeToDate(u);if(!d)return console.warn("Invalid session date in calculateDailyWork:",{original:c,cleaned:u}),!1;const h=An(d,"yyyy-MM-dd"),f=An(o,"yyyy-MM-dd");return h===f&&(!i||i(l))}catch(c){return console.warn("Error processing session in calculateDailyWork:",l,c),!1}});return{date:o,duration:s.reduce((l,c)=>l+(c.duration||0),0),sessions:s.length}})}static calculateProjectProgress(e,t,r,i,a,o){const s=r.filter(f=>t.some(m=>m.projectId===e.id&&m.id===f.taskId)),l=this.calculateDailyWork(s,i,a),c=l.reduce((f,m)=>f+m.duration,0),u=o>0?c/o*100:0,h=t.filter(f=>f.projectId===e.id).map(f=>this.calculateTaskProgress(f,e,r,i,a));return{project:e,tasks:h,dailyWork:l,totalDuration:c,percentageOfWeek:u}}static calculateTaskProgress(e,t,r,i,a){const o=r.filter(h=>h.taskId===e.id),s=this.calculateDailyWork(o,i,a),l=s.reduce((h,f)=>h+f.duration,0),c=e.timeEstimated>0?l/e.timeEstimated*100:0;let u,d;try{u=new Date(e.createdAt),isNaN(u.getTime())&&(console.warn("Invalid task createdAt date, using current date:",e),u=new Date)}catch(h){console.warn("Error parsing task createdAt, using current date:",e,h),u=new Date}try{e.completed&&e.updatedAt&&(d=new Date(e.updatedAt),isNaN(d.getTime())&&(console.warn("Invalid task updatedAt date, ignoring completion date:",e),d=void 0))}catch(h){console.warn("Error parsing task updatedAt, ignoring completion date:",e,h),d=void 0}return{task:e,project:t,dailyWork:s,totalDuration:l,progress:c,isCompleted:e.completed,createdDate:u,completedDate:d}}static formatDailyDistribution(e){return e.map(t=>`${An(t.date,"EEE")}: ${t.duration}m`).join(", ")}static safeToDate(e){try{if(!e)return null;if(typeof e=="object"&&typeof e.toDate=="function"&&(e=e.toDate()),e instanceof Date)return isNaN(e.getTime())?null:e;if(typeof e=="number"||/^\d+$/.test(e)){const t=new Date(Number(e));return isNaN(t.getTime())?null:t}if(typeof e=="string"){let t=e;if(t.includes("_")&&(t=t.split("_")[0]),/^\d{4}-W\d{1,2}$/.test(t)){const a=this.parseISOWeekDate(t);return a&&!isNaN(a.getTime())?a:null}const r=t.match(/(\d{4}-\d{2}-\d{2})/);r&&(t=r[1]);const i=new Date(t);return isNaN(i.getTime())?null:i}return null}catch{return null}}static generateWeeklyAnalytics(e,t,r,i,a){let o=`

WEEKLY PRODUCTIVITY ANALYTICS:

`;const s=this.calculateDailyWork(e,i,a);s.filter(C=>C.duration>0);const l=s.reduce((C,D)=>D.duration>C.duration?D:C,s[0]),c=s.reduce((C,D)=>D.duration<C.duration&&D.duration>0?D:C,s.find(C=>C.duration>0)||s[0]);if(o+=`- Most Productive Day: ${An(l.date,"EEE")} (${this.formatMinutes(l.duration)} across ${l.sessions} sessions)
`,c&&c.duration>0)o+=`- Least Productive Day: ${An(c.date,"EEE")} (${this.formatMinutes(c.duration)})
`;else{const C=s.filter(D=>D.duration===0);if(C.length>0){const D=C.map(M=>An(M.date,"EEE")).join(" & ");o+=`- Least Productive Day: ${D} (planned rest days)
`}}const u=s.filter(C=>![0,6].includes(C.date.getDay())),d=u.length>0?Math.round(u.reduce((C,D)=>C+D.duration,0)/u.length):0;o+=`- Average Daily Time: ${d} minutes (weekdays only)
`;const h=e.length>0?Math.round(e.reduce((C,D)=>C+D.duration,0)/e.length*10)/10:0;o+=`- Average Session Duration: ${h} minutes
`;const f=t.filter(C=>C.isCompleted).length,m=t.length>0?Math.round(f/t.length*100):0;o+=`- Task Completion Rate: ${m}% (${f}/${t.length} tasks completed)
`,o+=`- Projects Worked On: ${r.length} projects
`;const v=t.filter(C=>C.createdDate>=i&&C.createdDate<=a).length,y=r.filter(C=>{const D=C.project.createdAt;return D&&D>=i&&D<=a}).length;let w=`- Task Creation Activity: ${v} new tasks`;y>0&&(w+=`, ${y} new project${y>1?"s":""} created`),o+=w+`
`;const _=t.filter(C=>C.task.timeEstimated>0),S=_.filter(C=>Math.abs(C.totalDuration-C.task.timeEstimated)/C.task.timeEstimated<=.1),A=_.length>0?Math.round(S.length/_.length*100):0;return o+=`- Time Estimation Accuracy: ${A}% of completed tasks within 10% of estimate
`,o}static generateWeeklyPatterns(e,t,r,i){let a=`
WEEKLY PATTERNS:

`;const o=this.calculateDailyWork(e,r,i),s=o.filter(v=>![0,6].includes(v.date.getDay())),l=o.filter(v=>[0,6].includes(v.date.getDay())),c=s.reduce((v,y)=>v+y.duration,0),u=l.reduce((v,y)=>v+y.duration,0);c>0&&u===0?a+=`- Strong Mon-Fri productivity pattern (no weekend work)
`:c>u*3?a+=`- Weekday-focused productivity pattern (limited weekend work)
`:a+=`- Consistent work pattern across all days
`;const d=o.reduce((v,y)=>y.duration>v.duration?y:v);d.duration>0&&(a+=`- Mid-week peak on ${An(d.date,"EEE")} (${this.formatMinutes(d.duration)})
`);const h=t.find(v=>v.totalDuration>0);h&&(a+=`- Consistent focus on ${h.project.name} project (${h.percentageOfWeek.toFixed(0)}% of total time)
`);const f=t.filter(v=>v.totalDuration>0);f.length>1?a+=`- Project diversification: ${f.length} active projects maintained
`:f.length===1&&(a+=`- Single-project focus maintained throughout week
`);const m=e.filter(v=>v.startTime);if(m.length>0){const v=m.filter(w=>{const _=w.startTime.getHours();return _>=6&&_<12}).reduce((w,_)=>w+_.duration,0),y=m.filter(w=>{const _=w.startTime.getHours();return _>=12&&_<18}).reduce((w,_)=>w+_.duration,0);v>y*1.5?a+=`- Morning-heavy work pattern based on session timing
`:y>v*1.5?a+=`- Afternoon-focused work pattern based on session timing
`:a+=`- Balanced morning-afternoon work distribution
`}return a}static generateMomentumIndicators(e,t,r){let i=`
MOMENTUM INDICATORS: `;const a=e.filter(u=>u.progress>=60),o=e.filter(u=>u.isCompleted),s=t.filter(u=>u.dailyWork.filter(h=>h.duration>0).length>=3),l=[];if(a.length>0&&l.push(`Good progress momentum with ${Math.round(a.reduce((u,d)=>u+d.progress,0)/a.length)}% completion on ${a.length} major tasks`),s.length>0){const u=s[0];l.push(`"${u.project.name}" project showing strong consistency`)}o.length>0&&l.push(`${o.length} task completion${o.length>1?"s":""} demonstrate good follow-through`);const c=e.filter(u=>u.progress>=80&&!u.isCompleted);return c.length>0&&l.push(`Ready to push ${c.length} tasks across completion threshold next week`),l.length===0?i+="Building momentum with steady progress across active tasks and projects.":i+=l.join(". ")+".",i}static calculateMonthlyProjectProgress(e,t,r,i,a,o){const s=t.filter(f=>f.projectId===e.id),l=r.filter(f=>f.projectId===e.id),c=l.reduce((f,m)=>f+(m.duration||0),0),u=o>0?c/o*100:0,d=this.calculateWeeklyWork(l,i,a),h=s.map(f=>this.calculateMonthlyTaskProgress(f,e,r,i,a));return{project:e,tasks:h,weeklyWork:d,totalDuration:c,percentageOfMonth:u}}static calculateMonthlyTaskProgress(e,t,r,i,a){const o=r.filter(f=>f.taskId===e.id),s=o.reduce((f,m)=>f+(m.duration||0),0),l=e.timeEstimated>0?s/e.timeEstimated*100:0,c=e.completed,u=this.safeToDate(e.createdAt)||new Date,d=c&&this.safeToDate(e.updatedAt)||void 0,h=this.calculateWeeklyWork(o,i,a);return{task:e,project:t,weeklyWork:h,totalDuration:s,progress:l,isCompleted:c,createdDate:u,completedDate:d}}static calculateWeeklyWork(e,t,r){const i={},a=new Date(t);for(;a<=r;){const o=this.getWeekKeyFromDate(a),s=this.getWeekStart(a);i[o]||(i[o]={week:o,weekStart:s,duration:0,sessions:0}),a.setDate(a.getDate()+7)}return e.forEach(o=>{const s=this.safeToDate(o.date||o.startTime);if(!s)return;const l=this.getWeekKeyFromDate(s);i[l]&&(i[l].duration+=o.duration||0,i[l].sessions+=1)}),Object.values(i).sort((o,s)=>o.weekStart.getTime()-s.weekStart.getTime())}static getWeekKeyFromDate(e){const t=this.getWeekStart(e);return An(t,"MM/dd")}static getWeekStart(e){const t=new Date(e),r=t.getDay(),i=t.getDate()-r+(r===0?-6:1);return t.setDate(i),t.setHours(0,0,0,0),t}static formatWeeklyDistribution(e,t){return e.map(r=>{const i=Math.floor(r.duration/60),a=r.duration%60,o=i>0?`${i}h ${a}m`:`${a}m`;return`Week ${r.week}: ${o}`}).join(", ")}static formatWeeklyWorkDistribution(e,t){return e.filter(r=>r.duration>0).map(r=>`Week ${r.week}(${r.duration}m)`).join(", ")||"No work recorded"}static generateMonthlyAnalytics(e,t,r,i,a){let o=`MONTHLY PRODUCTIVITY ANALYTICS:

`;const s=this.calculateWeeklyWork(e,i,a),l=s.reduce((C,D)=>D.duration>C.duration?D:C,s[0]||{week:"None",duration:0,sessions:0,weekStart:new Date}),c=s.reduce((C,D)=>D.duration<C.duration&&D.duration>0?D:C,s[0]||{week:"None",duration:0,sessions:0,weekStart:new Date});o+=`- Most Productive Week: Week ${l.week} (${this.formatMinutes(l.duration)} across ${l.sessions} sessions)
`,o+=`- Least Productive Week: Week ${c.week} (${this.formatMinutes(c.duration)}${c.duration===0?" - planned rest":""})
`;const u=this.analyzeDayOfWeekPattern(e),d=Object.entries(u).reduce((C,[D,M])=>M.avgDuration>C[1].avgDuration?[D,M]:C,Object.entries(u)[0]||["None",{avgDuration:0}]),h=Object.entries(u).reduce((C,[D,M])=>M.avgDuration<C[1].avgDuration?[D,M]:C,Object.entries(u)[0]||["None",{avgDuration:0}]);o+=`- Most Productive Day Type: ${d[0]} (average ${Math.round(d[1].avgDuration)}m per session)
`,o+=`- Least Productive Day Type: ${h[0]} ${h[1].avgDuration===0?"(planned rest day)":`(average ${Math.round(h[1].avgDuration)}m per session)`}
`,Math.ceil((a.getTime()-i.getTime())/(1e3*60*60*24));const f=e.filter(C=>{const D=this.safeToDate(C.date||C.startTime);return D&&D.getDay()>=1&&D.getDay()<=5}),m=e.filter(C=>{const D=this.safeToDate(C.date||C.startTime);return D&&(D.getDay()===0||D.getDay()===6)}),v=f.length>0?Math.round(f.reduce((C,D)=>C+(D.duration||0),0)/f.length):0,y=m.length>0?Math.round(m.reduce((C,D)=>C+(D.duration||0),0)/m.length):0;o+=`- Average Daily Time: ${v} minutes (weekdays), ${y} minutes (weekends)
`;const w=e.length>0?e.reduce((C,D)=>C+(D.duration||0),0)/e.length:0;o+=`- Average Session Duration: ${w.toFixed(1)} minutes
`;const _=t.filter(C=>C.isCompleted).length,S=t.length>0?Math.round(_/t.length*100):0;o+=`- Task Completion Rate: ${S}% (${_}/${t.length} tasks completed)
`,o+=`- Projects Worked On: ${r.length} projects
`;const A=this.calculateMonthlyEstimationAccuracy(t);return o+=`- Time Estimation Accuracy: ${A}% of completed tasks within 15% of estimate

`,o}static analyzeDayOfWeekPattern(e){const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={};return t.forEach(i=>{r[i]={totalDuration:0,sessionCount:0,avgDuration:0}}),e.forEach(i=>{const a=this.safeToDate(i.date||i.startTime);if(!a)return;const o=t[a.getDay()];r[o].totalDuration+=i.duration||0,r[o].sessionCount+=1}),Object.keys(r).forEach(i=>{const a=r[i];a.avgDuration=a.sessionCount>0?a.totalDuration/a.sessionCount:0}),r}static calculateMonthlyEstimationAccuracy(e){const t=e.filter(i=>i.isCompleted&&i.task.timeEstimated>0);if(t.length===0)return 0;const r=t.filter(i=>Math.abs(i.totalDuration-i.task.timeEstimated)/i.task.timeEstimated<=.15);return Math.round(r.length/t.length*100)}static generateMonthlyPatterns(e,t,r,i,a){let o=`MONTHLY PATTERNS & INSIGHTS:

`;const s=e.filter(_=>{const S=this.safeToDate(_.date||_.startTime);return S&&S.getDay()>=1&&S.getDay()<=5}).length,l=e.filter(_=>{const S=this.safeToDate(_.date||_.startTime);return S&&(S.getDay()===0||S.getDay()===6)}).length;l===0?o+=`- Strong weekday productivity with strategic weekend rest
`:o+=`- Balanced weekday/weekend approach (${s} weekday vs ${l} weekend sessions)
`;const c=this.calculateWeeklyWork(e,i,a),u=c.reduce((_,S)=>S.duration>_.duration?S:_,c[0]||{week:"None",duration:0,sessions:0,weekStart:new Date});if(u.duration>0){const _=Math.floor(u.duration/60),S=u.duration%60,A=_>0?`${_}h ${S}m`:`${S}m`;o+=`- Mid-month productivity peak (Week ${u.week}) with ${A}
`}const d=t[0];d&&d.percentageOfMonth>30&&(o+=`- Consistent ${d.project.name} focus (${d.percentageOfMonth.toFixed(0)}% of total time) showing strong learning commitment
`);const h=r.filter(_=>_.isCompleted),f=r.length>0?h.length/r.length*100:0;f>30?o+=`- Excellent task completion follow-through (${Math.round(f)}% completion rate)
`:f>15&&(o+=`- Good task completion momentum (${Math.round(f)}% completion rate)
`),t.length>=3&&(o+=`- Project diversification balanced with deep focus areas
`);const m=r.filter(_=>_.createdDate<new Date(i.getTime()+14*24*60*60*1e3)),v=r.filter(_=>_.createdDate>=new Date(i.getTime()+14*24*60*60*1e3)),y=this.calculateMonthlyEstimationAccuracy(m),w=this.calculateMonthlyEstimationAccuracy(v);return w>y&&w>80&&(o+=`- Improved time estimation accuracy throughout month (early: ${y}%, late: ${w}%)
`),o+`
`}static generateMonthlyAchievements(e,t,r,i){let a=`ACHIEVEMENT HIGHLIGHTS:
`;const o=i.find(d=>d.project.name.toLowerCase().includes("learn")||d.project.name.toLowerCase().includes("study")||d.project.name.toLowerCase().includes("course"));if(o&&o.percentageOfMonth>20){const d=Math.round(o.percentageOfMonth);a+=`✅ Major Learning: "${o.project.name}" curriculum focus (${d}% of time investment)
`}const s=e.filter(d=>d.title.toLowerCase().includes("implement")||d.title.toLowerCase().includes("build")||d.title.toLowerCase().includes("develop")||d.title.toLowerCase().includes("create"));s.length>0&&(a+=`✅ Development Milestone: ${s[0].title} completed
`);const l=e.filter(d=>d.title.toLowerCase().includes("write")||d.title.toLowerCase().includes("blog")||d.title.toLowerCase().includes("article")||d.title.toLowerCase().includes("post"));l.length>0&&(a+=`✅ Content Creation: ${l.length} technical ${l.length===1?"post":"posts"} published
`);const c=e.filter(d=>d.title.toLowerCase().includes("docker")||d.title.toLowerCase().includes("kubernetes")||d.title.toLowerCase().includes("aws")||d.title.toLowerCase().includes("learn"));return c.length>0&&(a+=`✅ Skills Expansion: ${c[0].title} foundation established
`),e.filter(d=>d.title.toLowerCase().includes("contribute")||d.title.toLowerCase().includes("open source")||d.title.toLowerCase().includes("github")).length>0&&(a+=`✅ Open Source: First meaningful contribution to React ecosystem
`),a+`
`}static generateMonthlyRecommendations(e,t,r,i){let a=`RISK FACTORS & RECOMMENDATIONS:
`;const o=i.filter(y=>!y.projectId||!r.find(w=>w.project.id===y.projectId));o.length>0&&(a+=`⚠️ Unassigned tasks present (${o.length}) - maintain project organization
`);const s=this.analyzeDayOfWeekPattern(e),l=Object.entries(s).reduce((y,[w,_])=>_.avgDuration>y[1].avgDuration?[w,_]:y,Object.entries(s)[0]||["None",{avgDuration:0}]);l[1].avgDuration>0&&(a+=`💡 ${l[0]} productivity peak suggests optimal deep work scheduling
`),this.calculateWeeklyWork(e,new Date,new Date).filter(y=>y.duration>0).length>=3&&(a+=`💡 Consistent weekly momentum pattern - consider monthly sprint cycles
`),this.calculateMonthlyEstimationAccuracy(t)>80&&(a+=`💡 Time estimation improving - maintain estimation discipline
`),a+=`
`;const h=t.filter(y=>y.isCompleted).length,f=t.filter(y=>!y.isCompleted&&y.totalDuration>0).length;let m="NEXT MONTH MOMENTUM: ";h>=3&&(m+=`Excellent foundation with ${h} major completions ready. `);const v=r[0];return v&&(m+=`Strong learning velocity in ${v.project.name} ecosystem. `),f>0?m+="Ready for advanced feature development phase with proven productivity patterns and estimation accuracy.":m+="Ready to establish new productivity patterns and project momentum.",a+m}}class Fq{static async createMultiLevelChunks(e){console.log(`🔄 Creating multi-level chunks for user: ${e}`);const t=await this.getUserData(e),{sessions:r,tasks:i,projects:a}=t;console.log(`📊 Data fetched - Sessions: ${r.length}, Tasks: ${i.length}, Projects: ${a.length}`),this.validateUserData(r,i,a);const o=[],s=await this.createMonthlyTemporalChunks(r,i,a,e);o.push(...s);const l=await this.createWeeklyTemporalChunks(r,i,a,e);o.push(...l);const c=await this.createDailyTemporalChunks(r,i,a,e);o.push(...c);const u=await this.createProjectSummaryChunks(a,i,r,e);o.push(...u);const d=await this.createTaskAggregateChunks(i,r,a,e);o.push(...d);const h=await this.createSessionChunks(r,i,a,e);return o.push(...h),console.log(`✅ Created ${o.length} total chunks with priority: Monthly → Weekly → Daily → Project → Task → Session`),o}static async getUserData(e){try{const t=fn(wn(yt,"tasks"),Ot("userId","==",e)),i=(await or(t)).docs.map(d=>{var f,m;const h=d.data();return{id:d.id,title:h.title||h.text||"Untitled Task",description:h.description||h.notes||"",projectId:h.projectId||"",completed:h.completed||!1,status:h.status||(h.completed?"completed":"active"),timeSpent:h.timeSpent||0,timeEstimated:h.timeEstimated||0,userId:h.userId,createdAt:((f=h.createdAt)==null?void 0:f.toDate())||new Date,updatedAt:((m=h.updatedAt)==null?void 0:m.toDate())||new Date,order:h.order??0}}),a=fn(wn(yt,"workSessions"),Ot("userId","==",e)),s=(await or(a)).docs.map(d=>{var w,_,S,A;const h=d.data(),f=(w=h.startTime)!=null&&w.toDate?h.startTime.toDate():void 0,m=(_=h.createdAt)!=null&&_.toDate?h.createdAt.toDate():new Date,v=(S=h.updatedAt)!=null&&S.toDate?h.updatedAt.toDate():new Date,y=(Gl.safeToDate(f||h.date)||new Date).toISOString().split("T")[0];return{id:d.id,taskId:h.taskId||"",projectId:h.projectId||"",duration:h.duration||0,sessionType:h.sessionType||"work",startTime:f,endTime:(A=h.endTime)==null?void 0:A.toDate(),notes:h.notes||"",status:h.status||"completed",userId:h.userId,date:h.date||y,createdAt:m,updatedAt:v}}),l=fn(wn(yt,"projects"),Ot("userId","==",e)),u=(await or(l)).docs.map(d=>{const h=d.data();return{id:d.id,name:h.name||"Untitled Project",color:h.color||"#3498db",description:h.description||"",userId:h.userId}});return{sessions:s,tasks:i,projects:u}}catch(t){return console.error("❌ Error loading user data:",t),{sessions:[],tasks:[],projects:[]}}}static async createSessionChunks(e,t,r,i){const a=[],o=e.reduce((s,l)=>(s[l.taskId]||(s[l.taskId]=[]),s[l.taskId].push(l),s),{});for(const[s,l]of Object.entries(o)){const c=t.find(h=>h.id===s),u=r.find(h=>h.id===(c==null?void 0:c.projectId));if(!c||!u||l.length===0)continue;const d=Gl.generateTaskSessionSummaryText(c,l,u);a.push({id:`task_sessions_${c.id}`,content:d,content_type:"task_sessions",originalContent:JSON.stringify({task:c,sessions:l}),metadata:{chunkType:"task_sessions",chunkLevel:6,sourceIds:[c.id,...l.map(h=>h.id)],created:new Date().toISOString(),entities:{taskId:c.id,projectId:u.id,sessionIds:l.map(h=>h.id),userId:i},analytics:{duration:l.reduce((h,f)=>h+f.duration,0),sessionCount:l.length,productivity:this.calculateTaskSessionsProductivity(l,c),completionRate:c.timeEstimated?Math.round(c.timeSpent/c.timeEstimated*100):0}},chunkIndex:0,tokenCount:$r.estimateTokens(d)})}return a}static getMostCommonTimeSlot(e){const r=e.map(i=>this.getTimeSlot(i.startTime)).reduce((i,a)=>(i[a]=(i[a]||0)+1,i),{});return Object.entries(r).reduce((i,a)=>r[i[0]]>r[a[0]]?i:a)[0]}static calculateTaskSessionsProductivity(e,t){if(e.length===0)return .5;const r=e.reduce((a,o)=>a+this.calculateSessionProductivity(o,t),0)/e.length,i=e.length>3?.1:0;return Math.max(0,Math.min(1,r+i))}static async createTaskAggregateChunks(e,t,r,i){const a=[];for(const o of e){const s=t.filter(u=>u.taskId===o.id),l=r.find(u=>u.id===o.projectId);if(!l)continue;const c=Gl.generateTaskAggregateText(o,s,l);a.push({id:`task_aggregate_${o.id}`,content:c,content_type:"task_aggregate",originalContent:JSON.stringify({task:o,sessions:s}),metadata:{chunkType:"task_aggregate",chunkLevel:5,sourceIds:[o.id,...s.map(u=>u.id)],created:new Date().toISOString(),entities:{taskId:o.id,projectId:l.id,sessionIds:s.map(u=>u.id),userId:i},analytics:{duration:o.timeSpent,sessionCount:s.length,completionRate:o.timeEstimated?Math.round(o.timeSpent/o.timeEstimated*100):0,productivity:this.calculateTaskProductivity(o,s)}},chunkIndex:0,tokenCount:$r.estimateTokens(c)})}return a}static async createProjectSummaryChunks(e,t,r,i){const a=[];for(const o of e){const s=t.filter(u=>u.projectId===o.id),l=r.filter(u=>u.projectId===o.id);if(s.length===0)continue;const c=Gl.generateProjectSummaryText(o,s,l);a.push({id:`project_summary_${o.id}`,content:c,content_type:"project_summary",originalContent:JSON.stringify({project:o,tasks:s,sessions:l}),metadata:{chunkType:"project_summary",chunkLevel:4,sourceIds:[o.id,...s.map(u=>u.id)],created:new Date().toISOString(),entities:{projectId:o.id,sessionIds:l.map(u=>u.id),userId:i},analytics:{duration:s.reduce((u,d)=>u+d.timeSpent,0),sessionCount:l.length,completionRate:Math.round(s.filter(u=>u.completed).length/s.length*100),productivity:this.calculateProjectProductivity(s,l)}},chunkIndex:0,tokenCount:$r.estimateTokens(c)})}return a}static async createMonthlyTemporalChunks(e,t,r,i){const a=[],o=this.groupSessionsByMonth(e);return Object.entries(o).forEach(([s,l])=>{if(l.length===0)return;const c=this.parseMonthKey(s),u=t.filter(f=>l.filter(v=>v.taskId===f.id).length>0),d=r.filter(f=>u.some(m=>m.projectId===f.id));console.log(`📅 Processing monthly chunk for month ${s}:`,{monthStartDate:c.toISOString(),sessionsCount:l.length,tasksCount:u.length,projectsCount:d.length});const h=Gl.generateTemporalSummaryText("monthly",l,c.toISOString(),u,d);a.push({id:`monthly_${s}`,content:h,content_type:"monthly_summary",originalContent:JSON.stringify({month:s,sessions:l,tasks:u,projects:d}),metadata:{chunkType:"temporal_pattern",chunkLevel:1,sourceIds:[...l.map(f=>f.id),...u.map(f=>f.id)],timeframe:`monthly_${s}`,created:new Date().toISOString(),entities:{sessionIds:l.map(f=>f.id),userId:i},analytics:{duration:l.reduce((f,m)=>f+(m.duration||0),0),sessionCount:l.length,completionRate:u.length>0?Math.round(u.filter(f=>f.completed).length/u.length*100):0,productivity:this.calculateTemporalProductivity(l),tasksCreated:u.length,projectsWorkedOn:d.length}},chunkIndex:0,tokenCount:$r.estimateTokens(h)})}),a}static async createWeeklyTemporalChunks(e,t,r,i){const a=[],o=this.groupSessionsByWeek(e);return Object.entries(o).forEach(([s,l])=>{if(l.length===0)return;const c=this.parseWeekKey(s),u=t.filter(f=>l.filter(v=>v.taskId===f.id).length>0),d=r.filter(f=>u.some(m=>m.projectId===f.id));console.log(`📅 Processing weekly chunk for week ${s}:`,{weekStartDate:c.toISOString(),sessionsCount:l.length,tasksCount:u.length,projectsCount:d.length});const h=Gl.generateTemporalSummaryText("weekly",l,c.toISOString(),u,d);a.push({id:`weekly_${s}`,content:h,content_type:"weekly_summary",originalContent:JSON.stringify({week:s,sessions:l,tasks:u,projects:d}),metadata:{chunkType:"temporal_pattern",chunkLevel:2,sourceIds:[...l.map(f=>f.id),...u.map(f=>f.id)],timeframe:`weekly_${s}`,created:new Date().toISOString(),entities:{sessionIds:l.map(f=>f.id),userId:i},analytics:{duration:l.reduce((f,m)=>f+(m.duration||0),0),sessionCount:l.length,completionRate:u.length>0?Math.round(u.filter(f=>f.completed).length/u.length*100):0,productivity:this.calculateTemporalProductivity(l)}},chunkIndex:0,tokenCount:$r.estimateTokens(h)})}),a}static async createDailyTemporalChunks(e,t,r,i){const a=[],o=this.groupSessionsByDate(e);return Object.entries(o).forEach(([s,l])=>{if(l.length===0)return;const c=Gl.generateTemporalSummaryText("daily",l,s,t,r);a.push({id:`daily_${s}`,content:c,content_type:"daily_summary",originalContent:JSON.stringify({date:s,sessions:l}),metadata:{chunkType:"temporal_pattern",chunkLevel:3,sourceIds:l.map(u=>u.id),timeframe:`daily_${s}`,created:new Date().toISOString(),entities:{sessionIds:l.map(u=>u.id),userId:i},analytics:{duration:l.reduce((u,d)=>u+(d.duration||0),0),sessionCount:l.length,productivity:this.calculateTemporalProductivity(l)}},chunkIndex:0,tokenCount:$r.estimateTokens(c)})}),a}static getTimeSlot(e){if(!e)return"unknown";const t=new Date(e).getHours();return t<6?"late_night":t<12?"morning":t<17?"afternoon":t<22?"evening":"night"}static calculateSessionProductivity(e,t){let r=.5;return e.status==="completed"&&(r+=.3),e.duration>=25&&(r+=.2),t.timeEstimated&&e.duration<=t.timeEstimated*.5&&(r-=.2),Math.max(0,Math.min(1,r))}static calculateTaskProductivity(e,t){if(t.length===0)return .5;let i=t.reduce((a,o)=>a+this.calculateSessionProductivity(o,e),0)/t.length;return e.completed&&(i+=.2),e.timeEstimated&&e.timeSpent<=e.timeEstimated*1.2&&(i+=.1),Math.max(0,Math.min(1,i))}static calculateProjectProductivity(e,t){if(e.length===0)return .5;const r=e.filter(a=>a.completed).length/e.length,i=e.reduce((a,o)=>{const s=t.filter(l=>l.taskId===o.id);return a+this.calculateTaskProductivity(o,s)},0)/e.length;return r*.6+i*.4}static calculateTemporalProductivity(e){if(e.length===0)return .5;const r=e.filter(o=>o.status==="completed").length/e.length,i=e.reduce((o,s)=>o+s.duration,0)/e.length,a=Math.min(1,i/30);return r*.7+a*.3}static groupSessionsByDate(e){console.log(`📊 Grouping ${e.length} sessions by date...`);const t=e.reduce((i,a)=>{const s=(Gl.safeToDate(a.date||a.startTime)||new Date).toISOString().split("T")[0];return i[s]||(i[s]=[]),i[s].push(a),i},{}),r=Object.keys(t).length;return console.log(`📅 Grouped sessions into ${r} days:`,Object.entries(t).map(([i,a])=>`${i}: ${a.length} sessions`)),t}static groupSessionsByWeek(e){console.log(`📊 Grouping ${e.length} sessions by week...`);const t=e.reduce((i,a)=>{try{const o=Gl.safeToDate(a.startTime||a.date);if(!o)return console.warn("Invalid date in session, skipping:",{sessionId:a.id,date:a.date,startTime:a.startTime}),i;const s=this.getWeekKey(o);return i[s]||(i[s]=[]),i[s].push(a),i}catch(o){return console.error("Error processing session for weekly grouping:",o,a),i}},{}),r=Object.keys(t).length;return console.log(`📅 Grouped sessions into ${r} weeks:`,Object.entries(t).map(([i,a])=>`${i}: ${a.length} sessions`)),t}static getWeekKey(e){const t=e.getFullYear(),r=this.getWeekNumber(e);return`${t}-W${r.toString().padStart(2,"0")}`}static getWeekNumber(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-r);const i=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-i.getTime())/864e5+1)/7)}static parseWeekKey(e){const t=e.match(/(\d{4})-W(\d{2})/);if(!t)return console.warn("Invalid week key format:",e),new Date;const r=parseInt(t[1]),i=parseInt(t[2]),a=new Date(r,0,1),o=(i-1)*7,s=new Date(a.getTime()+o*24*60*60*1e3),l=s.getDay(),c=l===0?-6:1-l;return s.setDate(s.getDate()+c),s}static groupSessionsByMonth(e){console.log(`📊 Grouping ${e.length} sessions by month...`);const t=e.reduce((i,a)=>{try{const o=Gl.safeToDate(a.startTime||a.date);if(!o)return console.warn("Invalid date in session, skipping:",{sessionId:a.id,date:a.date,startTime:a.startTime}),i;const s=this.getMonthKey(o);return i[s]||(i[s]=[]),i[s].push(a),i}catch(o){return console.error("Error processing session for monthly grouping:",o,a),i}},{}),r=Object.keys(t).length;return console.log(`📅 Grouped sessions into ${r} months:`,Object.entries(t).map(([i,a])=>`${i}: ${a.length} sessions`).join(", ")),t}static getMonthKey(e){const t=e.getFullYear(),r=e.getMonth()+1;return`${t}-${r.toString().padStart(2,"0")}`}static parseMonthKey(e){const t=e.match(/(\d{4})-(\d{2})/);if(!t)return console.warn("Invalid month key format:",e),new Date;const r=parseInt(t[1]),i=parseInt(t[2])-1;return new Date(r,i,1)}static validateUserData(e,t,r){console.log("🔍 Validating user data...");const i=e.filter(c=>c.duration>0&&c.taskId),a=e.filter(c=>Gl.safeToDate(c.date||c.startTime)!==null);console.log("📊 Session validation:",{total:e.length,withDuration:i.length,withValidDates:a.length,sampleDates:e.slice(0,3).map(c=>({id:c.id,date:c.date,startTime:c.startTime}))});const o=t.filter(c=>r.some(u=>u.id===c.projectId));console.log("📊 Task validation:",{total:t.length,withValidProjects:o.length,sampleTasks:t.slice(0,3).map(c=>({id:c.id,title:c.title,projectId:c.projectId,timeSpent:c.timeSpent}))}),console.log("📊 Project validation:",{total:r.length,sampleProjects:r.slice(0,3).map(c=>({id:c.id,name:c.name}))});const s=e.filter(c=>t.some(u=>u.id===c.taskId)),l=e.filter(c=>r.some(u=>u.id===c.projectId));console.log("🔗 Cross-reference validation:",{sessionsWithValidTasks:s.length,sessionsWithValidProjects:l.length}),i.length===0&&console.warn("⚠️  No valid sessions found! This will result in empty weekly summaries."),a.length===0&&console.warn("⚠️  No sessions with valid dates found! Date filtering will fail.")}}class qu{static classifyQuery(e){const t=e.toLowerCase();let r="general",i=.3,a=[];const o=this.TASK_PRIORITY_PATTERNS.filter(_=>_.test(t)),s=this.PROJECT_FOCUS_PATTERNS.filter(_=>_.test(t)),l=this.SUMMARY_INSIGHTS_PATTERNS.filter(_=>_.test(t)),c=/\b(task|tasks|todo|to-do)\b/i.test(t),u=/\b(project|projects)\b/i.test(t),d=/\b(list|show|give\s+me|tell\s+me|what|which)\b/i.test(t),h=/\b(in\s+the\s+|from\s+|for\s+)["']?[a-zA-Z0-9\s]+["']?\s*(project|tasks?)/i.test(t),f=Math.max(o.length,s.length,l.length);f>0?o.length>0&&o.length>=f?(r="task_priority",i=Math.min(.95,.5+o.length*.15),a.push("task_management"),h&&c&&(i=Math.min(.95,i+.2))):s.length>0&&s.length>=f?(r="project_focus",i=Math.min(.95,.5+s.length*.15),a.push("project_management")):l.length>0&&(r="summary_insights",i=Math.min(.95,.5+l.length*.15),a.push("analytics")):c&&d?(r="task_priority",i=.6,a.push("task_management"),h&&(i=.75)):u&&d?(r="project_focus",i=.65,a.push("project_management")):(c||u)&&(r=c?"task_priority":"project_focus",i=.45,a.push(c?"task_management":"project_management")),s.length>0&&r!=="project_focus"&&a.push("project_management"),l.length>0&&r!=="summary_insights"&&a.push("analytics");const m=e.split(/\s+/).length,v=a.length>1;let y="prioritized";v&&m>10?y="comprehensive":(i<.7||v)&&(y="balanced");const w=this.CONTENT_TYPE_MAPPINGS[r];return console.log("🔍 Query Classification Debug:",{query:e.substring(0,100),taskMatches:o.length,projectMatches:s.length,summaryMatches:l.length,hasTaskKeywords:c,hasProjectKeywords:u,hasListingKeywords:d,hasSpecificProject:h,primaryIntent:r,confidence:i.toFixed(2),secondaryIntents:a,mixingStrategy:y,suggestedContentTypes:[...w.primary,...w.secondary.slice(0,2),...w.tertiary.slice(0,1)]}),{primaryIntent:r,secondaryIntents:a,confidence:i,suggestedContentTypes:[...w.primary,...w.secondary.slice(0,2),...w.tertiary.slice(0,1)],suggestedChunkTypes:this.mapContentTypesToChunkTypes(w),mixingStrategy:y}}static mapContentTypesToChunkTypes(e){const t={task_aggregate:"task_aggregate",task_sessions:"task_sessions",project_summary:"project_summary",daily_summary:"temporal_pattern",weekly_summary:"temporal_pattern",monthly_summary:"temporal_pattern",session:"session"},r=[...e.primary,...e.secondary,...e.tertiary];return[...new Set(r.map(i=>t[i]||i))]}static getOptimalSourceMix(e,t,r=20){const{mixingStrategy:i,suggestedContentTypes:a}=e,o=this.groupSourcesByContentType(t,a);switch(i){case"prioritized":return this.selectPrioritizedSources(o,a,r);case"balanced":return this.selectBalancedSources(o,a,r);case"comprehensive":return this.selectComprehensiveSources(o,a,r);default:return this.selectPrioritizedSources(o,a,r)}}static groupSourcesByContentType(e,t){const r={};return t.forEach(i=>{r[i]=[]}),e.forEach(i=>{var o;const a=i.content_type||((o=i.metadata)==null?void 0:o.chunkType)||"unknown";t.includes(a)?r[a].push(i):(r.other||(r.other=[]),r.other.push(i))}),Object.keys(r).forEach(i=>{r[i].sort((a,o)=>{const s=a.similarity_score||a.relevanceScore||0;return(o.similarity_score||o.relevanceScore||0)-s})}),r}static selectPrioritizedSources(e,t,r){const i=[],a=[.4,.25,.2,.15];t.forEach((s,l)=>{if(i.length>=r)return;const c=e[s]||[],u=a[l]||.1,d=Math.ceil(r*u),h=c.slice(0,d);i.push(...h)});const o=r-i.length;if(o>0){const s=new Set(i.map(c=>c.id)),l=Object.values(e).flat().filter(c=>!s.has(c.id)).sort((c,u)=>{const d=c.similarity_score||c.relevanceScore||c.final_score||0;return(u.similarity_score||u.relevanceScore||u.final_score||0)-d});i.push(...l.slice(0,o))}return console.log(`📊 Prioritized selection: ${i.length}/${r} sources distributed across ${t.length} content types`),i.slice(0,r)}static selectBalancedSources(e,t,r){const i=[],a=Math.max(3,Math.floor(r*.15)),o=Math.max(a,Math.floor(r/t.length));t.forEach(l=>{const c=e[l]||[];i.push(...c.slice(0,Math.min(o,c.length)))});const s=r-i.length;if(s>0){const l=new Set(i.map(u=>u.id)),c=Object.values(e).flat().filter(u=>!l.has(u.id)).sort((u,d)=>{const h=u.similarity_score||u.relevanceScore||u.final_score||0;return(d.similarity_score||d.relevanceScore||d.final_score||0)-h});i.push(...c.slice(0,s))}return console.log(`📊 Balanced selection: ${i.length} sources (~${o} per type)`),i.slice(0,r)}static selectComprehensiveSources(e,t,r){var d;const i=[],a=Object.keys(e),o=[...new Set([...t,...a])],s=Math.max(2,Math.floor(r*.1)),l=Math.max(s*2,Math.floor(r*.3));o.forEach(h=>{const f=e[h]||[];if(f.length>0){const m=Math.min(s,f.length);i.push(...f.slice(0,m))}});const c=r-i.length;if(c>0){const h=new Set(i.map(y=>y.id)),f=Object.values(e).flat().filter(y=>!h.has(y.id)).sort((y,w)=>{const _=y.similarity_score||y.relevanceScore||y.final_score||0;return(w.similarity_score||w.relevanceScore||w.final_score||0)-_}),m={};i.forEach(y=>{var _;const w=y.content_type||((_=y.metadata)==null?void 0:_.chunkType)||"unknown";m[w]=(m[w]||0)+1});const v=[];for(const y of f){if(v.length>=c)break;const w=y.content_type||((d=y.metadata)==null?void 0:d.chunkType)||"unknown",_=m[w]||0;_<l&&(v.push(y),m[w]=_+1)}i.push(...v)}const u=this.getTypeDistribution(i);return console.log(`📊 Comprehensive selection: ${i.length} sources across ${Object.keys(u).length} content types`),console.log(`📊 Distribution: ${Object.entries(u).map(([h,f])=>`${h}(${f})`).join(", ")}`),i.slice(0,r)}static getTypeDistribution(e){return e.reduce((t,r)=>{var a;const i=r.content_type||((a=r.metadata)==null?void 0:a.chunkType)||"unknown";return t[i]=(t[i]||0)+1,t},{})}static async selectBestContentTypesWithAI(e,t){try{const r=this.buildContentTypeSelectionPrompt(e,{}),i=await $r.generateChatResponse({query:r,context:`User Query: "${e}"`,conversationHistory:[]});return this.parseAIContentTypeResponse(i)}catch(r){console.error("AI content type selection failed:",r);const i=this.classifyQuery(e);return this.convertClassificationToAIFormat(i)}}static buildContentTypeSelectionPrompt(e,t){return`You are an expert content type selector for a productivity tracking system. Your goal is to select the content types that will provide the most comprehensive and relevant data to answer the user's question.

USER QUERY: "${e}"

AVAILABLE CONTENT TYPES WITH REAL SAMPLE DATA:

1. MONTHLY_SUMMARY (Level 1 - Highest priority, most comprehensive):
MONTHLY PRODUCTIVITY SUMMARY: June 1-30, 2025

OVERVIEW: 138 hours 32 minutes total productive time across 1537 work sessions. Worked on 8 projects, 109 tasks. Completed 98 tasks, created 108 new tasks this month.

TOP PROJECTS BY TIME INVESTMENT:
1. "Make10000hours" - 64h 5m (46% of month)
└─ Week 05/26: 0m, Week 06/02: 30h 56m, Week 06/09: 23h 53m, Week 06/16: 9h 16m, Week 06/23: 0m
└─ "Focus Mode - Front End Design & Building" (time spent: 262m)
└─ "Go hard on AI DB & BE & Logic set up, just use random UI for AI" (time spent: 228m)
└─ "Calendar improvement - Drag & Drop" (time spent: 218m)

2. "AI" - 46h 22m (33% of month)
└─ Week 05/26: 0m, Week 06/02: 7h 36m, Week 06/09: 16h 10m, Week 06/16: 22h 36m, Week 06/23: 0m
└─ "Research về các công ty founded by YC trong năm 2024-2025" (time spent: 497m)
└─ "Optimize lại cái synthetic text chunking" (time spent: 438m)
└─ "Components in the AI EconomyEconomy" (time spent: 364m)

3. "Make10000hours-Bugfixing" - 10h 2m (7% of month)
4. "Lifework" - 9h 10m (7% of month)
5. "Zalopay" - 2h 5m (1% of month)

TOP TASKS BY TIME INVESTMENT:
1. "Research về các công ty founded by YC trong năm 2024-2025" - 497m (8h 17m)
2. "Optimize lại cái synthetic text chunking" - 438m (7h 18m)
3. "Components in the AI EconomyEconomy" - 364m (6h 4m)

PRODUCTIVITY ANALYTICS:
- Average daily productive time: 4h 37m
- Most productive day: Wednesday, June 11 (8h 53m)
- Least productive day: Multiple days (0m)
- Peak productivity time: 10:00-12:00 (19% of total time)
- Task completion rate: 89.9% (98/109 tasks)
- Average task duration: 76 minutes
- Project focus distribution: 46% Make10000hours, 33% AI, 21% Others

ACHIEVEMENTS THIS MONTH:
✅ Completed major AI optimization sprint (438m invested)
✅ Built focus mode frontend (262m)
✅ Enhanced calendar functionality (218m)
✅ Research milestone reached (497m on YC research)

RISK FACTORS & INSIGHTS:
⚠️ 11 incomplete tasks may impact next month's velocity
⚠️ Zero productivity on final week suggests potential burnout
📈 Strong momentum in weeks 2-4 with consistent 20+ hour weeks

2. WEEKLY_SUMMARY (Level 2 - Weekly overviews):
WEEKLY PRODUCTIVITY SUMMARY: Week of June 16-21, 2025

OVERVIEW: 33 hours 10 minutes total productive time across 364 work sessions. Worked on 4 projects, 19 tasks. Completed 19 tasks, created 17 new tasks this week.

TOP PROJECTS BY TIME INVESTMENT:
1. "AI" - 22h 36m (68.1% of week)
└─ Monday 06/16: 7h 41m, Tuesday 06/17: 5h 3m, Wednesday 06/18: 6h 50m, Thursday 06/19: 3h 2m, Friday 06/20: 0m
└─ "Research về các công ty founded by YC trong năm 2024-2025" (daily: 461m → 363m → 410m → 182m)
└─ "Components in the AI EconomyEconomy" (daily: 0m → 120m → 0m → 0m)

2. "Make10000hours" - 9h 16m (27.9% of week)
└─ "Mang cái Calendar vào My project & Optimize UI" (time spent: 199m)
└─ "Calendar improvement - Drag & Drop" (time spent: 157m)

3. "Lifework" - 1h 8m (3.4% of week)
4. "Zalopay" - 11m (0.6% of week)

DAILY MOMENTUM ANALYSIS:
- Monday: Peak performance (7h 41m) - deep research focus
- Tuesday: Strong continuation (5h 3m) - balanced project work
- Wednesday: Sustained effort (6h 50m) - research completion
- Thursday: Declining momentum (3h 2m) - task wrap-up
- Friday: No activity (0m) - momentum break

TASK COMPLETION VELOCITY:
- Tasks completed: 19 (100% completion rate this week)
- Average task completion time: 104 minutes
- Fastest completion: 5 minutes
- Longest task: 461 minutes
- Daily completion pattern: 5→4→6→4→0 tasks

FOCUS QUALITY INDICATORS:
- Average session length: 5.5 minutes
- Longest focus session: 45 minutes (research work)
- Session efficiency: 73% (based on time estimation accuracy)
- Context switching: Moderate (4 projects active)

3. DAILY_SUMMARY (Level 3 - Daily breakdowns):
DAILY PRODUCTIVITY SUMMARY: Wednesday, June 11, 2025

OVERVIEW: 533 minutes (8h 53m) of productive work across 91 work sessions. Worked on 13 projects, 176 tasks. Created 0 new tasks today.

TOP PROJECTS BY TIME INVESTMENT:
1. "AI" - 461m (86.5% of total time)
└─ "Research về các công ty founded by YC trong năm 2024-2025" (410 minutes across 32 sessions)
└─ "Components in the AI EconomyEconomy" (31 minutes across 8 sessions)
└─ "Optimize lại cái synthetic text chunking" (20 minutes across 4 sessions)

2. "Make10000hours" - 71m (13.3% of time)
└─ "Focus Mode - Front End Design & Building" (35 minutes)
└─ "Mang cái Calendar vào My project & Optimize UI" (36 minutes)

3. "Lifework" - 1m (0.2% of time)

HOURLY BREAKDOWN:
10:00-11:00: 95m (Research peak)
11:00-12:00: 87m (Sustained research)
14:00-15:00: 82m (Post-lunch productivity)
15:00-16:00: 76m (Afternoon focus)
09:00-10:00: 65m (Morning startup)
16:00-17:00: 45m (Late afternoon)
17:00-18:00: 38m (Evening wrap-up)
12:00-13:00: 35m (Pre-lunch completion)
08:00-09:00: 10m (Early start)

SESSION QUALITY METRICS:
- Average session duration: 5.9 minutes
- Longest session: 28 minutes (deep research)
- Shortest session: 1 minute (quick tasks)
- Session breaks: 67 breaks averaging 3.2 minutes
- Focus efficiency: 89% (estimated vs actual time)

TASK COMPLETION DETAILS:
✅ "Research về các công ty founded by YC" - 410m (exceeded estimate by 15%)
✅ "Focus Mode frontend work" - 35m (met estimate exactly)
✅ "Calendar UI optimization" - 36m (under estimate by 10%)
⏳ 173 other tasks tracked but not actively worked on

PRODUCTIVITY INSIGHTS:
📈 Peak performance day this week
🎯 Single-project focus (86% on AI research)
⚡ High session count indicates good momentum
🔄 Minimal context switching optimized flow

4. PROJECT_SUMMARY (Level 4 - Rich project overviews):
Project "AI" created on Monday, May 26, 2025, containing 27 tasks across 3 statuses.

BACKLOG STATUS (8 tasks):
- "Build a Claude-3.5-Sonnet-like competitor model" (estimated 600 min, priority: high)
- "Research xem giờ nếu muốn build cái AI chat bot cho product của mình thì cần phải làm gì" (estimated 240 min, priority: medium)
- "AI Tool to help startup build their MVP faster" (estimated 180 min, priority: medium)
- "Optimize lại cách con AI của mình Retrieve Data" (estimated 120 min, priority: medium)

IN-PROGRESS STATUS (2 tasks):
- "Components in the AI EconomyEconomy" (364 min spent, estimated 180 min, 202% progress, priority: high)
- "Optimize lại cái synthetic text chunking" (438 min spent, estimated 300 min, 146% progress, priority: high)

COMPLETED STATUS (17 tasks):
- "Research về các công ty founded by YC trong năm 2024-2025" (497 min, completed June 19, 2025)
- "On Finding AI Startup Idea" (34 min, completed June 19, 2025)
- "Build an AI Agent to help startup get accepted to YC" (25 min, completed June 5, 2025)

PROJECT ANALYTICS:
Total time invested: 46h 22m across 447 work sessions
Average session duration: 6.2 minutes
Task completion rate: 63% (17/27 tasks completed)
Time estimation accuracy: 127% (tasks taking 27% longer than estimated)
Project velocity: 2.4 tasks completed per week
Risk level: MEDIUM (2 overrunning tasks, 8 unstarted tasks)

COMPLETION VELOCITY TRENDS:
- Week 1 (May 26-June 1): 3 tasks completed
- Week 2 (June 2-8): 5 tasks completed
- Week 3 (June 9-15): 4 tasks completed  
- Week 4 (June 16-22): 5 tasks completed
- Trend: Consistent 4-5 tasks/week velocity

TIME INVESTMENT PATTERNS:
Monday-Friday: 89% of project time
Weekend work: 11% of project time
Peak hours: 10:00-12:00 (31% of project time)
Research-heavy: 67% time on research tasks
Implementation: 33% time on building tasks

PROJECT HEALTH INDICATORS:
✅ Strong weekly completion velocity
✅ Consistent time investment
⚠️ Time estimation challenges (27% overrun)
⚠️ Growing backlog (8 unstarted tasks)
📈 High engagement (447 sessions)

5. TASK_AGGREGATE (Level 5 - Comprehensive task details):
Task 'Research về các công ty founded by YC trong năm 2024-2025' from project 'AI' has accumulated 497 minutes (8h 17m) across 47 work sessions. 

TASK DETAILS:
- Average session duration: 10.6 minutes
- Progress: 207% of estimated 240 minutes (overran by 257 minutes)
- Current status: Completed on Thursday, June 19, 2025
- Created: Monday, June 16, 2025
- Priority: High
- Last updated: Thursday, June 19, 2025

TIME INVESTMENT PATTERN: Intensive focused research with daily progression
Daily breakdown:
- June 16: 461 minutes (26 sessions) - Initial deep dive
- June 17: 36 minutes (4 sessions) - Follow-up research  
- June 18: 0 minutes - No work
- June 19: 0 minutes - Task completion/wrap-up

SESSION ANALYTICS:
- Longest session: 34 minutes (deep research phase)
- Shortest session: 1 minute (quick notes)
- Session frequency: High intensity over 4 days
- Break patterns: Frequent short breaks (2-5 minutes)
- Focus quality: Excellent (sustained 400+ minute days)

ESTIMATION ACCURACY:
- Original estimate: 240 minutes (4 hours)
- Actual time: 497 minutes (8h 17m)
- Variance: +257 minutes (+107% overrun)
- Learning: Research tasks require 2x time estimates

COMPLETION FACTORS:
✅ Thorough research methodology
✅ Comprehensive data collection
✅ High-quality output achieved
⚠️ Scope creep contributed to overrun
📊 Generated extensive insights for project

TASK DEPENDENCIES:
- Feeds into: "Build an AI Agent to help startup get accepted to YC"
- Related tasks: "Components in the AI Economy", "On Finding AI Startup Idea"
- Project impact: Foundation for multiple AI initiatives

6. TASK_SESSIONS (Level 6 - Granular session details):
Task 'Define task to do' from project 'Make10000hours' has accumulated 20 minutes across 1 work session.

SESSION BREAKDOWN:
Session #1: June 15, 2025, 14:32-14:52 (20 minutes)
- Session type: Planning/Definition
- Focus quality: High (single uninterrupted session)
- Context: Task creation and scope definition
- Output: Clear task requirements established
- Break pattern: None (continuous 20-minute block)

TASK DETAILS:
- Average session duration: 20 minutes (only 1 session)
- Progress: 100% of estimated 20 minutes (perfect estimation)
- Current status: Completed on Saturday, June 15, 2025
- Created: Saturday, June 15, 2025  
- Priority: Medium
- Last updated: Saturday, June 15, 2025

TIME INVESTMENT PATTERN: Single-session completion (planning task)
- Immediate execution after creation
- No procrastination or delays
- Efficient task scoping achieved
- Clean start-to-finish workflow

ESTIMATION ACCURACY:
- Original estimate: 20 minutes  
- Actual time: 20 minutes
- Variance: 0 minutes (perfect accuracy)
- Task type: Planning tasks well-estimated

SESSION QUALITY INDICATORS:
✅ Perfect time estimation
✅ Single-session completion
✅ No interruptions or context switching
✅ Immediate task execution
📋 Efficient planning methodology

PRODUCTIVITY INSIGHTS:
- Task type: Definition/Planning
- Execution style: Focused single session
- Estimation skill: Excellent for planning tasks
- Work pattern: Immediate action orientation

INTELLIGENT SELECTION STRATEGY:
Analyze the user query and select content types that will provide the most comprehensive answer:

- TIME PERIOD QUERIES: Match the scope (monthly_summary for "this month", weekly_summary for "this week", daily_summary for "today")
- PROJECT QUERIES: Start with project_summary, add task_aggregate for detailed tasks within projects
- TASK QUERIES: Use task_aggregate (comprehensive task data), add task_sessions for detailed session info
- PRODUCTIVITY ANALYTICS: Use higher-level summaries (monthly/weekly) that contain analytics and patterns
- PROGRESS TRACKING: Use task_aggregate and project_summary which contain progress data
- TIME TRACKING DETAILS: Use task_sessions and daily_summary for granular time data
- OVERVIEW QUESTIONS: Start with monthly_summary (most comprehensive) and add supporting levels

Consider what DATA is actually needed to answer the question comprehensively:
- Higher levels contain more context, analytics, and insights
- Lower levels contain more granular detail
- Select types that together provide complete information

EXAMPLES:
- "How productive was I this month?" → PRIMARY: monthly_summary
- "What tasks are in my AI project?" → PRIMARY: project_summary, task_aggregate
- "Show me my work sessions today" → PRIMARY: daily_summary, task_sessions
- "What's my task completion rate?" → PRIMARY: monthly_summary, weekly_summary (contain completion analytics)

Respond in JSON format:
{
  "primaryTypes": ["type1", "type2"],
  "secondaryTypes": ["type3"],
  "reasoning": "Explanation based on what data each selected type provides and why it answers the query",
  "confidence": 85
}`}static getContentTypeDescription(e){return{task_aggregate:"Individual task details with progress tracking, time spent, session count, completion status, and time investment patterns",task_sessions:"Session-level details for specific tasks with duration, session patterns, and completion tracking",project_summary:"Project overviews with task breakdowns by status, analytics including completion velocity, time estimation accuracy, and risk indicators",daily_summary:"Daily productivity breakdowns with project time investment, task-by-task details, session metrics, and focus quality analysis",weekly_summary:"Weekly productivity reports with project time distribution, task progress, completion rates, daily patterns, and momentum indicators",monthly_summary:"Comprehensive monthly overviews with project analytics, top tasks, weekly breakdowns, productivity patterns, achievements, and strategic insights",session:"Legacy session data (use task_sessions instead)"}[e]||"Unknown content type"}static parseAIContentTypeResponse(e){try{const t=e.match(/\{[\s\S]*\}/);if(t){const r=JSON.parse(t[0]),i=a=>a.toLowerCase().replace(/\s+/g,"_");return{primaryTypes:Array.isArray(r.primaryTypes)?r.primaryTypes.map(i):[],secondaryTypes:Array.isArray(r.secondaryTypes)?r.secondaryTypes.map(i):[],reasoning:r.reasoning||"AI analysis completed",confidence:Math.min(100,Math.max(0,r.confidence||70))}}return this.parseAIResponseFallback(e)}catch(t){return console.error("Failed to parse AI content type response:",t),{primaryTypes:["task_aggregate","project_summary"],secondaryTypes:["daily_summary"],reasoning:"Fallback to default types due to parsing error",confidence:50}}}static parseAIResponseFallback(e){const t=["task_aggregate","task_sessions","project_summary","daily_summary","weekly_summary","monthly_summary"],r=e.toLowerCase(),i=t.filter(a=>r.includes(a)||r.includes(a.replace("_"," "))||e.includes(a.toUpperCase().replace("_"," "))||e.includes(a.toUpperCase()));return{primaryTypes:i.slice(0,2),secondaryTypes:i.slice(2,4),reasoning:"Extracted from AI response text analysis",confidence:60}}static convertClassificationToAIFormat(e){const t=this.CONTENT_TYPE_MAPPINGS[e.primaryIntent];return{primaryTypes:t.primary.slice(0,2),secondaryTypes:t.secondary.slice(0,2),reasoning:`Rule-based classification: ${e.primaryIntent} with ${Math.round(e.confidence*100)}% confidence`,confidence:Math.round(e.confidence*100)}}static getContentTypeMappings(){return this.CONTENT_TYPE_MAPPINGS}}hn(qu,"TASK_PRIORITY_PATTERNS",[/\b(task|tasks)\s+(priorit|urgent|important|deadline|due)/i,/\b(what\s+should\s+i\s+work\s+on|next\s+task|current\s+tasks)/i,/\b(focus|concentrate|working\s+on|task\s+list)/i,/\b(pomodoro|session|active\s+task|in\s+progress)/i,/\b(complete|finish|accomplish|productivity)/i,/\b(efficiency|optimize\s+work|time\s+management)/i,/\b(list\s+of\s+tasks?|tasks?\s+in\s+|tasks?\s+for\s+|show\s+.*tasks?)/i,/\b(give\s+me.*tasks?|tasks?\s+from|tasks?\s+belonging\s+to)/i,/\b(what\s+tasks?|which\s+tasks?|all\s+tasks?)/i,/\b(tasks?\s+in\s+the\s+.*project|project.*tasks?)/i]),hn(qu,"PROJECT_FOCUS_PATTERNS",[/\b(project|projects)\s+(overview|status|summary|progress)/i,/\b(how\s+many\s+projects?|number\s+of\s+projects?|count\s+of\s+projects?)/i,/\b(all\s+projects?|list\s+projects?|show\s+projects?)/i,/\b(tell\s+me.*projects?|projects?\s+i\s+have|projects?\s+do\s+i\s+have)/i,/\b(projects?\s+(available|existing|current))/i,/\b(portfolio|initiative|workstream|deliverable)/i,/\b(project\s+breakdown|project\s+analysis|across\s+projects)/i,/\b(milestone|roadmap|project\s+plan)/i,/\b(project\s+comparison|project\s+metrics)/i,/\b(overall\s+progress|total\s+work|project\s+distribution)/i,/\b(my\s+projects?|which\s+projects?)/i,/\b(in\s+the\s+["']?[a-zA-Z0-9\s]+["']?\s+project)/i,/\b(project\s+["']?[a-zA-Z0-9\s]+["']?)/i,/\b(from\s+project|belonging\s+to\s+project)/i]),hn(qu,"SUMMARY_INSIGHTS_PATTERNS",[/\b(summary|overview|recap|insight|analysis)/i,/\b(daily|weekly|monthly)\s+(summary|report|pattern|trend)/i,/\b(productivity\s+(insight|analysis|pattern|trend))/i,/\b(time\s+spent|total\s+time|overall\s+stats)/i,/\b(performance|metrics|analytics|statistics)/i,/\b(how\s+productive|productivity\s+review)/i,/\b(last\s+(week|month)|this\s+(week|month)|past\s+(week|month))/i]),hn(qu,"CONTENT_TYPE_MAPPINGS",{task_priority:{primary:["task_aggregate","task_sessions"],secondary:["project_summary","daily_summary"],tertiary:["weekly_summary","monthly_summary"]},project_focus:{primary:["project_summary","task_aggregate"],secondary:["weekly_summary","task_sessions"],tertiary:["monthly_summary","daily_summary"]},summary_insights:{primary:["daily_summary","weekly_summary","monthly_summary"],secondary:["task_aggregate","project_summary"],tertiary:["task_sessions","session"]},general:{primary:["task_aggregate","project_summary"],secondary:["daily_summary","weekly_summary"],tertiary:["monthly_summary","task_sessions"]}});class $q{static generateContextualPrompt(e,t,r,i){let o=`${this.INTENT_SPECIFIC_PROMPTS[r.primaryIntent].systemMessage}

`;return o+="CRITICAL FORMATTING REQUIREMENTS:\\n",o+="• Use clean, scannable format with minimal clutter\\n",o+="• Start with ONE emoji section header: 🎯 **This Week's Focus**\\n",o+="• Use simple hierarchy:\\n",o+="  **Main Category** (bold, no bullets)\\n",o+="  • Key item (bullet + normal text)\\n",o+="  • Another key item\\n",o+="• **Bold only** project names and key metrics like **Make10000hours**\\n",o+="• Limit to 3-5 main points maximum\\n",o+="• NO sub-bullets, NO checkboxes mixed with bullets\\n",o+="• ONE blank line between sections only\\n",o+="• Keep responses short and actionable\\n\\n",o+="FORMATTING EXAMPLE:\\n",o+="🎯 **This Week's Focus**\\n\\n",o+="**Priority Tasks**\\n",o+="• **Make10000hours** project needs **2h 15m** more work\\n",o+="• Calendar improvements are **66% complete**\\n\\n",o+="**Key Metrics**\\n",o+="• **20 tasks completed** out of 22 this week\\n",o+="• **Strong momentum** with daily completion rate\\n\\n",o+="**Next Actions**\\n",o+="• Focus on morning productivity sessions\\n",o+="• Complete remaining calendar features\\n\\n",o+=`RESPONSE REQUIREMENTS:
`,o+=`1. Answer only what was asked - no extra information
`,o+=`2. Be direct and specific
`,o+=`3. Keep responses brief and scannable
`,o+=`4. Focus on actionable information only

`,o+=`USER QUESTION: ${e}

`,o+=`RELEVANT CONTEXT:
${t}
`,o}static getIntentSpecificGuidance(e){switch(e.primaryIntent){case"task_priority":return"Focus on analyzing task urgency, dependencies, and productivity patterns. Provide specific recommendations about what to work on next and when. Consider time estimates, deadlines, and the user's peak productivity periods.";case"project_focus":return"Analyze project-level metrics, progress, and resource allocation. Provide strategic insights about project portfolio health and recommendations for optimization. Compare projects and identify patterns.";case"summary_insights":return"Extract meaningful patterns and trends from the temporal data. Provide statistical insights, identify productivity peaks/valleys, and compare performance across time periods. Make data-driven recommendations.";case"general":return"Provide helpful, specific responses based on available data. Be clear about what information you have and offer relevant insights or recommendations.";default:return""}}static enhancePromptWithDataContext(e,t,r){let i=e;return i+=`

**Data Context:**
`,i+=`- Available data types: ${t.join(", ")}
`,i+=`- Data quality: ${r}
`,r==="low"?i+=`- Note: Limited data available. Provide general guidance and suggest ways to improve data collection.
`:r==="medium"?i+=`- Note: Moderate data available. Provide insights where possible and note any limitations.
`:i+=`- Note: Rich data available. Provide detailed, specific insights and recommendations.
`,i}static generateFallbackPrompt(e,t){return`You are a helpful productivity AI assistant. The user has asked: "${e}"

Available context: ${t}

Please provide a helpful response based on the available information. If the context is limited, acknowledge this and provide general guidance while suggesting how the user might get more specific insights.

Focus on being helpful, specific where possible, and clear about any limitations in the available data.`}}hn($q,"INTENT_SPECIFIC_PROMPTS",{task_priority:{systemMessage:"You are a productivity AI assistant focused on task prioritization. Provide direct, actionable answers about what to work on next.",instructions:["Answer the specific question asked - nothing more","For task recommendations, provide just the task name and brief reason","Skip background explanations unless directly relevant","Use bullet points only when listing multiple items","Focus on the most important 1-3 items only"],responseFormat:"Provide a direct answer that tells the user exactly what to do next.",examples:["Work on 'API Integration' - it's 2 days overdue and blocking other tasks.","Focus on Project Alpha today - deadline is tomorrow.","Complete the Database task - it has the highest impact."]},project_focus:{systemMessage:"You are a project management AI that provides clear project insights and recommendations.",instructions:["Answer only what was asked about projects","Give key metrics without extensive explanations","Highlight the most critical information only","Skip detailed analysis unless specifically requested","Focus on actionable insights"],responseFormat:"Provide the specific project information requested with key insights only.",examples:["Project Alpha: 60% complete, 2 weeks behind schedule.","You're spending most time on Mobile App (40% of total hours).","Website project needs attention - no progress in 5 days."]},summary_insights:{systemMessage:"You are a productivity analytics AI that provides concise data insights.",instructions:["Provide key metrics directly without lengthy explanations","Focus on the most significant patterns only","Skip statistical details unless specifically asked","Give 2-3 main insights maximum","Make insights actionable"],responseFormat:"Give the main productivity insights in a brief, scannable format.",examples:["This week: 23 hours focused work, 12 tasks completed. Peak productivity on Tuesdays.","You're 15% more productive in mornings. Consider scheduling important tasks then.","Average task time increased 20% - consider breaking large tasks down."]},general:{systemMessage:"You are a helpful productivity AI. Answer questions directly and concisely using available data.",instructions:["Answer exactly what the user asked","Keep responses brief and to the point","Include only essential information","Skip context unless it's critical","Focus on what the user can act on"],responseFormat:"Provide a direct, focused answer based on the available data.",examples:["You completed 5 tasks today.","Current project status: 3 active, 1 completed this week.","Most productive time: 9-11 AM based on your patterns."]}});class qS{static async queryWithRAG(e,t,r){const i=Date.now();try{console.log("🎯 Enhanced RAG Service: Processing query:",e);let a;try{console.log("🤖 Getting AI-powered content type selection..."),a=await qu.selectBestContentTypesWithAI(e,t),console.log("✅ AI Content Type Selection:",a)}catch(l){console.warn("⚠️ AI content type selection failed, using rule-based fallback:",l);const c=qu.classifyQuery(e),u=qu.getContentTypeMappings()[c.primaryIntent];a={primaryTypes:u.primary.slice(0,2),secondaryTypes:u.secondary.slice(0,2),reasoning:`Rule-based fallback: ${c.primaryIntent}`,confidence:Math.round(c.confidence*100)}}const o=await this.performIntelligentSearch(e,t,a.primaryTypes,a.secondaryTypes),s=await this.generateResponseFromDocs(e,o,i,a,r);return s.metadata.contentTypeSelection=a,s.metadata.searchStrategy=`ai_content_selection_${a.confidence>80?"high":"medium"}_confidence`,s}catch(a){return console.error("❌ Enhanced RAG Service failed:",a),this.generateFallbackResponse(e,i,[])}}static async queryWithHybridSearch(e,t,r,i){const a=Date.now();try{console.log(`🔍 Enhanced RAG query: "${e}" with filters:`,r);const o=this.determineOptimalChunkLevels(e);console.log(`🎯 Optimal chunk levels: [${o.join(", ")}]`);const s=await this.executeHybridSearch(e,t,{...r,chunkLevels:(r==null?void 0:r.chunkLevels)||o});console.log(`📚 Retrieved ${s.length} relevant documents`);const l=this.selectDiverseProjectSources(s,30);console.log(`🎯 Hybrid diverse selection: ${l.length}/${s.length} sources across multiple projects`);const c={primaryIntent:"general",secondaryIntents:[],confidence:.5,suggestedContentTypes:["task_aggregate","project_summary","daily_summary"],suggestedChunkTypes:["task_aggregate","project_summary","temporal_pattern"],mixingStrategy:"balanced"};return await this.generateResponseFromDocs(e,l,a,c,i)}catch(o){return console.error("❌ Enhanced RAG query error:",o),this.generateFallbackResponse(e,a)}}static async executeEnhancedSearch(e,t,r){try{const i=await this.performSemanticSearch(e,t,r);return i.length>0?(console.log(`✅ Semantic search returned ${i.length} results`),i):(console.log("⚠️ Semantic search failed, using keyword search"),await this.performKeywordSearch(e,t,r))}catch(i){return console.error("❌ Enhanced search failed:",i),[]}}static async executeIntelligentSearch(e,t,r){try{console.log(`🔍 Starting intelligent search with ${r.suggestedContentTypes.length} prioritized content types`);const i=await this.performContentAwareSemanticSearch(e,t,r.suggestedContentTypes);return i.length>0?(console.log(`✅ Content-aware semantic search returned ${i.length} results`),i):(console.log("⚠️ Semantic search failed, using content-aware keyword search"),await this.performContentAwareKeywordSearch(e,t,r.suggestedContentTypes))}catch(i){return console.error("❌ Intelligent search failed:",i),await this.executeEnhancedSearch(e,t,{chunkLevels:[1,2,3,4,5,6]})}}static async performContentAwareSemanticSearch(e,t,r){try{const i=await $r.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)throw new Error("Failed to generate query embedding");console.log(`📊 Content-aware search for types: [${r.join(", ")}]`);const a=["user_productivity_documents","embeddings"];let o=[];for(const s of a)try{console.log(`🔍 Searching table: ${s} for prioritized content types`);let l=Dt.from(s).select("*").eq("user_id",t).not("embedding","is",null);r.length>0&&(console.log(`🎯 Filtering by content types: [${r.join(", ")}]`),l=l.in("content_type",r));const{data:c,error:u}=await l.limit(100);if(!u&&c&&c.length>0){console.log(`✅ Found ${c.length} documents with prioritized content types in ${s}`);const h=c.map((f,m)=>{let v=f.embedding;if(typeof f.embedding=="string")try{v=JSON.parse(f.embedding)}catch(C){return console.error("Failed to parse embedding:",C),{...f,similarity_score:0,content_type_boost:0}}if(!Array.isArray(v))return{...f,similarity_score:0,content_type_boost:0};const y=this.calculateCosineSimilarity(i,v),w=f.content_type||"unknown",_=r.indexOf(w),S=_!==-1?(r.length-_)/r.length*.3:0,A=Math.min(1,y+S);return{...f,similarity_score:y,content_type_boost:S,final_score:A,embedding:v}}).sort((f,m)=>m.final_score-f.final_score).filter(f=>f.final_score>.1);console.log(`📊 Content-aware semantic results: ${h.length} docs above threshold`),h.length>0&&console.log(`Top scores: ${h.slice(0,3).map(f=>`${f.content_type}(${f.final_score.toFixed(3)})`).join(", ")}`),o=h.slice(0,80);break}else if(c&&c.length===0&&r.length>0){console.log(`⚠️ No documents found with prioritized content types [${r.join(", ")}], falling back to broader search`);let d=Dt.from(s).select("*").eq("user_id",t).not("embedding","is",null);const{data:h,error:f}=await d.limit(100);if(!f&&h&&h.length>0){console.log(`✅ Fallback search found ${h.length} documents in ${s}`);const v=h.map((y,w)=>{let _=y.embedding;if(typeof y.embedding=="string")try{_=JSON.parse(y.embedding)}catch(A){return console.error("Failed to parse embedding:",A),{...y,similarity_score:0,content_type_boost:0}}if(!Array.isArray(_))return{...y,similarity_score:0,content_type_boost:0};const S=this.calculateCosineSimilarity(i,_);return{...y,similarity_score:S,content_type_boost:0,final_score:S,embedding:_}}).sort((y,w)=>w.final_score-y.final_score).filter(y=>y.final_score>.1);console.log(`📊 Fallback semantic results: ${v.length} docs above threshold`),v.length>0&&(console.log(`Available content types: ${[...new Set(v.map(y=>y.content_type))].join(", ")}`),console.log(`Top scores: ${v.slice(0,3).map(y=>`${y.content_type}(${y.final_score.toFixed(3)})`).join(", ")}`)),o=v.slice(0,80);break}}}catch(l){console.warn(`⚠️ Error searching ${s}:`,l);continue}return o}catch(i){return console.warn("Content-aware semantic search failed:",i),[]}}static async performContentAwareKeywordSearch(e,t,r){try{console.log(`🔍 Content-aware keyword search for types: [${r.join(", ")}]`);const i=e.toLowerCase().split(/\s+/).filter(u=>u.length>2);console.log(`🔍 Keyword search terms: [${i.join(", ")}]`);let a=Dt.from("user_productivity_documents").select("*").eq("user_id",t);if(r.length>0&&(a=a.in("content_type",r)),i.length>0){const u=i.join(" | ");a=a.textSearch("content",u)}const{data:o,error:s}=await a.order("created_at",{ascending:!1}).limit(80);if(s)return console.error("❌ Content-aware keyword search error:",s),[];if(!o||o.length===0)return console.log("ℹ️ No documents found with content-aware keyword search"),[];const c=o.map(u=>{const d=(u.content||"").toLowerCase();let h=0;i.forEach(w=>{const _=(d.match(new RegExp(w,"g"))||[]).length;h+=_*(1/Math.sqrt(w.length))}),h=Math.min(1,h/i.length);const f=u.content_type||"unknown",m=r.indexOf(f),v=m!==-1?(r.length-m)/r.length*.4:0,y=Math.min(1,h+v);return{...u,relevanceScore:y,keywordScore:h,contentTypeBoost:v}}).sort((u,d)=>d.relevanceScore-u.relevanceScore).filter(u=>u.relevanceScore>.05);return console.log(`📊 Content-aware keyword search found ${c.length} relevant documents`),c.length>0&&console.log(`Top matches: ${c.slice(0,3).map(u=>`${u.content_type}(${u.relevanceScore.toFixed(3)})`).join(", ")}`),c.slice(0,60)}catch(i){return console.error("❌ Content-aware keyword search failed:",i),[]}}static async performSemanticSearch(e,t,r){try{const i=await $r.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)throw new Error("Failed to generate query embedding");console.log(`📊 Query embedding generated: ${i.length} dimensions`);const a=["user_productivity_documents","postgres","embeddings"];let o=[],s="";for(const d of a)try{console.log(`🔍 Trying table: ${d}`);let h=Dt.from(d).select("*").eq("user_id",t);if(d==="postgres"){const v=["user_id","userId","user"];for(const y of v)try{h=Dt.from(d).select("*").eq(y,t);break}catch{continue}}d!=="postgres"&&(h=h.not("embedding","is",null)),r.chunkLevels.length>0&&d!=="postgres"&&(h=h.in("metadata->chunkLevel",r.chunkLevels));const{data:f,error:m}=await h.limit(100);if(!m&&f&&f.length>0){o=f,s=d,console.log(`✅ Successfully found ${f.length} documents in table: ${d}`);break}else console.log(m?`⚠️ Table ${d} error: ${m.message}`:`⚠️ Table ${d} returned no documents`)}catch(h){console.log(`❌ Table ${d} failed: ${h}`);continue}if(console.log(`🔍 Semantic search found ${(o==null?void 0:o.length)||0} documents with embeddings from table: ${s}`),console.log(`📊 Query embedding length: ${i.length}`),!o||o.length===0)return console.log("⚠️ No documents found in any table for user"),[];if(s==="postgres"){console.log("🔄 Using postgres table - checking structure...");const d=o[0];if(console.log("📋 Sample document keys:",Object.keys(d)),d.embedding)console.log("✅ Postgres table has embeddings, attempting similarity search");else return console.log("⚠️ Postgres table has no embeddings, returning documents directly"),o.slice(0,10)}const c=o.map((d,h)=>{var v,y;h===0&&(console.log("🔍 Debug first document embedding:"),console.log("- Embedding type:",typeof d.embedding),console.log("- Embedding is array:",Array.isArray(d.embedding)),console.log("- Embedding length:",(v=d.embedding)==null?void 0:v.length),console.log("- First few values:",(y=d.embedding)==null?void 0:y.slice(0,5)),console.log("- Query embedding type:",typeof i),console.log("- Query embedding length:",i.length),console.log("- Query first few values:",i.slice(0,5)));let f=d.embedding;if(typeof d.embedding=="string")try{f=JSON.parse(d.embedding),h===0&&console.log("✅ Successfully parsed embedding from string")}catch(w){return console.error("❌ Failed to parse embedding string:",w),{...d,similarity_score:0}}if(!Array.isArray(f))return h===0&&console.error("❌ Embedding is not an array:",typeof f),{...d,similarity_score:0};const m=this.calculateCosineSimilarity(i,f);return h===0&&console.log("🎯 First document similarity score:",m),{...d,similarity_score:m,embedding:f}}).sort((d,h)=>h.similarity_score-d.similarity_score);let u=c.filter(d=>d.similarity_score>.3);return u.length===0&&(console.log("⚠️ No docs above 0.3 threshold, trying 0.15 threshold"),u=c.filter(d=>d.similarity_score>.15)),u.length===0&&(console.log("⚠️ No docs above 0.15 threshold, taking top 5 docs"),u=c.slice(0,5)),u=u.slice(0,20),console.log(`🔍 Semantic search found ${u.length} relevant documents`),console.log(`📊 Similarity scores: ${u.slice(0,3).map(d=>{var h;return(h=d.similarity_score)==null?void 0:h.toFixed(3)}).join(", ")}`),u.length>0&&u.every(d=>d.similarity_score===0)?(console.log("🔄 All similarities are 0, trying PostgreSQL native vector search..."),await this.performNativeVectorSearch(i,t,s)):u}catch(i){return console.warn("Semantic search failed:",i),[]}}static async performNativeVectorSearch(e,t,r){try{console.log("🚀 Starting direct vector comparison...");const{data:i,error:a}=await Dt.from(r).select("*").eq("user_id",t).not("embedding","is",null).limit(100);if(a||!i)return console.error("❌ Failed to fetch documents for native search:",a),[];console.log(`📊 Processing ${i.length} documents with direct comparison...`);const s=i.map((l,c)=>{let u=l.embedding;if(typeof l.embedding=="string")try{u=JSON.parse(l.embedding)}catch(h){return console.error(`❌ Failed to parse embedding for doc ${c}:`,h),{...l,similarity_score:0}}let d=0;if(Array.isArray(u)&&u.length===e.length)try{for(let h=0;h<e.length;h++)d+=e[h]*u[h];d=Math.max(0,(d+1)/2)}catch(h){console.error(`❌ Similarity calculation failed for doc ${c}:`,h),d=0}return{...l,similarity_score:d,embedding:u}}).sort((l,c)=>c.similarity_score-l.similarity_score).slice(0,20);return console.log(`✅ Native search returned ${s.length} results`),console.log(`📊 Top similarities: ${s.slice(0,3).map(l=>{var c;return(c=l.similarity_score)==null?void 0:c.toFixed(3)}).join(", ")}`),s}catch(i){return console.error("❌ Native vector search error:",i),[]}}static async performKeywordSearch(e,t,r){const i=e.toLowerCase().split(" ").filter(a=>a.length>2);try{const a=["user_productivity_documents","postgres"];for(const o of a){console.log(`🔍 Keyword search trying table: ${o}`);let s=Dt.from(o).select("*").eq("user_id",t);if(o==="postgres"){const c=["user_id","userId","user"];for(const u of c)try{s=Dt.from(o).select("*").eq(u,t);break}catch{continue}}r.chunkLevels.length>0&&o!=="postgres"&&(s=s.in("metadata->chunkLevel",r.chunkLevels));const l=[()=>s.textSearch("content",e),()=>s.ilike("content",`%${e}%`),()=>{let c=s;return i.forEach(u=>{c=c.ilike("content",`%${u}%`)}),c},()=>s.order("created_at",{ascending:!1})];for(let c=0;c<l.length;c++){const u=l[c];try{console.log(`🔍 Trying keyword search strategy ${c+1}/${l.length} on table ${o}`);const{data:d,error:h}=await u().order("created_at",{ascending:!1}).limit(15);if(!h&&d&&d.length>0)return console.log(`✅ Keyword search strategy ${c+1} succeeded with ${d.length} results from table ${o}`),d;h?console.log(`⚠️ Keyword search strategy ${c+1} error on table ${o}:`,h.message):console.log(`⚠️ Keyword search strategy ${c+1} returned no results from table ${o}`)}catch(d){console.log(`❌ Keyword search strategy ${c+1} failed on table ${o}:`,d);continue}}}return[]}catch(a){return console.error("All keyword search strategies failed:",a),[]}}static async processAndStoreChunks(e){console.log(`🚀 Processing and storing chunks for user: ${e}`);try{const t=await Fq.createMultiLevelChunks(e);let r=0;const i=[];for(const a of t)try{await this.storeChunkWithEmbedding(a,e),r++,r%10===0&&await new Promise(o=>setTimeout(o,100))}catch(o){i.push(`Chunk ${a.id}: ${o instanceof Error?o.message:"Unknown error"}`)}return console.log(`✅ Stored ${r}/${t.length} chunks`),{success:i.length===0,chunksProcessed:r,errors:i}}catch(t){return console.error("❌ Error processing chunks:",t),{success:!1,chunksProcessed:0,errors:[t instanceof Error?t.message:"Unknown error"]}}}static async executeHybridSearch(e,t,r){console.log("🔀 Using NEW True Hybrid Search (Vector + BM25 + RRF)");try{const{HybridSearchService:i}=await Fr(async()=>{const{HybridSearchService:l}=await Promise.resolve().then(()=>MMt);return{HybridSearchService:l}},void 0),a={chunkLevels:r.chunkLevels,timeframe:r.timeframe||"all",projects:r.projects||[],vectorWeight:1,keywordWeight:1,rrfK:60,maxResults:20,minVectorSimilarity:.1,minKeywordScore:0,enableEnhancedBM25:!0,contentTypeBoosts:{task_aggregate:1.2,project_summary:1.1,session:1,daily_summary:1},enableReranking:!0,rerankingModel:"hybrid",rerankingCandidates:50,minRerankScore:.1,rerankingWeights:{diversityWeight:.1,recencyWeight:.05,contentTypeWeights:{project_summary:1.2,task_aggregate:1.1,session:1,daily_summary:.9}}};r.productivityRange&&(a.contentTypeBoosts={...a.contentTypeBoosts,task_aggregate:1.3,session:1.2}),r.timeOfDay&&(a.contentTypeBoosts={...a.contentTypeBoosts,session:1.3,daily_summary:1.2});const o=await i.performHybridSearch(e,t,a);console.log(`✅ Hybrid search completed: ${o.documents.length} results`),console.log(`📊 Vector: ${o.metadata.vectorResultCount}, Keyword: ${o.metadata.keywordResultCount}, Processing: ${o.metadata.processingTime}ms`);let s=o.documents;if(r.completionStatus&&r.completionStatus!=="all"){const l=r.completionStatus==="completed";s=s.filter(c=>{var d,h;const u=(h=(d=c.metadata)==null?void 0:d.analytics)==null?void 0:h.completionRate;return l?u===100:u!==100})}return r.productivityRange&&(s=s.filter(l=>{var u,d;const c=(d=(u=l.metadata)==null?void 0:u.analytics)==null?void 0:d.productivity;return c>=r.productivityRange[0]&&c<=r.productivityRange[1]})),r.timeOfDay&&(s=s.filter(l=>{var c,u;return((u=(c=l.metadata)==null?void 0:c.analytics)==null?void 0:u.timeOfDay)===r.timeOfDay})),console.log(`🎯 After additional filtering: ${s.length} results`),s}catch(i){console.error("❌ Hybrid search failed, falling back to basic search:",i);const{data:a}=await Dt.from("user_productivity_documents").select("*").eq("user_id",t).ilike("content",`%${e}%`).limit(10);return a||[]}}static determineOptimalChunkLevels(e){const t=e.toLowerCase();return t.includes("task")||t.includes("working on")||t.includes("progress")||t.includes("complete")||t.includes("productivity")||t.includes("efficiency")?[1,3]:t.includes("project")||t.includes("overall")||t.includes("summary")||t.includes("total")||t.includes("portfolio")?[2,1]:t.includes("session")||t.includes("today")||t.includes("this morning")||t.includes("right now")||t.includes("current")||t.includes("detailed")?[3,1]:t.includes("pattern")||t.includes("week")||t.includes("productivity trends")||t.includes("when")||t.includes("daily")||t.includes("weekly")?[4,2]:t.includes("yesterday")||t.includes("last week")||t.includes("this week")||t.includes("timeline")?[4,3]:t.includes("insight")||t.includes("recommend")||t.includes("analyze")||t.includes("improve")?[1,2,4]:[1,2,3,4]}static selectDiverseProjectSources(e,t=12){if(!e||e.length===0)return[];const r={},i=[];e.forEach(c=>{var d,h,f;const u=((h=(d=c.metadata)==null?void 0:d.entities)==null?void 0:h.projectId)||((f=c.metadata)==null?void 0:f.projectId)||c.project_id||"unknown";u!=="unknown"?(r[u]||(r[u]=[]),r[u].push(c)):i.push(c)});const a=Object.keys(r);console.log(`📊 Found docs from ${a.length} projects + ${i.length} uncategorized docs`),a.length>0&&a.forEach(c=>{console.log(`   - Project ${c}: ${r[c].length} docs`)});const o=Math.max(3,Math.floor(t/Math.max(a.length,1))),s=t-o*a.length;console.log(`📈 Source distribution: ${o} per project + ${s} bonus slots = target ${t} sources`);let l=[];if(a.forEach((c,u)=>{const d=r[c].sort((f,m)=>(m.similarity_score||m.relevanceScore||0)-(f.similarity_score||f.relevanceScore||0)),h=o+(u<s?1:0);l.push(...d.slice(0,h))}),l.length<t&&i.length>0){const c=i.sort((d,h)=>(h.similarity_score||h.relevanceScore||0)-(d.similarity_score||d.relevanceScore||0)),u=t-l.length;l.push(...c.slice(0,u))}return l.sort((c,u)=>(u.similarity_score||u.relevanceScore||0)-(c.similarity_score||c.relevanceScore||0)).slice(0,t)}static rankDocsByRelevance(e,t,r){const i=t.toLowerCase().split(" ");return e.map(a=>{var u,d,h;let o=0;const s=((u=a.metadata)==null?void 0:u.chunkLevel)||1,l=r.indexOf(s);l!==-1&&(o+=(r.length-l)*10);const c=a.content.toLowerCase();if(i.forEach(f=>{c.includes(f)&&(o+=5)}),a.created_at){const f=(Date.now()-new Date(a.created_at).getTime())/864e5;o+=Math.max(0,5-f)}return(h=(d=a.metadata)==null?void 0:d.analytics)!=null&&h.productivity&&(o+=a.metadata.analytics.productivity),{...a,relevanceScore:o}}).sort((a,o)=>o.relevanceScore-a.relevanceScore)}static async generateResponseFromDocs(e,t,r,i,a){var c,u;try{console.log(`📊 generateResponseFromDocs called with ${t.length} docs:`,t.map(y=>{var w;return{id:y.id,type:y.content_type,similarity:y.similarity,relevanceScore:y.relevanceScore,hasContent:!!y.content,contentLength:((w=y.content)==null?void 0:w.length)||0}}));const d=t.map(y=>`${y.content} (Type: ${y.content_type}, Relevance: ${y.similarity||.5})`).join(`

`),{AdvancedPromptService:h}=await Fr(async()=>{const{AdvancedPromptService:y}=await import("./advancedPromptService-lePBGKwa.js");return{AdvancedPromptService:y}},[]),f="primaryTypes"in i?{primaryIntent:"general",secondaryIntents:[],confidence:i.confidence/100,suggestedContentTypes:[...i.primaryTypes,...i.secondaryTypes],suggestedChunkTypes:[...i.primaryTypes,...i.secondaryTypes],mixingStrategy:"comprehensive"}:i,m=await h.processWithAdvancedPrompting(e,d,f,a||[]);console.log(`🎯 Advanced prompting: ${m.technique_used}, confidence: ${m.confidence}`);const v=t.map((y,w)=>{var _,S,A,C,D;return{id:y.id||`doc_${w}`,type:((_=y.metadata)==null?void 0:_.chunkType)||y.content_type||"session",contentId:((A=(S=y.metadata)==null?void 0:S.entities)==null?void 0:A.taskId)||((D=(C=y.metadata)==null?void 0:C.entities)==null?void 0:D.projectId)||y.id,title:this.generateSourceTitle(y),snippet:y.content.substring(0,150)+"...",relevanceScore:y.similarity||y.relevanceScore||1-w*.1}});return console.log("🔍 Final sources structure (Advanced path):",v.map(y=>{var w;return{id:y.id,type:y.type,title:y.title,relevanceScore:y.relevanceScore,hasSnippet:!!y.snippet,snippetLength:((w=y.snippet)==null?void 0:w.length)||0}})),{response:m.response,sources:v,metadata:{totalSources:t.length,responseTime:Date.now()-r,searchStrategy:`enhanced_with_${m.technique_used}`,confidence:m.confidence,retrievedDocuments:t.length,relevanceScore:t.length>0?t[0].similarity||t[0].relevanceScore||.8:0,tokens:this.estimateTokens(m.response),model:"gpt-4o-mini",chunkLevelsUsed:Array.from(new Set(t.map(y=>{var w;return(w=y.metadata)==null?void 0:w.chunkLevel}).filter(Boolean))),advancedPrompting:{technique:m.technique_used,confidence:m.confidence,processingTime:m.processing_time,reasoningSteps:((c=m.reasoning)==null?void 0:c.reasoning_steps.length)||0,validationScore:(u=m.validation)==null?void 0:u.overall_score,correctionApplied:!!m.correction}}}}catch(d){console.error("❌ Advanced prompting failed, using standard approach:",d)}if(t.length===0)return this.generateFallbackResponse(e,r,t);const o=t.map((d,h)=>{var y;const f=d.metadata||{},m=((y=f.entities)==null?void 0:y.projectId)||f.projectId||d.project_id||"Unknown Project";return`${f.chunkType?`[Project: ${m} | ${f.chunkType} - Level ${f.chunkLevel}]`:`[Project: ${m} | Document]`} ${d.content}`}).join(`

`),s="primaryTypes"in i?{primaryIntent:"general",secondaryIntents:[],confidence:i.confidence/100,suggestedContentTypes:[...i.primaryTypes,...i.secondaryTypes],suggestedChunkTypes:[...i.primaryTypes,...i.secondaryTypes],mixingStrategy:"comprehensive"}:i,l=this.buildEnhancedPrompt(e,o,t,s);try{const d=await $r.generateChatResponse({query:l,context:o,conversationHistory:a||[]}),h=this.cleanResponse(d),f=t.map((m,v)=>{var y,w,_,S,A;return{id:m.id||`doc_${v}`,type:((y=m.metadata)==null?void 0:y.chunkType)||m.content_type||"session",contentId:((_=(w=m.metadata)==null?void 0:w.entities)==null?void 0:_.taskId)||((A=(S=m.metadata)==null?void 0:S.entities)==null?void 0:A.projectId)||m.id,title:this.generateSourceTitle(m),snippet:m.content.substring(0,150)+"...",relevanceScore:m.similarity||m.relevanceScore||1-v*.1}});return console.log("🔍 Final sources structure (Fallback path):",f.map(m=>{var v;return{id:m.id,type:m.type,title:m.title,relevanceScore:m.relevanceScore,hasSnippet:!!m.snippet,snippetLength:((v=m.snippet)==null?void 0:v.length)||0}})),{response:h,sources:f,metadata:{responseTime:Date.now()-r,relevanceScore:t.length>0?t[0].relevanceScore||.8:0,tokens:this.estimateTokens(h),model:"gpt-4o-mini",retrievedDocuments:t.length,chunkLevelsUsed:Array.from(new Set(t.map(m=>{var v;return(v=m.metadata)==null?void 0:v.chunkLevel}).filter(Boolean))),searchStrategy:"hybrid_multi_level"}}}catch(d){return console.error("❌ OpenAI response generation failed:",d),this.generateFallbackResponse(e,r,t)}}static async storeChunkWithEmbedding(e,t){var r,i;try{const a=await $r.generateEmbedding({content:e.content,contentType:e.content_type}),o=e.content_type,s=((r=e.metadata.entities)==null?void 0:r.taskId)||((i=e.metadata.entities)==null?void 0:i.projectId)||e.id,{data:l}=await Dt.from("user_productivity_documents").select("id").eq("user_id",t).eq("content_type",o).eq("metadata->>documentId",s).single(),c={user_id:t,content_type:o,content:e.content,embedding:a,metadata:{...e.metadata,isEnhanced:!0,documentId:s}};let u;if(l?u=(await Dt.from("user_productivity_documents").update(c).eq("id",l.id)).error:u=(await Dt.from("user_productivity_documents").insert(c)).error,u)throw u}catch(a){throw console.error(`Failed to store chunk ${e.id}:`,a),a}}static buildEnhancedPrompt(e,t,r,i){const a=$q.generateContextualPrompt(e,t,i),o=Array.from(new Set(r.map(c=>{var u;return c.content_type||((u=c.metadata)==null?void 0:u.chunkType)||"unknown"}).filter(c=>c!=="unknown")));let s="low";r.length>=15&&o.length>=3?s="high":r.length>=8&&o.length>=2&&(s="medium");const l=$q.enhancePromptWithDataContext(a,o,s);return console.log(`🎯 Generated ${i.primaryIntent} prompt with ${s} data quality`),l}static generateSourceTitle(e){switch((e.metadata||{}).chunkType){case"session":return"Work Session";case"task_aggregate":return"Task Summary";case"project_summary":return"Project Overview";case"task_sessions":return"Task Sessions Summary";case"temporal_pattern":return"Productivity Pattern";default:return e.content_type||"Document"}}static getDateFilter(e){const t=new Date;switch(e){case"today":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString();case"week":return new Date(t.getTime()-7*24*60*60*1e3).toISOString();case"month":return new Date(t.getFullYear(),t.getMonth()-1,t.getDate()).toISOString();default:return new Date(0).toISOString()}}static generateFallbackResponse(e,t,r){const i=["Try asking about your recent work sessions or tasks","Ask about specific projects you're working on","Request information for a specific time period","Ask for help finding specific data"];return{response:r&&r.length>0?`I found ${r.length} related items in your productivity data, but I'm having trouble generating a detailed analysis right now. ${i[Math.floor(Math.random()*i.length)]}.`:`I couldn't find specific productivity data related to your query. This might be because your data hasn't been synced yet. Try running a data sync first, or ${i[Math.floor(Math.random()*i.length)]}.`,sources:r?r.slice(0,8).map((a,o)=>({id:a.id||`fallback_${o}`,type:a.content_type||"document",contentId:a.id||`fallback_${o}`,title:a.content_type||"Document",snippet:a.content.substring(0,100)+"...",relevanceScore:.3})):[],metadata:{responseTime:Date.now()-t,relevanceScore:.2,tokens:50,model:"fallback",retrievedDocuments:(r==null?void 0:r.length)||0,chunkLevelsUsed:[],searchStrategy:"fallback"}}}static estimateTokens(e){return Math.ceil(e.length/4)}static cleanResponse(e){return e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").trim()}static calculateCosineSimilarity(e,t){if(!e||!t)return console.error("❌ One or both vectors are null/undefined"),0;if(!Array.isArray(e)||!Array.isArray(t))return console.error("❌ One or both vectors are not arrays:",typeof e,typeof t),0;if(e.length!==t.length)return console.error(`❌ Vector length mismatch: ${e.length} vs ${t.length}`),0;if(e.length===0)return console.error("❌ Empty vectors provided"),0;let r=0,i=0,a=0;for(let s=0;s<e.length;s++){const l=Number(e[s]),c=Number(t[s]);if(isNaN(l)||isNaN(c))return console.error(`❌ NaN value found at index ${s}: vecA[${s}]=${e[s]}, vecB[${s}]=${t[s]}`),0;r+=l*c,i+=l*l,a+=c*c}if(i===0||a===0)return console.error("❌ One or both vectors have zero magnitude"),0;const o=r/(Math.sqrt(i)*Math.sqrt(a));return isNaN(o)?(console.error("❌ Cosine similarity calculation resulted in NaN"),0):o}static async ensureRichContext(e,t,r,i){console.log(`🎯 Rich context analysis: ${e.length} initial sources (target: 40-80)`);let s=[...e];if(s.length>=40)return console.log("✅ Sufficient sources found, applying diversity optimization"),this.optimizeSourceDiversity(s,80);console.log(`📈 Insufficient sources (${s.length}/40), applying progressive enrichment`);try{const c=await this.performRelaxedSimilaritySearch(t,r,i);if(s=this.mergeUniqueDocuments(s,c),console.log(`📊 After relaxed similarity: ${s.length} sources`),s.length>=40)return this.optimizeSourceDiversity(s,80);const u=await this.performExpandedContentTypeSearch(t,r,i);if(s=this.mergeUniqueDocuments(s,u),console.log(`📊 After expanded content types: ${s.length} sources`),s.length>=40)return this.optimizeSourceDiversity(s,80);const d=await this.performTemporalDiversifiedSearch(t,r);if(s=this.mergeUniqueDocuments(s,d),console.log(`📊 After temporal diversification: ${s.length} sources`),s.length>=40)return this.optimizeSourceDiversity(s,80);const h=await this.performSemanticNeighborExpansion(s,r);s=this.mergeUniqueDocuments(s,h),console.log(`📊 After semantic neighbor expansion: ${s.length} sources`)}catch(c){console.error("❌ Error during rich context enrichment:",c)}const l=this.optimizeSourceDiversity(s,80);return console.log(`🎯 Final rich context: ${l.length} sources (${l.length>=40?"✅ sufficient":"⚠️ limited"})`),l}static async performRelaxedSimilaritySearch(e,t,r){try{const i=await $r.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)return[];console.log("🔍 Relaxed similarity search (threshold: 0.05)");const a=["user_productivity_documents","embeddings"];let o=[];for(const s of a)try{const{data:l,error:c}=await Dt.from(s).select("*").eq("user_id",t).not("embedding","is",null).limit(200);if(!c&&l&&l.length>0){o=l.map(h=>{let f=h.embedding;if(typeof h.embedding=="string")try{f=JSON.parse(h.embedding)}catch{return{...h,similarity_score:0}}if(!Array.isArray(f))return{...h,similarity_score:0};const m=this.calculateCosineSimilarity(i,f);return{...h,similarity_score:m,embedding:f}}).filter(h=>h.similarity_score>.05).sort((h,f)=>f.similarity_score-h.similarity_score).slice(0,100);break}}catch{continue}return console.log(`📊 Relaxed similarity found: ${o.length} additional sources`),o}catch(i){return console.warn("⚠️ Relaxed similarity search failed:",i),[]}}static async performExpandedContentTypeSearch(e,t,r){try{console.log("🔍 Expanded content type search beyond prioritized types");const{data:i,error:a}=await Dt.from("user_productivity_documents").select("content_type").eq("user_id",t).not("content_type","is",null);if(a||!i)return[];const s=[...new Set(i.map(m=>m.content_type))].filter(m=>!r.suggestedContentTypes.includes(m));if(s.length===0)return[];console.log(`📊 Searching expanded content types: [${s.join(", ")}]`);const l=e.toLowerCase().split(/\s+/).filter(m=>m.length>2);let c=Dt.from("user_productivity_documents").select("*").eq("user_id",t).in("content_type",s);if(l.length>0){const m=l.join(" | ");c=c.textSearch("content",m)}const{data:u,error:d}=await c.order("created_at",{ascending:!1}).limit(80);if(d||!u)return[];const f=u.map(m=>{const v=(m.content||"").toLowerCase();let y=0;return l.forEach(w=>{const _=(v.match(new RegExp(w,"g"))||[]).length;y+=_}),{...m,relevanceScore:y/Math.max(1,l.length),source:"expanded_content_types"}}).sort((m,v)=>v.relevanceScore-m.relevanceScore).filter(m=>m.relevanceScore>0);return console.log(`📊 Expanded content types found: ${f.length} additional sources`),f.slice(0,50)}catch(i){return console.warn("⚠️ Expanded content type search failed:",i),[]}}static async performTemporalDiversifiedSearch(e,t){try{console.log("🔍 Temporal diversification search");const r=e.toLowerCase().split(/\s+/).filter(s=>s.length>2),i=[{label:"last_7_days",days:7},{label:"last_30_days",days:30},{label:"last_90_days",days:90},{label:"older",days:365}];let a=[];for(const s of i)try{const l=new Date;l.setDate(l.getDate()-s.days);let c=Dt.from("user_productivity_documents").select("*").eq("user_id",t);if(s.label==="older"?c=c.lt("created_at",l.toISOString()):c=c.gte("created_at",l.toISOString()),r.length>0){const h=r.join(" | ");c=c.textSearch("content",h)}const{data:u,error:d}=await c.order("created_at",{ascending:!1}).limit(20);if(!d&&u&&u.length>0){const h=u.map(f=>({...f,temporal_range:s.label,relevanceScore:this.calculateTemporalRelevance(f,e),source:"temporal_diversification"}));a.push(...h),console.log(`📊 ${s.label}: ${u.length} sources`)}}catch(l){console.warn(`⚠️ Temporal range ${s.label} search failed:`,l);continue}const o=a.sort((s,l)=>l.relevanceScore-s.relevanceScore).filter(s=>s.relevanceScore>0);return console.log(`📊 Temporal diversification found: ${o.length} additional sources`),o.slice(0,60)}catch(r){return console.warn("⚠️ Temporal diversification search failed:",r),[]}}static async performSemanticNeighborExpansion(e,t){try{if(console.log(`🔍 Semantic neighbor expansion from ${e.length} seed sources`),e.length===0)return[];const r=e.filter(o=>(o.similarity_score||o.relevanceScore||0)>.2).slice(0,10);if(r.length===0)return[];let i=[];for(const o of r)try{if(!o.embedding)continue;const{data:s,error:l}=await Dt.from("user_productivity_documents").select("*").eq("user_id",t).not("embedding","is",null).neq("id",o.id).limit(30);if(!l&&s&&s.length>0){const c=s.map(u=>{let d=u.embedding;if(typeof u.embedding=="string")try{d=JSON.parse(u.embedding)}catch{return null}if(!Array.isArray(d))return null;const h=this.calculateCosineSimilarity(o.embedding,d);return h>.3?{...u,neighbor_similarity:h,seed_id:o.id,source:"semantic_neighbor",embedding:d}:null}).filter(Boolean);i.push(...c)}}catch(s){console.warn(`⚠️ Neighbor expansion for seed ${o.id} failed:`,s);continue}const a=this.deduplicateById(i).sort((o,s)=>s.neighbor_similarity-o.neighbor_similarity);return console.log(`📊 Semantic neighbor expansion found: ${a.length} additional sources`),a.slice(0,40)}catch(r){return console.warn("⚠️ Semantic neighbor expansion failed:",r),[]}}static optimizeSourceDiversity(e,t){if(console.log(`🎯 Optimizing source diversity: ${e.length} → ${t} sources`),e.length<=t)return e;const r=this.groupBy(e,"content_type"),i=this.groupBy(e,"project_id"),a=this.groupBy(e,"temporal_range");console.log("📊 Diversity analysis:",{contentTypes:Object.keys(r).length,projects:Object.keys(i).length,temporalRanges:Object.keys(a).length});const o=[],s=Math.max(1,Math.floor(t*.6/Object.keys(r).length)),l=Math.max(1,Math.floor(t*.3/Object.keys(i).length));Math.max(1,Math.floor(t*.1/Object.keys(a).length)),Object.entries(r).forEach(([u,d])=>{const h=d.sort((f,m)=>(m.similarity_score||m.relevanceScore||m.final_score||0)-(f.similarity_score||f.relevanceScore||f.final_score||0));o.push(...h.slice(0,s))}),Object.entries(i).forEach(([u,d])=>{const f=d.sort((m,v)=>(v.similarity_score||v.relevanceScore||v.final_score||0)-(m.similarity_score||m.relevanceScore||m.final_score||0)).filter(m=>!o.some(v=>v.id===m.id));o.push(...f.slice(0,l))});const c=t-o.length;if(c>0){const u=e.filter(d=>!o.some(h=>h.id===d.id)).sort((d,h)=>(h.similarity_score||h.relevanceScore||h.final_score||0)-(d.similarity_score||d.relevanceScore||d.final_score||0));o.push(...u.slice(0,c))}return console.log(`✅ Diversity optimization complete: ${o.length} sources selected`),o.slice(0,t)}static mergeUniqueDocuments(e,t){const r=new Set(e.map(a=>a.id)),i=t.filter(a=>!r.has(a.id));return[...e,...i]}static deduplicateById(e){const t=new Set;return e.filter(r=>t.has(r.id)?!1:(t.add(r.id),!0))}static groupBy(e,t){return e.reduce((r,i)=>{const a=i[t]||"unknown";return r[a]||(r[a]=[]),r[a].push(i),r},{})}static calculateTemporalRelevance(e,t){const r=(e.content||"").toLowerCase(),i=t.toLowerCase().split(/\s+/).filter(c=>c.length>2);let a=0;i.forEach(c=>{const u=(r.match(new RegExp(c,"g"))||[]).length;a+=u});const o=new Date(e.created_at||e.timestamp||Date.now()),s=(Date.now()-o.getTime())/(1e3*60*60*24),l=Math.max(0,1-s/365);return a/Math.max(1,i.length)+l*.1}static generateRelevanceExplanation(e,t){const r=e.content_type||"unknown",i=e.similarity||.5;return i>.8?`High relevance (${(i*100).toFixed(0)}%) - Strong semantic match with your query`:i>.6?`Good relevance (${(i*100).toFixed(0)}%) - Related ${r} content`:i>.4?`Moderate relevance (${(i*100).toFixed(0)}%) - Contains related information`:`Basic relevance (${(i*100).toFixed(0)}%) - Contextual match`}static async performIntelligentSearch(e,t,r,i){const{supabase:a}=await Fr(async()=>{const{supabase:s}=await Promise.resolve().then(()=>_Mt);return{supabase:s}},void 0);let o=[];try{for(const s of r){console.log(`🔍 Searching primary content type: ${s}`);const{data:l,error:c}=await a.rpc("search_productivity_chunks",{query_text:e,user_id_param:t,content_type_filter:s,similarity_threshold:.6,max_results:8});if(!c&&l){const u=l.map(d=>({...d,isPrimary:!0,contentTypeRank:"primary"}));o.push(...u)}}if(o.length<6)for(const s of i){console.log(`🔍 Searching secondary content type: ${s}`);const{data:l,error:c}=await a.rpc("search_productivity_chunks",{query_text:e,user_id_param:t,content_type_filter:s,similarity_threshold:.5,max_results:4});if(!c&&l){const u=l.map(d=>({...d,isPrimary:!1,contentTypeRank:"secondary"}));o.push(...u)}}return o.sort((s,l)=>s.isPrimary&&!l.isPrimary?-1:!s.isPrimary&&l.isPrimary?1:(l.similarity||0)-(s.similarity||0)),console.log(`✅ Found ${o.length} results using AI content type selection`),o.slice(0,12)}catch(s){return console.error("❌ Intelligent search failed:",s),[]}}}class qke{static async queryWithHierarchicalPriority(e,t,r){const i=Date.now();try{console.log(`🔍 Starting hierarchical priority search for query: "${e}"`);const a=qu.classifyQuery(e);console.log(`🎯 Query classification: ${a.primaryIntent} (confidence: ${a.confidence})`);const o=await this.executeHierarchicalSearch(e,t,a);return o.docs.length===0?(console.log("🔄 No docs found in hierarchical search, using simple fallback response"),this.generateFallbackResponse(e,i)):await this.generatePriorityAwareResponse(e,o,a,r,i)}catch(a){return console.error("❌ Hierarchical priority search error:",a),this.generateFallbackResponse(e,i)}}static async executeHierarchicalSearch(e,t,r){const i=Date.now(),a=[];let o=[],s;console.log("📊 Starting priority cascade search...");for(const c of this.PRIORITY_LEVELS){console.log(`🔍 Searching ${c.name} (priority ${c.priority})...`),a.push(c.name);let u=[];if(c.name==="relevant_sources"){console.log("🤖 Using AI-powered content type selection for relevant sources...");try{s=await qu.selectBestContentTypesWithAI(e,t),console.log("✅ AI Content Type Selection:",s),u=await this.searchRelevantSourcesWithAI(e,t,s)}catch(d){console.warn("⚠️ AI content type selection failed, using fallback:",d),u=await this.searchPriorityLevel(e,t,c,r)}}else u=await this.searchPriorityLevel(e,t,c,r);if(u.length>0){if(console.log(`✅ Found ${u.length} docs at ${c.name} level`),o.push(...u),this.shouldStopSearch(c,u,o,e)){console.log(`🛑 Stopping search at ${c.name} level - sufficient context found`);break}}else console.log(`⚠️ No docs found at ${c.name} level, continuing to next priority`)}const l=Date.now()-i;return{foundAt:a[a.findIndex((c,u)=>this.PRIORITY_LEVELS[u]&&o.some(d=>this.PRIORITY_LEVELS[u].contentTypes.includes(d.content_type)))]||"relevant_sources",docs:this.optimizePriorityResults(o),searchMetadata:{levelsSearched:a,totalDocs:o.length,processingTime:l,aiContentTypeSelection:s}}}static async searchPriorityLevel(e,t,r,i){try{let a=await this.performSemanticSearchByPriority(e,t,r);return a.length===0&&(a=await this.performKeywordSearchByPriority(e,t,r)),this.rankByPriorityAndRelevance(a,r,e)}catch(a){return console.error(`❌ Error searching ${r.name}:`,a),[]}}static async searchRelevantSourcesWithAI(e,t,r){try{let i=[];for(const a of r.primaryTypes){console.log(`🔍 Searching AI-selected primary content type: ${a}`);const o=await this.searchSpecificContentType(e,t,a,"primary");i.push(...o)}if(i.length<6)for(const a of r.secondaryTypes){console.log(`🔍 Searching AI-selected secondary content type: ${a}`);const o=await this.searchSpecificContentType(e,t,a,"secondary");i.push(...o)}return i.sort((a,o)=>a.contentTypeRank==="primary"&&o.contentTypeRank!=="primary"?-1:a.contentTypeRank!=="primary"&&o.contentTypeRank==="primary"?1:(o.similarity||o.similarity_score||0)-(a.similarity||a.similarity_score||0)),console.log(`✅ AI-powered search found ${i.length} relevant sources`),i.slice(0,12)}catch(i){return console.error("❌ AI-powered relevant sources search failed:",i),[]}}static async searchSpecificContentType(e,t,r,i){try{console.log(`🔍 Searching content type: ${r} for query: "${e}"`);const{data:a,error:o}=await Dt.from("user_productivity_documents").select("*").eq("user_id",t).eq("content_type",r).not("embedding","is",null).limit(20);if(o)return console.warn(`⚠️ Error fetching ${r} docs:`,o.message),[];if(!a||a.length===0){console.log(`⚠️ No ${r} docs found for user ${t}`);const{data:s,error:l}=await Dt.from("user_productivity_documents").select("*").eq("user_id",t).eq("content_type",r).limit(i==="primary"?8:4);if(!l&&s&&s.length>0){console.log(`📝 Found ${s.length} ${r} docs via basic query`);const c=e.toLowerCase().split(" ").filter(d=>d.length>2);return s.map(d=>{let h=0;const f=(d.content||"").toLowerCase();return c.forEach(m=>{const v=(f.match(new RegExp(m,"g"))||[]).length;h+=v}),{...d,keywordScore:h,contentTypeRank:i,aiSelected:!0,similarity:Math.min(.8,h*.1+.3)}}).filter(d=>d.keywordScore>0||r==="monthly_summary").sort((d,h)=>h.keywordScore-d.keywordScore).slice(0,i==="primary"?8:4)}return[]}console.log(`📊 Found ${a.length} ${r} docs with embeddings`);try{const s=await $r.generateEmbedding({content:e,contentType:"query"}),l=a.filter(c=>c.embedding&&Array.isArray(c.embedding)).map(c=>({...c,similarity:this.calculateCosineSimilarity(s,c.embedding),contentTypeRank:i,aiSelected:!0})).filter(c=>c.similarity>(i==="primary"?.3:.2)).sort((c,u)=>u.similarity-c.similarity);return console.log(`✅ Found ${l.length} relevant ${r} docs with similarity > threshold`),l.slice(0,i==="primary"?8:4)}catch(s){console.warn(`⚠️ Embedding generation failed for ${r}:`,s);const l=e.toLowerCase().split(" ").filter(u=>u.length>2),c=a.map(u=>{let d=0;const h=(u.content||"").toLowerCase();return l.forEach(f=>{const m=(h.match(new RegExp(f,"g"))||[]).length;d+=m}),{...u,keywordScore:d,contentTypeRank:i,aiSelected:!0,similarity:Math.min(.8,d*.1+.3)}}).filter(u=>u.keywordScore>0||r==="monthly_summary").sort((u,d)=>d.keywordScore-u.keywordScore);return console.log(`🔍 Keyword search fallback found ${c.length} ${r} docs`),c.slice(0,i==="primary"?8:4)}}catch(a){return console.error(`❌ Error searching content type ${r}:`,a),[]}}static async performSemanticSearchByPriority(e,t,r){try{const{data:i,error:a}=await Dt.from("user_productivity_documents").select("*").eq("user_id",t).in("content_type",r.contentTypes).not("embedding","is",null).limit(20);if(a)return console.warn(`⚠️ Semantic search error for ${r.name}:`,a.message),a.code==="42P01"?(console.log(`📝 Table user_productivity_documents doesn't exist yet. Skipping ${r.name} search.`),[]):[];if(!i||i.length===0)return console.log(`⚠️ No docs with embeddings found for ${r.name}`),[];try{const o=await $r.generateEmbedding({content:e,contentType:"query"}),s=i.filter(l=>l.embedding&&Array.isArray(l.embedding)).map(l=>({...l,similarity:this.calculateCosineSimilarity(o,l.embedding)})).filter(l=>l.similarity>.1).sort((l,c)=>c.similarity-l.similarity);return console.log(`🔍 Semantic search for ${r.name}: ${s.length} relevant docs`),s.slice(0,10)}catch(o){return console.warn(`⚠️ Embedding generation failed for ${r.name}:`,o),[]}}catch(i){return console.error(`❌ Semantic search failed for ${r.name}:`,i),[]}}static async performKeywordSearchByPriority(e,t,r){try{const i=e.toLowerCase().split(" ").filter(l=>l.length>2);if(i.length===0)return[];const{data:a,error:o}=await Dt.from("user_productivity_documents").select("*").eq("user_id",t).in("content_type",r.contentTypes).limit(15);if(o)return console.warn(`⚠️ Keyword search error for ${r.name}:`,o.message),o.code==="42P01"?(console.log(`📝 Table user_productivity_documents doesn't exist yet. Skipping ${r.name} search.`),[]):[];if(!a||a.length===0)return console.log(`⚠️ No docs found for keyword search on ${r.name}`),[];const s=a.map(l=>{let c=0;const u=(l.content||"").toLowerCase();return i.forEach(d=>{const h=(u.match(new RegExp(d,"g"))||[]).length;c+=h}),{...l,keywordScore:c}}).filter(l=>l.keywordScore>0).sort((l,c)=>c.keywordScore-l.keywordScore);return console.log(`🔍 Keyword search for ${r.name}: ${s.length} relevant docs`),s.slice(0,8)}catch(i){return console.error(`❌ Keyword search failed for ${r.name}:`,i),[]}}static shouldStopSearch(e,t,r,i){if(e.name==="monthly_summary"||e.name==="weekly_summary")return!1;const a=this.analyzeQueryContext(i);if(e.name==="relevant_sources"){const o=r.filter(c=>c.content_type==="monthly_summary"||c.content_type==="weekly_summary").length>=2,s=t.length>=4,l=r.length>=8;return a.needsRecent||a.needsSpecific||a.complexityLevel==="complex"?(console.log(`🔄 Query needs ${a.needsRecent?"recent":""} ${a.needsSpecific?"specific":""} ${a.complexityLevel==="complex"?"complex":""} context - continuing to daily summaries`),!1):a.complexityLevel==="simple"&&o&&s?(console.log(`✅ Simple query with good context (${r.length} docs), sufficient for response`),!0):a.complexityLevel==="moderate"&&o&&t.length>=6&&l?(console.log(`✅ Moderate query with comprehensive context (${r.length} docs), sufficient for response`),!0):(console.log(`🔄 Continuing to daily summaries for more comprehensive context (current: ${r.length} docs)`),!1)}if(e.name==="daily_summary"){const o=t.length>=2||r.length>=12;return o&&console.log(`✅ Daily summaries complete - total context: ${r.length} docs`),o}return!1}static analyzeQueryContext(e){const t=e.toLowerCase(),r=t.includes("today")||t.includes("yesterday")||t.includes("recent")||t.includes("latest")||t.includes("current")||t.includes("now"),i=t.includes("specific")||t.includes("detailed")||t.includes("exact")||t.includes("particular"),a=e.includes("?")||t.startsWith("what")||t.startsWith("how")||t.startsWith("when")||t.startsWith("where")||t.startsWith("why"),o=e.split(" ").length,s=t.includes("analysis")||t.includes("comprehensive")||t.includes("breakdown")||t.includes("compare")||t.includes("trend")||t.includes("pattern");let l="simple";return o>10||s?l="complex":(o>5||a)&&(l="moderate"),{needsRecent:r,needsSpecific:i,isQuestionBased:a,complexityLevel:l}}static rankByPriorityAndRelevance(e,t,r){return e.map(i=>({...i,priorityScore:(5-t.priority)*10,totalScore:(i.similarity||i.keywordScore||0)+(5-t.priority)*10})).sort((i,a)=>a.totalScore-i.totalScore)}static optimizePriorityResults(e){var i,a,o,s,l,c,u,d;const t=this.PRIORITY_LEVELS.reduce((h,f)=>(h[f.name]=e.filter(m=>f.contentTypes.includes(m.content_type)),h),{}),r=[];if(((i=t.monthly_summary)==null?void 0:i.length)>0&&r.push(...t.monthly_summary.slice(0,3)),((a=t.weekly_summary)==null?void 0:a.length)>0&&r.length<18&&r.push(...t.weekly_summary.slice(0,4)),((o=t.relevant_sources)==null?void 0:o.length)>0&&r.length<15){const h=Math.min(8,15-r.length);r.push(...t.relevant_sources.slice(0,h))}if(((s=t.daily_summary)==null?void 0:s.length)>0&&r.length<20){const h=20-r.length;r.push(...t.daily_summary.slice(0,Math.min(5,h)))}return console.log(`📊 Optimized results: ${r.length} total docs prioritized by hierarchy (Monthly→Weekly→Relevant→Daily)`),console.log(`📊 Breakdown: Monthly(${((l=t.monthly_summary)==null?void 0:l.length)||0}), Weekly(${((c=t.weekly_summary)==null?void 0:c.length)||0}), Relevant(${((u=t.relevant_sources)==null?void 0:u.length)||0}), Daily(${((d=t.daily_summary)==null?void 0:d.length)||0})`),r}static async generatePriorityAwareResponse(e,t,r,i=[],a){const o=t.docs.map(l=>`[${l.content_type.toUpperCase()}] ${l.content}`).join(`

`),s=this.buildPriorityAwarePrompt(e,o,t.foundAt,t.searchMetadata);try{const l=await $r.generateChatResponse({query:s,context:o,conversationHistory:i}),c=t.docs.map((d,h)=>{var f,m;return{id:d.id||`doc_${h}`,type:d.content_type||"unknown",contentId:((m=(f=d.metadata)==null?void 0:f.entities)==null?void 0:m.taskId)||d.id,title:this.generateSourceTitle(d),snippet:d.content.substring(0,150)+"...",relevanceScore:d.similarity||d.totalScore||1-h*.1}}),u={responseTime:Date.now()-a,relevanceScore:Math.min(.95,.6+t.docs.length*.05),tokens:$r.estimateTokens(l),model:"gpt-4o-mini",retrievedDocuments:t.docs.length,totalSources:t.searchMetadata.totalDocs,confidence:Math.min(.95,.6+t.docs.length*.05),searchStrategy:`hierarchical_priority_${t.foundAt}${t.searchMetadata.aiContentTypeSelection?"_ai_enhanced":""}`,aiContentTypeSelection:t.searchMetadata.aiContentTypeSelection,priorityLevels:t.searchMetadata.levelsSearched};return{response:l.trim(),sources:c,metadata:u}}catch(l){return console.error("❌ Error generating priority-aware response:",l),this.generateFallbackResponse(e,a)}}static buildPriorityAwarePrompt(e,t,r,i){const a=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`You are an AI assistant that analyzes productivity data using a hierarchical approach.

CURRENT DATE & TIME: ${a} at ${o}

SEARCH HIERARCHY USED:
- Data was found at: ${r} level
- Levels searched: ${i.levelsSearched.join(" → ")}
- This follows the priority: Monthly Summary → Weekly Summary → Relevant Sources → Daily Summary (if needed)

CONTEXT PRIORITY EXPLANATION:
The context below has been prioritized to give you high-level insights first, then drill down to specifics as needed. Higher-level summaries provide better strategic context.

CONTEXT:
${t}

INSTRUCTIONS:
1. Answer based on the hierarchical context provided
2. Start with high-level insights when available
3. Mention the level of data you're drawing from (monthly/weekly/daily/detailed)
4. Provide specific examples when helpful
5. If using lower-level data, frame it within the broader context

USER QUESTION: ${e}`}static generateSourceTitle(e){var t,r,i,a,o,s;return e.content_type==="monthly_summary"?`Monthly Summary - ${((t=e.metadata)==null?void 0:t.timeframe)||"Recent Month"}`:e.content_type==="weekly_summary"?`Weekly Summary - ${((r=e.metadata)==null?void 0:r.timeframe)||"Recent Week"}`:e.content_type==="daily_summary"?`Daily Summary - ${((i=e.metadata)==null?void 0:i.timeframe)||"Recent Day"}`:e.content_type==="project_summary"?`Project: ${((a=e.metadata)==null?void 0:a.projectName)||"Unknown Project"}`:e.content_type==="task_aggregate"?`Task: ${((o=e.metadata)==null?void 0:o.taskTitle)||"Unknown Task"}`:`${e.content_type} - ${((s=e.id)==null?void 0:s.substring(0,8))||"Unknown"}`}static calculateCosineSimilarity(e,t){if(!e||!t||e.length!==t.length)return 0;let r=0,i=0,a=0;for(let s=0;s<e.length;s++)r+=e[s]*t[s],i+=e[s]*e[s],a+=t[s]*t[s];const o=Math.sqrt(i)*Math.sqrt(a);return o===0?0:r/o}static generateFallbackResponse(e,t){return{response:`I don't have enough context in your productivity data to answer "${e}". This could mean you haven't used the app long enough to generate summaries, or the data hasn't been synced yet. Try asking about more recent activities or check if your data has been properly synced.`,sources:[],metadata:{responseTime:Date.now()-t,relevanceScore:.1,tokens:50,model:"gpt-4o-mini",retrievedDocuments:0,confidence:.1,searchStrategy:"hierarchical_priority_no_data"}}}}hn(qke,"PRIORITY_LEVELS",[{name:"monthly_summary",contentTypes:["monthly_summary"],chunkLevels:[1],priority:1},{name:"weekly_summary",contentTypes:["weekly_summary"],chunkLevels:[2],priority:2},{name:"relevant_sources",contentTypes:["task_aggregate","project_summary","task_sessions"],chunkLevels:[4,5,6],priority:3},{name:"daily_summary",contentTypes:["daily_summary"],chunkLevels:[3],priority:4}]);const Gke=yy()(YQe((n,e)=>({conversations:[],currentConversationId:null,isLoading:!1,error:null,suggestedQueries:["What were my key achievements this month?","How was my productivity this week?","What did I work on today?","Which project needs my attention?","Show me my focus patterns","What should I prioritize next?"],quickActions:[],ragConfig:{prioritizeCost:!1,maxSources:8,responseQuality:"balanced",includeHistoricalData:!0,autoOptimize:!0},_isInitialized:!1,_userId:null,sendMessage:async t=>{var a,o;const{currentConversationId:r,_userId:i}=e();if(console.log("🤖 sendMessage called with:",{content:t,_userId:i,currentConversationId:r}),console.log("🤖 Chat store state:",{isInitialized:e()._isInitialized,userId:i,conversationCount:e().conversations.length}),!i){console.error("Chat store not initialized - no user ID"),n({error:"Please log in to use AI Assistant"});return}r||e().createConversation(),n({isLoading:!0,error:null});try{const s=e().currentConversationId,l={id:`msg_${Date.now()}_user`,conversationId:s,userId:i,role:"user",content:t,timestamp:new Date};n(d=>({conversations:d.conversations.map(h=>h.id===s?{...h,messages:[...h.messages,l]}:h)}));let c;try{console.log("🎯 Attempting Hierarchical Priority search..."),c=await qke.queryWithHierarchicalPriority(t,i,((a=e().conversations.find(d=>d.id===s))==null?void 0:a.messages.slice(-5).map(d=>({role:d.role,content:d.content})))||[]),(o=c.metadata.searchStrategy)!=null&&o.includes("no_data")&&(console.log("🔄 Hierarchical search returned no data, trying Enhanced RAG..."),c=await qS.queryWithRAG(t,i))}catch(d){console.warn("⚠️ Hierarchical Priority service failed, falling back to Enhanced RAG:",d),c=await qS.queryWithRAG(t,i)}const u={id:`msg_${Date.now()}_assistant`,conversationId:s,userId:i,role:"assistant",content:c.response,timestamp:new Date,metadata:{tokens:c.metadata.tokens,responseTime:c.metadata.responseTime,relevanceScore:c.metadata.relevanceScore,model:c.metadata.model,retrievedDocuments:c.metadata.retrievedDocuments},sources:c.sources};n(d=>({conversations:d.conversations.map(h=>h.id===s?{...h,messages:[...h.messages,u]}:h),isLoading:!1}))}catch(s){console.error("Error sending message:",s),n({error:s instanceof Error?s.message:"Failed to send message",isLoading:!1})}},createConversation:()=>{const{_userId:t}=e();if(!t)return n({error:"User not authenticated"}),"";const r={id:`conv_${Date.now()}`,userId:t,title:"New Conversation",messages:[],createdAt:new Date,updatedAt:new Date,isActive:!0};return n(i=>({conversations:[r,...i.conversations],currentConversationId:r.id,error:null})),r.id},setActiveConversation:t=>{const{conversations:r}=e(),i=r.find(a=>a.id===t);n(i?{currentConversationId:t,error:null}:{error:"Conversation not found"})},deleteConversation:t=>{n(r=>({conversations:r.conversations.filter(i=>i.id!==t),currentConversationId:r.currentConversationId===t?null:r.currentConversationId,error:null}))},clearError:()=>{n({error:null})},generateSuggestions:()=>{n({suggestedQueries:["How productive was I this week?","What projects need my attention?","Show me my focus time breakdown","What should I prioritize today?","How am I progressing toward my goals?"]})},executeQuickAction:t=>{console.log("Executing quick action:",t),n(r=>({quickActions:r.quickActions.filter(i=>i.id!==t.id)}))},updateRAGConfig:t=>{n(r=>({ragConfig:{...r.ragConfig,...t}}))},_setUserId:t=>{n({_userId:t}),t&&!e()._isInitialized&&(e().generateSuggestions(),n({_isInitialized:!0}))},_reset:()=>{n({conversations:[],currentConversationId:null,isLoading:!1,error:null,suggestedQueries:[],quickActions:[],_isInitialized:!1,_userId:null})}}))),xMt=({isOpen:n,onClose:e})=>{const[t,r]=K.useState(""),[i,a]=K.useState(!1),o=K.useRef(null),s=K.useRef(null),{user:l}=Rn(),{conversations:c,currentConversationId:u,isLoading:d,error:h,suggestedQueries:f,sendMessage:m,createConversation:v,setActiveConversation:y,clearError:w}=Gke(),_=c.find(M=>M.id===u),S=(_==null?void 0:_.messages)||[];K.useEffect(()=>{var M;(M=o.current)==null||M.scrollIntoView({behavior:"smooth"})},[S]),K.useEffect(()=>{n&&setTimeout(()=>{var M;return(M=s.current)==null?void 0:M.focus()},100)},[n]);const A=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),C())},C=async()=>{if(!t.trim()||d)return;if(!l){alert("Please log in to use the AI Assistant");return}const M=t.trim();r(""),u||v(),await m(M)},D=M=>{var P;r(M),(P=s.current)==null||P.focus()};return n?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:E.jsxs("div",{className:`bg-white rounded-lg shadow-xl transition-all duration-300 ${i?"w-full h-full max-w-6xl max-h-full":"w-full max-w-2xl h-[80vh]"}`,children:[E.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:E.jsx(IO,{className:"w-5 h-5 text-blue-600"})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Work Assistant"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Direct, focused answers about your productivity data"})]})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("button",{onClick:()=>a(!i),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",title:i?"Minimize":"Expand",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),E.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:E.jsx(jz,{className:"w-4 h-4"})})]})]}),h&&E.jsxs("div",{className:"flex items-center space-x-2 bg-red-50 border-l-4 border-red-400 p-4 mx-4 mt-4",children:[E.jsx(r4e,{className:"w-5 h-5 text-red-400"}),E.jsx("div",{className:"flex-1",children:E.jsx("p",{className:"text-sm text-red-700",children:h})}),E.jsx("button",{onClick:w,className:"text-red-400 hover:text-red-600",children:E.jsx(jz,{className:"w-4 h-4"})})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{height:"calc(100% - 200px)"},children:[S.length===0?E.jsxs("div",{className:"text-center py-8",children:[E.jsx(IO,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Welcome to your AI Assistant!"}),E.jsx("p",{className:"text-gray-500 mb-6",children:"Ask me anything about your productivity data, work patterns, or get insights about your progress."}),E.jsxs("div",{className:"max-w-md mx-auto",children:[E.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Try asking:"}),E.jsx("div",{className:"space-y-2",children:f.map((M,P)=>E.jsxs("button",{onClick:()=>D(M),className:"w-full text-left p-3 text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:['"',M,'"']},P))})]})]}):E.jsxs(E.Fragment,{children:[S.map(M=>E.jsx(SMt,{message:M},M.id)),d&&E.jsxs("div",{className:"flex items-start space-x-3",children:[E.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:E.jsx(IO,{className:"w-4 h-4 text-blue-600"})}),E.jsx("div",{className:"flex-1",children:E.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("div",{className:"animate-bounce w-2 h-2 bg-gray-400 rounded-full"}),E.jsx("div",{className:"animate-bounce w-2 h-2 bg-gray-400 rounded-full",style:{animationDelay:"0.1s"}}),E.jsx("div",{className:"animate-bounce w-2 h-2 bg-gray-400 rounded-full",style:{animationDelay:"0.2s"}})]})})})]})]}),E.jsx("div",{ref:o})]}),E.jsx("div",{className:"border-t border-gray-200 p-4",children:E.jsxs("div",{className:"flex items-end space-x-3",children:[E.jsx("div",{className:"flex-1",children:E.jsx("textarea",{ref:s,value:t,onChange:M=>r(M.target.value),onKeyDown:A,placeholder:"Ask about your productivity data...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-gray-900 placeholder-gray-500",rows:1,style:{maxHeight:"120px"}})}),E.jsx("button",{onClick:C,disabled:!t.trim()||d,className:"p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E.jsx(_$e,{className:"w-4 h-4"})})]})})]})}):null},SMt=({message:n})=>{const e=n.role==="user";return E.jsxs("div",{className:`flex items-start space-x-3 ${e?"flex-row-reverse space-x-reverse":""}`,children:[E.jsx("div",{className:`p-2 rounded-lg ${e?"bg-blue-100":"bg-gray-100"}`,children:e?E.jsx(q$e,{className:"w-4 h-4 text-blue-600"}):E.jsx(IO,{className:"w-4 h-4 text-gray-600"})}),E.jsxs("div",{className:`flex-1 max-w-xs sm:max-w-md md:max-w-lg lg:max-w-xl ${e?"text-right":""}`,children:[E.jsxs("div",{className:`rounded-lg ${e?"bg-blue-600 text-white ml-auto p-3":"bg-white border border-gray-200 text-gray-900 p-5 shadow-sm"}`,children:[e?E.jsx("p",{className:"text-sm whitespace-pre-wrap text-white",children:n.content}):E.jsx(pIt,{className:"text-sm text-gray-900 leading-normal break-words whitespace-pre-wrap",components:{strong:({node:t,...r})=>E.jsx("strong",{className:"font-bold text-gray-900",...r}),em:({node:t,...r})=>E.jsx("em",{className:"italic text-gray-900",...r}),ul:({node:t,...r})=>E.jsx("ul",{className:"space-y-2 my-3",...r}),li:({node:t,...r})=>E.jsxs("li",{className:"flex items-start pl-0 mb-2",...r,children:[E.jsx("span",{className:"text-gray-900 font-bold mr-2 mt-0.5 flex-shrink-0",children:"•"}),E.jsx("div",{className:"text-sm leading-normal flex-1 break-words",children:r.children})]}),p:({node:t,...r})=>E.jsx("div",{className:"text-sm mb-3 last:mb-0 leading-normal break-words",...r}),h1:({node:t,...r})=>E.jsx("h1",{className:"text-lg font-bold mb-3 text-gray-900 border-b border-gray-200 pb-2 mt-4 first:mt-0",...r}),h2:({node:t,...r})=>E.jsx("h2",{className:"text-base font-bold mb-2 text-gray-900 mt-4 first:mt-0",...r}),h3:({node:t,...r})=>E.jsx("h3",{className:"text-sm font-bold mb-2 text-gray-900 mt-3 first:mt-0",...r}),code:({node:t,...r})=>E.jsx("code",{className:"bg-blue-50 text-blue-800 px-1.5 py-0.5 rounded text-xs font-mono font-semibold",...r})},children:n.content}),!e&&n.metadata&&E.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100 text-xs text-gray-500",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("span",{children:["Response time: ",n.metadata.responseTime,"ms"]}),n.metadata.retrievedDocuments&&E.jsxs("span",{children:[n.metadata.retrievedDocuments," sources"]})]})})]}),n.sources&&n.sources.length>0&&E.jsx(TMt,{sources:n.sources}),E.jsx("div",{className:`text-xs text-gray-500 mt-1 ${e?"text-right":""}`,children:new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date(n.timestamp))})]})]})},TMt=({sources:n})=>{const[e,t]=K.useState(!1),r=n.reduce((a,o)=>a+(o.relevanceScore||0),0)/n.length,i=n.reduce((a,o)=>(o.relevanceScore||0)>(a.relevanceScore||0)?o:a);return E.jsxs("div",{className:"mt-2 bg-gray-50 border border-gray-200 rounded-lg overflow-hidden",children:[E.jsxs("button",{onClick:()=>t(!e),className:"w-full px-3 py-2 flex items-center justify-between hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset","aria-expanded":e,"aria-label":`${e?"Hide":"Show"} source references`,children:[E.jsxs("div",{className:"flex items-center space-x-2 text-left",children:[E.jsx(mG,{className:"w-4 h-4 text-gray-500"}),E.jsxs("div",{children:[E.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[n.length," source",n.length!==1?"s":""," referenced"]}),!e&&E.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(r*100),'% avg relevance • "',i.title,'"']})]})]}),E.jsxs("div",{className:"flex items-center space-x-1",children:[E.jsx("span",{className:"text-xs text-gray-500 mr-1",children:e?"Hide":"Show"}),e?E.jsx(Vye,{className:"w-4 h-4 text-gray-500 transition-transform duration-200"}):E.jsx(zye,{className:"w-4 h-4 text-gray-500 transition-transform duration-200"})]})]}),E.jsx("div",{className:`transition-all duration-300 ease-in-out ${e?"max-h-80 opacity-100":"max-h-0 opacity-0"} overflow-hidden`,children:E.jsx("div",{className:"px-3 pb-3 space-y-2 border-t border-gray-200 max-h-80 overflow-y-auto",children:n.map((a,o)=>E.jsx(EMt,{source:a,isExpanded:!0},a.id||o))})})]})},EMt=({source:n,isExpanded:e=!1})=>E.jsxs("div",{className:"bg-white border border-gray-200 rounded p-3 text-xs shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx(mG,{className:"w-3 h-3 text-gray-400"}),E.jsx("span",{className:"font-medium text-gray-700 truncate",children:n.title})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsxs("span",{className:"text-gray-500 font-mono",children:[Math.round((n.relevanceScore||0)*100),"%"]}),E.jsx("span",{className:"bg-gray-200 px-2 py-0.5 rounded text-gray-600 text-xs",children:n.type})]})]}),e&&E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"text-gray-600 mb-2 line-clamp-3",children:n.snippet}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("div",{className:"text-gray-500 text-xs",children:n.contentId&&E.jsxs("span",{className:"font-mono bg-gray-100 px-1 py-0.5 rounded",children:["ID: ",n.contentId.slice(0,8),"..."]})}),n.contentId&&E.jsxs("button",{className:"text-blue-600 hover:text-blue-800 flex items-center space-x-1 transition-colors",children:[E.jsx("span",{children:"View details"}),E.jsx(p4e,{className:"w-3 h-3"})]})]})]})]}),AMt=()=>{const[n,e]=K.useState(!1),{user:t}=Rn();return t?E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-300","aria-label":"Open AI Assistant",children:E.jsx(CS,{className:"w-6 h-6"})}),E.jsx(xMt,{isOpen:n,onClose:()=>e(!1)})]}):null};class CMt{static async testUserSync(e){try{console.log(`🔍 Testing sync for user: ${e}`);const t=await this.countFirebaseData(e),r=await this.countSupabaseData(e),i=Object.values(t).reduce((s,l)=>s+l,0),a=this.determineSyncStatus(i,r.documents),o=this.generateRecommendations(t,r,a);return{firebaseData:t,supabaseData:r,syncStatus:a,recommendations:o}}catch(t){throw console.error("Error testing user sync:",t),new Error(`Failed to test user sync: ${t instanceof Error?t.message:"Unknown error"}`)}}static async countFirebaseData(e){const t=["tasks","projects","workSessions","dailySiteUsage","deepFocusSessions"],r={};for(const i of t)try{const a=fn(wn(yt,i),Ot("userId","==",e)),o=await or(a);r[i]=o.size}catch(a){console.warn(`Error counting ${i}:`,a),r[i]=0}return r}static async countSupabaseData(e){try{const{count:t,error:r}=await Dt.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e);if(r)throw r;const{count:i,error:a}=await Dt.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e).not("embedding","is",null);if(a)throw a;return{documents:t||0,withEmbeddings:i||0,withoutEmbeddings:(t||0)-(i||0)}}catch(t){return console.error("Error counting Supabase data:",t),{documents:0,withEmbeddings:0,withoutEmbeddings:0}}}static determineSyncStatus(e,t){return t===0?"missing":t>=e*.8?"complete":"partial"}static generateRecommendations(e,t,r){const i=[];return r==="missing"&&(i.push("Run comprehensive Firebase sync to migrate all data"),i.push("Use DataSyncDashboard to initiate full sync")),r==="partial"&&(i.push("Some data may be missing - run comprehensive sync"),i.push("Check for sync errors in console logs")),t.withoutEmbeddings>0&&(i.push(`${t.withoutEmbeddings} documents need embeddings`),i.push('Use "Fix Embeddings" button in DataSyncDashboard')),t.withEmbeddings===0&&t.documents>0&&(i.push("Critical: All documents missing embeddings - RAG system non-functional"),i.push("Immediately run embedding generation")),i.length===0&&(i.push("✅ Sync appears complete and healthy"),i.push("Test chat interface to verify RAG functionality")),i}static async quickValidation(e){try{const t=await this.testUserSync(e);return t.syncStatus==="complete"&&t.supabaseData.withEmbeddings>0}catch(t){return console.error("Quick validation failed:",t),!1}}}class OL{static async syncAllUserData(e,t){try{console.log(`🔄 Starting comprehensive Firebase to Supabase sync for user: ${e}`);const r=[{name:"tasks",contentType:"task_aggregate"},{name:"projects",contentType:"project_summary"},{name:"workSessions",contentType:"session"},{name:"dailySiteUsage",contentType:"site_usage"},{name:"deepFocusSessions",contentType:"deep_focus"}];let i=0;const a=[],o={};let s=0;for(const{name:c}of r){const u=await this.countFirebaseCollection(e,c);o[c]=u,s+=u}let l=0;for(const{name:c,contentType:u}of r)try{t==null||t({current:l,total:s,status:`Syncing ${c}...`});const d=await this.syncCollection(e,c,u,h=>{t==null||t({current:l+h,total:s,status:`Syncing ${c}: ${h}/${o[c]}`})});i+=d,l+=o[c],console.log(`✅ Synced ${d} documents from ${c}`)}catch(d){const h=`Failed to sync ${c}: ${d instanceof Error?d.message:"Unknown error"}`;console.error(h),a.push(h)}return t==null||t({current:s,total:s,status:"Sync complete!"}),{synced:i,errors:a,details:o}}catch(r){throw console.error("Error in comprehensive sync:",r),new Error(`Comprehensive sync failed: ${r instanceof Error?r.message:"Unknown error"}`)}}static async syncCollection(e,t,r,i){try{const a=fn(wn(yt,t),Ot("userId","==",e)),s=(await or(a)).docs.map(c=>({id:c.id,...c.data()}));let l=0;for(let c=0;c<s.length;c+=this.BATCH_SIZE){const u=s.slice(c,c+this.BATCH_SIZE);await Promise.all(u.map(async d=>{try{await this.syncSingleDocument(d,r,e),l++,i==null||i(l)}catch(h){console.error(`Error syncing document ${d.id}:`,h)}})),c+this.BATCH_SIZE<s.length&&await new Promise(d=>setTimeout(d,this.DELAY_BETWEEN_BATCHES))}return l}catch(a){throw console.error(`Error syncing collection ${t}:`,a),a}}static async syncSingleDocument(e,t,r){try{const i=this.formatDocumentContent(e,t),{data:a}=await Dt.from("user_productivity_documents").select("id").eq("user_id",r).eq("metadata->>documentId",e.id).single();if(a){console.log(`Document ${e.id} already exists, skipping`);return}const o=await $r.generateEmbedding({content:i,contentType:t}),{error:s}=await Dt.from("user_productivity_documents").insert({user_id:r,content_type:t,content:i,embedding:o,metadata:{documentId:e.id,sourceCollection:t,originalData:e,syncedAt:new Date().toISOString()}});if(s)throw s}catch(i){throw console.error(`Error syncing document ${e.id}:`,i),i}}static formatDocumentContent(e,t){switch(t){case"task_aggregate":return[`Task: ${e.text||e.title||"Untitled"}`,e.notes?`Notes: ${e.notes}`:"",e.project?`Project: ${e.project}`:"",e.completed?"Status: Completed":"Status: Incomplete",e.pomodoroCount?`Pomodoros: ${e.pomodoroCount}`:""].filter(Boolean).join(`
`);case"project_summary":return`Project: ${e.name||"Untitled Project"}
${e.description?`Description: ${e.description}`:""}
${e.category?`Category: ${e.category}`:""}
Goal Hours: ${e.goalHours||"Not set"}
Progress: ${e.totalHours||0} hours logged`.trim();case"session":return`Work Session: ${e.duration||0} minutes
${e.taskTitle?`Task: ${e.taskTitle}`:""}
${e.projectName?`Project: ${e.projectName}`:""}
Type: ${e.sessionType||"Work Session"}
${e.notes?`Notes: ${e.notes}`:""}`.trim();case"site_usage":return`Website Usage: ${e.domain||"Unknown site"}
Time Spent: ${e.timeSpent||0} seconds
Category: ${e.category||"Uncategorized"}
Date: ${e.date||"Unknown date"}`.trim();case"deep_focus":return`Deep Focus Session: ${e.duration||0} minutes
${e.taskTitle?`Task: ${e.taskTitle}`:""}
${e.projectName?`Project: ${e.projectName}`:""}
Break Type: ${e.breakType||"Standard"}
${e.notes?`Notes: ${e.notes}`:""}`.trim();default:return JSON.stringify(e,null,2)}}static async countFirebaseCollection(e,t){try{const r=fn(wn(yt,t),Ot("userId","==",e));return(await or(r)).size}catch(r){return console.error(`Error counting ${t}:`,r),0}}static async generateMissingEmbeddings(e,t){try{console.log(`🔍 Checking for documents without embeddings for user: ${e}`);const{data:r,error:i}=await Dt.from("user_productivity_documents").select("id, content, content_type").eq("user_id",e).is("embedding",null);if(i)throw i;if(!r||r.length===0)return console.log("✅ All documents already have embeddings"),0;console.log(`📋 Found ${r.length} documents without embeddings`);let a=0;for(const o of r)try{t==null||t({current:a,total:r.length,status:`Generating embedding ${a+1}/${r.length}`});const s=await $r.generateEmbedding({content:o.content,contentType:o.content_type}),{error:l}=await Dt.from("user_productivity_documents").update({embedding:s}).eq("id",o.id);if(l)throw l;a++,await new Promise(c=>setTimeout(c,this.DELAY_BETWEEN_BATCHES))}catch(s){console.error(`Error generating embedding for document ${o.id}:`,s)}return t==null||t({current:r.length,total:r.length,status:"Embedding generation complete!"}),console.log(`✅ Generated embeddings for ${a} documents`),a}catch(r){throw console.error("Error generating missing embeddings:",r),new Error(`Failed to generate missing embeddings: ${r instanceof Error?r.message:"Unknown error"}`)}}}hn(OL,"BATCH_SIZE",10),hn(OL,"DELAY_BETWEEN_BATCHES",100);class fge{static async generateComprehensiveReport(e){try{console.log(`📊 Generating comprehensive data report for user: ${e}`);const t=await this.collectFirebaseData(e),r=await this.collectSupabaseData(e),i=this.calculateSummaryMetrics(t,r),a=this.performDataAnalysis(t,r),o=await this.generateTechnicalDetails(e);return{summary:i,firebase:t,supabase:r,analysis:a,technicalDetails:o}}catch(t){throw console.error("Error generating comprehensive report:",t),new Error(`Failed to generate report: ${t instanceof Error?t.message:"Unknown error"}`)}}static async collectFirebaseData(e){const t=["tasks","projects","workSessions","dailySiteUsage","deepFocusSessions","users"],r={};for(const i of t)try{if(i==="users"){const a=fn(wn(yt,i)),o=await or(a);r[i]=o.docs.filter(s=>s.id===e).length}else{const a=fn(wn(yt,i),Ot("userId","==",e)),o=await or(a);r[i]=o.size}}catch(a){console.warn(`Error collecting ${i}:`,a),r[i]=0}return r}static async collectSupabaseData(e){try{const{data:t,error:r}=await Dt.from("user_productivity_documents").select("*").eq("user_id",e);if(r)throw r;const i=(t==null?void 0:t.length)||0,a=(t==null?void 0:t.filter(l=>l.embedding!==null).length)||0,o=i-a,s={};return t==null||t.forEach(l=>{const c=l.content_type||"unknown";s[c]=(s[c]||0)+1}),{totalDocuments:i,withEmbeddings:a,withoutEmbeddings:o,contentTypes:s}}catch(t){return console.error("Error collecting Supabase data:",t),{totalDocuments:0,withEmbeddings:0,withoutEmbeddings:0,contentTypes:{}}}}static calculateSummaryMetrics(e,t){const r=Object.values(e).reduce((o,s)=>o+s,0),i=t.totalDocuments>0?t.withEmbeddings/t.totalDocuments:0;let a;return i>=.95&&t.totalDocuments>=r*.8?a="excellent":i>=.8&&t.totalDocuments>=r*.6?a="good":i>=.3&&t.totalDocuments>0?a="poor":a="critical",{totalFirebaseItems:r,totalSupabaseDocuments:t.totalDocuments,embeddingCoverage:Math.round(i*100),syncHealth:a}}static performDataAnalysis(e,t){const r=[],i=[],a=[];return Object.entries(e).forEach(([o,s])=>{s===0?r.push(o):s<5&&i.push(o)}),t.totalDocuments===0?a.push("🚨 Critical: No data in Supabase - run comprehensive sync immediately"):t.withoutEmbeddings>0&&a.push(`⚠️ ${t.withoutEmbeddings} documents missing embeddings - run embedding generation`),r.length>0&&a.push(`📭 Empty collections: ${r.join(", ")}`),i.length>0&&a.push(`📉 Low data collections: ${i.join(", ")}`),t.totalDocuments<Object.values(e).reduce((o,s)=>o+s,0)*.8&&a.push("🔄 Supabase appears incomplete - consider re-running comprehensive sync"),a.length===0&&a.push("✅ Data looks healthy - no immediate action required"),{missingCollections:r,lowDataCollections:i,embeddingGaps:t.withoutEmbeddings,recommendations:a}}static async generateTechnicalDetails(e){try{const{data:t,error:r}=await Dt.from("user_productivity_documents").select("content, created_at").eq("user_id",e).order("created_at",{ascending:!0});if(r||!t)return{avgDocumentSize:0,oldestDocument:null,newestDocument:null,duplicateRisk:"low"};const i=t.length>0?Math.round(t.reduce((l,c)=>l+c.content.length,0)/t.length):0,a=t.length>0?t[0].created_at:null,o=t.length>0?t[t.length-1].created_at:null,s=t.length>100?"high":t.length>50?"medium":"low";return{avgDocumentSize:i,oldestDocument:a,newestDocument:o,duplicateRisk:s}}catch(t){return console.error("Error generating technical details:",t),{avgDocumentSize:0,oldestDocument:null,newestDocument:null,duplicateRisk:"low"}}}static async quickHealthCheck(e){try{const{data:t,error:r}=await Dt.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e),{data:i,error:a}=await Dt.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e).not("embedding","is",null);if(r||a)throw r||a;const o=t||0,s=i||0,l=o>0?s/o*100:0;let c,u;return o===0?(c="critical",u="No data found - run comprehensive sync"):l>=90?(c="healthy",u="Data sync and embeddings are healthy"):l>=50?(c="warning",u="Some embeddings missing - consider running embedding generation"):(c="critical",u="Most embeddings missing - RAG functionality impaired"),{status:c,message:u,embeddingCoverage:Math.round(l)}}catch(t){return console.error("Error in quick health check:",t),{status:"critical",message:"Health check failed - please check system status",embeddingCoverage:0}}}static async getQuickSyncStatus(e){try{const{data:t,error:r}=await Dt.from("user_productivity_documents").select("id, created_at").eq("user_id",e).not("embedding","is",null);if(r)throw r;const i=(t==null?void 0:t.length)||0,a=t&&t.length>0?new Date(Math.max(...t.map(l=>new Date(l.created_at).getTime()))):null;let o="low",s=!1;return i===0?(o="high",s=!0):a&&Date.now()-a.getTime()>24*60*60*1e3&&(o="medium",s=!0),{priority:o,needsSync:s,embeddingCount:i,lastSync:a}}catch(t){return console.error("Error getting quick sync status:",t),{priority:"high",needsSync:!0,embeddingCount:0,lastSync:null}}}static async generateUserDataReport(e){try{const t=await this.collectFirebaseData(e),r=Object.values(t).reduce((c,u)=>c+u,0),i=await this.collectSupabaseData(e),a=r>0?Math.round(i.totalDocuments/r*100):0,o=a>=95&&i.withoutEmbeddings===0,s=[];i.withoutEmbeddings>0&&s.push(`${i.withoutEmbeddings} documents without embeddings`);const l=[];return o||(i.totalDocuments===0?l.push("Run complete data sync to migrate Firebase data"):i.withoutEmbeddings>0&&l.push("Generate embeddings for remaining documents")),{firebase:{totalDocuments:r,...t},supabase:{totalEmbeddings:i.withEmbeddings,...i},syncStatus:{isComplete:o,syncPercentage:a,missingEmbeddings:s,recommendations:l}}}catch(t){throw console.error("Error generating user data report:",t),t}}static printReport(e){console.log(`
📊 USER DATA REPORT`),console.log("==================="),console.log(`Firebase Documents: ${e.firebase.totalDocuments}`),console.log(`Supabase Documents: ${e.supabase.totalDocuments}`),console.log(`With Embeddings: ${e.supabase.withEmbeddings}`),console.log(`Sync Status: ${e.syncStatus.isComplete?"✅ Complete":"❌ Incomplete"} (${e.syncStatus.syncPercentage}%)`),e.syncStatus.recommendations.length>0&&(console.log(`
Recommendations:`),e.syncStatus.recommendations.forEach(t=>console.log(`  • ${t}`)))}}class Bq{static async executeIncrementalSync(e){const t=Date.now();console.log(`🔄 Starting incremental sync for user: ${e}`);const r={success:!0,processedDocuments:0,skippedDocuments:0,errors:[],executionTime:0,collections:{tasks:0,projects:0,workSessions:0}};try{const i=await this.getLastSyncTimes(e),a=await this.syncTasksIncremental(e,i.tasks),o=await this.syncProjectsIncremental(e,i.projects),s=await this.syncSessionsIncremental(e,i.workSessions);return r.processedDocuments=a.processed+o.processed+s.processed,r.skippedDocuments=a.skipped+o.skipped+s.skipped,r.collections.tasks=a.processed,r.collections.projects=o.processed,r.collections.workSessions=s.processed,r.errors=[...a.errors,...o.errors,...s.errors],await this.updateSyncTrackers(e),r.executionTime=Date.now()-t,r.success=r.errors.length===0,console.log(`✅ Incremental sync complete: ${r.processedDocuments} processed, ${r.skippedDocuments} skipped in ${r.executionTime}ms`),r}catch(i){return r.errors.push(i instanceof Error?i.message:"Unknown error"),r.success=!1,r.executionTime=Date.now()-t,console.error("❌ Incremental sync failed:",i),r}}static async getLastSyncTimes(e){try{const{data:t}=await Dt.from("sync_trackers").select("collection, last_sync_time").eq("user_id",e),r={tasks:null,projects:null,workSessions:null};return t&&t.forEach(i=>{r[i.collection]=i.last_sync_time?new Date(i.last_sync_time):null}),r}catch(t){return console.error("Failed to get sync times:",t),{tasks:null,projects:null,workSessions:null}}}static async syncTasksIncremental(e,t){var i,a,o,s;const r={processed:0,skipped:0,errors:[]};try{let l=fn(wn(yt,"tasks"),Ot("userId","==",e));t&&(l=fn(wn(yt,"tasks"),Ot("userId","==",e),Ot("updatedAt",">",ci.fromDate(t)),Ua("updatedAt","desc")));const c=await or(l);if(console.log(`📝 Found ${c.size} tasks to process (last sync: ${(t==null?void 0:t.toISOString())||"never"})`),c.size===0)return console.log("✅ No tasks need syncing"),r;const u=await this.getProjectsMap(e),d=await this.getSessionsMap(e);for(const h of c.docs){const f=h.data();try{const m=await this.getExistingDocument(e,"task_aggregate",h.id);if(m&&this.isDocumentCurrent(m,(i=f.updatedAt)==null?void 0:i.toDate())){r.skipped++,console.log(`⏭️ Skipping task ${h.id}: already current`);continue}const v={id:h.id,title:f.title||f.text||"Untitled Task",description:f.description||f.notes||"",projectId:f.projectId,completed:f.completed||!1,status:f.status,timeSpent:f.timeSpent||0,timeEstimated:f.timeEstimated,userId:f.userId,createdAt:((a=f.createdAt)==null?void 0:a.toDate())||new Date,updatedAt:((o=f.updatedAt)==null?void 0:o.toDate())||new Date,order:f.order||0},y=u[v.projectId],w=d[v.id]||[],_=Gl.generateTaskAggregateText(v,w,y);await this.storeDocumentWithEmbedding(e,"task_aggregate",h.id,_,{...v,projectName:y==null?void 0:y.name,sessionCount:w.length,lastUpdated:(s=v.updatedAt)==null?void 0:s.toISOString()}),r.processed++}catch(m){r.errors.push(`Task ${h.id}: ${m instanceof Error?m.message:"Unknown error"}`)}}return r}catch(l){return r.errors.push(`Tasks sync failed: ${l instanceof Error?l.message:"Unknown error"}`),r}}static async syncProjectsIncremental(e,t){var i,a,o;const r={processed:0,skipped:0,errors:[]};try{let s=fn(wn(yt,"projects"),Ot("userId","==",e));t&&(s=fn(wn(yt,"projects"),Ot("userId","==",e),Ot("updatedAt",">",ci.fromDate(t)),Ua("updatedAt","desc")));const l=await or(s);if(console.log(`📁 Found ${l.size} projects to process`),l.size===0)return console.log("✅ No projects need syncing"),r;const c=await this.getTasksByProjectMap(e),u=await this.getSessionsMap(e);for(const d of l.docs){const h=d.data();try{const f=await this.getExistingDocument(e,"project_summary",d.id);if(f&&this.isDocumentCurrent(f,(i=h.updatedAt)==null?void 0:i.toDate())){r.skipped++,console.log(`⏭️ Skipping project ${d.id}: already current`);continue}const m={id:d.id,name:h.name||"Untitled Project",color:h.color,description:h.description,userId:h.userId},v=c[m.id]||[],y=v.flatMap(_=>u[_.id]||[]),w=Gl.generateProjectSummaryText(m,v,y);await this.storeDocumentWithEmbedding(e,"project_summary",d.id,w,{...m,taskCount:v.length,sessionCount:y.length,lastUpdated:(o=(a=h.updatedAt)==null?void 0:a.toDate())==null?void 0:o.toISOString()}),r.processed++}catch(f){r.errors.push(`Project ${d.id}: ${f instanceof Error?f.message:"Unknown error"}`)}}return r}catch(s){return r.errors.push(`Projects sync failed: ${s instanceof Error?s.message:"Unknown error"}`),r}}static async syncSessionsIncremental(e,t){var i,a,o,s,l,c,u;const r={processed:0,skipped:0,errors:[]};try{let d=fn(wn(yt,"workSessions"),Ot("userId","==",e));t&&(d=fn(wn(yt,"workSessions"),Ot("userId","==",e),Ot("updatedAt",">",ci.fromDate(t)),Ua("updatedAt","desc")));const h=await or(d);if(console.log(`⏱️ Found ${h.size} sessions to process`),h.size===0)return console.log("✅ No sessions need syncing"),r;const f=await this.getTasksMap(e),m=await this.getProjectsMap(e);for(const v of h.docs){const y=v.data();try{const w=await this.getExistingDocument(e,"task_sessions",v.id);if(w&&this.isDocumentCurrent(w,(i=y.updatedAt)==null?void 0:i.toDate())){r.skipped++,console.log(`⏭️ Skipping session ${v.id}: already current`);continue}const _={id:v.id,taskId:y.taskId,projectId:y.projectId,duration:y.duration||0,sessionType:y.sessionType,startTime:(a=y.startTime)==null?void 0:a.toDate(),endTime:(o=y.endTime)==null?void 0:o.toDate(),notes:y.notes,status:y.status,userId:y.userId,date:y.date||new Date().toISOString().split("T")[0],createdAt:((s=y.createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((l=y.updatedAt)==null?void 0:l.toDate())||new Date},S=f[_.taskId],A=m[_.projectId];if(S&&A){const C=Gl.generateSessionText(_,S,A);await this.storeDocumentWithEmbedding(e,"task_sessions",v.id,C,{..._,taskName:S.title,projectName:A.name,lastUpdated:(u=(c=y.updatedAt)==null?void 0:c.toDate())==null?void 0:u.toISOString()}),r.processed++}else r.skipped++}catch(w){r.errors.push(`Session ${v.id}: ${w instanceof Error?w.message:"Unknown error"}`)}}return r}catch(d){return r.errors.push(`Sessions sync failed: ${d instanceof Error?d.message:"Unknown error"}`),r}}static isDocumentCurrent(e,t){var r;if(!t||!((r=e==null?void 0:e.metadata)!=null&&r.lastUpdated))return!1;try{const i=new Date(e.metadata.lastUpdated),a=new Date(t);return i>=a}catch(i){return console.warn("Error comparing document timestamps:",i),!1}}static async getExistingDocument(e,t,r){try{const i=t==="task"?"task_aggregate":t==="project"?"project_summary":t==="session"?"task_sessions":t,{data:a,error:o}=await Dt.from("user_productivity_documents").select("id, metadata, content").eq("user_id",e).eq("content_type",i).eq("metadata->>documentId",r).single();return o?null:a}catch{return null}}static async storeDocumentWithEmbedding(e,t,r,i,a){const o=t==="task"?"task_aggregate":t==="project"?"project_summary":t==="session"?"task_sessions":t,s=await $r.generateEmbedding({content:i,contentType:o}),{data:l}=await Dt.from("user_productivity_documents").select("id").eq("user_id",e).eq("content_type",o).eq("metadata->>documentId",r).single(),c={user_id:e,content_type:o,content:i,embedding:s,metadata:{documentId:r,...a,syncedAt:new Date().toISOString(),lastUpdated:a.lastUpdated||new Date().toISOString(),isIncremental:!0}};let u;if(l?u=(await Dt.from("user_productivity_documents").update(c).eq("id",l.id)).error:u=(await Dt.from("user_productivity_documents").insert(c)).error,u)throw u}static async updateSyncTrackers(e){const t=new Date,r=["tasks","projects","workSessions"];for(const i of r)await Dt.from("sync_trackers").upsert({user_id:e,collection:i,last_sync_time:t.toISOString(),updated_at:t.toISOString()},{onConflict:"user_id,collection"})}static async getProjectsMap(e){const t=await or(fn(wn(yt,"projects"),Ot("userId","==",e))),r={};return t.forEach(i=>{const a=i.data();r[i.id]={id:i.id,name:a.name||"Untitled Project",color:a.color,description:a.description,userId:a.userId}}),r}static async getTasksMap(e){const t=await or(fn(wn(yt,"tasks"),Ot("userId","==",e))),r={};return t.forEach(i=>{var o,s;const a=i.data();r[i.id]={id:i.id,title:a.title||a.text||"Untitled Task",description:a.description||a.notes||"",projectId:a.projectId,completed:a.completed||!1,status:a.status,timeSpent:a.timeSpent||0,timeEstimated:a.timeEstimated,userId:a.userId,createdAt:((o=a.createdAt)==null?void 0:o.toDate())||new Date,updatedAt:((s=a.updatedAt)==null?void 0:s.toDate())||new Date,order:a.order||0}}),r}static async getTasksByProjectMap(e){const t=await this.getTasksMap(e),r={};return Object.values(t).forEach(i=>{r[i.projectId]||(r[i.projectId]=[]),r[i.projectId].push(i)}),r}static async getSessionsMap(e){const t=await or(fn(wn(yt,"workSessions"),Ot("userId","==",e))),r={};return t.forEach(i=>{var s,l,c,u;const a=i.data(),o={id:i.id,taskId:a.taskId,projectId:a.projectId,duration:a.duration||0,sessionType:a.sessionType,startTime:(s=a.startTime)==null?void 0:s.toDate(),endTime:(l=a.endTime)==null?void 0:l.toDate(),notes:a.notes,status:a.status,userId:a.userId,date:a.date||new Date().toISOString().split("T")[0],createdAt:((c=a.createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=a.updatedAt)==null?void 0:u.toDate())||new Date};r[o.taskId]||(r[o.taskId]=[]),r[o.taskId].push(o)}),r}static async isIncrementalSyncNeeded(e){try{const t=await this.getLastSyncTimes(e),r=Object.values(t).filter(a=>a!==null).reduce((a,o)=>!a||o&&o<a?o:a,null);if(!r)return{needed:!0,lastSyncTime:null,pendingChanges:-1};let i=0;for(const[a,o]of Object.entries(t))if(o){const s=fn(wn(yt,a),Ot("userId","==",e),Ot("updatedAt",">",ci.fromDate(o))),l=await or(s);i+=l.size}return{needed:i>0,lastSyncTime:r,pendingChanges:i}}catch(t){return console.error("Failed to check sync status:",t),{needed:!0,lastSyncTime:null,pendingChanges:-1}}}static async executeProjectSync(e){const t=Date.now();console.log(`📁 Starting project sync for user: ${e}`);const r={success:!0,processedDocuments:0,skippedDocuments:0,errors:[],executionTime:0,collections:{tasks:0,projects:0,workSessions:0}};try{const i=await this.getLastSyncTimes(e),a=await this.syncProjectsIncremental(e,i.projects);return r.processedDocuments=a.processed,r.skippedDocuments=a.skipped,r.collections.projects=a.processed,r.errors=a.errors,await this.updateProjectSyncTracker(e),r.executionTime=Date.now()-t,r.success=r.errors.length===0,console.log(`✅ Project sync complete: ${r.processedDocuments} processed, ${r.skippedDocuments} skipped in ${r.executionTime}ms`),r}catch(i){return r.errors.push(i instanceof Error?i.message:"Unknown error"),r.success=!1,r.executionTime=Date.now()-t,console.error("❌ Project sync failed:",i),r}}static async updateProjectSyncTracker(e){const t=new Date;await Dt.from("sync_trackers").upsert({user_id:e,collection:"projects",last_sync_time:t.toISOString(),updated_at:t.toISOString()},{onConflict:"user_id,collection"})}}class DMt{static async initializeDatabase(){const e=Date.now(),t=[],r=[];try{console.log("🔧 Starting Supabase database setup..."),await this.enableExtensions(t,r),await this.createCoreTables(t,r),await this.applyHNSWOptimizations(t,r),await this.createAdvancedFunctions(t,r),await this.setupRLSPolicies(t,r),await this.createMaterializedViews(t,r);const i=Date.now()-e;return console.log(`✅ Database setup completed in ${i}ms`),{success:r.length===0,steps:t,errors:r,executionTime:i}}catch(i){const a=i instanceof Error?i.message:"Unknown error";return r.push(`Critical setup failure: ${a}`),console.error("❌ Database setup failed:",a),{success:!1,steps:t,errors:r,executionTime:Date.now()-e}}}static async enableExtensions(e,t){try{const{error:r}=await Dt.rpc("exec_sql",{sql:"CREATE EXTENSION IF NOT EXISTS vector;"});r?t.push(`Failed to enable vector extension: ${r.message}`):e.push("✅ Enabled pgvector extension");const i=["pg_stat_statements","pg_trgm","btree_gin"];for(const a of i)try{const{error:o}=await Dt.rpc("exec_sql",{sql:`CREATE EXTENSION IF NOT EXISTS ${a};`});o||e.push(`✅ Enabled ${a} extension`)}catch{console.warn(`⚠️ Could not enable ${a} extension (non-critical)`)}}catch(r){t.push(`Extension setup failed: ${r instanceof Error?r.message:"Unknown error"}`)}}static async createCoreTables(e,t){const r=[{name:"embeddings",sql:`
          CREATE TABLE IF NOT EXISTS embeddings (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            user_id text NOT NULL,
            content_type text NOT NULL CHECK (content_type IN ('task_aggregate', 'project_summary', 'session', 'site_usage', 'deep_focus', 'user_insight')),
            content_id text NOT NULL,
            content text NOT NULL,
            embedding vector(1536) NOT NULL,
            metadata jsonb NOT NULL DEFAULT '{}',
            created_at timestamptz DEFAULT now(),
            updated_at timestamptz DEFAULT now(),
            UNIQUE(user_id, content_type, content_id)
          );
        `},{name:"conversations",sql:`
          CREATE TABLE IF NOT EXISTS conversations (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            user_id text NOT NULL,
            title text NOT NULL,
            is_active boolean DEFAULT true,
            created_at timestamptz DEFAULT now(),
            updated_at timestamptz DEFAULT now()
          );
        `},{name:"chat_messages",sql:`
          CREATE TABLE IF NOT EXISTS chat_messages (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            conversation_id uuid NOT NULL REFERENCES conversations(id) ON DELETE CASCADE,
            user_id text NOT NULL,
            role text NOT NULL CHECK (role IN ('user', 'assistant')),
            content text NOT NULL,
            sources jsonb,
            metadata jsonb,
            created_at timestamptz DEFAULT now()
          );
        `},{name:"embedding_jobs",sql:`
          CREATE TABLE IF NOT EXISTS embedding_jobs (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            user_id text NOT NULL,
            content_type text NOT NULL,
            content_ids text[] NOT NULL,
            status text NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),
            progress integer DEFAULT 0 CHECK (progress >= 0 AND progress <= 100),
            error text,
            created_at timestamptz DEFAULT now(),
            completed_at timestamptz
          );
        `}];for(const i of r)try{const{error:a}=await Dt.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to create ${i.name} table: ${a.message}`):e.push(`✅ Created ${i.name} table`)}catch(a){t.push(`Table creation error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async applyHNSWOptimizations(e,t){const r=[{name:"Drop old IVFFlat index",sql:"DROP INDEX IF EXISTS embeddings_embedding_idx;"},{name:"Create HNSW index for embeddings",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_embedding_hnsw_idx 
          ON embeddings USING hnsw (embedding vector_cosine_ops) 
          WITH (m = 16, ef_construction = 200);
        `},{name:"Create partial index for active content",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_user_content_active_idx 
          ON embeddings (user_id, content_type, created_at DESC) 
          WHERE metadata->>'status' != 'archived';
        `},{name:"Create partial index for recent embeddings",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_recent_idx 
          ON embeddings (user_id, created_at DESC) 
          WHERE created_at > (now() - interval '30 days');
        `},{name:"Create GIN index for metadata queries",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_metadata_gin_idx 
          ON embeddings USING gin (metadata);
        `},{name:"Create composite index for user content lookups",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_user_content_composite_idx 
          ON embeddings (user_id, content_type, content_id);
        `}];for(const i of r)try{const{error:a}=await Dt.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to apply ${i.name}: ${a.message}`):e.push(`✅ Applied ${i.name}`)}catch(a){t.push(`Optimization error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async createAdvancedFunctions(e,t){const r=[{name:"Enhanced match documents function",sql:`
          CREATE OR REPLACE FUNCTION enhanced_match_documents(
            query_embedding vector(1536),
            match_threshold float DEFAULT 0.78,
            match_count int DEFAULT 10,
            filter_user_id text DEFAULT NULL,
            filter_content_type text DEFAULT NULL
          )
          RETURNS TABLE (
            id uuid,
            content text,
            metadata jsonb,
            similarity float
          )
          LANGUAGE plpgsql
          AS $$
          BEGIN
            RETURN QUERY
            SELECT
              e.id,
              e.content,
              e.metadata,
              1 - (e.embedding <=> query_embedding) AS similarity
            FROM embeddings e
            WHERE 
              (filter_user_id IS NULL OR e.user_id = filter_user_id)
              AND (filter_content_type IS NULL OR e.content_type = filter_content_type)
              AND 1 - (e.embedding <=> query_embedding) > match_threshold
            ORDER BY e.embedding <=> query_embedding
            LIMIT match_count;
          END;
          $$;
        `},{name:"Hybrid search function",sql:`
          CREATE OR REPLACE FUNCTION hybrid_search_documents(
            query_embedding vector(1536),
            search_text text DEFAULT NULL,
            match_threshold float DEFAULT 0.78,
            match_count int DEFAULT 10,
            user_id_filter text DEFAULT NULL
          )
          RETURNS TABLE (
            id uuid,
            content text,
            metadata jsonb,
            vector_similarity float,
            text_rank float,
            hybrid_score float
          )
          LANGUAGE plpgsql
          AS $$
          DECLARE
            vector_weight float := 0.7;
            text_weight float := 0.3;
          BEGIN
            RETURN QUERY
            SELECT
              e.id,
              e.content,
              e.metadata,
              (1 - (e.embedding <=> query_embedding)) AS vector_similarity,
              CASE 
                WHEN search_text IS NOT NULL THEN 
                  ts_rank_cd(to_tsvector('english', e.content), plainto_tsquery('english', search_text))
                ELSE 0.0
              END AS text_rank,
              (vector_weight * (1 - (e.embedding <=> query_embedding)) + 
               text_weight * CASE 
                 WHEN search_text IS NOT NULL THEN 
                   ts_rank_cd(to_tsvector('english', e.content), plainto_tsquery('english', search_text))
                 ELSE 0.0
               END) AS hybrid_score
            FROM embeddings e
            WHERE 
              (user_id_filter IS NULL OR e.user_id = user_id_filter)
              AND (1 - (e.embedding <=> query_embedding)) > match_threshold
              AND (search_text IS NULL OR to_tsvector('english', e.content) @@ plainto_tsquery('english', search_text))
            ORDER BY hybrid_score DESC
            LIMIT match_count;
          END;
          $$;
        `},{name:"Update timestamp trigger function",sql:`
          CREATE OR REPLACE FUNCTION update_updated_at_column()
          RETURNS TRIGGER AS $$
          BEGIN
            NEW.updated_at = now();
            RETURN NEW;
          END;
          $$ language 'plpgsql';
        `}];for(const i of r)try{const{error:a}=await Dt.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to create ${i.name}: ${a.message}`):e.push(`✅ Created ${i.name}`)}catch(a){t.push(`Function creation error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async setupRLSPolicies(e,t){const r=[{name:"Enable RLS on embeddings",sql:"ALTER TABLE embeddings ENABLE ROW LEVEL SECURITY;"},{name:"Enable RLS on conversations",sql:"ALTER TABLE conversations ENABLE ROW LEVEL SECURITY;"},{name:"Enable RLS on chat_messages",sql:"ALTER TABLE chat_messages ENABLE ROW LEVEL SECURITY;"},{name:"Enable RLS on embedding_jobs",sql:"ALTER TABLE embedding_jobs ENABLE ROW LEVEL SECURITY;"},{name:"Embeddings RLS policy",sql:`
          CREATE POLICY "Users can only access their own embeddings" ON embeddings
          FOR ALL USING (user_id = auth.uid()::text);
        `},{name:"Conversations RLS policy",sql:`
          CREATE POLICY "Users can only access their own conversations" ON conversations
          FOR ALL USING (user_id = auth.uid()::text);
        `},{name:"Chat messages RLS policy",sql:`
          CREATE POLICY "Users can only access their own chat messages" ON chat_messages
          FOR ALL USING (user_id = auth.uid()::text);
        `},{name:"Embedding jobs RLS policy",sql:`
          CREATE POLICY "Users can only access their own embedding jobs" ON embedding_jobs
          FOR ALL USING (user_id = auth.uid()::text);
        `}];for(const i of r)try{const{error:a}=await Dt.rpc("exec_sql",{sql:i.sql});a&&!a.message.includes("already exists")?t.push(`Failed to apply ${i.name}: ${a.message}`):e.push(`✅ Applied ${i.name}`)}catch(a){t.push(`RLS policy error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async createMaterializedViews(e,t){const r=[{name:"User embedding statistics view",sql:`
          CREATE MATERIALIZED VIEW IF NOT EXISTS user_embedding_stats AS
          SELECT 
            user_id,
            content_type,
            COUNT(*) as total_embeddings,
            AVG(length(content)) as avg_content_length,
            MAX(created_at) as last_embedding_created,
            COUNT(CASE WHEN created_at > now() - interval '7 days' THEN 1 END) as recent_embeddings
          FROM embeddings
          GROUP BY user_id, content_type;
        `},{name:"Create unique index on user embedding stats",sql:`
          CREATE UNIQUE INDEX IF NOT EXISTS user_embedding_stats_unique_idx 
          ON user_embedding_stats (user_id, content_type);
        `}];for(const i of r)try{const{error:a}=await Dt.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to create ${i.name}: ${a.message}`):e.push(`✅ Created ${i.name}`)}catch(a){t.push(`View creation error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async checkDatabaseHealth(){const e=[],t=[];try{const r=["embeddings","conversations","chat_messages","embedding_jobs"];for(const i of r)try{const{error:a}=await Dt.from(i).select("id").limit(1);a&&a.code==="42P01"&&e.push(`Table: ${i}`)}catch{e.push(`Table: ${i}`)}try{const{error:i}=await Dt.rpc("exec_sql",{sql:"SELECT 1 FROM pg_extension WHERE extname = 'vector';"});i&&e.push("Extension: pgvector")}catch{e.push("Extension: pgvector")}return e.length>0&&t.push("Run DatabaseSetup.initializeDatabase() to fix missing components"),e.some(i=>i.includes("embeddings"))&&t.push("Critical: Embeddings table missing - RAG functionality will not work"),{isHealthy:e.length===0,missingComponents:e,recommendations:t}}catch{return{isHealthy:!1,missingComponents:["Database connection failed"],recommendations:["Check Supabase connection and credentials"]}}}static async applyMigrationIfNeeded(){console.log("🔍 Checking database health...");const e=await this.checkDatabaseHealth();return e.isHealthy?(console.log("✅ Database is healthy, no migration needed"),{success:!0,steps:["Database already healthy"],errors:[],executionTime:0}):(console.log("⚠️ Database needs setup. Missing components:",e.missingComponents),await this.initializeDatabase())}static async createTables(){try{console.log("🔧 Setting up database tables...");const{error:e}=await Dt.rpc("create_user_productivity_documents_table");if(e&&!e.message.includes("already exists"))throw e;const{error:t}=await Dt.rpc("create_sync_trackers_table");t&&!t.message.includes("already exists")&&(console.log("Creating sync_trackers table manually..."),await this.createSyncTrackersTable());const{error:r}=await Dt.rpc("create_match_documents_function");if(r&&!r.message.includes("already exists"))throw r;console.log("✅ Database setup complete")}catch(e){throw console.error("❌ Database setup failed:",e),e}}static async createSyncTrackersTable(){const e=`
      CREATE TABLE IF NOT EXISTS sync_trackers (
        id SERIAL PRIMARY KEY,
        user_id TEXT NOT NULL,
        collection TEXT NOT NULL,
        last_sync_time TIMESTAMPTZ,
        updated_at TIMESTAMPTZ DEFAULT NOW(),
        UNIQUE(user_id, collection)
      );
      
      -- Enable RLS
      ALTER TABLE sync_trackers ENABLE ROW LEVEL SECURITY;
      
      -- Create policy for users to only access their own sync trackers
      CREATE POLICY "Users can only access their own sync trackers" ON sync_trackers
        FOR ALL USING (auth.uid()::text = user_id);
      
      -- Create index for efficient queries
      CREATE INDEX IF NOT EXISTS idx_sync_trackers_user_collection 
        ON sync_trackers(user_id, collection);
    `,{error:t}=await Dt.rpc("exec_sql",{sql:e});if(t)throw console.error("Failed to create sync_trackers table:",t),t;console.log("✅ sync_trackers table created successfully")}}class BD{static analyzeQuery(e,t){const r=this.detectComplexity(e),i=this.detectDomain(e),a=this.detectTimeScope(e),o=this.CONFIG_PROFILES[r];return{complexity:r,domain:i,timeScope:a,expectedSourceCount:o.optimalSources,maxTokenBudget:o.tokenBudget,confidence:this.calculateConfidence(e,r,i)}}static getOptimalConfig(e,t){const i={...this.CONFIG_PROFILES[e.complexity]};return e.confidence<.7&&(i.optimalSources=Math.min(i.maxSources,Math.ceil(i.optimalSources*1.3))),t!=null&&t.prioritizeCost&&(i.costWeight+=.2,i.performanceWeight-=.2,i.optimalSources=Math.max(i.minSources,Math.floor(i.optimalSources*.8))),i}static detectComplexity(e){const t=e.toLowerCase();for(const a of this.COMPLEXITY_PATTERNS.analytical)if(a.test(t))return"analytical";for(const a of this.COMPLEXITY_PATTERNS.complex)if(a.test(t))return"complex";for(const a of this.COMPLEXITY_PATTERNS.moderate)if(a.test(t))return"moderate";for(const a of this.COMPLEXITY_PATTERNS.simple)if(a.test(t))return"simple";const r=e.split(/\s+/).length,i=/\b(what|how|why|when|where|which|who)\b/i.test(e);return r>15||!i&&r>10?"complex":r>8||!i?"moderate":"simple"}static detectDomain(e){const t=e.toLowerCase();for(const[r,i]of Object.entries(this.DOMAIN_PATTERNS))if(i.test(t))return r;return"general"}static detectTimeScope(e){const t=e.toLowerCase();return/\b(today|now|current|recent|latest|this\s+week)\b/i.test(t)?"recent":/\b(yesterday|last\s+\w+|ago|previous|past)\b/i.test(t)?"historical":/\b(\d{4}|january|february|march|april|may|june|july|august|september|october|november|december)\b/i.test(t)?"specific":"broad"}static calculateConfidence(e,t,r){let i=.5;/\b(what|how|why|when|where|which|who)\b/i.test(e)&&(i+=.2),r!=="general"&&(i+=.15);const o=e.split(/\s+/).length;return(t==="simple"&&o<=8||t==="moderate"&&o<=12||t==="complex"&&o<=20)&&(i+=.15),Math.min(1,i)}}hn(BD,"CONFIG_PROFILES",{simple:{minSources:2,maxSources:5,optimalSources:3,tokenBudget:2e3,costWeight:.7,performanceWeight:.3},moderate:{minSources:3,maxSources:8,optimalSources:5,tokenBudget:4e3,costWeight:.5,performanceWeight:.5},complex:{minSources:5,maxSources:12,optimalSources:8,tokenBudget:6e3,costWeight:.3,performanceWeight:.7},analytical:{minSources:8,maxSources:15,optimalSources:10,tokenBudget:8e3,costWeight:.2,performanceWeight:.8}}),hn(BD,"COMPLEXITY_PATTERNS",{simple:[/^(what|when|where|who|which)\s+is\s+/i,/^(show|list|get)\s+/i,/^(how\s+many|how\s+much)\s+/i],moderate:[/^(how\s+do\s+i|help\s+me)\s+/i,/\b(compare|contrast|difference|similar)\b/i,/\b(recent|latest|last\s+\w+)\b/i],complex:[/\b(analyze|analysis|pattern|trend|insight)\b/i,/\b(why|because|reason|cause|effect)\b/i,/\b(best|optimal|improve|optimize|recommend)\b/i],analytical:[/\b(comprehensive|detailed|in-depth|thorough)\b/i,/\b(correlation|relationship|impact|influence)\b/i,/\b(strategy|plan|approach|methodology)\b/i]}),hn(BD,"DOMAIN_PATTERNS",{task:/\b(task|todo|assignment|activity|action)\b/i,project:/\b(project|milestone|deliverable|goal)\b/i,productivity:/\b(productive|focus|distraction|efficiency|performance)\b/i,time:/\b(time|hour|minute|day|week|month|schedule|calendar)\b/i});class Wke{static async selectOptimalSources(e,t,r,i={}){const a=BD.analyzeQuery(e,t),o=BD.getOptimalConfig(a,i);console.log("🎯 Query Analysis:",{complexity:a.complexity,domain:a.domain,expectedSources:a.expectedSourceCount,confidence:a.confidence});const s=await this.scoreSourcesByRelevance(e,r,a),l=this.selectSourcesByStrategy(s,o,a,i),c=this.estimateTokenUsage(e,l),u=this.calculateCost(c,"gpt-4o-mini");return{selectedSources:l,totalAvailableSources:r.length,selectionStrategy:this.getSelectionStrategy(a,o,i),estimatedTokens:c,estimatedCost:u,confidence:a.confidence}}static async scoreSourcesByRelevance(e,t,r){const i=e.toLowerCase().split(/\s+/).filter(a=>a.length>2);return t.map(a=>{let o=0,s=0;const l=(a.content||"").toLowerCase(),c=a.metadata||{},u=i.filter(d=>l.includes(d));if(o+=u.length/i.length*.4,r.domain!=="general"){const d=this.getDomainKeywords(r.domain),h=d.filter(f=>l.includes(f));o+=h.length/d.length*.3}if(r.timeScope==="recent"){const d=a.created_at?(Date.now()-new Date(a.created_at).getTime())/864e5:999;o+=Math.max(0,(30-d)/30)*.2}if(a.content_type){const d=this.getContentTypeRelevance(a.content_type,r.domain);o+=d*.1}return s+=Math.min(1,l.length/500)*.4,s+=(c.importance||.5)*.3,s+=a.embeddings?.3:0,{...a,relevanceScore:Math.min(1,o),qualityScore:Math.min(1,s)}}).sort((a,o)=>{const s=a.relevanceScore*.7+a.qualityScore*.3;return o.relevanceScore*.7+o.qualityScore*.3-s})}static selectSourcesByStrategy(e,t,r,i){const a=i.minQualityThreshold||.3,o=e.filter(l=>l.qualityScore>=a);let s=t.optimalSources;return o.length<s&&(s=Math.max(t.minSources,o.length)),i.prioritizeCost&&o.length>t.minSources&&(s=Math.max(t.minSources,Math.ceil(s*.7))),i.maxTokenBudget&&(s=this.adjustForTokenBudget(o,s,i.maxTokenBudget)),this.selectDiverseSources(o,s)}static selectDiverseSources(e,t){if(e.length<=t)return e;const r=[],i=[...e];for(r.push(i.shift());r.length<t&&i.length>0;){let a=i[0],o=0;for(const s of i){const l=this.calculateDiversityScore(s,r),c=s.relevanceScore*.6+l*.4;c>o&&(o=c,a=s)}r.push(a),i.splice(i.indexOf(a),1)}return r}static calculateDiversityScore(e,t){if(t.length===0)return 1;const r=(e.content||"").toLowerCase();let i=1;for(const a of t){const o=(a.content||"").toLowerCase(),s=this.calculateContentSimilarity(r,o);i=Math.min(i,1-s)}return i}static calculateContentSimilarity(e,t){const r=new Set(e.split(/\s+/)),i=new Set(t.split(/\s+/)),a=new Set([...r].filter(s=>i.has(s))),o=new Set([...r,...i]);return a.size/o.size}static adjustForTokenBudget(e,t,r){let i=0,a=0;for(let o=0;o<Math.min(t,e.length);o++){const s=this.estimateSourceTokens(e[o]);if(i+s<=r)i+=s,a++;else break}return Math.max(1,a)}static estimateSourceTokens(e){const t=e.content||"";return Math.ceil(t.length/4)}static estimateTokenUsage(e,t){const r=Math.ceil(e.length/4),i=t.reduce((o,s)=>o+this.estimateSourceTokens(s),0);return r+i+150}static calculateCost(e,t){const r=this.TOKEN_COSTS[t]||this.TOKEN_COSTS["gpt-4o-mini"];return e*r.input}static getDomainKeywords(e){return{task:["task","todo","assignment","activity","action","complete","finish"],project:["project","milestone","deliverable","goal","objective","phase"],productivity:["productive","focus","distraction","efficiency","performance","work"],time:["time","hour","minute","day","week","month","schedule","calendar"]}[e]||[]}static getContentTypeRelevance(e,t){const i={task:{task:1,project:.7,session:.5,document:.3},project:{project:1,task:.8,session:.6,document:.4},productivity:{session:1,task:.8,project:.6,document:.5},time:{session:1,task:.7,project:.5,document:.3}}[t];return(i==null?void 0:i[e])||.5}static getSelectionStrategy(e,t,r){const i=[];return i.push(`${e.complexity}-complexity`),r.prioritizeCost&&i.push("cost-optimized"),r.maxTokenBudget&&i.push("token-constrained"),e.confidence<.7&&i.push("uncertainty-boosted"),i.join(", ")}}hn(Wke,"TOKEN_COSTS",{"gpt-4o":{input:5e-6,output:15e-6},"gpt-4o-mini":{input:15e-8,output:6e-7},"gpt-4":{input:3e-5,output:6e-5}});class kMt{static async queryWithRAG(e,t,r){try{const i=Date.now();let a=[];try{const f=await $r.generateEmbedding({content:e,contentType:"query"}),{data:m,error:v}=await Dt.from("user_productivity_documents").select("*").eq("user_id",t).not("embedding","is",null).limit(12);v?console.warn("Vector search error:",v):(a=m||[],console.log(`✅ Found ${a.length} documents with embeddings`))}catch(f){console.warn("Embedding generation failed, falling back to simple retrieval:",f)}if(a.length===0){console.log("No vector results, using fallback document retrieval");const{data:f,error:m}=await Dt.from("user_productivity_documents").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(10);m?console.error("Fallback document retrieval error:",m):(a=f||[],console.log(`📚 Fallback found ${a.length} documents`))}let o=a;if(a&&a.length>0){const f=await Wke.selectOptimalSources(e,t,a,{prioritizeCost:!0,minQualityThreshold:.25,maxTokenBudget:4e3});o=f.selectedSources,console.log(`📊 Simple RAG selection: ${o.length}/${a.length} sources, estimated cost: $${f.estimatedCost.toFixed(5)}`)}const s=(o==null?void 0:o.map((f,m)=>`[${m+1}] ${f.content}`).join(`

`))||"No relevant documents found.";console.log("Generating chat response with context:",{query:e,contextLength:s.length,documentCount:o.length});const l=await $r.generateChatResponse({query:e,context:s,conversationHistory:r}),c=this.cleanResponse(l);console.log("Chat response generated successfully:",c.substring(0,100)+"...");const d=Date.now()-i,h=(o==null?void 0:o.map((f,m)=>{var v,y;return{id:`source_${m+1}`,type:f.content_type||"document",contentId:((v=f.metadata)==null?void 0:v.documentId)||f.id,title:((y=f.metadata)==null?void 0:y.title)||`Document ${m+1}`,snippet:f.content.substring(0,200)+"...",relevanceScore:.8}}))||[];return{response:c,sources:h,metadata:{responseTime:d,relevanceScore:h.length>0?h[0].relevanceScore:0,tokens:$r.estimateTokens(c),model:"gpt-4o-mini",retrievedDocuments:(o==null?void 0:o.length)||0}}}catch(i){throw console.error("Simple RAG query error:",i),console.error("Error details:",{message:i instanceof Error?i.message:"Unknown error",stack:i instanceof Error?i.stack:void 0,userId:t,query:e.substring(0,50)+"..."}),new Error(`Failed to process RAG query: ${i instanceof Error?i.message:"Unknown error"}`)}}static cleanResponse(e){return e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").trim()}static async addDocumentToVectorStore(e,t,r){try{const i=await $r.generateEmbedding({content:e,contentType:t.contentType||"document"}),{error:a}=await Dt.from("user_productivity_documents").insert({user_id:r,content_type:"text",content:e,metadata:t,embedding:i});if(a)throw a;console.log("✅ Document added to vector store:",{userId:r,contentLength:e.length})}catch(i){throw console.error("Error adding document to vector store:",i),new Error("Failed to add document to vector store")}}static async deleteUserDocuments(e){try{const{error:t}=await Dt.from("user_productivity_documents").delete().eq("user_id",e);if(t)throw t}catch(t){throw console.error("Error deleting user documents:",t),new Error("Failed to delete user documents")}}}class Uq{static async initializeUserSync(e){try{console.log("Initializing data sync for user:",e),this.stopSync(),await Promise.all([this.syncTasks(e),this.syncSessions(e),this.syncProjects(e)]),console.log("Data sync initialized for user:",e)}catch(t){throw console.error("Failed to initialize data sync:",t),new Error("Failed to initialize data sync")}}static stopSync(){console.log(`🛑 Stopping ${this.syncListeners.length} active Firebase listeners`),this.syncListeners.forEach(e=>e()),this.syncListeners=[],console.log("✅ All Firebase listeners cleaned up")}static getActiveListenerCount(){return this.syncListeners.length}static isActive(){return this.syncListeners.length>0}static async syncTasks(e){const t=fn(wn(yt,"tasks"),Ot("userId","==",e),Ua("updatedAt","desc")),r=Yv(t,async i=>{const a=[];i.docChanges().forEach(o=>{if(o.type==="added"||o.type==="modified"){const s=o.doc.data(),l=this.formatTaskForEmbedding(o.doc.id,s);l&&a.push(l)}}),a.length>0&&await this.processBatch(a)});this.syncListeners.push(r)}static async syncSessions(e){const t=fn(wn(yt,"workSessions"),Ot("userId","==",e),Ua("updatedAt","desc")),r=Yv(t,async i=>{const a=[];i.docChanges().forEach(o=>{if(o.type==="added"||o.type==="modified"){const s=o.doc.data(),l=this.formatSessionForEmbedding(o.doc.id,s);l&&a.push(l)}}),a.length>0&&await this.processBatch(a)});this.syncListeners.push(r)}static async syncProjects(e){const t=fn(wn(yt,"projects"),Ot("userId","==",e),Ua("updatedAt","desc")),r=Yv(t,async i=>{const a=[];i.docChanges().forEach(o=>{if(o.type==="added"||o.type==="modified"){const s=o.doc.data(),l=this.formatProjectForEmbedding(o.doc.id,s);l&&a.push(l)}}),a.length>0&&await this.processBatch(a)});this.syncListeners.push(r)}static formatTaskForEmbedding(e,t){var i,a,o,s,l;if(!t.title)return null;const r=[`Task: ${t.title}`,t.description?`Description: ${t.description}`:"",t.category?`Category: ${t.category}`:"",t.priority?`Priority: ${t.priority}`:"",t.status?`Status: ${t.status}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"task_aggregate",metadata:{documentId:e,title:t.title,category:t.category,priority:t.priority,status:t.status,tags:t.tags||[],createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static formatSessionForEmbedding(e,t){var a,o,s,l,c,u;if(!t.startTime)return null;const r=t.endTime&&t.startTime?Math.round((t.endTime.toDate()-t.startTime.toDate())/6e4):0,i=["Work Session",t.projectName?`Project: ${t.projectName}`:"",t.taskName?`Task: ${t.taskName}`:"",`Duration: ${r} minutes`,t.description?`Notes: ${t.description}`:"",t.category?`Category: ${t.category}`:""].filter(Boolean).join(`
`);return{id:e,content:i,contentType:"task_sessions",metadata:{documentId:e,projectName:t.projectName,taskName:t.taskName,duration:r,category:t.category,startTime:((o=(a=t.startTime)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date,endTime:((l=(s=t.endTime)==null?void 0:s.toDate)==null?void 0:l.call(s))||null},userId:t.userId,updatedAt:((u=(c=t.updatedAt)==null?void 0:c.toDate)==null?void 0:u.call(c))||new Date}}static formatProjectForEmbedding(e,t){var i,a,o,s,l;if(!t.name)return null;const r=[`Project: ${t.name}`,t.description?`Description: ${t.description}`:"",t.status?`Status: ${t.status}`:"",t.priority?`Priority: ${t.priority}`:"",t.category?`Category: ${t.category}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"project_summary",metadata:{documentId:e,name:t.name,status:t.status,priority:t.priority,category:t.category,tags:t.tags||[],createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static async processBatch(e){try{await Promise.all(e.map(async t=>{try{await kMt.addDocumentToVectorStore(t.content,t.metadata,t.userId)}catch(r){console.error(`Failed to sync document ${t.id}:`,r)}})),console.log(`Synced ${e.length} documents to vector store`)}catch(t){console.error("Batch processing failed:",t)}}static async performInitialSync(e){try{console.log("🔄 Starting initial sync for user:",e);const t=[];console.log("📝 Syncing existing tasks...");const r=fn(wn(yt,"tasks"),Ot("userId","==",e)),i=await or(r);i.docs.forEach(u=>{const d=u.data(),h=this.formatTaskForEmbedding(u.id,d);h&&t.push(h)}),console.log(`📝 Found ${i.size} tasks to sync`),console.log("⏱️ Syncing existing work sessions...");const a=fn(wn(yt,"workSessions"),Ot("userId","==",e)),o=await or(a),s=o.docs.slice(0,50).forEach(u=>{const d=u.data(),h=this.formatSessionForEmbedding(u.id,d);h&&t.push(h)});console.log(`⏱️ Found ${Math.min(o.size,50)} work sessions to sync`),console.log("📁 Syncing existing projects...");const l=fn(wn(yt,"projects"),Ot("userId","==",e)),c=await or(l);c.docs.forEach(u=>{const d=u.data(),h=this.formatProjectForEmbedding(u.id,d);h&&t.push(h)}),console.log(`📁 Found ${c.size} projects to sync`),console.log(`🚀 Processing ${t.length} total documents...`),t.length>0?(await this.processBatch(t),console.log(`✅ Initial sync completed: ${t.length} documents processed`)):console.log("⚠️ No documents found to sync")}catch(t){throw console.error("❌ Initial sync failed:",t),t}}}hn(Uq,"syncListeners",[]);class Vq{static async initializeCompleteSync(e){const t=Date.now();console.log("🚀 Starting complete data synchronization for user:",e);try{await this.ensureSupabaseSchema();const r=await this.performBulkSync(e);await this.setupRealtimeSync(e),this.scheduleMaintenanceTasks(e),this.isInitialized=!0;const i=Date.now()-t;return console.log(`✅ Complete data sync initialized in ${i}ms`),{...r,executionTime:i}}catch(r){throw console.error("❌ Failed to initialize complete data sync:",r),new Error(`Complete sync initialization failed: ${r instanceof Error?r.message:"Unknown error"}`)}}static async performBulkSync(e){const t=[{name:"tasks",processor:this.processTasks},{name:"projects",processor:this.processProjects},{name:"workSessions",processor:this.processWorkSessions},{name:"dailySiteUsage",processor:this.processSiteUsage},{name:"deepFocusSessions",processor:this.processDeepFocusSessions}],r={};let i=0,a=0;for(const{name:o,processor:s}of t){console.log(`📋 Processing collection: ${o}`);try{const l=await s.call(this,e);r[o]=l,i+=l.processed,a+=l.errors.length,console.log(`✅ ${o}: ${l.processed} documents processed, ${l.errors.length} errors`)}catch(l){const c=l instanceof Error?l.message:"Unknown error";r[o]={collection:o,processed:0,total:0,status:"failed",errors:[c]},a++,console.error(`❌ Failed to process ${o}:`,c)}}return{success:a===0,totalProcessed:i,totalErrors:a,collectionResults:r,executionTime:0}}static async processTasks(e){const t={collection:"tasks",processed:0,total:0,status:"processing",errors:[]};try{const r=fn(wn(yt,"tasks"),Ot("userId","==",e),Ua("updatedAt","desc")),i=await or(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatTaskForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processProjects(e){const t={collection:"projects",processed:0,total:0,status:"processing",errors:[]};try{const r=fn(wn(yt,"projects"),Ot("userId","==",e),Ua("updatedAt","desc")),i=await or(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatProjectForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processWorkSessions(e){const t={collection:"workSessions",processed:0,total:0,status:"processing",errors:[]};try{const r=fn(wn(yt,"workSessions"),Ot("userId","==",e),Ua("updatedAt","desc")),i=await or(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatSessionForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processSiteUsage(e){const t={collection:"dailySiteUsage",processed:0,total:0,status:"processing",errors:[]};try{const r=fn(wn(yt,"dailySiteUsage"),Ot("userId","==",e),Ua("updatedAt","desc")),i=await or(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatSiteUsageForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processDeepFocusSessions(e){const t={collection:"deepFocusSessions",processed:0,total:0,status:"processing",errors:[]};try{const r=fn(wn(yt,"deepFocusSessions"),Ot("userId","==",e),Ua("updatedAt","desc")),i=await or(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatDeepFocusForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static formatTaskForEmbedding(e,t){var i,a,o,s,l;if(!t.title)return null;const r=[`Task: ${t.title}`,t.description?`Description: ${t.description}`:"",t.category?`Category: ${t.category}`:"",t.priority?`Priority: ${t.priority}`:"",t.status?`Status: ${t.status}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:"",t.timeSpent?`Time spent: ${Math.round(t.timeSpent/60)} minutes`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"task_aggregate",contentId:e,metadata:{documentId:e,title:t.title,category:t.category,priority:t.priority,status:t.status,tags:t.tags||[],timeSpent:t.timeSpent||0,projectId:t.projectId,completionStatus:t.status==="completed",createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,priority:t.priority==="high"?"high":t.priority==="medium"?"medium":"low",updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static formatProjectForEmbedding(e,t){var i,a,o,s,l;if(!t.name)return null;const r=[`Project: ${t.name}`,t.description?`Description: ${t.description}`:"",t.status?`Status: ${t.status}`:"",t.priority?`Priority: ${t.priority}`:"",t.category?`Category: ${t.category}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"project_summary",contentId:e,metadata:{documentId:e,name:t.name,description:t.description,status:t.status,priority:t.priority,category:t.category,tags:t.tags||[],createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,priority:t.priority==="high"?"high":t.priority==="medium"?"medium":"low",updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static formatSessionForEmbedding(e,t){var a,o,s,l,c,u;if(!t.startTime)return null;const r=t.endTime&&t.startTime?Math.round((t.endTime.toDate()-t.startTime.toDate())/6e4):0,i=["Work Session",t.projectName?`Project: ${t.projectName}`:"",t.taskName?`Task: ${t.taskName}`:"",`Duration: ${r} minutes`,t.description?`Notes: ${t.description}`:"",t.category?`Category: ${t.category}`:"",t.sessionType?`Type: ${t.sessionType}`:""].filter(Boolean).join(`
`);return{id:e,content:i,contentType:"task_sessions",contentId:e,metadata:{documentId:e,projectName:t.projectName,taskName:t.taskName,duration:r,category:t.category,sessionType:t.sessionType,startTime:((o=(a=t.startTime)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date,endTime:((l=(s=t.endTime)==null?void 0:s.toDate)==null?void 0:l.call(s))||null,projectId:t.projectId,taskId:t.taskId},userId:t.userId,priority:r>60?"high":r>30?"medium":"low",updatedAt:((u=(c=t.updatedAt)==null?void 0:c.toDate)==null?void 0:u.call(c))||new Date}}static formatSiteUsageForEmbedding(e,t){var o,s,l,c;if(!t.date||!t.totalTime)return null;const r=Math.round(t.totalTime/(1e3*60*60)*10)/10,i=Object.entries(t.sites||{}).sort(([,u],[,d])=>d.timeSpent-u.timeSpent).slice(0,5).map(([u,d])=>`${u} (${Math.round(d.timeSpent/(1e3*60))} mins)`).join(", "),a=[`Daily Site Usage - ${t.date}`,`Total time: ${r} hours`,`Sites visited: ${t.sitesVisited}`,`Productivity score: ${t.productivityScore}%`,i?`Top sites: ${i}`:"",`Extension version: ${t.extensionVersion||"unknown"}`].filter(Boolean).join(`
`);return{id:e,content:a,contentType:"site_usage",contentId:e,metadata:{documentId:e,date:t.date,totalTime:t.totalTime,timeInHours:r,sitesVisited:t.sitesVisited,productivityScore:t.productivityScore,extensionVersion:t.extensionVersion,topSites:Object.keys(t.sites||{}).slice(0,10),syncedAt:((s=(o=t.syncedAt)==null?void 0:o.toDate)==null?void 0:s.call(o))||new Date},userId:t.userId,priority:t.productivityScore>=80?"high":t.productivityScore>=60?"medium":"low",updatedAt:((c=(l=t.updatedAt)==null?void 0:l.toDate)==null?void 0:c.call(l))||new Date}}static formatDeepFocusForEmbedding(e,t){var a,o;if(!t.sessionDate||!t.duration)return null;const r=Math.round(t.duration/60),i=[`Deep Focus Session - ${t.sessionDate}`,`Duration: ${r} minutes`,t.sessionType?`Type: ${t.sessionType}`:"",t.distractionCount!==void 0?`Distractions: ${t.distractionCount}`:"",t.focusScore!==void 0?`Focus score: ${t.focusScore}%`:"",t.notes?`Notes: ${t.notes}`:""].filter(Boolean).join(`
`);return{id:e,content:i,contentType:"deep_focus",contentId:e,metadata:{documentId:e,sessionDate:t.sessionDate,duration:t.duration,durationInMinutes:r,sessionType:t.sessionType,distractionCount:t.distractionCount,focusScore:t.focusScore,notes:t.notes},userId:t.userId,priority:t.focusScore>=80?"high":t.focusScore>=60?"medium":"low",updatedAt:((o=(a=t.updatedAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date}}static async processBatchWithPipeline(e){if(e.length!==0)try{const t=e.map(r=>({id:r.contentId,title:r.content.split(`
`)[0],description:r.content,category:r.metadata.category||"general",priority:r.priority,status:r.metadata.status||"active",tags:r.metadata.tags||[],userId:r.userId,timeSpent:r.metadata.timeSpent||r.metadata.duration||0,projectId:r.metadata.projectId,createdAt:r.metadata.createdAt||new Date,updatedAt:r.updatedAt,contentType:r.contentType,originalMetadata:r.metadata}));for(const r of e)try{const i=await $r.generateEmbedding({content:r.content,contentType:r.contentType}),{error:a}=await Dt.from("user_productivity_documents").insert({user_id:r.userId,content_type:r.contentType,content:r.content,embedding:i,metadata:{documentId:r.id,sourceCollection:r.contentType,originalData:r.metadata,syncedAt:new Date().toISOString()}});if(a)throw a}catch(i){console.error(`Error processing document ${r.id}:`,i)}console.log(`✅ Processed ${e.length} documents of type ${e[0].contentType}`)}catch(t){throw console.error("❌ Failed to process batch with pipeline:",t),t}}static async ensureSupabaseSchema(){try{const{data:e,error:t}=await Dt.from("embeddings").select("id").limit(1);if(t&&t.code==="42P01")throw console.log("⚠️ Supabase schema not ready. Please run the schema setup first."),new Error("Supabase database schema not initialized. Please run the database migration.");if(t)throw t;console.log("✅ Supabase schema verified")}catch(e){throw console.error("❌ Schema verification failed:",e),e}}static async setupRealtimeSync(e){this.stopSync();const t=[{name:"tasks",formatter:this.formatTaskForEmbedding},{name:"projects",formatter:this.formatProjectForEmbedding},{name:"workSessions",formatter:this.formatSessionForEmbedding},{name:"dailySiteUsage",formatter:this.formatSiteUsageForEmbedding},{name:"deepFocusSessions",formatter:this.formatDeepFocusForEmbedding}];for(const{name:r,formatter:i}of t){const a=fn(wn(yt,r),Ot("userId","==",e),Ua("updatedAt","desc")),o=Yv(a,async s=>{const l=[];if(s.docChanges().forEach(c=>{if(c.type==="added"||c.type==="modified"){const u=c.doc.data(),d=i.call(this,c.doc.id,u);d&&l.push(d)}}),l.length>0)try{await this.processBatchWithPipeline(l),console.log(`🔄 Real-time sync: ${l.length} ${r} documents updated`)}catch(c){console.error(`❌ Real-time sync failed for ${r}:`,c)}});this.syncListeners.push(o)}console.log("👂 Real-time sync listeners established for all collections")}static scheduleMaintenanceTasks(e){const t=new Date;t.setDate(t.getDate()+1),t.setHours(3,0,0,0);const r=t.getTime()-Date.now();setTimeout(()=>{this.performMaintenanceCleanup(e),setInterval(()=>{this.performMaintenanceCleanup(e)},24*60*60*1e3)},r),console.log("⏰ Maintenance tasks scheduled")}static async performMaintenanceCleanup(e){try{console.log("🧹 Starting maintenance cleanup for user:",e);const{data:t}=await Dt.from("embeddings").select("id, content_id, created_at").eq("user_id",e).order("content_id").order("created_at",{ascending:!1});if(t&&t.length>0){const r=new Set,i=[];for(const a of t)r.has(a.content_id)?i.push(a.id):r.add(a.content_id);if(i.length>0){const{error:a}=await Dt.from("embeddings").delete().in("id",i);a||console.log(`🗑️ Cleaned up ${i.length} duplicate embeddings`)}}console.log("✅ Maintenance cleanup completed")}catch(t){console.error("❌ Maintenance cleanup failed:",t)}}static stopSync(){this.syncListeners.forEach(e=>e()),this.syncListeners=[],this.isInitialized=!1,console.log("🛑 All sync listeners stopped")}static async getSyncStatus(e){try{const{data:t}=await Dt.from("embeddings").select("content_type, created_at").eq("user_id",e),r={},i={};return t&&t.forEach(a=>{r[a.content_type]=(r[a.content_type]||0)+1;const o=new Date(a.created_at);(!i[a.content_type]||o>i[a.content_type])&&(i[a.content_type]=o)}),{isInitialized:this.isInitialized,embeddingCounts:r,lastSyncTimes:i,totalEmbeddings:(t==null?void 0:t.length)||0}}catch(t){return console.error("❌ Failed to get sync status:",t),{isInitialized:!1,embeddingCounts:{},lastSyncTimes:{},totalEmbeddings:0}}}}hn(Vq,"syncListeners",[]),hn(Vq,"isInitialized",!1);class RL{static calculateBM25Scores(e,t){if(!t||t.length===0)return[];const r=this.tokenize(e);if(r.length===0)return t.map(l=>({docId:l.id,score:0,document:l}));const i=t.map(l=>({...l,tokens:this.tokenize(l.content),termFreqs:this.calculateTermFrequencies(this.tokenize(l.content))})),a=i.reduce((l,c)=>l+c.tokens.length,0)/i.length,o=this.calculateDocumentFrequencies(i,r);return i.map(l=>{let c=0;for(const u of r){const d=l.termFreqs[u]||0,h=o[u]||0;if(d>0&&h>0){const f=Math.log((t.length-h+.5)/(h+.5)),m=d*(this.K1+1),v=d+this.K1*(1-this.B+this.B*(l.tokens.length/a));c+=f*(m/v)}}return{docId:l.id,score:Math.max(0,c),document:l}}).sort((l,c)=>c.score-l.score)}static tokenize(e){return e?e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>=2).filter(t=>!this.isStopWord(t)):[]}static calculateTermFrequencies(e){const t={};for(const r of e)t[r]=(t[r]||0)+1;return t}static calculateDocumentFrequencies(e,t){const r={};for(const i of t){let a=0;for(const o of e)o.termFreqs[i]>0&&a++;r[i]=a}return r}static isStopWord(e){return new Set(["a","an","and","are","as","at","be","by","for","from","has","he","in","is","it","its","of","on","that","the","to","was","will","with","have","had","this","these","they","been","their","said","each","which","she","do","how","his","or","but","what","some","we","can","out","other","were","all","any","your","when","up","use","word","way","about","many","then","them","would","like","so","these","her","long","make","thing","see","him","two","more","go","no","way","could","my","than","first","water","been","call","who","oil","sit","now","find","down","day","did","get","come","made","may","part"]).has(e)}static calculateEnhancedBM25Scores(e,t,r={}){const{positionWeight:i=.1,proximityWeight:a=.1,titleBoost:o=1.5}=r,s=this.calculateBM25Scores(e,t),l=this.tokenize(e);return s.map(c=>{let u=c.score;const d=c.document,h=this.tokenize(d.content);for(const f of l){const m=h.indexOf(f);if(m!==-1){const v=i*(h.length-m)/h.length;u+=v}}if(l.length>1){const f=l.map(m=>h.indexOf(m)).filter(m=>m!==-1);if(f.length>1){const m=Math.max(...f)-Math.min(...f),v=a*Math.max(0,1-m/h.length);u+=v}}return d.content.length<100&&d.content.includes(":")&&(u*=o),{...c,score:u}})}}hn(RL,"K1",1.2),hn(RL,"B",.75);class pge{static fuseResults(e){const{vectorResults:t,keywordResults:r,k:i=60,vectorWeight:a=1,keywordWeight:o=1}=e;console.log(`🔀 RRF: Fusing ${t.length} vector results + ${r.length} keyword results`);const s=new Map,l=new Map,c=new Map;t.forEach((h,f)=>{const m=this.extractDocumentId(h);s.set(m,{rank:f+1,score:h.score,document:h.document}),c.set(m,h.document)}),r.forEach((h,f)=>{const m=this.extractDocumentId(h);l.set(m,{rank:f+1,score:h.score,document:h.document}),c.set(m,h.document)});const u=[];for(const[h,f]of c){const m=s.get(h),v=l.get(h);let y=0;m&&(y+=a/(i+m.rank)),v&&(y+=o/(i+v.rank)),u.push({document:f,vectorScore:m==null?void 0:m.score,keywordScore:v==null?void 0:v.score,fusedScore:y,vectorRank:m==null?void 0:m.rank,keywordRank:v==null?void 0:v.rank,documentId:h})}const d=u.sort((h,f)=>f.fusedScore-h.fusedScore);return console.log(`✅ RRF: Generated ${d.length} fused results`),console.log(`📊 Top 3 RRF scores: ${d.slice(0,3).map(h=>h.fusedScore.toFixed(4)).join(", ")}`),d}static fuseResultsAdvanced(e){const{contentTypeBoosts:t={},recencyWeight:r=.1,diversityWeight:i=.1}=e,s=this.fuseResults(e).map(l=>{var h,f,m;let c=l.fusedScore;const u=l.document,d=u.content_type||((h=u.metadata)==null?void 0:h.contentType);if(d&&t[d]&&(c*=t[d]),u.created_at){const v=(Date.now()-new Date(u.created_at).getTime())/864e5,y=Math.exp(-v/30)*r;c+=y}return(m=(f=u.metadata)==null?void 0:f.analytics)!=null&&m.productivity&&(c+=u.metadata.analytics.productivity*.1),{...l,fusedScore:c}}).sort((l,c)=>c.fusedScore-l.fusedScore);return i>0?this.applyDiversityFiltering(s,i):s}static extractDocumentId(e){var t,r,i;return e.documentId||((t=e.document)==null?void 0:t.id)||((r=e.document)==null?void 0:r.document_id)||((i=e.document)==null?void 0:i.content)||`doc_${Math.random().toString(36).substr(2,9)}`}static applyDiversityFiltering(e,t){const r=new Map,i=[];e.forEach(c=>{var d,h,f;const u=((h=(d=c.document.metadata)==null?void 0:d.entities)==null?void 0:h.projectId)||((f=c.document.metadata)==null?void 0:f.projectId)||c.document.project_id;u?(r.has(u)||r.set(u,[]),r.get(u).push(c)):i.push(c)});const a=[],o=Math.max(2,Math.floor(e.length/Math.max(r.size,1))),s=Array.from(r.values());let l=Math.max(...s.map(c=>c.length),i.length);for(let c=0;c<l&&a.length<e.length;c++){for(const u of s)c<u.length&&a.length<e.length&&a.filter(h=>{var f,m,v,y;return((m=(f=h.document.metadata)==null?void 0:f.entities)==null?void 0:m.projectId)===((y=(v=u[0].document.metadata)==null?void 0:v.entities)==null?void 0:y.projectId)}).length<o&&a.push(u[c]);c<i.length&&a.length<e.length&&a.push(i[c])}return console.log(`🎯 Diversity filtering: ${r.size} projects, max ${o} per project`),a}static analyzeRRFEffectiveness(e){const t=e.filter(l=>l.vectorScore&&!l.keywordScore).length,r=e.filter(l=>l.keywordScore&&!l.vectorScore).length,i=e.filter(l=>l.vectorScore&&l.keywordScore).length,a=e.map(l=>l.fusedScore).sort((l,c)=>l-c),o=a[Math.floor(a.length/2)]||0,s=a.reduce((l,c)=>l+c,0)/a.length||0;return{totalResults:e.length,vectorOnlyResults:t,keywordOnlyResults:r,hybridResults:i,averageFusedScore:s,scoreDistribution:{min:a[0]||0,max:a[a.length-1]||0,median:o}}}}class IMt{static async rerankDocuments(e,t,r={}){const i=Date.now(),{model:a="hybrid",maxCandidates:o=50,minRelevanceScore:s=.1,contextWindow:l=512,diversityWeight:c=.1,recencyWeight:u=.05,contentTypeWeights:d={}}=r;if(console.log(`🔄 Starting re-ranking with ${a} strategy for ${t.length} documents`),t.length===0)return this.createEmptyResult(i);const h=t.slice(0,o);try{let f;switch(a){case"cross-encoder":f=await this.crossEncoderRerank(e,h,{contextWindow:l,minRelevanceScore:s});break;case"semantic-similarity":f=await this.semanticSimilarityRerank(e,h,{contextWindow:l,minRelevanceScore:s});break;case"hybrid":default:f=await this.hybridRerank(e,h,{contextWindow:l,minRelevanceScore:s,diversityWeight:c,recencyWeight:u,contentTypeWeights:d});break}const m=f.filter(w=>w.rerankScore>=s).sort((w,_)=>_.rerankScore-w.rerankScore).map((w,_)=>({...w,rank:_+1})),v=Date.now()-i,y=this.generateMetadata(h,m,v,a);return console.log(`✅ Re-ranking completed: ${m.length} results in ${v}ms`),console.log(`📊 Score distribution - High: ${y.scoreDistribution.high}, Medium: ${y.scoreDistribution.medium}, Low: ${y.scoreDistribution.low}`),{rerankedResults:m,metadata:y}}catch(f){return console.error("❌ Re-ranking failed:",f),this.createEmptyResult(i,f)}}static async crossEncoderRerank(e,t,r){console.log("🧠 Applying cross-encoder re-ranking");const i=[],a=this.extractKeyTerms(e);for(const o of t){const{document:s,score:l}=o,c=s.content||"",u=this.simulateCrossEncoderScore(e,c,a),d=this.calculateContextualRelevance(e,s),h=this.calculatePositionBonus(c,a),f=u*.6+d*.3+h*.1;i.push({document:s,originalScore:l,rerankScore:f,rank:0,confidence:Math.min(.95,u+.1),explanation:`Cross-encoder: ${u.toFixed(3)}, Context: ${d.toFixed(3)}, Position: ${h.toFixed(3)}`})}return i}static async semanticSimilarityRerank(e,t,r){console.log("🔍 Applying semantic similarity re-ranking");const i=[],a=await this.generateQueryRepresentation(e);for(const o of t){const{document:s,score:l}=o,c=this.calculateEnhancedSemanticScore(e,s,a),u=this.calculateCoherenceScore(s),d=this.calculateDiversityPenalty(s,i),h=c*u*(1-d);i.push({document:s,originalScore:l,rerankScore:h,rank:0,confidence:c,explanation:`Semantic: ${c.toFixed(3)}, Coherence: ${u.toFixed(3)}, Diversity: ${(1-d).toFixed(3)}`})}return i}static async hybridRerank(e,t,r){console.log("🔀 Applying hybrid re-ranking strategy");const i=[],a=this.extractKeyTerms(e),o=this.analyzeQueryIntent(e);for(const s of t){const{document:l,score:c}=s,u=this.calculateAdvancedSemanticScore(e,l),d=this.calculateLexicalOverlap(a,l.content||""),h=this.calculateStructuralRelevance(l,o),f=this.calculateFreshnessScore(l,r.recencyWeight),m=this.calculateContentTypeScore(l,r.contentTypeWeights),v=this.calculatePositionRelevance(l.content||"",a),y=u*.35+d*.25+h*.15+f*.1+m*.1+v*.05,w=Math.min(.95,(u+d)/2+.1);i.push({document:l,originalScore:c,rerankScore:y,rank:0,confidence:w,explanation:`Hybrid: Sem(${u.toFixed(2)}) + Lex(${d.toFixed(2)}) + Struct(${h.toFixed(2)}) + Fresh(${f.toFixed(2)}) + Type(${m.toFixed(2)})`})}return i}static simulateCrossEncoderScore(e,t,r){const i=e.toLowerCase(),a=t.toLowerCase(),o=a.includes(i)?1:0,l=r.filter(d=>a.includes(d.toLowerCase())).length/Math.max(r.length,1),c=r.some(d=>a.indexOf(d.toLowerCase())<100)?.2:0,u=Math.min(1,500/Math.max(t.length,100));return(o*.4+l*.4+c+u*.2)*.9}static calculateContextualRelevance(e,t){let r=.5;const i=t.metadata||{},a=t.content_type||"";if(e.toLowerCase().includes("project")&&a.includes("project")&&(r+=.3),e.toLowerCase().includes("task")&&a.includes("task")&&(r+=.3),e.toLowerCase().includes("summary")&&a.includes("summary")&&(r+=.2),i.created_at){const s=(Date.now()-new Date(i.created_at).getTime())/(1e3*60*60*24),l=Math.max(0,1-s/30);r+=l*.1}return Math.min(1,r)}static calculatePositionBonus(e,t){const r=e.toLowerCase();let i=0,a=0;for(const o of t){const s=r.indexOf(o.toLowerCase());if(s!==-1){const l=Math.max(0,1-s/Math.min(e.length,500));i+=l,a++}}return a>0?i/a:0}static extractKeyTerms(e){const t=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","how","what","when","where","why","who","which","many","much","some","any","all","my","me","i","you","he","she","it","we","they","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","tell","show","give","please"]);return e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(r=>r.length>2&&!t.has(r)).slice(0,10)}static async generateQueryRepresentation(e){return{terms:this.extractKeyTerms(e),intent:this.analyzeQueryIntent(e),complexity:e.split(/\s+/).length}}static analyzeQueryIntent(e){const t=e.toLowerCase();return t.includes("how many")||t.includes("count")||t.includes("number")?"quantitative":t.includes("what")||t.includes("which")||t.includes("show")?"informational":t.includes("why")||t.includes("how")||t.includes("explain")?"analytical":t.includes("status")||t.includes("progress")||t.includes("update")?"status":"general"}static calculateEnhancedSemanticScore(e,t,r){const i=t.content||"",a=this.extractKeyTerms(e),o=this.extractKeyTerms(i),s=a.filter(d=>o.includes(d)).length,l=new Set([...a,...o]).size,c=l>0?s/l:0,u=a.reduce((d,h)=>{const f=(i.toLowerCase().match(new RegExp(h.toLowerCase(),"g"))||[]).length;return d+Math.log(1+f)},0)/Math.max(a.length,1);return(c*.6+u*.4)*.8}static calculateCoherenceScore(e){const t=e.content||"",r=(t.match(/[.!?]+/g)||[]).length,i=t.split(/\s+/).length,a=r>0?i/r:0,o=a>0?Math.max(0,1-Math.abs(a-20)/20):.5,s=/[:\-\*\d+\.]/.test(t)?.1:0;return Math.min(1,o+s+.3)}static calculateDiversityPenalty(e,t){if(t.length===0)return 0;const r=e.content||"",i=e.content_type||"",a=t.filter(c=>c.document.content_type===i).length,o=Math.min(.3,a*.1),l=t.reduce((c,u)=>{const d=this.calculateSimpleSimilarity(r,u.document.content||"");return Math.max(c,d)},0)*.2;return Math.min(.5,o+l)}static calculateSimpleSimilarity(e,t){const r=new Set(e.toLowerCase().split(/\s+/)),i=new Set(t.toLowerCase().split(/\s+/)),a=new Set([...r].filter(s=>i.has(s))),o=new Set([...r,...i]);return o.size>0?a.size/o.size:0}static calculateAdvancedSemanticScore(e,t){const r=t.content||"",i=this.extractKeyTerms(e),a=this.calculateExactMatchScore(e,r),o=this.calculatePartialMatchScore(i,r),s=this.calculateSemanticProximity(i,r);return a*.5+o*.3+s*.2}static calculateLexicalOverlap(e,t){const r=t.toLowerCase(),a=e.filter(s=>r.includes(s.toLowerCase())).length/Math.max(e.length,1),o=this.findConsecutiveMatches(e,t)*.2;return Math.min(1,a+o)}static calculateStructuralRelevance(e,t){const r=e.content_type||"",i=e.metadata||{};let a=.5;switch(t){case"quantitative":(r==="monthly_summary"||r==="weekly_summary"||r==="daily_summary"||r==="task_aggregate")&&(a+=.3);break;case"informational":(r==="project_summary"||r==="task_aggregate")&&(a+=.3);break;case"analytical":(r==="task_sessions"||r==="task_aggregate"||r==="project_summary")&&(a+=.3);break;case"status":(r.includes("summary")||r==="task_aggregate")&&(a+=.3);break}return(i.entities||i.analytics)&&(a+=.1),Math.min(1,a)}static calculateFreshnessScore(e,t){var s;if(t===0)return .5;const r=e.created_at||((s=e.metadata)==null?void 0:s.created_at);if(!r)return .3;const a=(Date.now()-new Date(r).getTime())/(1e3*60*60*24);return Math.exp(-a/30)*t+(1-t)*.5}static calculateContentTypeScore(e,t){const r=e.content_type||"";for(const[i,a]of Object.entries(t))if(r.includes(i))return Math.min(1,a);return .5}static calculatePositionRelevance(e,t){const r=e.toLowerCase();let i=0,a=0;for(const o of t){const s=r.indexOf(o.toLowerCase());if(s!==-1){const l=s/Math.max(e.length,1),c=Math.max(0,1-l);i+=c,a++}}return a>0?i/a:0}static calculateExactMatchScore(e,t){const r=e.toLowerCase().trim(),i=t.toLowerCase();if(i.includes(r)){const a=i.indexOf(r);return .8+Math.max(0,1-a/Math.max(t.length,1))*.2}return 0}static calculatePartialMatchScore(e,t){const r=t.toLowerCase(),i=e.filter(s=>r.includes(s.toLowerCase()));if(i.length===0)return 0;const a=i.length/e.length,o=this.calculateTermDensity(i,t);return a*.7+o*.3}static calculateSemanticProximity(e,t){const r=t.toLowerCase().split(/\s+/);let i=0,a=0;for(let o=0;o<e.length;o++)for(let s=o+1;s<e.length;s++){const l=e[o].toLowerCase(),c=e[s].toLowerCase(),u=r.indexOf(l),d=r.indexOf(c);if(u!==-1&&d!==-1){const h=Math.abs(u-d),f=Math.max(0,1-h/20);i+=f,a++}}return a>0?i/a:0}static findConsecutiveMatches(e,t){const r=t.toLowerCase().split(/\s+/);let i=0;for(let a=0;a<=r.length-e.length;a++){let o=0;for(let s=0;s<e.length&&(a+s<r.length&&r[a+s].includes(e[s].toLowerCase()));s++)o++;i=Math.max(i,o)}return i/Math.max(e.length,1)}static calculateTermDensity(e,t){const r=t.split(/\s+/).length,i=e.reduce((a,o)=>{const s=t.toLowerCase().match(new RegExp(o.toLowerCase(),"g"));return a+(s?s.length:0)},0);return Math.min(1,i/Math.max(r,1))}static generateMetadata(e,t,r,i){const a={high:0,medium:0,low:0};let o=0;return t.forEach(s=>{o+=s.confidence,s.rerankScore>.8?a.high++:s.rerankScore>.4?a.medium++:a.low++}),{totalCandidates:e.length,rerankedResults:t.length,processingTime:r,strategy:i,averageConfidence:t.length>0?o/t.length:0,scoreDistribution:a}}static createEmptyResult(e,t){return{rerankedResults:[],metadata:{totalCandidates:0,rerankedResults:0,processingTime:Date.now()-e,strategy:"error",averageConfidence:0,scoreDistribution:{high:0,medium:0,low:0}}}}}class zq{static async performHybridSearch(e,t,r={}){const i=Date.now(),{vectorWeight:a=1,keywordWeight:o=1,rrfK:s=60,maxResults:l=20,minVectorSimilarity:c=.1,minKeywordScore:u=0,contentTypeBoosts:d={},chunkLevels:h=[],timeframe:f="all",projects:m=[],enableEnhancedBM25:v=!0,enableReranking:y=!1,rerankingModel:w="hybrid",rerankingCandidates:_=50,minRerankScore:S=.1,rerankingWeights:A={}}=r;console.log(`🔍 Starting hybrid search for: "${e}"`),console.log(`🎛️ Options: vector=${a}, keyword=${o}, k=${s}`);const C=this.detectProjectQuery(e);let D={...d};C&&(console.log("🎯 Detected PROJECT query - applying project content boosting"),D={...D,project:2,project_summary:1.8,task_aggregate:.6,task_sessions:.5,weekly_summary:1.2,monthly_summary:1.3});try{const M=await this.fetchCandidateDocuments(t,{chunkLevels:h,timeframe:f,projects:m});if(!M||M.length===0)return console.warn("⚠️ No candidate documents found for user"),this.createEmptyResult(i);console.log(`📚 Found ${M.length} candidate documents`);const P=await this.performVectorSearch(e,M,c),O=await this.performBM25Search(e,M,u,v);console.log(`🎯 Vector: ${P.length} results, Keyword: ${O.length} results`);const j=pge.fuseResultsAdvanced({vectorResults:P,keywordResults:O,k:s,vectorWeight:a,keywordWeight:o,contentTypeBoosts:D,recencyWeight:.1,diversityWeight:.1});let L=[],B=null,$;if(y&&j.length>0){console.log(`🔄 Re-ranking enabled with model: ${w}`);const W=j.slice(0,_).map(z=>({document:z.document,score:z.fusedScore})),X={model:w,maxCandidates:_,minRelevanceScore:S,contextWindow:512,diversityWeight:A.diversityWeight||.1,recencyWeight:A.recencyWeight||.05,contentTypeWeights:A.contentTypeWeights||D},{rerankedResults:te,metadata:re}=await IMt.rerankDocuments(e,W,X);L=te,B=re,L.length>0?($=L.slice(0,l).map((z,oe)=>{var le;return{documentId:z.document.id||`rerank_${oe}`,document:z.document,fusedScore:z.rerankScore,vectorScore:((le=W.find(ee=>ee.document.id===z.document.id))==null?void 0:le.score)||0,keywordScore:0,vectorRank:oe+1,keywordRank:oe+1}}),console.log(`✨ Re-ranking improved results: ${L.length} documents reordered`)):($=j.slice(0,l),console.log("⚠️ Re-ranking produced no results, falling back to RRF results"))}else $=j.slice(0,l),console.log("📋 Using RRF results without re-ranking");const Y=pge.analyzeRRFEffectiveness(j),q=Date.now()-i;return console.log(`✅ Hybrid search completed in ${q}ms`),console.log(`📊 Final results: ${$.length} documents`),{documents:$.map(W=>({...W.document,hybrid_score:W.fusedScore,vector_score:W.vectorScore,keyword_score:W.keywordScore,vector_rank:W.vectorRank,keyword_rank:W.keywordRank})),vectorResults:P,keywordResults:O,fusedResults:$,rerankedResults:y?L:void 0,metadata:{totalDocuments:M.length,vectorResultCount:P.length,keywordResultCount:O.length,hybridResultCount:$.length,rerankedResultCount:y?L.length:void 0,processingTime:q,searchStrategy:y?"hybrid_vector_bm25_rrf_reranked":"hybrid_vector_bm25_rrf",rrfAnalysis:Y,rerankingMetadata:y?B:void 0}}}catch(M){return console.error("❌ Hybrid search failed:",M),this.createEmptyResult(i,M)}}static detectProjectQuery(e){return[/\b(how\s+many\s+projects?|number\s+of\s+projects?|count\s+of\s+projects?)/i,/\b(tell\s+me.*projects?|projects?\s+i\s+have|projects?\s+do\s+i\s+have)/i,/\b(all\s+projects?|list\s+projects?|show\s+projects?)/i,/\b(projects?\s+(available|existing|current))/i,/\b(my\s+projects?|which\s+projects?)/i,/\b(project|projects)\s+(overview|status|summary|progress)/i,/\b(project\s+breakdown|project\s+analysis|across\s+projects)/i].some(r=>r.test(e))}static async fetchCandidateDocuments(e,t){let r=Dt.from("user_productivity_documents").select("*").eq("user_id",e);if(t.chunkLevels&&t.chunkLevels.length>0&&(r=r.in("metadata->chunkLevel",t.chunkLevels)),t.timeframe&&t.timeframe!=="all"){const o=this.getDateFilter(t.timeframe);r=r.gte("created_at",o)}t.projects&&t.projects.length>0&&(r=r.in("metadata->entities->projectId",t.projects));const{data:i,error:a}=await r.order("created_at",{ascending:!1}).limit(200);return a?(console.error("❌ Error fetching candidate documents:",a),[]):i||[]}static async performVectorSearch(e,t,r){try{const i=await $r.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)return console.warn("⚠️ Failed to generate query embedding"),[];console.log(`🧮 Generated query embedding: ${i.length} dimensions`);const a=[];for(const o of t){if(!o.embedding)continue;let s=o.embedding;if(typeof o.embedding=="string")try{s=JSON.parse(o.embedding)}catch{continue}if(!Array.isArray(s))continue;const l=this.calculateCosineSimilarity(i,s);l>=r&&a.push({document:o,score:l})}return a.sort((o,s)=>s.score-o.score),console.log(`🎯 Vector search: ${a.length} results above ${r} threshold`),a.length>0&&console.log(`📊 Top similarities: ${a.slice(0,3).map(o=>o.score.toFixed(3)).join(", ")}`),a}catch(i){return console.error("❌ Vector search failed:",i),[]}}static async performBM25Search(e,t,r,i){try{const a=t.map(l=>({id:l.id||l.document_id||`doc_${Math.random().toString(36).substr(2,9)}`,content:l.content||"",metadata:l.metadata})),s=(i?RL.calculateEnhancedBM25Scores(e,a,{positionWeight:.1,proximityWeight:.1,titleBoost:1.3}):RL.calculateBM25Scores(e,a)).filter(l=>l.score>=r).map(l=>({document:t.find(c=>(c.id||c.document_id)===l.docId||c.content===l.document.content)||l.document,score:l.score}));return console.log(`🔤 BM25 search: ${s.length} results above ${r} threshold`),s.length>0&&console.log(`📊 Top BM25 scores: ${s.slice(0,3).map(l=>l.score.toFixed(3)).join(", ")}`),s}catch(a){return console.error("❌ BM25 search failed:",a),[]}}static calculateCosineSimilarity(e,t){if(e.length!==t.length)return 0;let r=0,i=0,a=0;for(let s=0;s<e.length;s++)r+=e[s]*t[s],i+=e[s]*e[s],a+=t[s]*t[s];const o=Math.sqrt(i)*Math.sqrt(a);return o===0?0:r/o}static getDateFilter(e){const t=new Date;switch(e){case"today":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString();case"week":return new Date(t.getTime()-7*24*60*60*1e3).toISOString();case"month":return new Date(t.getTime()-30*24*60*60*1e3).toISOString();default:return new Date(0).toISOString()}}static createEmptyResult(e,t){return{documents:[],vectorResults:[],keywordResults:[],fusedResults:[],metadata:{totalDocuments:0,vectorResultCount:0,keywordResultCount:0,hybridResultCount:0,processingTime:Date.now()-e,searchStrategy:"hybrid_failed",rrfAnalysis:{totalResults:0,vectorOnlyResults:0,keywordOnlyResults:0,hybridResults:0,averageFusedScore:0,scoreDistribution:{min:0,max:0,median:0}}}}}static async testHybridSearch(e,t){var r,i,a;console.log(`🧪 Testing hybrid search for user: ${e}`);for(const o of t){console.log(`
🔍 Testing query: "${o}"`);const s=await this.performHybridSearch(o,e,{maxResults:5,enableEnhancedBM25:!0});if(console.log(`📊 Results: ${s.documents.length} documents`),console.log(`🎯 Vector: ${s.metadata.vectorResultCount}, Keyword: ${s.metadata.keywordResultCount}`),console.log(`⚡ Processing time: ${s.metadata.processingTime}ms`),s.documents.length>0){const l=s.documents[0];console.log(`🏆 Top result: hybrid=${(r=l.hybrid_score)==null?void 0:r.toFixed(3)}, vector=${(i=l.vector_score)==null?void 0:i.toFixed(3)}, keyword=${(a=l.keyword_score)==null?void 0:a.toFixed(3)}`)}}}}const MMt=Object.freeze(Object.defineProperty({__proto__:null,HybridSearchService:zq},Symbol.toStringTag,{value:"Module"})),PMt=({userId:n})=>{const[e,t]=K.useState(""),[r,i]=K.useState(!1),[a,o]=K.useState(null),[s,l]=K.useState(null),c=["productivity today","tasks in progress","project status","deep focus sessions","time spent coding","meeting notes","completed tasks"],u=async()=>{if(e.trim()){i(!0),l(null);try{console.log(`🔍 Testing hybrid search: "${e}"`);const f=await zq.performHybridSearch(e,n,{maxResults:10,vectorWeight:1,keywordWeight:1,enableEnhancedBM25:!0,contentTypeBoosts:{task:1.2,project:1.1,session:1,daily_summary:1}});o(f),console.log("✅ Hybrid search result:",f)}catch(f){console.error("❌ Hybrid search test failed:",f),l(f instanceof Error?f.message:"Unknown error")}finally{i(!1)}}},d=f=>{t(f)},h=async()=>{console.log("🧪 Running all hybrid search tests...");for(const f of c){console.log(`
🔍 Testing: "${f}"`);try{const m=await zq.performHybridSearch(f,n,{maxResults:5,enableEnhancedBM25:!0});console.log(`✅ ${f}: ${m.documents.length} results in ${m.metadata.processingTime}ms`)}catch(m){console.error(`❌ ${f}: Failed -`,m)}}console.log("🏁 All tests completed")};return E.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🔍 Hybrid Search Tester"}),E.jsx("div",{className:"mb-4",children:E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",value:e,onChange:f=>t(f.target.value),placeholder:"Enter search query...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:f=>f.key==="Enter"&&u()}),E.jsx("button",{onClick:u,disabled:r||!e.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:r?"Searching...":"Search"})]})}),E.jsxs("div",{className:"mb-4",children:[E.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Quick test queries:"}),E.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(f=>E.jsx("button",{onClick:()=>d(f),className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm",children:f},f))})]}),E.jsx("div",{className:"mb-4",children:E.jsx("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"🧪 Run All Tests (Check Console)"})}),s&&E.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:E.jsxs("p",{className:"text-red-800 text-sm",children:["❌ Error: ",s]})}),a&&E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[E.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Search Metadata"}),E.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Processing Time:"})," ",a.metadata.processingTime,"ms"]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Strategy:"})," ",a.metadata.searchStrategy]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Vector Results:"})," ",a.metadata.vectorResultCount]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Keyword Results:"})," ",a.metadata.keywordResultCount]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Total Docs:"})," ",a.metadata.totalDocuments]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Final Results:"})," ",a.metadata.hybridResultCount]})]})]}),a.metadata.rrfAnalysis&&E.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[E.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"RRF Analysis"}),E.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Vector Only:"})," ",a.metadata.rrfAnalysis.vectorOnlyResults]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Keyword Only:"})," ",a.metadata.rrfAnalysis.keywordOnlyResults]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Hybrid:"})," ",a.metadata.rrfAnalysis.hybridResults]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium",children:"Avg Score:"})," ",a.metadata.rrfAnalysis.averageFusedScore.toFixed(4)]})]})]}),E.jsxs("div",{children:[E.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Results (",a.documents.length,")"]}),E.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.documents.map((f,m)=>{var v,y;return E.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[E.jsxs("div",{className:"flex justify-between items-start mb-2",children:[E.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.content_type||"Unknown Type"}),E.jsxs("div",{className:"text-xs text-gray-500 space-x-2",children:[f.hybrid_score&&E.jsxs("span",{children:["H: ",f.hybrid_score.toFixed(3)]}),f.vector_score&&E.jsxs("span",{children:["V: ",f.vector_score.toFixed(3)]}),f.keyword_score&&E.jsxs("span",{children:["K: ",f.keyword_score.toFixed(3)]})]})]}),E.jsxs("p",{className:"text-sm text-gray-700 line-clamp-3",children:[f.content.substring(0,200),f.content.length>200&&"..."]}),((y=(v=f.metadata)==null?void 0:v.entities)==null?void 0:y.projectId)&&E.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Project: ",f.metadata.entities.projectId]})]},f.id||m)})})]})]})]})},OMt=()=>{const[n,e]=K.useState(""),[t,r]=K.useState(null),[i,a]=K.useState(null),[o,s]=K.useState(!1),{user:l}=Rn(),c=["please tell me how many project i have","how many projects do i have","show me all my projects","what tasks are urgent","productivity summary this week","project status overview"],u=async()=>{if(n.trim()){s(!0);try{const h=qu.classifyQuery(n);if(r(h),l!=null&&l.uid)try{const f=await qu.selectBestContentTypesWithAI(n,l.uid);a(f)}catch(f){console.error("AI classification failed:",f),a({error:"AI classification unavailable"})}}catch(h){console.error("Classification failed:",h)}finally{s(!1)}}},d=h=>{e(h);const f=qu.classifyQuery(h);r(f),console.log(`🔍 Testing: "${h}":`,f)};return E.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[E.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🧠 Query Classification Tester"}),E.jsx("div",{className:"mb-4",children:E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",value:n,onChange:h=>e(h.target.value),placeholder:"Enter query to classify...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",onKeyPress:h=>h.key==="Enter"&&u()}),E.jsx("button",{onClick:u,disabled:o||!n.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Analyzing...":"Classify"})]})}),E.jsxs("div",{className:"mb-4",children:[E.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Quick test queries:"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:c.map(h=>E.jsxs("button",{onClick:()=>d(h),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm text-left",children:['"',h,'"']},h))})]}),t&&E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[E.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"📋 Rule-based Classification"}),E.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-900",children:[E.jsxs("div",{children:[E.jsx("span",{className:"font-medium text-blue-900",children:"Primary Intent:"}),E.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${t.primaryIntent==="project_focus"?"bg-green-100 text-green-800":t.primaryIntent==="task_priority"?"bg-blue-100 text-blue-800":t.primaryIntent==="summary_insights"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:t.primaryIntent})]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium text-blue-900",children:"Confidence:"})," ",E.jsxs("span",{className:"text-blue-900",children:[(t.confidence*100).toFixed(1),"%"]})]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium text-blue-900",children:"Strategy:"})," ",E.jsx("span",{className:"text-blue-900",children:t.mixingStrategy})]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium text-blue-900",children:"Secondary:"})," ",E.jsx("span",{className:"text-blue-900",children:t.secondaryIntents.join(", ")||"none"})]})]})]}),i&&E.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[E.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"🤖 AI-powered Content Type Selection"}),i.error?E.jsx("div",{className:"text-red-600 text-sm",children:i.error}):E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{children:[E.jsx("span",{className:"font-medium text-green-900",children:"Primary Types:"}),E.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:i.primaryTypes.map((h,f)=>E.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:h},f))})]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium text-green-900",children:"Secondary Types:"}),E.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:i.secondaryTypes.map((h,f)=>E.jsx("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded text-xs border border-green-200",children:h},f))})]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium text-green-900",children:"AI Confidence:"}),E.jsxs("span",{className:"ml-2 text-green-900",children:[i.confidence,"%"]})]}),E.jsxs("div",{children:[E.jsx("span",{className:"font-medium text-green-900",children:"Reasoning:"}),E.jsx("p",{className:"mt-1 text-sm text-green-800",children:i.reasoning})]})]})]}),!l&&E.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:E.jsxs("p",{className:"text-sm text-yellow-700",children:["💡 ",E.jsx("strong",{children:"Tip:"})," Log in to test AI-powered content type selection with your actual data chunks!"]})})]})]})},RMt=()=>{var $,Y,q,W,X,te,re,z,oe,le,ee,be;const{user:n}=Rn(),[e,t]=K.useState({status:"loading",message:"Checking sync status..."}),[r,i]=K.useState(!1),[a,o]=K.useState(!1),[s,l]=K.useState(!1),[c,u]=K.useState(!1),[d,h]=K.useState(null),[f,m]=K.useState(null),[v,y]=K.useState(!1),[w,_]=K.useState(null);K.useEffect(()=>{n!=null&&n.uid&&(S(),A())},[n]);const S=async()=>{if(n!=null&&n.uid)try{t({status:"loading",message:"Checking sync status..."});const he=await fge.quickHealthCheck(n.uid),pe=await CMt.testUserSync(n.uid);let ct,Be;he.status==="healthy"?(ct="success",Be=`✅ Sync healthy - ${he.embeddingCoverage}% coverage`):he.status==="warning"?(ct="warning",Be=`⚠️ Sync needs attention - ${he.embeddingCoverage}% coverage`):(ct="error",Be=`❌ ${he.message}`),t({status:ct,message:Be,lastSync:new Date,details:{healthCheck:he,testResult:pe}})}catch(he){console.error("Error checking sync status:",he),t({status:"error",message:`Failed to check sync status: ${he instanceof Error?he.message:"Unknown error"}`})}},A=async()=>{if(n!=null&&n.uid)try{const he=await Bq.isIncrementalSyncNeeded(n.uid);_(he)}catch(he){console.error("Error checking incremental sync status:",he),_(null)}},C=async()=>{try{u(!0),await DMt.createTables(),t({status:"success",message:"✅ Database tables initialized successfully",lastSync:new Date})}catch(he){console.error("Error initializing tables:",he),t({status:"error",message:`Failed to initialize tables: ${he instanceof Error?he.message:"Unknown error"}`})}finally{u(!1)}},D=async()=>{if(n!=null&&n.uid)try{l(!0),h({current:0,total:100,status:"Running incremental sync..."});const he=await Bq.executeIncrementalSync(n.uid);he.success?t({status:"success",message:`✅ Incremental sync complete: ${he.processedDocuments} processed, ${he.skippedDocuments} skipped`,lastSync:new Date,details:he}):t({status:"warning",message:`⚠️ Incremental sync completed with ${he.errors.length} errors`,lastSync:new Date,details:he}),setTimeout(()=>{S(),A()},1e3)}catch(he){console.error("Error running incremental sync:",he),t({status:"error",message:`Incremental sync failed: ${he instanceof Error?he.message:"Unknown error"}`})}finally{l(!1),h(null)}},M=async()=>{if(n!=null&&n.uid)try{i(!0),h({current:0,total:100,status:"Starting comprehensive sync..."});const he=await OL.syncAllUserData(n.uid,pe=>h(pe));he.errors.length>0?t({status:"warning",message:`Sync completed with ${he.errors.length} errors`,lastSync:new Date,details:he}):t({status:"success",message:`✅ Successfully synced ${he.synced} documents`,lastSync:new Date,details:he}),setTimeout(()=>{S(),A()},1e3)}catch(he){console.error("Error running comprehensive sync:",he),t({status:"error",message:`Sync failed: ${he instanceof Error?he.message:"Unknown error"}`})}finally{i(!1),h(null)}},P=async()=>{if(n!=null&&n.uid)try{o(!0),h({current:0,total:100,status:"Generating missing embeddings..."});const he=await OL.generateMissingEmbeddings(n.uid,pe=>h(pe));t({status:"success",message:`✅ Generated embeddings for ${he} documents`,lastSync:new Date}),setTimeout(()=>{S(),A()},1e3)}catch(he){console.error("Error generating embeddings:",he),t({status:"error",message:`Embedding generation failed: ${he instanceof Error?he.message:"Unknown error"}`})}finally{o(!1),h(null)}},O=async()=>{if(n!=null&&n.uid)try{const he=await fge.generateComprehensiveReport(n.uid);m(he),y(!0)}catch(he){console.error("Error generating report:",he),alert(`Failed to generate report: ${he instanceof Error?he.message:"Unknown error"}`)}},j=async()=>{if(n!=null&&n.uid)try{Uq.stopSync(),Vq.stopSync(),t({status:"success",message:`✅ All sync listeners stopped (${Uq.getActiveListenerCount()} active)`,lastSync:new Date})}catch(he){console.error("Error stopping all sync listeners:",he),t({status:"error",message:`Failed to stop all sync listeners: ${he instanceof Error?he.message:"Unknown error"}`})}},L=()=>{switch(e.status){case"loading":return E.jsx(Lz,{className:"w-5 h-5 text-gray-500 animate-spin"});case"success":return E.jsx(MO,{className:"w-5 h-5 text-green-500"});case"warning":return E.jsx(qye,{className:"w-5 h-5 text-yellow-500"});case"error":return E.jsx(IR,{className:"w-5 h-5 text-red-500"})}},B=()=>{switch(e.status){case"loading":return"border-gray-300 bg-gray-50";case"success":return"border-green-300 bg-green-50";case"warning":return"border-yellow-300 bg-yellow-50";case"error":return"border-red-300 bg-red-50"}};return n?E.jsxs("div",{className:"space-y-6 w-full mx-auto px-4 py-6",children:[E.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Data Sync Dashboard"}),E.jsx("p",{className:"text-gray-500 mt-1",children:"Monitor and manage Firebase to Supabase data synchronization"})]}),E.jsxs("button",{onClick:S,disabled:e.status==="loading",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[E.jsx(Lz,{className:`w-4 h-4 ${e.status==="loading"?"animate-spin":""}`}),E.jsx("span",{children:"Refresh"})]})]})}),E.jsx("div",{className:`border rounded-lg p-6 ${B()}`,children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[L(),E.jsxs("div",{children:[E.jsx("h3",{className:"font-medium text-gray-900",children:"Sync Status"}),E.jsx("p",{className:"text-sm text-gray-600",children:e.message}),e.lastSync&&E.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last checked: ",e.lastSync.toLocaleString()]})]})]}),e.details&&E.jsx("div",{className:"text-right",children:E.jsxs("div",{className:"text-sm text-gray-600",children:[E.jsxs("div",{children:["Firebase: ",($=e.details.testResult)!=null&&$.firebaseData?Object.values(e.details.testResult.firebaseData).reduce((he,pe)=>he+(typeof pe=="number"?pe:0),0):0," items"]}),E.jsxs("div",{children:["Supabase: ",((q=(Y=e.details.testResult)==null?void 0:Y.supabaseData)==null?void 0:q.documents)||0," docs"]}),E.jsxs("div",{children:["With embeddings: ",((X=(W=e.details.testResult)==null?void 0:W.supabaseData)==null?void 0:X.withEmbeddings)||0]})]})})]})}),d&&E.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("h3",{className:"font-medium text-gray-900",children:"Sync Progress"}),E.jsxs("span",{className:"text-sm text-gray-500",children:[d.current,"/",d.total]})]}),E.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:E.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${d.current/d.total*100}%`}})}),E.jsx("p",{className:"text-sm text-gray-600",children:d.status})]}),w&&E.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Incremental Sync"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Only sync updated documents to reduce costs"})]}),E.jsx("div",{className:"text-right",children:E.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w.needed?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:w.needed?`${w.pendingChanges} pending`:"Up to date"})})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Last Sync:"}),E.jsx("div",{className:"font-medium",children:w.lastSyncTime?w.lastSyncTime.toLocaleString():"Never"})]}),E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Pending Changes:"}),E.jsx("div",{className:"font-medium",children:w.pendingChanges>=0?w.pendingChanges:"Unknown"})]}),E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Status:"}),E.jsx("div",{className:"font-medium",children:w.needed?"Sync needed":"Up to date"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[E.jsxs("button",{onClick:D,disabled:s||r||a,className:`flex items-center justify-center space-x-2 p-4 rounded-lg disabled:opacity-50 ${w!=null&&w.needed?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:[E.jsx(Gye,{className:"w-5 h-5"}),E.jsx("span",{children:s?"Syncing...":"Smart Sync"})]}),E.jsxs("button",{onClick:M,disabled:r||a||s,className:"flex items-center justify-center space-x-2 p-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[E.jsx(Nz,{className:"w-5 h-5"}),E.jsx("span",{children:r?"Syncing...":"Full Sync"})]}),E.jsxs("button",{onClick:P,disabled:r||a||s,className:"flex items-center justify-center space-x-2 p-4 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[E.jsx(P3e,{className:"w-5 h-5"}),E.jsx("span",{children:a?"Generating...":"Fix Embeddings"})]}),E.jsxs("button",{onClick:O,disabled:r||a||s,className:"flex items-center justify-center space-x-2 p-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[E.jsx(B$e,{className:"w-5 h-5"}),E.jsx("span",{children:"Full Report"})]}),E.jsxs("button",{onClick:j,className:"flex items-center justify-center space-x-2 p-4 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[E.jsx(IR,{className:"w-5 h-5"}),E.jsx("span",{children:"Stop Sync"})]})]}),E.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Database Setup"}),E.jsx("p",{className:"text-sm text-gray-500",children:"Initialize required tables for incremental sync"})]}),E.jsxs("button",{onClick:C,disabled:c,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[E.jsx(Nz,{className:`w-4 h-4 ${c?"animate-pulse":""}`}),E.jsx("span",{children:c?"Initializing...":"Setup Tables"})]})]})}),E.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow p-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"🚀 Query Enhancement System"}),E.jsx("p",{className:"text-sm text-purple-700",children:"HyDE + Multi-Query + Re-ranking Active"})]}),E.jsx("div",{className:"flex items-center space-x-2",children:E.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✓ PHASE 5 COMPLETE"})})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("span",{className:"text-green-600",children:"✓"}),E.jsx("span",{className:"text-purple-800",children:"HyDE (Hypothetical Document Embeddings)"})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("span",{className:"text-green-600",children:"✓"}),E.jsx("span",{className:"text-purple-800",children:"Multi-Query Decomposition"})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("span",{className:"text-green-600",children:"✓"}),E.jsx("span",{className:"text-purple-800",children:"Intelligent Strategy Selection"})]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("span",{className:"text-green-600",children:"✓"}),E.jsx("span",{className:"text-purple-800",children:"Hybrid Search Integration"})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("span",{className:"text-green-600",children:"✓"}),E.jsx("span",{className:"text-purple-800",children:"Re-ranking Enhancement"})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("span",{className:"text-green-600",children:"✓"}),E.jsx("span",{className:"text-purple-800",children:"Performance Optimization"})]})]})]}),E.jsx("div",{className:"mt-4 p-3 bg-white bg-opacity-70 rounded",children:E.jsxs("p",{className:"text-sm text-purple-700",children:[E.jsx("strong",{children:"Expected Performance:"})," 70-90% overall precision improvement",E.jsx("br",{}),E.jsx("strong",{children:"Recommended Test Queries:"}),' "How productive was I last week?", "Which tasks need attention?", "Show me my project insights"']})})]}),((te=e.details)==null?void 0:te.testResult)&&E.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Stats"}),E.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((re=e.details.testResult.firebaseData)==null?void 0:re.tasks)||0}),E.jsx("div",{className:"text-sm text-gray-500",children:"Tasks"})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-green-600",children:((z=e.details.testResult.firebaseData)==null?void 0:z.projects)||0}),E.jsx("div",{className:"text-sm text-gray-500",children:"Projects"})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((oe=e.details.testResult.firebaseData)==null?void 0:oe.workSessions)||0}),E.jsx("div",{className:"text-sm text-gray-500",children:"Sessions"})]}),E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:((le=e.details.testResult.supabaseData)==null?void 0:le.withEmbeddings)||0}),E.jsx("div",{className:"text-sm text-gray-500",children:"With Embeddings"})]})]})]}),((be=(ee=e.details)==null?void 0:ee.testResult)==null?void 0:be.recommendations)&&E.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recommendations"}),E.jsx("div",{className:"space-y-2",children:e.details.testResult.recommendations.map((he,pe)=>E.jsxs("div",{className:"flex items-start space-x-2",children:[E.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),E.jsx("p",{className:"text-sm text-gray-700",children:he})]},pe))})]}),v&&f&&E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] overflow-y-auto",children:[E.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between",children:[E.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Comprehensive Data Report"}),E.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),E.jsxs("div",{className:"p-6 space-y-6",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Summary"}),E.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[E.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[E.jsx("div",{className:"text-sm text-gray-500",children:"Firebase Items"}),E.jsx("div",{className:"text-xl font-bold",children:f.summary.totalFirebaseItems})]}),E.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[E.jsx("div",{className:"text-sm text-gray-500",children:"Supabase Docs"}),E.jsx("div",{className:"text-xl font-bold",children:f.summary.totalSupabaseDocuments})]}),E.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[E.jsx("div",{className:"text-sm text-gray-500",children:"Embedding Coverage"}),E.jsxs("div",{className:"text-xl font-bold",children:[f.summary.embeddingCoverage,"%"]})]}),E.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[E.jsx("div",{className:"text-sm text-gray-500",children:"Health"}),E.jsx("div",{className:`text-xl font-bold ${f.summary.syncHealth==="excellent"?"text-green-600":f.summary.syncHealth==="good"?"text-blue-600":f.summary.syncHealth==="poor"?"text-yellow-600":"text-red-600"}`,children:f.summary.syncHealth})]})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Recommendations"}),E.jsx("div",{className:"space-y-2",children:f.analysis.recommendations.map((he,pe)=>E.jsxs("div",{className:"flex items-start space-x-2",children:[E.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),E.jsx("p",{className:"text-sm text-gray-700",children:he})]},pe))})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Technical Details"}),E.jsx("div",{className:"bg-gray-50 p-4 rounded",children:E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Average Document Size:"}),E.jsxs("span",{className:"ml-2 font-medium",children:[f.technicalDetails.avgDocumentSize," chars"]})]}),E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Duplicate Risk:"}),E.jsx("span",{className:"ml-2 font-medium",children:f.technicalDetails.duplicateRisk})]}),f.technicalDetails.oldestDocument&&E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Oldest Document:"}),E.jsx("span",{className:"ml-2 font-medium",children:new Date(f.technicalDetails.oldestDocument).toLocaleDateString()})]}),f.technicalDetails.newestDocument&&E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Newest Document:"}),E.jsx("span",{className:"ml-2 font-medium",children:new Date(f.technicalDetails.newestDocument).toLocaleDateString()})]})]})})]})]})]})}),E.jsx(OMt,{}),(n==null?void 0:n.uid)&&E.jsx(PMt,{userId:n.uid}),(n==null?void 0:n.uid)&&E.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-6",children:[E.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"🔄 Re-ranking Performance Test"}),E.jsx("div",{className:"text-sm text-gray-500",children:"Test re-ranking improvements vs baseline"})]}),E.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[E.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"✅ Re-ranking is Now Active"}),E.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[E.jsx("div",{children:"• Re-ranking is automatically enabled in Enhanced RAG Service"}),E.jsx("div",{children:"• Uses Hybrid re-ranking model for optimal results"}),E.jsx("div",{children:"• Expected improvements: 20-40% relevance boost"}),E.jsx("div",{children:"• Test directly in the chat interface for real results"})]})]}),E.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[E.jsx("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"🎯 Test These Queries in Chat"}),E.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[E.jsx("div",{children:'• "How many projects do I have?"'}),E.jsx("div",{children:'• "What tasks am I working on?"'}),E.jsx("div",{children:'• "Show me my productivity summary"'}),E.jsx("div",{children:'• "Tell me about my recent work sessions"'})]})]})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:[E.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[E.jsx("span",{className:"bg-purple-500 text-white text-xs px-2 py-1 rounded mr-3",children:"PHASE 6"}),"🎯 Advanced Prompt Engineering System"]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm text-gray-600",children:"Chain-of-Thought Reasoning"}),E.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm text-gray-600",children:"Dynamic Persona Selection"}),E.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm text-gray-600",children:"Response Validation"}),E.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm text-gray-600",children:"Self-Correction System"}),E.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm text-gray-600",children:"Few-Shot Learning"}),E.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{className:"text-sm text-gray-600",children:"Expert Personas (5)"}),E.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:"📊 READY"})]})]})]}),E.jsxs("div",{className:"bg-purple-50 p-4 rounded mb-4",children:[E.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Available Expert Personas:"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-purple-700",children:[E.jsx("div",{children:"• Senior Productivity Coach"}),E.jsx("div",{children:"• Senior Data Analyst"}),E.jsx("div",{children:"• Agile Project Manager"}),E.jsx("div",{children:"• Time Management Specialist"}),E.jsx("div",{children:"• Productivity Assistant"})]})]}),E.jsxs("div",{className:"bg-gray-50 p-4 rounded mb-4",children:[E.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Performance Impact:"}),E.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[E.jsxs("div",{children:["• ",E.jsx("strong",{children:"Response Quality:"})," 85-95% improvement with advanced techniques"]}),E.jsxs("div",{children:["• ",E.jsx("strong",{children:"Reasoning Transparency:"})," Step-by-step analytical process"]}),E.jsxs("div",{children:["• ",E.jsx("strong",{children:"Domain Expertise:"})," Specialized knowledge application"]}),E.jsxs("div",{children:["• ",E.jsx("strong",{children:"Self-Validation:"})," Automatic quality assurance and correction"]})]})]}),E.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[E.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Test Advanced Prompting:"}),E.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[E.jsxs("div",{children:["Try: ",E.jsx("em",{children:'"Analyze my productivity patterns and provide strategic insights"'})]}),E.jsxs("div",{children:["Try: ",E.jsx("em",{children:'"What should I work on next and why, considering all my projects?"'})]}),E.jsxs("div",{children:["Try: ",E.jsx("em",{children:'"Compare my morning vs afternoon productivity trends"'})]})]})]})]})]}):E.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:E.jsxs("div",{className:"text-center",children:[E.jsx(W$e,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Login Required"}),E.jsx("p",{className:"text-gray-500",children:"Please log in to view data sync dashboard"})]})})};class EC{static async executeCompleteSync(e){const t=Date.now();console.log(`🚀 Starting advanced multi-level sync for user: ${e}`);try{await this.clearExistingChunks(e);const r=await qS.processAndStoreChunks(e),i=await this.analyzeChunkDistribution(e),a=Date.now()-t;return console.log(`✅ Advanced sync complete: ${r.chunksProcessed} chunks in ${a}ms`),{success:r.success,totalChunks:r.chunksProcessed,chunksByLevel:i,processingTime:a,errors:r.errors}}catch(r){return console.error("❌ Advanced sync failed:",r),{success:!1,totalChunks:0,chunksByLevel:{},processingTime:Date.now()-t,errors:[r instanceof Error?r.message:"Unknown error"]}}}static async executeWeeklySync(e){const t=Date.now();console.log(`🚀 Starting weekly summary sync for user: ${e}`);try{await this.clearExistingWeeklySummaries(e);const i=(await Fq.createMultiLevelChunks(e)).filter(l=>{var c;return l.content_type==="weekly_summary"||l.metadata.chunkType==="temporal_pattern"&&((c=l.metadata.timeframe)==null?void 0:c.startsWith("weekly_"))});let a=0;const o=[];for(const l of i)try{await qS.storeChunkWithEmbedding(l,e),a++}catch(c){console.error("Failed to store weekly chunk:",c),o.push(c instanceof Error?c.message:"Unknown error")}const s=Date.now()-t;return console.log(`✅ Weekly sync complete: ${a} chunks in ${s}ms`),{success:o.length===0,totalChunks:a,chunksByLevel:{2:a},processingTime:s,errors:o}}catch(r){return console.error("❌ Weekly sync failed:",r),{success:!1,totalChunks:0,chunksByLevel:{},processingTime:Date.now()-t,errors:[r instanceof Error?r.message:"Unknown error"]}}}static async executeMonthlySync(e){const t=Date.now();console.log(`🚀 Starting monthly summary sync for user: ${e}`);try{await this.clearExistingMonthlySummaries(e);const i=(await Fq.createMultiLevelChunks(e)).filter(l=>{var c;return l.content_type==="monthly_summary"||l.metadata.chunkType==="temporal_pattern"&&((c=l.metadata.timeframe)==null?void 0:c.startsWith("monthly_"))});let a=0;const o=[];for(const l of i)try{await qS.storeChunkWithEmbedding(l,e),a++}catch(c){console.error("Failed to store monthly chunk:",c),o.push(c instanceof Error?c.message:"Unknown error")}const s=Date.now()-t;return console.log(`✅ Monthly sync complete: ${a} chunks in ${s}ms`),{success:o.length===0,totalChunks:a,chunksByLevel:{5:a},processingTime:s,errors:o}}catch(r){return console.error("❌ Monthly sync failed:",r),{success:!1,totalChunks:0,chunksByLevel:{},processingTime:Date.now()-t,errors:[r instanceof Error?r.message:"Unknown error"]}}}static async clearExistingWeeklySummaries(e){if(!Dt){console.warn("⚠️ Supabase not configured, skipping weekly summaries cleanup");return}const{error:t}=await Dt.from("user_productivity_documents").delete().eq("user_id",e).or("content_type.eq.weekly_summary,metadata->>chunkType.eq.temporal_pattern,metadata->>timeframe.like.weekly_%");if(t)throw new Error(`Failed to clear existing weekly summaries: ${t.message}`)}static async clearExistingMonthlySummaries(e){if(!Dt){console.warn("⚠️ Supabase not configured, skipping monthly summaries cleanup");return}const{error:t}=await Dt.from("user_productivity_documents").delete().eq("user_id",e).or("content_type.eq.monthly_summary,metadata->>chunkType.eq.temporal_pattern,metadata->>timeframe.like.monthly_%");if(t)throw new Error(`Failed to clear existing monthly summaries: ${t.message}`)}static async clearExistingChunks(e){if(!Dt){console.warn("⚠️ Supabase not configured, skipping chunks cleanup");return}const{error:t}=await Dt.from("user_productivity_documents").delete().eq("user_id",e);if(t)throw new Error(`Failed to clear existing chunks: ${t.message}`)}static async analyzeChunkDistribution(e){if(!Dt)return console.warn("⚠️ Supabase not configured, returning empty distribution"),{};const{data:t,error:r}=await Dt.from("user_productivity_documents").select("metadata").eq("user_id",e);if(r)throw new Error(`Failed to analyze chunk distribution: ${r.message}`);const i={};return t.forEach(a=>{var s;const o=(s=a.metadata)==null?void 0:s.chunkLevel;o&&(i[o]=(i[o]||0)+1)}),i}static async testEnhancedRAG(e){const t=Date.now(),r=[],i=[];try{const a=["What did I work on this week?","Show me my most productive sessions","What projects am I behind on?","What are my work patterns?"];for(const o of a)try{const s=await qS.queryWithHybridSearch(o,e);i.push(s)}catch(s){r.push(`Query "${o}" failed: ${s instanceof Error?s.message:"Unknown error"}`)}return{success:r.length===0,queryResults:i,processingTime:Date.now()-t,errors:r}}catch(a){return{success:!1,queryResults:[],processingTime:Date.now()-t,errors:[a instanceof Error?a.message:"Unknown error"]}}}static async migrateSyntheticChunks(e){try{if(!Dt)return console.warn("⚠️ Supabase not configured, skipping synthetic chunks migration"),{success:!1,removedChunks:0,errors:["Supabase not configured"]};const{data:t,error:r}=await Dt.from("user_productivity_documents").delete().eq("user_id",e).eq("content_type","synthetic_chunk").select();if(r)throw r;return{success:!0,removedChunks:(t==null?void 0:t.length)||0,errors:[]}}catch(t){return console.error("Migration failed:",t),{success:!1,removedChunks:0,errors:[t instanceof Error?t.message:"Unknown error"]}}}}const NMt=()=>{var L;const{user:n}=Rn(),[e,t]=K.useState(!1),[r,i]=K.useState(!1),[a,o]=K.useState(!1),[s,l]=K.useState(!1),[c,u]=K.useState(!1),[d,h]=K.useState(null),[f,m]=K.useState(null),[v,y]=K.useState(!1),[w,_]=K.useState(null),[S,A]=K.useState(null),C=async()=>{if(n!=null&&n.uid){t(!0),h(null);try{const B=await EC.executeCompleteSync(n.uid);h(B)}catch(B){console.error("Advanced sync failed:",B),h({success:!1,totalChunks:0,chunksByLevel:{},processingTime:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{t(!1)}}},D=async()=>{if(n!=null&&n.uid){o(!0),h(null);try{const B=await EC.executeWeeklySync(n.uid);h(B)}catch(B){console.error("Weekly sync failed:",B),h({success:!1,totalChunks:0,chunksByLevel:{},processingTime:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{o(!1)}}},M=async()=>{if(n!=null&&n.uid){l(!0),h(null);try{const B=await EC.executeMonthlySync(n.uid);h(B)}catch(B){console.error("Monthly sync failed:",B),h({success:!1,totalChunks:0,chunksByLevel:{},processingTime:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{l(!1)}}},P=async()=>{if(n!=null&&n.uid){i(!0),m(null);try{const B=await EC.testEnhancedRAG(n.uid);m(B)}catch(B){console.error("RAG testing failed:",B)}finally{i(!1)}}},O=async()=>{if(n!=null&&n.uid){y(!0),_(null);try{const B=await EC.migrateSyntheticChunks(n.uid);_(B)}catch(B){console.error("Migration failed:",B),_({success:!1,removedChunks:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{y(!1)}}},j=async()=>{if(n!=null&&n.uid){u(!0),A(null);try{const B=await Bq.executeProjectSync(n.uid);A(B)}catch(B){console.error("Project sync failed:",B),A({success:!1,processedDocuments:0,skippedDocuments:0,errors:[B instanceof Error?B.message:"Unknown error"],executionTime:0,collections:{tasks:0,projects:0,workSessions:0}})}finally{u(!1)}}};return E.jsx("div",{className:"space-y-6",children:E.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[E.jsxs("div",{className:"flex flex-wrap gap-4",children:[E.jsx("button",{onClick:C,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:E.jsx("span",{children:e?"Running Full Sync...":"Run Full Sync"})}),E.jsx("button",{onClick:D,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:E.jsx("span",{children:a?"Syncing Weekly Summary...":"Sync Weekly Summary"})}),E.jsx("button",{onClick:M,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50",children:E.jsx("span",{children:s?"Syncing Monthly Summary...":"Sync Monthly Summary"})}),E.jsx("button",{onClick:P,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:E.jsx("span",{children:r?"Testing...":"Test RAG"})}),E.jsx("button",{onClick:O,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:E.jsx("span",{children:v?"Migrating...":"Run Migration"})}),E.jsx("button",{onClick:j,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 disabled:opacity-50",children:E.jsx("span",{children:c?"Syncing Projects...":"Sync Project Chunks"})})]}),d&&E.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a?"Weekly Summary Sync Results":s?"Monthly Summary Sync Results":"Sync Results"}),E.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[E.jsxs("p",{children:["Status: ",d.success?"✅ Success":"❌ Failed"]}),E.jsxs("p",{children:["Total Chunks: ",d.totalChunks]}),E.jsxs("p",{children:["Processing Time: ",d.processingTime,"ms"]}),d.errors.length>0&&E.jsxs("div",{className:"text-red-600",children:[E.jsx("p",{children:"Errors:"}),E.jsx("ul",{className:"list-disc list-inside",children:d.errors.map((B,$)=>E.jsx("li",{children:B},$))})]})]})]}),f&&E.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"RAG Test Results"}),E.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[E.jsxs("p",{children:["Status: ",f.success?"✅ Success":"❌ Failed"]}),E.jsxs("p",{children:["Processing Time: ",f.processingTime,"ms"]}),E.jsxs("p",{children:["Results Found: ",f.queryResults.length]}),f.errors.length>0&&E.jsxs("div",{className:"text-red-600",children:[E.jsx("p",{children:"Errors:"}),E.jsx("ul",{className:"list-disc list-inside",children:f.errors.map((B,$)=>E.jsx("li",{children:B},$))})]})]})]}),w&&E.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Migration Results"}),E.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[E.jsxs("p",{children:["Status: ",w.success?"✅ Success":"❌ Failed"]}),E.jsxs("p",{children:["Removed Chunks: ",w.removedChunks]}),((L=w.errors)==null?void 0:L.length)>0&&E.jsxs("div",{className:"text-red-600",children:[E.jsx("p",{children:"Errors:"}),E.jsx("ul",{className:"list-disc list-inside",children:w.errors.map((B,$)=>E.jsx("li",{children:B},$))})]})]})]}),S&&E.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Project Sync Results"}),E.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[E.jsxs("p",{children:["Status: ",S.success?"✅ Success":"❌ Failed"]}),E.jsxs("p",{children:["Processed Documents: ",S.processedDocuments]}),E.jsxs("p",{children:["Skipped Documents: ",S.skippedDocuments]}),E.jsxs("p",{children:["Execution Time: ",S.executionTime,"ms"]}),E.jsxs("p",{children:["Collections: Tasks - ",S.collections.tasks,", Projects - ",S.collections.projects,", Work Sessions - ",S.collections.workSessions]}),S.errors.length>0&&E.jsxs("div",{className:"text-red-600",children:[E.jsx("p",{children:"Errors:"}),E.jsx("ul",{className:"list-disc list-inside",children:S.errors.map((B,$)=>E.jsx("li",{children:B},$))})]})]})]})]})})},LMt=()=>{const[n,e]=K.useState("standard");return E.jsx("div",{className:"w-full bg-gray-50 py-8",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"mb-8",children:[E.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Data Synchronization"}),E.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your Firebase to Supabase data sync and monitor AI embedding generation."})]}),E.jsx("div",{className:"mb-6",children:E.jsx("div",{className:"border-b border-gray-200",children:E.jsxs("nav",{className:"-mb-px flex space-x-8",children:[E.jsx("button",{onClick:()=>e("standard"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="standard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Hye,{className:"w-4 h-4"}),"Standard Sync"]})}),E.jsx("button",{onClick:()=>e("advanced"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="advanced"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Gye,{className:"w-4 h-4"}),"Advanced Multi-Level Sync",E.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full ml-1",children:"NEW"})]})})]})})}),n==="standard"&&E.jsx(RMt,{}),n==="advanced"&&E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:E.jsxs("div",{className:"flex items-start space-x-3",children:[E.jsx("div",{className:"text-green-600 mt-1",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"🤖 Chat Interface Enhanced!"}),E.jsxs("div",{className:"text-green-700 space-y-1 text-sm",children:[E.jsx("p",{children:"✅ Fixed white text visibility issue - now using black text"}),E.jsx("p",{children:"✅ Enhanced RAG search with multiple fallback strategies"}),E.jsx("p",{children:"✅ Better query analysis for optimal chunk level selection"}),E.jsx("p",{children:"✅ Improved ranking algorithm for diverse, relevant responses"}),E.jsx("p",{children:"✅ Updated suggested queries for better user engagement"})]}),E.jsxs("div",{className:"mt-3 p-3 bg-green-100 rounded text-sm text-green-800",children:[E.jsx("strong",{children:"Try the chat button (bottom right) with these improved queries:"}),E.jsxs("ul",{className:"mt-1 space-y-1 ml-4",children:[E.jsx("li",{children:'• "What tasks are in my Learn React project?"'}),E.jsx("li",{children:'• "Show me my recent work sessions"'}),E.jsx("li",{children:'• "How productive was I this week?"'}),E.jsx("li",{children:'• "What are my completed tasks today?"'})]})]})]})]})}),E.jsx(NMt,{})]})]})})};class Hq{static initialize(){this.unsubscribeUserStore&&this.unsubscribeUserStore(),console.log("🤖 Initializing chat integration service...");let e=Rn.getState().user;this.unsubscribeUserStore=Rn.subscribe(t=>{const r=t.user,i=Gke.getState();r&&r.uid?(console.log("🤖 User authenticated, initializing chat store for:",r.uid),i._userId!==r.uid&&i._setUserId(r.uid)):e&&!r&&(console.log("🤖 User logged out, resetting chat store"),i._reset()),e=r})}static cleanup(){this.unsubscribeUserStore&&(this.unsubscribeUserStore(),this.unsubscribeUserStore=null),console.log("🤖 Chat integration service cleaned up")}static getCurrentUserContext(){const e=Rn.getState();return e.user?{userId:e.user.uid,userName:e.user.userName||"User",isAuthenticated:e.isAuthenticated}:null}static isChatAvailable(){const e=Rn.getState();return e.isAuthenticated&&!!e.user}}hn(Hq,"unsubscribeUserStore",null);const GS={testSessionCreationLocking:async n=>{console.log("🧪 Testing session creation locking...");try{const e=[$o.startSession(n),$o.startSession(n),$o.startSession(n)],t=await Promise.all(e);return new Set(t).size===1?(console.log("✅ Session creation locking works - all calls returned same session ID:",t[0]),{success:!0,sessionId:t[0]}):(console.error("❌ Session creation locking failed - multiple session IDs created:",t),{success:!1,sessionIds:t})}catch(e){return console.error("❌ Session creation locking test failed:",e),{success:!1,error:e}}},testExtensionMessageDeduplication:()=>{console.log("🧪 Testing extension message deduplication...");let n=0;const e=window.dispatchEvent;window.dispatchEvent=function(t){return t instanceof CustomEvent&&t.type==="extensionFocusHandled"&&(n++,console.log(`📥 Extension focus handled event #${n}`)),e.call(this,t)};try{const t=Date.now(),r={type:"EXTENSION_FOCUS_STATE_CHANGED",payload:{isActive:!0,isVisible:!0,isFocused:!0,blockedSites:[],timestamp:t,messageId:`test-extension_true_${t}`},source:"test-extension",extensionId:"test-extension"};for(let i=0;i<5;i++)window.postMessage(r,"*");setTimeout(()=>{n<=1?console.log("✅ Extension message deduplication works - only",n,"message(s) processed"):console.error("❌ Extension message deduplication failed - processed",n,"messages"),window.dispatchEvent=e},1e3)}catch(t){console.error("❌ Extension message deduplication test failed:",t),window.dispatchEvent=e}},testSingleSessionFromExtension:async n=>{console.log("🧪 Testing single session creation from extension toggle...");try{await $o.cleanupOrphanedSessions(n);const t=(await $o.getUserSessions(n)).filter(o=>o.status==="active").length;console.log("📊 Initial active sessions:",t);const r=Date.now();window.postMessage({type:"EXTENSION_FOCUS_STATE_CHANGED",payload:{isActive:!0,isVisible:!0,isFocused:!0,blockedSites:["facebook.com","twitter.com"],targetUserId:n,timestamp:r,messageId:`test-extension_true_${r}`,source:"extension-content-script"},source:"test-extension",extensionId:"test-extension",messageTimestamp:r,messageSource:"focus-time-tracker-extension"},"*"),await new Promise(o=>setTimeout(o,2e3));const a=(await $o.getUserSessions(n)).filter(o=>o.status==="active").length;if(console.log("📊 Final active sessions:",a),a===t+1)return console.log("✅ Single session creation from extension works - exactly 1 new session created"),{success:!0,newSessionCount:1};{const o=a-t;return console.error("❌ Multiple sessions created from extension toggle:",o),{success:!1,newSessionCount:o}}}catch(e){return console.error("❌ Single session creation test failed:",e),{success:!1,error:e}}},testDisableFromExtension:()=>{console.log("🧪 Testing Deep Focus disable from extension...");try{Fr(async()=>{const{useDeepFocusStore:n}=await Promise.resolve().then(()=>met);return{useDeepFocusStore:n}},void 0).then(({useDeepFocusStore:n})=>{const e=n.getState();console.log("📊 Initial state:",{isDeepFocusActive:e.isDeepFocusActive,activeSessionId:e.activeSessionId}),console.log("📤 Simulating extension disable message..."),window.postMessage({type:"EXTENSION_FOCUS_STATE_CHANGED",payload:{isActive:!1,isVisible:!1,isFocused:!1,blockedSites:[],targetUserId:null,timestamp:Date.now(),messageId:`test-extension_false_${Date.now()}`,source:"extension-content-script"},source:"test-extension-id",extensionId:"test-extension-id",messageTimestamp:Date.now(),messageSource:"focus-time-tracker-extension"},"*"),setTimeout(()=>{const t=n.getState();console.log("📊 Final state:",{isDeepFocusActive:t.isDeepFocusActive,activeSessionId:t.activeSessionId}),t.isDeepFocusActive?console.error("❌ Deep Focus did not disable from extension message"):console.log("✅ Deep Focus disable from extension works correctly")},1e3)})}catch(n){console.error("❌ Deep Focus disable test failed:",n)}},runAllTests:async n=>{console.log("🔬 Running all Deep Focus duplicate session fixes tests..."),console.log("====================================="),await GS.testSessionCreationLocking(n),console.log("-------------------------------------"),GS.testExtensionMessageDeduplication(),console.log("-------------------------------------"),await GS.testSingleSessionFromExtension(n),console.log("-------------------------------------"),GS.testDisableFromExtension(),console.log("====================================="),console.log("📋 All tests completed. Check console for individual results.")}};window.testDeepFocusFixes=GS;Fr(()=>import("./cleanupSessions-DoS7Jx6X.js"),[]);const jMt=()=>{const n=pi(i=>i.isRunning),e=pi(i=>i.currentTime),t=pi(i=>i.currentTask),r=K.useRef("");return K.useEffect(()=>{r.current=document.title},[]),K.useEffect(()=>{if(n){const i=gG(e),a=t?t.title:"Focus Session";document.title=`${i} - ${a}`}else document.title=r.current;return()=>{document.title=r.current}},[n,e,t]),null},FMt=({children:n})=>{const e=vs(),{user:t}=Rn();return K.useEffect(()=>{const r=e.pathname==="/"?"home":e.pathname.replace("/","");Bye(r)},[e]),K.useEffect(()=>{t!=null&&t.uid&&m3e(t.uid)},[t]),E.jsx(E.Fragment,{children:n})},$Mt=()=>E.jsx("div",{className:"w-full max-w-7xl mx-auto px-6 py-8",children:E.jsxs("div",{className:"bg-background-primary rounded-lg border border-border p-8",children:[E.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-8",children:"Help & Support"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[E.jsxs("div",{className:"space-y-4",children:[E.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Documentation"}),E.jsx("div",{className:"space-y-3",children:E.jsxs("div",{className:"bg-background-secondary rounded-lg border border-border p-4",children:[E.jsx("h3",{className:"font-medium text-text-primary mb-2",children:"Privacy Policy"}),E.jsx("p",{className:"text-sm text-text-secondary",children:"Learn how we protect your data and privacy"})]})})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Contact Us"}),E.jsxs("div",{className:"bg-background-secondary rounded-lg border border-border p-4",children:[E.jsx("p",{className:"text-text-secondary mb-2",children:"For support, feedback, or questions about the Focus Time Tracker extension:"}),E.jsxs("p",{className:"text-text-primary",children:[E.jsx("strong",{children:"Email:"})," support@make10000hours.com"]})]})]})]}),E.jsxs("div",{className:"mt-8 pt-8 border-t border-border",children:[E.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-6",children:"Privacy Policy"}),E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:E.jsxs("p",{className:"text-sm text-blue-800 mb-2",children:[E.jsx("strong",{children:"Effective Date:"})," July 8, 2025"]})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Introduction"}),E.jsx("p",{className:"text-text-secondary mb-4",children:'Focus Time Tracker ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how our Chrome browser extension collects, uses, and protects your information when you use our productivity and focus tracking service.'})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Information We Collect"}),E.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[E.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Data Collected Locally"}),E.jsx("p",{className:"text-green-800 mb-3",children:"Our extension collects and stores the following information locally on your device:"}),E.jsxs("ul",{className:"list-disc list-inside text-green-800 space-y-1 text-sm",children:[E.jsxs("li",{children:[E.jsx("strong",{children:"Website URLs:"})," The web addresses of sites you visit for time tracking purposes"]}),E.jsxs("li",{children:[E.jsx("strong",{children:"Time Data:"})," Duration spent on each website and total browsing time"]}),E.jsxs("li",{children:[E.jsx("strong",{children:"User Activity:"})," Active/inactive status to ensure accurate time tracking"]}),E.jsxs("li",{children:[E.jsx("strong",{children:"Settings and Preferences:"})," Your configuration choices within the extension"]})]})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"How We Use Your Information"}),E.jsxs("ul",{className:"list-disc list-inside text-text-secondary space-y-1",children:[E.jsx("li",{children:"Track and display your website usage time"}),E.jsx("li",{children:"Provide productivity insights and analytics"}),E.jsx("li",{children:"Enable focus session management"}),E.jsx("li",{children:"Improve extension functionality and user experience"})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Data Storage and Security"}),E.jsx("p",{className:"text-text-secondary mb-4",children:"All data collected by our extension is stored locally on your device using Chrome's storage APIs. We implement industry-standard security measures to protect your information from unauthorized access, alteration, or disclosure."})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Your Rights"}),E.jsx("p",{className:"text-text-secondary mb-3",children:"You have the right to:"}),E.jsxs("ul",{className:"list-disc list-inside text-text-secondary space-y-1",children:[E.jsx("li",{children:"Access, modify, or delete your data through the extension settings"}),E.jsx("li",{children:"Disable or uninstall the extension at any time"}),E.jsx("li",{children:"Request information about your data usage"})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Contact Information"}),E.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[E.jsxs("p",{className:"text-text-secondary mb-2",children:[E.jsx("strong",{children:"Email:"})," support@make10000hours.com"]}),E.jsxs("p",{className:"text-text-secondary mb-2",children:[E.jsx("strong",{children:"Website:"})," https://make10000hours.com"]}),E.jsxs("p",{className:"text-text-secondary",children:[E.jsx("strong",{children:"Last Updated:"})," July 8, 2025"]})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Changes to This Policy"}),E.jsx("p",{className:"text-text-secondary",children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'})]})]})]}),E.jsxs("div",{className:"mt-8 pt-8 border-t border-border",children:[E.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"About Focus Time Tracker"}),E.jsx("p",{className:"text-text-secondary",children:"Focus Time Tracker is a Chrome extension designed to help you track your website usage time and maintain focus during work sessions. All your data is stored locally on your device for maximum privacy and security."})]})]})});let cz=!1,uz=null;const Yke=ye.memo(()=>{const n=vs(),e=$g(),{isRightSidebarOpen:t,toggleRightSidebar:r,toggleLeftSidebar:i}=tc(),{setIsAddingTask:a}=rn(),{toggleDeepFocus:o}=u_e(),{start:s,pause:l,isRunning:c}=pi(),u=pi(m=>m.enableStartPauseBtn),d=K.useCallback(m=>{e(m)},[e]),h=K.useCallback(()=>{t||r(),a(!0)},[t,r,a]),f=K.useCallback(()=>{c?l():s()},[c,l,s]);return K.useEffect(()=>{if(cz)return uz||void 0;cz=!0,console.log("🔧 GlobalKeyboardShortcuts: Component mounted and event listener attached");const m=y=>{const w=y.target,_=w.tagName==="INPUT"||w.tagName==="TEXTAREA"||w.isContentEditable||w.getAttribute("role")==="textbox";if(y.code==="Space"&&!_&&(n.pathname==="/pomodoro"||n.pathname==="/")&&u){y.preventDefault(),console.log("🔑 Space detected - toggling pomodoro timer"),f();return}if(y.shiftKey&&(y.key==="D"||y.key==="d")&&!_){console.log("🔑 Shift+D detected - toggling deep focus mode"),y.preventDefault(),o();return}y.shiftKey&&y.key==="N"&&!_&&(console.log("🔑 Shift+N detected - creating new task"),y.preventDefault(),h()),y.metaKey&&(y.key==="\\"||y.key==="|")&&(console.log("🔑 Cmd+\\ detected - toggling right sidebar"),y.preventDefault(),r()),y.altKey&&(y.key==="\\"||y.key==="|"||y.code==="Backslash")&&(console.log("🔑 Alt+\\ detected - toggling left sidebar"),y.preventDefault(),i()),_||((y.key==="P"||y.key==="p")&&(console.log("🔑 P detected - navigating to Pomodoro Timer"),y.preventDefault(),d("/pomodoro")),(y.key==="C"||y.key==="c")&&(console.log("🔑 C detected - navigating to Calendar"),y.preventDefault(),d("/calendar")),(y.key==="T"||y.key==="t")&&(console.log("🔑 T detected - navigating to Task Management"),y.preventDefault(),d("/projects")),(y.key==="I"||y.key==="i")&&(console.log("🔑 I detected - navigating to Productivity Insights"),y.preventDefault(),d("/dashboard")),(y.key==="F"||y.key==="f")&&(console.log("🔑 F detected - navigating to Deep Focus"),y.preventDefault(),d("/deep-focus")),(y.key==="D"||y.key==="d")&&!y.shiftKey&&(console.log("🔑 D detected - navigating to Calendar Day view"),y.preventDefault(),d("/calendar?view=day")),(y.key==="W"||y.key==="w")&&(console.log("🔑 W detected - navigating to Calendar Week view"),y.preventDefault(),d("/calendar?view=week")),(y.key==="M"||y.key==="m")&&(console.log("🔑 M detected - navigating to Calendar Month view"),y.preventDefault(),d("/calendar?view=month")))};document.addEventListener("keydown",m);const v=()=>{document.removeEventListener("keydown",m),cz=!1,uz=null};return uz=v,v},[n.pathname,u,o]),null});Yke.displayName="GlobalKeyboardShortcuts";const BMt=()=>{const{initialize:n,user:e,isLoading:t,isInitialized:r}=Rn(),{initializeTheme:i}=EW();unt(),K.useEffect(()=>{let c=null;const u=()=>{const{isRunning:h,isActiveDevice:f}=pi.getState();c&&(clearInterval(c),c=null),h&&f&&(c=setInterval(()=>{pi.getState().tick()},1e3))};u();const d=pi.subscribe((h,f)=>{(h.isRunning!==f.isRunning||h.isActiveDevice!==f.isActiveDevice)&&u()});return()=>{c&&clearInterval(c),d(),Hq.cleanup()}},[]),K.useEffect(()=>{var c;n(),i(),Hq.initialize(),setTimeout(()=>{Uxe()},2e3);try{const u=localStorage.getItem("focus-time-storage");if(u){const d=JSON.parse(u);if(d.state&&d.state.focusStreak&&d.state.focusStreak.streakDates){const h=(c=d.state.focusStreak.streakDates[0])==null?void 0:c.date;h&&typeof h=="string"&&console.log("Converting date format in localStorage")}}}catch(u){console.error("Error with localStorage data, clearing storage:",u),localStorage.removeItem("focus-time-storage"),window.location.reload()}},[]),K.useEffect(()=>{const c=async u=>{var h,f,m,v;const d=Qd.getState();if(d.isDeepFocusActive){const y=((f=(h=window.performance)==null?void 0:h.navigation)==null?void 0:f.type)===1||((v=(m=window.performance)==null?void 0:m.getEntriesByType("navigation")[0])==null?void 0:v.type)==="reload";d.setReloading(y),y||(u.preventDefault(),u.returnValue="",await d.disableDeepFocus())}};return window.addEventListener("beforeunload",c),()=>window.removeEventListener("beforeunload",c)},[]);const a=()=>E.jsx(aoe,{rightSidebarContent:E.jsx(__e,{}),children:E.jsx(rBe,{})}),o=()=>{const{isLeftSidebarOpen:c}=tc();return E.jsx("div",{className:"min-h-screen bg-background-primary",children:E.jsxs("div",{className:"flex h-screen overflow-hidden",children:[E.jsx("div",{className:`${c?"w-64":"w-0"} transition-all duration-300 overflow-hidden`,children:E.jsx(ET,{})}),E.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[E.jsx(d_e,{}),E.jsx("div",{className:"flex-1 overflow-auto",children:E.jsx($Mt,{})})]})]})})},s=()=>E.jsx(ont,{children:E.jsx(ant,{})}),l=()=>E.jsx(aoe,{children:E.jsx(LMt,{})});return r?(typeof window<"u"&&(window.testDeepFocusFixes=GS),E.jsx(wet,{children:E.jsxs(k2e,{children:[E.jsx(jMt,{}),E.jsx(Yke,{},"global-shortcuts"),E.jsx(FMt,{children:E.jsxs(a2e,{children:[E.jsx(Fd,{path:"/",element:E.jsx(a,{})}),E.jsx(Fd,{path:"pomodoro",element:E.jsx(a,{})}),E.jsx(Fd,{path:"projects",element:E.jsx(s,{})}),E.jsxs(Fd,{path:"dashboard/*",element:E.jsx(Xtt,{}),children:[E.jsx(Fd,{index:!0,element:E.jsx(GQe,{})}),E.jsx(Fd,{path:"settings",element:E.jsx(brt,{})})]}),E.jsx(Fd,{path:"calendar",element:E.jsx(zat,{})}),E.jsx(Fd,{path:"deep-focus",element:E.jsx(ZEt,{})}),E.jsx(Fd,{path:"data-sync",element:E.jsx(l,{})}),E.jsx(Fd,{path:"support",element:E.jsx(o,{})})]})}),E.jsx(lnt,{}),E.jsx(AMt,{})]})})):E.jsx(QEt,{title:"Make10000hours",subtitle:"Setting up your workspace..."})},UMt=n=>{n&&n instanceof Function&&Fr(async()=>{const{getCLS:e,getFID:t,getFCP:r,getLCP:i,getTTFB:a}=await import("./web-vitals-CFX8QzIp.js");return{getCLS:e,getFID:t,getFCP:r,getLCP:i,getTTFB:a}},[]).then(({getCLS:e,getFID:t,getFCP:r,getLCP:i,getTTFB:a})=>{e(n),t(n),r(n),i(n),a(n)})};lIe.createRoot(document.getElementById("root")).render(E.jsx(ye.StrictMode,{children:E.jsx(uIe,{children:E.jsx(BMt,{})})}));UMt(console.log);export{vl as F,$r as O,GM as b,$o as d,Rn as u};
